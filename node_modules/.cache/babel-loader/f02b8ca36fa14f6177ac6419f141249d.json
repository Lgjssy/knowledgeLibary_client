{"ast":null,"code":"require(\"core-js/modules/es.error.cause.js\");require(\"core-js/modules/web.immediate.js\");require(\"core-js/modules/web.dom-exception.stack.js\");require(\"core-js/modules/es.typed-array.at.js\");require(\"core-js/modules/es.typed-array.set.js\");require(\"core-js/modules/esnext.typed-array.find-last.js\");require(\"core-js/modules/esnext.typed-array.find-last-index.js\");/**\r\n * Copyright (c) Tiny Technologies, Inc. All rights reserved.\r\n * Licensed under the LGPL or a commercial license.\r\n * For LGPL see License.txt in the project root for license information.\r\n * For commercial licenses see https://www.tiny.cloud/\r\n *\r\n * Version: 5.10.7 (2022-12-06)\r\n */(function(){'use strict';var typeOf$1=function(x){if(x===null){return'null';}if(x===undefined){return'undefined';}var t=typeof x;if(t==='object'&&(Array.prototype.isPrototypeOf(x)||x.constructor&&x.constructor.name==='Array')){return'array';}if(t==='object'&&(String.prototype.isPrototypeOf(x)||x.constructor&&x.constructor.name==='String')){return'string';}return t;};var isEquatableType=function(x){return['undefined','boolean','number','string','function','xml','null'].indexOf(x)!==-1;};var sort$1=function(xs,compareFn){var clone=Array.prototype.slice.call(xs);return clone.sort(compareFn);};var contramap=function(eqa,f){return eq$2(function(x,y){return eqa.eq(f(x),f(y));});};var eq$2=function(f){return{eq:f};};var tripleEq=eq$2(function(x,y){return x===y;});var eqString=tripleEq;var eqArray=function(eqa){return eq$2(function(x,y){if(x.length!==y.length){return false;}var len=x.length;for(var i=0;i<len;i++){if(!eqa.eq(x[i],y[i])){return false;}}return true;});};var eqSortedArray=function(eqa,compareFn){return contramap(eqArray(eqa),function(xs){return sort$1(xs,compareFn);});};var eqRecord=function(eqa){return eq$2(function(x,y){var kx=Object.keys(x);var ky=Object.keys(y);if(!eqSortedArray(eqString).eq(kx,ky)){return false;}var len=kx.length;for(var i=0;i<len;i++){var q=kx[i];if(!eqa.eq(x[q],y[q])){return false;}}return true;});};var eqAny=eq$2(function(x,y){if(x===y){return true;}var tx=typeOf$1(x);var ty=typeOf$1(y);if(tx!==ty){return false;}if(isEquatableType(tx)){return x===y;}else if(tx==='array'){return eqArray(eqAny).eq(x,y);}else if(tx==='object'){return eqRecord(eqAny).eq(x,y);}return false;});var typeOf=function(x){var t=typeof x;if(x===null){return'null';}else if(t==='object'&&(Array.prototype.isPrototypeOf(x)||x.constructor&&x.constructor.name==='Array')){return'array';}else if(t==='object'&&(String.prototype.isPrototypeOf(x)||x.constructor&&x.constructor.name==='String')){return'string';}else{return t;}};var isType$1=function(type){return function(value){return typeOf(value)===type;};};var isSimpleType=function(type){return function(value){return typeof value===type;};};var eq$1=function(t){return function(a){return t===a;};};var isString$1=isType$1('string');var isObject=isType$1('object');var isArray$1=isType$1('array');var isNull=eq$1(null);var isBoolean=isSimpleType('boolean');var isUndefined=eq$1(undefined);var isNullable=function(a){return a===null||a===undefined;};var isNonNullable=function(a){return!isNullable(a);};var isFunction=isSimpleType('function');var isNumber=isSimpleType('number');var noop=function(){};var compose=function(fa,fb){return function(){var args=[];for(var _i=0;_i<arguments.length;_i++){args[_i]=arguments[_i];}return fa(fb.apply(null,args));};};var compose1=function(fbc,fab){return function(a){return fbc(fab(a));};};var constant=function(value){return function(){return value;};};var identity=function(x){return x;};var tripleEquals=function(a,b){return a===b;};function curry(fn){var initialArgs=[];for(var _i=1;_i<arguments.length;_i++){initialArgs[_i-1]=arguments[_i];}return function(){var restArgs=[];for(var _i=0;_i<arguments.length;_i++){restArgs[_i]=arguments[_i];}var all=initialArgs.concat(restArgs);return fn.apply(null,all);};}var not=function(f){return function(t){return!f(t);};};var die=function(msg){return function(){throw new Error(msg);};};var apply=function(f){return f();};var call=function(f){f();};var never=constant(false);var always=constant(true);var none=function(){return NONE;};var NONE=function(){var call=function(thunk){return thunk();};var id=identity;var me={fold:function(n,_s){return n();},isSome:never,isNone:always,getOr:id,getOrThunk:call,getOrDie:function(msg){throw new Error(msg||'error: getOrDie called on none.');},getOrNull:constant(null),getOrUndefined:constant(undefined),or:id,orThunk:call,map:none,each:noop,bind:none,exists:never,forall:always,filter:function(){return none();},toArray:function(){return[];},toString:constant('none()')};return me;}();var some=function(a){var constant_a=constant(a);var self=function(){return me;};var bind=function(f){return f(a);};var me={fold:function(n,s){return s(a);},isSome:always,isNone:never,getOr:constant_a,getOrThunk:constant_a,getOrDie:constant_a,getOrNull:constant_a,getOrUndefined:constant_a,or:self,orThunk:self,map:function(f){return some(f(a));},each:function(f){f(a);},bind:bind,exists:bind,forall:bind,filter:function(f){return f(a)?me:NONE;},toArray:function(){return[a];},toString:function(){return'some('+a+')';}};return me;};var from$1=function(value){return value===null||value===undefined?NONE:some(value);};var Optional={some:some,none:none,from:from$1};var nativeSlice=Array.prototype.slice;var nativeIndexOf=Array.prototype.indexOf;var nativePush=Array.prototype.push;var rawIndexOf=function(ts,t){return nativeIndexOf.call(ts,t);};var indexOf$2=function(xs,x){var r=rawIndexOf(xs,x);return r===-1?Optional.none():Optional.some(r);};var contains$3=function(xs,x){return rawIndexOf(xs,x)>-1;};var exists=function(xs,pred){for(var i=0,len=xs.length;i<len;i++){var x=xs[i];if(pred(x,i)){return true;}}return false;};var map$3=function(xs,f){var len=xs.length;var r=new Array(len);for(var i=0;i<len;i++){var x=xs[i];r[i]=f(x,i);}return r;};var each$k=function(xs,f){for(var i=0,len=xs.length;i<len;i++){var x=xs[i];f(x,i);}};var eachr=function(xs,f){for(var i=xs.length-1;i>=0;i--){var x=xs[i];f(x,i);}};var partition=function(xs,pred){var pass=[];var fail=[];for(var i=0,len=xs.length;i<len;i++){var x=xs[i];var arr=pred(x,i)?pass:fail;arr.push(x);}return{pass:pass,fail:fail};};var filter$4=function(xs,pred){var r=[];for(var i=0,len=xs.length;i<len;i++){var x=xs[i];if(pred(x,i)){r.push(x);}}return r;};var foldr=function(xs,f,acc){eachr(xs,function(x,i){acc=f(acc,x,i);});return acc;};var foldl=function(xs,f,acc){each$k(xs,function(x,i){acc=f(acc,x,i);});return acc;};var findUntil$1=function(xs,pred,until){for(var i=0,len=xs.length;i<len;i++){var x=xs[i];if(pred(x,i)){return Optional.some(x);}else if(until(x,i)){break;}}return Optional.none();};var find$3=function(xs,pred){return findUntil$1(xs,pred,never);};var findIndex$2=function(xs,pred){for(var i=0,len=xs.length;i<len;i++){var x=xs[i];if(pred(x,i)){return Optional.some(i);}}return Optional.none();};var flatten=function(xs){var r=[];for(var i=0,len=xs.length;i<len;++i){if(!isArray$1(xs[i])){throw new Error('Arr.flatten item '+i+' was not an array, input: '+xs);}nativePush.apply(r,xs[i]);}return r;};var bind=function(xs,f){return flatten(map$3(xs,f));};var forall=function(xs,pred){for(var i=0,len=xs.length;i<len;++i){var x=xs[i];if(pred(x,i)!==true){return false;}}return true;};var reverse=function(xs){var r=nativeSlice.call(xs,0);r.reverse();return r;};var difference=function(a1,a2){return filter$4(a1,function(x){return!contains$3(a2,x);});};var mapToObject=function(xs,f){var r={};for(var i=0,len=xs.length;i<len;i++){var x=xs[i];r[String(x)]=f(x,i);}return r;};var sort=function(xs,comparator){var copy=nativeSlice.call(xs,0);copy.sort(comparator);return copy;};var get$a=function(xs,i){return i>=0&&i<xs.length?Optional.some(xs[i]):Optional.none();};var head=function(xs){return get$a(xs,0);};var last$2=function(xs){return get$a(xs,xs.length-1);};var from=isFunction(Array.from)?Array.from:function(x){return nativeSlice.call(x);};var findMap=function(arr,f){for(var i=0;i<arr.length;i++){var r=f(arr[i],i);if(r.isSome()){return r;}}return Optional.none();};var keys=Object.keys;var hasOwnProperty$1=Object.hasOwnProperty;var each$j=function(obj,f){var props=keys(obj);for(var k=0,len=props.length;k<len;k++){var i=props[k];var x=obj[i];f(x,i);}};var map$2=function(obj,f){return tupleMap(obj,function(x,i){return{k:i,v:f(x,i)};});};var tupleMap=function(obj,f){var r={};each$j(obj,function(x,i){var tuple=f(x,i);r[tuple.k]=tuple.v;});return r;};var objAcc=function(r){return function(x,i){r[i]=x;};};var internalFilter=function(obj,pred,onTrue,onFalse){var r={};each$j(obj,function(x,i){(pred(x,i)?onTrue:onFalse)(x,i);});return r;};var bifilter=function(obj,pred){var t={};var f={};internalFilter(obj,pred,objAcc(t),objAcc(f));return{t:t,f:f};};var filter$3=function(obj,pred){var t={};internalFilter(obj,pred,objAcc(t),noop);return t;};var mapToArray=function(obj,f){var r=[];each$j(obj,function(value,name){r.push(f(value,name));});return r;};var values=function(obj){return mapToArray(obj,identity);};var get$9=function(obj,key){return has$2(obj,key)?Optional.from(obj[key]):Optional.none();};var has$2=function(obj,key){return hasOwnProperty$1.call(obj,key);};var hasNonNullableKey=function(obj,key){return has$2(obj,key)&&obj[key]!==undefined&&obj[key]!==null;};var equal$1=function(a1,a2,eq){if(eq===void 0){eq=eqAny;}return eqRecord(eq).eq(a1,a2);};var isArray=Array.isArray;var toArray$1=function(obj){if(!isArray(obj)){var array=[];for(var i=0,l=obj.length;i<l;i++){array[i]=obj[i];}return array;}else{return obj;}};var each$i=function(o,cb,s){var n,l;if(!o){return false;}s=s||o;if(o.length!==undefined){for(n=0,l=o.length;n<l;n++){if(cb.call(s,o[n],n,o)===false){return false;}}}else{for(n in o){if(has$2(o,n)){if(cb.call(s,o[n],n,o)===false){return false;}}}}return true;};var map$1=function(array,callback){var out=[];each$i(array,function(item,index){out.push(callback(item,index,array));});return out;};var filter$2=function(a,f){var o=[];each$i(a,function(v,index){if(!f||f(v,index,a)){o.push(v);}});return o;};var indexOf$1=function(a,v){if(a){for(var i=0,l=a.length;i<l;i++){if(a[i]===v){return i;}}}return-1;};var reduce=function(collection,iteratee,accumulator,thisArg){var acc=isUndefined(accumulator)?collection[0]:accumulator;for(var i=0;i<collection.length;i++){acc=iteratee.call(thisArg,acc,collection[i],i);}return acc;};var findIndex$1=function(array,predicate,thisArg){var i,l;for(i=0,l=array.length;i<l;i++){if(predicate.call(thisArg,array[i],i,array)){return i;}}return-1;};var last$1=function(collection){return collection[collection.length-1];};var __assign=function(){__assign=Object.assign||function __assign(t){for(var s,i=1,n=arguments.length;i<n;i++){s=arguments[i];for(var p in s)if(Object.prototype.hasOwnProperty.call(s,p))t[p]=s[p];}return t;};return __assign.apply(this,arguments);};function __rest(s,e){var t={};for(var p in s)if(Object.prototype.hasOwnProperty.call(s,p)&&e.indexOf(p)<0)t[p]=s[p];if(s!=null&&typeof Object.getOwnPropertySymbols==='function')for(var i=0,p=Object.getOwnPropertySymbols(s);i<p.length;i++){if(e.indexOf(p[i])<0&&Object.prototype.propertyIsEnumerable.call(s,p[i]))t[p[i]]=s[p[i]];}return t;}function __spreadArray(to,from,pack){if(pack||arguments.length===2)for(var i=0,l=from.length,ar;i<l;i++){if(ar||!(i in from)){if(!ar)ar=Array.prototype.slice.call(from,0,i);ar[i]=from[i];}}return to.concat(ar||Array.prototype.slice.call(from));}var cached=function(f){var called=false;var r;return function(){var args=[];for(var _i=0;_i<arguments.length;_i++){args[_i]=arguments[_i];}if(!called){called=true;r=f.apply(null,args);}return r;};};var DeviceType=function(os,browser,userAgent,mediaMatch){var isiPad=os.isiOS()&&/ipad/i.test(userAgent)===true;var isiPhone=os.isiOS()&&!isiPad;var isMobile=os.isiOS()||os.isAndroid();var isTouch=isMobile||mediaMatch('(pointer:coarse)');var isTablet=isiPad||!isiPhone&&isMobile&&mediaMatch('(min-device-width:768px)');var isPhone=isiPhone||isMobile&&!isTablet;var iOSwebview=browser.isSafari()&&os.isiOS()&&/safari/i.test(userAgent)===false;var isDesktop=!isPhone&&!isTablet&&!iOSwebview;return{isiPad:constant(isiPad),isiPhone:constant(isiPhone),isTablet:constant(isTablet),isPhone:constant(isPhone),isTouch:constant(isTouch),isAndroid:os.isAndroid,isiOS:os.isiOS,isWebView:constant(iOSwebview),isDesktop:constant(isDesktop)};};var firstMatch=function(regexes,s){for(var i=0;i<regexes.length;i++){var x=regexes[i];if(x.test(s)){return x;}}return undefined;};var find$2=function(regexes,agent){var r=firstMatch(regexes,agent);if(!r){return{major:0,minor:0};}var group=function(i){return Number(agent.replace(r,'$'+i));};return nu$4(group(1),group(2));};var detect$3=function(versionRegexes,agent){var cleanedAgent=String(agent).toLowerCase();if(versionRegexes.length===0){return unknown$2();}return find$2(versionRegexes,cleanedAgent);};var unknown$2=function(){return nu$4(0,0);};var nu$4=function(major,minor){return{major:major,minor:minor};};var Version={nu:nu$4,detect:detect$3,unknown:unknown$2};var detectBrowser$1=function(browsers,userAgentData){return findMap(userAgentData.brands,function(uaBrand){var lcBrand=uaBrand.brand.toLowerCase();return find$3(browsers,function(browser){var _a;return lcBrand===((_a=browser.brand)===null||_a===void 0?void 0:_a.toLowerCase());}).map(function(info){return{current:info.name,version:Version.nu(parseInt(uaBrand.version,10),0)};});});};var detect$2=function(candidates,userAgent){var agent=String(userAgent).toLowerCase();return find$3(candidates,function(candidate){return candidate.search(agent);});};var detectBrowser=function(browsers,userAgent){return detect$2(browsers,userAgent).map(function(browser){var version=Version.detect(browser.versionRegexes,userAgent);return{current:browser.name,version:version};});};var detectOs=function(oses,userAgent){return detect$2(oses,userAgent).map(function(os){var version=Version.detect(os.versionRegexes,userAgent);return{current:os.name,version:version};});};var removeFromStart=function(str,numChars){return str.substring(numChars);};var checkRange=function(str,substr,start){return substr===''||str.length>=substr.length&&str.substr(start,start+substr.length)===substr;};var removeLeading=function(str,prefix){return startsWith(str,prefix)?removeFromStart(str,prefix.length):str;};var contains$2=function(str,substr){return str.indexOf(substr)!==-1;};var startsWith=function(str,prefix){return checkRange(str,prefix,0);};var blank=function(r){return function(s){return s.replace(r,'');};};var trim$4=blank(/^\\s+|\\s+$/g);var lTrim=blank(/^\\s+/g);var rTrim=blank(/\\s+$/g);var isNotEmpty=function(s){return s.length>0;};var isEmpty$3=function(s){return!isNotEmpty(s);};var normalVersionRegex=/.*?version\\/\\ ?([0-9]+)\\.([0-9]+).*/;var checkContains=function(target){return function(uastring){return contains$2(uastring,target);};};var browsers=[{name:'Edge',versionRegexes:[/.*?edge\\/ ?([0-9]+)\\.([0-9]+)$/],search:function(uastring){return contains$2(uastring,'edge/')&&contains$2(uastring,'chrome')&&contains$2(uastring,'safari')&&contains$2(uastring,'applewebkit');}},{name:'Chrome',brand:'Chromium',versionRegexes:[/.*?chrome\\/([0-9]+)\\.([0-9]+).*/,normalVersionRegex],search:function(uastring){return contains$2(uastring,'chrome')&&!contains$2(uastring,'chromeframe');}},{name:'IE',versionRegexes:[/.*?msie\\ ?([0-9]+)\\.([0-9]+).*/,/.*?rv:([0-9]+)\\.([0-9]+).*/],search:function(uastring){return contains$2(uastring,'msie')||contains$2(uastring,'trident');}},{name:'Opera',versionRegexes:[normalVersionRegex,/.*?opera\\/([0-9]+)\\.([0-9]+).*/],search:checkContains('opera')},{name:'Firefox',versionRegexes:[/.*?firefox\\/\\ ?([0-9]+)\\.([0-9]+).*/],search:checkContains('firefox')},{name:'Safari',versionRegexes:[normalVersionRegex,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:function(uastring){return(contains$2(uastring,'safari')||contains$2(uastring,'mobile/'))&&contains$2(uastring,'applewebkit');}}];var oses=[{name:'Windows',search:checkContains('win'),versionRegexes:[/.*?windows\\ nt\\ ?([0-9]+)\\.([0-9]+).*/]},{name:'iOS',search:function(uastring){return contains$2(uastring,'iphone')||contains$2(uastring,'ipad');},versionRegexes:[/.*?version\\/\\ ?([0-9]+)\\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:'Android',search:checkContains('android'),versionRegexes:[/.*?android\\ ?([0-9]+)\\.([0-9]+).*/]},{name:'OSX',search:checkContains('mac os x'),versionRegexes:[/.*?mac\\ os\\ x\\ ?([0-9]+)_([0-9]+).*/]},{name:'Linux',search:checkContains('linux'),versionRegexes:[]},{name:'Solaris',search:checkContains('sunos'),versionRegexes:[]},{name:'FreeBSD',search:checkContains('freebsd'),versionRegexes:[]},{name:'ChromeOS',search:checkContains('cros'),versionRegexes:[/.*?chrome\\/([0-9]+)\\.([0-9]+).*/]}];var PlatformInfo={browsers:constant(browsers),oses:constant(oses)};var edge='Edge';var chrome='Chrome';var ie$1='IE';var opera='Opera';var firefox='Firefox';var safari='Safari';var unknown$1=function(){return nu$3({current:undefined,version:Version.unknown()});};var nu$3=function(info){var current=info.current;var version=info.version;var isBrowser=function(name){return function(){return current===name;};};return{current:current,version:version,isEdge:isBrowser(edge),isChrome:isBrowser(chrome),isIE:isBrowser(ie$1),isOpera:isBrowser(opera),isFirefox:isBrowser(firefox),isSafari:isBrowser(safari)};};var Browser={unknown:unknown$1,nu:nu$3,edge:constant(edge),chrome:constant(chrome),ie:constant(ie$1),opera:constant(opera),firefox:constant(firefox),safari:constant(safari)};var windows='Windows';var ios='iOS';var android='Android';var linux='Linux';var osx='OSX';var solaris='Solaris';var freebsd='FreeBSD';var chromeos='ChromeOS';var unknown=function(){return nu$2({current:undefined,version:Version.unknown()});};var nu$2=function(info){var current=info.current;var version=info.version;var isOS=function(name){return function(){return current===name;};};return{current:current,version:version,isWindows:isOS(windows),isiOS:isOS(ios),isAndroid:isOS(android),isOSX:isOS(osx),isLinux:isOS(linux),isSolaris:isOS(solaris),isFreeBSD:isOS(freebsd),isChromeOS:isOS(chromeos)};};var OperatingSystem={unknown:unknown,nu:nu$2,windows:constant(windows),ios:constant(ios),android:constant(android),linux:constant(linux),osx:constant(osx),solaris:constant(solaris),freebsd:constant(freebsd),chromeos:constant(chromeos)};var detect$1=function(userAgent,userAgentDataOpt,mediaMatch){var browsers=PlatformInfo.browsers();var oses=PlatformInfo.oses();var browser=userAgentDataOpt.bind(function(userAgentData){return detectBrowser$1(browsers,userAgentData);}).orThunk(function(){return detectBrowser(browsers,userAgent);}).fold(Browser.unknown,Browser.nu);var os=detectOs(oses,userAgent).fold(OperatingSystem.unknown,OperatingSystem.nu);var deviceType=DeviceType(os,browser,userAgent,mediaMatch);return{browser:browser,os:os,deviceType:deviceType};};var PlatformDetection={detect:detect$1};var mediaMatch=function(query){return window.matchMedia(query).matches;};var platform$2=cached(function(){return PlatformDetection.detect(navigator.userAgent,Optional.from(navigator.userAgentData),mediaMatch);});var detect=function(){return platform$2();};var userAgent=navigator.userAgent;var platform$1=detect();var browser$4=platform$1.browser;var os=platform$1.os;var deviceType=platform$1.deviceType;var webkit=/WebKit/.test(userAgent)&&!browser$4.isEdge();var fileApi='FormData'in window&&'FileReader'in window&&'URL'in window&&!!URL.createObjectURL;var windowsPhone=userAgent.indexOf('Windows Phone')!==-1;var Env={opera:browser$4.isOpera(),webkit:webkit,ie:browser$4.isIE()||browser$4.isEdge()?browser$4.version.major:false,gecko:browser$4.isFirefox(),mac:os.isOSX()||os.isiOS(),iOS:deviceType.isiPad()||deviceType.isiPhone(),android:os.isAndroid(),contentEditable:true,transparentSrc:'data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7',caretAfter:true,range:window.getSelection&&'Range'in window,documentMode:browser$4.isIE()?document.documentMode||7:10,fileApi:fileApi,ceFalse:true,cacheSuffix:null,container:null,experimentalShadowDom:false,canHaveCSP:!browser$4.isIE(),desktop:deviceType.isDesktop(),windowsPhone:windowsPhone,browser:{current:browser$4.current,version:browser$4.version,isChrome:browser$4.isChrome,isEdge:browser$4.isEdge,isFirefox:browser$4.isFirefox,isIE:browser$4.isIE,isOpera:browser$4.isOpera,isSafari:browser$4.isSafari},os:{current:os.current,version:os.version,isAndroid:os.isAndroid,isChromeOS:os.isChromeOS,isFreeBSD:os.isFreeBSD,isiOS:os.isiOS,isLinux:os.isLinux,isOSX:os.isOSX,isSolaris:os.isSolaris,isWindows:os.isWindows},deviceType:{isDesktop:deviceType.isDesktop,isiPad:deviceType.isiPad,isiPhone:deviceType.isiPhone,isPhone:deviceType.isPhone,isTablet:deviceType.isTablet,isTouch:deviceType.isTouch,isWebView:deviceType.isWebView}};var whiteSpaceRegExp$2=/^\\s*|\\s*$/g;var trim$3=function(str){return str===null||str===undefined?'':(''+str).replace(whiteSpaceRegExp$2,'');};var is$3=function(obj,type){if(!type){return obj!==undefined;}if(type==='array'&&isArray(obj)){return true;}return typeof obj===type;};var makeMap$4=function(items,delim,map){var i;items=items||[];delim=delim||',';if(typeof items==='string'){items=items.split(delim);}map=map||{};i=items.length;while(i--){map[items[i]]={};}return map;};var hasOwnProperty=has$2;var create$9=function(s,p,root){var self=this;var sp,scn,c,de=0;s=/^((static) )?([\\w.]+)(:([\\w.]+))?/.exec(s);var cn=s[3].match(/(^|\\.)(\\w+)$/i)[2];var ns=self.createNS(s[3].replace(/\\.\\w+$/,''),root);if(ns[cn]){return;}if(s[2]==='static'){ns[cn]=p;if(this.onCreate){this.onCreate(s[2],s[3],ns[cn]);}return;}if(!p[cn]){p[cn]=function(){};de=1;}ns[cn]=p[cn];self.extend(ns[cn].prototype,p);if(s[5]){sp=self.resolve(s[5]).prototype;scn=s[5].match(/\\.(\\w+)$/i)[1];c=ns[cn];if(de){ns[cn]=function(){return sp[scn].apply(this,arguments);};}else{ns[cn]=function(){this.parent=sp[scn];return c.apply(this,arguments);};}ns[cn].prototype[cn]=ns[cn];self.each(sp,function(f,n){ns[cn].prototype[n]=sp[n];});self.each(p,function(f,n){if(sp[n]){ns[cn].prototype[n]=function(){this.parent=sp[n];return f.apply(this,arguments);};}else{if(n!==cn){ns[cn].prototype[n]=f;}}});}self.each(p.static,function(f,n){ns[cn][n]=f;});};var extend$6=function(obj){var exts=[];for(var _i=1;_i<arguments.length;_i++){exts[_i-1]=arguments[_i];}for(var i=0;i<exts.length;i++){var ext=exts[i];for(var name_1 in ext){if(has$2(ext,name_1)){var value=ext[name_1];if(value!==undefined){obj[name_1]=value;}}}}return obj;};var walk$3=function(o,f,n,s){s=s||this;if(o){if(n){o=o[n];}each$i(o,function(o,i){if(f.call(s,o,i,n)===false){return false;}walk$3(o,f,n,s);});}};var createNS=function(n,o){var i,v;o=o||window;n=n.split('.');for(i=0;i<n.length;i++){v=n[i];if(!o[v]){o[v]={};}o=o[v];}return o;};var resolve$3=function(n,o){var i,l;o=o||window;n=n.split('.');for(i=0,l=n.length;i<l;i++){o=o[n[i]];if(!o){break;}}return o;};var explode$4=function(s,d){if(!s||is$3(s,'array')){return s;}return map$1(s.split(d||','),trim$3);};var _addCacheSuffix=function(url){var cacheSuffix=Env.cacheSuffix;if(cacheSuffix){url+=(url.indexOf('?')===-1?'?':'&')+cacheSuffix;}return url;};var Tools={trim:trim$3,isArray:isArray,is:is$3,toArray:toArray$1,makeMap:makeMap$4,each:each$i,map:map$1,grep:filter$2,inArray:indexOf$1,hasOwn:hasOwnProperty,extend:extend$6,create:create$9,walk:walk$3,createNS:createNS,resolve:resolve$3,explode:explode$4,_addCacheSuffix:_addCacheSuffix};var fromHtml$1=function(html,scope){var doc=scope||document;var div=doc.createElement('div');div.innerHTML=html;if(!div.hasChildNodes()||div.childNodes.length>1){console.error('HTML does not have a single root node',html);throw new Error('HTML must have a single root node');}return fromDom$2(div.childNodes[0]);};var fromTag=function(tag,scope){var doc=scope||document;var node=doc.createElement(tag);return fromDom$2(node);};var fromText=function(text,scope){var doc=scope||document;var node=doc.createTextNode(text);return fromDom$2(node);};var fromDom$2=function(node){if(node===null||node===undefined){throw new Error('Node cannot be null or undefined');}return{dom:node};};var fromPoint$1=function(docElm,x,y){return Optional.from(docElm.dom.elementFromPoint(x,y)).map(fromDom$2);};var SugarElement={fromHtml:fromHtml$1,fromTag:fromTag,fromText:fromText,fromDom:fromDom$2,fromPoint:fromPoint$1};var toArray=function(target,f){var r=[];var recurse=function(e){r.push(e);return f(e);};var cur=f(target);do{cur=cur.bind(recurse);}while(cur.isSome());return r;};var compareDocumentPosition=function(a,b,match){return(a.compareDocumentPosition(b)&match)!==0;};var documentPositionContainedBy=function(a,b){return compareDocumentPosition(a,b,Node.DOCUMENT_POSITION_CONTAINED_BY);};var COMMENT=8;var DOCUMENT=9;var DOCUMENT_FRAGMENT=11;var ELEMENT=1;var TEXT=3;var is$2=function(element,selector){var dom=element.dom;if(dom.nodeType!==ELEMENT){return false;}else{var elem=dom;if(elem.matches!==undefined){return elem.matches(selector);}else if(elem.msMatchesSelector!==undefined){return elem.msMatchesSelector(selector);}else if(elem.webkitMatchesSelector!==undefined){return elem.webkitMatchesSelector(selector);}else if(elem.mozMatchesSelector!==undefined){return elem.mozMatchesSelector(selector);}else{throw new Error('Browser lacks native selectors');}}};var bypassSelector=function(dom){return dom.nodeType!==ELEMENT&&dom.nodeType!==DOCUMENT&&dom.nodeType!==DOCUMENT_FRAGMENT||dom.childElementCount===0;};var all=function(selector,scope){var base=scope===undefined?document:scope.dom;return bypassSelector(base)?[]:map$3(base.querySelectorAll(selector),SugarElement.fromDom);};var one=function(selector,scope){var base=scope===undefined?document:scope.dom;return bypassSelector(base)?Optional.none():Optional.from(base.querySelector(selector)).map(SugarElement.fromDom);};var eq=function(e1,e2){return e1.dom===e2.dom;};var regularContains=function(e1,e2){var d1=e1.dom;var d2=e2.dom;return d1===d2?false:d1.contains(d2);};var ieContains=function(e1,e2){return documentPositionContainedBy(e1.dom,e2.dom);};var contains$1=function(e1,e2){return detect().browser.isIE()?ieContains(e1,e2):regularContains(e1,e2);};typeof window!=='undefined'?window:Function('return this;')();var name=function(element){var r=element.dom.nodeName;return r.toLowerCase();};var type=function(element){return element.dom.nodeType;};var isType=function(t){return function(element){return type(element)===t;};};var isComment$1=function(element){return type(element)===COMMENT||name(element)==='#comment';};var isElement$6=isType(ELEMENT);var isText$8=isType(TEXT);var isDocument$2=isType(DOCUMENT);var isDocumentFragment$1=isType(DOCUMENT_FRAGMENT);var isTag=function(tag){return function(e){return isElement$6(e)&&name(e)===tag;};};var owner$1=function(element){return SugarElement.fromDom(element.dom.ownerDocument);};var documentOrOwner=function(dos){return isDocument$2(dos)?dos:owner$1(dos);};var documentElement=function(element){return SugarElement.fromDom(documentOrOwner(element).dom.documentElement);};var defaultView=function(element){return SugarElement.fromDom(documentOrOwner(element).dom.defaultView);};var parent=function(element){return Optional.from(element.dom.parentNode).map(SugarElement.fromDom);};var parents$1=function(element,isRoot){var stop=isFunction(isRoot)?isRoot:never;var dom=element.dom;var ret=[];while(dom.parentNode!==null&&dom.parentNode!==undefined){var rawParent=dom.parentNode;var p=SugarElement.fromDom(rawParent);ret.push(p);if(stop(p)===true){break;}else{dom=rawParent;}}return ret;};var siblings=function(element){var filterSelf=function(elements){return filter$4(elements,function(x){return!eq(element,x);});};return parent(element).map(children).map(filterSelf).getOr([]);};var prevSibling=function(element){return Optional.from(element.dom.previousSibling).map(SugarElement.fromDom);};var nextSibling=function(element){return Optional.from(element.dom.nextSibling).map(SugarElement.fromDom);};var prevSiblings=function(element){return reverse(toArray(element,prevSibling));};var nextSiblings=function(element){return toArray(element,nextSibling);};var children=function(element){return map$3(element.dom.childNodes,SugarElement.fromDom);};var child$1=function(element,index){var cs=element.dom.childNodes;return Optional.from(cs[index]).map(SugarElement.fromDom);};var firstChild=function(element){return child$1(element,0);};var lastChild=function(element){return child$1(element,element.dom.childNodes.length-1);};var childNodesCount=function(element){return element.dom.childNodes.length;};var getHead=function(doc){var b=doc.dom.head;if(b===null||b===undefined){throw new Error('Head is not available yet');}return SugarElement.fromDom(b);};var isShadowRoot=function(dos){return isDocumentFragment$1(dos)&&isNonNullable(dos.dom.host);};var supported=isFunction(Element.prototype.attachShadow)&&isFunction(Node.prototype.getRootNode);var isSupported$1=constant(supported);var getRootNode=supported?function(e){return SugarElement.fromDom(e.dom.getRootNode());}:documentOrOwner;var getStyleContainer=function(dos){return isShadowRoot(dos)?dos:getHead(documentOrOwner(dos));};var getShadowRoot=function(e){var r=getRootNode(e);return isShadowRoot(r)?Optional.some(r):Optional.none();};var getShadowHost=function(e){return SugarElement.fromDom(e.dom.host);};var getOriginalEventTarget=function(event){if(isSupported$1()&&isNonNullable(event.target)){var el=SugarElement.fromDom(event.target);if(isElement$6(el)&&isOpenShadowHost(el)){if(event.composed&&event.composedPath){var composedPath=event.composedPath();if(composedPath){return head(composedPath);}}}}return Optional.from(event.target);};var isOpenShadowHost=function(element){return isNonNullable(element.dom.shadowRoot);};var before$4=function(marker,element){var parent$1=parent(marker);parent$1.each(function(v){v.dom.insertBefore(element.dom,marker.dom);});};var after$3=function(marker,element){var sibling=nextSibling(marker);sibling.fold(function(){var parent$1=parent(marker);parent$1.each(function(v){append$1(v,element);});},function(v){before$4(v,element);});};var prepend=function(parent,element){var firstChild$1=firstChild(parent);firstChild$1.fold(function(){append$1(parent,element);},function(v){parent.dom.insertBefore(element.dom,v.dom);});};var append$1=function(parent,element){parent.dom.appendChild(element.dom);};var wrap$3=function(element,wrapper){before$4(element,wrapper);append$1(wrapper,element);};var before$3=function(marker,elements){each$k(elements,function(x){before$4(marker,x);});};var append=function(parent,elements){each$k(elements,function(x){append$1(parent,x);});};var empty=function(element){element.dom.textContent='';each$k(children(element),function(rogue){remove$7(rogue);});};var remove$7=function(element){var dom=element.dom;if(dom.parentNode!==null){dom.parentNode.removeChild(dom);}};var unwrap=function(wrapper){var children$1=children(wrapper);if(children$1.length>0){before$3(wrapper,children$1);}remove$7(wrapper);};var inBody=function(element){var dom=isText$8(element)?element.dom.parentNode:element.dom;if(dom===undefined||dom===null||dom.ownerDocument===null){return false;}var doc=dom.ownerDocument;return getShadowRoot(SugarElement.fromDom(dom)).fold(function(){return doc.body.contains(dom);},compose1(inBody,getShadowHost));};var r=function(left,top){var translate=function(x,y){return r(left+x,top+y);};return{left:left,top:top,translate:translate};};var SugarPosition=r;var boxPosition=function(dom){var box=dom.getBoundingClientRect();return SugarPosition(box.left,box.top);};var firstDefinedOrZero=function(a,b){if(a!==undefined){return a;}else{return b!==undefined?b:0;}};var absolute=function(element){var doc=element.dom.ownerDocument;var body=doc.body;var win=doc.defaultView;var html=doc.documentElement;if(body===element.dom){return SugarPosition(body.offsetLeft,body.offsetTop);}var scrollTop=firstDefinedOrZero(win===null||win===void 0?void 0:win.pageYOffset,html.scrollTop);var scrollLeft=firstDefinedOrZero(win===null||win===void 0?void 0:win.pageXOffset,html.scrollLeft);var clientTop=firstDefinedOrZero(html.clientTop,body.clientTop);var clientLeft=firstDefinedOrZero(html.clientLeft,body.clientLeft);return viewport(element).translate(scrollLeft-clientLeft,scrollTop-clientTop);};var viewport=function(element){var dom=element.dom;var doc=dom.ownerDocument;var body=doc.body;if(body===dom){return SugarPosition(body.offsetLeft,body.offsetTop);}if(!inBody(element)){return SugarPosition(0,0);}return boxPosition(dom);};var get$8=function(_DOC){var doc=_DOC!==undefined?_DOC.dom:document;var x=doc.body.scrollLeft||doc.documentElement.scrollLeft;var y=doc.body.scrollTop||doc.documentElement.scrollTop;return SugarPosition(x,y);};var to=function(x,y,_DOC){var doc=_DOC!==undefined?_DOC.dom:document;var win=doc.defaultView;if(win){win.scrollTo(x,y);}};var intoView=function(element,alignToTop){var isSafari=detect().browser.isSafari();if(isSafari&&isFunction(element.dom.scrollIntoViewIfNeeded)){element.dom.scrollIntoViewIfNeeded(false);}else{element.dom.scrollIntoView(alignToTop);}};var get$7=function(_win){var win=_win===undefined?window:_win;if(detect().browser.isFirefox()){return Optional.none();}else{return Optional.from(win['visualViewport']);}};var bounds=function(x,y,width,height){return{x:x,y:y,width:width,height:height,right:x+width,bottom:y+height};};var getBounds=function(_win){var win=_win===undefined?window:_win;var doc=win.document;var scroll=get$8(SugarElement.fromDom(doc));return get$7(win).fold(function(){var html=win.document.documentElement;var width=html.clientWidth;var height=html.clientHeight;return bounds(scroll.left,scroll.top,width,height);},function(visualViewport){return bounds(Math.max(visualViewport.pageLeft,scroll.left),Math.max(visualViewport.pageTop,scroll.top),visualViewport.width,visualViewport.height);});};var isNodeType=function(type){return function(node){return!!node&&node.nodeType===type;};};var isRestrictedNode=function(node){return!!node&&!Object.getPrototypeOf(node);};var isElement$5=isNodeType(1);var matchNodeNames=function(names){var lowercasedNames=names.map(function(s){return s.toLowerCase();});return function(node){if(node&&node.nodeName){var nodeName=node.nodeName.toLowerCase();return contains$3(lowercasedNames,nodeName);}return false;};};var matchStyleValues=function(name,values){var items=values.toLowerCase().split(' ');return function(node){if(isElement$5(node)){for(var i=0;i<items.length;i++){var computed=node.ownerDocument.defaultView.getComputedStyle(node,null);var cssValue=computed?computed.getPropertyValue(name):null;if(cssValue===items[i]){return true;}}}return false;};};var hasAttribute=function(attrName){return function(node){return isElement$5(node)&&node.hasAttribute(attrName);};};var hasAttributeValue=function(attrName,attrValue){return function(node){return isElement$5(node)&&node.getAttribute(attrName)===attrValue;};};var isBogus$2=function(node){return isElement$5(node)&&node.hasAttribute('data-mce-bogus');};var isBogusAll$1=function(node){return isElement$5(node)&&node.getAttribute('data-mce-bogus')==='all';};var isTable$3=function(node){return isElement$5(node)&&node.tagName==='TABLE';};var hasContentEditableState=function(value){return function(node){if(isElement$5(node)){if(node.contentEditable===value){return true;}if(node.getAttribute('data-mce-contenteditable')===value){return true;}}return false;};};var isTextareaOrInput=matchNodeNames(['textarea','input']);var isText$7=isNodeType(3);var isComment=isNodeType(8);var isDocument$1=isNodeType(9);var isDocumentFragment=isNodeType(11);var isBr$5=matchNodeNames(['br']);var isImg=matchNodeNames(['img']);var isContentEditableTrue$4=hasContentEditableState('true');var isContentEditableFalse$b=hasContentEditableState('false');var isTableCell$5=matchNodeNames(['td','th']);var isMedia$2=matchNodeNames(['video','audio','object','embed']);var is$1=function(lhs,rhs,comparator){if(comparator===void 0){comparator=tripleEquals;}return lhs.exists(function(left){return comparator(left,rhs);});};var cat=function(arr){var r=[];var push=function(x){r.push(x);};for(var i=0;i<arr.length;i++){arr[i].each(push);}return r;};var lift2=function(oa,ob,f){return oa.isSome()&&ob.isSome()?Optional.some(f(oa.getOrDie(),ob.getOrDie())):Optional.none();};var lift3=function(oa,ob,oc,f){return oa.isSome()&&ob.isSome()&&oc.isSome()?Optional.some(f(oa.getOrDie(),ob.getOrDie(),oc.getOrDie())):Optional.none();};var someIf=function(b,a){return b?Optional.some(a):Optional.none();};var isSupported=function(dom){return dom.style!==undefined&&isFunction(dom.style.getPropertyValue);};var rawSet=function(dom,key,value){if(isString$1(value)||isBoolean(value)||isNumber(value)){dom.setAttribute(key,value+'');}else{console.error('Invalid call to Attribute.set. Key ',key,':: Value ',value,':: Element ',dom);throw new Error('Attribute value was not simple');}};var set$1=function(element,key,value){rawSet(element.dom,key,value);};var setAll$1=function(element,attrs){var dom=element.dom;each$j(attrs,function(v,k){rawSet(dom,k,v);});};var get$6=function(element,key){var v=element.dom.getAttribute(key);return v===null?undefined:v;};var getOpt=function(element,key){return Optional.from(get$6(element,key));};var has$1=function(element,key){var dom=element.dom;return dom&&dom.hasAttribute?dom.hasAttribute(key):false;};var remove$6=function(element,key){element.dom.removeAttribute(key);};var clone$3=function(element){return foldl(element.dom.attributes,function(acc,attr){acc[attr.name]=attr.value;return acc;},{});};var internalSet=function(dom,property,value){if(!isString$1(value)){console.error('Invalid call to CSS.set. Property ',property,':: Value ',value,':: Element ',dom);throw new Error('CSS value must be a string: '+value);}if(isSupported(dom)){dom.style.setProperty(property,value);}};var setAll=function(element,css){var dom=element.dom;each$j(css,function(v,k){internalSet(dom,k,v);});};var get$5=function(element,property){var dom=element.dom;var styles=window.getComputedStyle(dom);var r=styles.getPropertyValue(property);return r===''&&!inBody(element)?getUnsafeProperty(dom,property):r;};var getUnsafeProperty=function(dom,property){return isSupported(dom)?dom.style.getPropertyValue(property):'';};var getRaw=function(element,property){var dom=element.dom;var raw=getUnsafeProperty(dom,property);return Optional.from(raw).filter(function(r){return r.length>0;});};var getAllRaw=function(element){var css={};var dom=element.dom;if(isSupported(dom)){for(var i=0;i<dom.style.length;i++){var ruleName=dom.style.item(i);css[ruleName]=dom.style[ruleName];}}return css;};var reflow=function(e){return e.dom.offsetWidth;};var browser$3=detect().browser;var firstElement=function(nodes){return find$3(nodes,isElement$6);};var getTableCaptionDeltaY=function(elm){if(browser$3.isFirefox()&&name(elm)==='table'){return firstElement(children(elm)).filter(function(elm){return name(elm)==='caption';}).bind(function(caption){return firstElement(nextSiblings(caption)).map(function(body){var bodyTop=body.dom.offsetTop;var captionTop=caption.dom.offsetTop;var captionHeight=caption.dom.offsetHeight;return bodyTop<=captionTop?-captionHeight:0;});}).getOr(0);}else{return 0;}};var hasChild=function(elm,child){return elm.children&&contains$3(elm.children,child);};var getPos=function(body,elm,rootElm){var x=0,y=0;var doc=body.ownerDocument;rootElm=rootElm?rootElm:body;if(elm){if(rootElm===body&&elm.getBoundingClientRect&&get$5(SugarElement.fromDom(body),'position')==='static'){var pos=elm.getBoundingClientRect();x=pos.left+(doc.documentElement.scrollLeft||body.scrollLeft)-doc.documentElement.clientLeft;y=pos.top+(doc.documentElement.scrollTop||body.scrollTop)-doc.documentElement.clientTop;return{x:x,y:y};}var offsetParent=elm;while(offsetParent&&offsetParent!==rootElm&&offsetParent.nodeType&&!hasChild(offsetParent,rootElm)){var castOffsetParent=offsetParent;x+=castOffsetParent.offsetLeft||0;y+=castOffsetParent.offsetTop||0;offsetParent=castOffsetParent.offsetParent;}offsetParent=elm.parentNode;while(offsetParent&&offsetParent!==rootElm&&offsetParent.nodeType&&!hasChild(offsetParent,rootElm)){x-=offsetParent.scrollLeft||0;y-=offsetParent.scrollTop||0;offsetParent=offsetParent.parentNode;}y+=getTableCaptionDeltaY(SugarElement.fromDom(elm));}return{x:x,y:y};};var exports$1={},module$1={exports:exports$1};(function(define,exports,module,require){(function(global,factory){typeof exports==='object'&&typeof module!=='undefined'?module.exports=factory():typeof define==='function'&&define.amd?define(factory):(global=typeof globalThis!=='undefined'?globalThis:global||self,global.EphoxContactWrapper=factory());})(this,function(){var commonjsGlobal=typeof globalThis!=='undefined'?globalThis:typeof window!=='undefined'?window:typeof global!=='undefined'?global:typeof self!=='undefined'?self:{};var promise={exports:{}};(function(module){(function(root){var setTimeoutFunc=setTimeout;function noop(){}function bind(fn,thisArg){return function(){fn.apply(thisArg,arguments);};}function Promise(fn){if(typeof this!=='object')throw new TypeError('Promises must be constructed via new');if(typeof fn!=='function')throw new TypeError('not a function');this._state=0;this._handled=false;this._value=undefined;this._deferreds=[];doResolve(fn,this);}function handle(self,deferred){while(self._state===3){self=self._value;}if(self._state===0){self._deferreds.push(deferred);return;}self._handled=true;Promise._immediateFn(function(){var cb=self._state===1?deferred.onFulfilled:deferred.onRejected;if(cb===null){(self._state===1?resolve:reject)(deferred.promise,self._value);return;}var ret;try{ret=cb(self._value);}catch(e){reject(deferred.promise,e);return;}resolve(deferred.promise,ret);});}function resolve(self,newValue){try{if(newValue===self)throw new TypeError('A promise cannot be resolved with itself.');if(newValue&&(typeof newValue==='object'||typeof newValue==='function')){var then=newValue.then;if(newValue instanceof Promise){self._state=3;self._value=newValue;finale(self);return;}else if(typeof then==='function'){doResolve(bind(then,newValue),self);return;}}self._state=1;self._value=newValue;finale(self);}catch(e){reject(self,e);}}function reject(self,newValue){self._state=2;self._value=newValue;finale(self);}function finale(self){if(self._state===2&&self._deferreds.length===0){Promise._immediateFn(function(){if(!self._handled){Promise._unhandledRejectionFn(self._value);}});}for(var i=0,len=self._deferreds.length;i<len;i++){handle(self,self._deferreds[i]);}self._deferreds=null;}function Handler(onFulfilled,onRejected,promise){this.onFulfilled=typeof onFulfilled==='function'?onFulfilled:null;this.onRejected=typeof onRejected==='function'?onRejected:null;this.promise=promise;}function doResolve(fn,self){var done=false;try{fn(function(value){if(done)return;done=true;resolve(self,value);},function(reason){if(done)return;done=true;reject(self,reason);});}catch(ex){if(done)return;done=true;reject(self,ex);}}Promise.prototype['catch']=function(onRejected){return this.then(null,onRejected);};Promise.prototype.then=function(onFulfilled,onRejected){var prom=new this.constructor(noop);handle(this,new Handler(onFulfilled,onRejected,prom));return prom;};Promise.all=function(arr){var args=Array.prototype.slice.call(arr);return new Promise(function(resolve,reject){if(args.length===0)return resolve([]);var remaining=args.length;function res(i,val){try{if(val&&(typeof val==='object'||typeof val==='function')){var then=val.then;if(typeof then==='function'){then.call(val,function(val){res(i,val);},reject);return;}}args[i]=val;if(--remaining===0){resolve(args);}}catch(ex){reject(ex);}}for(var i=0;i<args.length;i++){res(i,args[i]);}});};Promise.resolve=function(value){if(value&&typeof value==='object'&&value.constructor===Promise){return value;}return new Promise(function(resolve){resolve(value);});};Promise.reject=function(value){return new Promise(function(resolve,reject){reject(value);});};Promise.race=function(values){return new Promise(function(resolve,reject){for(var i=0,len=values.length;i<len;i++){values[i].then(resolve,reject);}});};Promise._immediateFn=typeof setImmediate==='function'?function(fn){setImmediate(fn);}:function(fn){setTimeoutFunc(fn,0);};Promise._unhandledRejectionFn=function _unhandledRejectionFn(err){if(typeof console!=='undefined'&&console){console.warn('Possible Unhandled Promise Rejection:',err);}};Promise._setImmediateFn=function _setImmediateFn(fn){Promise._immediateFn=fn;};Promise._setUnhandledRejectionFn=function _setUnhandledRejectionFn(fn){Promise._unhandledRejectionFn=fn;};if(module.exports){module.exports=Promise;}else if(!root.Promise){root.Promise=Promise;}})(commonjsGlobal);})(promise);var promisePolyfill=promise.exports;var Global=function(){if(typeof window!=='undefined'){return window;}else{return Function('return this;')();}}();var promisePolyfill_1={boltExport:Global.Promise||promisePolyfill};return promisePolyfill_1;});})(undefined,exports$1,module$1);var Promise$1=module$1.exports.boltExport;var nu$1=function(baseFn){var data=Optional.none();var callbacks=[];var map=function(f){return nu$1(function(nCallback){get(function(data){nCallback(f(data));});});};var get=function(nCallback){if(isReady()){call(nCallback);}else{callbacks.push(nCallback);}};var set=function(x){if(!isReady()){data=Optional.some(x);run(callbacks);callbacks=[];}};var isReady=function(){return data.isSome();};var run=function(cbs){each$k(cbs,call);};var call=function(cb){data.each(function(x){setTimeout(function(){cb(x);},0);});};baseFn(set);return{get:get,map:map,isReady:isReady};};var pure$1=function(a){return nu$1(function(callback){callback(a);});};var LazyValue={nu:nu$1,pure:pure$1};var errorReporter=function(err){setTimeout(function(){throw err;},0);};var make=function(run){var get=function(callback){run().then(callback,errorReporter);};var map=function(fab){return make(function(){return run().then(fab);});};var bind=function(aFutureB){return make(function(){return run().then(function(v){return aFutureB(v).toPromise();});});};var anonBind=function(futureB){return make(function(){return run().then(function(){return futureB.toPromise();});});};var toLazy=function(){return LazyValue.nu(get);};var toCached=function(){var cache=null;return make(function(){if(cache===null){cache=run();}return cache;});};var toPromise=run;return{map:map,bind:bind,anonBind:anonBind,toLazy:toLazy,toCached:toCached,toPromise:toPromise,get:get};};var nu=function(baseFn){return make(function(){return new Promise$1(baseFn);});};var pure=function(a){return make(function(){return Promise$1.resolve(a);});};var Future={nu:nu,pure:pure};var par$1=function(asyncValues,nu){return nu(function(callback){var r=[];var count=0;var cb=function(i){return function(value){r[i]=value;count++;if(count>=asyncValues.length){callback(r);}};};if(asyncValues.length===0){callback([]);}else{each$k(asyncValues,function(asyncValue,i){asyncValue.get(cb(i));});}});};var par=function(futures){return par$1(futures,Future.nu);};var value$1=function(o){var or=function(_opt){return value$1(o);};var orThunk=function(_f){return value$1(o);};var map=function(f){return value$1(f(o));};var mapError=function(_f){return value$1(o);};var each=function(f){f(o);};var bind=function(f){return f(o);};var fold=function(_,onValue){return onValue(o);};var exists=function(f){return f(o);};var forall=function(f){return f(o);};var toOptional=function(){return Optional.some(o);};return{isValue:always,isError:never,getOr:constant(o),getOrThunk:constant(o),getOrDie:constant(o),or:or,orThunk:orThunk,fold:fold,map:map,mapError:mapError,each:each,bind:bind,exists:exists,forall:forall,toOptional:toOptional};};var error=function(message){var getOrThunk=function(f){return f();};var getOrDie=function(){return die(String(message))();};var or=identity;var orThunk=function(f){return f();};var map=function(_f){return error(message);};var mapError=function(f){return error(f(message));};var bind=function(_f){return error(message);};var fold=function(onError,_){return onError(message);};return{isValue:never,isError:always,getOr:identity,getOrThunk:getOrThunk,getOrDie:getOrDie,or:or,orThunk:orThunk,fold:fold,map:map,mapError:mapError,each:noop,bind:bind,exists:never,forall:always,toOptional:Optional.none};};var fromOption=function(opt,err){return opt.fold(function(){return error(err);},value$1);};var Result={value:value$1,error:error,fromOption:fromOption};var generate$1=function(cases){if(!isArray$1(cases)){throw new Error('cases must be an array');}if(cases.length===0){throw new Error('there must be at least one case');}var constructors=[];var adt={};each$k(cases,function(acase,count){var keys$1=keys(acase);if(keys$1.length!==1){throw new Error('one and only one name per case');}var key=keys$1[0];var value=acase[key];if(adt[key]!==undefined){throw new Error('duplicate key detected:'+key);}else if(key==='cata'){throw new Error('cannot have a case named cata (sorry)');}else if(!isArray$1(value)){throw new Error('case arguments must be an array');}constructors.push(key);adt[key]=function(){var args=[];for(var _i=0;_i<arguments.length;_i++){args[_i]=arguments[_i];}var argLength=args.length;if(argLength!==value.length){throw new Error('Wrong number of arguments to case '+key+'. Expected '+value.length+' ('+value+'), got '+argLength);}var match=function(branches){var branchKeys=keys(branches);if(constructors.length!==branchKeys.length){throw new Error('Wrong number of arguments to match. Expected: '+constructors.join(',')+'\\nActual: '+branchKeys.join(','));}var allReqd=forall(constructors,function(reqKey){return contains$3(branchKeys,reqKey);});if(!allReqd){throw new Error('Not all branches were specified when using match. Specified: '+branchKeys.join(', ')+'\\nRequired: '+constructors.join(', '));}return branches[key].apply(null,args);};return{fold:function(){var foldArgs=[];for(var _i=0;_i<arguments.length;_i++){foldArgs[_i]=arguments[_i];}if(foldArgs.length!==cases.length){throw new Error('Wrong number of arguments to fold. Expected '+cases.length+', got '+foldArgs.length);}var target=foldArgs[count];return target.apply(null,args);},match:match,log:function(label){console.log(label,{constructors:constructors,constructor:key,params:args});}};};});return adt;};var Adt={generate:generate$1};Adt.generate([{bothErrors:['error1','error2']},{firstError:['error1','value2']},{secondError:['value1','error2']},{bothValues:['value1','value2']}]);var unite=function(result){return result.fold(identity,identity);};function ClosestOrAncestor(is,ancestor,scope,a,isRoot){if(is(scope,a)){return Optional.some(scope);}else if(isFunction(isRoot)&&isRoot(scope)){return Optional.none();}else{return ancestor(scope,a,isRoot);}}var ancestor$3=function(scope,predicate,isRoot){var element=scope.dom;var stop=isFunction(isRoot)?isRoot:never;while(element.parentNode){element=element.parentNode;var el=SugarElement.fromDom(element);if(predicate(el)){return Optional.some(el);}else if(stop(el)){break;}}return Optional.none();};var closest$3=function(scope,predicate,isRoot){var is=function(s,test){return test(s);};return ClosestOrAncestor(is,ancestor$3,scope,predicate,isRoot);};var sibling$2=function(scope,predicate){var element=scope.dom;if(!element.parentNode){return Optional.none();}return child(SugarElement.fromDom(element.parentNode),function(x){return!eq(scope,x)&&predicate(x);});};var child=function(scope,predicate){var pred=function(node){return predicate(SugarElement.fromDom(node));};var result=find$3(scope.dom.childNodes,pred);return result.map(SugarElement.fromDom);};var ancestor$2=function(scope,selector,isRoot){return ancestor$3(scope,function(e){return is$2(e,selector);},isRoot);};var descendant=function(scope,selector){return one(selector,scope);};var closest$2=function(scope,selector,isRoot){var is=function(element,selector){return is$2(element,selector);};return ClosestOrAncestor(is,ancestor$2,scope,selector,isRoot);};var promiseObj=window.Promise?window.Promise:Promise$1;var requestAnimationFramePromise;var requestAnimationFrame=function(callback,element){var requestAnimationFrameFunc=window.requestAnimationFrame;var vendors=['ms','moz','webkit'];var featurefill=function(cb){window.setTimeout(cb,0);};for(var i=0;i<vendors.length&&!requestAnimationFrameFunc;i++){requestAnimationFrameFunc=window[vendors[i]+'RequestAnimationFrame'];}if(!requestAnimationFrameFunc){requestAnimationFrameFunc=featurefill;}requestAnimationFrameFunc(callback,element);};var wrappedSetTimeout=function(callback,time){if(typeof time!=='number'){time=0;}return setTimeout(callback,time);};var wrappedSetInterval=function(callback,time){if(typeof time!=='number'){time=1;}return setInterval(callback,time);};var wrappedClearTimeout=function(id){return clearTimeout(id);};var wrappedClearInterval=function(id){return clearInterval(id);};var debounce=function(callback,time){var timer;var func=function(){var args=[];for(var _i=0;_i<arguments.length;_i++){args[_i]=arguments[_i];}clearTimeout(timer);timer=wrappedSetTimeout(function(){callback.apply(this,args);},time);};func.stop=function(){clearTimeout(timer);};return func;};var Delay={requestAnimationFrame:function(callback,element){if(requestAnimationFramePromise){requestAnimationFramePromise.then(callback);return;}requestAnimationFramePromise=new promiseObj(function(resolve){if(!element){element=document.body;}requestAnimationFrame(resolve,element);}).then(callback);},setTimeout:wrappedSetTimeout,setInterval:wrappedSetInterval,setEditorTimeout:function(editor,callback,time){return wrappedSetTimeout(function(){if(!editor.removed){callback();}},time);},setEditorInterval:function(editor,callback,time){var timer=wrappedSetInterval(function(){if(!editor.removed){callback();}else{clearInterval(timer);}},time);return timer;},debounce:debounce,throttle:debounce,clearInterval:wrappedClearInterval,clearTimeout:wrappedClearTimeout};var StyleSheetLoader=function(documentOrShadowRoot,settings){if(settings===void 0){settings={};}var idCount=0;var loadedStates={};var edos=SugarElement.fromDom(documentOrShadowRoot);var doc=documentOrOwner(edos);var maxLoadTime=settings.maxLoadTime||5000;var _setReferrerPolicy=function(referrerPolicy){settings.referrerPolicy=referrerPolicy;};var addStyle=function(element){append$1(getStyleContainer(edos),element);};var removeStyle=function(id){var styleContainer=getStyleContainer(edos);descendant(styleContainer,'#'+id).each(remove$7);};var getOrCreateState=function(url){return get$9(loadedStates,url).getOrThunk(function(){return{id:'mce-u'+idCount++,passed:[],failed:[],count:0};});};var load=function(url,success,failure){var link;var urlWithSuffix=Tools._addCacheSuffix(url);var state=getOrCreateState(urlWithSuffix);loadedStates[urlWithSuffix]=state;state.count++;var resolve=function(callbacks,status){var i=callbacks.length;while(i--){callbacks[i]();}state.status=status;state.passed=[];state.failed=[];if(link){link.onload=null;link.onerror=null;link=null;}};var passed=function(){return resolve(state.passed,2);};var failed=function(){return resolve(state.failed,3);};var wait=function(testCallback,waitCallback){if(!testCallback()){if(Date.now()-startTime<maxLoadTime){Delay.setTimeout(waitCallback);}else{failed();}}};var waitForWebKitLinkLoaded=function(){wait(function(){var styleSheets=documentOrShadowRoot.styleSheets;var i=styleSheets.length;while(i--){var styleSheet=styleSheets[i];var owner=styleSheet.ownerNode;if(owner&&owner.id===link.id){passed();return true;}}return false;},waitForWebKitLinkLoaded);};if(success){state.passed.push(success);}if(failure){state.failed.push(failure);}if(state.status===1){return;}if(state.status===2){passed();return;}if(state.status===3){failed();return;}state.status=1;var linkElem=SugarElement.fromTag('link',doc.dom);setAll$1(linkElem,{rel:'stylesheet',type:'text/css',id:state.id});var startTime=Date.now();if(settings.contentCssCors){set$1(linkElem,'crossOrigin','anonymous');}if(settings.referrerPolicy){set$1(linkElem,'referrerpolicy',settings.referrerPolicy);}link=linkElem.dom;link.onload=waitForWebKitLinkLoaded;link.onerror=failed;addStyle(linkElem);set$1(linkElem,'href',urlWithSuffix);};var loadF=function(url){return Future.nu(function(resolve){load(url,compose(resolve,constant(Result.value(url))),compose(resolve,constant(Result.error(url))));});};var loadAll=function(urls,success,failure){par(map$3(urls,loadF)).get(function(result){var parts=partition(result,function(r){return r.isValue();});if(parts.fail.length>0){failure(parts.fail.map(unite));}else{success(parts.pass.map(unite));}});};var unload=function(url){var urlWithSuffix=Tools._addCacheSuffix(url);get$9(loadedStates,urlWithSuffix).each(function(state){var count=--state.count;if(count===0){delete loadedStates[urlWithSuffix];removeStyle(state.id);}});};var unloadAll=function(urls){each$k(urls,function(url){unload(url);});};return{load:load,loadAll:loadAll,unload:unload,unloadAll:unloadAll,_setReferrerPolicy:_setReferrerPolicy};};var create$8=function(){var map=new WeakMap();var forElement=function(referenceElement,settings){var root=getRootNode(referenceElement);var rootDom=root.dom;return Optional.from(map.get(rootDom)).getOrThunk(function(){var sl=StyleSheetLoader(rootDom,settings);map.set(rootDom,sl);return sl;});};return{forElement:forElement};};var instance=create$8();var DomTreeWalker=function(){function DomTreeWalker(startNode,rootNode){this.node=startNode;this.rootNode=rootNode;this.current=this.current.bind(this);this.next=this.next.bind(this);this.prev=this.prev.bind(this);this.prev2=this.prev2.bind(this);}DomTreeWalker.prototype.current=function(){return this.node;};DomTreeWalker.prototype.next=function(shallow){this.node=this.findSibling(this.node,'firstChild','nextSibling',shallow);return this.node;};DomTreeWalker.prototype.prev=function(shallow){this.node=this.findSibling(this.node,'lastChild','previousSibling',shallow);return this.node;};DomTreeWalker.prototype.prev2=function(shallow){this.node=this.findPreviousNode(this.node,'lastChild','previousSibling',shallow);return this.node;};DomTreeWalker.prototype.findSibling=function(node,startName,siblingName,shallow){var sibling,parent;if(node){if(!shallow&&node[startName]){return node[startName];}if(node!==this.rootNode){sibling=node[siblingName];if(sibling){return sibling;}for(parent=node.parentNode;parent&&parent!==this.rootNode;parent=parent.parentNode){sibling=parent[siblingName];if(sibling){return sibling;}}}}};DomTreeWalker.prototype.findPreviousNode=function(node,startName,siblingName,shallow){var sibling,parent,child;if(node){sibling=node[siblingName];if(this.rootNode&&sibling===this.rootNode){return;}if(sibling){if(!shallow){for(child=sibling[startName];child;child=child[startName]){if(!child[startName]){return child;}}}return sibling;}parent=node.parentNode;if(parent&&parent!==this.rootNode){return parent;}}};return DomTreeWalker;}();var blocks=['article','aside','details','div','dt','figcaption','footer','form','fieldset','header','hgroup','html','main','nav','section','summary','body','p','dl','multicol','dd','figure','address','center','blockquote','h1','h2','h3','h4','h5','h6','listing','xmp','pre','plaintext','menu','dir','ul','ol','li','hr','table','tbody','thead','tfoot','th','tr','td','caption'];var tableCells=['td','th'];var tableSections=['thead','tbody','tfoot'];var textBlocks=['h1','h2','h3','h4','h5','h6','p','div','address','pre','form','blockquote','center','dir','fieldset','header','footer','article','section','hgroup','aside','nav','figure'];var headings=['h1','h2','h3','h4','h5','h6'];var listItems$1=['li','dd','dt'];var lists=['ul','ol','dl'];var wsElements=['pre','script','textarea','style'];var lazyLookup=function(items){var lookup;return function(node){lookup=lookup?lookup:mapToObject(items,always);return has$2(lookup,name(node));};};var isHeading=lazyLookup(headings);var isBlock$2=lazyLookup(blocks);var isTable$2=function(node){return name(node)==='table';};var isInline$1=function(node){return isElement$6(node)&&!isBlock$2(node);};var isBr$4=function(node){return isElement$6(node)&&name(node)==='br';};var isTextBlock$2=lazyLookup(textBlocks);var isList=lazyLookup(lists);var isListItem=lazyLookup(listItems$1);var isTableSection=lazyLookup(tableSections);var isTableCell$4=lazyLookup(tableCells);var isWsPreserveElement=lazyLookup(wsElements);var ancestor$1=function(scope,selector,isRoot){return ancestor$2(scope,selector,isRoot).isSome();};var zeroWidth='\\uFEFF';var nbsp='\\xA0';var isZwsp$1=function(char){return char===zeroWidth;};var removeZwsp=function(s){return s.replace(/\\uFEFF/g,'');};var ZWSP$1=zeroWidth;var isZwsp=isZwsp$1;var trim$2=removeZwsp;var isElement$4=isElement$5;var isText$6=isText$7;var isCaretContainerBlock$1=function(node){if(isText$6(node)){node=node.parentNode;}return isElement$4(node)&&node.hasAttribute('data-mce-caret');};var isCaretContainerInline=function(node){return isText$6(node)&&isZwsp(node.data);};var isCaretContainer$2=function(node){return isCaretContainerBlock$1(node)||isCaretContainerInline(node);};var hasContent=function(node){return node.firstChild!==node.lastChild||!isBr$5(node.firstChild);};var insertInline$1=function(node,before){var doc=node.ownerDocument;var textNode=doc.createTextNode(ZWSP$1);var parentNode=node.parentNode;if(!before){var sibling=node.nextSibling;if(isText$6(sibling)){if(isCaretContainer$2(sibling)){return sibling;}if(startsWithCaretContainer$1(sibling)){sibling.splitText(1);return sibling;}}if(node.nextSibling){parentNode.insertBefore(textNode,node.nextSibling);}else{parentNode.appendChild(textNode);}}else{var sibling=node.previousSibling;if(isText$6(sibling)){if(isCaretContainer$2(sibling)){return sibling;}if(endsWithCaretContainer$1(sibling)){return sibling.splitText(sibling.data.length-1);}}parentNode.insertBefore(textNode,node);}return textNode;};var isBeforeInline=function(pos){var container=pos.container();if(!isText$7(container)){return false;}return container.data.charAt(pos.offset())===ZWSP$1||pos.isAtStart()&&isCaretContainerInline(container.previousSibling);};var isAfterInline=function(pos){var container=pos.container();if(!isText$7(container)){return false;}return container.data.charAt(pos.offset()-1)===ZWSP$1||pos.isAtEnd()&&isCaretContainerInline(container.nextSibling);};var createBogusBr=function(){var br=document.createElement('br');br.setAttribute('data-mce-bogus','1');return br;};var insertBlock$1=function(blockName,node,before){var doc=node.ownerDocument;var blockNode=doc.createElement(blockName);blockNode.setAttribute('data-mce-caret',before?'before':'after');blockNode.setAttribute('data-mce-bogus','all');blockNode.appendChild(createBogusBr());var parentNode=node.parentNode;if(!before){if(node.nextSibling){parentNode.insertBefore(blockNode,node.nextSibling);}else{parentNode.appendChild(blockNode);}}else{parentNode.insertBefore(blockNode,node);}return blockNode;};var startsWithCaretContainer$1=function(node){return isText$6(node)&&node.data[0]===ZWSP$1;};var endsWithCaretContainer$1=function(node){return isText$6(node)&&node.data[node.data.length-1]===ZWSP$1;};var trimBogusBr=function(elm){var brs=elm.getElementsByTagName('br');var lastBr=brs[brs.length-1];if(isBogus$2(lastBr)){lastBr.parentNode.removeChild(lastBr);}};var showCaretContainerBlock=function(caretContainer){if(caretContainer&&caretContainer.hasAttribute('data-mce-caret')){trimBogusBr(caretContainer);caretContainer.removeAttribute('data-mce-caret');caretContainer.removeAttribute('data-mce-bogus');caretContainer.removeAttribute('style');caretContainer.removeAttribute('_moz_abspos');return caretContainer;}return null;};var isRangeInCaretContainerBlock=function(range){return isCaretContainerBlock$1(range.startContainer);};var isContentEditableTrue$3=isContentEditableTrue$4;var isContentEditableFalse$a=isContentEditableFalse$b;var isBr$3=isBr$5;var isText$5=isText$7;var isInvalidTextElement=matchNodeNames(['script','style','textarea']);var isAtomicInline=matchNodeNames(['img','input','textarea','hr','iframe','video','audio','object','embed']);var isTable$1=matchNodeNames(['table']);var isCaretContainer$1=isCaretContainer$2;var isCaretCandidate$3=function(node){if(isCaretContainer$1(node)){return false;}if(isText$5(node)){return!isInvalidTextElement(node.parentNode);}return isAtomicInline(node)||isBr$3(node)||isTable$1(node)||isNonUiContentEditableFalse(node);};var isUnselectable=function(node){return isElement$5(node)&&node.getAttribute('unselectable')==='true';};var isNonUiContentEditableFalse=function(node){return isUnselectable(node)===false&&isContentEditableFalse$a(node);};var isInEditable=function(node,root){for(node=node.parentNode;node&&node!==root;node=node.parentNode){if(isNonUiContentEditableFalse(node)){return false;}if(isContentEditableTrue$3(node)){return true;}}return true;};var isAtomicContentEditableFalse=function(node){if(!isNonUiContentEditableFalse(node)){return false;}return foldl(from(node.getElementsByTagName('*')),function(result,elm){return result||isContentEditableTrue$3(elm);},false)!==true;};var isAtomic$1=function(node){return isAtomicInline(node)||isAtomicContentEditableFalse(node);};var isEditableCaretCandidate$1=function(node,root){return isCaretCandidate$3(node)&&isInEditable(node,root);};var whiteSpaceRegExp$1=/^[ \\t\\r\\n]*$/;var isWhitespaceText=function(text){return whiteSpaceRegExp$1.test(text);};var hasWhitespacePreserveParent=function(node,rootNode){var rootElement=SugarElement.fromDom(rootNode);var startNode=SugarElement.fromDom(node);return ancestor$1(startNode,'pre,code',curry(eq,rootElement));};var isWhitespace=function(node,rootNode){return isText$7(node)&&isWhitespaceText(node.data)&&hasWhitespacePreserveParent(node,rootNode)===false;};var isNamedAnchor=function(node){return isElement$5(node)&&node.nodeName==='A'&&!node.hasAttribute('href')&&(node.hasAttribute('name')||node.hasAttribute('id'));};var isContent$1=function(node,rootNode){return isCaretCandidate$3(node)&&isWhitespace(node,rootNode)===false||isNamedAnchor(node)||isBookmark(node);};var isBookmark=hasAttribute('data-mce-bookmark');var isBogus$1=hasAttribute('data-mce-bogus');var isBogusAll=hasAttributeValue('data-mce-bogus','all');var isEmptyNode=function(targetNode,skipBogus){var brCount=0;if(isContent$1(targetNode,targetNode)){return false;}else{var node=targetNode.firstChild;if(!node){return true;}var walker=new DomTreeWalker(node,targetNode);do{if(skipBogus){if(isBogusAll(node)){node=walker.next(true);continue;}if(isBogus$1(node)){node=walker.next();continue;}}if(isBr$5(node)){brCount++;node=walker.next();continue;}if(isContent$1(node,targetNode)){return false;}node=walker.next();}while(node);return brCount<=1;}};var isEmpty$2=function(elm,skipBogus){if(skipBogus===void 0){skipBogus=true;}return isEmptyNode(elm.dom,skipBogus);};var isSpan=function(node){return node.nodeName.toLowerCase()==='span';};var isInlineContent=function(node,root){return isNonNullable(node)&&(isContent$1(node,root)||isInline$1(SugarElement.fromDom(node)));};var surroundedByInlineContent=function(node,root){var prev=new DomTreeWalker(node,root).prev(false);var next=new DomTreeWalker(node,root).next(false);var prevIsInline=isUndefined(prev)||isInlineContent(prev,root);var nextIsInline=isUndefined(next)||isInlineContent(next,root);return prevIsInline&&nextIsInline;};var isBookmarkNode$2=function(node){return isSpan(node)&&node.getAttribute('data-mce-type')==='bookmark';};var isKeepTextNode=function(node,root){return isText$7(node)&&node.data.length>0&&surroundedByInlineContent(node,root);};var isKeepElement=function(node){return isElement$5(node)?node.childNodes.length>0:false;};var isDocument=function(node){return isDocumentFragment(node)||isDocument$1(node);};var trimNode=function(dom,node,root){var rootNode=root||node;if(isElement$5(node)&&isBookmarkNode$2(node)){return node;}var children=node.childNodes;for(var i=children.length-1;i>=0;i--){trimNode(dom,children[i],rootNode);}if(isElement$5(node)){var currentChildren=node.childNodes;if(currentChildren.length===1&&isBookmarkNode$2(currentChildren[0])){node.parentNode.insertBefore(currentChildren[0],node);}}if(!isDocument(node)&&!isContent$1(node,rootNode)&&!isKeepElement(node)&&!isKeepTextNode(node,rootNode)){dom.remove(node);}return node;};var makeMap$3=Tools.makeMap;var attrsCharsRegExp=/[&<>\\\"\\u0060\\u007E-\\uD7FF\\uE000-\\uFFEF]|[\\uD800-\\uDBFF][\\uDC00-\\uDFFF]/g;var textCharsRegExp=/[<>&\\u007E-\\uD7FF\\uE000-\\uFFEF]|[\\uD800-\\uDBFF][\\uDC00-\\uDFFF]/g;var rawCharsRegExp=/[<>&\\\"\\']/g;var entityRegExp=/&#([a-z0-9]+);?|&([a-z0-9]+);/gi;var asciiMap={128:'\\u20AC',130:'\\u201A',131:'\\u0192',132:'\\u201E',133:'\\u2026',134:'\\u2020',135:'\\u2021',136:'\\u02c6',137:'\\u2030',138:'\\u0160',139:'\\u2039',140:'\\u0152',142:'\\u017d',145:'\\u2018',146:'\\u2019',147:'\\u201C',148:'\\u201D',149:'\\u2022',150:'\\u2013',151:'\\u2014',152:'\\u02DC',153:'\\u2122',154:'\\u0161',155:'\\u203A',156:'\\u0153',158:'\\u017e',159:'\\u0178'};var baseEntities={'\"':'&quot;','\\'':'&#39;','<':'&lt;','>':'&gt;','&':'&amp;','`':'&#96;'};var reverseEntities={'&lt;':'<','&gt;':'>','&amp;':'&','&quot;':'\"','&apos;':'\\''};var nativeDecode=function(text){var elm=SugarElement.fromTag('div').dom;elm.innerHTML=text;return elm.textContent||elm.innerText||text;};var buildEntitiesLookup=function(items,radix){var i,chr,entity;var lookup={};if(items){items=items.split(',');radix=radix||10;for(i=0;i<items.length;i+=2){chr=String.fromCharCode(parseInt(items[i],radix));if(!baseEntities[chr]){entity='&'+items[i+1]+';';lookup[chr]=entity;lookup[entity]=chr;}}return lookup;}};var namedEntities=buildEntitiesLookup('50,nbsp,51,iexcl,52,cent,53,pound,54,curren,55,yen,56,brvbar,57,sect,58,uml,59,copy,'+'5a,ordf,5b,laquo,5c,not,5d,shy,5e,reg,5f,macr,5g,deg,5h,plusmn,5i,sup2,5j,sup3,5k,acute,'+'5l,micro,5m,para,5n,middot,5o,cedil,5p,sup1,5q,ordm,5r,raquo,5s,frac14,5t,frac12,5u,frac34,'+'5v,iquest,60,Agrave,61,Aacute,62,Acirc,63,Atilde,64,Auml,65,Aring,66,AElig,67,Ccedil,'+'68,Egrave,69,Eacute,6a,Ecirc,6b,Euml,6c,Igrave,6d,Iacute,6e,Icirc,6f,Iuml,6g,ETH,6h,Ntilde,'+'6i,Ograve,6j,Oacute,6k,Ocirc,6l,Otilde,6m,Ouml,6n,times,6o,Oslash,6p,Ugrave,6q,Uacute,'+'6r,Ucirc,6s,Uuml,6t,Yacute,6u,THORN,6v,szlig,70,agrave,71,aacute,72,acirc,73,atilde,74,auml,'+'75,aring,76,aelig,77,ccedil,78,egrave,79,eacute,7a,ecirc,7b,euml,7c,igrave,7d,iacute,7e,icirc,'+'7f,iuml,7g,eth,7h,ntilde,7i,ograve,7j,oacute,7k,ocirc,7l,otilde,7m,ouml,7n,divide,7o,oslash,'+'7p,ugrave,7q,uacute,7r,ucirc,7s,uuml,7t,yacute,7u,thorn,7v,yuml,ci,fnof,sh,Alpha,si,Beta,'+'sj,Gamma,sk,Delta,sl,Epsilon,sm,Zeta,sn,Eta,so,Theta,sp,Iota,sq,Kappa,sr,Lambda,ss,Mu,'+'st,Nu,su,Xi,sv,Omicron,t0,Pi,t1,Rho,t3,Sigma,t4,Tau,t5,Upsilon,t6,Phi,t7,Chi,t8,Psi,'+'t9,Omega,th,alpha,ti,beta,tj,gamma,tk,delta,tl,epsilon,tm,zeta,tn,eta,to,theta,tp,iota,'+'tq,kappa,tr,lambda,ts,mu,tt,nu,tu,xi,tv,omicron,u0,pi,u1,rho,u2,sigmaf,u3,sigma,u4,tau,'+'u5,upsilon,u6,phi,u7,chi,u8,psi,u9,omega,uh,thetasym,ui,upsih,um,piv,812,bull,816,hellip,'+'81i,prime,81j,Prime,81u,oline,824,frasl,88o,weierp,88h,image,88s,real,892,trade,89l,alefsym,'+'8cg,larr,8ch,uarr,8ci,rarr,8cj,darr,8ck,harr,8dl,crarr,8eg,lArr,8eh,uArr,8ei,rArr,8ej,dArr,'+'8ek,hArr,8g0,forall,8g2,part,8g3,exist,8g5,empty,8g7,nabla,8g8,isin,8g9,notin,8gb,ni,8gf,prod,'+'8gh,sum,8gi,minus,8gn,lowast,8gq,radic,8gt,prop,8gu,infin,8h0,ang,8h7,and,8h8,or,8h9,cap,8ha,cup,'+'8hb,int,8hk,there4,8hs,sim,8i5,cong,8i8,asymp,8j0,ne,8j1,equiv,8j4,le,8j5,ge,8k2,sub,8k3,sup,8k4,'+'nsub,8k6,sube,8k7,supe,8kl,oplus,8kn,otimes,8l5,perp,8m5,sdot,8o8,lceil,8o9,rceil,8oa,lfloor,8ob,'+'rfloor,8p9,lang,8pa,rang,9ea,loz,9j0,spades,9j3,clubs,9j5,hearts,9j6,diams,ai,OElig,aj,oelig,b0,'+'Scaron,b1,scaron,bo,Yuml,m6,circ,ms,tilde,802,ensp,803,emsp,809,thinsp,80c,zwnj,80d,zwj,80e,lrm,'+'80f,rlm,80j,ndash,80k,mdash,80o,lsquo,80p,rsquo,80q,sbquo,80s,ldquo,80t,rdquo,80u,bdquo,810,dagger,'+'811,Dagger,81g,permil,81p,lsaquo,81q,rsaquo,85c,euro',32);var encodeRaw=function(text,attr){return text.replace(attr?attrsCharsRegExp:textCharsRegExp,function(chr){return baseEntities[chr]||chr;});};var encodeAllRaw=function(text){return(''+text).replace(rawCharsRegExp,function(chr){return baseEntities[chr]||chr;});};var encodeNumeric=function(text,attr){return text.replace(attr?attrsCharsRegExp:textCharsRegExp,function(chr){if(chr.length>1){return'&#'+((chr.charCodeAt(0)-55296)*1024+(chr.charCodeAt(1)-56320)+65536)+';';}return baseEntities[chr]||'&#'+chr.charCodeAt(0)+';';});};var encodeNamed=function(text,attr,entities){entities=entities||namedEntities;return text.replace(attr?attrsCharsRegExp:textCharsRegExp,function(chr){return baseEntities[chr]||entities[chr]||chr;});};var getEncodeFunc=function(name,entities){var entitiesMap=buildEntitiesLookup(entities)||namedEntities;var encodeNamedAndNumeric=function(text,attr){return text.replace(attr?attrsCharsRegExp:textCharsRegExp,function(chr){if(baseEntities[chr]!==undefined){return baseEntities[chr];}if(entitiesMap[chr]!==undefined){return entitiesMap[chr];}if(chr.length>1){return'&#'+((chr.charCodeAt(0)-55296)*1024+(chr.charCodeAt(1)-56320)+65536)+';';}return'&#'+chr.charCodeAt(0)+';';});};var encodeCustomNamed=function(text,attr){return encodeNamed(text,attr,entitiesMap);};var nameMap=makeMap$3(name.replace(/\\+/g,','));if(nameMap.named&&nameMap.numeric){return encodeNamedAndNumeric;}if(nameMap.named){if(entities){return encodeCustomNamed;}return encodeNamed;}if(nameMap.numeric){return encodeNumeric;}return encodeRaw;};var decode=function(text){return text.replace(entityRegExp,function(all,numeric){if(numeric){if(numeric.charAt(0).toLowerCase()==='x'){numeric=parseInt(numeric.substr(1),16);}else{numeric=parseInt(numeric,10);}if(numeric>65535){numeric-=65536;return String.fromCharCode(55296+(numeric>>10),56320+(numeric&1023));}return asciiMap[numeric]||String.fromCharCode(numeric);}return reverseEntities[all]||namedEntities[all]||nativeDecode(all);});};var Entities={encodeRaw:encodeRaw,encodeAllRaw:encodeAllRaw,encodeNumeric:encodeNumeric,encodeNamed:encodeNamed,getEncodeFunc:getEncodeFunc,decode:decode};var mapCache={},dummyObj={};var makeMap$2=Tools.makeMap,each$h=Tools.each,extend$5=Tools.extend,explode$3=Tools.explode,inArray$2=Tools.inArray;var split$1=function(items,delim){items=Tools.trim(items);return items?items.split(delim||' '):[];};var createMap=function(defaultValue,extendWith){var value=makeMap$2(defaultValue,' ',makeMap$2(defaultValue.toUpperCase(),' '));return extend$5(value,extendWith);};var getTextRootBlockElements=function(schema){return createMap('td th li dt dd figcaption caption details summary',schema.getTextBlockElements());};var compileSchema=function(type){var schema={};var globalAttributes,blockContent;var phrasingContent,flowContent,html4BlockContent,html4PhrasingContent;var add=function(name,attributes,children){var ni,attributesOrder,element;var arrayToMap=function(array,obj){var map={};var i,l;for(i=0,l=array.length;i<l;i++){map[array[i]]=obj||{};}return map;};children=children||[];attributes=attributes||'';if(typeof children==='string'){children=split$1(children);}var names=split$1(name);ni=names.length;while(ni--){attributesOrder=split$1([globalAttributes,attributes].join(' '));element={attributes:arrayToMap(attributesOrder),attributesOrder:attributesOrder,children:arrayToMap(children,dummyObj)};schema[names[ni]]=element;}};var addAttrs=function(name,attributes){var ni,schemaItem,i,l;var names=split$1(name);ni=names.length;var attrs=split$1(attributes);while(ni--){schemaItem=schema[names[ni]];for(i=0,l=attrs.length;i<l;i++){schemaItem.attributes[attrs[i]]={};schemaItem.attributesOrder.push(attrs[i]);}}};if(mapCache[type]){return mapCache[type];}globalAttributes='id accesskey class dir lang style tabindex title role';blockContent='address blockquote div dl fieldset form h1 h2 h3 h4 h5 h6 hr menu ol p pre table ul';phrasingContent='a abbr b bdo br button cite code del dfn em embed i iframe img input ins kbd '+'label map noscript object q s samp script select small span strong sub sup '+'textarea u var #text #comment';if(type!=='html4'){globalAttributes+=' contenteditable contextmenu draggable dropzone '+'hidden spellcheck translate';blockContent+=' article aside details dialog figure main header footer hgroup section nav';phrasingContent+=' audio canvas command datalist mark meter output picture '+'progress time wbr video ruby bdi keygen';}if(type!=='html5-strict'){globalAttributes+=' xml:lang';html4PhrasingContent='acronym applet basefont big font strike tt';phrasingContent=[phrasingContent,html4PhrasingContent].join(' ');each$h(split$1(html4PhrasingContent),function(name){add(name,'',phrasingContent);});html4BlockContent='center dir isindex noframes';blockContent=[blockContent,html4BlockContent].join(' ');flowContent=[blockContent,phrasingContent].join(' ');each$h(split$1(html4BlockContent),function(name){add(name,'',flowContent);});}flowContent=flowContent||[blockContent,phrasingContent].join(' ');add('html','manifest','head body');add('head','','base command link meta noscript script style title');add('title hr noscript br');add('base','href target');add('link','href rel media hreflang type sizes hreflang');add('meta','name http-equiv content charset');add('style','media type scoped');add('script','src async defer type charset');add('body','onafterprint onbeforeprint onbeforeunload onblur onerror onfocus '+'onhashchange onload onmessage onoffline ononline onpagehide onpageshow '+'onpopstate onresize onscroll onstorage onunload',flowContent);add('address dt dd div caption','',flowContent);add('h1 h2 h3 h4 h5 h6 pre p abbr code var samp kbd sub sup i b u bdo span legend em strong small s cite dfn','',phrasingContent);add('blockquote','cite',flowContent);add('ol','reversed start type','li');add('ul','','li');add('li','value',flowContent);add('dl','','dt dd');add('a','href target rel media hreflang type',phrasingContent);add('q','cite',phrasingContent);add('ins del','cite datetime',flowContent);add('img','src sizes srcset alt usemap ismap width height');add('iframe','src name width height',flowContent);add('embed','src type width height');add('object','data type typemustmatch name usemap form width height',[flowContent,'param'].join(' '));add('param','name value');add('map','name',[flowContent,'area'].join(' '));add('area','alt coords shape href target rel media hreflang type');add('table','border','caption colgroup thead tfoot tbody tr'+(type==='html4'?' col':''));add('colgroup','span','col');add('col','span');add('tbody thead tfoot','','tr');add('tr','','td th');add('td','colspan rowspan headers',flowContent);add('th','colspan rowspan headers scope abbr',flowContent);add('form','accept-charset action autocomplete enctype method name novalidate target',flowContent);add('fieldset','disabled form name',[flowContent,'legend'].join(' '));add('label','form for',phrasingContent);add('input','accept alt autocomplete checked dirname disabled form formaction formenctype formmethod formnovalidate '+'formtarget height list max maxlength min multiple name pattern readonly required size src step type value width');add('button','disabled form formaction formenctype formmethod formnovalidate formtarget name type value',type==='html4'?flowContent:phrasingContent);add('select','disabled form multiple name required size','option optgroup');add('optgroup','disabled label','option');add('option','disabled label selected value');add('textarea','cols dirname disabled form maxlength name readonly required rows wrap');add('menu','type label',[flowContent,'li'].join(' '));add('noscript','',flowContent);if(type!=='html4'){add('wbr');add('ruby','',[phrasingContent,'rt rp'].join(' '));add('figcaption','',flowContent);add('mark rt rp summary bdi','',phrasingContent);add('canvas','width height',flowContent);add('video','src crossorigin poster preload autoplay mediagroup loop '+'muted controls width height buffered',[flowContent,'track source'].join(' '));add('audio','src crossorigin preload autoplay mediagroup loop muted controls '+'buffered volume',[flowContent,'track source'].join(' '));add('picture','','img source');add('source','src srcset type media sizes');add('track','kind src srclang label default');add('datalist','',[phrasingContent,'option'].join(' '));add('article section nav aside main header footer','',flowContent);add('hgroup','','h1 h2 h3 h4 h5 h6');add('figure','',[flowContent,'figcaption'].join(' '));add('time','datetime',phrasingContent);add('dialog','open',flowContent);add('command','type label icon disabled checked radiogroup command');add('output','for form name',phrasingContent);add('progress','value max',phrasingContent);add('meter','value min max low high optimum',phrasingContent);add('details','open',[flowContent,'summary'].join(' '));add('keygen','autofocus challenge disabled form keytype name');}if(type!=='html5-strict'){addAttrs('script','language xml:space');addAttrs('style','xml:space');addAttrs('object','declare classid code codebase codetype archive standby align border hspace vspace');addAttrs('embed','align name hspace vspace');addAttrs('param','valuetype type');addAttrs('a','charset name rev shape coords');addAttrs('br','clear');addAttrs('applet','codebase archive code object alt name width height align hspace vspace');addAttrs('img','name longdesc align border hspace vspace');addAttrs('iframe','longdesc frameborder marginwidth marginheight scrolling align');addAttrs('font basefont','size color face');addAttrs('input','usemap align');addAttrs('select');addAttrs('textarea');addAttrs('h1 h2 h3 h4 h5 h6 div p legend caption','align');addAttrs('ul','type compact');addAttrs('li','type');addAttrs('ol dl menu dir','compact');addAttrs('pre','width xml:space');addAttrs('hr','align noshade size width');addAttrs('isindex','prompt');addAttrs('table','summary width frame rules cellspacing cellpadding align bgcolor');addAttrs('col','width align char charoff valign');addAttrs('colgroup','width align char charoff valign');addAttrs('thead','align char charoff valign');addAttrs('tr','align char charoff valign bgcolor');addAttrs('th','axis align char charoff valign nowrap bgcolor width height');addAttrs('form','accept');addAttrs('td','abbr axis scope align char charoff valign nowrap bgcolor width height');addAttrs('tfoot','align char charoff valign');addAttrs('tbody','align char charoff valign');addAttrs('area','nohref');addAttrs('body','background bgcolor text link vlink alink');}if(type!=='html4'){addAttrs('input button select textarea','autofocus');addAttrs('input textarea','placeholder');addAttrs('a','download');addAttrs('link script img','crossorigin');addAttrs('img','loading');addAttrs('iframe','sandbox seamless allowfullscreen loading');}each$h(split$1('a form meter progress dfn'),function(name){if(schema[name]){delete schema[name].children[name];}});delete schema.caption.children.table;delete schema.script;mapCache[type]=schema;return schema;};var compileElementMap=function(value,mode){var styles;if(value){styles={};if(typeof value==='string'){value={'*':value};}each$h(value,function(value,key){styles[key]=styles[key.toUpperCase()]=mode==='map'?makeMap$2(value,/[, ]/):explode$3(value,/[, ]/);});}return styles;};var Schema=function(settings){var elements={};var children={};var patternElements=[];var customElementsMap={},specialElements={};var createLookupTable=function(option,defaultValue,extendWith){var value=settings[option];if(!value){value=mapCache[option];if(!value){value=createMap(defaultValue,extendWith);mapCache[option]=value;}}else{value=makeMap$2(value,/[, ]/,makeMap$2(value.toUpperCase(),/[, ]/));}return value;};settings=settings||{};var schemaItems=compileSchema(settings.schema);if(settings.verify_html===false){settings.valid_elements='*[*]';}var validStyles=compileElementMap(settings.valid_styles);var invalidStyles=compileElementMap(settings.invalid_styles,'map');var validClasses=compileElementMap(settings.valid_classes,'map');var whiteSpaceElementsMap=createLookupTable('whitespace_elements','pre script noscript style textarea video audio iframe object code');var selfClosingElementsMap=createLookupTable('self_closing_elements','colgroup dd dt li option p td tfoot th thead tr');var shortEndedElementsMap=createLookupTable('short_ended_elements','area base basefont br col frame hr img input isindex link '+'meta param embed source wbr track');var boolAttrMap=createLookupTable('boolean_attributes','checked compact declare defer disabled ismap multiple nohref noresize '+'noshade nowrap readonly selected autoplay loop controls');var nonEmptyOrMoveCaretBeforeOnEnter='td th iframe video audio object script code';var nonEmptyElementsMap=createLookupTable('non_empty_elements',nonEmptyOrMoveCaretBeforeOnEnter+' pre',shortEndedElementsMap);var moveCaretBeforeOnEnterElementsMap=createLookupTable('move_caret_before_on_enter_elements',nonEmptyOrMoveCaretBeforeOnEnter+' table',shortEndedElementsMap);var textBlockElementsMap=createLookupTable('text_block_elements','h1 h2 h3 h4 h5 h6 p div address pre form '+'blockquote center dir fieldset header footer article section hgroup aside main nav figure');var blockElementsMap=createLookupTable('block_elements','hr table tbody thead tfoot '+'th tr td li ol ul caption dl dt dd noscript menu isindex option '+'datalist select optgroup figcaption details summary',textBlockElementsMap);var textInlineElementsMap=createLookupTable('text_inline_elements','span strong b em i font s strike u var cite '+'dfn code mark q sup sub samp');each$h((settings.special||'script noscript iframe noframes noembed title style textarea xmp').split(' '),function(name){specialElements[name]=new RegExp('</'+name+'[^>]*>','gi');});var patternToRegExp=function(str){return new RegExp('^'+str.replace(/([?+*])/g,'.$1')+'$');};var addValidElements=function(validElements){var ei,el,ai,al,matches,element,attr,attrData,elementName,attrName,attrType,attributes,attributesOrder,prefix,outputName,globalAttributes,globalAttributesOrder,value;var elementRuleRegExp=/^([#+\\-])?([^\\[!\\/]+)(?:\\/([^\\[!]+))?(?:(!?)\\[([^\\]]+)])?$/,attrRuleRegExp=/^([!\\-])?(\\w+[\\\\:]:\\w+|[^=:<]+)?(?:([=:<])(.*))?$/,hasPatternsRegExp=/[*?+]/;if(validElements){var validElementsArr=split$1(validElements,',');if(elements['@']){globalAttributes=elements['@'].attributes;globalAttributesOrder=elements['@'].attributesOrder;}for(ei=0,el=validElementsArr.length;ei<el;ei++){matches=elementRuleRegExp.exec(validElementsArr[ei]);if(matches){prefix=matches[1];elementName=matches[2];outputName=matches[3];attrData=matches[5];attributes={};attributesOrder=[];element={attributes:attributes,attributesOrder:attributesOrder};if(prefix==='#'){element.paddEmpty=true;}if(prefix==='-'){element.removeEmpty=true;}if(matches[4]==='!'){element.removeEmptyAttrs=true;}if(globalAttributes){each$j(globalAttributes,function(value,key){attributes[key]=value;});attributesOrder.push.apply(attributesOrder,globalAttributesOrder);}if(attrData){attrData=split$1(attrData,'|');for(ai=0,al=attrData.length;ai<al;ai++){matches=attrRuleRegExp.exec(attrData[ai]);if(matches){attr={};attrType=matches[1];attrName=matches[2].replace(/[\\\\:]:/g,':');prefix=matches[3];value=matches[4];if(attrType==='!'){element.attributesRequired=element.attributesRequired||[];element.attributesRequired.push(attrName);attr.required=true;}if(attrType==='-'){delete attributes[attrName];attributesOrder.splice(inArray$2(attributesOrder,attrName),1);continue;}if(prefix){if(prefix==='='){element.attributesDefault=element.attributesDefault||[];element.attributesDefault.push({name:attrName,value:value});attr.defaultValue=value;}if(prefix===':'){element.attributesForced=element.attributesForced||[];element.attributesForced.push({name:attrName,value:value});attr.forcedValue=value;}if(prefix==='<'){attr.validValues=makeMap$2(value,'?');}}if(hasPatternsRegExp.test(attrName)){element.attributePatterns=element.attributePatterns||[];attr.pattern=patternToRegExp(attrName);element.attributePatterns.push(attr);}else{if(!attributes[attrName]){attributesOrder.push(attrName);}attributes[attrName]=attr;}}}}if(!globalAttributes&&elementName==='@'){globalAttributes=attributes;globalAttributesOrder=attributesOrder;}if(outputName){element.outputName=elementName;elements[outputName]=element;}if(hasPatternsRegExp.test(elementName)){element.pattern=patternToRegExp(elementName);patternElements.push(element);}else{elements[elementName]=element;}}}}};var setValidElements=function(validElements){elements={};patternElements=[];addValidElements(validElements);each$h(schemaItems,function(element,name){children[name]=element.children;});};var addCustomElements=function(customElements){var customElementRegExp=/^(~)?(.+)$/;if(customElements){mapCache.text_block_elements=mapCache.block_elements=null;each$h(split$1(customElements,','),function(rule){var matches=customElementRegExp.exec(rule),inline=matches[1]==='~',cloneName=inline?'span':'div',name=matches[2];children[name]=children[cloneName];customElementsMap[name]=cloneName;if(!inline){blockElementsMap[name.toUpperCase()]={};blockElementsMap[name]={};}if(!elements[name]){var customRule=elements[cloneName];customRule=extend$5({},customRule);delete customRule.removeEmptyAttrs;delete customRule.removeEmpty;elements[name]=customRule;}each$h(children,function(element,elmName){if(element[cloneName]){children[elmName]=element=extend$5({},children[elmName]);element[name]=element[cloneName];}});});}};var addValidChildren=function(validChildren){var childRuleRegExp=/^([+\\-]?)([A-Za-z0-9_\\-.\\u00b7\\u00c0-\\u00d6\\u00d8-\\u00f6\\u00f8-\\u037d\\u037f-\\u1fff\\u200c-\\u200d\\u203f-\\u2040\\u2070-\\u218f\\u2c00-\\u2fef\\u3001-\\ud7ff\\uf900-\\ufdcf\\ufdf0-\\ufffd]+)\\[([^\\]]+)]$/;mapCache[settings.schema]=null;if(validChildren){each$h(split$1(validChildren,','),function(rule){var matches=childRuleRegExp.exec(rule);var parent,prefix;if(matches){prefix=matches[1];if(prefix){parent=children[matches[2]];}else{parent=children[matches[2]]={'#comment':{}};}parent=children[matches[2]];each$h(split$1(matches[3],'|'),function(child){if(prefix==='-'){delete parent[child];}else{parent[child]={};}});}});}};var getElementRule=function(name){var element=elements[name],i;if(element){return element;}i=patternElements.length;while(i--){element=patternElements[i];if(element.pattern.test(name)){return element;}}};if(!settings.valid_elements){each$h(schemaItems,function(element,name){elements[name]={attributes:element.attributes,attributesOrder:element.attributesOrder};children[name]=element.children;});if(settings.schema!=='html5'){each$h(split$1('strong/b em/i'),function(item){var items=split$1(item,'/');elements[items[1]].outputName=items[0];});}each$h(textInlineElementsMap,function(_val,name){if(elements[name]){if(settings.padd_empty_block_inline_children){elements[name].paddInEmptyBlock=true;}elements[name].removeEmpty=true;}});each$h(split$1('ol ul blockquote a table tbody'),function(name){if(elements[name]){elements[name].removeEmpty=true;}});each$h(split$1('p h1 h2 h3 h4 h5 h6 th td pre div address caption li'),function(name){elements[name].paddEmpty=true;});each$h(split$1('span'),function(name){elements[name].removeEmptyAttrs=true;});}else{setValidElements(settings.valid_elements);}addCustomElements(settings.custom_elements);addValidChildren(settings.valid_children);addValidElements(settings.extended_valid_elements);addValidChildren('+ol[ul|ol],+ul[ul|ol]');each$h({dd:'dl',dt:'dl',li:'ul ol',td:'tr',th:'tr',tr:'tbody thead tfoot',tbody:'table',thead:'table',tfoot:'table',legend:'fieldset',area:'map',param:'video audio object'},function(parents,item){if(elements[item]){elements[item].parentsRequired=split$1(parents);}});if(settings.invalid_elements){each$h(explode$3(settings.invalid_elements),function(item){if(elements[item]){delete elements[item];}});}if(!getElementRule('span')){addValidElements('span[!data-mce-type|*]');}var getValidStyles=constant(validStyles);var getInvalidStyles=constant(invalidStyles);var getValidClasses=constant(validClasses);var getBoolAttrs=constant(boolAttrMap);var getBlockElements=constant(blockElementsMap);var getTextBlockElements=constant(textBlockElementsMap);var getTextInlineElements=constant(textInlineElementsMap);var getShortEndedElements=constant(shortEndedElementsMap);var getSelfClosingElements=constant(selfClosingElementsMap);var getNonEmptyElements=constant(nonEmptyElementsMap);var getMoveCaretBeforeOnEnterElements=constant(moveCaretBeforeOnEnterElementsMap);var getWhiteSpaceElements=constant(whiteSpaceElementsMap);var getSpecialElements=constant(specialElements);var isValidChild=function(name,child){var parent=children[name.toLowerCase()];return!!(parent&&parent[child.toLowerCase()]);};var isValid=function(name,attr){var attrPatterns,i;var rule=getElementRule(name);if(rule){if(attr){if(rule.attributes[attr]){return true;}attrPatterns=rule.attributePatterns;if(attrPatterns){i=attrPatterns.length;while(i--){if(attrPatterns[i].pattern.test(name)){return true;}}}}else{return true;}}return false;};var getCustomElements=constant(customElementsMap);return{children:children,elements:elements,getValidStyles:getValidStyles,getValidClasses:getValidClasses,getBlockElements:getBlockElements,getInvalidStyles:getInvalidStyles,getShortEndedElements:getShortEndedElements,getTextBlockElements:getTextBlockElements,getTextInlineElements:getTextInlineElements,getBoolAttrs:getBoolAttrs,getElementRule:getElementRule,getSelfClosingElements:getSelfClosingElements,getNonEmptyElements:getNonEmptyElements,getMoveCaretBeforeOnEnterElements:getMoveCaretBeforeOnEnterElements,getWhiteSpaceElements:getWhiteSpaceElements,getSpecialElements:getSpecialElements,isValidChild:isValidChild,isValid:isValid,getCustomElements:getCustomElements,addValidElements:addValidElements,setValidElements:setValidElements,addCustomElements:addCustomElements,addValidChildren:addValidChildren};};var toHex=function(match,r,g,b){var hex=function(val){val=parseInt(val,10).toString(16);return val.length>1?val:'0'+val;};return'#'+hex(r)+hex(g)+hex(b);};var Styles=function(settings,schema){var _this=this;var rgbRegExp=/rgb\\s*\\(\\s*([0-9]+)\\s*,\\s*([0-9]+)\\s*,\\s*([0-9]+)\\s*\\)/gi;var urlOrStrRegExp=/(?:url(?:(?:\\(\\s*\\\"([^\\\"]+)\\\"\\s*\\))|(?:\\(\\s*\\'([^\\']+)\\'\\s*\\))|(?:\\(\\s*([^)\\s]+)\\s*\\))))|(?:\\'([^\\']+)\\')|(?:\\\"([^\\\"]+)\\\")/gi;var styleRegExp=/\\s*([^:]+):\\s*([^;]+);?/g;var trimRightRegExp=/\\s+$/;var i;var encodingLookup={};var validStyles;var invalidStyles;var invisibleChar=zeroWidth;settings=settings||{};if(schema){validStyles=schema.getValidStyles();invalidStyles=schema.getInvalidStyles();}var encodingItems=('\\\\\" \\\\\\' \\\\; \\\\: ; : '+invisibleChar).split(' ');for(i=0;i<encodingItems.length;i++){encodingLookup[encodingItems[i]]=invisibleChar+i;encodingLookup[invisibleChar+i]=encodingItems[i];}return{toHex:function(color){return color.replace(rgbRegExp,toHex);},parse:function(css){var styles={};var matches,name,value,isEncoded;var urlConverter=settings.url_converter;var urlConverterScope=settings.url_converter_scope||_this;var compress=function(prefix,suffix,noJoin){var top=styles[prefix+'-top'+suffix];if(!top){return;}var right=styles[prefix+'-right'+suffix];if(!right){return;}var bottom=styles[prefix+'-bottom'+suffix];if(!bottom){return;}var left=styles[prefix+'-left'+suffix];if(!left){return;}var box=[top,right,bottom,left];i=box.length-1;while(i--){if(box[i]!==box[i+1]){break;}}if(i>-1&&noJoin){return;}styles[prefix+suffix]=i===-1?box[0]:box.join(' ');delete styles[prefix+'-top'+suffix];delete styles[prefix+'-right'+suffix];delete styles[prefix+'-bottom'+suffix];delete styles[prefix+'-left'+suffix];};var canCompress=function(key){var value=styles[key],i;if(!value){return;}value=value.split(' ');i=value.length;while(i--){if(value[i]!==value[0]){return false;}}styles[key]=value[0];return true;};var compress2=function(target,a,b,c){if(!canCompress(a)){return;}if(!canCompress(b)){return;}if(!canCompress(c)){return;}styles[target]=styles[a]+' '+styles[b]+' '+styles[c];delete styles[a];delete styles[b];delete styles[c];};var encode=function(str){isEncoded=true;return encodingLookup[str];};var decode=function(str,keepSlashes){if(isEncoded){str=str.replace(/\\uFEFF[0-9]/g,function(str){return encodingLookup[str];});}if(!keepSlashes){str=str.replace(/\\\\([\\'\\\";:])/g,'$1');}return str;};var decodeSingleHexSequence=function(escSeq){return String.fromCharCode(parseInt(escSeq.slice(1),16));};var decodeHexSequences=function(value){return value.replace(/\\\\[0-9a-f]+/gi,decodeSingleHexSequence);};var processUrl=function(match,url,url2,url3,str,str2){str=str||str2;if(str){str=decode(str);return'\\''+str.replace(/\\'/g,'\\\\\\'')+'\\'';}url=decode(url||url2||url3);if(!settings.allow_script_urls){var scriptUrl=url.replace(/[\\s\\r\\n]+/g,'');if(/(java|vb)script:/i.test(scriptUrl)){return'';}if(!settings.allow_svg_data_urls&&/^data:image\\/svg/i.test(scriptUrl)){return'';}}if(urlConverter){url=urlConverter.call(urlConverterScope,url,'style');}return'url(\\''+url.replace(/\\'/g,'\\\\\\'')+'\\')';};if(css){css=css.replace(/[\\u0000-\\u001F]/g,'');css=css.replace(/\\\\[\\\"\\';:\\uFEFF]/g,encode).replace(/\\\"[^\\\"]+\\\"|\\'[^\\']+\\'/g,function(str){return str.replace(/[;:]/g,encode);});while(matches=styleRegExp.exec(css)){styleRegExp.lastIndex=matches.index+matches[0].length;name=matches[1].replace(trimRightRegExp,'').toLowerCase();value=matches[2].replace(trimRightRegExp,'');if(name&&value){name=decodeHexSequences(name);value=decodeHexSequences(value);if(name.indexOf(invisibleChar)!==-1||name.indexOf('\"')!==-1){continue;}if(!settings.allow_script_urls&&(name==='behavior'||/expression\\s*\\(|\\/\\*|\\*\\//.test(value))){continue;}if(name==='font-weight'&&value==='700'){value='bold';}else if(name==='color'||name==='background-color'){value=value.toLowerCase();}value=value.replace(rgbRegExp,toHex);value=value.replace(urlOrStrRegExp,processUrl);styles[name]=isEncoded?decode(value,true):value;}}compress('border','',true);compress('border','-width');compress('border','-color');compress('border','-style');compress('padding','');compress('margin','');compress2('border','border-width','border-style','border-color');if(styles.border==='medium none'){delete styles.border;}if(styles['border-image']==='none'){delete styles['border-image'];}}return styles;},serialize:function(styles,elementName){var css='';var serializeStyles=function(name){var value;var styleList=validStyles[name];if(styleList){for(var i_1=0,l=styleList.length;i_1<l;i_1++){name=styleList[i_1];value=styles[name];if(value){css+=(css.length>0?' ':'')+name+': '+value+';';}}}};var isValid=function(name,elementName){var styleMap=invalidStyles['*'];if(styleMap&&styleMap[name]){return false;}styleMap=invalidStyles[elementName];return!(styleMap&&styleMap[name]);};if(elementName&&validStyles){serializeStyles('*');serializeStyles(elementName);}else{each$j(styles,function(value,name){if(value&&(!invalidStyles||isValid(name,elementName))){css+=(css.length>0?' ':'')+name+': '+value+';';}});}return css;}};};var deprecated={keyLocation:true,layerX:true,layerY:true,returnValue:true,webkitMovementX:true,webkitMovementY:true,keyIdentifier:true,mozPressure:true};var isNativeEvent=function(event){return event instanceof Event||isFunction(event.initEvent);};var hasIsDefaultPrevented=function(event){return event.isDefaultPrevented===always||event.isDefaultPrevented===never;};var needsNormalizing=function(event){return isNullable(event.preventDefault)||isNativeEvent(event);};var clone$2=function(originalEvent,data){var event=data!==null&&data!==void 0?data:{};for(var name_1 in originalEvent){if(!has$2(deprecated,name_1)){event[name_1]=originalEvent[name_1];}}if(isNonNullable(event.composedPath)){event.composedPath=function(){return originalEvent.composedPath();};}return event;};var normalize$3=function(type,originalEvent,fallbackTarget,data){var _a;var event=clone$2(originalEvent,data);event.type=type;if(isNullable(event.target)){event.target=(_a=event.srcElement)!==null&&_a!==void 0?_a:fallbackTarget;}if(needsNormalizing(originalEvent)){event.preventDefault=function(){event.defaultPrevented=true;event.isDefaultPrevented=always;if(isFunction(originalEvent.preventDefault)){originalEvent.preventDefault();}else if(isNativeEvent(originalEvent)){originalEvent.returnValue=false;}};event.stopPropagation=function(){event.cancelBubble=true;event.isPropagationStopped=always;if(isFunction(originalEvent.stopPropagation)){originalEvent.stopPropagation();}else if(isNativeEvent(originalEvent)){originalEvent.cancelBubble=true;}};event.stopImmediatePropagation=function(){event.isImmediatePropagationStopped=always;event.stopPropagation();};if(!hasIsDefaultPrevented(event)){event.isDefaultPrevented=event.defaultPrevented===true?always:never;event.isPropagationStopped=event.cancelBubble===true?always:never;event.isImmediatePropagationStopped=never;}}return event;};var eventExpandoPrefix='mce-data-';var mouseEventRe=/^(?:mouse|contextmenu)|click/;var addEvent=function(target,name,callback,capture){if(target.addEventListener){target.addEventListener(name,callback,capture||false);}else if(target.attachEvent){target.attachEvent('on'+name,callback);}};var removeEvent=function(target,name,callback,capture){if(target.removeEventListener){target.removeEventListener(name,callback,capture||false);}else if(target.detachEvent){target.detachEvent('on'+name,callback);}};var isMouseEvent=function(event){return isNonNullable(event)&&mouseEventRe.test(event.type);};var fix=function(originalEvent,data){var event=normalize$3(originalEvent.type,originalEvent,document,data);if(isMouseEvent(originalEvent)&&isUndefined(originalEvent.pageX)&&!isUndefined(originalEvent.clientX)){var eventDoc=event.target.ownerDocument||document;var doc=eventDoc.documentElement;var body=eventDoc.body;var mouseEvent=event;mouseEvent.pageX=originalEvent.clientX+(doc&&doc.scrollLeft||body&&body.scrollLeft||0)-(doc&&doc.clientLeft||body&&body.clientLeft||0);mouseEvent.pageY=originalEvent.clientY+(doc&&doc.scrollTop||body&&body.scrollTop||0)-(doc&&doc.clientTop||body&&body.clientTop||0);}if(isUndefined(event.metaKey)){event.metaKey=false;}return event;};var bindOnReady=function(win,callback,eventUtils){var doc=win.document,event={type:'ready'};if(eventUtils.domLoaded){callback(event);return;}var isDocReady=function(){return doc.readyState==='complete'||doc.readyState==='interactive'&&doc.body;};var readyHandler=function(){removeEvent(win,'DOMContentLoaded',readyHandler);removeEvent(win,'load',readyHandler);if(!eventUtils.domLoaded){eventUtils.domLoaded=true;callback(event);}win=null;};if(isDocReady()){readyHandler();}else{addEvent(win,'DOMContentLoaded',readyHandler);}if(!eventUtils.domLoaded){addEvent(win,'load',readyHandler);}};var EventUtils=function(){function EventUtils(){this.domLoaded=false;this.events={};this.count=1;this.expando=eventExpandoPrefix+(+new Date()).toString(32);this.hasMouseEnterLeave='onmouseenter'in document.documentElement;this.hasFocusIn='onfocusin'in document.documentElement;this.count=1;}EventUtils.prototype.bind=function(target,names,callback,scope){var self=this;var id,callbackList,i,name,fakeName,nativeHandler,capture;var win=window;var defaultNativeHandler=function(evt){self.executeHandlers(fix(evt||win.event),id);};if(!target||target.nodeType===3||target.nodeType===8){return;}if(!target[self.expando]){id=self.count++;target[self.expando]=id;self.events[id]={};}else{id=target[self.expando];}scope=scope||target;var namesList=names.split(' ');i=namesList.length;while(i--){name=namesList[i];nativeHandler=defaultNativeHandler;fakeName=capture=false;if(name==='DOMContentLoaded'){name='ready';}if(self.domLoaded&&name==='ready'&&target.readyState==='complete'){callback.call(scope,fix({type:name}));continue;}if(!self.hasMouseEnterLeave){fakeName=self.mouseEnterLeave[name];if(fakeName){nativeHandler=function(evt){var current=evt.currentTarget;var related=evt.relatedTarget;if(related&&current.contains){related=current.contains(related);}else{while(related&&related!==current){related=related.parentNode;}}if(!related){evt=fix(evt||win.event);evt.type=evt.type==='mouseout'?'mouseleave':'mouseenter';evt.target=current;self.executeHandlers(evt,id);}};}}if(!self.hasFocusIn&&(name==='focusin'||name==='focusout')){capture=true;fakeName=name==='focusin'?'focus':'blur';nativeHandler=function(evt){evt=fix(evt||win.event);evt.type=evt.type==='focus'?'focusin':'focusout';self.executeHandlers(evt,id);};}callbackList=self.events[id][name];if(!callbackList){self.events[id][name]=callbackList=[{func:callback,scope:scope}];callbackList.fakeName=fakeName;callbackList.capture=capture;callbackList.nativeHandler=nativeHandler;if(name==='ready'){bindOnReady(target,nativeHandler,self);}else{addEvent(target,fakeName||name,nativeHandler,capture);}}else{if(name==='ready'&&self.domLoaded){callback(fix({type:name}));}else{callbackList.push({func:callback,scope:scope});}}}target=callbackList=null;return callback;};EventUtils.prototype.unbind=function(target,names,callback){var callbackList,i,ci,name,eventMap;if(!target||target.nodeType===3||target.nodeType===8){return this;}var id=target[this.expando];if(id){eventMap=this.events[id];if(names){var namesList=names.split(' ');i=namesList.length;while(i--){name=namesList[i];callbackList=eventMap[name];if(callbackList){if(callback){ci=callbackList.length;while(ci--){if(callbackList[ci].func===callback){var nativeHandler=callbackList.nativeHandler;var fakeName=callbackList.fakeName,capture=callbackList.capture;callbackList=callbackList.slice(0,ci).concat(callbackList.slice(ci+1));callbackList.nativeHandler=nativeHandler;callbackList.fakeName=fakeName;callbackList.capture=capture;eventMap[name]=callbackList;}}}if(!callback||callbackList.length===0){delete eventMap[name];removeEvent(target,callbackList.fakeName||name,callbackList.nativeHandler,callbackList.capture);}}}}else{each$j(eventMap,function(callbackList,name){removeEvent(target,callbackList.fakeName||name,callbackList.nativeHandler,callbackList.capture);});eventMap={};}for(name in eventMap){if(has$2(eventMap,name)){return this;}}delete this.events[id];try{delete target[this.expando];}catch(ex){target[this.expando]=null;}}return this;};EventUtils.prototype.fire=function(target,name,args){var id;if(!target||target.nodeType===3||target.nodeType===8){return this;}var event=fix({type:name,target:target},args);do{id=target[this.expando];if(id){this.executeHandlers(event,id);}target=target.parentNode||target.ownerDocument||target.defaultView||target.parentWindow;}while(target&&!event.isPropagationStopped());return this;};EventUtils.prototype.clean=function(target){var i,children;if(!target||target.nodeType===3||target.nodeType===8){return this;}if(target[this.expando]){this.unbind(target);}if(!target.getElementsByTagName){target=target.document;}if(target&&target.getElementsByTagName){this.unbind(target);children=target.getElementsByTagName('*');i=children.length;while(i--){target=children[i];if(target[this.expando]){this.unbind(target);}}}return this;};EventUtils.prototype.destroy=function(){this.events={};};EventUtils.prototype.cancel=function(e){if(e){e.preventDefault();e.stopImmediatePropagation();}return false;};EventUtils.prototype.executeHandlers=function(evt,id){var container=this.events[id];var callbackList=container&&container[evt.type];if(callbackList){for(var i=0,l=callbackList.length;i<l;i++){var callback=callbackList[i];if(callback&&callback.func.call(callback.scope,evt)===false){evt.preventDefault();}if(evt.isImmediatePropagationStopped()){return;}}}};EventUtils.Event=new EventUtils();return EventUtils;}();var support,Expr,getText,isXML,tokenize,compile,select$1,outermostContext,sortInput,hasDuplicate,setDocument,document$1,docElem,documentIsHTML,rbuggyQSA,rbuggyMatches,matches,contains,expando='sizzle'+-new Date(),preferredDoc=window.document,dirruns=0,done=0,classCache=createCache(),tokenCache=createCache(),compilerCache=createCache(),sortOrder=function(a,b){if(a===b){hasDuplicate=true;}return 0;},strundefined=typeof undefined,MAX_NEGATIVE=1<<31,hasOwn={}.hasOwnProperty,arr=[],pop=arr.pop,push_native=arr.push,push$1=arr.push,slice$1=arr.slice,indexOf=arr.indexOf||function(elem){var i=0,len=this.length;for(;i<len;i++){if(this[i]===elem){return i;}}return-1;},booleans='checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped',whitespace='[\\\\x20\\\\t\\\\r\\\\n\\\\f]',identifier='(?:\\\\\\\\.|[\\\\w-]|[^\\\\x00-\\\\xa0])+',attributes='\\\\['+whitespace+'*('+identifier+')(?:'+whitespace+'*([*^$|!~]?=)'+whitespace+'*(?:\\'((?:\\\\\\\\.|[^\\\\\\\\\\'])*)\\'|\"((?:\\\\\\\\.|[^\\\\\\\\\"])*)\"|('+identifier+'))|)'+whitespace+'*\\\\]',pseudos=':('+identifier+')(?:\\\\(('+'(\\'((?:\\\\\\\\.|[^\\\\\\\\\\'])*)\\'|\"((?:\\\\\\\\.|[^\\\\\\\\\"])*)\")|'+'((?:\\\\\\\\.|[^\\\\\\\\()[\\\\]]|'+attributes+')*)|'+'.*'+')\\\\)|)',rtrim=new RegExp('^'+whitespace+'+|((?:^|[^\\\\\\\\])(?:\\\\\\\\.)*)'+whitespace+'+$','g'),rcomma=new RegExp('^'+whitespace+'*,'+whitespace+'*'),rcombinators=new RegExp('^'+whitespace+'*([>+~]|'+whitespace+')'+whitespace+'*'),rattributeQuotes=new RegExp('='+whitespace+'*([^\\\\]\\'\"]*?)'+whitespace+'*\\\\]','g'),rpseudo=new RegExp(pseudos),ridentifier=new RegExp('^'+identifier+'$'),matchExpr={ID:new RegExp('^#('+identifier+')'),CLASS:new RegExp('^\\\\.('+identifier+')'),TAG:new RegExp('^('+identifier+'|[*])'),ATTR:new RegExp('^'+attributes),PSEUDO:new RegExp('^'+pseudos),CHILD:new RegExp('^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\\\('+whitespace+'*(even|odd|(([+-]|)(\\\\d*)n|)'+whitespace+'*(?:([+-]|)'+whitespace+'*(\\\\d+)|))'+whitespace+'*\\\\)|)','i'),bool:new RegExp('^(?:'+booleans+')$','i'),needsContext:new RegExp('^'+whitespace+'*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\\\('+whitespace+'*((?:-\\\\d)?\\\\d*)'+whitespace+'*\\\\)|)(?=[^-]|$)','i')},rinputs=/^(?:input|select|textarea|button)$/i,rheader=/^h\\d$/i,rnative=/^[^{]+\\{\\s*\\[native \\w/,rquickExpr$1=/^(?:#([\\w-]+)|(\\w+)|\\.([\\w-]+))$/,rsibling=/[+~]/,rescape=/'|\\\\/g,runescape=new RegExp('\\\\\\\\([\\\\da-f]{1,6}'+whitespace+'?|('+whitespace+')|.)','ig'),funescape=function(_,escaped,escapedWhitespace){var high='0x'+escaped-65536;return high!==high||escapedWhitespace?escaped:high<0?String.fromCharCode(high+65536):String.fromCharCode(high>>10|55296,high&1023|56320);};try{push$1.apply(arr=slice$1.call(preferredDoc.childNodes),preferredDoc.childNodes);arr[preferredDoc.childNodes.length].nodeType;}catch(e){push$1={apply:arr.length?function(target,els){push_native.apply(target,slice$1.call(els));}:function(target,els){var j=target.length,i=0;while(target[j++]=els[i++]){}target.length=j-1;}};}var Sizzle=function(selector,context,results,seed){var match,elem,m,nodeType,i,groups,old,nid,newContext,newSelector;if((context?context.ownerDocument||context:preferredDoc)!==document$1){setDocument(context);}context=context||document$1;results=results||[];if(!selector||typeof selector!=='string'){return results;}if((nodeType=context.nodeType)!==1&&nodeType!==9){return[];}if(documentIsHTML&&!seed){if(match=rquickExpr$1.exec(selector)){if(m=match[1]){if(nodeType===9){elem=context.getElementById(m);if(elem&&elem.parentNode){if(elem.id===m){results.push(elem);return results;}}else{return results;}}else{if(context.ownerDocument&&(elem=context.ownerDocument.getElementById(m))&&contains(context,elem)&&elem.id===m){results.push(elem);return results;}}}else if(match[2]){push$1.apply(results,context.getElementsByTagName(selector));return results;}else if((m=match[3])&&support.getElementsByClassName){push$1.apply(results,context.getElementsByClassName(m));return results;}}if(support.qsa&&(!rbuggyQSA||!rbuggyQSA.test(selector))){nid=old=expando;newContext=context;newSelector=nodeType===9&&selector;if(nodeType===1&&context.nodeName.toLowerCase()!=='object'){groups=tokenize(selector);if(old=context.getAttribute('id')){nid=old.replace(rescape,'\\\\$&');}else{context.setAttribute('id',nid);}nid='[id=\\''+nid+'\\'] ';i=groups.length;while(i--){groups[i]=nid+toSelector(groups[i]);}newContext=rsibling.test(selector)&&testContext(context.parentNode)||context;newSelector=groups.join(',');}if(newSelector){try{push$1.apply(results,newContext.querySelectorAll(newSelector));return results;}catch(qsaError){}finally{if(!old){context.removeAttribute('id');}}}}}return select$1(selector.replace(rtrim,'$1'),context,results,seed);};function createCache(){var keys=[];function cache(key,value){if(keys.push(key+' ')>Expr.cacheLength){delete cache[keys.shift()];}return cache[key+' ']=value;}return cache;}function markFunction(fn){fn[expando]=true;return fn;}function siblingCheck(a,b){var cur=b&&a,diff=cur&&a.nodeType===1&&b.nodeType===1&&(~b.sourceIndex||MAX_NEGATIVE)-(~a.sourceIndex||MAX_NEGATIVE);if(diff){return diff;}if(cur){while(cur=cur.nextSibling){if(cur===b){return-1;}}}return a?1:-1;}function createInputPseudo(type){return function(elem){var name=elem.nodeName.toLowerCase();return name==='input'&&elem.type===type;};}function createButtonPseudo(type){return function(elem){var name=elem.nodeName.toLowerCase();return(name==='input'||name==='button')&&elem.type===type;};}function createPositionalPseudo(fn){return markFunction(function(argument){argument=+argument;return markFunction(function(seed,matches){var j,matchIndexes=fn([],seed.length,argument),i=matchIndexes.length;while(i--){if(seed[j=matchIndexes[i]]){seed[j]=!(matches[j]=seed[j]);}}});});}function testContext(context){return context&&typeof context.getElementsByTagName!==strundefined&&context;}support=Sizzle.support={};isXML=Sizzle.isXML=function(elem){var documentElement=elem&&(elem.ownerDocument||elem).documentElement;return documentElement?documentElement.nodeName!=='HTML':false;};setDocument=Sizzle.setDocument=function(node){var hasCompare,doc=node?node.ownerDocument||node:preferredDoc,parent=doc.defaultView;function getTop(win){try{return win.top;}catch(ex){}return null;}if(doc===document$1||doc.nodeType!==9||!doc.documentElement){return document$1;}document$1=doc;docElem=doc.documentElement;documentIsHTML=!isXML(doc);if(parent&&parent!==getTop(parent)){if(parent.addEventListener){parent.addEventListener('unload',function(){setDocument();},false);}else if(parent.attachEvent){parent.attachEvent('onunload',function(){setDocument();});}}support.attributes=true;support.getElementsByTagName=true;support.getElementsByClassName=rnative.test(doc.getElementsByClassName);support.getById=true;Expr.find.ID=function(id,context){if(typeof context.getElementById!==strundefined&&documentIsHTML){var m=context.getElementById(id);return m&&m.parentNode?[m]:[];}};Expr.filter.ID=function(id){var attrId=id.replace(runescape,funescape);return function(elem){return elem.getAttribute('id')===attrId;};};Expr.find.TAG=support.getElementsByTagName?function(tag,context){if(typeof context.getElementsByTagName!==strundefined){return context.getElementsByTagName(tag);}}:function(tag,context){var elem,tmp=[],i=0,results=context.getElementsByTagName(tag);if(tag==='*'){while(elem=results[i++]){if(elem.nodeType===1){tmp.push(elem);}}return tmp;}return results;};Expr.find.CLASS=support.getElementsByClassName&&function(className,context){if(documentIsHTML){return context.getElementsByClassName(className);}};rbuggyMatches=[];rbuggyQSA=[];support.disconnectedMatch=true;rbuggyQSA=rbuggyQSA.length&&new RegExp(rbuggyQSA.join('|'));rbuggyMatches=rbuggyMatches.length&&new RegExp(rbuggyMatches.join('|'));hasCompare=rnative.test(docElem.compareDocumentPosition);contains=hasCompare||rnative.test(docElem.contains)?function(a,b){var adown=a.nodeType===9?a.documentElement:a,bup=b&&b.parentNode;return a===bup||!!(bup&&bup.nodeType===1&&(adown.contains?adown.contains(bup):a.compareDocumentPosition&&a.compareDocumentPosition(bup)&16));}:function(a,b){if(b){while(b=b.parentNode){if(b===a){return true;}}}return false;};sortOrder=hasCompare?function(a,b){if(a===b){hasDuplicate=true;return 0;}var compare=!a.compareDocumentPosition-!b.compareDocumentPosition;if(compare){return compare;}compare=(a.ownerDocument||a)===(b.ownerDocument||b)?a.compareDocumentPosition(b):1;if(compare&1||!support.sortDetached&&b.compareDocumentPosition(a)===compare){if(a===doc||a.ownerDocument===preferredDoc&&contains(preferredDoc,a)){return-1;}if(b===doc||b.ownerDocument===preferredDoc&&contains(preferredDoc,b)){return 1;}return sortInput?indexOf.call(sortInput,a)-indexOf.call(sortInput,b):0;}return compare&4?-1:1;}:function(a,b){if(a===b){hasDuplicate=true;return 0;}var cur,i=0,aup=a.parentNode,bup=b.parentNode,ap=[a],bp=[b];if(!aup||!bup){return a===doc?-1:b===doc?1:aup?-1:bup?1:sortInput?indexOf.call(sortInput,a)-indexOf.call(sortInput,b):0;}else if(aup===bup){return siblingCheck(a,b);}cur=a;while(cur=cur.parentNode){ap.unshift(cur);}cur=b;while(cur=cur.parentNode){bp.unshift(cur);}while(ap[i]===bp[i]){i++;}return i?siblingCheck(ap[i],bp[i]):ap[i]===preferredDoc?-1:bp[i]===preferredDoc?1:0;};return doc;};Sizzle.matches=function(expr,elements){return Sizzle(expr,null,null,elements);};Sizzle.matchesSelector=function(elem,expr){if((elem.ownerDocument||elem)!==document$1){setDocument(elem);}expr=expr.replace(rattributeQuotes,'=\\'$1\\']');if(support.matchesSelector&&documentIsHTML&&(!rbuggyMatches||!rbuggyMatches.test(expr))&&(!rbuggyQSA||!rbuggyQSA.test(expr))){try{var ret=matches.call(elem,expr);if(ret||support.disconnectedMatch||elem.document&&elem.document.nodeType!==11){return ret;}}catch(e){}}return Sizzle(expr,document$1,null,[elem]).length>0;};Sizzle.contains=function(context,elem){if((context.ownerDocument||context)!==document$1){setDocument(context);}return contains(context,elem);};Sizzle.attr=function(elem,name){if((elem.ownerDocument||elem)!==document$1){setDocument(elem);}var fn=Expr.attrHandle[name.toLowerCase()],val=fn&&hasOwn.call(Expr.attrHandle,name.toLowerCase())?fn(elem,name,!documentIsHTML):undefined;return val!==undefined?val:support.attributes||!documentIsHTML?elem.getAttribute(name):(val=elem.getAttributeNode(name))&&val.specified?val.value:null;};Sizzle.error=function(msg){throw new Error('Syntax error, unrecognized expression: '+msg);};Sizzle.uniqueSort=function(results){var elem,duplicates=[],j=0,i=0;hasDuplicate=!support.detectDuplicates;sortInput=!support.sortStable&&results.slice(0);results.sort(sortOrder);if(hasDuplicate){while(elem=results[i++]){if(elem===results[i]){j=duplicates.push(i);}}while(j--){results.splice(duplicates[j],1);}}sortInput=null;return results;};getText=Sizzle.getText=function(elem){var node,ret='',i=0,nodeType=elem.nodeType;if(!nodeType){while(node=elem[i++]){ret+=getText(node);}}else if(nodeType===1||nodeType===9||nodeType===11){if(typeof elem.textContent==='string'){return elem.textContent;}else{for(elem=elem.firstChild;elem;elem=elem.nextSibling){ret+=getText(elem);}}}else if(nodeType===3||nodeType===4){return elem.nodeValue;}return ret;};Expr=Sizzle.selectors={cacheLength:50,createPseudo:markFunction,match:matchExpr,attrHandle:{},find:{},relative:{'>':{dir:'parentNode',first:true},' ':{dir:'parentNode'},'+':{dir:'previousSibling',first:true},'~':{dir:'previousSibling'}},preFilter:{ATTR:function(match){match[1]=match[1].replace(runescape,funescape);match[3]=(match[3]||match[4]||match[5]||'').replace(runescape,funescape);if(match[2]==='~='){match[3]=' '+match[3]+' ';}return match.slice(0,4);},CHILD:function(match){match[1]=match[1].toLowerCase();if(match[1].slice(0,3)==='nth'){if(!match[3]){Sizzle.error(match[0]);}match[4]=+(match[4]?match[5]+(match[6]||1):2*(match[3]==='even'||match[3]==='odd'));match[5]=+(match[7]+match[8]||match[3]==='odd');}else if(match[3]){Sizzle.error(match[0]);}return match;},PSEUDO:function(match){var excess,unquoted=!match[6]&&match[2];if(matchExpr.CHILD.test(match[0])){return null;}if(match[3]){match[2]=match[4]||match[5]||'';}else if(unquoted&&rpseudo.test(unquoted)&&(excess=tokenize(unquoted,true))&&(excess=unquoted.indexOf(')',unquoted.length-excess)-unquoted.length)){match[0]=match[0].slice(0,excess);match[2]=unquoted.slice(0,excess);}return match.slice(0,3);}},filter:{TAG:function(nodeNameSelector){var nodeName=nodeNameSelector.replace(runescape,funescape).toLowerCase();return nodeNameSelector==='*'?function(){return true;}:function(elem){return elem.nodeName&&elem.nodeName.toLowerCase()===nodeName;};},CLASS:function(className){var pattern=classCache[className+' '];return pattern||(pattern=new RegExp('(^|'+whitespace+')'+className+'('+whitespace+'|$)'))&&classCache(className,function(elem){return pattern.test(typeof elem.className==='string'&&elem.className||typeof elem.getAttribute!==strundefined&&elem.getAttribute('class')||'');});},ATTR:function(name,operator,check){return function(elem){var result=Sizzle.attr(elem,name);if(result==null){return operator==='!=';}if(!operator){return true;}result+='';return operator==='='?result===check:operator==='!='?result!==check:operator==='^='?check&&result.indexOf(check)===0:operator==='*='?check&&result.indexOf(check)>-1:operator==='$='?check&&result.slice(-check.length)===check:operator==='~='?(' '+result+' ').indexOf(check)>-1:operator==='|='?result===check||result.slice(0,check.length+1)===check+'-':false;};},CHILD:function(type,what,argument,first,last){var simple=type.slice(0,3)!=='nth',forward=type.slice(-4)!=='last',ofType=what==='of-type';return first===1&&last===0?function(elem){return!!elem.parentNode;}:function(elem,context,xml){var cache,outerCache,node,diff,nodeIndex,start,dir=simple!==forward?'nextSibling':'previousSibling',parent=elem.parentNode,name=ofType&&elem.nodeName.toLowerCase(),useCache=!xml&&!ofType;if(parent){if(simple){while(dir){node=elem;while(node=node[dir]){if(ofType?node.nodeName.toLowerCase()===name:node.nodeType===1){return false;}}start=dir=type==='only'&&!start&&'nextSibling';}return true;}start=[forward?parent.firstChild:parent.lastChild];if(forward&&useCache){outerCache=parent[expando]||(parent[expando]={});cache=outerCache[type]||[];nodeIndex=cache[0]===dirruns&&cache[1];diff=cache[0]===dirruns&&cache[2];node=nodeIndex&&parent.childNodes[nodeIndex];while(node=++nodeIndex&&node&&node[dir]||(diff=nodeIndex=0)||start.pop()){if(node.nodeType===1&&++diff&&node===elem){outerCache[type]=[dirruns,nodeIndex,diff];break;}}}else if(useCache&&(cache=(elem[expando]||(elem[expando]={}))[type])&&cache[0]===dirruns){diff=cache[1];}else{while(node=++nodeIndex&&node&&node[dir]||(diff=nodeIndex=0)||start.pop()){if((ofType?node.nodeName.toLowerCase()===name:node.nodeType===1)&&++diff){if(useCache){(node[expando]||(node[expando]={}))[type]=[dirruns,diff];}if(node===elem){break;}}}}diff-=last;return diff===first||diff%first===0&&diff/first>=0;}};},PSEUDO:function(pseudo,argument){var args,fn=Expr.pseudos[pseudo]||Expr.setFilters[pseudo.toLowerCase()]||Sizzle.error('unsupported pseudo: '+pseudo);if(fn[expando]){return fn(argument);}if(fn.length>1){args=[pseudo,pseudo,'',argument];return Expr.setFilters.hasOwnProperty(pseudo.toLowerCase())?markFunction(function(seed,matches){var idx,matched=fn(seed,argument),i=matched.length;while(i--){idx=indexOf.call(seed,matched[i]);seed[idx]=!(matches[idx]=matched[i]);}}):function(elem){return fn(elem,0,args);};}return fn;}},pseudos:{not:markFunction(function(selector){var input=[],results=[],matcher=compile(selector.replace(rtrim,'$1'));return matcher[expando]?markFunction(function(seed,matches,context,xml){var elem,unmatched=matcher(seed,null,xml,[]),i=seed.length;while(i--){if(elem=unmatched[i]){seed[i]=!(matches[i]=elem);}}}):function(elem,context,xml){input[0]=elem;matcher(input,null,xml,results);input[0]=null;return!results.pop();};}),has:markFunction(function(selector){return function(elem){return Sizzle(selector,elem).length>0;};}),contains:markFunction(function(text){text=text.replace(runescape,funescape);return function(elem){return(elem.textContent||elem.innerText||getText(elem)).indexOf(text)>-1;};}),lang:markFunction(function(lang){if(!ridentifier.test(lang||'')){Sizzle.error('unsupported lang: '+lang);}lang=lang.replace(runescape,funescape).toLowerCase();return function(elem){var elemLang;do{if(elemLang=documentIsHTML?elem.lang:elem.getAttribute('xml:lang')||elem.getAttribute('lang')){elemLang=elemLang.toLowerCase();return elemLang===lang||elemLang.indexOf(lang+'-')===0;}}while((elem=elem.parentNode)&&elem.nodeType===1);return false;};}),target:function(elem){var hash=window.location&&window.location.hash;return hash&&hash.slice(1)===elem.id;},root:function(elem){return elem===docElem;},focus:function(elem){return elem===document$1.activeElement&&(!document$1.hasFocus||document$1.hasFocus())&&!!(elem.type||elem.href||~elem.tabIndex);},enabled:function(elem){return elem.disabled===false;},disabled:function(elem){return elem.disabled===true;},checked:function(elem){var nodeName=elem.nodeName.toLowerCase();return nodeName==='input'&&!!elem.checked||nodeName==='option'&&!!elem.selected;},selected:function(elem){if(elem.parentNode){elem.parentNode.selectedIndex;}return elem.selected===true;},empty:function(elem){for(elem=elem.firstChild;elem;elem=elem.nextSibling){if(elem.nodeType<6){return false;}}return true;},parent:function(elem){return!Expr.pseudos.empty(elem);},header:function(elem){return rheader.test(elem.nodeName);},input:function(elem){return rinputs.test(elem.nodeName);},button:function(elem){var name=elem.nodeName.toLowerCase();return name==='input'&&elem.type==='button'||name==='button';},text:function(elem){var attr;return elem.nodeName.toLowerCase()==='input'&&elem.type==='text'&&((attr=elem.getAttribute('type'))==null||attr.toLowerCase()==='text');},first:createPositionalPseudo(function(){return[0];}),last:createPositionalPseudo(function(matchIndexes,length){return[length-1];}),eq:createPositionalPseudo(function(matchIndexes,length,argument){return[argument<0?argument+length:argument];}),even:createPositionalPseudo(function(matchIndexes,length){var i=0;for(;i<length;i+=2){matchIndexes.push(i);}return matchIndexes;}),odd:createPositionalPseudo(function(matchIndexes,length){var i=1;for(;i<length;i+=2){matchIndexes.push(i);}return matchIndexes;}),lt:createPositionalPseudo(function(matchIndexes,length,argument){var i=argument<0?argument+length:argument;for(;--i>=0;){matchIndexes.push(i);}return matchIndexes;}),gt:createPositionalPseudo(function(matchIndexes,length,argument){var i=argument<0?argument+length:argument;for(;++i<length;){matchIndexes.push(i);}return matchIndexes;})}};Expr.pseudos.nth=Expr.pseudos.eq;each$k(['radio','checkbox','file','password','image'],function(i){Expr.pseudos[i]=createInputPseudo(i);});each$k(['submit','reset'],function(i){Expr.pseudos[i]=createButtonPseudo(i);});function setFilters(){}setFilters.prototype=Expr.filters=Expr.pseudos;Expr.setFilters=new setFilters();tokenize=Sizzle.tokenize=function(selector,parseOnly){var matched,match,tokens,type,soFar,groups,preFilters,cached=tokenCache[selector+' '];if(cached){return parseOnly?0:cached.slice(0);}soFar=selector;groups=[];preFilters=Expr.preFilter;while(soFar){if(!matched||(match=rcomma.exec(soFar))){if(match){soFar=soFar.slice(match[0].length)||soFar;}groups.push(tokens=[]);}matched=false;if(match=rcombinators.exec(soFar)){matched=match.shift();tokens.push({value:matched,type:match[0].replace(rtrim,' ')});soFar=soFar.slice(matched.length);}for(type in Expr.filter){if(!Expr.filter.hasOwnProperty(type)){continue;}if((match=matchExpr[type].exec(soFar))&&(!preFilters[type]||(match=preFilters[type](match)))){matched=match.shift();tokens.push({value:matched,type:type,matches:match});soFar=soFar.slice(matched.length);}}if(!matched){break;}}return parseOnly?soFar.length:soFar?Sizzle.error(selector):tokenCache(selector,groups).slice(0);};function toSelector(tokens){var i=0,len=tokens.length,selector='';for(;i<len;i++){selector+=tokens[i].value;}return selector;}function addCombinator(matcher,combinator,base){var dir=combinator.dir,checkNonElements=base&&dir==='parentNode',doneName=done++;return combinator.first?function(elem,context,xml){while(elem=elem[dir]){if(elem.nodeType===1||checkNonElements){return matcher(elem,context,xml);}}}:function(elem,context,xml){var oldCache,outerCache,newCache=[dirruns,doneName];if(xml){while(elem=elem[dir]){if(elem.nodeType===1||checkNonElements){if(matcher(elem,context,xml)){return true;}}}}else{while(elem=elem[dir]){if(elem.nodeType===1||checkNonElements){outerCache=elem[expando]||(elem[expando]={});if((oldCache=outerCache[dir])&&oldCache[0]===dirruns&&oldCache[1]===doneName){return newCache[2]=oldCache[2];}else{outerCache[dir]=newCache;if(newCache[2]=matcher(elem,context,xml)){return true;}}}}}};}function elementMatcher(matchers){return matchers.length>1?function(elem,context,xml){var i=matchers.length;while(i--){if(!matchers[i](elem,context,xml)){return false;}}return true;}:matchers[0];}function multipleContexts(selector,contexts,results){var i=0,len=contexts.length;for(;i<len;i++){Sizzle(selector,contexts[i],results);}return results;}function condense(unmatched,map,filter,context,xml){var elem,newUnmatched=[],i=0,len=unmatched.length,mapped=map!=null;for(;i<len;i++){if(elem=unmatched[i]){if(!filter||filter(elem,context,xml)){newUnmatched.push(elem);if(mapped){map.push(i);}}}}return newUnmatched;}function setMatcher(preFilter,selector,matcher,postFilter,postFinder,postSelector){if(postFilter&&!postFilter[expando]){postFilter=setMatcher(postFilter);}if(postFinder&&!postFinder[expando]){postFinder=setMatcher(postFinder,postSelector);}return markFunction(function(seed,results,context,xml){var temp,i,elem,preMap=[],postMap=[],preexisting=results.length,elems=seed||multipleContexts(selector||'*',context.nodeType?[context]:context,[]),matcherIn=preFilter&&(seed||!selector)?condense(elems,preMap,preFilter,context,xml):elems,matcherOut=matcher?postFinder||(seed?preFilter:preexisting||postFilter)?[]:results:matcherIn;if(matcher){matcher(matcherIn,matcherOut,context,xml);}if(postFilter){temp=condense(matcherOut,postMap);postFilter(temp,[],context,xml);i=temp.length;while(i--){if(elem=temp[i]){matcherOut[postMap[i]]=!(matcherIn[postMap[i]]=elem);}}}if(seed){if(postFinder||preFilter){if(postFinder){temp=[];i=matcherOut.length;while(i--){if(elem=matcherOut[i]){temp.push(matcherIn[i]=elem);}}postFinder(null,matcherOut=[],temp,xml);}i=matcherOut.length;while(i--){if((elem=matcherOut[i])&&(temp=postFinder?indexOf.call(seed,elem):preMap[i])>-1){seed[temp]=!(results[temp]=elem);}}}}else{matcherOut=condense(matcherOut===results?matcherOut.splice(preexisting,matcherOut.length):matcherOut);if(postFinder){postFinder(null,results,matcherOut,xml);}else{push$1.apply(results,matcherOut);}}});}function matcherFromTokens(tokens){var checkContext,matcher,j,len=tokens.length,leadingRelative=Expr.relative[tokens[0].type],implicitRelative=leadingRelative||Expr.relative[' '],i=leadingRelative?1:0,matchContext=addCombinator(function(elem){return elem===checkContext;},implicitRelative,true),matchAnyContext=addCombinator(function(elem){return indexOf.call(checkContext,elem)>-1;},implicitRelative,true),matchers=[function(elem,context,xml){var ret=!leadingRelative&&(xml||context!==outermostContext)||((checkContext=context).nodeType?matchContext(elem,context,xml):matchAnyContext(elem,context,xml));checkContext=null;return ret;}];for(;i<len;i++){if(matcher=Expr.relative[tokens[i].type]){matchers=[addCombinator(elementMatcher(matchers),matcher)];}else{matcher=Expr.filter[tokens[i].type].apply(null,tokens[i].matches);if(matcher[expando]){j=++i;for(;j<len;j++){if(Expr.relative[tokens[j].type]){break;}}return setMatcher(i>1&&elementMatcher(matchers),i>1&&toSelector(tokens.slice(0,i-1).concat({value:tokens[i-2].type===' '?'*':''})).replace(rtrim,'$1'),matcher,i<j&&matcherFromTokens(tokens.slice(i,j)),j<len&&matcherFromTokens(tokens=tokens.slice(j)),j<len&&toSelector(tokens));}matchers.push(matcher);}}return elementMatcher(matchers);}function matcherFromGroupMatchers(elementMatchers,setMatchers){var bySet=setMatchers.length>0,byElement=elementMatchers.length>0,superMatcher=function(seed,context,xml,results,outermost){var elem,j,matcher,matchedCount=0,i='0',unmatched=seed&&[],setMatched=[],contextBackup=outermostContext,elems=seed||byElement&&Expr.find.TAG('*',outermost),dirrunsUnique=dirruns+=contextBackup==null?1:Math.random()||0.1,len=elems.length;if(outermost){outermostContext=context!==document$1&&context;}for(;i!==len&&(elem=elems[i])!=null;i++){if(byElement&&elem){j=0;while(matcher=elementMatchers[j++]){if(matcher(elem,context,xml)){results.push(elem);break;}}if(outermost){dirruns=dirrunsUnique;}}if(bySet){if(elem=!matcher&&elem){matchedCount--;}if(seed){unmatched.push(elem);}}}matchedCount+=i;if(bySet&&i!==matchedCount){j=0;while(matcher=setMatchers[j++]){matcher(unmatched,setMatched,context,xml);}if(seed){if(matchedCount>0){while(i--){if(!(unmatched[i]||setMatched[i])){setMatched[i]=pop.call(results);}}}setMatched=condense(setMatched);}push$1.apply(results,setMatched);if(outermost&&!seed&&setMatched.length>0&&matchedCount+setMatchers.length>1){Sizzle.uniqueSort(results);}}if(outermost){dirruns=dirrunsUnique;outermostContext=contextBackup;}return unmatched;};return bySet?markFunction(superMatcher):superMatcher;}compile=Sizzle.compile=function(selector,match){var i,setMatchers=[],elementMatchers=[],cached=compilerCache[selector+' '];if(!cached){if(!match){match=tokenize(selector);}i=match.length;while(i--){cached=matcherFromTokens(match[i]);if(cached[expando]){setMatchers.push(cached);}else{elementMatchers.push(cached);}}cached=compilerCache(selector,matcherFromGroupMatchers(elementMatchers,setMatchers));cached.selector=selector;}return cached;};select$1=Sizzle.select=function(selector,context,results,seed){var i,tokens,token,type,find,compiled=typeof selector==='function'&&selector,match=!seed&&tokenize(selector=compiled.selector||selector);results=results||[];if(match.length===1){tokens=match[0]=match[0].slice(0);if(tokens.length>2&&(token=tokens[0]).type==='ID'&&support.getById&&context.nodeType===9&&documentIsHTML&&Expr.relative[tokens[1].type]){context=(Expr.find.ID(token.matches[0].replace(runescape,funescape),context)||[])[0];if(!context){return results;}else if(compiled){context=context.parentNode;}selector=selector.slice(tokens.shift().value.length);}i=matchExpr.needsContext.test(selector)?0:tokens.length;while(i--){token=tokens[i];if(Expr.relative[type=token.type]){break;}if(find=Expr.find[type]){if(seed=find(token.matches[0].replace(runescape,funescape),rsibling.test(tokens[0].type)&&testContext(context.parentNode)||context)){tokens.splice(i,1);selector=seed.length&&toSelector(tokens);if(!selector){push$1.apply(results,seed);return results;}break;}}}}(compiled||compile(selector,match))(seed,context,!documentIsHTML,results,rsibling.test(selector)&&testContext(context.parentNode)||context);return results;};support.sortStable=expando.split('').sort(sortOrder).join('')===expando;support.detectDuplicates=!!hasDuplicate;setDocument();support.sortDetached=true;var doc=document;var push=Array.prototype.push;var slice=Array.prototype.slice;var rquickExpr=/^(?:[^#<]*(<[\\w\\W]+>)[^>]*$|#([\\w\\-]*)$)/;var Event$1=EventUtils.Event;var skipUniques=Tools.makeMap('children,contents,next,prev');var isDefined=function(obj){return typeof obj!=='undefined';};var isString=function(obj){return typeof obj==='string';};var isWindow=function(obj){return obj&&obj===obj.window;};var createFragment$1=function(html,fragDoc){fragDoc=fragDoc||doc;var container=fragDoc.createElement('div');var frag=fragDoc.createDocumentFragment();container.innerHTML=html;var node;while(node=container.firstChild){frag.appendChild(node);}return frag;};var domManipulate=function(targetNodes,sourceItem,callback,reverse){var i;if(isString(sourceItem)){sourceItem=createFragment$1(sourceItem,getElementDocument(targetNodes[0]));}else if(sourceItem.length&&!sourceItem.nodeType){sourceItem=DomQuery.makeArray(sourceItem);if(reverse){for(i=sourceItem.length-1;i>=0;i--){domManipulate(targetNodes,sourceItem[i],callback,reverse);}}else{for(i=0;i<sourceItem.length;i++){domManipulate(targetNodes,sourceItem[i],callback,reverse);}}return targetNodes;}if(sourceItem.nodeType){i=targetNodes.length;while(i--){callback.call(targetNodes[i],sourceItem);}}return targetNodes;};var hasClass=function(node,className){return node&&className&&(' '+node.className+' ').indexOf(' '+className+' ')!==-1;};var wrap$2=function(elements,wrapper,all){var lastParent,newWrapper;wrapper=DomQuery(wrapper)[0];elements.each(function(){var self=this;if(!all||lastParent!==self.parentNode){lastParent=self.parentNode;newWrapper=wrapper.cloneNode(false);self.parentNode.insertBefore(newWrapper,self);newWrapper.appendChild(self);}else{newWrapper.appendChild(self);}});return elements;};var numericCssMap=Tools.makeMap('fillOpacity fontWeight lineHeight opacity orphans widows zIndex zoom',' ');var booleanMap=Tools.makeMap('checked compact declare defer disabled ismap multiple nohref noshade nowrap readonly selected',' ');var propFix={for:'htmlFor',class:'className',readonly:'readOnly'};var cssFix={float:'cssFloat'};var attrHooks={},cssHooks={};var DomQueryConstructor=function(selector,context){return new DomQuery.fn.init(selector,context);};var inArray$1=function(item,array){var i;if(array.indexOf){return array.indexOf(item);}i=array.length;while(i--){if(array[i]===item){return i;}}return-1;};var whiteSpaceRegExp=/^\\s*|\\s*$/g;var trim$1=function(str){return str===null||str===undefined?'':(''+str).replace(whiteSpaceRegExp,'');};var each$g=function(obj,callback){var length,key,i,value;if(obj){length=obj.length;if(length===undefined){for(key in obj){if(obj.hasOwnProperty(key)){value=obj[key];if(callback.call(value,key,value)===false){break;}}}}else{for(i=0;i<length;i++){value=obj[i];if(callback.call(value,i,value)===false){break;}}}}return obj;};var grep$2=function(array,callback){var out=[];each$g(array,function(i,item){if(callback(item,i)){out.push(item);}});return out;};var getElementDocument=function(element){if(!element){return doc;}if(element.nodeType===9){return element;}return element.ownerDocument;};DomQueryConstructor.fn=DomQueryConstructor.prototype={constructor:DomQueryConstructor,selector:'',context:null,length:0,init:function(selector,context){var self=this;var match,node;if(!selector){return self;}if(selector.nodeType){self.context=self[0]=selector;self.length=1;return self;}if(context&&context.nodeType){self.context=context;}else{if(context){return DomQuery(selector).attr(context);}self.context=context=document;}if(isString(selector)){self.selector=selector;if(selector.charAt(0)==='<'&&selector.charAt(selector.length-1)==='>'&&selector.length>=3){match=[null,selector,null];}else{match=rquickExpr.exec(selector);}if(match){if(match[1]){node=createFragment$1(selector,getElementDocument(context)).firstChild;while(node){push.call(self,node);node=node.nextSibling;}}else{node=getElementDocument(context).getElementById(match[2]);if(!node){return self;}if(node.id!==match[2]){return self.find(selector);}self.length=1;self[0]=node;}}else{return DomQuery(context).find(selector);}}else{this.add(selector,false);}return self;},toArray:function(){return Tools.toArray(this);},add:function(items,sort){var self=this;var nodes,i;if(isString(items)){return self.add(DomQuery(items));}if(sort!==false){nodes=DomQuery.unique(self.toArray().concat(DomQuery.makeArray(items)));self.length=nodes.length;for(i=0;i<nodes.length;i++){self[i]=nodes[i];}}else{push.apply(self,DomQuery.makeArray(items));}return self;},attr:function(name,value){var self=this;var hook;if(typeof name==='object'){each$g(name,function(name,value){self.attr(name,value);});}else if(isDefined(value)){this.each(function(){var hook;if(this.nodeType===1){hook=attrHooks[name];if(hook&&hook.set){hook.set(this,value);return;}if(value===null){this.removeAttribute(name,2);}else{this.setAttribute(name,value,2);}}});}else{if(self[0]&&self[0].nodeType===1){hook=attrHooks[name];if(hook&&hook.get){return hook.get(self[0],name);}if(booleanMap[name]){return self.prop(name)?name:undefined;}value=self[0].getAttribute(name,2);if(value===null){value=undefined;}}return value;}return self;},removeAttr:function(name){return this.attr(name,null);},prop:function(name,value){var self=this;name=propFix[name]||name;if(typeof name==='object'){each$g(name,function(name,value){self.prop(name,value);});}else if(isDefined(value)){this.each(function(){if(this.nodeType===1){this[name]=value;}});}else{if(self[0]&&self[0].nodeType&&name in self[0]){return self[0][name];}return value;}return self;},css:function(name,value){var self=this;var elm,hook;var camel=function(name){return name.replace(/-(\\D)/g,function(a,b){return b.toUpperCase();});};var dashed=function(name){return name.replace(/[A-Z]/g,function(a){return'-'+a;});};if(typeof name==='object'){each$g(name,function(name,value){self.css(name,value);});}else{if(isDefined(value)){name=camel(name);if(typeof value==='number'&&!numericCssMap[name]){value=value.toString()+'px';}self.each(function(){var style=this.style;hook=cssHooks[name];if(hook&&hook.set){hook.set(this,value);return;}try{this.style[cssFix[name]||name]=value;}catch(ex){}if(value===null||value===''){if(style.removeProperty){style.removeProperty(dashed(name));}else{style.removeAttribute(name);}}});}else{elm=self[0];hook=cssHooks[name];if(hook&&hook.get){return hook.get(elm);}if(elm.ownerDocument.defaultView){try{return elm.ownerDocument.defaultView.getComputedStyle(elm,null).getPropertyValue(dashed(name));}catch(ex){return undefined;}}else if(elm.currentStyle){return elm.currentStyle[camel(name)];}else{return'';}}}return self;},remove:function(){var self=this;var node,i=this.length;while(i--){node=self[i];Event$1.clean(node);if(node.parentNode){node.parentNode.removeChild(node);}}return this;},empty:function(){var self=this;var node,i=this.length;while(i--){node=self[i];while(node.firstChild){node.removeChild(node.firstChild);}}return this;},html:function(value){var self=this;var i;if(isDefined(value)){i=self.length;try{while(i--){self[i].innerHTML=value;}}catch(ex){DomQuery(self[i]).empty().append(value);}return self;}return self[0]?self[0].innerHTML:'';},text:function(value){var self=this;var i;if(isDefined(value)){i=self.length;while(i--){if('innerText'in self[i]){self[i].innerText=value;}else{self[0].textContent=value;}}return self;}return self[0]?self[0].innerText||self[0].textContent:'';},append:function(){return domManipulate(this,arguments,function(node){if(this.nodeType===1||this.host&&this.host.nodeType===1){this.appendChild(node);}});},prepend:function(){return domManipulate(this,arguments,function(node){if(this.nodeType===1||this.host&&this.host.nodeType===1){this.insertBefore(node,this.firstChild);}},true);},before:function(){var self=this;if(self[0]&&self[0].parentNode){return domManipulate(self,arguments,function(node){this.parentNode.insertBefore(node,this);});}return self;},after:function(){var self=this;if(self[0]&&self[0].parentNode){return domManipulate(self,arguments,function(node){this.parentNode.insertBefore(node,this.nextSibling);},true);}return self;},appendTo:function(val){DomQuery(val).append(this);return this;},prependTo:function(val){DomQuery(val).prepend(this);return this;},replaceWith:function(content){return this.before(content).remove();},wrap:function(content){return wrap$2(this,content);},wrapAll:function(content){return wrap$2(this,content,true);},wrapInner:function(content){this.each(function(){DomQuery(this).contents().wrapAll(content);});return this;},unwrap:function(){return this.parent().each(function(){DomQuery(this).replaceWith(this.childNodes);});},clone:function(){var result=[];this.each(function(){result.push(this.cloneNode(true));});return DomQuery(result);},addClass:function(className){return this.toggleClass(className,true);},removeClass:function(className){return this.toggleClass(className,false);},toggleClass:function(className,state){var self=this;if(typeof className!=='string'){return self;}if(className.indexOf(' ')!==-1){each$g(className.split(' '),function(){self.toggleClass(this,state);});}else{self.each(function(index,node){var classState=hasClass(node,className);if(classState!==state){var existingClassName=node.className;if(classState){node.className=trim$1((' '+existingClassName+' ').replace(' '+className+' ',' '));}else{node.className+=existingClassName?' '+className:className;}}});}return self;},hasClass:function(className){return hasClass(this[0],className);},each:function(callback){return each$g(this,callback);},on:function(name,callback){return this.each(function(){Event$1.bind(this,name,callback);});},off:function(name,callback){return this.each(function(){Event$1.unbind(this,name,callback);});},trigger:function(name){return this.each(function(){if(typeof name==='object'){Event$1.fire(this,name.type,name);}else{Event$1.fire(this,name);}});},show:function(){return this.css('display','');},hide:function(){return this.css('display','none');},slice:function(){return DomQuery(slice.apply(this,arguments));},eq:function(index){return index===-1?this.slice(index):this.slice(index,+index+1);},first:function(){return this.eq(0);},last:function(){return this.eq(-1);},find:function(selector){var i,l;var ret=[];for(i=0,l=this.length;i<l;i++){DomQuery.find(selector,this[i],ret);}return DomQuery(ret);},filter:function(selector){if(typeof selector==='function'){return DomQuery(grep$2(this.toArray(),function(item,i){return selector(i,item);}));}return DomQuery(DomQuery.filter(selector,this.toArray()));},closest:function(selector){var result=[];if(selector instanceof DomQuery){selector=selector[0];}this.each(function(i,node){while(node){if(typeof selector==='string'&&DomQuery(node).is(selector)){result.push(node);break;}else if(node===selector){result.push(node);break;}node=node.parentNode;}});return DomQuery(result);},offset:function(offset){var elm,doc,docElm;var x=0,y=0,pos;if(!offset){elm=this[0];if(elm){doc=elm.ownerDocument;docElm=doc.documentElement;if(elm.getBoundingClientRect){pos=elm.getBoundingClientRect();x=pos.left+(docElm.scrollLeft||doc.body.scrollLeft)-docElm.clientLeft;y=pos.top+(docElm.scrollTop||doc.body.scrollTop)-docElm.clientTop;}}return{left:x,top:y};}return this.css(offset);},push:push,sort:Array.prototype.sort,splice:Array.prototype.splice};Tools.extend(DomQueryConstructor,{extend:Tools.extend,makeArray:function(object){if(isWindow(object)||object.nodeType){return[object];}return Tools.toArray(object);},inArray:inArray$1,isArray:Tools.isArray,each:each$g,trim:trim$1,grep:grep$2,find:Sizzle,expr:Sizzle.selectors,unique:Sizzle.uniqueSort,text:Sizzle.getText,contains:Sizzle.contains,filter:function(expr,elems,not){var i=elems.length;if(not){expr=':not('+expr+')';}while(i--){if(elems[i].nodeType!==1){elems.splice(i,1);}}if(elems.length===1){elems=DomQuery.find.matchesSelector(elems[0],expr)?[elems[0]]:[];}else{elems=DomQuery.find.matches(expr,elems);}return elems;}});var dir=function(el,prop,until){var matched=[];var cur=el[prop];if(typeof until!=='string'&&until instanceof DomQuery){until=until[0];}while(cur&&cur.nodeType!==9){if(until!==undefined){if(cur===until){break;}if(typeof until==='string'&&DomQuery(cur).is(until)){break;}}if(cur.nodeType===1){matched.push(cur);}cur=cur[prop];}return matched;};var sibling$1=function(node,siblingName,nodeType,until){var result=[];if(until instanceof DomQuery){until=until[0];}for(;node;node=node[siblingName]){if(nodeType&&node.nodeType!==nodeType){continue;}if(until!==undefined){if(node===until){break;}if(typeof until==='string'&&DomQuery(node).is(until)){break;}}result.push(node);}return result;};var firstSibling=function(node,siblingName,nodeType){for(node=node[siblingName];node;node=node[siblingName]){if(node.nodeType===nodeType){return node;}}return null;};each$g({parent:function(node){var parent=node.parentNode;return parent&&parent.nodeType!==11?parent:null;},parents:function(node){return dir(node,'parentNode');},next:function(node){return firstSibling(node,'nextSibling',1);},prev:function(node){return firstSibling(node,'previousSibling',1);},children:function(node){return sibling$1(node.firstChild,'nextSibling',1);},contents:function(node){return Tools.toArray((node.nodeName==='iframe'?node.contentDocument||node.contentWindow.document:node).childNodes);}},function(name,fn){DomQueryConstructor.fn[name]=function(selector){var self=this;var result=[];self.each(function(){var nodes=fn.call(result,this,selector,result);if(nodes){if(DomQuery.isArray(nodes)){result.push.apply(result,nodes);}else{result.push(nodes);}}});if(this.length>1){if(!skipUniques[name]){result=DomQuery.unique(result);}if(name.indexOf('parents')===0){result=result.reverse();}}var wrappedResult=DomQuery(result);if(selector){return wrappedResult.filter(selector);}return wrappedResult;};});each$g({parentsUntil:function(node,until){return dir(node,'parentNode',until);},nextUntil:function(node,until){return sibling$1(node,'nextSibling',1,until).slice(1);},prevUntil:function(node,until){return sibling$1(node,'previousSibling',1,until).slice(1);}},function(name,fn){DomQueryConstructor.fn[name]=function(selector,filter){var self=this;var result=[];self.each(function(){var nodes=fn.call(result,this,selector,result);if(nodes){if(DomQuery.isArray(nodes)){result.push.apply(result,nodes);}else{result.push(nodes);}}});if(this.length>1){result=DomQuery.unique(result);if(name.indexOf('parents')===0||name==='prevUntil'){result=result.reverse();}}var wrappedResult=DomQuery(result);if(filter){return wrappedResult.filter(filter);}return wrappedResult;};});DomQueryConstructor.fn.is=function(selector){return!!selector&&this.filter(selector).length>0;};DomQueryConstructor.fn.init.prototype=DomQueryConstructor.fn;DomQueryConstructor.overrideDefaults=function(callback){var defaults;var sub=function(selector,context){defaults=defaults||callback();if(arguments.length===0){selector=defaults.element;}if(!context){context=defaults.context;}return new sub.fn.init(selector,context);};DomQuery.extend(sub,this);return sub;};DomQueryConstructor.attrHooks=attrHooks;DomQueryConstructor.cssHooks=cssHooks;var DomQuery=DomQueryConstructor;var each$f=Tools.each;var grep$1=Tools.grep;var isIE=Env.ie;var simpleSelectorRe=/^([a-z0-9],?)+$/i;var setupAttrHooks=function(styles,settings,getContext){var keepValues=settings.keep_values;var keepUrlHook={set:function($elm,value,name){if(settings.url_converter&&value!==null){value=settings.url_converter.call(settings.url_converter_scope||getContext(),value,name,$elm[0]);}$elm.attr('data-mce-'+name,value).attr(name,value);},get:function($elm,name){return $elm.attr('data-mce-'+name)||$elm.attr(name);}};var attrHooks={style:{set:function($elm,value){if(value!==null&&typeof value==='object'){$elm.css(value);return;}if(keepValues){$elm.attr('data-mce-style',value);}if(value!==null&&typeof value==='string'){$elm.removeAttr('style');$elm.css(styles.parse(value));}else{$elm.attr('style',value);}},get:function($elm){var value=$elm.attr('data-mce-style')||$elm.attr('style');value=styles.serialize(styles.parse(value),$elm[0].nodeName);return value;}}};if(keepValues){attrHooks.href=attrHooks.src=keepUrlHook;}return attrHooks;};var updateInternalStyleAttr=function(styles,$elm){var rawValue=$elm.attr('style');var value=styles.serialize(styles.parse(rawValue),$elm[0].nodeName);if(!value){value=null;}$elm.attr('data-mce-style',value);};var findNodeIndex=function(node,normalized){var idx=0,lastNodeType,nodeType;if(node){for(lastNodeType=node.nodeType,node=node.previousSibling;node;node=node.previousSibling){nodeType=node.nodeType;if(normalized&&nodeType===3){if(nodeType===lastNodeType||!node.nodeValue.length){continue;}}idx++;lastNodeType=nodeType;}}return idx;};var DOMUtils=function(doc,settings){if(settings===void 0){settings={};}var addedStyles={};var win=window;var files={};var counter=0;var stdMode=true;var boxModel=true;var styleSheetLoader=instance.forElement(SugarElement.fromDom(doc),{contentCssCors:settings.contentCssCors,referrerPolicy:settings.referrerPolicy});var boundEvents=[];var schema=settings.schema?settings.schema:Schema({});var styles=Styles({url_converter:settings.url_converter,url_converter_scope:settings.url_converter_scope},settings.schema);var events=settings.ownEvents?new EventUtils():EventUtils.Event;var blockElementsMap=schema.getBlockElements();var $=DomQuery.overrideDefaults(function(){return{context:doc,element:self.getRoot()};});var isBlock=function(node){if(typeof node==='string'){return!!blockElementsMap[node];}else if(node){var type=node.nodeType;if(type){return!!(type===1&&blockElementsMap[node.nodeName]);}}return false;};var get=function(elm){return elm&&doc&&isString$1(elm)?doc.getElementById(elm):elm;};var $$=function(elm){return $(typeof elm==='string'?get(elm):elm);};var getAttrib=function(elm,name,defaultVal){var hook,value;var $elm=$$(elm);if($elm.length){hook=attrHooks[name];if(hook&&hook.get){value=hook.get($elm,name);}else{value=$elm.attr(name);}}if(typeof value==='undefined'){value=defaultVal||'';}return value;};var getAttribs=function(elm){var node=get(elm);if(!node){return[];}return node.attributes;};var setAttrib=function(elm,name,value){if(value===''){value=null;}var $elm=$$(elm);var originalValue=$elm.attr(name);if(!$elm.length){return;}var hook=attrHooks[name];if(hook&&hook.set){hook.set($elm,value,name);}else{$elm.attr(name,value);}if(originalValue!==value&&settings.onSetAttrib){settings.onSetAttrib({attrElm:$elm,attrName:name,attrValue:value});}};var clone=function(node,deep){if(!isIE||node.nodeType!==1||deep){return node.cloneNode(deep);}else{var clone_1=doc.createElement(node.nodeName);each$f(getAttribs(node),function(attr){setAttrib(clone_1,attr.nodeName,getAttrib(node,attr.nodeName));});return clone_1;}};var getRoot=function(){return settings.root_element||doc.body;};var getViewPort=function(argWin){var vp=getBounds(argWin);return{x:vp.x,y:vp.y,w:vp.width,h:vp.height};};var getPos$1=function(elm,rootElm){return getPos(doc.body,get(elm),rootElm);};var setStyle=function(elm,name,value){var $elm=isString$1(name)?$$(elm).css(name,value):$$(elm).css(name);if(settings.update_styles){updateInternalStyleAttr(styles,$elm);}};var setStyles=function(elm,stylesArg){var $elm=$$(elm).css(stylesArg);if(settings.update_styles){updateInternalStyleAttr(styles,$elm);}};var getStyle=function(elm,name,computed){var $elm=$$(elm);if(computed){return $elm.css(name);}name=name.replace(/-(\\D)/g,function(a,b){return b.toUpperCase();});if(name==='float'){name=Env.browser.isIE()?'styleFloat':'cssFloat';}return $elm[0]&&$elm[0].style?$elm[0].style[name]:undefined;};var getSize=function(elm){var w,h;elm=get(elm);w=getStyle(elm,'width');h=getStyle(elm,'height');if(w.indexOf('px')===-1){w=0;}if(h.indexOf('px')===-1){h=0;}return{w:parseInt(w,10)||elm.offsetWidth||elm.clientWidth,h:parseInt(h,10)||elm.offsetHeight||elm.clientHeight};};var getRect=function(elm){elm=get(elm);var pos=getPos$1(elm);var size=getSize(elm);return{x:pos.x,y:pos.y,w:size.w,h:size.h};};var is=function(elm,selector){var i;if(!elm){return false;}if(!Array.isArray(elm)){if(selector==='*'){return elm.nodeType===1;}if(simpleSelectorRe.test(selector)){var selectors=selector.toLowerCase().split(/,/);var elmName=elm.nodeName.toLowerCase();for(i=selectors.length-1;i>=0;i--){if(selectors[i]===elmName){return true;}}return false;}if(elm.nodeType&&elm.nodeType!==1){return false;}}var elms=!Array.isArray(elm)?[elm]:elm;return Sizzle(selector,elms[0].ownerDocument||elms[0],null,elms).length>0;};var getParents=function(elm,selector,root,collect){var result=[];var selectorVal;var node=get(elm);collect=collect===undefined;root=root||(getRoot().nodeName!=='BODY'?getRoot().parentNode:null);if(Tools.is(selector,'string')){selectorVal=selector;if(selector==='*'){selector=function(node){return node.nodeType===1;};}else{selector=function(node){return is(node,selectorVal);};}}while(node){if(node===root||isNullable(node.nodeType)||isDocument$1(node)||isDocumentFragment(node)){break;}if(!selector||typeof selector==='function'&&selector(node)){if(collect){result.push(node);}else{return[node];}}node=node.parentNode;}return collect?result:null;};var getParent=function(node,selector,root){var parents=getParents(node,selector,root,false);return parents&&parents.length>0?parents[0]:null;};var _findSib=function(node,selector,name){var func=selector;if(node){if(typeof selector==='string'){func=function(node){return is(node,selector);};}for(node=node[name];node;node=node[name]){if(typeof func==='function'&&func(node)){return node;}}}return null;};var getNext=function(node,selector){return _findSib(node,selector,'nextSibling');};var getPrev=function(node,selector){return _findSib(node,selector,'previousSibling');};var select=function(selector,scope){return Sizzle(selector,get(scope)||settings.root_element||doc,[]);};var run=function(elm,func,scope){var result;var node=typeof elm==='string'?get(elm):elm;if(!node){return false;}if(Tools.isArray(node)&&(node.length||node.length===0)){result=[];each$f(node,function(elm,i){if(elm){result.push(func.call(scope,typeof elm==='string'?get(elm):elm,i));}});return result;}var context=scope?scope:this;return func.call(context,node);};var setAttribs=function(elm,attrs){$$(elm).each(function(i,node){each$f(attrs,function(value,name){setAttrib(node,name,value);});});};var setHTML=function(elm,html){var $elm=$$(elm);if(isIE){$elm.each(function(i,target){if(target.canHaveHTML===false){return;}while(target.firstChild){target.removeChild(target.firstChild);}try{target.innerHTML='<br>'+html;target.removeChild(target.firstChild);}catch(ex){DomQuery('<div></div>').html('<br>'+html).contents().slice(1).appendTo(target);}return html;});}else{$elm.html(html);}};var add=function(parentElm,name,attrs,html,create){return run(parentElm,function(parentElm){var newElm=typeof name==='string'?doc.createElement(name):name;setAttribs(newElm,attrs);if(html){if(typeof html!=='string'&&html.nodeType){newElm.appendChild(html);}else if(typeof html==='string'){setHTML(newElm,html);}}return!create?parentElm.appendChild(newElm):newElm;});};var create=function(name,attrs,html){return add(doc.createElement(name),name,attrs,html,true);};var decode=Entities.decode;var encode=Entities.encodeAllRaw;var createHTML=function(name,attrs,html){var outHtml='',key;outHtml+='<'+name;for(key in attrs){if(hasNonNullableKey(attrs,key)){outHtml+=' '+key+'=\"'+encode(attrs[key])+'\"';}}if(typeof html!=='undefined'){return outHtml+'>'+html+'</'+name+'>';}return outHtml+' />';};var createFragment=function(html){var node;var container=doc.createElement('div');var frag=doc.createDocumentFragment();frag.appendChild(container);if(html){container.innerHTML=html;}while(node=container.firstChild){frag.appendChild(node);}frag.removeChild(container);return frag;};var remove=function(node,keepChildren){var $node=$$(node);if(keepChildren){$node.each(function(){var child;while(child=this.firstChild){if(child.nodeType===3&&child.data.length===0){this.removeChild(child);}else{this.parentNode.insertBefore(child,this);}}}).remove();}else{$node.remove();}return $node.length>1?$node.toArray():$node[0];};var removeAllAttribs=function(e){return run(e,function(e){var i;var attrs=e.attributes;for(i=attrs.length-1;i>=0;i--){e.removeAttributeNode(attrs.item(i));}});};var parseStyle=function(cssText){return styles.parse(cssText);};var serializeStyle=function(stylesArg,name){return styles.serialize(stylesArg,name);};var addStyle=function(cssText){var head,styleElm;if(self!==DOMUtils.DOM&&doc===document){if(addedStyles[cssText]){return;}addedStyles[cssText]=true;}styleElm=doc.getElementById('mceDefaultStyles');if(!styleElm){styleElm=doc.createElement('style');styleElm.id='mceDefaultStyles';styleElm.type='text/css';head=doc.getElementsByTagName('head')[0];if(head.firstChild){head.insertBefore(styleElm,head.firstChild);}else{head.appendChild(styleElm);}}if(styleElm.styleSheet){styleElm.styleSheet.cssText+=cssText;}else{styleElm.appendChild(doc.createTextNode(cssText));}};var loadCSS=function(urls){if(!urls){urls='';}each$k(urls.split(','),function(url){files[url]=true;styleSheetLoader.load(url,noop);});};var toggleClass=function(elm,cls,state){$$(elm).toggleClass(cls,state).each(function(){if(this.className===''){DomQuery(this).attr('class',null);}});};var addClass=function(elm,cls){$$(elm).addClass(cls);};var removeClass=function(elm,cls){toggleClass(elm,cls,false);};var hasClass=function(elm,cls){return $$(elm).hasClass(cls);};var show=function(elm){$$(elm).show();};var hide=function(elm){$$(elm).hide();};var isHidden=function(elm){return $$(elm).css('display')==='none';};var uniqueId=function(prefix){return(!prefix?'mce_':prefix)+counter++;};var getOuterHTML=function(elm){var node=typeof elm==='string'?get(elm):elm;return isElement$5(node)?node.outerHTML:DomQuery('<div></div>').append(DomQuery(node).clone()).html();};var setOuterHTML=function(elm,html){$$(elm).each(function(){try{if('outerHTML'in this){this.outerHTML=html;return;}}catch(ex){}remove(DomQuery(this).html(html),true);});};var insertAfter=function(node,reference){var referenceNode=get(reference);return run(node,function(node){var parent=referenceNode.parentNode;var nextSibling=referenceNode.nextSibling;if(nextSibling){parent.insertBefore(node,nextSibling);}else{parent.appendChild(node);}return node;});};var replace=function(newElm,oldElm,keepChildren){return run(oldElm,function(oldElm){if(Tools.is(oldElm,'array')){newElm=newElm.cloneNode(true);}if(keepChildren){each$f(grep$1(oldElm.childNodes),function(node){newElm.appendChild(node);});}return oldElm.parentNode.replaceChild(newElm,oldElm);});};var rename=function(elm,name){var newElm;if(elm.nodeName!==name.toUpperCase()){newElm=create(name);each$f(getAttribs(elm),function(attrNode){setAttrib(newElm,attrNode.nodeName,getAttrib(elm,attrNode.nodeName));});replace(newElm,elm,true);}return newElm||elm;};var findCommonAncestor=function(a,b){var ps=a,pe;while(ps){pe=b;while(pe&&ps!==pe){pe=pe.parentNode;}if(ps===pe){break;}ps=ps.parentNode;}if(!ps&&a.ownerDocument){return a.ownerDocument.documentElement;}return ps;};var toHex=function(rgbVal){return styles.toHex(Tools.trim(rgbVal));};var isNonEmptyElement=function(node){if(isElement$5(node)){var isNamedAnchor=node.nodeName.toLowerCase()==='a'&&!getAttrib(node,'href')&&getAttrib(node,'id');if(getAttrib(node,'name')||getAttrib(node,'data-mce-bookmark')||isNamedAnchor){return true;}}return false;};var isEmpty=function(node,elements){var type,name,brCount=0;if(isNonEmptyElement(node)){return false;}node=node.firstChild;if(node){var walker=new DomTreeWalker(node,node.parentNode);var whitespace=schema?schema.getWhiteSpaceElements():{};elements=elements||(schema?schema.getNonEmptyElements():null);do{type=node.nodeType;if(isElement$5(node)){var bogusVal=node.getAttribute('data-mce-bogus');if(bogusVal){node=walker.next(bogusVal==='all');continue;}name=node.nodeName.toLowerCase();if(elements&&elements[name]){if(name==='br'){brCount++;node=walker.next();continue;}return false;}if(isNonEmptyElement(node)){return false;}}if(type===8){return false;}if(type===3&&!isWhitespaceText(node.nodeValue)){return false;}if(type===3&&node.parentNode&&whitespace[node.parentNode.nodeName]&&isWhitespaceText(node.nodeValue)){return false;}node=walker.next();}while(node);}return brCount<=1;};var createRng=function(){return doc.createRange();};var split=function(parentElm,splitElm,replacementElm){var range=createRng();var beforeFragment;var afterFragment;var parentNode;if(parentElm&&splitElm){range.setStart(parentElm.parentNode,findNodeIndex(parentElm));range.setEnd(splitElm.parentNode,findNodeIndex(splitElm));beforeFragment=range.extractContents();range=createRng();range.setStart(splitElm.parentNode,findNodeIndex(splitElm)+1);range.setEnd(parentElm.parentNode,findNodeIndex(parentElm)+1);afterFragment=range.extractContents();parentNode=parentElm.parentNode;parentNode.insertBefore(trimNode(self,beforeFragment),parentElm);if(replacementElm){parentNode.insertBefore(replacementElm,parentElm);}else{parentNode.insertBefore(splitElm,parentElm);}parentNode.insertBefore(trimNode(self,afterFragment),parentElm);remove(parentElm);return replacementElm||splitElm;}};var bind=function(target,name,func,scope){if(Tools.isArray(target)){var i=target.length;var rv=[];while(i--){rv[i]=bind(target[i],name,func,scope);}return rv;}if(settings.collect&&(target===doc||target===win)){boundEvents.push([target,name,func,scope]);}var output=events.bind(target,name,func,scope||self);return output;};var unbind=function(target,name,func){if(Tools.isArray(target)){var i=target.length;var rv=[];while(i--){rv[i]=unbind(target[i],name,func);}return rv;}else{if(boundEvents.length>0&&(target===doc||target===win)){var i=boundEvents.length;while(i--){var item=boundEvents[i];if(target===item[0]&&(!name||name===item[1])&&(!func||func===item[2])){events.unbind(item[0],item[1],item[2]);}}}return events.unbind(target,name,func);}};var fire=function(target,name,evt){return events.fire(target,name,evt);};var getContentEditable=function(node){if(node&&isElement$5(node)){var contentEditable=node.getAttribute('data-mce-contenteditable');if(contentEditable&&contentEditable!=='inherit'){return contentEditable;}return node.contentEditable!=='inherit'?node.contentEditable:null;}else{return null;}};var getContentEditableParent=function(node){var root=getRoot();var state=null;for(;node&&node!==root;node=node.parentNode){state=getContentEditable(node);if(state!==null){break;}}return state;};var destroy=function(){if(boundEvents.length>0){var i=boundEvents.length;while(i--){var item=boundEvents[i];events.unbind(item[0],item[1],item[2]);}}each$j(files,function(_,url){styleSheetLoader.unload(url);delete files[url];});if(Sizzle.setDocument){Sizzle.setDocument();}};var isChildOf=function(node,parent){if(!isIE){return node===parent||parent.contains(node);}else{while(node){if(parent===node){return true;}node=node.parentNode;}return false;}};var dumpRng=function(r){return'startContainer: '+r.startContainer.nodeName+', startOffset: '+r.startOffset+', endContainer: '+r.endContainer.nodeName+', endOffset: '+r.endOffset;};var self={doc:doc,settings:settings,win:win,files:files,stdMode:stdMode,boxModel:boxModel,styleSheetLoader:styleSheetLoader,boundEvents:boundEvents,styles:styles,schema:schema,events:events,isBlock:isBlock,$:$,$$:$$,root:null,clone:clone,getRoot:getRoot,getViewPort:getViewPort,getRect:getRect,getSize:getSize,getParent:getParent,getParents:getParents,get:get,getNext:getNext,getPrev:getPrev,select:select,is:is,add:add,create:create,createHTML:createHTML,createFragment:createFragment,remove:remove,setStyle:setStyle,getStyle:getStyle,setStyles:setStyles,removeAllAttribs:removeAllAttribs,setAttrib:setAttrib,setAttribs:setAttribs,getAttrib:getAttrib,getPos:getPos$1,parseStyle:parseStyle,serializeStyle:serializeStyle,addStyle:addStyle,loadCSS:loadCSS,addClass:addClass,removeClass:removeClass,hasClass:hasClass,toggleClass:toggleClass,show:show,hide:hide,isHidden:isHidden,uniqueId:uniqueId,setHTML:setHTML,getOuterHTML:getOuterHTML,setOuterHTML:setOuterHTML,decode:decode,encode:encode,insertAfter:insertAfter,replace:replace,rename:rename,findCommonAncestor:findCommonAncestor,toHex:toHex,run:run,getAttribs:getAttribs,isEmpty:isEmpty,createRng:createRng,nodeIndex:findNodeIndex,split:split,bind:bind,unbind:unbind,fire:fire,getContentEditable:getContentEditable,getContentEditableParent:getContentEditableParent,destroy:destroy,isChildOf:isChildOf,dumpRng:dumpRng};var attrHooks=setupAttrHooks(styles,settings,constant(self));return self;};DOMUtils.DOM=DOMUtils(document);DOMUtils.nodeIndex=findNodeIndex;var DOM$a=DOMUtils.DOM;var each$e=Tools.each,grep=Tools.grep;var QUEUED=0;var LOADING=1;var LOADED=2;var FAILED=3;var ScriptLoader=function(){function ScriptLoader(settings){if(settings===void 0){settings={};}this.states={};this.queue=[];this.scriptLoadedCallbacks={};this.queueLoadedCallbacks=[];this.loading=0;this.settings=settings;}ScriptLoader.prototype._setReferrerPolicy=function(referrerPolicy){this.settings.referrerPolicy=referrerPolicy;};ScriptLoader.prototype.loadScript=function(url,success,failure){var dom=DOM$a;var elm;var cleanup=function(){dom.remove(id);if(elm){elm.onerror=elm.onload=elm=null;}};var done=function(){cleanup();success();};var error=function(){cleanup();if(isFunction(failure)){failure();}else{if(typeof console!=='undefined'&&console.log){console.log('Failed to load script: '+url);}}};var id=dom.uniqueId();elm=document.createElement('script');elm.id=id;elm.type='text/javascript';elm.src=Tools._addCacheSuffix(url);if(this.settings.referrerPolicy){dom.setAttrib(elm,'referrerpolicy',this.settings.referrerPolicy);}elm.onload=done;elm.onerror=error;(document.getElementsByTagName('head')[0]||document.body).appendChild(elm);};ScriptLoader.prototype.isDone=function(url){return this.states[url]===LOADED;};ScriptLoader.prototype.markDone=function(url){this.states[url]=LOADED;};ScriptLoader.prototype.add=function(url,success,scope,failure){var state=this.states[url];this.queue.push(url);if(state===undefined){this.states[url]=QUEUED;}if(success){if(!this.scriptLoadedCallbacks[url]){this.scriptLoadedCallbacks[url]=[];}this.scriptLoadedCallbacks[url].push({success:success,failure:failure,scope:scope||this});}};ScriptLoader.prototype.load=function(url,success,scope,failure){return this.add(url,success,scope,failure);};ScriptLoader.prototype.remove=function(url){delete this.states[url];delete this.scriptLoadedCallbacks[url];};ScriptLoader.prototype.loadQueue=function(success,scope,failure){this.loadScripts(this.queue,success,scope,failure);};ScriptLoader.prototype.loadScripts=function(scripts,success,scope,failure){var self=this;var failures=[];var execCallbacks=function(name,url){each$e(self.scriptLoadedCallbacks[url],function(callback){if(isFunction(callback[name])){callback[name].call(callback.scope);}});self.scriptLoadedCallbacks[url]=undefined;};self.queueLoadedCallbacks.push({success:success,failure:failure,scope:scope||this});var loadScripts=function(){var loadingScripts=grep(scripts);scripts.length=0;each$e(loadingScripts,function(url){if(self.states[url]===LOADED){execCallbacks('success',url);return;}if(self.states[url]===FAILED){execCallbacks('failure',url);return;}if(self.states[url]!==LOADING){self.states[url]=LOADING;self.loading++;self.loadScript(url,function(){self.states[url]=LOADED;self.loading--;execCallbacks('success',url);loadScripts();},function(){self.states[url]=FAILED;self.loading--;failures.push(url);execCallbacks('failure',url);loadScripts();});}});if(!self.loading){var notifyCallbacks=self.queueLoadedCallbacks.slice(0);self.queueLoadedCallbacks.length=0;each$e(notifyCallbacks,function(callback){if(failures.length===0){if(isFunction(callback.success)){callback.success.call(callback.scope);}}else{if(isFunction(callback.failure)){callback.failure.call(callback.scope,failures);}}});}};loadScripts();};ScriptLoader.ScriptLoader=new ScriptLoader();return ScriptLoader;}();var Cell=function(initial){var value=initial;var get=function(){return value;};var set=function(v){value=v;};return{get:get,set:set};};var isRaw=function(str){return isObject(str)&&has$2(str,'raw');};var isTokenised=function(str){return isArray$1(str)&&str.length>1;};var data={};var currentCode=Cell('en');var getLanguageData=function(){return get$9(data,currentCode.get());};var getData=function(){return map$2(data,function(value){return __assign({},value);});};var setCode=function(newCode){if(newCode){currentCode.set(newCode);}};var getCode=function(){return currentCode.get();};var add$4=function(code,items){var langData=data[code];if(!langData){data[code]=langData={};}each$j(items,function(translation,name){langData[name.toLowerCase()]=translation;});};var translate=function(text){var langData=getLanguageData().getOr({});var toString=function(obj){if(isFunction(obj)){return Object.prototype.toString.call(obj);}return!isEmpty(obj)?''+obj:'';};var isEmpty=function(text){return text===''||text===null||text===undefined;};var getLangData=function(text){var textstr=toString(text);return get$9(langData,textstr.toLowerCase()).map(toString).getOr(textstr);};var removeContext=function(str){return str.replace(/{context:\\w+}$/,'');};if(isEmpty(text)){return'';}if(isRaw(text)){return toString(text.raw);}if(isTokenised(text)){var values_1=text.slice(1);var substitued=getLangData(text[0]).replace(/\\{([0-9]+)\\}/g,function($1,$2){return has$2(values_1,$2)?toString(values_1[$2]):$1;});return removeContext(substitued);}return removeContext(getLangData(text));};var isRtl$1=function(){return getLanguageData().bind(function(items){return get$9(items,'_dir');}).exists(function(dir){return dir==='rtl';});};var hasCode=function(code){return has$2(data,code);};var I18n={getData:getData,setCode:setCode,getCode:getCode,add:add$4,translate:translate,isRtl:isRtl$1,hasCode:hasCode};var AddOnManager=function(){var items=[];var urls={};var lookup={};var _listeners=[];var runListeners=function(name,state){var matchedListeners=filter$4(_listeners,function(listener){return listener.name===name&&listener.state===state;});each$k(matchedListeners,function(listener){return listener.callback();});};var get=function(name){if(lookup[name]){return lookup[name].instance;}return undefined;};var dependencies=function(name){var result;if(lookup[name]){result=lookup[name].dependencies;}return result||[];};var requireLangPack=function(name,languages){if(AddOnManager.languageLoad!==false){waitFor(name,function(){var language=I18n.getCode();var wrappedLanguages=','+(languages||'')+',';if(!language||languages&&wrappedLanguages.indexOf(','+language+',')===-1){return;}ScriptLoader.ScriptLoader.add(urls[name]+'/langs/'+language+'.js');},'loaded');}};var add=function(id,addOn,dependencies){var addOnConstructor=addOn;items.push(addOnConstructor);lookup[id]={instance:addOnConstructor,dependencies:dependencies};runListeners(id,'added');return addOnConstructor;};var remove=function(name){delete urls[name];delete lookup[name];};var createUrl=function(baseUrl,dep){if(typeof dep==='object'){return dep;}return typeof baseUrl==='string'?{prefix:'',resource:dep,suffix:''}:{prefix:baseUrl.prefix,resource:dep,suffix:baseUrl.suffix};};var addComponents=function(pluginName,scripts){var pluginUrl=urls[pluginName];each$k(scripts,function(script){ScriptLoader.ScriptLoader.add(pluginUrl+'/'+script);});};var loadDependencies=function(name,addOnUrl,success,scope){var deps=dependencies(name);each$k(deps,function(dep){var newUrl=createUrl(addOnUrl,dep);load(newUrl.resource,newUrl,undefined,undefined);});if(success){if(scope){success.call(scope);}else{success.call(ScriptLoader);}}};var load=function(name,addOnUrl,success,scope,failure){if(urls[name]){return;}var urlString=typeof addOnUrl==='string'?addOnUrl:addOnUrl.prefix+addOnUrl.resource+addOnUrl.suffix;if(urlString.indexOf('/')!==0&&urlString.indexOf('://')===-1){urlString=AddOnManager.baseURL+'/'+urlString;}urls[name]=urlString.substring(0,urlString.lastIndexOf('/'));var done=function(){runListeners(name,'loaded');loadDependencies(name,addOnUrl,success,scope);};if(lookup[name]){done();}else{ScriptLoader.ScriptLoader.add(urlString,done,scope,failure);}};var waitFor=function(name,callback,state){if(state===void 0){state='added';}if(has$2(lookup,name)&&state==='added'){callback();}else if(has$2(urls,name)&&state==='loaded'){callback();}else{_listeners.push({name:name,state:state,callback:callback});}};return{items:items,urls:urls,lookup:lookup,_listeners:_listeners,get:get,dependencies:dependencies,requireLangPack:requireLangPack,add:add,remove:remove,createUrl:createUrl,addComponents:addComponents,load:load,waitFor:waitFor};};AddOnManager.languageLoad=true;AddOnManager.baseURL='';AddOnManager.PluginManager=AddOnManager();AddOnManager.ThemeManager=AddOnManager();var singleton=function(doRevoke){var subject=Cell(Optional.none());var revoke=function(){return subject.get().each(doRevoke);};var clear=function(){revoke();subject.set(Optional.none());};var isSet=function(){return subject.get().isSome();};var get=function(){return subject.get();};var set=function(s){revoke();subject.set(Optional.some(s));};return{clear:clear,isSet:isSet,get:get,set:set};};var value=function(){var subject=singleton(noop);var on=function(f){return subject.get().each(f);};return __assign(__assign({},subject),{on:on});};var first=function(fn,rate){var timer=null;var cancel=function(){if(!isNull(timer)){clearTimeout(timer);timer=null;}};var throttle=function(){var args=[];for(var _i=0;_i<arguments.length;_i++){args[_i]=arguments[_i];}if(isNull(timer)){timer=setTimeout(function(){timer=null;fn.apply(null,args);},rate);}};return{cancel:cancel,throttle:throttle};};var last=function(fn,rate){var timer=null;var cancel=function(){if(!isNull(timer)){clearTimeout(timer);timer=null;}};var throttle=function(){var args=[];for(var _i=0;_i<arguments.length;_i++){args[_i]=arguments[_i];}cancel();timer=setTimeout(function(){timer=null;fn.apply(null,args);},rate);};return{cancel:cancel,throttle:throttle};};var read$4=function(element,attr){var value=get$6(element,attr);return value===undefined||value===''?[]:value.split(' ');};var add$3=function(element,attr,id){var old=read$4(element,attr);var nu=old.concat([id]);set$1(element,attr,nu.join(' '));return true;};var remove$5=function(element,attr,id){var nu=filter$4(read$4(element,attr),function(v){return v!==id;});if(nu.length>0){set$1(element,attr,nu.join(' '));}else{remove$6(element,attr);}return false;};var supports=function(element){return element.dom.classList!==undefined;};var get$4=function(element){return read$4(element,'class');};var add$2=function(element,clazz){return add$3(element,'class',clazz);};var remove$4=function(element,clazz){return remove$5(element,'class',clazz);};var add$1=function(element,clazz){if(supports(element)){element.dom.classList.add(clazz);}else{add$2(element,clazz);}};var cleanClass=function(element){var classList=supports(element)?element.dom.classList:get$4(element);if(classList.length===0){remove$6(element,'class');}};var remove$3=function(element,clazz){if(supports(element)){var classList=element.dom.classList;classList.remove(clazz);}else{remove$4(element,clazz);}cleanClass(element);};var has=function(element,clazz){return supports(element)&&element.dom.classList.contains(clazz);};var descendants$1=function(scope,predicate){var result=[];each$k(children(scope),function(x){if(predicate(x)){result=result.concat([x]);}result=result.concat(descendants$1(x,predicate));});return result;};var descendants=function(scope,selector){return all(selector,scope);};var annotation=constant('mce-annotation');var dataAnnotation=constant('data-mce-annotation');var dataAnnotationId=constant('data-mce-annotation-uid');var identify=function(editor,annotationName){var rng=editor.selection.getRng();var start=SugarElement.fromDom(rng.startContainer);var root=SugarElement.fromDom(editor.getBody());var selector=annotationName.fold(function(){return'.'+annotation();},function(an){return'['+dataAnnotation()+'=\"'+an+'\"]';});var newStart=child$1(start,rng.startOffset).getOr(start);var closest=closest$2(newStart,selector,function(n){return eq(n,root);});var getAttr=function(c,property){if(has$1(c,property)){return Optional.some(get$6(c,property));}else{return Optional.none();}};return closest.bind(function(c){return getAttr(c,''+dataAnnotationId()).bind(function(uid){return getAttr(c,''+dataAnnotation()).map(function(name){var elements=findMarkers(editor,uid);return{uid:uid,name:name,elements:elements};});});});};var isAnnotation=function(elem){return isElement$6(elem)&&has(elem,annotation());};var findMarkers=function(editor,uid){var body=SugarElement.fromDom(editor.getBody());return descendants(body,'['+dataAnnotationId()+'=\"'+uid+'\"]');};var findAll=function(editor,name){var body=SugarElement.fromDom(editor.getBody());var markers=descendants(body,'['+dataAnnotation()+'=\"'+name+'\"]');var directory={};each$k(markers,function(m){var uid=get$6(m,dataAnnotationId());var nodesAlready=get$9(directory,uid).getOr([]);directory[uid]=nodesAlready.concat([m]);});return directory;};var setup$n=function(editor,_registry){var changeCallbacks=Cell({});var initData=function(){return{listeners:[],previous:value()};};var withCallbacks=function(name,f){updateCallbacks(name,function(data){f(data);return data;});};var updateCallbacks=function(name,f){var callbackMap=changeCallbacks.get();var data=get$9(callbackMap,name).getOrThunk(initData);var outputData=f(data);callbackMap[name]=outputData;changeCallbacks.set(callbackMap);};var fireCallbacks=function(name,uid,elements){withCallbacks(name,function(data){each$k(data.listeners,function(f){return f(true,name,{uid:uid,nodes:map$3(elements,function(elem){return elem.dom;})});});});};var fireNoAnnotation=function(name){withCallbacks(name,function(data){each$k(data.listeners,function(f){return f(false,name);});});};var onNodeChange=last(function(){var callbackMap=changeCallbacks.get();var annotations=sort(keys(callbackMap));each$k(annotations,function(name){updateCallbacks(name,function(data){var prev=data.previous.get();identify(editor,Optional.some(name)).fold(function(){if(prev.isSome()){fireNoAnnotation(name);data.previous.clear();}},function(_a){var uid=_a.uid,name=_a.name,elements=_a.elements;if(!is$1(prev,uid)){fireCallbacks(name,uid,elements);data.previous.set(uid);}});return{previous:data.previous,listeners:data.listeners};});});},30);editor.on('remove',function(){onNodeChange.cancel();});editor.on('NodeChange',function(){onNodeChange.throttle();});var addListener=function(name,f){updateCallbacks(name,function(data){return{previous:data.previous,listeners:data.listeners.concat([f])};});};return{addListener:addListener};};var setup$m=function(editor,registry){var identifyParserNode=function(span){return Optional.from(span.attr(dataAnnotation())).bind(registry.lookup);};editor.on('init',function(){editor.serializer.addNodeFilter('span',function(spans){each$k(spans,function(span){identifyParserNode(span).each(function(settings){if(settings.persistent===false){span.unwrap();}});});});});};var create$7=function(){var annotations={};var register=function(name,settings){annotations[name]={name:name,settings:settings};};var lookup=function(name){return get$9(annotations,name).map(function(a){return a.settings;});};return{register:register,lookup:lookup};};var unique=0;var generate=function(prefix){var date=new Date();var time=date.getTime();var random=Math.floor(Math.random()*1000000000);unique++;return prefix+'_'+random+unique+String(time);};var add=function(element,classes){each$k(classes,function(x){add$1(element,x);});};var fromHtml=function(html,scope){var doc=scope||document;var div=doc.createElement('div');div.innerHTML=html;return children(SugarElement.fromDom(div));};var fromDom$1=function(nodes){return map$3(nodes,SugarElement.fromDom);};var get$3=function(element){return element.dom.innerHTML;};var set=function(element,content){var owner=owner$1(element);var docDom=owner.dom;var fragment=SugarElement.fromDom(docDom.createDocumentFragment());var contentElements=fromHtml(content,docDom);append(fragment,contentElements);empty(element);append$1(element,fragment);};var clone$1=function(original,isDeep){return SugarElement.fromDom(original.dom.cloneNode(isDeep));};var shallow=function(original){return clone$1(original,false);};var deep$1=function(original){return clone$1(original,true);};var TextWalker=function(startNode,rootNode,isBoundary){if(isBoundary===void 0){isBoundary=never;}var walker=new DomTreeWalker(startNode,rootNode);var walk=function(direction){var next;do{next=walker[direction]();}while(next&&!isText$7(next)&&!isBoundary(next));return Optional.from(next).filter(isText$7);};return{current:function(){return Optional.from(walker.current()).filter(isText$7);},next:function(){return walk('next');},prev:function(){return walk('prev');},prev2:function(){return walk('prev2');}};};var TextSeeker=function(dom,isBoundary){var isBlockBoundary=isBoundary?isBoundary:function(node){return dom.isBlock(node)||isBr$5(node)||isContentEditableFalse$b(node);};var walk=function(node,offset,walker,process){if(isText$7(node)){var newOffset=process(node,offset,node.data);if(newOffset!==-1){return Optional.some({container:node,offset:newOffset});}}return walker().bind(function(next){return walk(next.container,next.offset,walker,process);});};var backwards=function(node,offset,process,root){var walker=TextWalker(node,root,isBlockBoundary);return walk(node,offset,function(){return walker.prev().map(function(prev){return{container:prev,offset:prev.length};});},process).getOrNull();};var forwards=function(node,offset,process,root){var walker=TextWalker(node,root,isBlockBoundary);return walk(node,offset,function(){return walker.next().map(function(next){return{container:next,offset:0};});},process).getOrNull();};return{backwards:backwards,forwards:forwards};};var round$2=Math.round;var clone=function(rect){if(!rect){return{left:0,top:0,bottom:0,right:0,width:0,height:0};}return{left:round$2(rect.left),top:round$2(rect.top),bottom:round$2(rect.bottom),right:round$2(rect.right),width:round$2(rect.width),height:round$2(rect.height)};};var collapse=function(rect,toStart){rect=clone(rect);if(toStart){rect.right=rect.left;}else{rect.left=rect.left+rect.width;rect.right=rect.left;}rect.width=0;return rect;};var isEqual=function(rect1,rect2){return rect1.left===rect2.left&&rect1.top===rect2.top&&rect1.bottom===rect2.bottom&&rect1.right===rect2.right;};var isValidOverflow=function(overflowY,rect1,rect2){return overflowY>=0&&overflowY<=Math.min(rect1.height,rect2.height)/2;};var isAbove$1=function(rect1,rect2){var halfHeight=Math.min(rect2.height/2,rect1.height/2);if(rect1.bottom-halfHeight<rect2.top){return true;}if(rect1.top>rect2.bottom){return false;}return isValidOverflow(rect2.top-rect1.bottom,rect1,rect2);};var isBelow$1=function(rect1,rect2){if(rect1.top>rect2.bottom){return true;}if(rect1.bottom<rect2.top){return false;}return isValidOverflow(rect2.bottom-rect1.top,rect1,rect2);};var containsXY=function(rect,clientX,clientY){return clientX>=rect.left&&clientX<=rect.right&&clientY>=rect.top&&clientY<=rect.bottom;};var clamp$2=function(value,min,max){return Math.min(Math.max(value,min),max);};var getSelectedNode=function(range){var startContainer=range.startContainer,startOffset=range.startOffset;if(startContainer.hasChildNodes()&&range.endOffset===startOffset+1){return startContainer.childNodes[startOffset];}return null;};var getNode$1=function(container,offset){if(isElement$5(container)&&container.hasChildNodes()){var childNodes=container.childNodes;var safeOffset=clamp$2(offset,0,childNodes.length-1);return childNodes[safeOffset];}else{return container;}};var getNodeUnsafe=function(container,offset){if(offset<0&&isElement$5(container)&&container.hasChildNodes()){return undefined;}else{return getNode$1(container,offset);}};var extendingChars=new RegExp('[\\u0300-\\u036f\\u0483-\\u0487\\u0488-\\u0489\\u0591-\\u05bd\\u05bf\\u05c1-\\u05c2\\u05c4-\\u05c5\\u05c7\\u0610-\\u061a'+'\\u064b-\\u065f\\u0670\\u06d6-\\u06dc\\u06df-\\u06e4\\u06e7-\\u06e8\\u06ea-\\u06ed\\u0711\\u0730-\\u074a\\u07a6-\\u07b0'+'\\u07eb-\\u07f3\\u0816-\\u0819\\u081b-\\u0823\\u0825-\\u0827\\u0829-\\u082d\\u0859-\\u085b\\u08e3-\\u0902\\u093a\\u093c'+'\\u0941-\\u0948\\u094d\\u0951-\\u0957\\u0962-\\u0963\\u0981\\u09bc\\u09be\\u09c1-\\u09c4\\u09cd\\u09d7\\u09e2-\\u09e3'+'\\u0a01-\\u0a02\\u0a3c\\u0a41-\\u0a42\\u0a47-\\u0a48\\u0a4b-\\u0a4d\\u0a51\\u0a70-\\u0a71\\u0a75\\u0a81-\\u0a82\\u0abc'+'\\u0ac1-\\u0ac5\\u0ac7-\\u0ac8\\u0acd\\u0ae2-\\u0ae3\\u0b01\\u0b3c\\u0b3e\\u0b3f\\u0b41-\\u0b44\\u0b4d\\u0b56\\u0b57'+'\\u0b62-\\u0b63\\u0b82\\u0bbe\\u0bc0\\u0bcd\\u0bd7\\u0c00\\u0c3e-\\u0c40\\u0c46-\\u0c48\\u0c4a-\\u0c4d\\u0c55-\\u0c56'+'\\u0c62-\\u0c63\\u0c81\\u0cbc\\u0cbf\\u0cc2\\u0cc6\\u0ccc-\\u0ccd\\u0cd5-\\u0cd6\\u0ce2-\\u0ce3\\u0d01\\u0d3e\\u0d41-\\u0d44'+'\\u0d4d\\u0d57\\u0d62-\\u0d63\\u0dca\\u0dcf\\u0dd2-\\u0dd4\\u0dd6\\u0ddf\\u0e31\\u0e34-\\u0e3a\\u0e47-\\u0e4e\\u0eb1\\u0eb4-\\u0eb9'+'\\u0ebb-\\u0ebc\\u0ec8-\\u0ecd\\u0f18-\\u0f19\\u0f35\\u0f37\\u0f39\\u0f71-\\u0f7e\\u0f80-\\u0f84\\u0f86-\\u0f87\\u0f8d-\\u0f97'+'\\u0f99-\\u0fbc\\u0fc6\\u102d-\\u1030\\u1032-\\u1037\\u1039-\\u103a\\u103d-\\u103e\\u1058-\\u1059\\u105e-\\u1060\\u1071-\\u1074'+'\\u1082\\u1085-\\u1086\\u108d\\u109d\\u135d-\\u135f\\u1712-\\u1714\\u1732-\\u1734\\u1752-\\u1753\\u1772-\\u1773\\u17b4-\\u17b5'+'\\u17b7-\\u17bd\\u17c6\\u17c9-\\u17d3\\u17dd\\u180b-\\u180d\\u18a9\\u1920-\\u1922\\u1927-\\u1928\\u1932\\u1939-\\u193b\\u1a17-\\u1a18'+'\\u1a1b\\u1a56\\u1a58-\\u1a5e\\u1a60\\u1a62\\u1a65-\\u1a6c\\u1a73-\\u1a7c\\u1a7f\\u1ab0-\\u1abd\\u1ABE\\u1b00-\\u1b03\\u1b34'+'\\u1b36-\\u1b3a\\u1b3c\\u1b42\\u1b6b-\\u1b73\\u1b80-\\u1b81\\u1ba2-\\u1ba5\\u1ba8-\\u1ba9\\u1bab-\\u1bad\\u1be6\\u1be8-\\u1be9'+'\\u1bed\\u1bef-\\u1bf1\\u1c2c-\\u1c33\\u1c36-\\u1c37\\u1cd0-\\u1cd2\\u1cd4-\\u1ce0\\u1ce2-\\u1ce8\\u1ced\\u1cf4\\u1cf8-\\u1cf9'+'\\u1dc0-\\u1df5\\u1dfc-\\u1dff\\u200c-\\u200d\\u20d0-\\u20dc\\u20DD-\\u20E0\\u20e1\\u20E2-\\u20E4\\u20e5-\\u20f0\\u2cef-\\u2cf1'+'\\u2d7f\\u2de0-\\u2dff\\u302a-\\u302d\\u302e-\\u302f\\u3099-\\u309a\\ua66f\\uA670-\\uA672\\ua674-\\ua67d\\ua69e-\\ua69f\\ua6f0-\\ua6f1'+'\\ua802\\ua806\\ua80b\\ua825-\\ua826\\ua8c4\\ua8e0-\\ua8f1\\ua926-\\ua92d\\ua947-\\ua951\\ua980-\\ua982\\ua9b3\\ua9b6-\\ua9b9\\ua9bc'+'\\ua9e5\\uaa29-\\uaa2e\\uaa31-\\uaa32\\uaa35-\\uaa36\\uaa43\\uaa4c\\uaa7c\\uaab0\\uaab2-\\uaab4\\uaab7-\\uaab8\\uaabe-\\uaabf\\uaac1'+'\\uaaec-\\uaaed\\uaaf6\\uabe5\\uabe8\\uabed\\ufb1e\\ufe00-\\ufe0f\\ufe20-\\ufe2f\\uff9e-\\uff9f]');var isExtendingChar=function(ch){return typeof ch==='string'&&ch.charCodeAt(0)>=768&&extendingChars.test(ch);};var or=function(){var args=[];for(var _i=0;_i<arguments.length;_i++){args[_i]=arguments[_i];}return function(x){for(var i=0;i<args.length;i++){if(args[i](x)){return true;}}return false;};};var and=function(){var args=[];for(var _i=0;_i<arguments.length;_i++){args[_i]=arguments[_i];}return function(x){for(var i=0;i<args.length;i++){if(!args[i](x)){return false;}}return true;};};var isElement$3=isElement$5;var isCaretCandidate$2=isCaretCandidate$3;var isBlock$1=matchStyleValues('display','block table');var isFloated=matchStyleValues('float','left right');var isValidElementCaretCandidate=and(isElement$3,isCaretCandidate$2,not(isFloated));var isNotPre=not(matchStyleValues('white-space','pre pre-line pre-wrap'));var isText$4=isText$7;var isBr$2=isBr$5;var nodeIndex$1=DOMUtils.nodeIndex;var resolveIndex$1=getNodeUnsafe;var createRange$1=function(doc){return'createRange'in doc?doc.createRange():DOMUtils.DOM.createRng();};var isWhiteSpace$1=function(chr){return chr&&/[\\r\\n\\t ]/.test(chr);};var isRange=function(rng){return!!rng.setStart&&!!rng.setEnd;};var isHiddenWhiteSpaceRange=function(range){var container=range.startContainer;var offset=range.startOffset;if(isWhiteSpace$1(range.toString())&&isNotPre(container.parentNode)&&isText$7(container)){var text=container.data;if(isWhiteSpace$1(text[offset-1])||isWhiteSpace$1(text[offset+1])){return true;}}return false;};var getBrClientRect=function(brNode){var doc=brNode.ownerDocument;var rng=createRange$1(doc);var nbsp$1=doc.createTextNode(nbsp);var parentNode=brNode.parentNode;parentNode.insertBefore(nbsp$1,brNode);rng.setStart(nbsp$1,0);rng.setEnd(nbsp$1,1);var clientRect=clone(rng.getBoundingClientRect());parentNode.removeChild(nbsp$1);return clientRect;};var getBoundingClientRectWebKitText=function(rng){var sc=rng.startContainer;var ec=rng.endContainer;var so=rng.startOffset;var eo=rng.endOffset;if(sc===ec&&isText$7(ec)&&so===0&&eo===1){var newRng=rng.cloneRange();newRng.setEndAfter(ec);return getBoundingClientRect$1(newRng);}else{return null;}};var isZeroRect=function(r){return r.left===0&&r.right===0&&r.top===0&&r.bottom===0;};var getBoundingClientRect$1=function(item){var clientRect;var clientRects=item.getClientRects();if(clientRects.length>0){clientRect=clone(clientRects[0]);}else{clientRect=clone(item.getBoundingClientRect());}if(!isRange(item)&&isBr$2(item)&&isZeroRect(clientRect)){return getBrClientRect(item);}if(isZeroRect(clientRect)&&isRange(item)){return getBoundingClientRectWebKitText(item);}return clientRect;};var collapseAndInflateWidth=function(clientRect,toStart){var newClientRect=collapse(clientRect,toStart);newClientRect.width=1;newClientRect.right=newClientRect.left+1;return newClientRect;};var getCaretPositionClientRects=function(caretPosition){var clientRects=[];var addUniqueAndValidRect=function(clientRect){if(clientRect.height===0){return;}if(clientRects.length>0){if(isEqual(clientRect,clientRects[clientRects.length-1])){return;}}clientRects.push(clientRect);};var addCharacterOffset=function(container,offset){var range=createRange$1(container.ownerDocument);if(offset<container.data.length){if(isExtendingChar(container.data[offset])){return clientRects;}if(isExtendingChar(container.data[offset-1])){range.setStart(container,offset);range.setEnd(container,offset+1);if(!isHiddenWhiteSpaceRange(range)){addUniqueAndValidRect(collapseAndInflateWidth(getBoundingClientRect$1(range),false));return clientRects;}}}if(offset>0){range.setStart(container,offset-1);range.setEnd(container,offset);if(!isHiddenWhiteSpaceRange(range)){addUniqueAndValidRect(collapseAndInflateWidth(getBoundingClientRect$1(range),false));}}if(offset<container.data.length){range.setStart(container,offset);range.setEnd(container,offset+1);if(!isHiddenWhiteSpaceRange(range)){addUniqueAndValidRect(collapseAndInflateWidth(getBoundingClientRect$1(range),true));}}};var container=caretPosition.container();var offset=caretPosition.offset();if(isText$4(container)){addCharacterOffset(container,offset);return clientRects;}if(isElement$3(container)){if(caretPosition.isAtEnd()){var node=resolveIndex$1(container,offset);if(isText$4(node)){addCharacterOffset(node,node.data.length);}if(isValidElementCaretCandidate(node)&&!isBr$2(node)){addUniqueAndValidRect(collapseAndInflateWidth(getBoundingClientRect$1(node),false));}}else{var node=resolveIndex$1(container,offset);if(isText$4(node)){addCharacterOffset(node,0);}if(isValidElementCaretCandidate(node)&&caretPosition.isAtEnd()){addUniqueAndValidRect(collapseAndInflateWidth(getBoundingClientRect$1(node),false));return clientRects;}var beforeNode=resolveIndex$1(caretPosition.container(),caretPosition.offset()-1);if(isValidElementCaretCandidate(beforeNode)&&!isBr$2(beforeNode)){if(isBlock$1(beforeNode)||isBlock$1(node)||!isValidElementCaretCandidate(node)){addUniqueAndValidRect(collapseAndInflateWidth(getBoundingClientRect$1(beforeNode),false));}}if(isValidElementCaretCandidate(node)){addUniqueAndValidRect(collapseAndInflateWidth(getBoundingClientRect$1(node),true));}}}return clientRects;};var CaretPosition=function(container,offset,clientRects){var isAtStart=function(){if(isText$4(container)){return offset===0;}return offset===0;};var isAtEnd=function(){if(isText$4(container)){return offset>=container.data.length;}return offset>=container.childNodes.length;};var toRange=function(){var range=createRange$1(container.ownerDocument);range.setStart(container,offset);range.setEnd(container,offset);return range;};var getClientRects=function(){if(!clientRects){clientRects=getCaretPositionClientRects(CaretPosition(container,offset));}return clientRects;};var isVisible=function(){return getClientRects().length>0;};var isEqual=function(caretPosition){return caretPosition&&container===caretPosition.container()&&offset===caretPosition.offset();};var getNode=function(before){return resolveIndex$1(container,before?offset-1:offset);};return{container:constant(container),offset:constant(offset),toRange:toRange,getClientRects:getClientRects,isVisible:isVisible,isAtStart:isAtStart,isAtEnd:isAtEnd,isEqual:isEqual,getNode:getNode};};CaretPosition.fromRangeStart=function(range){return CaretPosition(range.startContainer,range.startOffset);};CaretPosition.fromRangeEnd=function(range){return CaretPosition(range.endContainer,range.endOffset);};CaretPosition.after=function(node){return CaretPosition(node.parentNode,nodeIndex$1(node)+1);};CaretPosition.before=function(node){return CaretPosition(node.parentNode,nodeIndex$1(node));};CaretPosition.isAbove=function(pos1,pos2){return lift2(head(pos2.getClientRects()),last$2(pos1.getClientRects()),isAbove$1).getOr(false);};CaretPosition.isBelow=function(pos1,pos2){return lift2(last$2(pos2.getClientRects()),head(pos1.getClientRects()),isBelow$1).getOr(false);};CaretPosition.isAtStart=function(pos){return pos?pos.isAtStart():false;};CaretPosition.isAtEnd=function(pos){return pos?pos.isAtEnd():false;};CaretPosition.isTextPosition=function(pos){return pos?isText$7(pos.container()):false;};CaretPosition.isElementPosition=function(pos){return CaretPosition.isTextPosition(pos)===false;};var trimEmptyTextNode$1=function(dom,node){if(isText$7(node)&&node.data.length===0){dom.remove(node);}};var insertNode=function(dom,rng,node){rng.insertNode(node);trimEmptyTextNode$1(dom,node.previousSibling);trimEmptyTextNode$1(dom,node.nextSibling);};var insertFragment=function(dom,rng,frag){var firstChild=Optional.from(frag.firstChild);var lastChild=Optional.from(frag.lastChild);rng.insertNode(frag);firstChild.each(function(child){return trimEmptyTextNode$1(dom,child.previousSibling);});lastChild.each(function(child){return trimEmptyTextNode$1(dom,child.nextSibling);});};var rangeInsertNode=function(dom,rng,node){if(isDocumentFragment(node)){insertFragment(dom,rng,node);}else{insertNode(dom,rng,node);}};var isText$3=isText$7;var isBogus=isBogus$2;var nodeIndex=DOMUtils.nodeIndex;var normalizedParent=function(node){var parentNode=node.parentNode;if(isBogus(parentNode)){return normalizedParent(parentNode);}return parentNode;};var getChildNodes=function(node){if(!node){return[];}return reduce(node.childNodes,function(result,node){if(isBogus(node)&&node.nodeName!=='BR'){result=result.concat(getChildNodes(node));}else{result.push(node);}return result;},[]);};var normalizedTextOffset=function(node,offset){while(node=node.previousSibling){if(!isText$3(node)){break;}offset+=node.data.length;}return offset;};var equal=function(a){return function(b){return a===b;};};var normalizedNodeIndex=function(node){var nodes,index;nodes=getChildNodes(normalizedParent(node));index=findIndex$1(nodes,equal(node),node);nodes=nodes.slice(0,index+1);var numTextFragments=reduce(nodes,function(result,node,i){if(isText$3(node)&&isText$3(nodes[i-1])){result++;}return result;},0);nodes=filter$2(nodes,matchNodeNames([node.nodeName]));index=findIndex$1(nodes,equal(node),node);return index-numTextFragments;};var createPathItem=function(node){var name;if(isText$3(node)){name='text()';}else{name=node.nodeName.toLowerCase();}return name+'['+normalizedNodeIndex(node)+']';};var parentsUntil$1=function(root,node,predicate){var parents=[];for(node=node.parentNode;node!==root;node=node.parentNode){if(predicate&&predicate(node)){break;}parents.push(node);}return parents;};var create$6=function(root,caretPosition){var container,offset,path=[],outputOffset,childNodes,parents;container=caretPosition.container();offset=caretPosition.offset();if(isText$3(container)){outputOffset=normalizedTextOffset(container,offset);}else{childNodes=container.childNodes;if(offset>=childNodes.length){outputOffset='after';offset=childNodes.length-1;}else{outputOffset='before';}container=childNodes[offset];}path.push(createPathItem(container));parents=parentsUntil$1(root,container);parents=filter$2(parents,not(isBogus$2));path=path.concat(map$1(parents,function(node){return createPathItem(node);}));return path.reverse().join('/')+','+outputOffset;};var resolvePathItem=function(node,name,index){var nodes=getChildNodes(node);nodes=filter$2(nodes,function(node,index){return!isText$3(node)||!isText$3(nodes[index-1]);});nodes=filter$2(nodes,matchNodeNames([name]));return nodes[index];};var findTextPosition=function(container,offset){var node=container,targetOffset=0,dataLen;while(isText$3(node)){dataLen=node.data.length;if(offset>=targetOffset&&offset<=targetOffset+dataLen){container=node;offset=offset-targetOffset;break;}if(!isText$3(node.nextSibling)){container=node;offset=dataLen;break;}targetOffset+=dataLen;node=node.nextSibling;}if(isText$3(container)&&offset>container.data.length){offset=container.data.length;}return CaretPosition(container,offset);};var resolve$2=function(root,path){var offset;if(!path){return null;}var parts=path.split(',');var paths=parts[0].split('/');offset=parts.length>1?parts[1]:'before';var container=reduce(paths,function(result,value){var match=/([\\w\\-\\(\\)]+)\\[([0-9]+)\\]/.exec(value);if(!match){return null;}if(match[1]==='text()'){match[1]='#text';}return resolvePathItem(result,match[1],parseInt(match[2],10));},root);if(!container){return null;}if(!isText$3(container)){if(offset==='after'){offset=nodeIndex(container)+1;}else{offset=nodeIndex(container);}return CaretPosition(container.parentNode,offset);}return findTextPosition(container,parseInt(offset,10));};var isContentEditableFalse$9=isContentEditableFalse$b;var getNormalizedTextOffset=function(trim,container,offset){var node,trimmedOffset;trimmedOffset=trim(container.data.slice(0,offset)).length;for(node=container.previousSibling;node&&isText$7(node);node=node.previousSibling){trimmedOffset+=trim(node.data).length;}return trimmedOffset;};var getPoint=function(dom,trim,normalized,rng,start){var container=rng[start?'startContainer':'endContainer'];var offset=rng[start?'startOffset':'endOffset'];var point=[];var childNodes,after=0;var root=dom.getRoot();if(isText$7(container)){point.push(normalized?getNormalizedTextOffset(trim,container,offset):offset);}else{childNodes=container.childNodes;if(offset>=childNodes.length&&childNodes.length){after=1;offset=Math.max(0,childNodes.length-1);}point.push(dom.nodeIndex(childNodes[offset],normalized)+after);}for(;container&&container!==root;container=container.parentNode){point.push(dom.nodeIndex(container,normalized));}return point;};var getLocation=function(trim,selection,normalized,rng){var dom=selection.dom,bookmark={};bookmark.start=getPoint(dom,trim,normalized,rng,true);if(!selection.isCollapsed()){bookmark.end=getPoint(dom,trim,normalized,rng,false);}if(isRangeInCaretContainerBlock(rng)){bookmark.isFakeCaret=true;}return bookmark;};var findIndex=function(dom,name,element){var count=0;Tools.each(dom.select(name),function(node){if(node.getAttribute('data-mce-bogus')==='all'){return;}if(node===element){return false;}count++;});return count;};var moveEndPoint$1=function(rng,start){var container,offset,childNodes;var prefix=start?'start':'end';container=rng[prefix+'Container'];offset=rng[prefix+'Offset'];if(isElement$5(container)&&container.nodeName==='TR'){childNodes=container.childNodes;container=childNodes[Math.min(start?offset:offset-1,childNodes.length-1)];if(container){offset=start?0:container.childNodes.length;rng['set'+(start?'Start':'End')](container,offset);}}};var normalizeTableCellSelection=function(rng){moveEndPoint$1(rng,true);moveEndPoint$1(rng,false);return rng;};var findSibling=function(node,offset){var sibling;if(isElement$5(node)){node=getNode$1(node,offset);if(isContentEditableFalse$9(node)){return node;}}if(isCaretContainer$2(node)){if(isText$7(node)&&isCaretContainerBlock$1(node)){node=node.parentNode;}sibling=node.previousSibling;if(isContentEditableFalse$9(sibling)){return sibling;}sibling=node.nextSibling;if(isContentEditableFalse$9(sibling)){return sibling;}}};var findAdjacentContentEditableFalseElm=function(rng){return findSibling(rng.startContainer,rng.startOffset)||findSibling(rng.endContainer,rng.endOffset);};var getOffsetBookmark=function(trim,normalized,selection){var element=selection.getNode();var name=element?element.nodeName:null;var rng=selection.getRng();if(isContentEditableFalse$9(element)||name==='IMG'){return{name:name,index:findIndex(selection.dom,name,element)};}var sibling=findAdjacentContentEditableFalseElm(rng);if(sibling){name=sibling.tagName;return{name:name,index:findIndex(selection.dom,name,sibling)};}return getLocation(trim,selection,normalized,rng);};var getCaretBookmark=function(selection){var rng=selection.getRng();return{start:create$6(selection.dom.getRoot(),CaretPosition.fromRangeStart(rng)),end:create$6(selection.dom.getRoot(),CaretPosition.fromRangeEnd(rng))};};var getRangeBookmark=function(selection){return{rng:selection.getRng()};};var createBookmarkSpan=function(dom,id,filled){var args={'data-mce-type':'bookmark',id:id,'style':'overflow:hidden;line-height:0px'};return filled?dom.create('span',args,'&#xFEFF;'):dom.create('span',args);};var getPersistentBookmark=function(selection,filled){var dom=selection.dom;var rng=selection.getRng();var id=dom.uniqueId();var collapsed=selection.isCollapsed();var element=selection.getNode();var name=element.nodeName;if(name==='IMG'){return{name:name,index:findIndex(dom,name,element)};}var rng2=normalizeTableCellSelection(rng.cloneRange());if(!collapsed){rng2.collapse(false);var endBookmarkNode=createBookmarkSpan(dom,id+'_end',filled);rangeInsertNode(dom,rng2,endBookmarkNode);}rng=normalizeTableCellSelection(rng);rng.collapse(true);var startBookmarkNode=createBookmarkSpan(dom,id+'_start',filled);rangeInsertNode(dom,rng,startBookmarkNode);selection.moveToBookmark({id:id,keep:true});return{id:id};};var getBookmark$2=function(selection,type,normalized){if(type===2){return getOffsetBookmark(trim$2,normalized,selection);}else if(type===3){return getCaretBookmark(selection);}else if(type){return getRangeBookmark(selection);}else{return getPersistentBookmark(selection,false);}};var getUndoBookmark=curry(getOffsetBookmark,identity,true);var DOM$9=DOMUtils.DOM;var defaultPreviewStyles='font-family font-size font-weight font-style text-decoration text-transform color background-color border border-radius outline text-shadow';var getBodySetting=function(editor,name,defaultValue){var value=editor.getParam(name,defaultValue);if(value.indexOf('=')!==-1){var bodyObj=editor.getParam(name,'','hash');return get$9(bodyObj,editor.id).getOr(defaultValue);}else{return value;}};var getIframeAttrs=function(editor){return editor.getParam('iframe_attrs',{});};var getDocType=function(editor){return editor.getParam('doctype','<!DOCTYPE html>');};var getDocumentBaseUrl=function(editor){return editor.getParam('document_base_url','');};var getBodyId=function(editor){return getBodySetting(editor,'body_id','tinymce');};var getBodyClass=function(editor){return getBodySetting(editor,'body_class','');};var getContentSecurityPolicy=function(editor){return editor.getParam('content_security_policy','');};var shouldPutBrInPre$1=function(editor){return editor.getParam('br_in_pre',true);};var getForcedRootBlock=function(editor){if(editor.getParam('force_p_newlines',false)){return'p';}var block=editor.getParam('forced_root_block','p');if(block===false){return'';}else if(block===true){return'p';}else{return block;}};var getForcedRootBlockAttrs=function(editor){return editor.getParam('forced_root_block_attrs',{});};var getBrNewLineSelector=function(editor){return editor.getParam('br_newline_selector','.mce-toc h2,figcaption,caption');};var getNoNewLineSelector=function(editor){return editor.getParam('no_newline_selector','');};var shouldKeepStyles=function(editor){return editor.getParam('keep_styles',true);};var shouldEndContainerOnEmptyBlock=function(editor){return editor.getParam('end_container_on_empty_block',false);};var getFontStyleValues=function(editor){return Tools.explode(editor.getParam('font_size_style_values','xx-small,x-small,small,medium,large,x-large,xx-large'));};var getFontSizeClasses=function(editor){return Tools.explode(editor.getParam('font_size_classes',''));};var getImagesDataImgFilter=function(editor){return editor.getParam('images_dataimg_filter',always,'function');};var isAutomaticUploadsEnabled=function(editor){return editor.getParam('automatic_uploads',true,'boolean');};var shouldReuseFileName=function(editor){return editor.getParam('images_reuse_filename',false,'boolean');};var shouldReplaceBlobUris=function(editor){return editor.getParam('images_replace_blob_uris',true,'boolean');};var getIconPackName=function(editor){return editor.getParam('icons','','string');};var getIconsUrl=function(editor){return editor.getParam('icons_url','','string');};var getImageUploadUrl=function(editor){return editor.getParam('images_upload_url','','string');};var getImageUploadBasePath=function(editor){return editor.getParam('images_upload_base_path','','string');};var getImagesUploadCredentials=function(editor){return editor.getParam('images_upload_credentials',false,'boolean');};var getImagesUploadHandler=function(editor){return editor.getParam('images_upload_handler',null,'function');};var shouldUseContentCssCors=function(editor){return editor.getParam('content_css_cors',false,'boolean');};var getReferrerPolicy=function(editor){return editor.getParam('referrer_policy','','string');};var getLanguageCode=function(editor){return editor.getParam('language','en','string');};var getLanguageUrl=function(editor){return editor.getParam('language_url','','string');};var shouldIndentUseMargin=function(editor){return editor.getParam('indent_use_margin',false);};var getIndentation=function(editor){return editor.getParam('indentation','40px','string');};var getContentCss=function(editor){var contentCss=editor.getParam('content_css');if(isString$1(contentCss)){return map$3(contentCss.split(','),trim$4);}else if(isArray$1(contentCss)){return contentCss;}else if(contentCss===false||editor.inline){return[];}else{return['default'];}};var getFontCss=function(editor){var fontCss=editor.getParam('font_css',[]);return isArray$1(fontCss)?fontCss:map$3(fontCss.split(','),trim$4);};var getDirectionality=function(editor){return editor.getParam('directionality',I18n.isRtl()?'rtl':undefined);};var getInlineBoundarySelector=function(editor){return editor.getParam('inline_boundaries_selector','a[href],code,.mce-annotation','string');};var getObjectResizing=function(editor){var selector=editor.getParam('object_resizing');if(selector===false||Env.iOS){return false;}else{return isString$1(selector)?selector:'table,img,figure.image,div,video,iframe';}};var getResizeImgProportional=function(editor){return editor.getParam('resize_img_proportional',true,'boolean');};var getPlaceholder=function(editor){return editor.getParam('placeholder',DOM$9.getAttrib(editor.getElement(),'placeholder'),'string');};var getEventRoot=function(editor){return editor.getParam('event_root');};var getServiceMessage=function(editor){return editor.getParam('service_message');};var getTheme=function(editor){return editor.getParam('theme');};var shouldValidate=function(editor){return editor.getParam('validate');};var isInlineBoundariesEnabled=function(editor){return editor.getParam('inline_boundaries')!==false;};var getFormats=function(editor){return editor.getParam('formats');};var getPreviewStyles=function(editor){var style=editor.getParam('preview_styles',defaultPreviewStyles);if(isString$1(style)){return style;}else{return'';}};var canFormatEmptyLines=function(editor){return editor.getParam('format_empty_lines',false,'boolean');};var getCustomUiSelector=function(editor){return editor.getParam('custom_ui_selector','','string');};var getThemeUrl=function(editor){return editor.getParam('theme_url');};var isInline=function(editor){return editor.getParam('inline');};var hasHiddenInput=function(editor){return editor.getParam('hidden_input');};var shouldPatchSubmit=function(editor){return editor.getParam('submit_patch');};var isEncodingXml=function(editor){return editor.getParam('encoding')==='xml';};var shouldAddFormSubmitTrigger=function(editor){return editor.getParam('add_form_submit_trigger');};var shouldAddUnloadTrigger=function(editor){return editor.getParam('add_unload_trigger');};var hasForcedRootBlock=function(editor){return getForcedRootBlock(editor)!=='';};var getCustomUndoRedoLevels=function(editor){return editor.getParam('custom_undo_redo_levels',0,'number');};var shouldDisableNodeChange=function(editor){return editor.getParam('disable_nodechange');};var isReadOnly$1=function(editor){return editor.getParam('readonly');};var hasContentCssCors=function(editor){return editor.getParam('content_css_cors');};var getPlugins=function(editor){return editor.getParam('plugins','','string');};var getExternalPlugins$1=function(editor){return editor.getParam('external_plugins');};var shouldBlockUnsupportedDrop=function(editor){return editor.getParam('block_unsupported_drop',true,'boolean');};var isVisualAidsEnabled=function(editor){return editor.getParam('visual',true,'boolean');};var getVisualAidsTableClass=function(editor){return editor.getParam('visual_table_class','mce-item-table','string');};var getVisualAidsAnchorClass=function(editor){return editor.getParam('visual_anchor_class','mce-item-anchor','string');};var getIframeAriaText=function(editor){return editor.getParam('iframe_aria_text','Rich Text Area. Press ALT-0 for help.','string');};var isElement$2=isElement$5;var isText$2=isText$7;var removeNode$1=function(node){var parentNode=node.parentNode;if(parentNode){parentNode.removeChild(node);}};var trimCount=function(text){var trimmedText=trim$2(text);return{count:text.length-trimmedText.length,text:trimmedText};};var deleteZwspChars=function(caretContainer){var idx;while((idx=caretContainer.data.lastIndexOf(ZWSP$1))!==-1){caretContainer.deleteData(idx,1);}};var removeUnchanged=function(caretContainer,pos){remove$2(caretContainer);return pos;};var removeTextAndReposition=function(caretContainer,pos){var before=trimCount(caretContainer.data.substr(0,pos.offset()));var after=trimCount(caretContainer.data.substr(pos.offset()));var text=before.text+after.text;if(text.length>0){deleteZwspChars(caretContainer);return CaretPosition(caretContainer,pos.offset()-before.count);}else{return pos;}};var removeElementAndReposition=function(caretContainer,pos){var parentNode=pos.container();var newPosition=indexOf$2(from(parentNode.childNodes),caretContainer).map(function(index){return index<pos.offset()?CaretPosition(parentNode,pos.offset()-1):pos;}).getOr(pos);remove$2(caretContainer);return newPosition;};var removeTextCaretContainer=function(caretContainer,pos){return isText$2(caretContainer)&&pos.container()===caretContainer?removeTextAndReposition(caretContainer,pos):removeUnchanged(caretContainer,pos);};var removeElementCaretContainer=function(caretContainer,pos){return pos.container()===caretContainer.parentNode?removeElementAndReposition(caretContainer,pos):removeUnchanged(caretContainer,pos);};var removeAndReposition=function(container,pos){return CaretPosition.isTextPosition(pos)?removeTextCaretContainer(container,pos):removeElementCaretContainer(container,pos);};var remove$2=function(caretContainerNode){if(isElement$2(caretContainerNode)&&isCaretContainer$2(caretContainerNode)){if(hasContent(caretContainerNode)){caretContainerNode.removeAttribute('data-mce-caret');}else{removeNode$1(caretContainerNode);}}if(isText$2(caretContainerNode)){deleteZwspChars(caretContainerNode);if(caretContainerNode.data.length===0){removeNode$1(caretContainerNode);}}};var browser$2=detect().browser;var isContentEditableFalse$8=isContentEditableFalse$b;var isMedia$1=isMedia$2;var isTableCell$3=isTableCell$5;var inlineFakeCaretSelector='*[contentEditable=false],video,audio,embed,object';var getAbsoluteClientRect=function(root,element,before){var clientRect=collapse(element.getBoundingClientRect(),before);var scrollX;var scrollY;if(root.tagName==='BODY'){var docElm=root.ownerDocument.documentElement;scrollX=root.scrollLeft||docElm.scrollLeft;scrollY=root.scrollTop||docElm.scrollTop;}else{var rootRect=root.getBoundingClientRect();scrollX=root.scrollLeft-rootRect.left;scrollY=root.scrollTop-rootRect.top;}clientRect.left+=scrollX;clientRect.right+=scrollX;clientRect.top+=scrollY;clientRect.bottom+=scrollY;clientRect.width=1;var margin=element.offsetWidth-element.clientWidth;if(margin>0){if(before){margin*=-1;}clientRect.left+=margin;clientRect.right+=margin;}return clientRect;};var trimInlineCaretContainers=function(root){var fakeCaretTargetNodes=descendants(SugarElement.fromDom(root),inlineFakeCaretSelector);for(var i=0;i<fakeCaretTargetNodes.length;i++){var node=fakeCaretTargetNodes[i].dom;var sibling=node.previousSibling;if(endsWithCaretContainer$1(sibling)){var data=sibling.data;if(data.length===1){sibling.parentNode.removeChild(sibling);}else{sibling.deleteData(data.length-1,1);}}sibling=node.nextSibling;if(startsWithCaretContainer$1(sibling)){var data=sibling.data;if(data.length===1){sibling.parentNode.removeChild(sibling);}else{sibling.deleteData(0,1);}}}};var FakeCaret=function(editor,root,isBlock,hasFocus){var lastVisualCaret=value();var cursorInterval;var caretContainerNode;var rootBlock=getForcedRootBlock(editor);var caretBlock=rootBlock.length>0?rootBlock:'p';var show=function(before,element){var rng;hide();if(isTableCell$3(element)){return null;}if(isBlock(element)){caretContainerNode=insertBlock$1(caretBlock,element,before);var clientRect=getAbsoluteClientRect(root,element,before);DomQuery(caretContainerNode).css('top',clientRect.top);var caret=DomQuery('<div class=\"mce-visual-caret\" data-mce-bogus=\"all\"></div>').css(__assign({},clientRect)).appendTo(root)[0];lastVisualCaret.set({caret:caret,element:element,before:before});if(before){DomQuery(caret).addClass('mce-visual-caret-before');}startBlink();rng=element.ownerDocument.createRange();rng.setStart(caretContainerNode,0);rng.setEnd(caretContainerNode,0);}else{caretContainerNode=insertInline$1(element,before);rng=element.ownerDocument.createRange();if(isInlineFakeCaretTarget(caretContainerNode.nextSibling)){rng.setStart(caretContainerNode,0);rng.setEnd(caretContainerNode,0);}else{rng.setStart(caretContainerNode,1);rng.setEnd(caretContainerNode,1);}return rng;}return rng;};var hide=function(){trimInlineCaretContainers(root);if(caretContainerNode){remove$2(caretContainerNode);caretContainerNode=null;}lastVisualCaret.on(function(caretState){DomQuery(caretState.caret).remove();lastVisualCaret.clear();});if(cursorInterval){Delay.clearInterval(cursorInterval);cursorInterval=undefined;}};var startBlink=function(){cursorInterval=Delay.setInterval(function(){if(hasFocus()){DomQuery('div.mce-visual-caret',root).toggleClass('mce-visual-caret-hidden');}else{DomQuery('div.mce-visual-caret',root).addClass('mce-visual-caret-hidden');}},500);};var reposition=function(){lastVisualCaret.on(function(caretState){var clientRect=getAbsoluteClientRect(root,caretState.element,caretState.before);DomQuery(caretState.caret).css(__assign({},clientRect));});};var destroy=function(){return Delay.clearInterval(cursorInterval);};var getCss=function(){return'.mce-visual-caret {'+'position: absolute;'+'background-color: black;'+'background-color: currentcolor;'+'}'+'.mce-visual-caret-hidden {'+'display: none;'+'}'+'*[data-mce-caret] {'+'position: absolute;'+'left: -1000px;'+'right: auto;'+'top: 0;'+'margin: 0;'+'padding: 0;'+'}';};return{show:show,hide:hide,getCss:getCss,reposition:reposition,destroy:destroy};};var isFakeCaretTableBrowser=function(){return browser$2.isIE()||browser$2.isEdge()||browser$2.isFirefox();};var isInlineFakeCaretTarget=function(node){return isContentEditableFalse$8(node)||isMedia$1(node);};var isFakeCaretTarget=function(node){return isInlineFakeCaretTarget(node)||isTable$3(node)&&isFakeCaretTableBrowser();};var isContentEditableFalse$7=isContentEditableFalse$b;var isMedia=isMedia$2;var isBlockLike=matchStyleValues('display','block table table-cell table-caption list-item');var isCaretContainer=isCaretContainer$2;var isCaretContainerBlock=isCaretContainerBlock$1;var isElement$1=isElement$5;var isCaretCandidate$1=isCaretCandidate$3;var isForwards=function(direction){return direction>0;};var isBackwards=function(direction){return direction<0;};var skipCaretContainers=function(walk,shallow){var node;while(node=walk(shallow)){if(!isCaretContainerBlock(node)){return node;}}return null;};var findNode$1=function(node,direction,predicateFn,rootNode,shallow){var walker=new DomTreeWalker(node,rootNode);var isCefOrCaretContainer=isContentEditableFalse$7(node)||isCaretContainerBlock(node);if(isBackwards(direction)){if(isCefOrCaretContainer){node=skipCaretContainers(walker.prev.bind(walker),true);if(predicateFn(node)){return node;}}while(node=skipCaretContainers(walker.prev.bind(walker),shallow)){if(predicateFn(node)){return node;}}}if(isForwards(direction)){if(isCefOrCaretContainer){node=skipCaretContainers(walker.next.bind(walker),true);if(predicateFn(node)){return node;}}while(node=skipCaretContainers(walker.next.bind(walker),shallow)){if(predicateFn(node)){return node;}}}return null;};var getParentBlock$2=function(node,rootNode){while(node&&node!==rootNode){if(isBlockLike(node)){return node;}node=node.parentNode;}return null;};var isInSameBlock=function(caretPosition1,caretPosition2,rootNode){return getParentBlock$2(caretPosition1.container(),rootNode)===getParentBlock$2(caretPosition2.container(),rootNode);};var getChildNodeAtRelativeOffset=function(relativeOffset,caretPosition){if(!caretPosition){return null;}var container=caretPosition.container();var offset=caretPosition.offset();if(!isElement$1(container)){return null;}return container.childNodes[offset+relativeOffset];};var beforeAfter=function(before,node){var range=node.ownerDocument.createRange();if(before){range.setStartBefore(node);range.setEndBefore(node);}else{range.setStartAfter(node);range.setEndAfter(node);}return range;};var isNodesInSameBlock=function(root,node1,node2){return getParentBlock$2(node1,root)===getParentBlock$2(node2,root);};var lean=function(left,root,node){var siblingName=left?'previousSibling':'nextSibling';while(node&&node!==root){var sibling=node[siblingName];if(isCaretContainer(sibling)){sibling=sibling[siblingName];}if(isContentEditableFalse$7(sibling)||isMedia(sibling)){if(isNodesInSameBlock(root,sibling,node)){return sibling;}break;}if(isCaretCandidate$1(sibling)){break;}node=node.parentNode;}return null;};var before$2=curry(beforeAfter,true);var after$2=curry(beforeAfter,false);var normalizeRange=function(direction,root,range){var node;var leanLeft=curry(lean,true,root);var leanRight=curry(lean,false,root);var container=range.startContainer;var offset=range.startOffset;if(isCaretContainerBlock$1(container)){if(!isElement$1(container)){container=container.parentNode;}var location_1=container.getAttribute('data-mce-caret');if(location_1==='before'){node=container.nextSibling;if(isFakeCaretTarget(node)){return before$2(node);}}if(location_1==='after'){node=container.previousSibling;if(isFakeCaretTarget(node)){return after$2(node);}}}if(!range.collapsed){return range;}if(isText$7(container)){if(isCaretContainer(container)){if(direction===1){node=leanRight(container);if(node){return before$2(node);}node=leanLeft(container);if(node){return after$2(node);}}if(direction===-1){node=leanLeft(container);if(node){return after$2(node);}node=leanRight(container);if(node){return before$2(node);}}return range;}if(endsWithCaretContainer$1(container)&&offset>=container.data.length-1){if(direction===1){node=leanRight(container);if(node){return before$2(node);}}return range;}if(startsWithCaretContainer$1(container)&&offset<=1){if(direction===-1){node=leanLeft(container);if(node){return after$2(node);}}return range;}if(offset===container.data.length){node=leanRight(container);if(node){return before$2(node);}return range;}if(offset===0){node=leanLeft(container);if(node){return after$2(node);}return range;}}return range;};var getRelativeCefElm=function(forward,caretPosition){return Optional.from(getChildNodeAtRelativeOffset(forward?0:-1,caretPosition)).filter(isContentEditableFalse$7);};var getNormalizedRangeEndPoint=function(direction,root,range){var normalizedRange=normalizeRange(direction,root,range);if(direction===-1){return CaretPosition.fromRangeStart(normalizedRange);}return CaretPosition.fromRangeEnd(normalizedRange);};var getElementFromPosition=function(pos){return Optional.from(pos.getNode()).map(SugarElement.fromDom);};var getElementFromPrevPosition=function(pos){return Optional.from(pos.getNode(true)).map(SugarElement.fromDom);};var getVisualCaretPosition=function(walkFn,caretPosition){while(caretPosition=walkFn(caretPosition)){if(caretPosition.isVisible()){return caretPosition;}}return caretPosition;};var isMoveInsideSameBlock=function(from,to){var inSameBlock=isInSameBlock(from,to);if(!inSameBlock&&isBr$5(from.getNode())){return true;}return inSameBlock;};var HDirection;(function(HDirection){HDirection[HDirection['Backwards']=-1]='Backwards';HDirection[HDirection['Forwards']=1]='Forwards';})(HDirection||(HDirection={}));var isContentEditableFalse$6=isContentEditableFalse$b;var isText$1=isText$7;var isElement=isElement$5;var isBr$1=isBr$5;var isCaretCandidate=isCaretCandidate$3;var isAtomic=isAtomic$1;var isEditableCaretCandidate=isEditableCaretCandidate$1;var getParents$3=function(node,root){var parents=[];while(node&&node!==root){parents.push(node);node=node.parentNode;}return parents;};var nodeAtIndex=function(container,offset){if(container.hasChildNodes()&&offset<container.childNodes.length){return container.childNodes[offset];}return null;};var getCaretCandidatePosition=function(direction,node){if(isForwards(direction)){if(isCaretCandidate(node.previousSibling)&&!isText$1(node.previousSibling)){return CaretPosition.before(node);}if(isText$1(node)){return CaretPosition(node,0);}}if(isBackwards(direction)){if(isCaretCandidate(node.nextSibling)&&!isText$1(node.nextSibling)){return CaretPosition.after(node);}if(isText$1(node)){return CaretPosition(node,node.data.length);}}if(isBackwards(direction)){if(isBr$1(node)){return CaretPosition.before(node);}return CaretPosition.after(node);}return CaretPosition.before(node);};var moveForwardFromBr=function(root,nextNode){var nextSibling=nextNode.nextSibling;if(nextSibling&&isCaretCandidate(nextSibling)){if(isText$1(nextSibling)){return CaretPosition(nextSibling,0);}else{return CaretPosition.before(nextSibling);}}else{return findCaretPosition$1(HDirection.Forwards,CaretPosition.after(nextNode),root);}};var findCaretPosition$1=function(direction,startPos,root){var node;var nextNode;var innerNode;var caretPosition;if(!isElement(root)||!startPos){return null;}if(startPos.isEqual(CaretPosition.after(root))&&root.lastChild){caretPosition=CaretPosition.after(root.lastChild);if(isBackwards(direction)&&isCaretCandidate(root.lastChild)&&isElement(root.lastChild)){return isBr$1(root.lastChild)?CaretPosition.before(root.lastChild):caretPosition;}}else{caretPosition=startPos;}var container=caretPosition.container();var offset=caretPosition.offset();if(isText$1(container)){if(isBackwards(direction)&&offset>0){return CaretPosition(container,--offset);}if(isForwards(direction)&&offset<container.length){return CaretPosition(container,++offset);}node=container;}else{if(isBackwards(direction)&&offset>0){nextNode=nodeAtIndex(container,offset-1);if(isCaretCandidate(nextNode)){if(!isAtomic(nextNode)){innerNode=findNode$1(nextNode,direction,isEditableCaretCandidate,nextNode);if(innerNode){if(isText$1(innerNode)){return CaretPosition(innerNode,innerNode.data.length);}return CaretPosition.after(innerNode);}}if(isText$1(nextNode)){return CaretPosition(nextNode,nextNode.data.length);}return CaretPosition.before(nextNode);}}if(isForwards(direction)&&offset<container.childNodes.length){nextNode=nodeAtIndex(container,offset);if(isCaretCandidate(nextNode)){if(isBr$1(nextNode)){return moveForwardFromBr(root,nextNode);}if(!isAtomic(nextNode)){innerNode=findNode$1(nextNode,direction,isEditableCaretCandidate,nextNode);if(innerNode){if(isText$1(innerNode)){return CaretPosition(innerNode,0);}return CaretPosition.before(innerNode);}}if(isText$1(nextNode)){return CaretPosition(nextNode,0);}return CaretPosition.after(nextNode);}}node=nextNode?nextNode:caretPosition.getNode();}if(isForwards(direction)&&caretPosition.isAtEnd()||isBackwards(direction)&&caretPosition.isAtStart()){node=findNode$1(node,direction,always,root,true);if(isEditableCaretCandidate(node,root)){return getCaretCandidatePosition(direction,node);}}nextNode=findNode$1(node,direction,isEditableCaretCandidate,root);var rootContentEditableFalseElm=last$1(filter$4(getParents$3(container,root),isContentEditableFalse$6));if(rootContentEditableFalseElm&&(!nextNode||!rootContentEditableFalseElm.contains(nextNode))){if(isForwards(direction)){caretPosition=CaretPosition.after(rootContentEditableFalseElm);}else{caretPosition=CaretPosition.before(rootContentEditableFalseElm);}return caretPosition;}if(nextNode){return getCaretCandidatePosition(direction,nextNode);}return null;};var CaretWalker=function(root){return{next:function(caretPosition){return findCaretPosition$1(HDirection.Forwards,caretPosition,root);},prev:function(caretPosition){return findCaretPosition$1(HDirection.Backwards,caretPosition,root);}};};var walkToPositionIn=function(forward,root,start){var position=forward?CaretPosition.before(start):CaretPosition.after(start);return fromPosition(forward,root,position);};var afterElement=function(node){return isBr$5(node)?CaretPosition.before(node):CaretPosition.after(node);};var isBeforeOrStart=function(position){if(CaretPosition.isTextPosition(position)){return position.offset()===0;}else{return isCaretCandidate$3(position.getNode());}};var isAfterOrEnd=function(position){if(CaretPosition.isTextPosition(position)){var container=position.container();return position.offset()===container.data.length;}else{return isCaretCandidate$3(position.getNode(true));}};var isBeforeAfterSameElement=function(from,to){return!CaretPosition.isTextPosition(from)&&!CaretPosition.isTextPosition(to)&&from.getNode()===to.getNode(true);};var isAtBr=function(position){return!CaretPosition.isTextPosition(position)&&isBr$5(position.getNode());};var shouldSkipPosition=function(forward,from,to){if(forward){return!isBeforeAfterSameElement(from,to)&&!isAtBr(from)&&isAfterOrEnd(from)&&isBeforeOrStart(to);}else{return!isBeforeAfterSameElement(to,from)&&isBeforeOrStart(from)&&isAfterOrEnd(to);}};var fromPosition=function(forward,root,pos){var walker=CaretWalker(root);return Optional.from(forward?walker.next(pos):walker.prev(pos));};var navigate=function(forward,root,from){return fromPosition(forward,root,from).bind(function(to){if(isInSameBlock(from,to,root)&&shouldSkipPosition(forward,from,to)){return fromPosition(forward,root,to);}else{return Optional.some(to);}});};var navigateIgnore=function(forward,root,from,ignoreFilter){return navigate(forward,root,from).bind(function(pos){return ignoreFilter(pos)?navigateIgnore(forward,root,pos,ignoreFilter):Optional.some(pos);});};var positionIn=function(forward,element){var startNode=forward?element.firstChild:element.lastChild;if(isText$7(startNode)){return Optional.some(CaretPosition(startNode,forward?0:startNode.data.length));}else if(startNode){if(isCaretCandidate$3(startNode)){return Optional.some(forward?CaretPosition.before(startNode):afterElement(startNode));}else{return walkToPositionIn(forward,element,startNode);}}else{return Optional.none();}};var nextPosition=curry(fromPosition,true);var prevPosition=curry(fromPosition,false);var firstPositionIn=curry(positionIn,true);var lastPositionIn=curry(positionIn,false);var CARET_ID$1='_mce_caret';var isCaretNode=function(node){return isElement$5(node)&&node.id===CARET_ID$1;};var getParentCaretContainer=function(body,node){while(node&&node!==body){if(node.id===CARET_ID$1){return node;}node=node.parentNode;}return null;};var isStringPathBookmark=function(bookmark){return isString$1(bookmark.start);};var isRangeBookmark=function(bookmark){return has$2(bookmark,'rng');};var isIdBookmark=function(bookmark){return has$2(bookmark,'id');};var isIndexBookmark=function(bookmark){return has$2(bookmark,'name');};var isPathBookmark=function(bookmark){return Tools.isArray(bookmark.start);};var addBogus=function(dom,node){if(isElement$5(node)&&dom.isBlock(node)&&!node.innerHTML&&!Env.ie){node.innerHTML='<br data-mce-bogus=\"1\" />';}return node;};var resolveCaretPositionBookmark=function(dom,bookmark){var pos;var rng=dom.createRng();pos=resolve$2(dom.getRoot(),bookmark.start);rng.setStart(pos.container(),pos.offset());pos=resolve$2(dom.getRoot(),bookmark.end);rng.setEnd(pos.container(),pos.offset());return rng;};var insertZwsp=function(node,rng){var textNode=node.ownerDocument.createTextNode(ZWSP$1);node.appendChild(textNode);rng.setStart(textNode,0);rng.setEnd(textNode,0);};var isEmpty$1=function(node){return node.hasChildNodes()===false;};var tryFindRangePosition=function(node,rng){return lastPositionIn(node).fold(never,function(pos){rng.setStart(pos.container(),pos.offset());rng.setEnd(pos.container(),pos.offset());return true;});};var padEmptyCaretContainer=function(root,node,rng){if(isEmpty$1(node)&&getParentCaretContainer(root,node)){insertZwsp(node,rng);return true;}else{return false;}};var setEndPoint=function(dom,start,bookmark,rng){var point=bookmark[start?'start':'end'];var i,node,offset,children;var root=dom.getRoot();if(point){offset=point[0];for(node=root,i=point.length-1;i>=1;i--){children=node.childNodes;if(padEmptyCaretContainer(root,node,rng)){return true;}if(point[i]>children.length-1){if(padEmptyCaretContainer(root,node,rng)){return true;}return tryFindRangePosition(node,rng);}node=children[point[i]];}if(node.nodeType===3){offset=Math.min(point[0],node.nodeValue.length);}if(node.nodeType===1){offset=Math.min(point[0],node.childNodes.length);}if(start){rng.setStart(node,offset);}else{rng.setEnd(node,offset);}}return true;};var isValidTextNode=function(node){return isText$7(node)&&node.data.length>0;};var restoreEndPoint=function(dom,suffix,bookmark){var marker=dom.get(bookmark.id+'_'+suffix),node,idx,next,prev;var keep=bookmark.keep;var container,offset;if(marker){node=marker.parentNode;if(suffix==='start'){if(!keep){idx=dom.nodeIndex(marker);}else{if(marker.hasChildNodes()){node=marker.firstChild;idx=1;}else if(isValidTextNode(marker.nextSibling)){node=marker.nextSibling;idx=0;}else if(isValidTextNode(marker.previousSibling)){node=marker.previousSibling;idx=marker.previousSibling.data.length;}else{node=marker.parentNode;idx=dom.nodeIndex(marker)+1;}}container=node;offset=idx;}else{if(!keep){idx=dom.nodeIndex(marker);}else{if(marker.hasChildNodes()){node=marker.firstChild;idx=1;}else if(isValidTextNode(marker.previousSibling)){node=marker.previousSibling;idx=marker.previousSibling.data.length;}else{node=marker.parentNode;idx=dom.nodeIndex(marker);}}container=node;offset=idx;}if(!keep){prev=marker.previousSibling;next=marker.nextSibling;Tools.each(Tools.grep(marker.childNodes),function(node){if(isText$7(node)){node.nodeValue=node.nodeValue.replace(/\\uFEFF/g,'');}});while(marker=dom.get(bookmark.id+'_'+suffix)){dom.remove(marker,true);}if(prev&&next&&prev.nodeType===next.nodeType&&isText$7(prev)&&!Env.opera){idx=prev.nodeValue.length;prev.appendData(next.nodeValue);dom.remove(next);container=prev;offset=idx;}}return Optional.some(CaretPosition(container,offset));}else{return Optional.none();}};var resolvePaths=function(dom,bookmark){var rng=dom.createRng();if(setEndPoint(dom,true,bookmark,rng)&&setEndPoint(dom,false,bookmark,rng)){return Optional.some(rng);}else{return Optional.none();}};var resolveId=function(dom,bookmark){var startPos=restoreEndPoint(dom,'start',bookmark);var endPos=restoreEndPoint(dom,'end',bookmark);return lift2(startPos,endPos.or(startPos),function(spos,epos){var rng=dom.createRng();rng.setStart(addBogus(dom,spos.container()),spos.offset());rng.setEnd(addBogus(dom,epos.container()),epos.offset());return rng;});};var resolveIndex=function(dom,bookmark){return Optional.from(dom.select(bookmark.name)[bookmark.index]).map(function(elm){var rng=dom.createRng();rng.selectNode(elm);return rng;});};var resolve$1=function(selection,bookmark){var dom=selection.dom;if(bookmark){if(isPathBookmark(bookmark)){return resolvePaths(dom,bookmark);}else if(isStringPathBookmark(bookmark)){return Optional.some(resolveCaretPositionBookmark(dom,bookmark));}else if(isIdBookmark(bookmark)){return resolveId(dom,bookmark);}else if(isIndexBookmark(bookmark)){return resolveIndex(dom,bookmark);}else if(isRangeBookmark(bookmark)){return Optional.some(bookmark.rng);}}return Optional.none();};var getBookmark$1=function(selection,type,normalized){return getBookmark$2(selection,type,normalized);};var moveToBookmark=function(selection,bookmark){resolve$1(selection,bookmark).each(function(rng){selection.setRng(rng);});};var isBookmarkNode$1=function(node){return isElement$5(node)&&node.tagName==='SPAN'&&node.getAttribute('data-mce-type')==='bookmark';};var is=function(expected){return function(actual){return expected===actual;};};var isNbsp=is(nbsp);var isWhiteSpace=function(chr){return chr!==''&&' \\f\\n\\r\\t\\x0B'.indexOf(chr)!==-1;};var isContent=function(chr){return!isWhiteSpace(chr)&&!isNbsp(chr);};var isNode=function(node){return!!node.nodeType;};var isInlineBlock=function(node){return node&&/^(IMG)$/.test(node.nodeName);};var moveStart=function(dom,selection,rng){var offset=rng.startOffset;var container=rng.startContainer;if(container===rng.endContainer){if(isInlineBlock(container.childNodes[offset])){return;}}if(isElement$5(container)){var nodes=container.childNodes;var walker=void 0;if(offset<nodes.length){container=nodes[offset];walker=new DomTreeWalker(container,dom.getParent(container,dom.isBlock));}else{container=nodes[nodes.length-1];walker=new DomTreeWalker(container,dom.getParent(container,dom.isBlock));walker.next(true);}for(var node=walker.current();node;node=walker.next()){if(isText$7(node)&&!isWhiteSpaceNode$1(node)){rng.setStart(node,0);selection.setRng(rng);return;}}}};var getNonWhiteSpaceSibling=function(node,next,inc){if(node){var nextName=next?'nextSibling':'previousSibling';for(node=inc?node:node[nextName];node;node=node[nextName]){if(isElement$5(node)||!isWhiteSpaceNode$1(node)){return node;}}}};var isTextBlock$1=function(editor,name){if(isNode(name)){name=name.nodeName;}return!!editor.schema.getTextBlockElements()[name.toLowerCase()];};var isValid=function(ed,parent,child){return ed.schema.isValidChild(parent,child);};var isWhiteSpaceNode$1=function(node,allowSpaces){if(allowSpaces===void 0){allowSpaces=false;}if(isNonNullable(node)&&isText$7(node)){var data=allowSpaces?node.data.replace(/ /g,'\\xA0'):node.data;return isWhitespaceText(data);}else{return false;}};var isEmptyTextNode$1=function(node){return isNonNullable(node)&&isText$7(node)&&node.length===0;};var replaceVars=function(value,vars){if(isFunction(value)){value=value(vars);}else if(isNonNullable(vars)){value=value.replace(/%(\\w+)/g,function(str,name){return vars[name]||str;});}return value;};var isEq$5=function(str1,str2){str1=str1||'';str2=str2||'';str1=''+(str1.nodeName||str1);str2=''+(str2.nodeName||str2);return str1.toLowerCase()===str2.toLowerCase();};var normalizeStyleValue=function(dom,value,name){if(name==='color'||name==='backgroundColor'){value=dom.toHex(value);}if(name==='fontWeight'&&value===700){value='bold';}if(name==='fontFamily'){value=value.replace(/[\\'\\\"]/g,'').replace(/,\\s+/g,',');}return''+value;};var getStyle=function(dom,node,name){return normalizeStyleValue(dom,dom.getStyle(node,name),name);};var getTextDecoration=function(dom,node){var decoration;dom.getParent(node,function(n){decoration=dom.getStyle(n,'text-decoration');return decoration&&decoration!=='none';});return decoration;};var getParents$2=function(dom,node,selector){return dom.getParents(node,selector,dom.getRoot());};var isVariableFormatName=function(editor,formatName){var hasVariableValues=function(format){var isVariableValue=function(val){return val.length>1&&val.charAt(0)==='%';};return exists(['styles','attributes'],function(key){return get$9(format,key).exists(function(field){var fieldValues=isArray$1(field)?field:values(field);return exists(fieldValues,isVariableValue);});});};return exists(editor.formatter.get(formatName),hasVariableValues);};var areSimilarFormats=function(editor,formatName,otherFormatName){var validKeys=['inline','block','selector','attributes','styles','classes'];var filterObj=function(format){return filter$3(format,function(_,key){return exists(validKeys,function(validKey){return validKey===key;});});};return exists(editor.formatter.get(formatName),function(fmt1){var filteredFmt1=filterObj(fmt1);return exists(editor.formatter.get(otherFormatName),function(fmt2){var filteredFmt2=filterObj(fmt2);return equal$1(filteredFmt1,filteredFmt2);});});};var isBlockFormat=function(format){return hasNonNullableKey(format,'block');};var isSelectorFormat=function(format){return hasNonNullableKey(format,'selector');};var isInlineFormat=function(format){return hasNonNullableKey(format,'inline');};var isMixedFormat=function(format){return isSelectorFormat(format)&&isInlineFormat(format)&&is$1(get$9(format,'mixed'),true);};var shouldExpandToSelector=function(format){return isSelectorFormat(format)&&format.expand!==false&&!isInlineFormat(format);};var isBookmarkNode=isBookmarkNode$1;var getParents$1=getParents$2;var isWhiteSpaceNode=isWhiteSpaceNode$1;var isTextBlock=isTextBlock$1;var isBogusBr=function(node){return isBr$5(node)&&node.getAttribute('data-mce-bogus')&&!node.nextSibling;};var findParentContentEditable=function(dom,node){var parent=node;while(parent){if(isElement$5(parent)&&dom.getContentEditable(parent)){return dom.getContentEditable(parent)==='false'?parent:node;}parent=parent.parentNode;}return node;};var walkText=function(start,node,offset,predicate){var str=node.data;for(var i=offset;start?i>=0:i<str.length;start?i--:i++){if(predicate(str.charAt(i))){return start?i+1:i;}}return-1;};var findSpace=function(start,node,offset){return walkText(start,node,offset,function(c){return isNbsp(c)||isWhiteSpace(c);});};var findContent=function(start,node,offset){return walkText(start,node,offset,isContent);};var findWordEndPoint=function(dom,body,container,offset,start,includeTrailingSpaces){var lastTextNode;var rootNode=dom.getParent(container,dom.isBlock)||body;var walk=function(container,offset,pred){var textSeeker=TextSeeker(dom);var walker=start?textSeeker.backwards:textSeeker.forwards;return Optional.from(walker(container,offset,function(text,textOffset){if(isBookmarkNode(text.parentNode)){return-1;}else{lastTextNode=text;return pred(start,text,textOffset);}},rootNode));};var spaceResult=walk(container,offset,findSpace);return spaceResult.bind(function(result){return includeTrailingSpaces?walk(result.container,result.offset+(start?-1:0),findContent):Optional.some(result);}).orThunk(function(){return lastTextNode?Optional.some({container:lastTextNode,offset:start?0:lastTextNode.length}):Optional.none();});};var findSelectorEndPoint=function(dom,formatList,rng,container,siblingName){if(isText$7(container)&&isEmpty$3(container.data)&&container[siblingName]){container=container[siblingName];}var parents=getParents$1(dom,container);for(var i=0;i<parents.length;i++){for(var y=0;y<formatList.length;y++){var curFormat=formatList[y];if(isNonNullable(curFormat.collapsed)&&curFormat.collapsed!==rng.collapsed){continue;}if(isSelectorFormat(curFormat)&&dom.is(parents[i],curFormat.selector)){return parents[i];}}}return container;};var findBlockEndPoint=function(editor,formatList,container,siblingName){var node=container;var dom=editor.dom;var root=dom.getRoot();var format=formatList[0];if(isBlockFormat(format)){node=format.wrapper?null:dom.getParent(container,format.block,root);}if(!node){var scopeRoot=dom.getParent(container,'LI,TD,TH');node=dom.getParent(isText$7(container)?container.parentNode:container,function(node){return node!==root&&isTextBlock(editor,node);},scopeRoot);}if(node&&isBlockFormat(format)&&format.wrapper){node=getParents$1(dom,node,'ul,ol').reverse()[0]||node;}if(!node){node=container;while(node[siblingName]&&!dom.isBlock(node[siblingName])){node=node[siblingName];if(isEq$5(node,'br')){break;}}}return node||container;};var isAtBlockBoundary$1=function(dom,root,container,siblingName){var parent=container.parentNode;if(isNonNullable(container[siblingName])){return false;}else if(parent===root||isNullable(parent)||dom.isBlock(parent)){return true;}else{return isAtBlockBoundary$1(dom,root,parent,siblingName);}};var findParentContainer=function(dom,formatList,container,offset,start){var parent=container;var siblingName=start?'previousSibling':'nextSibling';var root=dom.getRoot();if(isText$7(container)&&!isWhiteSpaceNode(container)){if(start?offset>0:offset<container.data.length){return container;}}while(true){if(!formatList[0].block_expand&&dom.isBlock(parent)){return parent;}for(var sibling=parent[siblingName];sibling;sibling=sibling[siblingName]){var allowSpaces=isText$7(sibling)&&!isAtBlockBoundary$1(dom,root,sibling,siblingName);if(!isBookmarkNode(sibling)&&!isBogusBr(sibling)&&!isWhiteSpaceNode(sibling,allowSpaces)){return parent;}}if(parent===root||parent.parentNode===root){container=parent;break;}parent=parent.parentNode;}return container;};var isSelfOrParentBookmark=function(container){return isBookmarkNode(container.parentNode)||isBookmarkNode(container);};var expandRng=function(editor,rng,formatList,includeTrailingSpace){if(includeTrailingSpace===void 0){includeTrailingSpace=false;}var startContainer=rng.startContainer,startOffset=rng.startOffset,endContainer=rng.endContainer,endOffset=rng.endOffset;var dom=editor.dom;var format=formatList[0];if(isElement$5(startContainer)&&startContainer.hasChildNodes()){startContainer=getNode$1(startContainer,startOffset);if(isText$7(startContainer)){startOffset=0;}}if(isElement$5(endContainer)&&endContainer.hasChildNodes()){endContainer=getNode$1(endContainer,rng.collapsed?endOffset:endOffset-1);if(isText$7(endContainer)){endOffset=endContainer.nodeValue.length;}}startContainer=findParentContentEditable(dom,startContainer);endContainer=findParentContentEditable(dom,endContainer);if(isSelfOrParentBookmark(startContainer)){startContainer=isBookmarkNode(startContainer)?startContainer:startContainer.parentNode;if(rng.collapsed){startContainer=startContainer.previousSibling||startContainer;}else{startContainer=startContainer.nextSibling||startContainer;}if(isText$7(startContainer)){startOffset=rng.collapsed?startContainer.length:0;}}if(isSelfOrParentBookmark(endContainer)){endContainer=isBookmarkNode(endContainer)?endContainer:endContainer.parentNode;if(rng.collapsed){endContainer=endContainer.nextSibling||endContainer;}else{endContainer=endContainer.previousSibling||endContainer;}if(isText$7(endContainer)){endOffset=rng.collapsed?0:endContainer.length;}}if(rng.collapsed){var startPoint=findWordEndPoint(dom,editor.getBody(),startContainer,startOffset,true,includeTrailingSpace);startPoint.each(function(_a){var container=_a.container,offset=_a.offset;startContainer=container;startOffset=offset;});var endPoint=findWordEndPoint(dom,editor.getBody(),endContainer,endOffset,false,includeTrailingSpace);endPoint.each(function(_a){var container=_a.container,offset=_a.offset;endContainer=container;endOffset=offset;});}if(isInlineFormat(format)||format.block_expand){if(!isInlineFormat(format)||!isText$7(startContainer)||startOffset===0){startContainer=findParentContainer(dom,formatList,startContainer,startOffset,true);}if(!isInlineFormat(format)||!isText$7(endContainer)||endOffset===endContainer.nodeValue.length){endContainer=findParentContainer(dom,formatList,endContainer,endOffset,false);}}if(shouldExpandToSelector(format)){startContainer=findSelectorEndPoint(dom,formatList,rng,startContainer,'previousSibling');endContainer=findSelectorEndPoint(dom,formatList,rng,endContainer,'nextSibling');}if(isBlockFormat(format)||isSelectorFormat(format)){startContainer=findBlockEndPoint(editor,formatList,startContainer,'previousSibling');endContainer=findBlockEndPoint(editor,formatList,endContainer,'nextSibling');if(isBlockFormat(format)){if(!dom.isBlock(startContainer)){startContainer=findParentContainer(dom,formatList,startContainer,startOffset,true);}if(!dom.isBlock(endContainer)){endContainer=findParentContainer(dom,formatList,endContainer,endOffset,false);}}}if(isElement$5(startContainer)){startOffset=dom.nodeIndex(startContainer);startContainer=startContainer.parentNode;}if(isElement$5(endContainer)){endOffset=dom.nodeIndex(endContainer)+1;endContainer=endContainer.parentNode;}return{startContainer:startContainer,startOffset:startOffset,endContainer:endContainer,endOffset:endOffset};};var walk$2=function(dom,rng,callback){var startOffset=rng.startOffset;var startContainer=getNode$1(rng.startContainer,startOffset);var endOffset=rng.endOffset;var endContainer=getNode$1(rng.endContainer,endOffset-1);var exclude=function(nodes){var firstNode=nodes[0];if(isText$7(firstNode)&&firstNode===startContainer&&startOffset>=firstNode.data.length){nodes.splice(0,1);}var lastNode=nodes[nodes.length-1];if(endOffset===0&&nodes.length>0&&lastNode===endContainer&&isText$7(lastNode)){nodes.splice(nodes.length-1,1);}return nodes;};var collectSiblings=function(node,name,endNode){var siblings=[];for(;node&&node!==endNode;node=node[name]){siblings.push(node);}return siblings;};var findEndPoint=function(node,root){return dom.getParent(node,function(node){return node.parentNode===root;},root);};var walkBoundary=function(startNode,endNode,next){var siblingName=next?'nextSibling':'previousSibling';for(var node=startNode,parent_1=node.parentNode;node&&node!==endNode;node=parent_1){parent_1=node.parentNode;var siblings_1=collectSiblings(node===startNode?node:node[siblingName],siblingName);if(siblings_1.length){if(!next){siblings_1.reverse();}callback(exclude(siblings_1));}}};if(startContainer===endContainer){return callback(exclude([startContainer]));}var ancestor=dom.findCommonAncestor(startContainer,endContainer);if(dom.isChildOf(startContainer,endContainer)){return walkBoundary(startContainer,ancestor,true);}if(dom.isChildOf(endContainer,startContainer)){return walkBoundary(endContainer,ancestor);}var startPoint=findEndPoint(startContainer,ancestor)||startContainer;var endPoint=findEndPoint(endContainer,ancestor)||endContainer;walkBoundary(startContainer,startPoint,true);var siblings=collectSiblings(startPoint===startContainer?startPoint:startPoint.nextSibling,'nextSibling',endPoint===endContainer?endPoint.nextSibling:endPoint);if(siblings.length){callback(exclude(siblings));}walkBoundary(endContainer,endPoint);};var getRanges=function(selection){var ranges=[];if(selection){for(var i=0;i<selection.rangeCount;i++){ranges.push(selection.getRangeAt(i));}}return ranges;};var getSelectedNodes=function(ranges){return bind(ranges,function(range){var node=getSelectedNode(range);return node?[SugarElement.fromDom(node)]:[];});};var hasMultipleRanges=function(selection){return getRanges(selection).length>1;};var getCellsFromRanges=function(ranges){return filter$4(getSelectedNodes(ranges),isTableCell$4);};var getCellsFromElement=function(elm){return descendants(elm,'td[data-mce-selected],th[data-mce-selected]');};var getCellsFromElementOrRanges=function(ranges,element){var selectedCells=getCellsFromElement(element);return selectedCells.length>0?selectedCells:getCellsFromRanges(ranges);};var getCellsFromEditor=function(editor){return getCellsFromElementOrRanges(getRanges(editor.selection.getSel()),SugarElement.fromDom(editor.getBody()));};var getClosestTable=function(cell,isRoot){return ancestor$2(cell,'table',isRoot);};var getStartNode=function(rng){var sc=rng.startContainer,so=rng.startOffset;if(isText$7(sc)){return so===0?Optional.some(SugarElement.fromDom(sc)):Optional.none();}else{return Optional.from(sc.childNodes[so]).map(SugarElement.fromDom);}};var getEndNode=function(rng){var ec=rng.endContainer,eo=rng.endOffset;if(isText$7(ec)){return eo===ec.data.length?Optional.some(SugarElement.fromDom(ec)):Optional.none();}else{return Optional.from(ec.childNodes[eo-1]).map(SugarElement.fromDom);}};var getFirstChildren=function(node){return firstChild(node).fold(constant([node]),function(child){return[node].concat(getFirstChildren(child));});};var getLastChildren$1=function(node){return lastChild(node).fold(constant([node]),function(child){if(name(child)==='br'){return prevSibling(child).map(function(sibling){return[node].concat(getLastChildren$1(sibling));}).getOr([]);}else{return[node].concat(getLastChildren$1(child));}});};var hasAllContentsSelected=function(elm,rng){return lift2(getStartNode(rng),getEndNode(rng),function(startNode,endNode){var start=find$3(getFirstChildren(elm),curry(eq,startNode));var end=find$3(getLastChildren$1(elm),curry(eq,endNode));return start.isSome()&&end.isSome();}).getOr(false);};var moveEndPoint=function(dom,rng,node,start){var root=node,walker=new DomTreeWalker(node,root);var moveCaretBeforeOnEnterElementsMap=filter$3(dom.schema.getMoveCaretBeforeOnEnterElements(),function(_,name){return!contains$3(['td','th','table'],name.toLowerCase());});do{if(isText$7(node)&&Tools.trim(node.nodeValue).length!==0){if(start){rng.setStart(node,0);}else{rng.setEnd(node,node.nodeValue.length);}return;}if(moveCaretBeforeOnEnterElementsMap[node.nodeName]){if(start){rng.setStartBefore(node);}else{if(node.nodeName==='BR'){rng.setEndBefore(node);}else{rng.setEndAfter(node);}}return;}}while(node=start?walker.next():walker.prev());if(root.nodeName==='BODY'){if(start){rng.setStart(root,0);}else{rng.setEnd(root,root.childNodes.length);}}};var hasAnyRanges=function(editor){var sel=editor.selection.getSel();return sel&&sel.rangeCount>0;};var runOnRanges=function(editor,executor){var fakeSelectionNodes=getCellsFromEditor(editor);if(fakeSelectionNodes.length>0){each$k(fakeSelectionNodes,function(elem){var node=elem.dom;var fakeNodeRng=editor.dom.createRng();fakeNodeRng.setStartBefore(node);fakeNodeRng.setEndAfter(node);executor(fakeNodeRng,true);});}else{executor(editor.selection.getRng(),false);}};var preserve=function(selection,fillBookmark,executor){var bookmark=getPersistentBookmark(selection,fillBookmark);executor(bookmark);selection.moveToBookmark(bookmark);};var NodeValue=function(is,name){var get=function(element){if(!is(element)){throw new Error('Can only get '+name+' value of a '+name+' node');}return getOption(element).getOr('');};var getOption=function(element){return is(element)?Optional.from(element.dom.nodeValue):Optional.none();};var set=function(element,value){if(!is(element)){throw new Error('Can only set raw '+name+' value of a '+name+' node');}element.dom.nodeValue=value;};return{get:get,getOption:getOption,set:set};};var api$1=NodeValue(isText$8,'text');var get$2=function(element){return api$1.get(element);};var isZeroWidth=function(elem){return isText$8(elem)&&get$2(elem)===ZWSP$1;};var context=function(editor,elem,wrapName,nodeName){return parent(elem).fold(function(){return'skipping';},function(parent){if(nodeName==='br'||isZeroWidth(elem)){return'valid';}else if(isAnnotation(elem)){return'existing';}else if(isCaretNode(elem.dom)){return'caret';}else if(!isValid(editor,wrapName,nodeName)||!isValid(editor,name(parent),wrapName)){return'invalid-child';}else{return'valid';}});};var applyWordGrab=function(editor,rng){var r=expandRng(editor,rng,[{inline:'span'}]);rng.setStart(r.startContainer,r.startOffset);rng.setEnd(r.endContainer,r.endOffset);editor.selection.setRng(rng);};var makeAnnotation=function(eDoc,_a,annotationName,decorate){var _b=_a.uid,uid=_b===void 0?generate('mce-annotation'):_b,data=__rest(_a,['uid']);var master=SugarElement.fromTag('span',eDoc);add$1(master,annotation());set$1(master,''+dataAnnotationId(),uid);set$1(master,''+dataAnnotation(),annotationName);var _c=decorate(uid,data),_d=_c.attributes,attributes=_d===void 0?{}:_d,_e=_c.classes,classes=_e===void 0?[]:_e;setAll$1(master,attributes);add(master,classes);return master;};var annotate=function(editor,rng,annotationName,decorate,data){var newWrappers=[];var master=makeAnnotation(editor.getDoc(),data,annotationName,decorate);var wrapper=value();var finishWrapper=function(){wrapper.clear();};var getOrOpenWrapper=function(){return wrapper.get().getOrThunk(function(){var nu=shallow(master);newWrappers.push(nu);wrapper.set(nu);return nu;});};var processElements=function(elems){each$k(elems,processElement);};var processElement=function(elem){var ctx=context(editor,elem,'span',name(elem));switch(ctx){case'invalid-child':{finishWrapper();var children$1=children(elem);processElements(children$1);finishWrapper();break;}case'valid':{var w=getOrOpenWrapper();wrap$3(elem,w);break;}}};var processNodes=function(nodes){var elems=map$3(nodes,SugarElement.fromDom);processElements(elems);};walk$2(editor.dom,rng,function(nodes){finishWrapper();processNodes(nodes);});return newWrappers;};var annotateWithBookmark=function(editor,name,settings,data){editor.undoManager.transact(function(){var selection=editor.selection;var initialRng=selection.getRng();var hasFakeSelection=getCellsFromEditor(editor).length>0;if(initialRng.collapsed&&!hasFakeSelection){applyWordGrab(editor,initialRng);}if(selection.getRng().collapsed&&!hasFakeSelection){var wrapper=makeAnnotation(editor.getDoc(),data,name,settings.decorate);set(wrapper,nbsp);selection.getRng().insertNode(wrapper.dom);selection.select(wrapper.dom);}else{preserve(selection,false,function(){runOnRanges(editor,function(selectionRng){annotate(editor,selectionRng,name,settings.decorate,data);});});}});};var Annotator=function(editor){var registry=create$7();setup$m(editor,registry);var changes=setup$n(editor);return{register:function(name,settings){registry.register(name,settings);},annotate:function(name,data){registry.lookup(name).each(function(settings){annotateWithBookmark(editor,name,settings,data);});},annotationChanged:function(name,callback){changes.addListener(name,callback);},remove:function(name){identify(editor,Optional.some(name)).each(function(_a){var elements=_a.elements;each$k(elements,unwrap);});},getAll:function(name){var directory=findAll(editor,name);return map$2(directory,function(elems){return map$3(elems,function(elem){return elem.dom;});});}};};var BookmarkManager=function(selection){return{getBookmark:curry(getBookmark$1,selection),moveToBookmark:curry(moveToBookmark,selection)};};BookmarkManager.isBookmarkNode=isBookmarkNode$1;var getContentEditableRoot$1=function(root,node){while(node&&node!==root){if(isContentEditableTrue$4(node)||isContentEditableFalse$b(node)){return node;}node=node.parentNode;}return null;};var isXYWithinRange=function(clientX,clientY,range){if(range.collapsed){return false;}if(Env.browser.isIE()&&range.startOffset===range.endOffset-1&&range.startContainer===range.endContainer){var elm=range.startContainer.childNodes[range.startOffset];if(isElement$5(elm)){return exists(elm.getClientRects(),function(rect){return containsXY(rect,clientX,clientY);});}}return exists(range.getClientRects(),function(rect){return containsXY(rect,clientX,clientY);});};var firePreProcess=function(editor,args){return editor.fire('PreProcess',args);};var firePostProcess=function(editor,args){return editor.fire('PostProcess',args);};var fireRemove=function(editor){return editor.fire('remove');};var fireDetach=function(editor){return editor.fire('detach');};var fireSwitchMode=function(editor,mode){return editor.fire('SwitchMode',{mode:mode});};var fireObjectResizeStart=function(editor,target,width,height,origin){editor.fire('ObjectResizeStart',{target:target,width:width,height:height,origin:origin});};var fireObjectResized=function(editor,target,width,height,origin){editor.fire('ObjectResized',{target:target,width:width,height:height,origin:origin});};var firePreInit=function(editor){return editor.fire('PreInit');};var firePostRender=function(editor){return editor.fire('PostRender');};var fireInit=function(editor){return editor.fire('Init');};var firePlaceholderToggle=function(editor,state){return editor.fire('PlaceholderToggle',{state:state});};var fireError=function(editor,errorType,error){return editor.fire(errorType,error);};var fireFormatApply=function(editor,format,node,vars){return editor.fire('FormatApply',{format:format,node:node,vars:vars});};var fireFormatRemove=function(editor,format,node,vars){return editor.fire('FormatRemove',{format:format,node:node,vars:vars});};var VK={BACKSPACE:8,DELETE:46,DOWN:40,ENTER:13,ESC:27,LEFT:37,RIGHT:39,SPACEBAR:32,TAB:9,UP:38,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,modifierPressed:function(e){return e.shiftKey||e.ctrlKey||e.altKey||VK.metaKeyPressed(e);},metaKeyPressed:function(e){return Env.mac?e.metaKey:e.ctrlKey&&!e.altKey;}};var isContentEditableFalse$5=isContentEditableFalse$b;var ControlSelection=function(selection,editor){var elementSelectionAttr='data-mce-selected';var dom=editor.dom,each=Tools.each;var selectedElm,selectedElmGhost,resizeHelper,selectedHandle,resizeBackdrop;var startX,startY,selectedElmX,selectedElmY,startW,startH,ratio,resizeStarted;var width,height;var editableDoc=editor.getDoc(),rootDocument=document;var abs=Math.abs,round=Math.round,rootElement=editor.getBody();var startScrollWidth,startScrollHeight;var resizeHandles={nw:[0,0,-1,-1],ne:[1,0,1,-1],se:[1,1,1,1],sw:[0,1,-1,1]};var isImage=function(elm){return elm&&(elm.nodeName==='IMG'||editor.dom.is(elm,'figure.image'));};var isMedia=function(elm){return isMedia$2(elm)||dom.hasClass(elm,'mce-preview-object');};var isEventOnImageOutsideRange=function(evt,range){if(evt.type==='longpress'||evt.type.indexOf('touch')===0){var touch=evt.touches[0];return isImage(evt.target)&&!isXYWithinRange(touch.clientX,touch.clientY,range);}else{return isImage(evt.target)&&!isXYWithinRange(evt.clientX,evt.clientY,range);}};var contextMenuSelectImage=function(evt){var target=evt.target;if(isEventOnImageOutsideRange(evt,editor.selection.getRng())&&!evt.isDefaultPrevented()){editor.selection.select(target);}};var getResizeTargets=function(elm){if(dom.is(elm,'figure.image')){return[elm.querySelector('img')];}else if(dom.hasClass(elm,'mce-preview-object')&&isNonNullable(elm.firstElementChild)){return[elm,elm.firstElementChild];}else{return[elm];}};var isResizable=function(elm){var selector=getObjectResizing(editor);if(!selector){return false;}if(elm.getAttribute('data-mce-resize')==='false'){return false;}if(elm===editor.getBody()){return false;}if(dom.hasClass(elm,'mce-preview-object')){return is$2(SugarElement.fromDom(elm.firstElementChild),selector);}else{return is$2(SugarElement.fromDom(elm),selector);}};var createGhostElement=function(elm){if(isMedia(elm)){return dom.create('img',{src:Env.transparentSrc});}else{return elm.cloneNode(true);}};var setSizeProp=function(element,name,value){if(isNonNullable(value)){var targets=getResizeTargets(element);each$k(targets,function(target){if(target.style[name]||!editor.schema.isValid(target.nodeName.toLowerCase(),name)){dom.setStyle(target,name,value);}else{dom.setAttrib(target,name,''+value);}});}};var setGhostElmSize=function(ghostElm,width,height){setSizeProp(ghostElm,'width',width);setSizeProp(ghostElm,'height',height);};var resizeGhostElement=function(e){var deltaX,deltaY,proportional;var resizeHelperX,resizeHelperY;deltaX=e.screenX-startX;deltaY=e.screenY-startY;width=deltaX*selectedHandle[2]+startW;height=deltaY*selectedHandle[3]+startH;width=width<5?5:width;height=height<5?5:height;if((isImage(selectedElm)||isMedia(selectedElm))&&getResizeImgProportional(editor)!==false){proportional=!VK.modifierPressed(e);}else{proportional=VK.modifierPressed(e);}if(proportional){if(abs(deltaX)>abs(deltaY)){height=round(width*ratio);width=round(height/ratio);}else{width=round(height/ratio);height=round(width*ratio);}}setGhostElmSize(selectedElmGhost,width,height);resizeHelperX=selectedHandle.startPos.x+deltaX;resizeHelperY=selectedHandle.startPos.y+deltaY;resizeHelperX=resizeHelperX>0?resizeHelperX:0;resizeHelperY=resizeHelperY>0?resizeHelperY:0;dom.setStyles(resizeHelper,{left:resizeHelperX,top:resizeHelperY,display:'block'});resizeHelper.innerHTML=width+' &times; '+height;if(selectedHandle[2]<0&&selectedElmGhost.clientWidth<=width){dom.setStyle(selectedElmGhost,'left',selectedElmX+(startW-width));}if(selectedHandle[3]<0&&selectedElmGhost.clientHeight<=height){dom.setStyle(selectedElmGhost,'top',selectedElmY+(startH-height));}deltaX=rootElement.scrollWidth-startScrollWidth;deltaY=rootElement.scrollHeight-startScrollHeight;if(deltaX+deltaY!==0){dom.setStyles(resizeHelper,{left:resizeHelperX-deltaX,top:resizeHelperY-deltaY});}if(!resizeStarted){fireObjectResizeStart(editor,selectedElm,startW,startH,'corner-'+selectedHandle.name);resizeStarted=true;}};var endGhostResize=function(){var wasResizeStarted=resizeStarted;resizeStarted=false;if(wasResizeStarted){setSizeProp(selectedElm,'width',width);setSizeProp(selectedElm,'height',height);}dom.unbind(editableDoc,'mousemove',resizeGhostElement);dom.unbind(editableDoc,'mouseup',endGhostResize);if(rootDocument!==editableDoc){dom.unbind(rootDocument,'mousemove',resizeGhostElement);dom.unbind(rootDocument,'mouseup',endGhostResize);}dom.remove(selectedElmGhost);dom.remove(resizeHelper);dom.remove(resizeBackdrop);showResizeRect(selectedElm);if(wasResizeStarted){fireObjectResized(editor,selectedElm,width,height,'corner-'+selectedHandle.name);dom.setAttrib(selectedElm,'style',dom.getAttrib(selectedElm,'style'));}editor.nodeChanged();};var showResizeRect=function(targetElm){unbindResizeHandleEvents();var position=dom.getPos(targetElm,rootElement);var selectedElmX=position.x;var selectedElmY=position.y;var rect=targetElm.getBoundingClientRect();var targetWidth=rect.width||rect.right-rect.left;var targetHeight=rect.height||rect.bottom-rect.top;if(selectedElm!==targetElm){hideResizeRect();selectedElm=targetElm;width=height=0;}var e=editor.fire('ObjectSelected',{target:targetElm});var selectedValue=dom.getAttrib(selectedElm,elementSelectionAttr,'1');if(isResizable(targetElm)&&!e.isDefaultPrevented()){each(resizeHandles,function(handle,name){var handleElm;var startDrag=function(e){var target=getResizeTargets(selectedElm)[0];startX=e.screenX;startY=e.screenY;startW=target.clientWidth;startH=target.clientHeight;ratio=startH/startW;selectedHandle=handle;selectedHandle.name=name;selectedHandle.startPos={x:targetWidth*handle[0]+selectedElmX,y:targetHeight*handle[1]+selectedElmY};startScrollWidth=rootElement.scrollWidth;startScrollHeight=rootElement.scrollHeight;resizeBackdrop=dom.add(rootElement,'div',{'class':'mce-resize-backdrop','data-mce-bogus':'all'});dom.setStyles(resizeBackdrop,{position:'fixed',left:'0',top:'0',width:'100%',height:'100%'});selectedElmGhost=createGhostElement(selectedElm);dom.addClass(selectedElmGhost,'mce-clonedresizable');dom.setAttrib(selectedElmGhost,'data-mce-bogus','all');selectedElmGhost.contentEditable='false';dom.setStyles(selectedElmGhost,{left:selectedElmX,top:selectedElmY,margin:0});setGhostElmSize(selectedElmGhost,targetWidth,targetHeight);selectedElmGhost.removeAttribute(elementSelectionAttr);rootElement.appendChild(selectedElmGhost);dom.bind(editableDoc,'mousemove',resizeGhostElement);dom.bind(editableDoc,'mouseup',endGhostResize);if(rootDocument!==editableDoc){dom.bind(rootDocument,'mousemove',resizeGhostElement);dom.bind(rootDocument,'mouseup',endGhostResize);}resizeHelper=dom.add(rootElement,'div',{'class':'mce-resize-helper','data-mce-bogus':'all'},startW+' &times; '+startH);};handleElm=dom.get('mceResizeHandle'+name);if(handleElm){dom.remove(handleElm);}handleElm=dom.add(rootElement,'div',{'id':'mceResizeHandle'+name,'data-mce-bogus':'all','class':'mce-resizehandle','unselectable':true,'style':'cursor:'+name+'-resize; margin:0; padding:0'});if(Env.ie===11){handleElm.contentEditable=false;}dom.bind(handleElm,'mousedown',function(e){e.stopImmediatePropagation();e.preventDefault();startDrag(e);});handle.elm=handleElm;dom.setStyles(handleElm,{left:targetWidth*handle[0]+selectedElmX-handleElm.offsetWidth/2,top:targetHeight*handle[1]+selectedElmY-handleElm.offsetHeight/2});});}else{hideResizeRect();}if(!dom.getAttrib(selectedElm,elementSelectionAttr)){selectedElm.setAttribute(elementSelectionAttr,selectedValue);}};var hideResizeRect=function(){unbindResizeHandleEvents();if(selectedElm){selectedElm.removeAttribute(elementSelectionAttr);}each$j(resizeHandles,function(value,name){var handleElm=dom.get('mceResizeHandle'+name);if(handleElm){dom.unbind(handleElm);dom.remove(handleElm);}});};var updateResizeRect=function(e){var startElm,controlElm;var isChildOrEqual=function(node,parent){if(node){do{if(node===parent){return true;}}while(node=node.parentNode);}};if(resizeStarted||editor.removed){return;}each(dom.select('img[data-mce-selected],hr[data-mce-selected]'),function(img){img.removeAttribute(elementSelectionAttr);});controlElm=e.type==='mousedown'?e.target:selection.getNode();controlElm=dom.$(controlElm).closest('table,img,figure.image,hr,video,span.mce-preview-object')[0];if(isChildOrEqual(controlElm,rootElement)){disableGeckoResize();startElm=selection.getStart(true);if(isChildOrEqual(startElm,controlElm)&&isChildOrEqual(selection.getEnd(true),controlElm)){showResizeRect(controlElm);return;}}hideResizeRect();};var isWithinContentEditableFalse=function(elm){return isContentEditableFalse$5(getContentEditableRoot$1(editor.getBody(),elm));};var unbindResizeHandleEvents=function(){each$j(resizeHandles,function(handle){if(handle.elm){dom.unbind(handle.elm);delete handle.elm;}});};var disableGeckoResize=function(){try{editor.getDoc().execCommand('enableObjectResizing',false,'false');}catch(ex){}};editor.on('init',function(){disableGeckoResize();if(Env.browser.isIE()||Env.browser.isEdge()){editor.on('mousedown click',function(e){var target=e.target,nodeName=target.nodeName;if(!resizeStarted&&/^(TABLE|IMG|HR)$/.test(nodeName)&&!isWithinContentEditableFalse(target)){if(e.button!==2){editor.selection.select(target,nodeName==='TABLE');}if(e.type==='mousedown'){editor.nodeChanged();}}});var handleMSControlSelect_1=function(e){var delayedSelect=function(node){Delay.setEditorTimeout(editor,function(){return editor.selection.select(node);});};if(isWithinContentEditableFalse(e.target)||isMedia$2(e.target)){e.preventDefault();delayedSelect(e.target);return;}if(/^(TABLE|IMG|HR)$/.test(e.target.nodeName)){e.preventDefault();if(e.target.tagName==='IMG'){delayedSelect(e.target);}}};dom.bind(rootElement,'mscontrolselect',handleMSControlSelect_1);editor.on('remove',function(){return dom.unbind(rootElement,'mscontrolselect',handleMSControlSelect_1);});}var throttledUpdateResizeRect=Delay.throttle(function(e){if(!editor.composing){updateResizeRect(e);}});editor.on('NodeChange ResizeEditor ResizeWindow ResizeContent drop',throttledUpdateResizeRect);editor.on('keyup compositionend',function(e){if(selectedElm&&selectedElm.nodeName==='TABLE'){throttledUpdateResizeRect(e);}});editor.on('hide blur',hideResizeRect);editor.on('contextmenu longpress',contextMenuSelectImage,true);});editor.on('remove',unbindResizeHandleEvents);var destroy=function(){selectedElm=selectedElmGhost=resizeBackdrop=null;};return{isResizable:isResizable,showResizeRect:showResizeRect,hideResizeRect:hideResizeRect,updateResizeRect:updateResizeRect,destroy:destroy};};var hasCeProperty=function(node){return isContentEditableTrue$4(node)||isContentEditableFalse$b(node);};var findParent$1=function(node,rootNode,predicate){while(node&&node!==rootNode){if(predicate(node)){return node;}node=node.parentNode;}return null;};var findClosestIeRange=function(clientX,clientY,doc){var rects;var element=doc.elementFromPoint(clientX,clientY);var rng=doc.body.createTextRange();if(!element||element.tagName==='HTML'){element=doc.body;}rng.moveToElementText(element);rects=Tools.toArray(rng.getClientRects());rects=rects.sort(function(a,b){a=Math.abs(Math.max(a.top-clientY,a.bottom-clientY));b=Math.abs(Math.max(b.top-clientY,b.bottom-clientY));return a-b;});if(rects.length>0){clientY=(rects[0].bottom+rects[0].top)/2;try{rng.moveToPoint(clientX,clientY);rng.collapse(true);return rng;}catch(ex){}}return null;};var moveOutOfContentEditableFalse=function(rng,rootNode){var parentElement=rng&&rng.parentElement?rng.parentElement():null;return isContentEditableFalse$b(findParent$1(parentElement,rootNode,hasCeProperty))?null:rng;};var fromPoint=function(clientX,clientY,doc){var rng,point;var pointDoc=doc;if(pointDoc.caretPositionFromPoint){point=pointDoc.caretPositionFromPoint(clientX,clientY);if(point){rng=doc.createRange();rng.setStart(point.offsetNode,point.offset);rng.collapse(true);}}else if(pointDoc.caretRangeFromPoint){rng=pointDoc.caretRangeFromPoint(clientX,clientY);}else if(pointDoc.body.createTextRange){rng=pointDoc.body.createTextRange();try{rng.moveToPoint(clientX,clientY);rng.collapse(true);}catch(ex){rng=findClosestIeRange(clientX,clientY,doc);}return moveOutOfContentEditableFalse(rng,doc.body);}return rng;};var isEq$4=function(rng1,rng2){return rng1&&rng2&&rng1.startContainer===rng2.startContainer&&rng1.startOffset===rng2.startOffset&&rng1.endContainer===rng2.endContainer&&rng1.endOffset===rng2.endOffset;};var findParent=function(node,rootNode,predicate){while(node&&node!==rootNode){if(predicate(node)){return node;}node=node.parentNode;}return null;};var hasParent$1=function(node,rootNode,predicate){return findParent(node,rootNode,predicate)!==null;};var hasParentWithName=function(node,rootNode,name){return hasParent$1(node,rootNode,function(node){return node.nodeName===name;});};var isTable=function(node){return node&&node.nodeName==='TABLE';};var isTableCell$2=function(node){return node&&/^(TD|TH|CAPTION)$/.test(node.nodeName);};var isCeFalseCaretContainer=function(node,rootNode){return isCaretContainer$2(node)&&hasParent$1(node,rootNode,isCaretNode)===false;};var hasBrBeforeAfter=function(dom,node,left){var walker=new DomTreeWalker(node,dom.getParent(node.parentNode,dom.isBlock)||dom.getRoot());while(node=walker[left?'prev':'next']()){if(isBr$5(node)){return true;}}};var isPrevNode=function(node,name){return node.previousSibling&&node.previousSibling.nodeName===name;};var hasContentEditableFalseParent=function(body,node){while(node&&node!==body){if(isContentEditableFalse$b(node)){return true;}node=node.parentNode;}return false;};var findTextNodeRelative=function(dom,isAfterNode,collapsed,left,startNode){var lastInlineElement;var body=dom.getRoot();var node;var nonEmptyElementsMap=dom.schema.getNonEmptyElements();var parentBlockContainer=dom.getParent(startNode.parentNode,dom.isBlock)||body;if(left&&isBr$5(startNode)&&isAfterNode&&dom.isEmpty(parentBlockContainer)){return Optional.some(CaretPosition(startNode.parentNode,dom.nodeIndex(startNode)));}var walker=new DomTreeWalker(startNode,parentBlockContainer);while(node=walker[left?'prev':'next']()){if(dom.getContentEditableParent(node)==='false'||isCeFalseCaretContainer(node,body)){return Optional.none();}if(isText$7(node)&&node.nodeValue.length>0){if(hasParentWithName(node,body,'A')===false){return Optional.some(CaretPosition(node,left?node.nodeValue.length:0));}return Optional.none();}if(dom.isBlock(node)||nonEmptyElementsMap[node.nodeName.toLowerCase()]){return Optional.none();}lastInlineElement=node;}if(collapsed&&lastInlineElement){return Optional.some(CaretPosition(lastInlineElement,0));}return Optional.none();};var normalizeEndPoint=function(dom,collapsed,start,rng){var container,offset;var body=dom.getRoot();var node;var directionLeft,normalized=false;container=rng[(start?'start':'end')+'Container'];offset=rng[(start?'start':'end')+'Offset'];var isAfterNode=isElement$5(container)&&offset===container.childNodes.length;var nonEmptyElementsMap=dom.schema.getNonEmptyElements();directionLeft=start;if(isCaretContainer$2(container)){return Optional.none();}if(isElement$5(container)&&offset>container.childNodes.length-1){directionLeft=false;}if(isDocument$1(container)){container=body;offset=0;}if(container===body){if(directionLeft){node=container.childNodes[offset>0?offset-1:0];if(node){if(isCaretContainer$2(node)){return Optional.none();}if(nonEmptyElementsMap[node.nodeName]||isTable(node)){return Optional.none();}}}if(container.hasChildNodes()){offset=Math.min(!directionLeft&&offset>0?offset-1:offset,container.childNodes.length-1);container=container.childNodes[offset];offset=isText$7(container)&&isAfterNode?container.data.length:0;if(!collapsed&&container===body.lastChild&&isTable(container)){return Optional.none();}if(hasContentEditableFalseParent(body,container)||isCaretContainer$2(container)){return Optional.none();}if(container.hasChildNodes()&&isTable(container)===false){node=container;var walker=new DomTreeWalker(container,body);do{if(isContentEditableFalse$b(node)||isCaretContainer$2(node)){normalized=false;break;}if(isText$7(node)&&node.nodeValue.length>0){offset=directionLeft?0:node.nodeValue.length;container=node;normalized=true;break;}if(nonEmptyElementsMap[node.nodeName.toLowerCase()]&&!isTableCell$2(node)){offset=dom.nodeIndex(node);container=node.parentNode;if(!directionLeft){offset++;}normalized=true;break;}}while(node=directionLeft?walker.next():walker.prev());}}}if(collapsed){if(isText$7(container)&&offset===0){findTextNodeRelative(dom,isAfterNode,collapsed,true,container).each(function(pos){container=pos.container();offset=pos.offset();normalized=true;});}if(isElement$5(container)){node=container.childNodes[offset];if(!node){node=container.childNodes[offset-1];}if(node&&isBr$5(node)&&!isPrevNode(node,'A')&&!hasBrBeforeAfter(dom,node,false)&&!hasBrBeforeAfter(dom,node,true)){findTextNodeRelative(dom,isAfterNode,collapsed,true,node).each(function(pos){container=pos.container();offset=pos.offset();normalized=true;});}}}if(directionLeft&&!collapsed&&isText$7(container)&&offset===container.nodeValue.length){findTextNodeRelative(dom,isAfterNode,collapsed,false,container).each(function(pos){container=pos.container();offset=pos.offset();normalized=true;});}return normalized?Optional.some(CaretPosition(container,offset)):Optional.none();};var normalize$2=function(dom,rng){var collapsed=rng.collapsed,normRng=rng.cloneRange();var startPos=CaretPosition.fromRangeStart(rng);normalizeEndPoint(dom,collapsed,true,normRng).each(function(pos){if(!collapsed||!CaretPosition.isAbove(startPos,pos)){normRng.setStart(pos.container(),pos.offset());}});if(!collapsed){normalizeEndPoint(dom,collapsed,false,normRng).each(function(pos){normRng.setEnd(pos.container(),pos.offset());});}if(collapsed){normRng.collapse(true);}return isEq$4(rng,normRng)?Optional.none():Optional.some(normRng);};var splitText=function(node,offset){return node.splitText(offset);};var split=function(rng){var startContainer=rng.startContainer,startOffset=rng.startOffset,endContainer=rng.endContainer,endOffset=rng.endOffset;if(startContainer===endContainer&&isText$7(startContainer)){if(startOffset>0&&startOffset<startContainer.nodeValue.length){endContainer=splitText(startContainer,startOffset);startContainer=endContainer.previousSibling;if(endOffset>startOffset){endOffset=endOffset-startOffset;startContainer=endContainer=splitText(endContainer,endOffset).previousSibling;endOffset=endContainer.nodeValue.length;startOffset=0;}else{endOffset=0;}}}else{if(isText$7(startContainer)&&startOffset>0&&startOffset<startContainer.nodeValue.length){startContainer=splitText(startContainer,startOffset);startOffset=0;}if(isText$7(endContainer)&&endOffset>0&&endOffset<endContainer.nodeValue.length){endContainer=splitText(endContainer,endOffset).previousSibling;endOffset=endContainer.nodeValue.length;}}return{startContainer:startContainer,startOffset:startOffset,endContainer:endContainer,endOffset:endOffset};};var RangeUtils=function(dom){var walk=function(rng,callback){return walk$2(dom,rng,callback);};var split$1=split;var normalize=function(rng){return normalize$2(dom,rng).fold(never,function(normalizedRng){rng.setStart(normalizedRng.startContainer,normalizedRng.startOffset);rng.setEnd(normalizedRng.endContainer,normalizedRng.endOffset);return true;});};return{walk:walk,split:split$1,normalize:normalize};};RangeUtils.compareRanges=isEq$4;RangeUtils.getCaretRangeFromPoint=fromPoint;RangeUtils.getSelectedNode=getSelectedNode;RangeUtils.getNode=getNode$1;var Dimension=function(name,getOffset){var set=function(element,h){if(!isNumber(h)&&!h.match(/^[0-9]+$/)){throw new Error(name+'.set accepts only positive integer values. Value was '+h);}var dom=element.dom;if(isSupported(dom)){dom.style[name]=h+'px';}};var get=function(element){var r=getOffset(element);if(r<=0||r===null){var css=get$5(element,name);return parseFloat(css)||0;}return r;};var getOuter=get;var aggregate=function(element,properties){return foldl(properties,function(acc,property){var val=get$5(element,property);var value=val===undefined?0:parseInt(val,10);return isNaN(value)?acc:acc+value;},0);};var max=function(element,value,properties){var cumulativeInclusions=aggregate(element,properties);var absoluteMax=value>cumulativeInclusions?value-cumulativeInclusions:0;return absoluteMax;};return{set:set,get:get,getOuter:getOuter,aggregate:aggregate,max:max};};var api=Dimension('height',function(element){var dom=element.dom;return inBody(element)?dom.getBoundingClientRect().height:dom.offsetHeight;});var get$1=function(element){return api.get(element);};var walkUp=function(navigation,doc){var frame=navigation.view(doc);return frame.fold(constant([]),function(f){var parent=navigation.owner(f);var rest=walkUp(navigation,parent);return[f].concat(rest);});};var pathTo=function(element,navigation){var d=navigation.owner(element);return walkUp(navigation,d);};var view=function(doc){var _a;var element=doc.dom===document?Optional.none():Optional.from((_a=doc.dom.defaultView)===null||_a===void 0?void 0:_a.frameElement);return element.map(SugarElement.fromDom);};var owner=function(element){return documentOrOwner(element);};var Navigation=/*#__PURE__*/Object.freeze({__proto__:null,view:view,owner:owner});var find$1=function(element){var doc=SugarElement.fromDom(document);var scroll=get$8(doc);var frames=pathTo(element,Navigation);var offset=viewport(element);var r=foldr(frames,function(b,a){var loc=viewport(a);return{left:b.left+loc.left,top:b.top+loc.top};},{left:0,top:0});return SugarPosition(r.left+offset.left+scroll.left,r.top+offset.top+scroll.top);};var excludeFromDescend=function(element){return name(element)==='textarea';};var fireScrollIntoViewEvent=function(editor,data){var scrollEvent=editor.fire('ScrollIntoView',data);return scrollEvent.isDefaultPrevented();};var fireAfterScrollIntoViewEvent=function(editor,data){editor.fire('AfterScrollIntoView',data);};var descend=function(element,offset){var children$1=children(element);if(children$1.length===0||excludeFromDescend(element)){return{element:element,offset:offset};}else if(offset<children$1.length&&!excludeFromDescend(children$1[offset])){return{element:children$1[offset],offset:0};}else{var last=children$1[children$1.length-1];if(excludeFromDescend(last)){return{element:element,offset:offset};}else{if(name(last)==='img'){return{element:last,offset:1};}else if(isText$8(last)){return{element:last,offset:get$2(last).length};}else{return{element:last,offset:children(last).length};}}}};var markerInfo=function(element,cleanupFun){var pos=absolute(element);var height=get$1(element);return{element:element,bottom:pos.top+height,height:height,pos:pos,cleanup:cleanupFun};};var createMarker=function(element,offset){var startPoint=descend(element,offset);var span=SugarElement.fromHtml('<span data-mce-bogus=\"all\" style=\"display: inline-block;\">'+ZWSP$1+'</span>');before$4(startPoint.element,span);return markerInfo(span,function(){return remove$7(span);});};var elementMarker=function(element){return markerInfo(SugarElement.fromDom(element),noop);};var withMarker=function(editor,f,rng,alignToTop){preserveWith(editor,function(_s,_e){return applyWithMarker(editor,f,rng,alignToTop);},rng);};var withScrollEvents=function(editor,doc,f,marker,alignToTop){var data={elm:marker.element.dom,alignToTop:alignToTop};if(fireScrollIntoViewEvent(editor,data)){return;}var scrollTop=get$8(doc).top;f(doc,scrollTop,marker,alignToTop);fireAfterScrollIntoViewEvent(editor,data);};var applyWithMarker=function(editor,f,rng,alignToTop){var body=SugarElement.fromDom(editor.getBody());var doc=SugarElement.fromDom(editor.getDoc());reflow(body);var marker=createMarker(SugarElement.fromDom(rng.startContainer),rng.startOffset);withScrollEvents(editor,doc,f,marker,alignToTop);marker.cleanup();};var withElement=function(editor,element,f,alignToTop){var doc=SugarElement.fromDom(editor.getDoc());withScrollEvents(editor,doc,f,elementMarker(element),alignToTop);};var preserveWith=function(editor,f,rng){var startElement=rng.startContainer;var startOffset=rng.startOffset;var endElement=rng.endContainer;var endOffset=rng.endOffset;f(SugarElement.fromDom(startElement),SugarElement.fromDom(endElement));var newRng=editor.dom.createRng();newRng.setStart(startElement,startOffset);newRng.setEnd(endElement,endOffset);editor.selection.setRng(rng);};var scrollToMarker=function(marker,viewHeight,alignToTop,doc){var pos=marker.pos;if(alignToTop){to(pos.left,pos.top,doc);}else{var y=pos.top-viewHeight+marker.height;to(pos.left,y,doc);}};var intoWindowIfNeeded=function(doc,scrollTop,viewHeight,marker,alignToTop){var viewportBottom=viewHeight+scrollTop;var markerTop=marker.pos.top;var markerBottom=marker.bottom;var largerThanViewport=markerBottom-markerTop>=viewHeight;if(markerTop<scrollTop){scrollToMarker(marker,viewHeight,alignToTop!==false,doc);}else if(markerTop>viewportBottom){var align=largerThanViewport?alignToTop!==false:alignToTop===true;scrollToMarker(marker,viewHeight,align,doc);}else if(markerBottom>viewportBottom&&!largerThanViewport){scrollToMarker(marker,viewHeight,alignToTop===true,doc);}};var intoWindow=function(doc,scrollTop,marker,alignToTop){var viewHeight=doc.dom.defaultView.innerHeight;intoWindowIfNeeded(doc,scrollTop,viewHeight,marker,alignToTop);};var intoFrame=function(doc,scrollTop,marker,alignToTop){var frameViewHeight=doc.dom.defaultView.innerHeight;intoWindowIfNeeded(doc,scrollTop,frameViewHeight,marker,alignToTop);var op=find$1(marker.element);var viewportBounds=getBounds(window);if(op.top<viewportBounds.y){intoView(marker.element,alignToTop!==false);}else if(op.top>viewportBounds.bottom){intoView(marker.element,alignToTop===true);}};var rangeIntoWindow=function(editor,rng,alignToTop){return withMarker(editor,intoWindow,rng,alignToTop);};var elementIntoWindow=function(editor,element,alignToTop){return withElement(editor,element,intoWindow,alignToTop);};var rangeIntoFrame=function(editor,rng,alignToTop){return withMarker(editor,intoFrame,rng,alignToTop);};var elementIntoFrame=function(editor,element,alignToTop){return withElement(editor,element,intoFrame,alignToTop);};var scrollElementIntoView=function(editor,element,alignToTop){var scroller=editor.inline?elementIntoWindow:elementIntoFrame;scroller(editor,element,alignToTop);};var scrollRangeIntoView=function(editor,rng,alignToTop){var scroller=editor.inline?rangeIntoWindow:rangeIntoFrame;scroller(editor,rng,alignToTop);};var getDocument=function(){return SugarElement.fromDom(document);};var focus$1=function(element){return element.dom.focus();};var hasFocus$1=function(element){var root=getRootNode(element).dom;return element.dom===root.activeElement;};var active=function(root){if(root===void 0){root=getDocument();}return Optional.from(root.dom.activeElement).map(SugarElement.fromDom);};var search=function(element){return active(getRootNode(element)).filter(function(e){return element.dom.contains(e.dom);});};var create$5=function(start,soffset,finish,foffset){return{start:start,soffset:soffset,finish:finish,foffset:foffset};};var SimRange={create:create$5};var adt$1=Adt.generate([{before:['element']},{on:['element','offset']},{after:['element']}]);var cata=function(subject,onBefore,onOn,onAfter){return subject.fold(onBefore,onOn,onAfter);};var getStart$2=function(situ){return situ.fold(identity,identity,identity);};var before$1=adt$1.before;var on=adt$1.on;var after$1=adt$1.after;var Situ={before:before$1,on:on,after:after$1,cata:cata,getStart:getStart$2};var adt=Adt.generate([{domRange:['rng']},{relative:['startSitu','finishSitu']},{exact:['start','soffset','finish','foffset']}]);var exactFromRange=function(simRange){return adt.exact(simRange.start,simRange.soffset,simRange.finish,simRange.foffset);};var getStart$1=function(selection){return selection.match({domRange:function(rng){return SugarElement.fromDom(rng.startContainer);},relative:function(startSitu,_finishSitu){return Situ.getStart(startSitu);},exact:function(start,_soffset,_finish,_foffset){return start;}});};var domRange=adt.domRange;var relative=adt.relative;var exact=adt.exact;var getWin=function(selection){var start=getStart$1(selection);return defaultView(start);};var range=SimRange.create;var SimSelection={domRange:domRange,relative:relative,exact:exact,exactFromRange:exactFromRange,getWin:getWin,range:range};var browser$1=detect().browser;var clamp$1=function(offset,element){var max=isText$8(element)?get$2(element).length:children(element).length+1;if(offset>max){return max;}else if(offset<0){return 0;}return offset;};var normalizeRng=function(rng){return SimSelection.range(rng.start,clamp$1(rng.soffset,rng.start),rng.finish,clamp$1(rng.foffset,rng.finish));};var isOrContains=function(root,elm){return!isRestrictedNode(elm.dom)&&(contains$1(root,elm)||eq(root,elm));};var isRngInRoot=function(root){return function(rng){return isOrContains(root,rng.start)&&isOrContains(root,rng.finish);};};var shouldStore=function(editor){return editor.inline===true||browser$1.isIE();};var nativeRangeToSelectionRange=function(r){return SimSelection.range(SugarElement.fromDom(r.startContainer),r.startOffset,SugarElement.fromDom(r.endContainer),r.endOffset);};var readRange=function(win){var selection=win.getSelection();var rng=!selection||selection.rangeCount===0?Optional.none():Optional.from(selection.getRangeAt(0));return rng.map(nativeRangeToSelectionRange);};var getBookmark=function(root){var win=defaultView(root);return readRange(win.dom).filter(isRngInRoot(root));};var validate=function(root,bookmark){return Optional.from(bookmark).filter(isRngInRoot(root)).map(normalizeRng);};var bookmarkToNativeRng=function(bookmark){var rng=document.createRange();try{rng.setStart(bookmark.start.dom,bookmark.soffset);rng.setEnd(bookmark.finish.dom,bookmark.foffset);return Optional.some(rng);}catch(_){return Optional.none();}};var store=function(editor){var newBookmark=shouldStore(editor)?getBookmark(SugarElement.fromDom(editor.getBody())):Optional.none();editor.bookmark=newBookmark.isSome()?newBookmark:editor.bookmark;};var storeNative=function(editor,rng){var root=SugarElement.fromDom(editor.getBody());var range=shouldStore(editor)?Optional.from(rng):Optional.none();var newBookmark=range.map(nativeRangeToSelectionRange).filter(isRngInRoot(root));editor.bookmark=newBookmark.isSome()?newBookmark:editor.bookmark;};var getRng=function(editor){var bookmark=editor.bookmark?editor.bookmark:Optional.none();return bookmark.bind(function(x){return validate(SugarElement.fromDom(editor.getBody()),x);}).bind(bookmarkToNativeRng);};var restore=function(editor){getRng(editor).each(function(rng){return editor.selection.setRng(rng);});};var isEditorUIElement$1=function(elm){var className=elm.className.toString();return className.indexOf('tox-')!==-1||className.indexOf('mce-')!==-1;};var FocusManager={isEditorUIElement:isEditorUIElement$1};var isManualNodeChange=function(e){return e.type==='nodechange'&&e.selectionChange;};var registerPageMouseUp=function(editor,throttledStore){var mouseUpPage=function(){throttledStore.throttle();};DOMUtils.DOM.bind(document,'mouseup',mouseUpPage);editor.on('remove',function(){DOMUtils.DOM.unbind(document,'mouseup',mouseUpPage);});};var registerFocusOut=function(editor){editor.on('focusout',function(){store(editor);});};var registerMouseUp=function(editor,throttledStore){editor.on('mouseup touchend',function(_e){throttledStore.throttle();});};var registerEditorEvents=function(editor,throttledStore){var browser=detect().browser;if(browser.isIE()){registerFocusOut(editor);}else{registerMouseUp(editor,throttledStore);}editor.on('keyup NodeChange',function(e){if(!isManualNodeChange(e)){store(editor);}});};var register$3=function(editor){var throttledStore=first(function(){store(editor);},0);editor.on('init',function(){if(editor.inline){registerPageMouseUp(editor,throttledStore);}registerEditorEvents(editor,throttledStore);});editor.on('remove',function(){throttledStore.cancel();});};var documentFocusInHandler;var DOM$8=DOMUtils.DOM;var isEditorUIElement=function(elm){return FocusManager.isEditorUIElement(elm);};var isEditorContentAreaElement=function(elm){var classList=elm.classList;if(classList!==undefined){return classList.contains('tox-edit-area')||classList.contains('tox-edit-area__iframe')||classList.contains('mce-content-body');}else{return false;}};var isUIElement=function(editor,elm){var customSelector=getCustomUiSelector(editor);var parent=DOM$8.getParent(elm,function(elm){return isEditorUIElement(elm)||(customSelector?editor.dom.is(elm,customSelector):false);});return parent!==null;};var getActiveElement=function(editor){try{var root=getRootNode(SugarElement.fromDom(editor.getElement()));return active(root).fold(function(){return document.body;},function(x){return x.dom;});}catch(ex){return document.body;}};var registerEvents$1=function(editorManager,e){var editor=e.editor;register$3(editor);editor.on('focusin',function(){var focusedEditor=editorManager.focusedEditor;if(focusedEditor!==editor){if(focusedEditor){focusedEditor.fire('blur',{focusedEditor:editor});}editorManager.setActive(editor);editorManager.focusedEditor=editor;editor.fire('focus',{blurredEditor:focusedEditor});editor.focus(true);}});editor.on('focusout',function(){Delay.setEditorTimeout(editor,function(){var focusedEditor=editorManager.focusedEditor;if(!isUIElement(editor,getActiveElement(editor))&&focusedEditor===editor){editor.fire('blur',{focusedEditor:null});editorManager.focusedEditor=null;}});});if(!documentFocusInHandler){documentFocusInHandler=function(e){var activeEditor=editorManager.activeEditor;if(activeEditor){getOriginalEventTarget(e).each(function(target){if(target.ownerDocument===document){if(target!==document.body&&!isUIElement(activeEditor,target)&&editorManager.focusedEditor===activeEditor){activeEditor.fire('blur',{focusedEditor:null});editorManager.focusedEditor=null;}}});}};DOM$8.bind(document,'focusin',documentFocusInHandler);}};var unregisterDocumentEvents=function(editorManager,e){if(editorManager.focusedEditor===e.editor){editorManager.focusedEditor=null;}if(!editorManager.activeEditor){DOM$8.unbind(document,'focusin',documentFocusInHandler);documentFocusInHandler=null;}};var setup$l=function(editorManager){editorManager.on('AddEditor',curry(registerEvents$1,editorManager));editorManager.on('RemoveEditor',curry(unregisterDocumentEvents,editorManager));};var getContentEditableHost=function(editor,node){return editor.dom.getParent(node,function(node){return editor.dom.getContentEditable(node)==='true';});};var getCollapsedNode=function(rng){return rng.collapsed?Optional.from(getNode$1(rng.startContainer,rng.startOffset)).map(SugarElement.fromDom):Optional.none();};var getFocusInElement=function(root,rng){return getCollapsedNode(rng).bind(function(node){if(isTableSection(node)){return Optional.some(node);}else if(contains$1(root,node)===false){return Optional.some(root);}else{return Optional.none();}});};var normalizeSelection$1=function(editor,rng){getFocusInElement(SugarElement.fromDom(editor.getBody()),rng).bind(function(elm){return firstPositionIn(elm.dom);}).fold(function(){editor.selection.normalize();return;},function(caretPos){return editor.selection.setRng(caretPos.toRange());});};var focusBody=function(body){if(body.setActive){try{body.setActive();}catch(ex){body.focus();}}else{body.focus();}};var hasElementFocus=function(elm){return hasFocus$1(elm)||search(elm).isSome();};var hasIframeFocus=function(editor){return editor.iframeElement&&hasFocus$1(SugarElement.fromDom(editor.iframeElement));};var hasInlineFocus=function(editor){var rawBody=editor.getBody();return rawBody&&hasElementFocus(SugarElement.fromDom(rawBody));};var hasUiFocus=function(editor){var dos=getRootNode(SugarElement.fromDom(editor.getElement()));return active(dos).filter(function(elem){return!isEditorContentAreaElement(elem.dom)&&isUIElement(editor,elem.dom);}).isSome();};var hasFocus=function(editor){return editor.inline?hasInlineFocus(editor):hasIframeFocus(editor);};var hasEditorOrUiFocus=function(editor){return hasFocus(editor)||hasUiFocus(editor);};var focusEditor=function(editor){var selection=editor.selection;var body=editor.getBody();var rng=selection.getRng();editor.quirks.refreshContentEditable();if(editor.bookmark!==undefined&&hasFocus(editor)===false){getRng(editor).each(function(bookmarkRng){editor.selection.setRng(bookmarkRng);rng=bookmarkRng;});}var contentEditableHost=getContentEditableHost(editor,selection.getNode());if(editor.$.contains(body,contentEditableHost)){focusBody(contentEditableHost);normalizeSelection$1(editor,rng);activateEditor(editor);return;}if(!editor.inline){if(!Env.opera){focusBody(body);}editor.getWin().focus();}if(Env.gecko||editor.inline){focusBody(body);normalizeSelection$1(editor,rng);}activateEditor(editor);};var activateEditor=function(editor){return editor.editorManager.setActive(editor);};var focus=function(editor,skipFocus){if(editor.removed){return;}if(skipFocus){activateEditor(editor);}else{focusEditor(editor);}};var getEndpointElement=function(root,rng,start,real,resolve){var container=start?rng.startContainer:rng.endContainer;var offset=start?rng.startOffset:rng.endOffset;return Optional.from(container).map(SugarElement.fromDom).map(function(elm){return!real||!rng.collapsed?child$1(elm,resolve(elm,offset)).getOr(elm):elm;}).bind(function(elm){return isElement$6(elm)?Optional.some(elm):parent(elm).filter(isElement$6);}).map(function(elm){return elm.dom;}).getOr(root);};var getStart=function(root,rng,real){return getEndpointElement(root,rng,true,real,function(elm,offset){return Math.min(childNodesCount(elm),offset);});};var getEnd=function(root,rng,real){return getEndpointElement(root,rng,false,real,function(elm,offset){return offset>0?offset-1:offset;});};var skipEmptyTextNodes=function(node,forwards){var orig=node;while(node&&isText$7(node)&&node.length===0){node=forwards?node.nextSibling:node.previousSibling;}return node||orig;};var getNode=function(root,rng){var elm,startContainer,endContainer;if(!rng){return root;}startContainer=rng.startContainer;endContainer=rng.endContainer;var startOffset=rng.startOffset;var endOffset=rng.endOffset;elm=rng.commonAncestorContainer;if(!rng.collapsed){if(startContainer===endContainer){if(endOffset-startOffset<2){if(startContainer.hasChildNodes()){elm=startContainer.childNodes[startOffset];}}}if(startContainer.nodeType===3&&endContainer.nodeType===3){if(startContainer.length===startOffset){startContainer=skipEmptyTextNodes(startContainer.nextSibling,true);}else{startContainer=startContainer.parentNode;}if(endOffset===0){endContainer=skipEmptyTextNodes(endContainer.previousSibling,false);}else{endContainer=endContainer.parentNode;}if(startContainer&&startContainer===endContainer){return startContainer;}}}if(elm&&elm.nodeType===3){return elm.parentNode;}return elm;};var getSelectedBlocks=function(dom,rng,startElm,endElm){var node;var selectedBlocks=[];var root=dom.getRoot();startElm=dom.getParent(startElm||getStart(root,rng,rng.collapsed),dom.isBlock);endElm=dom.getParent(endElm||getEnd(root,rng,rng.collapsed),dom.isBlock);if(startElm&&startElm!==root){selectedBlocks.push(startElm);}if(startElm&&endElm&&startElm!==endElm){node=startElm;var walker=new DomTreeWalker(startElm,root);while((node=walker.next())&&node!==endElm){if(dom.isBlock(node)){selectedBlocks.push(node);}}}if(endElm&&startElm!==endElm&&endElm!==root){selectedBlocks.push(endElm);}return selectedBlocks;};var select=function(dom,node,content){return Optional.from(node).map(function(node){var idx=dom.nodeIndex(node);var rng=dom.createRng();rng.setStart(node.parentNode,idx);rng.setEnd(node.parentNode,idx+1);if(content){moveEndPoint(dom,rng,node,true);moveEndPoint(dom,rng,node,false);}return rng;});};var processRanges=function(editor,ranges){return map$3(ranges,function(range){var evt=editor.fire('GetSelectionRange',{range:range});return evt.range!==range?evt.range:range;});};var typeLookup={'#text':3,'#comment':8,'#cdata':4,'#pi':7,'#doctype':10,'#document-fragment':11};var walk$1=function(node,root,prev){var startName=prev?'lastChild':'firstChild';var siblingName=prev?'prev':'next';if(node[startName]){return node[startName];}if(node!==root){var sibling=node[siblingName];if(sibling){return sibling;}for(var parent_1=node.parent;parent_1&&parent_1!==root;parent_1=parent_1.parent){sibling=parent_1[siblingName];if(sibling){return sibling;}}}};var isEmptyTextNode=function(node){if(!isWhitespaceText(node.value)){return false;}var parentNode=node.parent;if(parentNode&&(parentNode.name!=='span'||parentNode.attr('style'))&&/^[ ]+$/.test(node.value)){return false;}return true;};var isNonEmptyElement=function(node){var isNamedAnchor=node.name==='a'&&!node.attr('href')&&node.attr('id');return node.attr('name')||node.attr('id')&&!node.firstChild||node.attr('data-mce-bookmark')||isNamedAnchor;};var AstNode=function(){function AstNode(name,type){this.name=name;this.type=type;if(type===1){this.attributes=[];this.attributes.map={};}}AstNode.create=function(name,attrs){var node=new AstNode(name,typeLookup[name]||1);if(attrs){each$j(attrs,function(value,attrName){node.attr(attrName,value);});}return node;};AstNode.prototype.replace=function(node){var self=this;if(node.parent){node.remove();}self.insert(node,self);self.remove();return self;};AstNode.prototype.attr=function(name,value){var self=this;var attrs;if(typeof name!=='string'){if(name!==undefined&&name!==null){each$j(name,function(value,key){self.attr(key,value);});}return self;}if(attrs=self.attributes){if(value!==undefined){if(value===null){if(name in attrs.map){delete attrs.map[name];var i=attrs.length;while(i--){if(attrs[i].name===name){attrs.splice(i,1);return self;}}}return self;}if(name in attrs.map){var i=attrs.length;while(i--){if(attrs[i].name===name){attrs[i].value=value;break;}}}else{attrs.push({name:name,value:value});}attrs.map[name]=value;return self;}return attrs.map[name];}};AstNode.prototype.clone=function(){var self=this;var clone=new AstNode(self.name,self.type);var selfAttrs;if(selfAttrs=self.attributes){var cloneAttrs=[];cloneAttrs.map={};for(var i=0,l=selfAttrs.length;i<l;i++){var selfAttr=selfAttrs[i];if(selfAttr.name!=='id'){cloneAttrs[cloneAttrs.length]={name:selfAttr.name,value:selfAttr.value};cloneAttrs.map[selfAttr.name]=selfAttr.value;}}clone.attributes=cloneAttrs;}clone.value=self.value;clone.shortEnded=self.shortEnded;return clone;};AstNode.prototype.wrap=function(wrapper){var self=this;self.parent.insert(wrapper,self);wrapper.append(self);return self;};AstNode.prototype.unwrap=function(){var self=this;for(var node=self.firstChild;node;){var next=node.next;self.insert(node,self,true);node=next;}self.remove();};AstNode.prototype.remove=function(){var self=this,parent=self.parent,next=self.next,prev=self.prev;if(parent){if(parent.firstChild===self){parent.firstChild=next;if(next){next.prev=null;}}else{prev.next=next;}if(parent.lastChild===self){parent.lastChild=prev;if(prev){prev.next=null;}}else{next.prev=prev;}self.parent=self.next=self.prev=null;}return self;};AstNode.prototype.append=function(node){var self=this;if(node.parent){node.remove();}var last=self.lastChild;if(last){last.next=node;node.prev=last;self.lastChild=node;}else{self.lastChild=self.firstChild=node;}node.parent=self;return node;};AstNode.prototype.insert=function(node,refNode,before){if(node.parent){node.remove();}var parent=refNode.parent||this;if(before){if(refNode===parent.firstChild){parent.firstChild=node;}else{refNode.prev.next=node;}node.prev=refNode.prev;node.next=refNode;refNode.prev=node;}else{if(refNode===parent.lastChild){parent.lastChild=node;}else{refNode.next.prev=node;}node.next=refNode.next;node.prev=refNode;refNode.next=node;}node.parent=parent;return node;};AstNode.prototype.getAll=function(name){var self=this;var collection=[];for(var node=self.firstChild;node;node=walk$1(node,self)){if(node.name===name){collection.push(node);}}return collection;};AstNode.prototype.children=function(){var self=this;var collection=[];for(var node=self.firstChild;node;node=node.next){collection.push(node);}return collection;};AstNode.prototype.empty=function(){var self=this;if(self.firstChild){var nodes=[];for(var node=self.firstChild;node;node=walk$1(node,self)){nodes.push(node);}var i=nodes.length;while(i--){var node=nodes[i];node.parent=node.firstChild=node.lastChild=node.next=node.prev=null;}}self.firstChild=self.lastChild=null;return self;};AstNode.prototype.isEmpty=function(elements,whitespace,predicate){if(whitespace===void 0){whitespace={};}var self=this;var node=self.firstChild;if(isNonEmptyElement(self)){return false;}if(node){do{if(node.type===1){if(node.attr('data-mce-bogus')){continue;}if(elements[node.name]){return false;}if(isNonEmptyElement(node)){return false;}}if(node.type===8){return false;}if(node.type===3&&!isEmptyTextNode(node)){return false;}if(node.type===3&&node.parent&&whitespace[node.parent.name]&&isWhitespaceText(node.value)){return false;}if(predicate&&predicate(node)){return false;}}while(node=walk$1(node,self));}return true;};AstNode.prototype.walk=function(prev){return walk$1(this,null,prev);};return AstNode;}();var extractBase64DataUris=function(html){var dataImageUri=/data:[^;<\"'\\s]+;base64,([a-z0-9\\+\\/=\\s]+)/gi;var chunks=[];var uris={};var prefix=generate('img');var matches;var index=0;var count=0;while(matches=dataImageUri.exec(html)){var uri=matches[0];var imageId=prefix+'_'+count++;uris[imageId]=uri;if(index<matches.index){chunks.push(html.substr(index,matches.index-index));}chunks.push(imageId);index=matches.index+uri.length;}var re=new RegExp(prefix+'_[0-9]+','g');if(index===0){return{prefix:prefix,uris:uris,html:html,re:re};}else{if(index<html.length){chunks.push(html.substr(index));}return{prefix:prefix,uris:uris,html:chunks.join(''),re:re};}};var restoreDataUris=function(html,result){return html.replace(result.re,function(imageId){return get$9(result.uris,imageId).getOr(imageId);});};var parseDataUri$1=function(uri){var matches=/data:([^;]+);base64,([a-z0-9\\+\\/=\\s]+)/i.exec(uri);if(matches){return Optional.some({type:matches[1],data:decodeURIComponent(matches[2])});}else{return Optional.none();}};var each$d=Tools.each,trim=Tools.trim;var queryParts='source protocol authority userInfo user password host port relative path directory file query anchor'.split(' ');var DEFAULT_PORTS={ftp:21,http:80,https:443,mailto:25};var safeSvgDataUrlElements=['img','video'];var blockSvgDataUris=function(allowSvgDataUrls,tagName){if(isNonNullable(allowSvgDataUrls)){return!allowSvgDataUrls;}else{return isNonNullable(tagName)?!contains$3(safeSvgDataUrlElements,tagName):true;}};var isInvalidUri=function(settings,uri,tagName){if(settings.allow_html_data_urls){return false;}else if(/^data:image\\//i.test(uri)){return blockSvgDataUris(settings.allow_svg_data_urls,tagName)&&/^data:image\\/svg\\+xml/i.test(uri);}else{return /^data:/i.test(uri);}};var URI=function(){function URI(url,settings){url=trim(url);this.settings=settings||{};var baseUri=this.settings.base_uri;var self=this;if(/^([\\w\\-]+):([^\\/]{2})/i.test(url)||/^\\s*#/.test(url)){self.source=url;return;}var isProtocolRelative=url.indexOf('//')===0;if(url.indexOf('/')===0&&!isProtocolRelative){url=(baseUri?baseUri.protocol||'http':'http')+'://mce_host'+url;}if(!/^[\\w\\-]*:?\\/\\//.test(url)){var baseUrl=this.settings.base_uri?this.settings.base_uri.path:new URI(document.location.href).directory;if(this.settings.base_uri&&this.settings.base_uri.protocol==''){url='//mce_host'+self.toAbsPath(baseUrl,url);}else{var match=/([^#?]*)([#?]?.*)/.exec(url);url=(baseUri&&baseUri.protocol||'http')+'://mce_host'+self.toAbsPath(baseUrl,match[1])+match[2];}}url=url.replace(/@@/g,'(mce_at)');var urlMatch=/^(?:(?![^:@]+:[^:@\\/]*@)([^:\\/?#.]+):)?(?:\\/\\/)?((?:(([^:@\\/]*):?([^:@\\/]*))?@)?(\\[[a-zA-Z0-9:.%]+\\]|[^:\\/?#]*)(?::(\\d*))?)(((\\/(?:[^?#](?![^?#\\/]*\\.[^?#\\/.]+(?:[?#]|$)))*\\/?)?([^?#\\/]*))(?:\\?([^#]*))?(?:#(.*))?)/.exec(url);each$d(queryParts,function(v,i){var part=urlMatch[i];if(part){part=part.replace(/\\(mce_at\\)/g,'@@');}self[v]=part;});if(baseUri){if(!self.protocol){self.protocol=baseUri.protocol;}if(!self.userInfo){self.userInfo=baseUri.userInfo;}if(!self.port&&self.host==='mce_host'){self.port=baseUri.port;}if(!self.host||self.host==='mce_host'){self.host=baseUri.host;}self.source='';}if(isProtocolRelative){self.protocol='';}}URI.parseDataUri=function(uri){var type;var uriComponents=decodeURIComponent(uri).split(',');var matches=/data:([^;]+)/.exec(uriComponents[0]);if(matches){type=matches[1];}return{type:type,data:uriComponents[1]};};URI.isDomSafe=function(uri,context,options){if(options===void 0){options={};}if(options.allow_script_urls){return true;}else{var decodedUri=Entities.decode(uri).replace(/[\\s\\u0000-\\u001F]+/g,'');try{decodedUri=decodeURIComponent(decodedUri);}catch(ex){decodedUri=unescape(decodedUri);}if(/((java|vb)script|mhtml):/i.test(decodedUri)){return false;}return!isInvalidUri(options,decodedUri,context);}};URI.getDocumentBaseUrl=function(loc){var baseUrl;if(loc.protocol.indexOf('http')!==0&&loc.protocol!=='file:'){baseUrl=loc.href;}else{baseUrl=loc.protocol+'//'+loc.host+loc.pathname;}if(/^[^:]+:\\/\\/\\/?[^\\/]+\\//.test(baseUrl)){baseUrl=baseUrl.replace(/[\\?#].*$/,'').replace(/[\\/\\\\][^\\/]+$/,'');if(!/[\\/\\\\]$/.test(baseUrl)){baseUrl+='/';}}return baseUrl;};URI.prototype.setPath=function(path){var pathMatch=/^(.*?)\\/?(\\w+)?$/.exec(path);this.path=pathMatch[0];this.directory=pathMatch[1];this.file=pathMatch[2];this.source='';this.getURI();};URI.prototype.toRelative=function(uri){var output;if(uri==='./'){return uri;}var relativeUri=new URI(uri,{base_uri:this});if(relativeUri.host!=='mce_host'&&this.host!==relativeUri.host&&relativeUri.host||this.port!==relativeUri.port||this.protocol!==relativeUri.protocol&&relativeUri.protocol!==''){return relativeUri.getURI();}var tu=this.getURI(),uu=relativeUri.getURI();if(tu===uu||tu.charAt(tu.length-1)==='/'&&tu.substr(0,tu.length-1)===uu){return tu;}output=this.toRelPath(this.path,relativeUri.path);if(relativeUri.query){output+='?'+relativeUri.query;}if(relativeUri.anchor){output+='#'+relativeUri.anchor;}return output;};URI.prototype.toAbsolute=function(uri,noHost){var absoluteUri=new URI(uri,{base_uri:this});return absoluteUri.getURI(noHost&&this.isSameOrigin(absoluteUri));};URI.prototype.isSameOrigin=function(uri){if(this.host==uri.host&&this.protocol==uri.protocol){if(this.port==uri.port){return true;}var defaultPort=DEFAULT_PORTS[this.protocol];if(defaultPort&&(this.port||defaultPort)==(uri.port||defaultPort)){return true;}}return false;};URI.prototype.toRelPath=function(base,path){var breakPoint=0,out='',i,l;var normalizedBase=base.substring(0,base.lastIndexOf('/')).split('/');var items=path.split('/');if(normalizedBase.length>=items.length){for(i=0,l=normalizedBase.length;i<l;i++){if(i>=items.length||normalizedBase[i]!==items[i]){breakPoint=i+1;break;}}}if(normalizedBase.length<items.length){for(i=0,l=items.length;i<l;i++){if(i>=normalizedBase.length||normalizedBase[i]!==items[i]){breakPoint=i+1;break;}}}if(breakPoint===1){return path;}for(i=0,l=normalizedBase.length-(breakPoint-1);i<l;i++){out+='../';}for(i=breakPoint-1,l=items.length;i<l;i++){if(i!==breakPoint-1){out+='/'+items[i];}else{out+=items[i];}}return out;};URI.prototype.toAbsPath=function(base,path){var i,nb=0,o=[],outPath;var tr=/\\/$/.test(path)?'/':'';var normalizedBase=base.split('/');var normalizedPath=path.split('/');each$d(normalizedBase,function(k){if(k){o.push(k);}});normalizedBase=o;for(i=normalizedPath.length-1,o=[];i>=0;i--){if(normalizedPath[i].length===0||normalizedPath[i]==='.'){continue;}if(normalizedPath[i]==='..'){nb++;continue;}if(nb>0){nb--;continue;}o.push(normalizedPath[i]);}i=normalizedBase.length-nb;if(i<=0){outPath=reverse(o).join('/');}else{outPath=normalizedBase.slice(0,i).join('/')+'/'+reverse(o).join('/');}if(outPath.indexOf('/')!==0){outPath='/'+outPath;}if(tr&&outPath.lastIndexOf('/')!==outPath.length-1){outPath+=tr;}return outPath;};URI.prototype.getURI=function(noProtoHost){if(noProtoHost===void 0){noProtoHost=false;}var s;if(!this.source||noProtoHost){s='';if(!noProtoHost){if(this.protocol){s+=this.protocol+'://';}else{s+='//';}if(this.userInfo){s+=this.userInfo+'@';}if(this.host){s+=this.host;}if(this.port){s+=':'+this.port;}}if(this.path){s+=this.path;}if(this.query){s+='?'+this.query;}if(this.anchor){s+='#'+this.anchor;}this.source=s;}return this.source;};return URI;}();var filteredClobberElements=Tools.makeMap('button,fieldset,form,iframe,img,image,input,object,output,select,textarea');var isValidPrefixAttrName=function(name){return name.indexOf('data-')===0||name.indexOf('aria-')===0;};var lazyTempDocument$1=cached(function(){return document.implementation.createHTMLDocument('parser');});var findMatchingEndTagIndex=function(schema,html,startIndex){var startTagRegExp=/<([!?\\/])?([A-Za-z0-9\\-_:.]+)/g;var endTagRegExp=/(?:\\s(?:[^'\">]+(?:\"[^\"]*\"|'[^']*'))*[^\"'>]*(?:\"[^\">]*|'[^'>]*)?|\\s*|\\/)>/g;var shortEndedElements=schema.getShortEndedElements();var count=1,index=startIndex;while(count!==0){startTagRegExp.lastIndex=index;while(true){var startMatch=startTagRegExp.exec(html);if(startMatch===null){return index;}else if(startMatch[1]==='!'){if(startsWith(startMatch[2],'--')){index=findCommentEndIndex(html,false,startMatch.index+'!--'.length);}else{index=findCommentEndIndex(html,true,startMatch.index+1);}break;}else{endTagRegExp.lastIndex=startTagRegExp.lastIndex;var endMatch=endTagRegExp.exec(html);if(isNull(endMatch)||endMatch.index!==startTagRegExp.lastIndex){continue;}if(startMatch[1]==='/'){count-=1;}else if(!has$2(shortEndedElements,startMatch[2])){count+=1;}index=startTagRegExp.lastIndex+endMatch[0].length;break;}}}return index;};var isConditionalComment=function(html,startIndex){return /^\\s*\\[if [\\w\\W]+\\]>.*<!\\[endif\\](--!?)?>/.test(html.substr(startIndex));};var findCommentEndIndex=function(html,isBogus,startIndex){if(startIndex===void 0){startIndex=0;}var lcHtml=html.toLowerCase();if(lcHtml.indexOf('[if ',startIndex)!==-1&&isConditionalComment(lcHtml,startIndex)){var endIfIndex=lcHtml.indexOf('[endif]',startIndex);return lcHtml.indexOf('>',endIfIndex);}else{if(isBogus){var endIndex=lcHtml.indexOf('>',startIndex);return endIndex!==-1?endIndex:lcHtml.length;}else{var endCommentRegexp=/--!?>/g;endCommentRegexp.lastIndex=startIndex;var match=endCommentRegexp.exec(html);return match?match.index+match[0].length:lcHtml.length;}}};var checkBogusAttribute=function(regExp,attrString){var matches=regExp.exec(attrString);if(matches){var name_1=matches[1];var value=matches[2];return typeof name_1==='string'&&name_1.toLowerCase()==='data-mce-bogus'?value:null;}else{return null;}};var SaxParser=function(settings,schema){if(schema===void 0){schema=Schema();}settings=settings||{};var doc=lazyTempDocument$1();var form=doc.createElement('form');if(settings.fix_self_closing!==false){settings.fix_self_closing=true;}var comment=settings.comment?settings.comment:noop;var cdata=settings.cdata?settings.cdata:noop;var text=settings.text?settings.text:noop;var start=settings.start?settings.start:noop;var end=settings.end?settings.end:noop;var pi=settings.pi?settings.pi:noop;var doctype=settings.doctype?settings.doctype:noop;var parseInternal=function(base64Extract,format){if(format===void 0){format='html';}var html=base64Extract.html;var matches,index=0,value,endRegExp;var stack=[];var attrList,i,textData,name;var isInternalElement,isShortEnded;var elementRule,isValidElement,attr,attribsValue,validAttributesMap,validAttributePatterns;var attributesRequired,attributesDefault,attributesForced;var anyAttributesRequired,attrValue,idCount=0;var decode=Entities.decode;var filteredUrlAttrs=Tools.makeMap('src,href,data,background,action,formaction,poster,xlink:href');var parsingMode=format==='html'?0:1;var processEndTag=function(name){var pos,i;pos=stack.length;while(pos--){if(stack[pos].name===name){break;}}if(pos>=0){for(i=stack.length-1;i>=pos;i--){name=stack[i];if(name.valid){end(name.name);}}stack.length=pos;}};var processText=function(value,raw){return text(restoreDataUris(value,base64Extract),raw);};var processComment=function(value){if(value===''){return;}if(value.charAt(0)==='>'){value=' '+value;}if(!settings.allow_conditional_comments&&value.substr(0,3).toLowerCase()==='[if'){value=' '+value;}comment(restoreDataUris(value,base64Extract));};var processAttr=function(value){return restoreDataUris(value,base64Extract);};var processMalformedComment=function(value,startIndex){var startTag=value||'';var isBogus=!startsWith(startTag,'--');var endIndex=findCommentEndIndex(html,isBogus,startIndex);value=html.substr(startIndex,endIndex-startIndex);processComment(isBogus?startTag+value:value);return endIndex+1;};var parseAttribute=function(tagName,name,value,val2,val3){name=name.toLowerCase();value=processAttr(name in fillAttrsMap?name:decode(value||val2||val3||''));if(validate&&!isInternalElement&&isValidPrefixAttrName(name)===false){var attrRule=validAttributesMap[name];if(!attrRule&&validAttributePatterns){var i_1=validAttributePatterns.length;while(i_1--){attrRule=validAttributePatterns[i_1];if(attrRule.pattern.test(name)){break;}}if(i_1===-1){attrRule=null;}}if(!attrRule){return;}if(attrRule.validValues&&!(value in attrRule.validValues)){return;}}var isNameOrId=name==='name'||name==='id';if(isNameOrId&&tagName in filteredClobberElements&&(value in doc||value in form)){return;}if(filteredUrlAttrs[name]&&!URI.isDomSafe(value,tagName,settings)){return;}if(isInternalElement&&(name in filteredUrlAttrs||name.indexOf('on')===0)){return;}attrList.map[name]=value;attrList.push({name:name,value:value});};var tokenRegExp=new RegExp('<(?:'+'(?:!--([\\\\w\\\\W]*?)--!?>)|'+'(?:!\\\\[CDATA\\\\[([\\\\w\\\\W]*?)\\\\]\\\\]>)|'+'(?:![Dd][Oo][Cc][Tt][Yy][Pp][Ee]([\\\\w\\\\W]*?)>)|'+'(?:!(--)?)|'+'(?:\\\\?([^\\\\s\\\\/<>]+) ?([\\\\w\\\\W]*?)[?/]>)|'+'(?:\\\\/([A-Za-z][A-Za-z0-9\\\\-_\\\\:\\\\.]*)>)|'+'(?:([A-Za-z][A-Za-z0-9\\\\-_:.]*)(\\\\s(?:[^\\'\">]+(?:\"[^\"]*\"|\\'[^\\']*\\'))*[^\"\\'>]*(?:\"[^\">]*|\\'[^\\'>]*)?|\\\\s*|\\\\/)>)'+')','g');var attrRegExp=/([\\w:\\-]+)(?:\\s*=\\s*(?:(?:\\\"((?:[^\\\"])*)\\\")|(?:\\'((?:[^\\'])*)\\')|([^>\\s]+)))?/g;var shortEndedElements=schema.getShortEndedElements();var selfClosing=settings.self_closing_elements||schema.getSelfClosingElements();var fillAttrsMap=schema.getBoolAttrs();var validate=settings.validate;var removeInternalElements=settings.remove_internals;var fixSelfClosing=settings.fix_self_closing;var specialElements=schema.getSpecialElements();var processHtml=html+'>';while(matches=tokenRegExp.exec(processHtml)){var matchText=matches[0];if(index<matches.index){processText(decode(html.substr(index,matches.index-index)));}if(value=matches[7]){value=value.toLowerCase();if(value.charAt(0)===':'){value=value.substr(1);}processEndTag(value);}else if(value=matches[8]){if(matches.index+matchText.length>html.length){processText(decode(html.substr(matches.index)));index=matches.index+matchText.length;continue;}value=value.toLowerCase();if(value.charAt(0)===':'){value=value.substr(1);}isShortEnded=value in shortEndedElements;if(fixSelfClosing&&selfClosing[value]&&stack.length>0&&stack[stack.length-1].name===value){processEndTag(value);}var bogusValue=checkBogusAttribute(attrRegExp,matches[9]);if(bogusValue!==null){if(bogusValue==='all'){index=findMatchingEndTagIndex(schema,html,tokenRegExp.lastIndex);tokenRegExp.lastIndex=index;continue;}isValidElement=false;}if(!validate||(elementRule=schema.getElementRule(value))){isValidElement=true;if(validate){validAttributesMap=elementRule.attributes;validAttributePatterns=elementRule.attributePatterns;}if(attribsValue=matches[9]){isInternalElement=attribsValue.indexOf('data-mce-type')!==-1;if(isInternalElement&&removeInternalElements){isValidElement=false;}attrList=[];attrList.map={};attribsValue.replace(attrRegExp,function(match,name,val,val2,val3){parseAttribute(value,name,val,val2,val3);return'';});}else{attrList=[];attrList.map={};}if(validate&&!isInternalElement){attributesRequired=elementRule.attributesRequired;attributesDefault=elementRule.attributesDefault;attributesForced=elementRule.attributesForced;anyAttributesRequired=elementRule.removeEmptyAttrs;if(anyAttributesRequired&&!attrList.length){isValidElement=false;}if(attributesForced){i=attributesForced.length;while(i--){attr=attributesForced[i];name=attr.name;attrValue=attr.value;if(attrValue==='{$uid}'){attrValue='mce_'+idCount++;}attrList.map[name]=attrValue;attrList.push({name:name,value:attrValue});}}if(attributesDefault){i=attributesDefault.length;while(i--){attr=attributesDefault[i];name=attr.name;if(!(name in attrList.map)){attrValue=attr.value;if(attrValue==='{$uid}'){attrValue='mce_'+idCount++;}attrList.map[name]=attrValue;attrList.push({name:name,value:attrValue});}}}if(attributesRequired){i=attributesRequired.length;while(i--){if(attributesRequired[i]in attrList.map){break;}}if(i===-1){isValidElement=false;}}if(attr=attrList.map['data-mce-bogus']){if(attr==='all'){index=findMatchingEndTagIndex(schema,html,tokenRegExp.lastIndex);tokenRegExp.lastIndex=index;continue;}isValidElement=false;}}if(isValidElement){start(value,attrList,isShortEnded);}}else{isValidElement=false;}if(endRegExp=specialElements[value]){endRegExp.lastIndex=index=matches.index+matchText.length;if(matches=endRegExp.exec(html)){if(isValidElement){textData=html.substr(index,matches.index-index);}index=matches.index+matches[0].length;}else{textData=html.substr(index);index=html.length;}if(isValidElement){if(textData.length>0){processText(textData,true);}end(value);}tokenRegExp.lastIndex=index;continue;}if(!isShortEnded){if(!attribsValue||attribsValue.indexOf('/')!==attribsValue.length-1){stack.push({name:value,valid:isValidElement});}else if(isValidElement){end(value);}}}else if(value=matches[1]){processComment(value);}else if(value=matches[2]){var isValidCdataSection=parsingMode===1||settings.preserve_cdata||stack.length>0&&schema.isValidChild(stack[stack.length-1].name,'#cdata');if(isValidCdataSection){cdata(value);}else{index=processMalformedComment('',matches.index+2);tokenRegExp.lastIndex=index;continue;}}else if(value=matches[3]){doctype(value);}else if((value=matches[4])||matchText==='<!'){index=processMalformedComment(value,matches.index+matchText.length);tokenRegExp.lastIndex=index;continue;}else if(value=matches[5]){if(parsingMode===1){pi(value,matches[6]);}else{index=processMalformedComment('?',matches.index+2);tokenRegExp.lastIndex=index;continue;}}index=matches.index+matchText.length;}if(index<html.length){processText(decode(html.substr(index)));}for(i=stack.length-1;i>=0;i--){value=stack[i];if(value.valid){end(value.name);}}};var parse=function(html,format){if(format===void 0){format='html';}parseInternal(extractBase64DataUris(html),format);};return{parse:parse};};SaxParser.findEndTag=findMatchingEndTagIndex;var trimHtml=function(tempAttrs,html){var trimContentRegExp=new RegExp(['\\\\s?('+tempAttrs.join('|')+')=\"[^\"]+\"'].join('|'),'gi');return html.replace(trimContentRegExp,'');};var trimInternal=function(serializer,html){var bogusAllRegExp=/<(\\w+) [^>]*data-mce-bogus=\"all\"[^>]*>/g;var schema=serializer.schema;var content=trimHtml(serializer.getTempAttrs(),html);var shortEndedElements=schema.getShortEndedElements();var matches;while(matches=bogusAllRegExp.exec(content)){var index=bogusAllRegExp.lastIndex;var matchLength=matches[0].length;var endTagIndex=void 0;if(shortEndedElements[matches[1]]){endTagIndex=index;}else{endTagIndex=SaxParser.findEndTag(schema,content,index);}content=content.substring(0,index-matchLength)+content.substring(endTagIndex);bogusAllRegExp.lastIndex=index-matchLength;}return trim$2(content);};var trimExternal=trimInternal;var trimEmptyContents=function(editor,html){var blockName=getForcedRootBlock(editor);var emptyRegExp=new RegExp('^(<'+blockName+'[^>]*>(&nbsp;|&#160;|\\\\s|\\xA0|<br \\\\/>|)<\\\\/'+blockName+'>[\\r\\n]*|<br \\\\/>[\\r\\n]*)$');return html.replace(emptyRegExp,'');};var setupArgs$3=function(args,format){return __assign(__assign({},args),{format:format,get:true,getInner:true});};var getContentFromBody=function(editor,args,format,body){var defaultedArgs=setupArgs$3(args,format);var updatedArgs=args.no_events?defaultedArgs:editor.fire('BeforeGetContent',defaultedArgs);var content;if(updatedArgs.format==='raw'){content=Tools.trim(trimExternal(editor.serializer,body.innerHTML));}else if(updatedArgs.format==='text'){content=editor.dom.isEmpty(body)?'':trim$2(body.innerText||body.textContent);}else if(updatedArgs.format==='tree'){content=editor.serializer.serialize(body,updatedArgs);}else{content=trimEmptyContents(editor,editor.serializer.serialize(body,updatedArgs));}if(!contains$3(['text','tree'],updatedArgs.format)&&!isWsPreserveElement(SugarElement.fromDom(body))){updatedArgs.content=Tools.trim(content);}else{updatedArgs.content=content;}if(updatedArgs.no_events){return updatedArgs.content;}else{return editor.fire('GetContent',updatedArgs).content;}};var getContentInternal=function(editor,args,format){return Optional.from(editor.getBody()).fold(constant(args.format==='tree'?new AstNode('body',11):''),function(body){return getContentFromBody(editor,args,format,body);});};var each$c=Tools.each;var ElementUtils=function(dom){var compare=function(node1,node2){if(node1.nodeName!==node2.nodeName){return false;}var getAttribs=function(node){var attribs={};each$c(dom.getAttribs(node),function(attr){var name=attr.nodeName.toLowerCase();if(name.indexOf('_')!==0&&name!=='style'&&name.indexOf('data-')!==0){attribs[name]=dom.getAttrib(node,name);}});return attribs;};var compareObjects=function(obj1,obj2){var value,name;for(name in obj1){if(has$2(obj1,name)){value=obj2[name];if(typeof value==='undefined'){return false;}if(obj1[name]!==value){return false;}delete obj2[name];}}for(name in obj2){if(has$2(obj2,name)){return false;}}return true;};if(!compareObjects(getAttribs(node1),getAttribs(node2))){return false;}if(!compareObjects(dom.parseStyle(dom.getAttrib(node1,'style')),dom.parseStyle(dom.getAttrib(node2,'style')))){return false;}return!isBookmarkNode$1(node1)&&!isBookmarkNode$1(node2);};return{compare:compare};};var makeMap$1=Tools.makeMap;var Writer=function(settings){var html=[];settings=settings||{};var indent=settings.indent;var indentBefore=makeMap$1(settings.indent_before||'');var indentAfter=makeMap$1(settings.indent_after||'');var encode=Entities.getEncodeFunc(settings.entity_encoding||'raw',settings.entities);var htmlOutput=settings.element_format==='html';return{start:function(name,attrs,empty){var i,l,attr,value;if(indent&&indentBefore[name]&&html.length>0){value=html[html.length-1];if(value.length>0&&value!=='\\n'){html.push('\\n');}}html.push('<',name);if(attrs){for(i=0,l=attrs.length;i<l;i++){attr=attrs[i];html.push(' ',attr.name,'=\"',encode(attr.value,true),'\"');}}if(!empty||htmlOutput){html[html.length]='>';}else{html[html.length]=' />';}if(empty&&indent&&indentAfter[name]&&html.length>0){value=html[html.length-1];if(value.length>0&&value!=='\\n'){html.push('\\n');}}},end:function(name){var value;html.push('</',name,'>');if(indent&&indentAfter[name]&&html.length>0){value=html[html.length-1];if(value.length>0&&value!=='\\n'){html.push('\\n');}}},text:function(text,raw){if(text.length>0){html[html.length]=raw?text:encode(text);}},cdata:function(text){html.push('<![CDATA[',text,']]>');},comment:function(text){html.push('<!--',text,'-->');},pi:function(name,text){if(text){html.push('<?',name,' ',encode(text),'?>');}else{html.push('<?',name,'?>');}if(indent){html.push('\\n');}},doctype:function(text){html.push('<!DOCTYPE',text,'>',indent?'\\n':'');},reset:function(){html.length=0;},getContent:function(){return html.join('').replace(/\\n$/,'');}};};var HtmlSerializer=function(settings,schema){if(schema===void 0){schema=Schema();}var writer=Writer(settings);settings=settings||{};settings.validate='validate'in settings?settings.validate:true;var serialize=function(node){var validate=settings.validate;var handlers={3:function(node){writer.text(node.value,node.raw);},8:function(node){writer.comment(node.value);},7:function(node){writer.pi(node.name,node.value);},10:function(node){writer.doctype(node.value);},4:function(node){writer.cdata(node.value);},11:function(node){if(node=node.firstChild){do{walk(node);}while(node=node.next);}}};writer.reset();var walk=function(node){var handler=handlers[node.type];if(!handler){var name_1=node.name;var isEmpty=node.shortEnded;var attrs=node.attributes;if(validate&&attrs&&attrs.length>1){var sortedAttrs=[];sortedAttrs.map={};var elementRule=schema.getElementRule(node.name);if(elementRule){for(var i=0,l=elementRule.attributesOrder.length;i<l;i++){var attrName=elementRule.attributesOrder[i];if(attrName in attrs.map){var attrValue=attrs.map[attrName];sortedAttrs.map[attrName]=attrValue;sortedAttrs.push({name:attrName,value:attrValue});}}for(var i=0,l=attrs.length;i<l;i++){var attrName=attrs[i].name;if(!(attrName in sortedAttrs.map)){var attrValue=attrs.map[attrName];sortedAttrs.map[attrName]=attrValue;sortedAttrs.push({name:attrName,value:attrValue});}}attrs=sortedAttrs;}}writer.start(node.name,attrs,isEmpty);if(!isEmpty){if(node=node.firstChild){do{walk(node);}while(node=node.next);}writer.end(name_1);}}else{handler(node);}};if(node.type===1&&!settings.inner){walk(node);}else{handlers[11](node);}return writer.getContent();};return{serialize:serialize};};var nonInheritableStyles=new Set();(function(){var nonInheritableStylesArr=['margin','margin-left','margin-right','margin-top','margin-bottom','padding','padding-left','padding-right','padding-top','padding-bottom','border','border-width','border-style','border-color','background','background-attachment','background-clip','background-color','background-image','background-origin','background-position','background-repeat','background-size','float','position','left','right','top','bottom','z-index','display','transform','width','max-width','min-width','height','max-height','min-height','overflow','overflow-x','overflow-y','text-overflow','vertical-align','transition','transition-delay','transition-duration','transition-property','transition-timing-function'];each$k(nonInheritableStylesArr,function(style){nonInheritableStyles.add(style);});})();var shorthandStyleProps=['font','text-decoration','text-emphasis'];var getStyleProps=function(dom,node){return keys(dom.parseStyle(dom.getAttrib(node,'style')));};var isNonInheritableStyle=function(style){return nonInheritableStyles.has(style);};var hasInheritableStyles=function(dom,node){return forall(getStyleProps(dom,node),function(style){return!isNonInheritableStyle(style);});};var getLonghandStyleProps=function(styles){return filter$4(styles,function(style){return exists(shorthandStyleProps,function(prop){return startsWith(style,prop);});});};var hasStyleConflict=function(dom,node,parentNode){var nodeStyleProps=getStyleProps(dom,node);var parentNodeStyleProps=getStyleProps(dom,parentNode);var valueMismatch=function(prop){var nodeValue=dom.getStyle(node,prop);var parentValue=dom.getStyle(parentNode,prop);return isNotEmpty(nodeValue)&&isNotEmpty(parentValue)&&nodeValue!==parentValue;};return exists(nodeStyleProps,function(nodeStyleProp){var propExists=function(props){return exists(props,function(prop){return prop===nodeStyleProp;});};if(!propExists(parentNodeStyleProps)&&propExists(shorthandStyleProps)){var longhandProps=getLonghandStyleProps(parentNodeStyleProps);return exists(longhandProps,valueMismatch);}else{return valueMismatch(nodeStyleProp);}});};var isChar=function(forward,predicate,pos){return Optional.from(pos.container()).filter(isText$7).exists(function(text){var delta=forward?0:-1;return predicate(text.data.charAt(pos.offset()+delta));});};var isBeforeSpace=curry(isChar,true,isWhiteSpace);var isAfterSpace=curry(isChar,false,isWhiteSpace);var isEmptyText=function(pos){var container=pos.container();return isText$7(container)&&(container.data.length===0||isZwsp(container.data)&&BookmarkManager.isBookmarkNode(container.parentNode));};var matchesElementPosition=function(before,predicate){return function(pos){return Optional.from(getChildNodeAtRelativeOffset(before?0:-1,pos)).filter(predicate).isSome();};};var isImageBlock=function(node){return isImg(node)&&get$5(SugarElement.fromDom(node),'display')==='block';};var isCefNode=function(node){return isContentEditableFalse$b(node)&&!isBogusAll$1(node);};var isBeforeImageBlock=matchesElementPosition(true,isImageBlock);var isAfterImageBlock=matchesElementPosition(false,isImageBlock);var isBeforeMedia=matchesElementPosition(true,isMedia$2);var isAfterMedia=matchesElementPosition(false,isMedia$2);var isBeforeTable=matchesElementPosition(true,isTable$3);var isAfterTable=matchesElementPosition(false,isTable$3);var isBeforeContentEditableFalse=matchesElementPosition(true,isCefNode);var isAfterContentEditableFalse=matchesElementPosition(false,isCefNode);var getLastChildren=function(elm){var children=[];var rawNode=elm.dom;while(rawNode){children.push(SugarElement.fromDom(rawNode));rawNode=rawNode.lastChild;}return children;};var removeTrailingBr=function(elm){var allBrs=descendants(elm,'br');var brs=filter$4(getLastChildren(elm).slice(-1),isBr$4);if(allBrs.length===brs.length){each$k(brs,remove$7);}};var fillWithPaddingBr=function(elm){empty(elm);append$1(elm,SugarElement.fromHtml('<br data-mce-bogus=\"1\">'));};var trimBlockTrailingBr=function(elm){lastChild(elm).each(function(lastChild){prevSibling(lastChild).each(function(lastChildPrevSibling){if(isBlock$2(elm)&&isBr$4(lastChild)&&isBlock$2(lastChildPrevSibling)){remove$7(lastChild);}});});};var dropLast=function(xs){return xs.slice(0,-1);};var parentsUntil=function(start,root,predicate){if(contains$1(root,start)){return dropLast(parents$1(start,function(elm){return predicate(elm)||eq(elm,root);}));}else{return[];}};var parents=function(start,root){return parentsUntil(start,root,never);};var parentsAndSelf=function(start,root){return[start].concat(parents(start,root));};var navigateIgnoreEmptyTextNodes=function(forward,root,from){return navigateIgnore(forward,root,from,isEmptyText);};var getClosestBlock$1=function(root,pos){return find$3(parentsAndSelf(SugarElement.fromDom(pos.container()),root),isBlock$2);};var isAtBeforeAfterBlockBoundary=function(forward,root,pos){return navigateIgnoreEmptyTextNodes(forward,root.dom,pos).forall(function(newPos){return getClosestBlock$1(root,pos).fold(function(){return isInSameBlock(newPos,pos,root.dom)===false;},function(fromBlock){return isInSameBlock(newPos,pos,root.dom)===false&&contains$1(fromBlock,SugarElement.fromDom(newPos.container()));});});};var isAtBlockBoundary=function(forward,root,pos){return getClosestBlock$1(root,pos).fold(function(){return navigateIgnoreEmptyTextNodes(forward,root.dom,pos).forall(function(newPos){return isInSameBlock(newPos,pos,root.dom)===false;});},function(parent){return navigateIgnoreEmptyTextNodes(forward,parent.dom,pos).isNone();});};var isAtStartOfBlock=curry(isAtBlockBoundary,false);var isAtEndOfBlock=curry(isAtBlockBoundary,true);var isBeforeBlock=curry(isAtBeforeAfterBlockBoundary,false);var isAfterBlock=curry(isAtBeforeAfterBlockBoundary,true);var isBr=function(pos){return getElementFromPosition(pos).exists(isBr$4);};var findBr=function(forward,root,pos){var parentBlocks=filter$4(parentsAndSelf(SugarElement.fromDom(pos.container()),root),isBlock$2);var scope=head(parentBlocks).getOr(root);return fromPosition(forward,scope.dom,pos).filter(isBr);};var isBeforeBr$1=function(root,pos){return getElementFromPosition(pos).exists(isBr$4)||findBr(true,root,pos).isSome();};var isAfterBr=function(root,pos){return getElementFromPrevPosition(pos).exists(isBr$4)||findBr(false,root,pos).isSome();};var findPreviousBr=curry(findBr,false);var findNextBr=curry(findBr,true);var isInMiddleOfText=function(pos){return CaretPosition.isTextPosition(pos)&&!pos.isAtStart()&&!pos.isAtEnd();};var getClosestBlock=function(root,pos){var parentBlocks=filter$4(parentsAndSelf(SugarElement.fromDom(pos.container()),root),isBlock$2);return head(parentBlocks).getOr(root);};var hasSpaceBefore=function(root,pos){if(isInMiddleOfText(pos)){return isAfterSpace(pos);}else{return isAfterSpace(pos)||prevPosition(getClosestBlock(root,pos).dom,pos).exists(isAfterSpace);}};var hasSpaceAfter=function(root,pos){if(isInMiddleOfText(pos)){return isBeforeSpace(pos);}else{return isBeforeSpace(pos)||nextPosition(getClosestBlock(root,pos).dom,pos).exists(isBeforeSpace);}};var isPreValue=function(value){return contains$3(['pre','pre-wrap'],value);};var isInPre=function(pos){return getElementFromPosition(pos).bind(function(elm){return closest$3(elm,isElement$6);}).exists(function(elm){return isPreValue(get$5(elm,'white-space'));});};var isAtBeginningOfBody=function(root,pos){return prevPosition(root.dom,pos).isNone();};var isAtEndOfBody=function(root,pos){return nextPosition(root.dom,pos).isNone();};var isAtLineBoundary=function(root,pos){return isAtBeginningOfBody(root,pos)||isAtEndOfBody(root,pos)||isAtStartOfBlock(root,pos)||isAtEndOfBlock(root,pos)||isAfterBr(root,pos)||isBeforeBr$1(root,pos);};var needsToHaveNbsp=function(root,pos){if(isInPre(pos)){return false;}else{return isAtLineBoundary(root,pos)||hasSpaceBefore(root,pos)||hasSpaceAfter(root,pos);}};var needsToBeNbspLeft=function(root,pos){if(isInPre(pos)){return false;}else{return isAtStartOfBlock(root,pos)||isBeforeBlock(root,pos)||isAfterBr(root,pos)||hasSpaceBefore(root,pos);}};var leanRight=function(pos){var container=pos.container();var offset=pos.offset();if(isText$7(container)&&offset<container.data.length){return CaretPosition(container,offset+1);}else{return pos;}};var needsToBeNbspRight=function(root,pos){if(isInPre(pos)){return false;}else{return isAtEndOfBlock(root,pos)||isAfterBlock(root,pos)||isBeforeBr$1(root,pos)||hasSpaceAfter(root,pos);}};var needsToBeNbsp=function(root,pos){return needsToBeNbspLeft(root,pos)||needsToBeNbspRight(root,leanRight(pos));};var isNbspAt=function(text,offset){return isNbsp(text.charAt(offset));};var hasNbsp=function(pos){var container=pos.container();return isText$7(container)&&contains$2(container.data,nbsp);};var normalizeNbspMiddle=function(text){var chars=text.split('');return map$3(chars,function(chr,i){if(isNbsp(chr)&&i>0&&i<chars.length-1&&isContent(chars[i-1])&&isContent(chars[i+1])){return' ';}else{return chr;}}).join('');};var normalizeNbspAtStart=function(root,node){var text=node.data;var firstPos=CaretPosition(node,0);if(isNbspAt(text,0)&&!needsToBeNbsp(root,firstPos)){node.data=' '+text.slice(1);return true;}else{return false;}};var normalizeNbspInMiddleOfTextNode=function(node){var text=node.data;var newText=normalizeNbspMiddle(text);if(newText!==text){node.data=newText;return true;}else{return false;}};var normalizeNbspAtEnd=function(root,node){var text=node.data;var lastPos=CaretPosition(node,text.length-1);if(isNbspAt(text,text.length-1)&&!needsToBeNbsp(root,lastPos)){node.data=text.slice(0,-1)+' ';return true;}else{return false;}};var normalizeNbsps=function(root,pos){return Optional.some(pos).filter(hasNbsp).bind(function(pos){var container=pos.container();var normalized=normalizeNbspAtStart(root,container)||normalizeNbspInMiddleOfTextNode(container)||normalizeNbspAtEnd(root,container);return normalized?Optional.some(pos):Optional.none();});};var normalizeNbspsInEditor=function(editor){var root=SugarElement.fromDom(editor.getBody());if(editor.selection.isCollapsed()){normalizeNbsps(root,CaretPosition.fromRangeStart(editor.selection.getRng())).each(function(pos){editor.selection.setRng(pos.toRange());});}};var normalizeContent=function(content,isStartOfContent,isEndOfContent){var result=foldl(content,function(acc,c){if(isWhiteSpace(c)||isNbsp(c)){if(acc.previousCharIsSpace||acc.str===''&&isStartOfContent||acc.str.length===content.length-1&&isEndOfContent){return{previousCharIsSpace:false,str:acc.str+nbsp};}else{return{previousCharIsSpace:true,str:acc.str+' '};}}else{return{previousCharIsSpace:false,str:acc.str+c};}},{previousCharIsSpace:false,str:''});return result.str;};var normalize$1=function(node,offset,count){if(count===0){return;}var elm=SugarElement.fromDom(node);var root=ancestor$3(elm,isBlock$2).getOr(elm);var whitespace=node.data.slice(offset,offset+count);var isEndOfContent=offset+count>=node.data.length&&needsToBeNbspRight(root,CaretPosition(node,node.data.length));var isStartOfContent=offset===0&&needsToBeNbspLeft(root,CaretPosition(node,0));node.replaceData(offset,count,normalizeContent(whitespace,isStartOfContent,isEndOfContent));};var normalizeWhitespaceAfter=function(node,offset){var content=node.data.slice(offset);var whitespaceCount=content.length-lTrim(content).length;normalize$1(node,offset,whitespaceCount);};var normalizeWhitespaceBefore=function(node,offset){var content=node.data.slice(0,offset);var whitespaceCount=content.length-rTrim(content).length;normalize$1(node,offset-whitespaceCount,whitespaceCount);};var mergeTextNodes=function(prevNode,nextNode,normalizeWhitespace,mergeToPrev){if(mergeToPrev===void 0){mergeToPrev=true;}var whitespaceOffset=rTrim(prevNode.data).length;var newNode=mergeToPrev?prevNode:nextNode;var removeNode=mergeToPrev?nextNode:prevNode;if(mergeToPrev){newNode.appendData(removeNode.data);}else{newNode.insertData(0,removeNode.data);}remove$7(SugarElement.fromDom(removeNode));if(normalizeWhitespace){normalizeWhitespaceAfter(newNode,whitespaceOffset);}return newNode;};var needsReposition=function(pos,elm){var container=pos.container();var offset=pos.offset();return CaretPosition.isTextPosition(pos)===false&&container===elm.parentNode&&offset>CaretPosition.before(elm).offset();};var reposition=function(elm,pos){return needsReposition(pos,elm)?CaretPosition(pos.container(),pos.offset()-1):pos;};var beforeOrStartOf=function(node){return isText$7(node)?CaretPosition(node,0):CaretPosition.before(node);};var afterOrEndOf=function(node){return isText$7(node)?CaretPosition(node,node.data.length):CaretPosition.after(node);};var getPreviousSiblingCaretPosition=function(elm){if(isCaretCandidate$3(elm.previousSibling)){return Optional.some(afterOrEndOf(elm.previousSibling));}else{return elm.previousSibling?lastPositionIn(elm.previousSibling):Optional.none();}};var getNextSiblingCaretPosition=function(elm){if(isCaretCandidate$3(elm.nextSibling)){return Optional.some(beforeOrStartOf(elm.nextSibling));}else{return elm.nextSibling?firstPositionIn(elm.nextSibling):Optional.none();}};var findCaretPositionBackwardsFromElm=function(rootElement,elm){var startPosition=CaretPosition.before(elm.previousSibling?elm.previousSibling:elm.parentNode);return prevPosition(rootElement,startPosition).fold(function(){return nextPosition(rootElement,CaretPosition.after(elm));},Optional.some);};var findCaretPositionForwardsFromElm=function(rootElement,elm){return nextPosition(rootElement,CaretPosition.after(elm)).fold(function(){return prevPosition(rootElement,CaretPosition.before(elm));},Optional.some);};var findCaretPositionBackwards=function(rootElement,elm){return getPreviousSiblingCaretPosition(elm).orThunk(function(){return getNextSiblingCaretPosition(elm);}).orThunk(function(){return findCaretPositionBackwardsFromElm(rootElement,elm);});};var findCaretPositionForward=function(rootElement,elm){return getNextSiblingCaretPosition(elm).orThunk(function(){return getPreviousSiblingCaretPosition(elm);}).orThunk(function(){return findCaretPositionForwardsFromElm(rootElement,elm);});};var findCaretPosition=function(forward,rootElement,elm){return forward?findCaretPositionForward(rootElement,elm):findCaretPositionBackwards(rootElement,elm);};var findCaretPosOutsideElmAfterDelete=function(forward,rootElement,elm){return findCaretPosition(forward,rootElement,elm).map(curry(reposition,elm));};var setSelection$1=function(editor,forward,pos){pos.fold(function(){editor.focus();},function(pos){editor.selection.setRng(pos.toRange(),forward);});};var eqRawNode=function(rawNode){return function(elm){return elm.dom===rawNode;};};var isBlock=function(editor,elm){return elm&&has$2(editor.schema.getBlockElements(),name(elm));};var paddEmptyBlock=function(elm){if(isEmpty$2(elm)){var br=SugarElement.fromHtml('<br data-mce-bogus=\"1\">');empty(elm);append$1(elm,br);return Optional.some(CaretPosition.before(br.dom));}else{return Optional.none();}};var deleteNormalized=function(elm,afterDeletePosOpt,normalizeWhitespace){var prevTextOpt=prevSibling(elm).filter(isText$8);var nextTextOpt=nextSibling(elm).filter(isText$8);remove$7(elm);return lift3(prevTextOpt,nextTextOpt,afterDeletePosOpt,function(prev,next,pos){var prevNode=prev.dom,nextNode=next.dom;var offset=prevNode.data.length;mergeTextNodes(prevNode,nextNode,normalizeWhitespace);return pos.container()===nextNode?CaretPosition(prevNode,offset):pos;}).orThunk(function(){if(normalizeWhitespace){prevTextOpt.each(function(elm){return normalizeWhitespaceBefore(elm.dom,elm.dom.length);});nextTextOpt.each(function(elm){return normalizeWhitespaceAfter(elm.dom,0);});}return afterDeletePosOpt;});};var isInlineElement=function(editor,element){return has$2(editor.schema.getTextInlineElements(),name(element));};var deleteElement$2=function(editor,forward,elm,moveCaret){if(moveCaret===void 0){moveCaret=true;}var afterDeletePos=findCaretPosOutsideElmAfterDelete(forward,editor.getBody(),elm.dom);var parentBlock=ancestor$3(elm,curry(isBlock,editor),eqRawNode(editor.getBody()));var normalizedAfterDeletePos=deleteNormalized(elm,afterDeletePos,isInlineElement(editor,elm));if(editor.dom.isEmpty(editor.getBody())){editor.setContent('');editor.selection.setCursorLocation();}else{parentBlock.bind(paddEmptyBlock).fold(function(){if(moveCaret){setSelection$1(editor,forward,normalizedAfterDeletePos);}},function(paddPos){if(moveCaret){setSelection$1(editor,forward,Optional.some(paddPos));}});}};var isRootFromElement=function(root){return function(cur){return eq(root,cur);};};var getTableCells=function(table){return descendants(table,'td,th');};var getTableDetailsFromRange=function(rng,isRoot){var getTable=function(node){return getClosestTable(SugarElement.fromDom(node),isRoot);};var startTable=getTable(rng.startContainer);var endTable=getTable(rng.endContainer);var isStartInTable=startTable.isSome();var isEndInTable=endTable.isSome();var isSameTable=lift2(startTable,endTable,eq).getOr(false);var isMultiTable=!isSameTable&&isStartInTable&&isEndInTable;return{startTable:startTable,endTable:endTable,isStartInTable:isStartInTable,isEndInTable:isEndInTable,isSameTable:isSameTable,isMultiTable:isMultiTable};};var tableCellRng=function(start,end){return{start:start,end:end};};var tableSelection=function(rng,table,cells){return{rng:rng,table:table,cells:cells};};var deleteAction=Adt.generate([{singleCellTable:['rng','cell']},{fullTable:['table']},{partialTable:['cells','outsideDetails']},{multiTable:['startTableCells','endTableCells','betweenRng']}]);var getClosestCell$1=function(container,isRoot){return closest$2(SugarElement.fromDom(container),'td,th',isRoot);};var isExpandedCellRng=function(cellRng){return!eq(cellRng.start,cellRng.end);};var getTableFromCellRng=function(cellRng,isRoot){return getClosestTable(cellRng.start,isRoot).bind(function(startParentTable){return getClosestTable(cellRng.end,isRoot).bind(function(endParentTable){return someIf(eq(startParentTable,endParentTable),startParentTable);});});};var isSingleCellTable=function(cellRng,isRoot){return!isExpandedCellRng(cellRng)&&getTableFromCellRng(cellRng,isRoot).exists(function(table){var rows=table.dom.rows;return rows.length===1&&rows[0].cells.length===1;});};var getCellRng=function(rng,isRoot){var startCell=getClosestCell$1(rng.startContainer,isRoot);var endCell=getClosestCell$1(rng.endContainer,isRoot);return lift2(startCell,endCell,tableCellRng);};var getCellRangeFromStartTable=function(isRoot){return function(startCell){return getClosestTable(startCell,isRoot).bind(function(table){return last$2(getTableCells(table)).map(function(endCell){return tableCellRng(startCell,endCell);});});};};var getCellRangeFromEndTable=function(isRoot){return function(endCell){return getClosestTable(endCell,isRoot).bind(function(table){return head(getTableCells(table)).map(function(startCell){return tableCellRng(startCell,endCell);});});};};var getTableSelectionFromCellRng=function(isRoot){return function(cellRng){return getTableFromCellRng(cellRng,isRoot).map(function(table){return tableSelection(cellRng,table,getTableCells(table));});};};var getTableSelections=function(cellRng,selectionDetails,rng,isRoot){if(rng.collapsed||!cellRng.forall(isExpandedCellRng)){return Optional.none();}else if(selectionDetails.isSameTable){var sameTableSelection=cellRng.bind(getTableSelectionFromCellRng(isRoot));return Optional.some({start:sameTableSelection,end:sameTableSelection});}else{var startCell=getClosestCell$1(rng.startContainer,isRoot);var endCell=getClosestCell$1(rng.endContainer,isRoot);var startTableSelection=startCell.bind(getCellRangeFromStartTable(isRoot)).bind(getTableSelectionFromCellRng(isRoot));var endTableSelection=endCell.bind(getCellRangeFromEndTable(isRoot)).bind(getTableSelectionFromCellRng(isRoot));return Optional.some({start:startTableSelection,end:endTableSelection});}};var getCellIndex=function(cells,cell){return findIndex$2(cells,function(x){return eq(x,cell);});};var getSelectedCells=function(tableSelection){return lift2(getCellIndex(tableSelection.cells,tableSelection.rng.start),getCellIndex(tableSelection.cells,tableSelection.rng.end),function(startIndex,endIndex){return tableSelection.cells.slice(startIndex,endIndex+1);});};var isSingleCellTableContentSelected=function(optCellRng,rng,isRoot){return optCellRng.exists(function(cellRng){return isSingleCellTable(cellRng,isRoot)&&hasAllContentsSelected(cellRng.start,rng);});};var unselectCells=function(rng,selectionDetails){var startTable=selectionDetails.startTable,endTable=selectionDetails.endTable;var otherContentRng=rng.cloneRange();startTable.each(function(table){return otherContentRng.setStartAfter(table.dom);});endTable.each(function(table){return otherContentRng.setEndBefore(table.dom);});return otherContentRng;};var handleSingleTable=function(cellRng,selectionDetails,rng,isRoot){return getTableSelections(cellRng,selectionDetails,rng,isRoot).bind(function(_a){var start=_a.start,end=_a.end;return start.or(end);}).bind(function(tableSelection){var isSameTable=selectionDetails.isSameTable;var selectedCells=getSelectedCells(tableSelection).getOr([]);if(isSameTable&&tableSelection.cells.length===selectedCells.length){return Optional.some(deleteAction.fullTable(tableSelection.table));}else if(selectedCells.length>0){if(isSameTable){return Optional.some(deleteAction.partialTable(selectedCells,Optional.none()));}else{var otherContentRng=unselectCells(rng,selectionDetails);return Optional.some(deleteAction.partialTable(selectedCells,Optional.some(__assign(__assign({},selectionDetails),{rng:otherContentRng}))));}}else{return Optional.none();}});};var handleMultiTable=function(cellRng,selectionDetails,rng,isRoot){return getTableSelections(cellRng,selectionDetails,rng,isRoot).bind(function(_a){var start=_a.start,end=_a.end;var startTableSelectedCells=start.bind(getSelectedCells).getOr([]);var endTableSelectedCells=end.bind(getSelectedCells).getOr([]);if(startTableSelectedCells.length>0&&endTableSelectedCells.length>0){var otherContentRng=unselectCells(rng,selectionDetails);return Optional.some(deleteAction.multiTable(startTableSelectedCells,endTableSelectedCells,otherContentRng));}else{return Optional.none();}});};var getActionFromRange=function(root,rng){var isRoot=isRootFromElement(root);var optCellRng=getCellRng(rng,isRoot);var selectionDetails=getTableDetailsFromRange(rng,isRoot);if(isSingleCellTableContentSelected(optCellRng,rng,isRoot)){return optCellRng.map(function(cellRng){return deleteAction.singleCellTable(rng,cellRng.start);});}else if(selectionDetails.isMultiTable){return handleMultiTable(optCellRng,selectionDetails,rng,isRoot);}else{return handleSingleTable(optCellRng,selectionDetails,rng,isRoot);}};var freefallRtl=function(root){var child=isComment$1(root)?prevSibling(root):lastChild(root);return child.bind(freefallRtl).orThunk(function(){return Optional.some(root);});};var cleanCells=function(cells){return each$k(cells,function(cell){remove$6(cell,'contenteditable');fillWithPaddingBr(cell);});};var getOutsideBlock=function(editor,container){return Optional.from(editor.dom.getParent(container,editor.dom.isBlock)).map(SugarElement.fromDom);};var handleEmptyBlock=function(editor,startInTable,emptyBlock){emptyBlock.each(function(block){if(startInTable){remove$7(block);}else{fillWithPaddingBr(block);editor.selection.setCursorLocation(block.dom,0);}});};var deleteContentInsideCell=function(editor,cell,rng,isFirstCellInSelection){var insideTableRng=rng.cloneRange();if(isFirstCellInSelection){insideTableRng.setStart(rng.startContainer,rng.startOffset);insideTableRng.setEndAfter(cell.dom.lastChild);}else{insideTableRng.setStartBefore(cell.dom.firstChild);insideTableRng.setEnd(rng.endContainer,rng.endOffset);}deleteCellContents(editor,insideTableRng,cell,false);};var collapseAndRestoreCellSelection=function(editor){var selectedCells=getCellsFromEditor(editor);var selectedNode=SugarElement.fromDom(editor.selection.getNode());if(isTableCell$5(selectedNode.dom)&&isEmpty$2(selectedNode)){editor.selection.setCursorLocation(selectedNode.dom,0);}else{editor.selection.collapse(true);}if(selectedCells.length>1&&exists(selectedCells,function(cell){return eq(cell,selectedNode);})){set$1(selectedNode,'data-mce-selected','1');}};var emptySingleTableCells=function(editor,cells,outsideDetails){var editorRng=editor.selection.getRng();var cellsToClean=outsideDetails.bind(function(_a){var rng=_a.rng,isStartInTable=_a.isStartInTable;var outsideBlock=getOutsideBlock(editor,isStartInTable?rng.endContainer:rng.startContainer);rng.deleteContents();handleEmptyBlock(editor,isStartInTable,outsideBlock.filter(isEmpty$2));var endPointCell=isStartInTable?cells[0]:cells[cells.length-1];deleteContentInsideCell(editor,endPointCell,editorRng,isStartInTable);if(!isEmpty$2(endPointCell)){return Optional.some(isStartInTable?cells.slice(1):cells.slice(0,-1));}else{return Optional.none();}}).getOr(cells);cleanCells(cellsToClean);collapseAndRestoreCellSelection(editor);return true;};var emptyMultiTableCells=function(editor,startTableCells,endTableCells,betweenRng){var rng=editor.selection.getRng();var startCell=startTableCells[0];var endCell=endTableCells[endTableCells.length-1];deleteContentInsideCell(editor,startCell,rng,true);deleteContentInsideCell(editor,endCell,rng,false);var startTableCellsToClean=isEmpty$2(startCell)?startTableCells:startTableCells.slice(1);var endTableCellsToClean=isEmpty$2(endCell)?endTableCells:endTableCells.slice(0,-1);cleanCells(startTableCellsToClean.concat(endTableCellsToClean));betweenRng.deleteContents();collapseAndRestoreCellSelection(editor);return true;};var deleteCellContents=function(editor,rng,cell,moveSelection){if(moveSelection===void 0){moveSelection=true;}rng.deleteContents();var lastNode=freefallRtl(cell).getOr(cell);var lastBlock=SugarElement.fromDom(editor.dom.getParent(lastNode.dom,editor.dom.isBlock));if(isEmpty$2(lastBlock)){fillWithPaddingBr(lastBlock);if(moveSelection){editor.selection.setCursorLocation(lastBlock.dom,0);}}if(!eq(cell,lastBlock)){var additionalCleanupNodes=is$1(parent(lastBlock),cell)?[]:siblings(lastBlock);each$k(additionalCleanupNodes.concat(children(cell)),function(node){if(!eq(node,lastBlock)&&!contains$1(node,lastBlock)&&isEmpty$2(node)){remove$7(node);}});}return true;};var deleteTableElement=function(editor,table){deleteElement$2(editor,false,table);return true;};var deleteCellRange=function(editor,rootElm,rng){return getActionFromRange(rootElm,rng).map(function(action){return action.fold(curry(deleteCellContents,editor),curry(deleteTableElement,editor),curry(emptySingleTableCells,editor),curry(emptyMultiTableCells,editor));});};var deleteCaptionRange=function(editor,caption){return emptyElement(editor,caption);};var deleteTableRange=function(editor,rootElm,rng,startElm){return getParentCaption(rootElm,startElm).fold(function(){return deleteCellRange(editor,rootElm,rng);},function(caption){return deleteCaptionRange(editor,caption);}).getOr(false);};var deleteRange$2=function(editor,startElm,selectedCells){var rootNode=SugarElement.fromDom(editor.getBody());var rng=editor.selection.getRng();return selectedCells.length!==0?emptySingleTableCells(editor,selectedCells,Optional.none()):deleteTableRange(editor,rootNode,rng,startElm);};var getParentCell=function(rootElm,elm){return find$3(parentsAndSelf(elm,rootElm),isTableCell$4);};var getParentCaption=function(rootElm,elm){return find$3(parentsAndSelf(elm,rootElm),isTag('caption'));};var deleteBetweenCells=function(editor,rootElm,forward,fromCell,from){return navigate(forward,editor.getBody(),from).bind(function(to){return getParentCell(rootElm,SugarElement.fromDom(to.getNode())).map(function(toCell){return eq(toCell,fromCell)===false;});});};var emptyElement=function(editor,elm){fillWithPaddingBr(elm);editor.selection.setCursorLocation(elm.dom,0);return Optional.some(true);};var isDeleteOfLastCharPos=function(fromCaption,forward,from,to){return firstPositionIn(fromCaption.dom).bind(function(first){return lastPositionIn(fromCaption.dom).map(function(last){return forward?from.isEqual(first)&&to.isEqual(last):from.isEqual(last)&&to.isEqual(first);});}).getOr(true);};var emptyCaretCaption=function(editor,elm){return emptyElement(editor,elm);};var validateCaretCaption=function(rootElm,fromCaption,to){return getParentCaption(rootElm,SugarElement.fromDom(to.getNode())).map(function(toCaption){return eq(toCaption,fromCaption)===false;});};var deleteCaretInsideCaption=function(editor,rootElm,forward,fromCaption,from){return navigate(forward,editor.getBody(),from).bind(function(to){return isDeleteOfLastCharPos(fromCaption,forward,from,to)?emptyCaretCaption(editor,fromCaption):validateCaretCaption(rootElm,fromCaption,to);}).or(Optional.some(true));};var deleteCaretCells=function(editor,forward,rootElm,startElm){var from=CaretPosition.fromRangeStart(editor.selection.getRng());return getParentCell(rootElm,startElm).bind(function(fromCell){return isEmpty$2(fromCell)?emptyElement(editor,fromCell):deleteBetweenCells(editor,rootElm,forward,fromCell,from);}).getOr(false);};var deleteCaretCaption=function(editor,forward,rootElm,fromCaption){var from=CaretPosition.fromRangeStart(editor.selection.getRng());return isEmpty$2(fromCaption)?emptyElement(editor,fromCaption):deleteCaretInsideCaption(editor,rootElm,forward,fromCaption,from);};var isNearTable=function(forward,pos){return forward?isBeforeTable(pos):isAfterTable(pos);};var isBeforeOrAfterTable=function(editor,forward){var fromPos=CaretPosition.fromRangeStart(editor.selection.getRng());return isNearTable(forward,fromPos)||fromPosition(forward,editor.getBody(),fromPos).exists(function(pos){return isNearTable(forward,pos);});};var deleteCaret$3=function(editor,forward,startElm){var rootElm=SugarElement.fromDom(editor.getBody());return getParentCaption(rootElm,startElm).fold(function(){return deleteCaretCells(editor,forward,rootElm,startElm)||isBeforeOrAfterTable(editor,forward);},function(fromCaption){return deleteCaretCaption(editor,forward,rootElm,fromCaption).getOr(false);});};var backspaceDelete$9=function(editor,forward){var startElm=SugarElement.fromDom(editor.selection.getStart(true));var cells=getCellsFromEditor(editor);return editor.selection.isCollapsed()&&cells.length===0?deleteCaret$3(editor,forward,startElm):deleteRange$2(editor,startElm,cells);};var createRange=function(sc,so,ec,eo){var rng=document.createRange();rng.setStart(sc,so);rng.setEnd(ec,eo);return rng;};var normalizeBlockSelectionRange=function(rng){var startPos=CaretPosition.fromRangeStart(rng);var endPos=CaretPosition.fromRangeEnd(rng);var rootNode=rng.commonAncestorContainer;return fromPosition(false,rootNode,endPos).map(function(newEndPos){if(!isInSameBlock(startPos,endPos,rootNode)&&isInSameBlock(startPos,newEndPos,rootNode)){return createRange(startPos.container(),startPos.offset(),newEndPos.container(),newEndPos.offset());}else{return rng;}}).getOr(rng);};var normalize=function(rng){return rng.collapsed?rng:normalizeBlockSelectionRange(rng);};var hasOnlyOneChild$1=function(node){return node.firstChild&&node.firstChild===node.lastChild;};var isPaddingNode=function(node){return node.name==='br'||node.value===nbsp;};var isPaddedEmptyBlock=function(schema,node){var blockElements=schema.getBlockElements();return blockElements[node.name]&&hasOnlyOneChild$1(node)&&isPaddingNode(node.firstChild);};var isEmptyFragmentElement=function(schema,node){var nonEmptyElements=schema.getNonEmptyElements();return node&&(node.isEmpty(nonEmptyElements)||isPaddedEmptyBlock(schema,node));};var isListFragment=function(schema,fragment){var firstChild=fragment.firstChild;var lastChild=fragment.lastChild;if(firstChild&&firstChild.name==='meta'){firstChild=firstChild.next;}if(lastChild&&lastChild.attr('id')==='mce_marker'){lastChild=lastChild.prev;}if(isEmptyFragmentElement(schema,lastChild)){lastChild=lastChild.prev;}if(!firstChild||firstChild!==lastChild){return false;}return firstChild.name==='ul'||firstChild.name==='ol';};var cleanupDomFragment=function(domFragment){var firstChild=domFragment.firstChild;var lastChild=domFragment.lastChild;if(firstChild&&firstChild.nodeName==='META'){firstChild.parentNode.removeChild(firstChild);}if(lastChild&&lastChild.id==='mce_marker'){lastChild.parentNode.removeChild(lastChild);}return domFragment;};var toDomFragment=function(dom,serializer,fragment){var html=serializer.serialize(fragment);var domFragment=dom.createFragment(html);return cleanupDomFragment(domFragment);};var listItems=function(elm){return filter$4(elm.childNodes,function(child){return child.nodeName==='LI';});};var isPadding=function(node){return node.data===nbsp||isBr$5(node);};var isListItemPadded=function(node){return node&&node.firstChild&&node.firstChild===node.lastChild&&isPadding(node.firstChild);};var isEmptyOrPadded=function(elm){return!elm.firstChild||isListItemPadded(elm);};var trimListItems=function(elms){return elms.length>0&&isEmptyOrPadded(elms[elms.length-1])?elms.slice(0,-1):elms;};var getParentLi=function(dom,node){var parentBlock=dom.getParent(node,dom.isBlock);return parentBlock&&parentBlock.nodeName==='LI'?parentBlock:null;};var isParentBlockLi=function(dom,node){return!!getParentLi(dom,node);};var getSplit=function(parentNode,rng){var beforeRng=rng.cloneRange();var afterRng=rng.cloneRange();beforeRng.setStartBefore(parentNode);afterRng.setEndAfter(parentNode);return[beforeRng.cloneContents(),afterRng.cloneContents()];};var findFirstIn=function(node,rootNode){var caretPos=CaretPosition.before(node);var caretWalker=CaretWalker(rootNode);var newCaretPos=caretWalker.next(caretPos);return newCaretPos?newCaretPos.toRange():null;};var findLastOf=function(node,rootNode){var caretPos=CaretPosition.after(node);var caretWalker=CaretWalker(rootNode);var newCaretPos=caretWalker.prev(caretPos);return newCaretPos?newCaretPos.toRange():null;};var insertMiddle=function(target,elms,rootNode,rng){var parts=getSplit(target,rng);var parentElm=target.parentNode;parentElm.insertBefore(parts[0],target);Tools.each(elms,function(li){parentElm.insertBefore(li,target);});parentElm.insertBefore(parts[1],target);parentElm.removeChild(target);return findLastOf(elms[elms.length-1],rootNode);};var insertBefore$1=function(target,elms,rootNode){var parentElm=target.parentNode;Tools.each(elms,function(elm){parentElm.insertBefore(elm,target);});return findFirstIn(target,rootNode);};var insertAfter$1=function(target,elms,rootNode,dom){dom.insertAfter(elms.reverse(),target);return findLastOf(elms[0],rootNode);};var insertAtCaret$1=function(serializer,dom,rng,fragment){var domFragment=toDomFragment(dom,serializer,fragment);var liTarget=getParentLi(dom,rng.startContainer);var liElms=trimListItems(listItems(domFragment.firstChild));var BEGINNING=1,END=2;var rootNode=dom.getRoot();var isAt=function(location){var caretPos=CaretPosition.fromRangeStart(rng);var caretWalker=CaretWalker(dom.getRoot());var newPos=location===BEGINNING?caretWalker.prev(caretPos):caretWalker.next(caretPos);return newPos?getParentLi(dom,newPos.getNode())!==liTarget:true;};if(isAt(BEGINNING)){return insertBefore$1(liTarget,liElms,rootNode);}else if(isAt(END)){return insertAfter$1(liTarget,liElms,rootNode,dom);}return insertMiddle(liTarget,liElms,rootNode,rng);};var trimOrPadLeftRight=function(dom,rng,html){var root=SugarElement.fromDom(dom.getRoot());if(needsToBeNbspLeft(root,CaretPosition.fromRangeStart(rng))){html=html.replace(/^ /,'&nbsp;');}else{html=html.replace(/^&nbsp;/,' ');}if(needsToBeNbspRight(root,CaretPosition.fromRangeEnd(rng))){html=html.replace(/(&nbsp;| )(<br( \\/)>)?$/,'&nbsp;');}else{html=html.replace(/&nbsp;(<br( \\/)?>)?$/,' ');}return html;};var isTableCell$1=isTableCell$5;var isTableCellContentSelected=function(dom,rng,cell){if(cell!==null){var endCell=dom.getParent(rng.endContainer,isTableCell$1);return cell===endCell&&hasAllContentsSelected(SugarElement.fromDom(cell),rng);}else{return false;}};var validInsertion=function(editor,value,parentNode){if(parentNode.getAttribute('data-mce-bogus')==='all'){parentNode.parentNode.insertBefore(editor.dom.createFragment(value),parentNode);}else{var node=parentNode.firstChild;var node2=parentNode.lastChild;if(!node||node===node2&&node.nodeName==='BR'){editor.dom.setHTML(parentNode,value);}else{editor.selection.setContent(value);}}};var trimBrsFromTableCell=function(dom,elm){Optional.from(dom.getParent(elm,'td,th')).map(SugarElement.fromDom).each(trimBlockTrailingBr);};var reduceInlineTextElements=function(editor,merge){var textInlineElements=editor.schema.getTextInlineElements();var dom=editor.dom;if(merge){var root_1=editor.getBody();var elementUtils_1=ElementUtils(dom);Tools.each(dom.select('*[data-mce-fragment]'),function(node){var isInline=isNonNullable(textInlineElements[node.nodeName.toLowerCase()]);if(isInline&&hasInheritableStyles(dom,node)){for(var parentNode=node.parentNode;isNonNullable(parentNode)&&parentNode!==root_1;parentNode=parentNode.parentNode){var styleConflict=hasStyleConflict(dom,node,parentNode);if(styleConflict){break;}if(elementUtils_1.compare(parentNode,node)){dom.remove(node,true);break;}}}});}};var markFragmentElements=function(fragment){var node=fragment;while(node=node.walk()){if(node.type===1){node.attr('data-mce-fragment','1');}}};var unmarkFragmentElements=function(elm){Tools.each(elm.getElementsByTagName('*'),function(elm){elm.removeAttribute('data-mce-fragment');});};var isPartOfFragment=function(node){return!!node.getAttribute('data-mce-fragment');};var canHaveChildren=function(editor,node){return node&&!editor.schema.getShortEndedElements()[node.nodeName];};var moveSelectionToMarker=function(editor,marker){var nextRng;var dom=editor.dom;var selection=editor.selection;if(!marker){return;}selection.scrollIntoView(marker);var parentEditableElm=getContentEditableRoot$1(editor.getBody(),marker);if(dom.getContentEditable(parentEditableElm)==='false'){dom.remove(marker);selection.select(parentEditableElm);return;}var rng=dom.createRng();var node=marker.previousSibling;if(isText$7(node)){rng.setStart(node,node.nodeValue.length);if(!Env.ie){var node2=marker.nextSibling;if(isText$7(node2)){node.appendData(node2.data);node2.parentNode.removeChild(node2);}}}else{rng.setStartBefore(marker);rng.setEndBefore(marker);}var findNextCaretRng=function(rng){var caretPos=CaretPosition.fromRangeStart(rng);var caretWalker=CaretWalker(editor.getBody());caretPos=caretWalker.next(caretPos);if(caretPos){return caretPos.toRange();}};var parentBlock=dom.getParent(marker,dom.isBlock);dom.remove(marker);if(parentBlock&&dom.isEmpty(parentBlock)){editor.$(parentBlock).empty();rng.setStart(parentBlock,0);rng.setEnd(parentBlock,0);if(!isTableCell$1(parentBlock)&&!isPartOfFragment(parentBlock)&&(nextRng=findNextCaretRng(rng))){rng=nextRng;dom.remove(parentBlock);}else{dom.add(parentBlock,dom.create('br',{'data-mce-bogus':'1'}));}}selection.setRng(rng);};var deleteSelectedContent=function(editor){var dom=editor.dom;var rng=normalize(editor.selection.getRng());editor.selection.setRng(rng);var startCell=dom.getParent(rng.startContainer,isTableCell$1);if(isTableCellContentSelected(dom,rng,startCell)){deleteCellContents(editor,rng,SugarElement.fromDom(startCell));}else{editor.getDoc().execCommand('Delete',false,null);}};var insertHtmlAtCaret=function(editor,value,details){var parentNode;var rng,node;var selection=editor.selection;var dom=editor.dom;if(/^ | $/.test(value)){value=trimOrPadLeftRight(dom,selection.getRng(),value);}var parser=editor.parser;var merge=details.merge;var serializer=HtmlSerializer({validate:shouldValidate(editor)},editor.schema);var bookmarkHtml='<span id=\"mce_marker\" data-mce-type=\"bookmark\">&#xFEFF;</span>';var args=editor.fire('BeforeSetContent',{content:value,format:'html',selection:true,paste:details.paste});if(args.isDefaultPrevented()){editor.fire('SetContent',{content:args.content,format:'html',selection:true,paste:details.paste});return;}value=args.content;if(value.indexOf('{$caret}')===-1){value+='{$caret}';}value=value.replace(/\\{\\$caret\\}/,bookmarkHtml);rng=selection.getRng();var caretElement=rng.startContainer||(rng.parentElement?rng.parentElement():null);var body=editor.getBody();if(caretElement===body&&selection.isCollapsed()){if(dom.isBlock(body.firstChild)&&canHaveChildren(editor,body.firstChild)&&dom.isEmpty(body.firstChild)){rng=dom.createRng();rng.setStart(body.firstChild,0);rng.setEnd(body.firstChild,0);selection.setRng(rng);}}if(!selection.isCollapsed()){deleteSelectedContent(editor);}parentNode=selection.getNode();var parserArgs={context:parentNode.nodeName.toLowerCase(),data:details.data,insert:true};var fragment=parser.parse(value,parserArgs);if(details.paste===true&&isListFragment(editor.schema,fragment)&&isParentBlockLi(dom,parentNode)){rng=insertAtCaret$1(serializer,dom,selection.getRng(),fragment);selection.setRng(rng);editor.fire('SetContent',args);return;}markFragmentElements(fragment);node=fragment.lastChild;if(node.attr('id')==='mce_marker'){var marker=node;for(node=node.prev;node;node=node.walk(true)){if(node.type===3||!dom.isBlock(node.name)){if(editor.schema.isValidChild(node.parent.name,'span')){node.parent.insert(marker,node,node.name==='br');}break;}}}editor._selectionOverrides.showBlockCaretContainer(parentNode);if(!parserArgs.invalid){value=serializer.serialize(fragment);validInsertion(editor,value,parentNode);}else{editor.selection.setContent(bookmarkHtml);parentNode=selection.getNode();var rootNode=editor.getBody();if(parentNode.nodeType===9){parentNode=node=rootNode;}else{node=parentNode;}while(node!==rootNode){parentNode=node;node=node.parentNode;}value=parentNode===rootNode?rootNode.innerHTML:dom.getOuterHTML(parentNode);value=serializer.serialize(parser.parse(value.replace(/<span (id=\"mce_marker\"|id=mce_marker).+?<\\/span>/i,function(){return serializer.serialize(fragment);})));if(parentNode===rootNode){dom.setHTML(rootNode,value);}else{dom.setOuterHTML(parentNode,value);}}reduceInlineTextElements(editor,merge);moveSelectionToMarker(editor,dom.get('mce_marker'));unmarkFragmentElements(editor.getBody());trimBrsFromTableCell(dom,selection.getStart());editor.fire('SetContent',args);editor.addVisual();};var traverse=function(node,fn){fn(node);if(node.firstChild){traverse(node.firstChild,fn);}if(node.next){traverse(node.next,fn);}};var findMatchingNodes=function(nodeFilters,attributeFilters,node){var nodeMatches={};var attrMatches={};var matches=[];if(node.firstChild){traverse(node.firstChild,function(node){each$k(nodeFilters,function(filter){if(filter.name===node.name){if(nodeMatches[filter.name]){nodeMatches[filter.name].nodes.push(node);}else{nodeMatches[filter.name]={filter:filter,nodes:[node]};}}});each$k(attributeFilters,function(filter){if(typeof node.attr(filter.name)==='string'){if(attrMatches[filter.name]){attrMatches[filter.name].nodes.push(node);}else{attrMatches[filter.name]={filter:filter,nodes:[node]};}}});});}for(var name_1 in nodeMatches){if(has$2(nodeMatches,name_1)){matches.push(nodeMatches[name_1]);}}for(var name_2 in attrMatches){if(has$2(attrMatches,name_2)){matches.push(attrMatches[name_2]);}}return matches;};var filter$1=function(nodeFilters,attributeFilters,node){var matches=findMatchingNodes(nodeFilters,attributeFilters,node);each$k(matches,function(match){each$k(match.filter.callbacks,function(callback){callback(match.nodes,match.filter.name,{});});});};var defaultFormat$1='html';var isTreeNode=function(content){return content instanceof AstNode;};var moveSelection=function(editor){if(hasFocus(editor)){firstPositionIn(editor.getBody()).each(function(pos){var node=pos.getNode();var caretPos=isTable$3(node)?firstPositionIn(node).getOr(pos):pos;editor.selection.setRng(caretPos.toRange());});}};var setEditorHtml=function(editor,html,noSelection){editor.dom.setHTML(editor.getBody(),html);if(noSelection!==true){moveSelection(editor);}};var setContentString=function(editor,body,content,args){if(content.length===0||/^\\s+$/.test(content)){var padd='<br data-mce-bogus=\"1\">';if(body.nodeName==='TABLE'){content='<tr><td>'+padd+'</td></tr>';}else if(/^(UL|OL)$/.test(body.nodeName)){content='<li>'+padd+'</li>';}var forcedRootBlockName=getForcedRootBlock(editor);if(forcedRootBlockName&&editor.schema.isValidChild(body.nodeName.toLowerCase(),forcedRootBlockName.toLowerCase())){content=padd;content=editor.dom.createHTML(forcedRootBlockName,getForcedRootBlockAttrs(editor),content);}else if(!content){content='<br data-mce-bogus=\"1\">';}setEditorHtml(editor,content,args.no_selection);editor.fire('SetContent',args);}else{if(args.format!=='raw'){content=HtmlSerializer({validate:editor.validate},editor.schema).serialize(editor.parser.parse(content,{isRootContent:true,insert:true}));}args.content=isWsPreserveElement(SugarElement.fromDom(body))?content:Tools.trim(content);setEditorHtml(editor,args.content,args.no_selection);if(!args.no_events){editor.fire('SetContent',args);}}return args.content;};var setContentTree=function(editor,body,content,args){filter$1(editor.parser.getNodeFilters(),editor.parser.getAttributeFilters(),content);var html=HtmlSerializer({validate:editor.validate},editor.schema).serialize(content);args.content=isWsPreserveElement(SugarElement.fromDom(body))?html:Tools.trim(html);setEditorHtml(editor,args.content,args.no_selection);if(!args.no_events){editor.fire('SetContent',args);}return content;};var setupArgs$2=function(args,content){return __assign(__assign({format:defaultFormat$1},args),{set:true,content:isTreeNode(content)?'':content});};var setContentInternal=function(editor,content,args){var defaultedArgs=setupArgs$2(args,content);var updatedArgs=args.no_events?defaultedArgs:editor.fire('BeforeSetContent',defaultedArgs);if(!isTreeNode(content)){content=updatedArgs.content;}return Optional.from(editor.getBody()).fold(constant(content),function(body){return isTreeNode(content)?setContentTree(editor,body,content,updatedArgs):setContentString(editor,body,content,updatedArgs);});};var sibling=function(scope,predicate){return sibling$2(scope,predicate).isSome();};var ensureIsRoot=function(isRoot){return isFunction(isRoot)?isRoot:never;};var ancestor=function(scope,transform,isRoot){var element=scope.dom;var stop=ensureIsRoot(isRoot);while(element.parentNode){element=element.parentNode;var el=SugarElement.fromDom(element);var transformed=transform(el);if(transformed.isSome()){return transformed;}else if(stop(el)){break;}}return Optional.none();};var closest$1=function(scope,transform,isRoot){var current=transform(scope);var stop=ensureIsRoot(isRoot);return current.orThunk(function(){return stop(scope)?Optional.none():ancestor(scope,transform,stop);});};var isEq$3=isEq$5;var matchesUnInheritedFormatSelector=function(ed,node,name){var formatList=ed.formatter.get(name);if(formatList){for(var i=0;i<formatList.length;i++){var format=formatList[i];if(isSelectorFormat(format)&&format.inherit===false&&ed.dom.is(node,format.selector)){return true;}}}return false;};var matchParents=function(editor,node,name,vars,similar){var root=editor.dom.getRoot();if(node===root){return false;}node=editor.dom.getParent(node,function(node){if(matchesUnInheritedFormatSelector(editor,node,name)){return true;}return node.parentNode===root||!!matchNode(editor,node,name,vars,true);});return!!matchNode(editor,node,name,vars,similar);};var matchName$1=function(dom,node,format){if(isEq$3(node,format.inline)){return true;}if(isEq$3(node,format.block)){return true;}if(format.selector){return node.nodeType===1&&dom.is(node,format.selector);}};var matchItems=function(dom,node,format,itemName,similar,vars){var items=format[itemName];if(isFunction(format.onmatch)){return format.onmatch(node,format,itemName);}if(items){if(isUndefined(items.length)){for(var key in items){if(has$2(items,key)){var value=itemName==='attributes'?dom.getAttrib(node,key):getStyle(dom,node,key);var expectedValue=replaceVars(items[key],vars);var isEmptyValue=isNullable(value)||isEmpty$3(value);if(isEmptyValue&&isNullable(expectedValue)){continue;}if(similar&&isEmptyValue&&!format.exact){return false;}if((!similar||format.exact)&&!isEq$3(value,normalizeStyleValue(dom,expectedValue,key))){return false;}}}}else{for(var i=0;i<items.length;i++){if(itemName==='attributes'?dom.getAttrib(node,items[i]):getStyle(dom,node,items[i])){return true;}}}}return true;};var matchNode=function(ed,node,name,vars,similar){var formatList=ed.formatter.get(name);var dom=ed.dom;if(formatList&&node){for(var i=0;i<formatList.length;i++){var format=formatList[i];if(matchName$1(ed.dom,node,format)&&matchItems(dom,node,format,'attributes',similar,vars)&&matchItems(dom,node,format,'styles',similar,vars)){var classes=format.classes;if(classes){for(var x=0;x<classes.length;x++){if(!ed.dom.hasClass(node,replaceVars(classes[x],vars))){return;}}}return format;}}}};var match$2=function(editor,name,vars,node,similar){if(node){return matchParents(editor,node,name,vars,similar);}node=editor.selection.getNode();if(matchParents(editor,node,name,vars,similar)){return true;}var startNode=editor.selection.getStart();if(startNode!==node){if(matchParents(editor,startNode,name,vars,similar)){return true;}}return false;};var matchAll=function(editor,names,vars){var matchedFormatNames=[];var checkedMap={};var startElement=editor.selection.getStart();editor.dom.getParent(startElement,function(node){for(var i=0;i<names.length;i++){var name_1=names[i];if(!checkedMap[name_1]&&matchNode(editor,node,name_1,vars)){checkedMap[name_1]=true;matchedFormatNames.push(name_1);}}},editor.dom.getRoot());return matchedFormatNames;};var closest=function(editor,names){var isRoot=function(elm){return eq(elm,SugarElement.fromDom(editor.getBody()));};var match=function(elm,name){return matchNode(editor,elm.dom,name)?Optional.some(name):Optional.none();};return Optional.from(editor.selection.getStart(true)).bind(function(rawElm){return closest$1(SugarElement.fromDom(rawElm),function(elm){return findMap(names,function(name){return match(elm,name);});},isRoot);}).getOrNull();};var canApply=function(editor,name){var formatList=editor.formatter.get(name);var dom=editor.dom;if(formatList){var startNode=editor.selection.getStart();var parents=getParents$2(dom,startNode);for(var x=formatList.length-1;x>=0;x--){var format=formatList[x];if(!isSelectorFormat(format)||isNonNullable(format.defaultBlock)){return true;}for(var i=parents.length-1;i>=0;i--){if(dom.is(parents[i],format.selector)){return true;}}}}return false;};var matchAllOnNode=function(editor,node,formatNames){return foldl(formatNames,function(acc,name){var matchSimilar=isVariableFormatName(editor,name);if(editor.formatter.matchNode(node,name,{},matchSimilar)){return acc.concat([name]);}else{return acc;}},[]);};var ZWSP=ZWSP$1,CARET_ID='_mce_caret';var importNode=function(ownerDocument,node){return ownerDocument.importNode(node,true);};var getEmptyCaretContainers=function(node){var nodes=[];while(node){if(node.nodeType===3&&node.nodeValue!==ZWSP||node.childNodes.length>1){return[];}if(node.nodeType===1){nodes.push(node);}node=node.firstChild;}return nodes;};var isCaretContainerEmpty=function(node){return getEmptyCaretContainers(node).length>0;};var findFirstTextNode=function(node){if(node){var walker=new DomTreeWalker(node,node);for(node=walker.current();node;node=walker.next()){if(isText$7(node)){return node;}}}return null;};var createCaretContainer=function(fill){var caretContainer=SugarElement.fromTag('span');setAll$1(caretContainer,{'id':CARET_ID,'data-mce-bogus':'1','data-mce-type':'format-caret'});if(fill){append$1(caretContainer,SugarElement.fromText(ZWSP));}return caretContainer;};var trimZwspFromCaretContainer=function(caretContainerNode){var textNode=findFirstTextNode(caretContainerNode);if(textNode&&textNode.nodeValue.charAt(0)===ZWSP){textNode.deleteData(0,1);}return textNode;};var removeCaretContainerNode=function(editor,node,moveCaret){if(moveCaret===void 0){moveCaret=true;}var dom=editor.dom,selection=editor.selection;if(isCaretContainerEmpty(node)){deleteElement$2(editor,false,SugarElement.fromDom(node),moveCaret);}else{var rng=selection.getRng();var block=dom.getParent(node,dom.isBlock);var startContainer=rng.startContainer;var startOffset=rng.startOffset;var endContainer=rng.endContainer;var endOffset=rng.endOffset;var textNode=trimZwspFromCaretContainer(node);dom.remove(node,true);if(startContainer===textNode&&startOffset>0){rng.setStart(textNode,startOffset-1);}if(endContainer===textNode&&endOffset>0){rng.setEnd(textNode,endOffset-1);}if(block&&dom.isEmpty(block)){fillWithPaddingBr(SugarElement.fromDom(block));}selection.setRng(rng);}};var removeCaretContainer=function(editor,node,moveCaret){if(moveCaret===void 0){moveCaret=true;}var dom=editor.dom,selection=editor.selection;if(!node){node=getParentCaretContainer(editor.getBody(),selection.getStart());if(!node){while(node=dom.get(CARET_ID)){removeCaretContainerNode(editor,node,false);}}}else{removeCaretContainerNode(editor,node,moveCaret);}};var insertCaretContainerNode=function(editor,caretContainer,formatNode){var dom=editor.dom,block=dom.getParent(formatNode,curry(isTextBlock$1,editor));if(block&&dom.isEmpty(block)){formatNode.parentNode.replaceChild(caretContainer,formatNode);}else{removeTrailingBr(SugarElement.fromDom(formatNode));if(dom.isEmpty(formatNode)){formatNode.parentNode.replaceChild(caretContainer,formatNode);}else{dom.insertAfter(caretContainer,formatNode);}}};var appendNode=function(parentNode,node){parentNode.appendChild(node);return node;};var insertFormatNodesIntoCaretContainer=function(formatNodes,caretContainer){var innerMostFormatNode=foldr(formatNodes,function(parentNode,formatNode){return appendNode(parentNode,formatNode.cloneNode(false));},caretContainer);return appendNode(innerMostFormatNode,innerMostFormatNode.ownerDocument.createTextNode(ZWSP));};var cleanFormatNode=function(editor,caretContainer,formatNode,name,vars,similar){var formatter=editor.formatter;var dom=editor.dom;var validFormats=filter$4(keys(formatter.get()),function(formatName){return formatName!==name&&!contains$2(formatName,'removeformat');});var matchedFormats=matchAllOnNode(editor,formatNode,validFormats);var uniqueFormats=filter$4(matchedFormats,function(fmtName){return!areSimilarFormats(editor,fmtName,name);});if(uniqueFormats.length>0){var clonedFormatNode=formatNode.cloneNode(false);dom.add(caretContainer,clonedFormatNode);formatter.remove(name,vars,clonedFormatNode,similar);dom.remove(clonedFormatNode);return Optional.some(clonedFormatNode);}else{return Optional.none();}};var applyCaretFormat=function(editor,name,vars){var caretContainer,textNode;var selection=editor.selection;var selectionRng=selection.getRng();var offset=selectionRng.startOffset;var container=selectionRng.startContainer;var text=container.nodeValue;caretContainer=getParentCaretContainer(editor.getBody(),selection.getStart());if(caretContainer){textNode=findFirstTextNode(caretContainer);}var wordcharRegex=/[^\\s\\u00a0\\u00ad\\u200b\\ufeff]/;if(text&&offset>0&&offset<text.length&&wordcharRegex.test(text.charAt(offset))&&wordcharRegex.test(text.charAt(offset-1))){var bookmark=selection.getBookmark();selectionRng.collapse(true);var rng=expandRng(editor,selectionRng,editor.formatter.get(name));rng=split(rng);editor.formatter.apply(name,vars,rng);selection.moveToBookmark(bookmark);}else{if(!caretContainer||textNode.nodeValue!==ZWSP){caretContainer=importNode(editor.getDoc(),createCaretContainer(true).dom);textNode=caretContainer.firstChild;selectionRng.insertNode(caretContainer);offset=1;editor.formatter.apply(name,vars,caretContainer);}else{editor.formatter.apply(name,vars,caretContainer);}selection.setCursorLocation(textNode,offset);}};var removeCaretFormat=function(editor,name,vars,similar){var dom=editor.dom;var selection=editor.selection;var hasContentAfter,node,formatNode;var parents=[];var rng=selection.getRng();var container=rng.startContainer;var offset=rng.startOffset;node=container;if(container.nodeType===3){if(offset!==container.nodeValue.length){hasContentAfter=true;}node=node.parentNode;}while(node){if(matchNode(editor,node,name,vars,similar)){formatNode=node;break;}if(node.nextSibling){hasContentAfter=true;}parents.push(node);node=node.parentNode;}if(!formatNode){return;}if(hasContentAfter){var bookmark=selection.getBookmark();rng.collapse(true);var expandedRng=expandRng(editor,rng,editor.formatter.get(name),true);expandedRng=split(expandedRng);editor.formatter.remove(name,vars,expandedRng,similar);selection.moveToBookmark(bookmark);}else{var caretContainer=getParentCaretContainer(editor.getBody(),formatNode);var newCaretContainer=createCaretContainer(false).dom;insertCaretContainerNode(editor,newCaretContainer,caretContainer!==null?caretContainer:formatNode);var cleanedFormatNode=cleanFormatNode(editor,newCaretContainer,formatNode,name,vars,similar);var caretTextNode=insertFormatNodesIntoCaretContainer(parents.concat(cleanedFormatNode.toArray()),newCaretContainer);removeCaretContainerNode(editor,caretContainer,false);selection.setCursorLocation(caretTextNode,1);if(dom.isEmpty(formatNode)){dom.remove(formatNode);}}};var disableCaretContainer=function(editor,keyCode){var selection=editor.selection,body=editor.getBody();removeCaretContainer(editor,null,false);if((keyCode===8||keyCode===46)&&selection.isCollapsed()&&selection.getStart().innerHTML===ZWSP){removeCaretContainer(editor,getParentCaretContainer(body,selection.getStart()));}if(keyCode===37||keyCode===39){removeCaretContainer(editor,getParentCaretContainer(body,selection.getStart()));}};var setup$k=function(editor){editor.on('mouseup keydown',function(e){disableCaretContainer(editor,e.keyCode);});};var replaceWithCaretFormat=function(targetNode,formatNodes){var caretContainer=createCaretContainer(false);var innerMost=insertFormatNodesIntoCaretContainer(formatNodes,caretContainer.dom);before$4(SugarElement.fromDom(targetNode),caretContainer);remove$7(SugarElement.fromDom(targetNode));return CaretPosition(innerMost,0);};var isFormatElement=function(editor,element){var inlineElements=editor.schema.getTextInlineElements();return has$2(inlineElements,name(element))&&!isCaretNode(element.dom)&&!isBogus$2(element.dom);};var isEmptyCaretFormatElement=function(element){return isCaretNode(element.dom)&&isCaretContainerEmpty(element.dom);};var postProcessHooks={};var filter=filter$2;var each$b=each$i;var addPostProcessHook=function(name,hook){var hooks=postProcessHooks[name];if(!hooks){postProcessHooks[name]=[];}postProcessHooks[name].push(hook);};var postProcess$1=function(name,editor){each$b(postProcessHooks[name],function(hook){hook(editor);});};addPostProcessHook('pre',function(editor){var rng=editor.selection.getRng();var blocks;var hasPreSibling=function(pre){return isPre(pre.previousSibling)&&indexOf$1(blocks,pre.previousSibling)!==-1;};var joinPre=function(pre1,pre2){DomQuery(pre2).remove();DomQuery(pre1).append('<br><br>').append(pre2.childNodes);};var isPre=matchNodeNames(['pre']);if(!rng.collapsed){blocks=editor.selection.getSelectedBlocks();each$b(filter(filter(blocks,isPre),hasPreSibling),function(pre){joinPre(pre.previousSibling,pre);});}});var each$a=Tools.each;var isElementNode$1=function(node){return isElement$5(node)&&!isBookmarkNode$1(node)&&!isCaretNode(node)&&!isBogus$2(node);};var findElementSibling=function(node,siblingName){for(var sibling=node;sibling;sibling=sibling[siblingName]){if(isText$7(sibling)&&isNotEmpty(sibling.data)){return node;}if(isElement$5(sibling)&&!isBookmarkNode$1(sibling)){return sibling;}}return node;};var mergeSiblingsNodes=function(dom,prev,next){var elementUtils=ElementUtils(dom);if(prev&&next){prev=findElementSibling(prev,'previousSibling');next=findElementSibling(next,'nextSibling');if(elementUtils.compare(prev,next)){for(var sibling=prev.nextSibling;sibling&&sibling!==next;){var tmpSibling=sibling;sibling=sibling.nextSibling;prev.appendChild(tmpSibling);}dom.remove(next);Tools.each(Tools.grep(next.childNodes),function(node){prev.appendChild(node);});return prev;}}return next;};var mergeSiblings=function(dom,format,vars,node){if(node&&format.merge_siblings!==false){var newNode=mergeSiblingsNodes(dom,getNonWhiteSpaceSibling(node),node);mergeSiblingsNodes(dom,newNode,getNonWhiteSpaceSibling(newNode,true));}};var clearChildStyles=function(dom,format,node){if(format.clear_child_styles){var selector=format.links?'*:not(a)':'*';each$a(dom.select(selector,node),function(node){if(isElementNode$1(node)){each$a(format.styles,function(value,name){dom.setStyle(node,name,'');});}});}};var processChildElements=function(node,filter,process){each$a(node.childNodes,function(node){if(isElementNode$1(node)){if(filter(node)){process(node);}if(node.hasChildNodes()){processChildElements(node,filter,process);}}});};var unwrapEmptySpan=function(dom,node){if(node.nodeName==='SPAN'&&dom.getAttribs(node).length===0){dom.remove(node,true);}};var hasStyle=function(dom,name){return function(node){return!!(node&&getStyle(dom,node,name));};};var applyStyle=function(dom,name,value){return function(node){dom.setStyle(node,name,value);if(node.getAttribute('style')===''){node.removeAttribute('style');}unwrapEmptySpan(dom,node);};};var removeResult=Adt.generate([{keep:[]},{rename:['name']},{removed:[]}]);var MCE_ATTR_RE=/^(src|href|style)$/;var each$9=Tools.each;var isEq$2=isEq$5;var isTableCellOrRow=function(node){return /^(TR|TH|TD)$/.test(node.nodeName);};var isChildOfInlineParent=function(dom,node,parent){return dom.isChildOf(node,parent)&&node!==parent&&!dom.isBlock(parent);};var getContainer=function(ed,rng,start){var container=rng[start?'startContainer':'endContainer'];var offset=rng[start?'startOffset':'endOffset'];if(isElement$5(container)){var lastIdx=container.childNodes.length-1;if(!start&&offset){offset--;}container=container.childNodes[offset>lastIdx?lastIdx:offset];}if(isText$7(container)&&start&&offset>=container.nodeValue.length){container=new DomTreeWalker(container,ed.getBody()).next()||container;}if(isText$7(container)&&!start&&offset===0){container=new DomTreeWalker(container,ed.getBody()).prev()||container;}return container;};var normalizeTableSelection=function(node,start){var prop=start?'firstChild':'lastChild';if(isTableCellOrRow(node)&&node[prop]){var childNode=node[prop];if(node.nodeName==='TR'){return childNode[prop]||childNode;}else{return childNode;}}return node;};var wrap$1=function(dom,node,name,attrs){var wrapper=dom.create(name,attrs);node.parentNode.insertBefore(wrapper,node);wrapper.appendChild(node);return wrapper;};var wrapWithSiblings=function(dom,node,next,name,attrs){var start=SugarElement.fromDom(node);var wrapper=SugarElement.fromDom(dom.create(name,attrs));var siblings=next?nextSiblings(start):prevSiblings(start);append(wrapper,siblings);if(next){before$4(start,wrapper);prepend(wrapper,start);}else{after$3(start,wrapper);append$1(wrapper,start);}return wrapper.dom;};var matchName=function(dom,node,format){if(isInlineFormat(format)&&isEq$2(node,format.inline)){return true;}if(isBlockFormat(format)&&isEq$2(node,format.block)){return true;}if(isSelectorFormat(format)){return isElement$5(node)&&dom.is(node,format.selector);}};var isColorFormatAndAnchor=function(node,format){return format.links&&node.nodeName==='A';};var find=function(dom,node,next,inc){var sibling=getNonWhiteSpaceSibling(node,next,inc);return isNullable(sibling)||sibling.nodeName==='BR'||dom.isBlock(sibling);};var removeNode=function(ed,node,format){var parentNode=node.parentNode;var rootBlockElm;var dom=ed.dom,forcedRootBlock=getForcedRootBlock(ed);if(isBlockFormat(format)){if(!forcedRootBlock){if(dom.isBlock(node)&&!dom.isBlock(parentNode)){if(!find(dom,node,false)&&!find(dom,node.firstChild,true,true)){node.insertBefore(dom.create('br'),node.firstChild);}if(!find(dom,node,true)&&!find(dom,node.lastChild,false,true)){node.appendChild(dom.create('br'));}}}else{if(parentNode===dom.getRoot()){if(!format.list_block||!isEq$2(node,format.list_block)){each$k(from(node.childNodes),function(node){if(isValid(ed,forcedRootBlock,node.nodeName.toLowerCase())){if(!rootBlockElm){rootBlockElm=wrap$1(dom,node,forcedRootBlock);dom.setAttribs(rootBlockElm,ed.settings.forced_root_block_attrs);}else{rootBlockElm.appendChild(node);}}else{rootBlockElm=null;}});}}}}if(isMixedFormat(format)&&!isEq$2(format.inline,node)){return;}dom.remove(node,true);};var removeFormatInternal=function(ed,format,vars,node,compareNode){var stylesModified;var dom=ed.dom;if(!matchName(dom,node,format)&&!isColorFormatAndAnchor(node,format)){return removeResult.keep();}var elm=node;if(isInlineFormat(format)&&format.remove==='all'&&isArray$1(format.preserve_attributes)){var attrsToPreserve=filter$4(dom.getAttribs(elm),function(attr){return contains$3(format.preserve_attributes,attr.name.toLowerCase());});dom.removeAllAttribs(elm);each$k(attrsToPreserve,function(attr){return dom.setAttrib(elm,attr.name,attr.value);});if(attrsToPreserve.length>0){return removeResult.rename('span');}}if(format.remove!=='all'){each$9(format.styles,function(value,name){value=normalizeStyleValue(dom,replaceVars(value,vars),name+'');if(isNumber(name)){name=value;compareNode=null;}if(format.remove_similar||!compareNode||isEq$2(getStyle(dom,compareNode,name),value)){dom.setStyle(elm,name,'');}stylesModified=true;});if(stylesModified&&dom.getAttrib(elm,'style')===''){elm.removeAttribute('style');elm.removeAttribute('data-mce-style');}each$9(format.attributes,function(value,name){var valueOut;value=replaceVars(value,vars);if(isNumber(name)){name=value;compareNode=null;}if(format.remove_similar||!compareNode||isEq$2(dom.getAttrib(compareNode,name),value)){if(name==='class'){value=dom.getAttrib(elm,name);if(value){valueOut='';each$k(value.split(/\\s+/),function(cls){if(/mce\\-\\w+/.test(cls)){valueOut+=(valueOut?' ':'')+cls;}});if(valueOut){dom.setAttrib(elm,name,valueOut);return;}}}if(MCE_ATTR_RE.test(name)){elm.removeAttribute('data-mce-'+name);}if(name==='style'&&matchNodeNames(['li'])(elm)&&dom.getStyle(elm,'list-style-type')==='none'){elm.removeAttribute(name);dom.setStyle(elm,'list-style-type','none');return;}if(name==='class'){elm.removeAttribute('className');}elm.removeAttribute(name);}});each$9(format.classes,function(value){value=replaceVars(value,vars);if(!compareNode||dom.hasClass(compareNode,value)){dom.removeClass(elm,value);}});var attrs=dom.getAttribs(elm);for(var i=0;i<attrs.length;i++){var attrName=attrs[i].nodeName;if(attrName.indexOf('_')!==0&&attrName.indexOf('data-')!==0){return removeResult.keep();}}}if(format.remove!=='none'){removeNode(ed,elm,format);return removeResult.removed();}return removeResult.keep();};var removeFormat$1=function(ed,format,vars,node,compareNode){return removeFormatInternal(ed,format,vars,node,compareNode).fold(never,function(newName){ed.dom.rename(node,newName);return true;},always);};var findFormatRoot=function(editor,container,name,vars,similar){var formatRoot;each$k(getParents$2(editor.dom,container.parentNode).reverse(),function(parent){if(!formatRoot&&parent.id!=='_start'&&parent.id!=='_end'){var format=matchNode(editor,parent,name,vars,similar);if(format&&format.split!==false){formatRoot=parent;}}});return formatRoot;};var removeFormatFromClone=function(editor,format,vars,clone){return removeFormatInternal(editor,format,vars,clone,clone).fold(constant(clone),function(newName){var fragment=editor.dom.createFragment();fragment.appendChild(clone);return editor.dom.rename(clone,newName);},constant(null));};var wrapAndSplit=function(editor,formatList,formatRoot,container,target,split,format,vars){var clone,lastClone,firstClone;var dom=editor.dom;if(formatRoot){var formatRootParent=formatRoot.parentNode;for(var parent_1=container.parentNode;parent_1&&parent_1!==formatRootParent;parent_1=parent_1.parentNode){clone=dom.clone(parent_1,false);for(var i=0;i<formatList.length;i++){clone=removeFormatFromClone(editor,formatList[i],vars,clone);if(clone===null){break;}}if(clone){if(lastClone){clone.appendChild(lastClone);}if(!firstClone){firstClone=clone;}lastClone=clone;}}if(split&&(!format.mixed||!dom.isBlock(formatRoot))){container=dom.split(formatRoot,container);}if(lastClone){target.parentNode.insertBefore(lastClone,target);firstClone.appendChild(target);if(isInlineFormat(format)){mergeSiblings(dom,format,vars,lastClone);}}}return container;};var remove$1=function(ed,name,vars,node,similar){var formatList=ed.formatter.get(name);var format=formatList[0];var contentEditable=true;var dom=ed.dom;var selection=ed.selection;var splitToFormatRoot=function(container){var formatRoot=findFormatRoot(ed,container,name,vars,similar);return wrapAndSplit(ed,formatList,formatRoot,container,container,true,format,vars);};var isRemoveBookmarkNode=function(node){return isBookmarkNode$1(node)&&isElement$5(node)&&(node.id==='_start'||node.id==='_end');};var removeNodeFormat=function(node){return exists(formatList,function(fmt){return removeFormat$1(ed,fmt,vars,node,node);});};var process=function(node){var lastContentEditable=true;var hasContentEditableState=false;if(isElement$5(node)&&dom.getContentEditable(node)){lastContentEditable=contentEditable;contentEditable=dom.getContentEditable(node)==='true';hasContentEditableState=true;}var children=from(node.childNodes);if(contentEditable&&!hasContentEditableState){var removed=removeNodeFormat(node);var currentNodeMatches=removed||exists(formatList,function(f){return matchName$1(dom,node,f);});var parentNode=node.parentNode;if(!currentNodeMatches&&isNonNullable(parentNode)&&shouldExpandToSelector(format)){removeNodeFormat(parentNode);}}if(format.deep){if(children.length){for(var i=0;i<children.length;i++){process(children[i]);}if(hasContentEditableState){contentEditable=lastContentEditable;}}}var textDecorations=['underline','line-through','overline'];each$k(textDecorations,function(decoration){if(isElement$5(node)&&ed.dom.getStyle(node,'text-decoration')===decoration&&node.parentNode&&getTextDecoration(dom,node.parentNode)===decoration){removeFormat$1(ed,{deep:false,exact:true,inline:'span',styles:{textDecoration:decoration}},null,node);}});};var unwrap=function(start){var node=dom.get(start?'_start':'_end');var out=node[start?'firstChild':'lastChild'];if(isRemoveBookmarkNode(out)){out=out[start?'firstChild':'lastChild'];}if(isText$7(out)&&out.data.length===0){out=start?node.previousSibling||node.nextSibling:node.nextSibling||node.previousSibling;}dom.remove(node,true);return out;};var removeRngStyle=function(rng){var startContainer,endContainer;var expandedRng=expandRng(ed,rng,formatList,rng.collapsed);if(format.split){expandedRng=split(expandedRng);startContainer=getContainer(ed,expandedRng,true);endContainer=getContainer(ed,expandedRng);if(startContainer!==endContainer){startContainer=normalizeTableSelection(startContainer,true);endContainer=normalizeTableSelection(endContainer,false);if(isChildOfInlineParent(dom,startContainer,endContainer)){var marker=Optional.from(startContainer.firstChild).getOr(startContainer);splitToFormatRoot(wrapWithSiblings(dom,marker,true,'span',{'id':'_start','data-mce-type':'bookmark'}));unwrap(true);return;}if(isChildOfInlineParent(dom,endContainer,startContainer)){var marker=Optional.from(endContainer.lastChild).getOr(endContainer);splitToFormatRoot(wrapWithSiblings(dom,marker,false,'span',{'id':'_end','data-mce-type':'bookmark'}));unwrap(false);return;}startContainer=wrap$1(dom,startContainer,'span',{'id':'_start','data-mce-type':'bookmark'});endContainer=wrap$1(dom,endContainer,'span',{'id':'_end','data-mce-type':'bookmark'});var newRng=dom.createRng();newRng.setStartAfter(startContainer);newRng.setEndBefore(endContainer);walk$2(dom,newRng,function(nodes){each$k(nodes,function(n){if(!isBookmarkNode$1(n)&&!isBookmarkNode$1(n.parentNode)){splitToFormatRoot(n);}});});splitToFormatRoot(startContainer);splitToFormatRoot(endContainer);startContainer=unwrap(true);endContainer=unwrap();}else{startContainer=endContainer=splitToFormatRoot(startContainer);}expandedRng.startContainer=startContainer.parentNode?startContainer.parentNode:startContainer;expandedRng.startOffset=dom.nodeIndex(startContainer);expandedRng.endContainer=endContainer.parentNode?endContainer.parentNode:endContainer;expandedRng.endOffset=dom.nodeIndex(endContainer)+1;}walk$2(dom,expandedRng,function(nodes){each$k(nodes,process);});};if(node){if(isNode(node)){var rng=dom.createRng();rng.setStartBefore(node);rng.setEndAfter(node);removeRngStyle(rng);}else{removeRngStyle(node);}fireFormatRemove(ed,name,node,vars);return;}if(dom.getContentEditable(selection.getNode())==='false'){node=selection.getNode();for(var i=0;i<formatList.length;i++){if(formatList[i].ceFalseOverride){if(removeFormat$1(ed,formatList[i],vars,node,node)){break;}}}fireFormatRemove(ed,name,node,vars);return;}if(!selection.isCollapsed()||!isInlineFormat(format)||getCellsFromEditor(ed).length){preserve(selection,true,function(){runOnRanges(ed,removeRngStyle);});if(isInlineFormat(format)&&match$2(ed,name,vars,selection.getStart())){moveStart(dom,selection,selection.getRng());}ed.nodeChanged();}else{removeCaretFormat(ed,name,vars,similar);}fireFormatRemove(ed,name,node,vars);};var each$8=Tools.each;var mergeTextDecorationsAndColor=function(dom,format,vars,node){var processTextDecorationsAndColor=function(n){if(n.nodeType===1&&n.parentNode&&n.parentNode.nodeType===1){var textDecoration=getTextDecoration(dom,n.parentNode);if(dom.getStyle(n,'color')&&textDecoration){dom.setStyle(n,'text-decoration',textDecoration);}else if(dom.getStyle(n,'text-decoration')===textDecoration){dom.setStyle(n,'text-decoration',null);}}};if(format.styles&&(format.styles.color||format.styles.textDecoration)){Tools.walk(node,processTextDecorationsAndColor,'childNodes');processTextDecorationsAndColor(node);}};var mergeBackgroundColorAndFontSize=function(dom,format,vars,node){if(format.styles&&format.styles.backgroundColor){processChildElements(node,hasStyle(dom,'fontSize'),applyStyle(dom,'backgroundColor',replaceVars(format.styles.backgroundColor,vars)));}};var mergeSubSup=function(dom,format,vars,node){if(isInlineFormat(format)&&(format.inline==='sub'||format.inline==='sup')){processChildElements(node,hasStyle(dom,'fontSize'),applyStyle(dom,'fontSize',''));dom.remove(dom.select(format.inline==='sup'?'sub':'sup',node),true);}};var mergeWithChildren=function(editor,formatList,vars,node){each$8(formatList,function(format){if(isInlineFormat(format)){each$8(editor.dom.select(format.inline,node),function(child){if(!isElementNode$1(child)){return;}removeFormat$1(editor,format,vars,child,format.exact?child:null);});}clearChildStyles(editor.dom,format,node);});};var mergeWithParents=function(editor,format,name,vars,node){if(matchNode(editor,node.parentNode,name,vars)){if(removeFormat$1(editor,format,vars,node)){return;}}if(format.merge_with_parents){editor.dom.getParent(node.parentNode,function(parent){if(matchNode(editor,parent,name,vars)){removeFormat$1(editor,format,vars,node);return true;}});}};var each$7=Tools.each;var isElementNode=function(node){return isElement$5(node)&&!isBookmarkNode$1(node)&&!isCaretNode(node)&&!isBogus$2(node);};var canFormatBR=function(editor,format,node,parentName){if(canFormatEmptyLines(editor)&&isInlineFormat(format)){var validBRParentElements=getTextRootBlockElements(editor.schema);var hasCaretNodeSibling=sibling(SugarElement.fromDom(node),function(sibling){return isCaretNode(sibling.dom);});return hasNonNullableKey(validBRParentElements,parentName)&&isEmpty$2(SugarElement.fromDom(node.parentNode),false)&&!hasCaretNodeSibling;}else{return false;}};var applyFormat$1=function(ed,name,vars,node){var formatList=ed.formatter.get(name);var format=formatList[0];var isCollapsed=!node&&ed.selection.isCollapsed();var dom=ed.dom;var selection=ed.selection;var setElementFormat=function(elm,fmt){if(fmt===void 0){fmt=format;}if(isFunction(fmt.onformat)){fmt.onformat(elm,fmt,vars,node);}each$7(fmt.styles,function(value,name){dom.setStyle(elm,name,replaceVars(value,vars));});if(fmt.styles){var styleVal=dom.getAttrib(elm,'style');if(styleVal){dom.setAttrib(elm,'data-mce-style',styleVal);}}each$7(fmt.attributes,function(value,name){dom.setAttrib(elm,name,replaceVars(value,vars));});each$7(fmt.classes,function(value){value=replaceVars(value,vars);if(!dom.hasClass(elm,value)){dom.addClass(elm,value);}});};var applyNodeStyle=function(formatList,node){var found=false;each$7(formatList,function(format){if(!isSelectorFormat(format)){return false;}if(isNonNullable(format.collapsed)&&format.collapsed!==isCollapsed){return;}if(dom.is(node,format.selector)&&!isCaretNode(node)){setElementFormat(node,format);found=true;return false;}});return found;};var createWrapElement=function(wrapName){if(isString$1(wrapName)){var wrapElm=dom.create(wrapName);setElementFormat(wrapElm);return wrapElm;}else{return null;}};var applyRngStyle=function(dom,rng,nodeSpecific){var newWrappers=[];var contentEditable=true;var wrapName=format.inline||format.block;var wrapElm=createWrapElement(wrapName);walk$2(dom,rng,function(nodes){var currentWrapElm;var process=function(node){var hasContentEditableState=false;var lastContentEditable=contentEditable;var nodeName=node.nodeName.toLowerCase();var parentNode=node.parentNode;var parentName=parentNode.nodeName.toLowerCase();if(isElement$5(node)&&dom.getContentEditable(node)){lastContentEditable=contentEditable;contentEditable=dom.getContentEditable(node)==='true';hasContentEditableState=true;}if(isBr$5(node)&&!canFormatBR(ed,format,node,parentName)){currentWrapElm=null;if(isBlockFormat(format)){dom.remove(node);}return;}if(isBlockFormat(format)&&format.wrapper&&matchNode(ed,node,name,vars)){currentWrapElm=null;return;}if(contentEditable&&!hasContentEditableState&&isBlockFormat(format)&&!format.wrapper&&isTextBlock$1(ed,nodeName)&&isValid(ed,parentName,wrapName)){var elm=dom.rename(node,wrapName);setElementFormat(elm);newWrappers.push(elm);currentWrapElm=null;return;}if(isSelectorFormat(format)){var found=applyNodeStyle(formatList,node);if(!found&&isNonNullable(parentNode)&&shouldExpandToSelector(format)){found=applyNodeStyle(formatList,parentNode);}if(!isInlineFormat(format)||found){currentWrapElm=null;return;}}if(contentEditable&&!hasContentEditableState&&isValid(ed,wrapName,nodeName)&&isValid(ed,parentName,wrapName)&&!(!nodeSpecific&&isText$7(node)&&isZwsp(node.data))&&!isCaretNode(node)&&(!isInlineFormat(format)||!dom.isBlock(node))){if(!currentWrapElm){currentWrapElm=dom.clone(wrapElm,false);node.parentNode.insertBefore(currentWrapElm,node);newWrappers.push(currentWrapElm);}currentWrapElm.appendChild(node);}else{currentWrapElm=null;each$k(from(node.childNodes),process);if(hasContentEditableState){contentEditable=lastContentEditable;}currentWrapElm=null;}};each$k(nodes,process);});if(format.links===true){each$k(newWrappers,function(node){var process=function(node){if(node.nodeName==='A'){setElementFormat(node,format);}each$k(from(node.childNodes),process);};process(node);});}each$k(newWrappers,function(node){var getChildCount=function(node){var count=0;each$k(node.childNodes,function(node){if(!isEmptyTextNode$1(node)&&!isBookmarkNode$1(node)){count++;}});return count;};var mergeStyles=function(node){var childElement=find$3(node.childNodes,isElementNode).filter(function(child){return matchName$1(dom,child,format);});return childElement.map(function(child){var clone=dom.clone(child,false);setElementFormat(clone);dom.replace(clone,node,true);dom.remove(child,true);return clone;}).getOr(node);};var childCount=getChildCount(node);if((newWrappers.length>1||!dom.isBlock(node))&&childCount===0){dom.remove(node,true);return;}if(isInlineFormat(format)||isBlockFormat(format)&&format.wrapper){if(!format.exact&&childCount===1){node=mergeStyles(node);}mergeWithChildren(ed,formatList,vars,node);mergeWithParents(ed,format,name,vars,node);mergeBackgroundColorAndFontSize(dom,format,vars,node);mergeTextDecorationsAndColor(dom,format,vars,node);mergeSubSup(dom,format,vars,node);mergeSiblings(dom,format,vars,node);}});};if(dom.getContentEditable(selection.getNode())==='false'){node=selection.getNode();for(var i=0,l=formatList.length;i<l;i++){var formatItem=formatList[i];if(formatItem.ceFalseOverride&&isSelectorFormat(formatItem)&&dom.is(node,formatItem.selector)){setElementFormat(node,formatItem);break;}}fireFormatApply(ed,name,node,vars);return;}if(format){if(node){if(isNode(node)){if(!applyNodeStyle(formatList,node)){var rng=dom.createRng();rng.setStartBefore(node);rng.setEndAfter(node);applyRngStyle(dom,expandRng(ed,rng,formatList),true);}}else{applyRngStyle(dom,node,true);}}else{if(!isCollapsed||!isInlineFormat(format)||getCellsFromEditor(ed).length){var curSelNode=selection.getNode();var firstFormat=formatList[0];if(!ed.settings.forced_root_block&&firstFormat.defaultBlock&&!dom.getParent(curSelNode,dom.isBlock)){applyFormat$1(ed,firstFormat.defaultBlock);}selection.setRng(normalize(selection.getRng()));preserve(selection,true,function(){runOnRanges(ed,function(selectionRng,fake){var expandedRng=fake?selectionRng:expandRng(ed,selectionRng,formatList);applyRngStyle(dom,expandedRng,false);});});moveStart(dom,selection,selection.getRng());ed.nodeChanged();}else{applyCaretFormat(ed,name,vars);}}postProcess$1(name,ed);}fireFormatApply(ed,name,node,vars);};var hasVars=function(value){return has$2(value,'vars');};var setup$j=function(registeredFormatListeners,editor){registeredFormatListeners.set({});editor.on('NodeChange',function(e){updateAndFireChangeCallbacks(editor,e.element,registeredFormatListeners.get());});editor.on('FormatApply FormatRemove',function(e){var element=Optional.from(e.node).map(function(nodeOrRange){return isNode(nodeOrRange)?nodeOrRange:nodeOrRange.startContainer;}).bind(function(node){return isElement$5(node)?Optional.some(node):Optional.from(node.parentElement);}).getOrThunk(function(){return fallbackElement(editor);});updateAndFireChangeCallbacks(editor,element,registeredFormatListeners.get());});};var fallbackElement=function(editor){return editor.selection.getStart();};var matchingNode=function(editor,parents,format,similar,vars){var isMatchingNode=function(node){var matchingFormat=editor.formatter.matchNode(node,format,vars!==null&&vars!==void 0?vars:{},similar);return!isUndefined(matchingFormat);};var isUnableToMatch=function(node){if(matchesUnInheritedFormatSelector(editor,node,format)){return true;}else{if(!similar){return isNonNullable(editor.formatter.matchNode(node,format,vars,true));}else{return false;}}};return findUntil$1(parents,isMatchingNode,isUnableToMatch);};var getParents=function(editor,elm){var element=elm!==null&&elm!==void 0?elm:fallbackElement(editor);return filter$4(getParents$2(editor.dom,element),function(node){return isElement$5(node)&&!isBogus$2(node);});};var updateAndFireChangeCallbacks=function(editor,elm,registeredCallbacks){var parents=getParents(editor,elm);each$j(registeredCallbacks,function(data,format){var runIfChanged=function(spec){var match=matchingNode(editor,parents,format,spec.similar,hasVars(spec)?spec.vars:undefined);var isSet=match.isSome();if(spec.state.get()!==isSet){spec.state.set(isSet);var node_1=match.getOr(elm);if(hasVars(spec)){spec.callback(isSet,{node:node_1,format:format,parents:parents});}else{each$k(spec.callbacks,function(callback){return callback(isSet,{node:node_1,format:format,parents:parents});});}}};each$k([data.withSimilar,data.withoutSimilar],runIfChanged);each$k(data.withVars,runIfChanged);});};var addListeners=function(editor,registeredFormatListeners,formats,callback,similar,vars){var formatChangeItems=registeredFormatListeners.get();each$k(formats.split(','),function(format){var group=get$9(formatChangeItems,format).getOrThunk(function(){var base={withSimilar:{state:Cell(false),similar:true,callbacks:[]},withoutSimilar:{state:Cell(false),similar:false,callbacks:[]},withVars:[]};formatChangeItems[format]=base;return base;});var getCurrent=function(){var parents=getParents(editor);return matchingNode(editor,parents,format,similar,vars).isSome();};if(isUndefined(vars)){var toAppendTo=similar?group.withSimilar:group.withoutSimilar;toAppendTo.callbacks.push(callback);if(toAppendTo.callbacks.length===1){toAppendTo.state.set(getCurrent());}}else{group.withVars.push({state:Cell(getCurrent()),similar:similar,vars:vars,callback:callback});}});registeredFormatListeners.set(formatChangeItems);};var removeListeners=function(registeredFormatListeners,formats,callback){var formatChangeItems=registeredFormatListeners.get();each$k(formats.split(','),function(format){return get$9(formatChangeItems,format).each(function(group){formatChangeItems[format]={withSimilar:__assign(__assign({},group.withSimilar),{callbacks:filter$4(group.withSimilar.callbacks,function(cb){return cb!==callback;})}),withoutSimilar:__assign(__assign({},group.withoutSimilar),{callbacks:filter$4(group.withoutSimilar.callbacks,function(cb){return cb!==callback;})}),withVars:filter$4(group.withVars,function(item){return item.callback!==callback;})};});});registeredFormatListeners.set(formatChangeItems);};var formatChangedInternal=function(editor,registeredFormatListeners,formats,callback,similar,vars){if(registeredFormatListeners.get()===null){setup$j(registeredFormatListeners,editor);}addListeners(editor,registeredFormatListeners,formats,callback,similar,vars);return{unbind:function(){return removeListeners(registeredFormatListeners,formats,callback);}};};var toggle=function(editor,name,vars,node){var fmt=editor.formatter.get(name);if(match$2(editor,name,vars,node)&&(!('toggle'in fmt[0])||fmt[0].toggle)){remove$1(editor,name,vars,node);}else{applyFormat$1(editor,name,vars,node);}};var fromElements=function(elements,scope){var doc=scope||document;var fragment=doc.createDocumentFragment();each$k(elements,function(element){fragment.appendChild(element.dom);});return SugarElement.fromDom(fragment);};var tableModel=function(element,width,rows){return{element:element,width:width,rows:rows};};var tableRow=function(element,cells){return{element:element,cells:cells};};var cellPosition=function(x,y){return{x:x,y:y};};var getSpan=function(td,key){var value=parseInt(get$6(td,key),10);return isNaN(value)?1:value;};var fillout=function(table,x,y,tr,td){var rowspan=getSpan(td,'rowspan');var colspan=getSpan(td,'colspan');var rows=table.rows;for(var y2=y;y2<y+rowspan;y2++){if(!rows[y2]){rows[y2]=tableRow(deep$1(tr),[]);}for(var x2=x;x2<x+colspan;x2++){var cells=rows[y2].cells;cells[x2]=y2===y&&x2===x?td:shallow(td);}}};var cellExists=function(table,x,y){var rows=table.rows;var cells=rows[y]?rows[y].cells:[];return!!cells[x];};var skipCellsX=function(table,x,y){while(cellExists(table,x,y)){x++;}return x;};var getWidth=function(rows){return foldl(rows,function(acc,row){return row.cells.length>acc?row.cells.length:acc;},0);};var findElementPos=function(table,element){var rows=table.rows;for(var y=0;y<rows.length;y++){var cells=rows[y].cells;for(var x=0;x<cells.length;x++){if(eq(cells[x],element)){return Optional.some(cellPosition(x,y));}}}return Optional.none();};var extractRows=function(table,sx,sy,ex,ey){var newRows=[];var rows=table.rows;for(var y=sy;y<=ey;y++){var cells=rows[y].cells;var slice=sx<ex?cells.slice(sx,ex+1):cells.slice(ex,sx+1);newRows.push(tableRow(rows[y].element,slice));}return newRows;};var subTable=function(table,startPos,endPos){var sx=startPos.x,sy=startPos.y;var ex=endPos.x,ey=endPos.y;var newRows=sy<ey?extractRows(table,sx,sy,ex,ey):extractRows(table,sx,ey,ex,sy);return tableModel(table.element,getWidth(newRows),newRows);};var createDomTable=function(table,rows){var tableElement=shallow(table.element);var tableBody=SugarElement.fromTag('tbody');append(tableBody,rows);append$1(tableElement,tableBody);return tableElement;};var modelRowsToDomRows=function(table){return map$3(table.rows,function(row){var cells=map$3(row.cells,function(cell){var td=deep$1(cell);remove$6(td,'colspan');remove$6(td,'rowspan');return td;});var tr=shallow(row.element);append(tr,cells);return tr;});};var fromDom=function(tableElm){var table=tableModel(shallow(tableElm),0,[]);each$k(descendants(tableElm,'tr'),function(tr,y){each$k(descendants(tr,'td,th'),function(td,x){fillout(table,skipCellsX(table,x,y),y,tr,td);});});return tableModel(table.element,getWidth(table.rows),table.rows);};var toDom=function(table){return createDomTable(table,modelRowsToDomRows(table));};var subsection=function(table,startElement,endElement){return findElementPos(table,startElement).bind(function(startPos){return findElementPos(table,endElement).map(function(endPos){return subTable(table,startPos,endPos);});});};var findParentListContainer=function(parents){return find$3(parents,function(elm){return name(elm)==='ul'||name(elm)==='ol';});};var getFullySelectedListWrappers=function(parents,rng){return find$3(parents,function(elm){return name(elm)==='li'&&hasAllContentsSelected(elm,rng);}).fold(constant([]),function(_li){return findParentListContainer(parents).map(function(listCont){var listElm=SugarElement.fromTag(name(listCont));var listStyles=filter$3(getAllRaw(listCont),function(_style,name){return startsWith(name,'list-style');});setAll(listElm,listStyles);return[SugarElement.fromTag('li'),listElm];}).getOr([]);});};var wrap=function(innerElm,elms){var wrapped=foldl(elms,function(acc,elm){append$1(elm,acc);return elm;},innerElm);return elms.length>0?fromElements([wrapped]):wrapped;};var directListWrappers=function(commonAnchorContainer){if(isListItem(commonAnchorContainer)){return parent(commonAnchorContainer).filter(isList).fold(constant([]),function(listElm){return[commonAnchorContainer,listElm];});}else{return isList(commonAnchorContainer)?[commonAnchorContainer]:[];}};var getWrapElements=function(rootNode,rng){var commonAnchorContainer=SugarElement.fromDom(rng.commonAncestorContainer);var parents=parentsAndSelf(commonAnchorContainer,rootNode);var wrapElements=filter$4(parents,function(elm){return isInline$1(elm)||isHeading(elm);});var listWrappers=getFullySelectedListWrappers(parents,rng);var allWrappers=wrapElements.concat(listWrappers.length?listWrappers:directListWrappers(commonAnchorContainer));return map$3(allWrappers,shallow);};var emptyFragment=function(){return fromElements([]);};var getFragmentFromRange=function(rootNode,rng){return wrap(SugarElement.fromDom(rng.cloneContents()),getWrapElements(rootNode,rng));};var getParentTable=function(rootElm,cell){return ancestor$2(cell,'table',curry(eq,rootElm));};var getTableFragment=function(rootNode,selectedTableCells){return getParentTable(rootNode,selectedTableCells[0]).bind(function(tableElm){var firstCell=selectedTableCells[0];var lastCell=selectedTableCells[selectedTableCells.length-1];var fullTableModel=fromDom(tableElm);return subsection(fullTableModel,firstCell,lastCell).map(function(sectionedTableModel){return fromElements([toDom(sectionedTableModel)]);});}).getOrThunk(emptyFragment);};var getSelectionFragment=function(rootNode,ranges){return ranges.length>0&&ranges[0].collapsed?emptyFragment():getFragmentFromRange(rootNode,ranges[0]);};var read$3=function(rootNode,ranges){var selectedCells=getCellsFromElementOrRanges(ranges,rootNode);return selectedCells.length>0?getTableFragment(rootNode,selectedCells):getSelectionFragment(rootNode,ranges);};var trimLeadingCollapsibleText=function(text){return text.replace(/^[ \\f\\n\\r\\t\\v]+/,'');};var isCollapsibleWhitespace=function(text,index){return index>=0&&index<text.length&&isWhiteSpace(text.charAt(index));};var getInnerText=function(bin,shouldTrim){var text=trim$2(bin.innerText);return shouldTrim?trimLeadingCollapsibleText(text):text;};var getContextNodeName=function(parentBlockOpt){return parentBlockOpt.map(function(block){return block.nodeName;}).getOr('div').toLowerCase();};var getTextContent=function(editor){return Optional.from(editor.selection.getRng()).map(function(rng){var parentBlockOpt=Optional.from(editor.dom.getParent(rng.commonAncestorContainer,editor.dom.isBlock));var body=editor.getBody();var contextNodeName=getContextNodeName(parentBlockOpt);var shouldTrimSpaces=Env.browser.isIE()&&contextNodeName!=='pre';var bin=editor.dom.add(body,contextNodeName,{'data-mce-bogus':'all','style':'overflow: hidden; opacity: 0;'},rng.cloneContents());var text=getInnerText(bin,shouldTrimSpaces);var nonRenderedText=trim$2(bin.textContent);editor.dom.remove(bin);if(isCollapsibleWhitespace(nonRenderedText,0)||isCollapsibleWhitespace(nonRenderedText,nonRenderedText.length-1)){var parentBlock=parentBlockOpt.getOr(body);var parentBlockText=getInnerText(parentBlock,shouldTrimSpaces);var textIndex=parentBlockText.indexOf(text);if(textIndex===-1){return text;}else{var hasProceedingSpace=isCollapsibleWhitespace(parentBlockText,textIndex-1);var hasTrailingSpace=isCollapsibleWhitespace(parentBlockText,textIndex+text.length);return(hasProceedingSpace?' ':'')+text+(hasTrailingSpace?' ':'');}}else{return text;}}).getOr('');};var getSerializedContent=function(editor,args){var rng=editor.selection.getRng(),tmpElm=editor.dom.create('body');var sel=editor.selection.getSel();var ranges=processRanges(editor,getRanges(sel));var fragment=args.contextual?read$3(SugarElement.fromDom(editor.getBody()),ranges).dom:rng.cloneContents();if(fragment){tmpElm.appendChild(fragment);}return editor.selection.serializer.serialize(tmpElm,args);};var setupArgs$1=function(args,format){return __assign(__assign({},args),{format:format,get:true,selection:true});};var getSelectedContentInternal=function(editor,format,args){if(args===void 0){args={};}var defaultedArgs=setupArgs$1(args,format);var updatedArgs=editor.fire('BeforeGetContent',defaultedArgs);if(updatedArgs.isDefaultPrevented()){editor.fire('GetContent',updatedArgs);return updatedArgs.content;}if(updatedArgs.format==='text'){return getTextContent(editor);}else{updatedArgs.getInner=true;var content=getSerializedContent(editor,updatedArgs);if(updatedArgs.format==='tree'){return content;}else{updatedArgs.content=editor.selection.isCollapsed()?'':content;editor.fire('GetContent',updatedArgs);return updatedArgs.content;}}};var KEEP=0,INSERT=1,DELETE=2;var diff=function(left,right){var size=left.length+right.length+2;var vDown=new Array(size);var vUp=new Array(size);var snake=function(start,end,diag){return{start:start,end:end,diag:diag};};var buildScript=function(start1,end1,start2,end2,script){var middle=getMiddleSnake(start1,end1,start2,end2);if(middle===null||middle.start===end1&&middle.diag===end1-end2||middle.end===start1&&middle.diag===start1-start2){var i=start1;var j=start2;while(i<end1||j<end2){if(i<end1&&j<end2&&left[i]===right[j]){script.push([KEEP,left[i]]);++i;++j;}else{if(end1-start1>end2-start2){script.push([DELETE,left[i]]);++i;}else{script.push([INSERT,right[j]]);++j;}}}}else{buildScript(start1,middle.start,start2,middle.start-middle.diag,script);for(var i2=middle.start;i2<middle.end;++i2){script.push([KEEP,left[i2]]);}buildScript(middle.end,end1,middle.end-middle.diag,end2,script);}};var buildSnake=function(start,diag,end1,end2){var end=start;while(end-diag<end2&&end<end1&&left[end]===right[end-diag]){++end;}return snake(start,end,diag);};var getMiddleSnake=function(start1,end1,start2,end2){var m=end1-start1;var n=end2-start2;if(m===0||n===0){return null;}var delta=m-n;var sum=n+m;var offset=(sum%2===0?sum:sum+1)/2;vDown[1+offset]=start1;vUp[1+offset]=end1+1;var d,k,i,x,y;for(d=0;d<=offset;++d){for(k=-d;k<=d;k+=2){i=k+offset;if(k===-d||k!==d&&vDown[i-1]<vDown[i+1]){vDown[i]=vDown[i+1];}else{vDown[i]=vDown[i-1]+1;}x=vDown[i];y=x-start1+start2-k;while(x<end1&&y<end2&&left[x]===right[y]){vDown[i]=++x;++y;}if(delta%2!==0&&delta-d<=k&&k<=delta+d){if(vUp[i-delta]<=vDown[i]){return buildSnake(vUp[i-delta],k+start1-start2,end1,end2);}}}for(k=delta-d;k<=delta+d;k+=2){i=k+offset-delta;if(k===delta-d||k!==delta+d&&vUp[i+1]<=vUp[i-1]){vUp[i]=vUp[i+1]-1;}else{vUp[i]=vUp[i-1];}x=vUp[i]-1;y=x-start1+start2-k;while(x>=start1&&y>=start2&&left[x]===right[y]){vUp[i]=x--;y--;}if(delta%2===0&&-d<=k&&k<=d){if(vUp[i]<=vDown[i+delta]){return buildSnake(vUp[i],k+start1-start2,end1,end2);}}}}};var script=[];buildScript(0,left.length,0,right.length,script);return script;};var getOuterHtml=function(elm){if(isElement$5(elm)){return elm.outerHTML;}else if(isText$7(elm)){return Entities.encodeRaw(elm.data,false);}else if(isComment(elm)){return'<!--'+elm.data+'-->';}return'';};var createFragment=function(html){var node;var container=document.createElement('div');var frag=document.createDocumentFragment();if(html){container.innerHTML=html;}while(node=container.firstChild){frag.appendChild(node);}return frag;};var insertAt=function(elm,html,index){var fragment=createFragment(html);if(elm.hasChildNodes()&&index<elm.childNodes.length){var target=elm.childNodes[index];target.parentNode.insertBefore(fragment,target);}else{elm.appendChild(fragment);}};var removeAt=function(elm,index){if(elm.hasChildNodes()&&index<elm.childNodes.length){var target=elm.childNodes[index];target.parentNode.removeChild(target);}};var applyDiff=function(diff,elm){var index=0;each$k(diff,function(action){if(action[0]===KEEP){index++;}else if(action[0]===INSERT){insertAt(elm,action[1],index);index++;}else if(action[0]===DELETE){removeAt(elm,index);}});};var read$2=function(elm){return filter$4(map$3(from(elm.childNodes),getOuterHtml),function(item){return item.length>0;});};var write=function(fragments,elm){var currentFragments=map$3(from(elm.childNodes),getOuterHtml);applyDiff(diff(currentFragments,fragments),elm);return elm;};var lazyTempDocument=cached(function(){return document.implementation.createHTMLDocument('undo');});var hasIframes=function(html){return html.indexOf('</iframe>')!==-1;};var createFragmentedLevel=function(fragments){return{type:'fragmented',fragments:fragments,content:'',bookmark:null,beforeBookmark:null};};var createCompleteLevel=function(content){return{type:'complete',fragments:null,content:content,bookmark:null,beforeBookmark:null};};var createFromEditor=function(editor){var fragments=read$2(editor.getBody());var trimmedFragments=bind(fragments,function(html){var trimmed=trimInternal(editor.serializer,html);return trimmed.length>0?[trimmed]:[];});var content=trimmedFragments.join('');return hasIframes(content)?createFragmentedLevel(trimmedFragments):createCompleteLevel(content);};var applyToEditor=function(editor,level,before){var bookmark=before?level.beforeBookmark:level.bookmark;if(level.type==='fragmented'){write(level.fragments,editor.getBody());}else{editor.setContent(level.content,{format:'raw',no_selection:isNonNullable(bookmark)&&isPathBookmark(bookmark)?!bookmark.isFakeCaret:true});}editor.selection.moveToBookmark(bookmark);};var getLevelContent=function(level){return level.type==='fragmented'?level.fragments.join(''):level.content;};var getCleanLevelContent=function(level){var elm=SugarElement.fromTag('body',lazyTempDocument());set(elm,getLevelContent(level));each$k(descendants(elm,'*[data-mce-bogus]'),unwrap);return get$3(elm);};var hasEqualContent=function(level1,level2){return getLevelContent(level1)===getLevelContent(level2);};var hasEqualCleanedContent=function(level1,level2){return getCleanLevelContent(level1)===getCleanLevelContent(level2);};var isEq$1=function(level1,level2){if(!level1||!level2){return false;}else if(hasEqualContent(level1,level2)){return true;}else{return hasEqualCleanedContent(level1,level2);}};var isUnlocked=function(locks){return locks.get()===0;};var setTyping=function(undoManager,typing,locks){if(isUnlocked(locks)){undoManager.typing=typing;}};var endTyping=function(undoManager,locks){if(undoManager.typing){setTyping(undoManager,false,locks);undoManager.add();}};var endTypingLevelIgnoreLocks=function(undoManager){if(undoManager.typing){undoManager.typing=false;undoManager.add();}};var beforeChange$1=function(editor,locks,beforeBookmark){if(isUnlocked(locks)){beforeBookmark.set(getUndoBookmark(editor.selection));}};var addUndoLevel$1=function(editor,undoManager,index,locks,beforeBookmark,level,event){var currentLevel=createFromEditor(editor);level=level||{};level=Tools.extend(level,currentLevel);if(isUnlocked(locks)===false||editor.removed){return null;}var lastLevel=undoManager.data[index.get()];if(editor.fire('BeforeAddUndo',{level:level,lastLevel:lastLevel,originalEvent:event}).isDefaultPrevented()){return null;}if(lastLevel&&isEq$1(lastLevel,level)){return null;}if(undoManager.data[index.get()]){beforeBookmark.get().each(function(bm){undoManager.data[index.get()].beforeBookmark=bm;});}var customUndoRedoLevels=getCustomUndoRedoLevels(editor);if(customUndoRedoLevels){if(undoManager.data.length>customUndoRedoLevels){for(var i=0;i<undoManager.data.length-1;i++){undoManager.data[i]=undoManager.data[i+1];}undoManager.data.length--;index.set(undoManager.data.length);}}level.bookmark=getUndoBookmark(editor.selection);if(index.get()<undoManager.data.length-1){undoManager.data.length=index.get()+1;}undoManager.data.push(level);index.set(undoManager.data.length-1);var args={level:level,lastLevel:lastLevel,originalEvent:event};if(index.get()>0){editor.setDirty(true);editor.fire('AddUndo',args);editor.fire('change',args);}else{editor.fire('AddUndo',args);}return level;};var clear$1=function(editor,undoManager,index){undoManager.data=[];index.set(0);undoManager.typing=false;editor.fire('ClearUndos');};var extra$1=function(editor,undoManager,index,callback1,callback2){if(undoManager.transact(callback1)){var bookmark=undoManager.data[index.get()].bookmark;var lastLevel=undoManager.data[index.get()-1];applyToEditor(editor,lastLevel,true);if(undoManager.transact(callback2)){undoManager.data[index.get()-1].beforeBookmark=bookmark;}}};var redo$1=function(editor,index,data){var level;if(index.get()<data.length-1){index.set(index.get()+1);level=data[index.get()];applyToEditor(editor,level,false);editor.setDirty(true);editor.fire('Redo',{level:level});}return level;};var undo$1=function(editor,undoManager,locks,index){var level;if(undoManager.typing){undoManager.add();undoManager.typing=false;setTyping(undoManager,false,locks);}if(index.get()>0){index.set(index.get()-1);level=undoManager.data[index.get()];applyToEditor(editor,level,true);editor.setDirty(true);editor.fire('Undo',{level:level});}return level;};var reset$1=function(undoManager){undoManager.clear();undoManager.add();};var hasUndo$1=function(editor,undoManager,index){return index.get()>0||undoManager.typing&&undoManager.data[0]&&!isEq$1(createFromEditor(editor),undoManager.data[0]);};var hasRedo$1=function(undoManager,index){return index.get()<undoManager.data.length-1&&!undoManager.typing;};var transact$1=function(undoManager,locks,callback){endTyping(undoManager,locks);undoManager.beforeChange();undoManager.ignore(callback);return undoManager.add();};var ignore$1=function(locks,callback){try{locks.set(locks.get()+1);callback();}finally{locks.set(locks.get()-1);}};var addVisualInternal=function(editor,elm){var dom=editor.dom;var scope=isNonNullable(elm)?elm:editor.getBody();if(isUndefined(editor.hasVisual)){editor.hasVisual=isVisualAidsEnabled(editor);}each$k(dom.select('table,a',scope),function(matchedElm){switch(matchedElm.nodeName){case'TABLE':var cls=getVisualAidsTableClass(editor);var value=dom.getAttrib(matchedElm,'border');if((!value||value==='0')&&editor.hasVisual){dom.addClass(matchedElm,cls);}else{dom.removeClass(matchedElm,cls);}break;case'A':if(!dom.getAttrib(matchedElm,'href')){var value_1=dom.getAttrib(matchedElm,'name')||matchedElm.id;var cls_1=getVisualAidsAnchorClass(editor);if(value_1&&editor.hasVisual){dom.addClass(matchedElm,cls_1);}else{dom.removeClass(matchedElm,cls_1);}}break;}});editor.fire('VisualAid',{element:elm,hasVisual:editor.hasVisual});};var makePlainAdaptor=function(editor){return{undoManager:{beforeChange:function(locks,beforeBookmark){return beforeChange$1(editor,locks,beforeBookmark);},add:function(undoManager,index,locks,beforeBookmark,level,event){return addUndoLevel$1(editor,undoManager,index,locks,beforeBookmark,level,event);},undo:function(undoManager,locks,index){return undo$1(editor,undoManager,locks,index);},redo:function(index,data){return redo$1(editor,index,data);},clear:function(undoManager,index){return clear$1(editor,undoManager,index);},reset:function(undoManager){return reset$1(undoManager);},hasUndo:function(undoManager,index){return hasUndo$1(editor,undoManager,index);},hasRedo:function(undoManager,index){return hasRedo$1(undoManager,index);},transact:function(undoManager,locks,callback){return transact$1(undoManager,locks,callback);},ignore:function(locks,callback){return ignore$1(locks,callback);},extra:function(undoManager,index,callback1,callback2){return extra$1(editor,undoManager,index,callback1,callback2);}},formatter:{match:function(name,vars,node,similar){return match$2(editor,name,vars,node,similar);},matchAll:function(names,vars){return matchAll(editor,names,vars);},matchNode:function(node,name,vars,similar){return matchNode(editor,node,name,vars,similar);},canApply:function(name){return canApply(editor,name);},closest:function(names){return closest(editor,names);},apply:function(name,vars,node){return applyFormat$1(editor,name,vars,node);},remove:function(name,vars,node,similar){return remove$1(editor,name,vars,node,similar);},toggle:function(name,vars,node){return toggle(editor,name,vars,node);},formatChanged:function(registeredFormatListeners,formats,callback,similar,vars){return formatChangedInternal(editor,registeredFormatListeners,formats,callback,similar,vars);}},editor:{getContent:function(args,format){return getContentInternal(editor,args,format);},setContent:function(content,args){return setContentInternal(editor,content,args);},insertContent:function(value,details){return insertHtmlAtCaret(editor,value,details);},addVisual:function(elm){return addVisualInternal(editor,elm);}},selection:{getContent:function(format,args){return getSelectedContentInternal(editor,format,args);}},raw:{getModel:function(){return Optional.none();}}};};var makeRtcAdaptor=function(rtcEditor){var defaultVars=function(vars){return isObject(vars)?vars:{};};var undoManager=rtcEditor.undoManager,formatter=rtcEditor.formatter,editor=rtcEditor.editor,selection=rtcEditor.selection,raw=rtcEditor.raw;return{undoManager:{beforeChange:undoManager.beforeChange,add:undoManager.add,undo:undoManager.undo,redo:undoManager.redo,clear:undoManager.clear,reset:undoManager.reset,hasUndo:undoManager.hasUndo,hasRedo:undoManager.hasRedo,transact:function(_undoManager,_locks,fn){return undoManager.transact(fn);},ignore:function(_locks,callback){return undoManager.ignore(callback);},extra:function(_undoManager,_index,callback1,callback2){return undoManager.extra(callback1,callback2);}},formatter:{match:function(name,vars,_node,similar){return formatter.match(name,defaultVars(vars),similar);},matchAll:formatter.matchAll,matchNode:formatter.matchNode,canApply:function(name){return formatter.canApply(name);},closest:function(names){return formatter.closest(names);},apply:function(name,vars,_node){return formatter.apply(name,defaultVars(vars));},remove:function(name,vars,_node,_similar){return formatter.remove(name,defaultVars(vars));},toggle:function(name,vars,_node){return formatter.toggle(name,defaultVars(vars));},formatChanged:function(_rfl,formats,callback,similar,vars){return formatter.formatChanged(formats,callback,similar,vars);}},editor:{getContent:function(args,_format){return editor.getContent(args);},setContent:function(content,args){return editor.setContent(content,args);},insertContent:function(content,_details){return editor.insertContent(content);},addVisual:editor.addVisual},selection:{getContent:function(_format,args){return selection.getContent(args);}},raw:{getModel:function(){return Optional.some(raw.getRawModel());}}};};var makeNoopAdaptor=function(){var nul=constant(null);var empty=constant('');return{undoManager:{beforeChange:noop,add:nul,undo:nul,redo:nul,clear:noop,reset:noop,hasUndo:never,hasRedo:never,transact:nul,ignore:noop,extra:noop},formatter:{match:never,matchAll:constant([]),matchNode:constant(undefined),canApply:never,closest:empty,apply:noop,remove:noop,toggle:noop,formatChanged:constant({unbind:noop})},editor:{getContent:empty,setContent:empty,insertContent:noop,addVisual:noop},selection:{getContent:empty},raw:{getModel:constant(Optional.none())}};};var isRtc=function(editor){return has$2(editor.plugins,'rtc');};var getRtcSetup=function(editor){return get$9(editor.plugins,'rtc').bind(function(rtcPlugin){return Optional.from(rtcPlugin.setup);});};var setup$i=function(editor){var editorCast=editor;return getRtcSetup(editor).fold(function(){editorCast.rtcInstance=makePlainAdaptor(editor);return Optional.none();},function(setup){editorCast.rtcInstance=makeNoopAdaptor();return Optional.some(function(){return setup().then(function(rtcEditor){editorCast.rtcInstance=makeRtcAdaptor(rtcEditor);return rtcEditor.rtc.isRemote;});});});};var getRtcInstanceWithFallback=function(editor){return editor.rtcInstance?editor.rtcInstance:makePlainAdaptor(editor);};var getRtcInstanceWithError=function(editor){var rtcInstance=editor.rtcInstance;if(!rtcInstance){throw new Error('Failed to get RTC instance not yet initialized.');}else{return rtcInstance;}};var beforeChange=function(editor,locks,beforeBookmark){getRtcInstanceWithError(editor).undoManager.beforeChange(locks,beforeBookmark);};var addUndoLevel=function(editor,undoManager,index,locks,beforeBookmark,level,event){return getRtcInstanceWithError(editor).undoManager.add(undoManager,index,locks,beforeBookmark,level,event);};var undo=function(editor,undoManager,locks,index){return getRtcInstanceWithError(editor).undoManager.undo(undoManager,locks,index);};var redo=function(editor,index,data){return getRtcInstanceWithError(editor).undoManager.redo(index,data);};var clear=function(editor,undoManager,index){getRtcInstanceWithError(editor).undoManager.clear(undoManager,index);};var reset=function(editor,undoManager){getRtcInstanceWithError(editor).undoManager.reset(undoManager);};var hasUndo=function(editor,undoManager,index){return getRtcInstanceWithError(editor).undoManager.hasUndo(undoManager,index);};var hasRedo=function(editor,undoManager,index){return getRtcInstanceWithError(editor).undoManager.hasRedo(undoManager,index);};var transact=function(editor,undoManager,locks,callback){return getRtcInstanceWithError(editor).undoManager.transact(undoManager,locks,callback);};var ignore=function(editor,locks,callback){getRtcInstanceWithError(editor).undoManager.ignore(locks,callback);};var extra=function(editor,undoManager,index,callback1,callback2){getRtcInstanceWithError(editor).undoManager.extra(undoManager,index,callback1,callback2);};var matchFormat=function(editor,name,vars,node,similar){return getRtcInstanceWithError(editor).formatter.match(name,vars,node,similar);};var matchAllFormats=function(editor,names,vars){return getRtcInstanceWithError(editor).formatter.matchAll(names,vars);};var matchNodeFormat=function(editor,node,name,vars,similar){return getRtcInstanceWithError(editor).formatter.matchNode(node,name,vars,similar);};var canApplyFormat=function(editor,name){return getRtcInstanceWithError(editor).formatter.canApply(name);};var closestFormat=function(editor,names){return getRtcInstanceWithError(editor).formatter.closest(names);};var applyFormat=function(editor,name,vars,node){getRtcInstanceWithError(editor).formatter.apply(name,vars,node);};var removeFormat=function(editor,name,vars,node,similar){getRtcInstanceWithError(editor).formatter.remove(name,vars,node,similar);};var toggleFormat=function(editor,name,vars,node){getRtcInstanceWithError(editor).formatter.toggle(name,vars,node);};var formatChanged=function(editor,registeredFormatListeners,formats,callback,similar,vars){return getRtcInstanceWithError(editor).formatter.formatChanged(registeredFormatListeners,formats,callback,similar,vars);};var getContent$2=function(editor,args,format){return getRtcInstanceWithFallback(editor).editor.getContent(args,format);};var setContent$2=function(editor,content,args){return getRtcInstanceWithFallback(editor).editor.setContent(content,args);};var insertContent=function(editor,value,details){return getRtcInstanceWithFallback(editor).editor.insertContent(value,details);};var getSelectedContent=function(editor,format,args){return getRtcInstanceWithError(editor).selection.getContent(format,args);};var addVisual$1=function(editor,elm){return getRtcInstanceWithError(editor).editor.addVisual(elm);};var getContent$1=function(editor,args){if(args===void 0){args={};}var format=args.format?args.format:'html';return getSelectedContent(editor,format,args);};var removeEmpty=function(text){if(text.dom.length===0){remove$7(text);return Optional.none();}else{return Optional.some(text);}};var walkPastBookmark=function(node,start){return node.filter(function(elm){return BookmarkManager.isBookmarkNode(elm.dom);}).bind(start?nextSibling:prevSibling);};var merge=function(outer,inner,rng,start){var outerElm=outer.dom;var innerElm=inner.dom;var oldLength=start?outerElm.length:innerElm.length;if(start){mergeTextNodes(outerElm,innerElm,false,!start);rng.setStart(innerElm,oldLength);}else{mergeTextNodes(innerElm,outerElm,false,!start);rng.setEnd(innerElm,oldLength);}};var normalizeTextIfRequired=function(inner,start){parent(inner).each(function(root){var text=inner.dom;if(start&&needsToBeNbspLeft(root,CaretPosition(text,0))){normalizeWhitespaceAfter(text,0);}else if(!start&&needsToBeNbspRight(root,CaretPosition(text,text.length))){normalizeWhitespaceBefore(text,text.length);}});};var mergeAndNormalizeText=function(outerNode,innerNode,rng,start){outerNode.bind(function(outer){var normalizer=start?normalizeWhitespaceBefore:normalizeWhitespaceAfter;normalizer(outer.dom,start?outer.dom.length:0);return innerNode.filter(isText$8).map(function(inner){return merge(outer,inner,rng,start);});}).orThunk(function(){var innerTextNode=walkPastBookmark(innerNode,start).or(innerNode).filter(isText$8);return innerTextNode.map(function(inner){return normalizeTextIfRequired(inner,start);});});};var rngSetContent=function(rng,fragment){var firstChild=Optional.from(fragment.firstChild).map(SugarElement.fromDom);var lastChild=Optional.from(fragment.lastChild).map(SugarElement.fromDom);rng.deleteContents();rng.insertNode(fragment);var prevText=firstChild.bind(prevSibling).filter(isText$8).bind(removeEmpty);var nextText=lastChild.bind(nextSibling).filter(isText$8).bind(removeEmpty);mergeAndNormalizeText(prevText,firstChild,rng,true);mergeAndNormalizeText(nextText,lastChild,rng,false);rng.collapse(false);};var setupArgs=function(args,content){return __assign(__assign({format:'html'},args),{set:true,selection:true,content:content});};var cleanContent=function(editor,args){if(args.format!=='raw'){var rng=editor.selection.getRng();var contextBlock=editor.dom.getParent(rng.commonAncestorContainer,editor.dom.isBlock);var contextArgs=contextBlock?{context:contextBlock.nodeName.toLowerCase()}:{};var node=editor.parser.parse(args.content,__assign(__assign({isRootContent:true,forced_root_block:false},contextArgs),args));return HtmlSerializer({validate:editor.validate},editor.schema).serialize(node);}else{return args.content;}};var setContent$1=function(editor,content,args){if(args===void 0){args={};}var defaultedArgs=setupArgs(args,content);var updatedArgs=defaultedArgs;if(!defaultedArgs.no_events){var eventArgs=editor.fire('BeforeSetContent',defaultedArgs);if(eventArgs.isDefaultPrevented()){editor.fire('SetContent',eventArgs);return;}else{updatedArgs=eventArgs;}}updatedArgs.content=cleanContent(editor,updatedArgs);var rng=editor.selection.getRng();rngSetContent(rng,rng.createContextualFragment(updatedArgs.content));editor.selection.setRng(rng);scrollRangeIntoView(editor,rng);if(!updatedArgs.no_events){editor.fire('SetContent',updatedArgs);}};var deleteFromCallbackMap=function(callbackMap,selector,callback){if(callbackMap&&has$2(callbackMap,selector)){var newCallbacks=filter$4(callbackMap[selector],function(cb){return cb!==callback;});if(newCallbacks.length===0){delete callbackMap[selector];}else{callbackMap[selector]=newCallbacks;}}};function SelectorChanged(dom,editor){var selectorChangedData;var currentSelectors;var findMatchingNode=function(selector,nodes){return find$3(nodes,function(node){return dom.is(node,selector);});};var getParents=function(elem){return dom.getParents(elem,null,dom.getRoot());};return{selectorChangedWithUnbind:function(selector,callback){if(!selectorChangedData){selectorChangedData={};currentSelectors={};editor.on('NodeChange',function(e){var node=e.element;var parents=getParents(node);var matchedSelectors={};Tools.each(selectorChangedData,function(callbacks,selector){findMatchingNode(selector,parents).each(function(node){if(!currentSelectors[selector]){each$k(callbacks,function(callback){callback(true,{node:node,selector:selector,parents:parents});});currentSelectors[selector]=callbacks;}matchedSelectors[selector]=callbacks;});});Tools.each(currentSelectors,function(callbacks,selector){if(!matchedSelectors[selector]){delete currentSelectors[selector];Tools.each(callbacks,function(callback){callback(false,{node:node,selector:selector,parents:parents});});}});});}if(!selectorChangedData[selector]){selectorChangedData[selector]=[];}selectorChangedData[selector].push(callback);findMatchingNode(selector,getParents(editor.selection.getStart())).each(function(){currentSelectors[selector]=selectorChangedData[selector];});return{unbind:function(){deleteFromCallbackMap(selectorChangedData,selector,callback);deleteFromCallbackMap(currentSelectors,selector,callback);}};}};}var isNativeIeSelection=function(rng){return!!rng.select;};var isAttachedToDom=function(node){return!!(node&&node.ownerDocument)&&contains$1(SugarElement.fromDom(node.ownerDocument),SugarElement.fromDom(node));};var isValidRange=function(rng){if(!rng){return false;}else if(isNativeIeSelection(rng)){return true;}else{return isAttachedToDom(rng.startContainer)&&isAttachedToDom(rng.endContainer);}};var EditorSelection=function(dom,win,serializer,editor){var selectedRange;var explicitRange;var selectorChangedWithUnbind=SelectorChanged(dom,editor).selectorChangedWithUnbind;var setCursorLocation=function(node,offset){var rng=dom.createRng();if(isNonNullable(node)&&isNonNullable(offset)){rng.setStart(node,offset);rng.setEnd(node,offset);setRng(rng);collapse(false);}else{moveEndPoint(dom,rng,editor.getBody(),true);setRng(rng);}};var getContent=function(args){return getContent$1(editor,args);};var setContent=function(content,args){return setContent$1(editor,content,args);};var getStart$1=function(real){return getStart(editor.getBody(),getRng$1(),real);};var getEnd$1=function(real){return getEnd(editor.getBody(),getRng$1(),real);};var getBookmark=function(type,normalized){return bookmarkManager.getBookmark(type,normalized);};var moveToBookmark=function(bookmark){return bookmarkManager.moveToBookmark(bookmark);};var select$1=function(node,content){select(dom,node,content).each(setRng);return node;};var isCollapsed=function(){var rng=getRng$1(),sel=getSel();if(!rng||rng.item){return false;}if(rng.compareEndPoints){return rng.compareEndPoints('StartToEnd',rng)===0;}return!sel||rng.collapsed;};var collapse=function(toStart){var rng=getRng$1();rng.collapse(!!toStart);setRng(rng);};var getSel=function(){return win.getSelection?win.getSelection():win.document.selection;};var getRng$1=function(){var selection,rng,elm;var tryCompareBoundaryPoints=function(how,sourceRange,destinationRange){try{return sourceRange.compareBoundaryPoints(how,destinationRange);}catch(ex){return-1;}};var doc=win.document;if(editor.bookmark!==undefined&&hasFocus(editor)===false){var bookmark=getRng(editor);if(bookmark.isSome()){return bookmark.map(function(r){return processRanges(editor,[r])[0];}).getOr(doc.createRange());}}try{if((selection=getSel())&&!isRestrictedNode(selection.anchorNode)){if(selection.rangeCount>0){rng=selection.getRangeAt(0);}else{rng=selection.createRange?selection.createRange():doc.createRange();}rng=processRanges(editor,[rng])[0];}}catch(ex){}if(!rng){rng=doc.createRange?doc.createRange():doc.body.createTextRange();}if(rng.setStart&&rng.startContainer.nodeType===9&&rng.collapsed){elm=dom.getRoot();rng.setStart(elm,0);rng.setEnd(elm,0);}if(selectedRange&&explicitRange){if(tryCompareBoundaryPoints(rng.START_TO_START,rng,selectedRange)===0&&tryCompareBoundaryPoints(rng.END_TO_END,rng,selectedRange)===0){rng=explicitRange;}else{selectedRange=null;explicitRange=null;}}return rng;};var setRng=function(rng,forward){var node;if(!isValidRange(rng)){return;}var ieRange=isNativeIeSelection(rng)?rng:null;if(ieRange){explicitRange=null;try{ieRange.select();}catch(ex){}return;}var sel=getSel();var evt=editor.fire('SetSelectionRange',{range:rng,forward:forward});rng=evt.range;if(sel){explicitRange=rng;try{sel.removeAllRanges();sel.addRange(rng);}catch(ex){}if(forward===false&&sel.extend){sel.collapse(rng.endContainer,rng.endOffset);sel.extend(rng.startContainer,rng.startOffset);}selectedRange=sel.rangeCount>0?sel.getRangeAt(0):null;}if(!rng.collapsed&&rng.startContainer===rng.endContainer&&sel.setBaseAndExtent&&!Env.ie){if(rng.endOffset-rng.startOffset<2){if(rng.startContainer.hasChildNodes()){node=rng.startContainer.childNodes[rng.startOffset];if(node&&node.tagName==='IMG'){sel.setBaseAndExtent(rng.startContainer,rng.startOffset,rng.endContainer,rng.endOffset);if(sel.anchorNode!==rng.startContainer||sel.focusNode!==rng.endContainer){sel.setBaseAndExtent(node,0,node,1);}}}}}editor.fire('AfterSetSelectionRange',{range:rng,forward:forward});};var setNode=function(elm){setContent(dom.getOuterHTML(elm));return elm;};var getNode$1=function(){return getNode(editor.getBody(),getRng$1());};var getSelectedBlocks$1=function(startElm,endElm){return getSelectedBlocks(dom,getRng$1(),startElm,endElm);};var isForward=function(){var sel=getSel();var anchorNode=sel===null||sel===void 0?void 0:sel.anchorNode;var focusNode=sel===null||sel===void 0?void 0:sel.focusNode;if(!sel||!anchorNode||!focusNode||isRestrictedNode(anchorNode)||isRestrictedNode(focusNode)){return true;}var anchorRange=dom.createRng();anchorRange.setStart(anchorNode,sel.anchorOffset);anchorRange.collapse(true);var focusRange=dom.createRng();focusRange.setStart(focusNode,sel.focusOffset);focusRange.collapse(true);return anchorRange.compareBoundaryPoints(anchorRange.START_TO_START,focusRange)<=0;};var normalize=function(){var rng=getRng$1();var sel=getSel();if(!hasMultipleRanges(sel)&&hasAnyRanges(editor)){var normRng=normalize$2(dom,rng);normRng.each(function(normRng){setRng(normRng,isForward());});return normRng.getOr(rng);}return rng;};var selectorChanged=function(selector,callback){selectorChangedWithUnbind(selector,callback);return exports;};var getScrollContainer=function(){var scrollContainer;var node=dom.getRoot();while(node&&node.nodeName!=='BODY'){if(node.scrollHeight>node.clientHeight){scrollContainer=node;break;}node=node.parentNode;}return scrollContainer;};var scrollIntoView=function(elm,alignToTop){if(isNonNullable(elm)){scrollElementIntoView(editor,elm,alignToTop);}else{scrollRangeIntoView(editor,getRng$1(),alignToTop);}};var placeCaretAt=function(clientX,clientY){return setRng(fromPoint(clientX,clientY,editor.getDoc()));};var getBoundingClientRect=function(){var rng=getRng$1();return rng.collapsed?CaretPosition.fromRangeStart(rng).getClientRects()[0]:rng.getBoundingClientRect();};var destroy=function(){win=selectedRange=explicitRange=null;controlSelection.destroy();};var exports={bookmarkManager:null,controlSelection:null,dom:dom,win:win,serializer:serializer,editor:editor,collapse:collapse,setCursorLocation:setCursorLocation,getContent:getContent,setContent:setContent,getBookmark:getBookmark,moveToBookmark:moveToBookmark,select:select$1,isCollapsed:isCollapsed,isForward:isForward,setNode:setNode,getNode:getNode$1,getSel:getSel,setRng:setRng,getRng:getRng$1,getStart:getStart$1,getEnd:getEnd$1,getSelectedBlocks:getSelectedBlocks$1,normalize:normalize,selectorChanged:selectorChanged,selectorChangedWithUnbind:selectorChangedWithUnbind,getScrollContainer:getScrollContainer,scrollIntoView:scrollIntoView,placeCaretAt:placeCaretAt,getBoundingClientRect:getBoundingClientRect,destroy:destroy};var bookmarkManager=BookmarkManager(exports);var controlSelection=ControlSelection(exports,editor);exports.bookmarkManager=bookmarkManager;exports.controlSelection=controlSelection;return exports;};var removeAttrs=function(node,names){each$k(names,function(name){node.attr(name,null);});};var addFontToSpansFilter=function(domParser,styles,fontSizes){domParser.addNodeFilter('font',function(nodes){each$k(nodes,function(node){var props=styles.parse(node.attr('style'));var color=node.attr('color');var face=node.attr('face');var size=node.attr('size');if(color){props.color=color;}if(face){props['font-family']=face;}if(size){props['font-size']=fontSizes[parseInt(node.attr('size'),10)-1];}node.name='span';node.attr('style',styles.serialize(props));removeAttrs(node,['color','face','size']);});});};var addStrikeToSpanFilter=function(domParser,styles){domParser.addNodeFilter('strike',function(nodes){each$k(nodes,function(node){var props=styles.parse(node.attr('style'));props['text-decoration']='line-through';node.name='span';node.attr('style',styles.serialize(props));});});};var addFilters=function(domParser,settings){var styles=Styles();if(settings.convert_fonts_to_spans){addFontToSpansFilter(domParser,styles,Tools.explode(settings.font_size_legacy_values));}addStrikeToSpanFilter(domParser,styles);};var register$2=function(domParser,settings){if(settings.inline_styles){addFilters(domParser,settings);}};var blobUriToBlob=function(url){return new promiseObj(function(resolve,reject){var rejectWithError=function(){reject('Cannot convert '+url+' to Blob. Resource might not exist or is inaccessible.');};try{var xhr_1=new XMLHttpRequest();xhr_1.open('GET',url,true);xhr_1.responseType='blob';xhr_1.onload=function(){if(xhr_1.status===200){resolve(xhr_1.response);}else{rejectWithError();}};xhr_1.onerror=rejectWithError;xhr_1.send();}catch(ex){rejectWithError();}});};var parseDataUri=function(uri){var type;var uriParts=decodeURIComponent(uri).split(',');var matches=/data:([^;]+)/.exec(uriParts[0]);if(matches){type=matches[1];}return{type:type,data:uriParts[1]};};var buildBlob=function(type,data){var str;try{str=atob(data);}catch(e){return Optional.none();}var arr=new Uint8Array(str.length);for(var i=0;i<arr.length;i++){arr[i]=str.charCodeAt(i);}return Optional.some(new Blob([arr],{type:type}));};var dataUriToBlob=function(uri){return new promiseObj(function(resolve){var _a=parseDataUri(uri),type=_a.type,data=_a.data;buildBlob(type,data).fold(function(){return resolve(new Blob([]));},resolve);});};var uriToBlob=function(url){if(url.indexOf('blob:')===0){return blobUriToBlob(url);}if(url.indexOf('data:')===0){return dataUriToBlob(url);}return null;};var blobToDataUri=function(blob){return new promiseObj(function(resolve){var reader=new FileReader();reader.onloadend=function(){resolve(reader.result);};reader.readAsDataURL(blob);});};var count$1=0;var uniqueId=function(prefix){return(prefix||'blobid')+count$1++;};var imageToBlobInfo=function(blobCache,img,resolve,reject){var base64,blobInfo;if(img.src.indexOf('blob:')===0){blobInfo=blobCache.getByUri(img.src);if(blobInfo){resolve({image:img,blobInfo:blobInfo});}else{uriToBlob(img.src).then(function(blob){blobToDataUri(blob).then(function(dataUri){base64=parseDataUri(dataUri).data;blobInfo=blobCache.create(uniqueId(),blob,base64);blobCache.add(blobInfo);resolve({image:img,blobInfo:blobInfo});});},function(err){reject(err);});}return;}var _a=parseDataUri(img.src),data=_a.data,type=_a.type;base64=data;blobInfo=blobCache.getByData(base64,type);if(blobInfo){resolve({image:img,blobInfo:blobInfo});}else{uriToBlob(img.src).then(function(blob){blobInfo=blobCache.create(uniqueId(),blob,base64);blobCache.add(blobInfo);resolve({image:img,blobInfo:blobInfo});},function(err){reject(err);});}};var getAllImages=function(elm){return elm?from(elm.getElementsByTagName('img')):[];};var ImageScanner=function(uploadStatus,blobCache){var cachedPromises={};var findAll=function(elm,predicate){if(!predicate){predicate=always;}var images=filter$4(getAllImages(elm),function(img){var src=img.src;if(!Env.fileApi){return false;}if(img.hasAttribute('data-mce-bogus')){return false;}if(img.hasAttribute('data-mce-placeholder')){return false;}if(!src||src===Env.transparentSrc){return false;}if(src.indexOf('blob:')===0){return!uploadStatus.isUploaded(src)&&predicate(img);}if(src.indexOf('data:')===0){return predicate(img);}return false;});var promises=map$3(images,function(img){if(cachedPromises[img.src]!==undefined){return new promiseObj(function(resolve){cachedPromises[img.src].then(function(imageInfo){if(typeof imageInfo==='string'){return imageInfo;}resolve({image:img,blobInfo:imageInfo.blobInfo});});});}var newPromise=new promiseObj(function(resolve,reject){imageToBlobInfo(blobCache,img,resolve,reject);}).then(function(result){delete cachedPromises[result.image.src];return result;}).catch(function(error){delete cachedPromises[img.src];return error;});cachedPromises[img.src]=newPromise;return newPromise;});return promiseObj.all(promises);};return{findAll:findAll};};var paddEmptyNode=function(settings,args,blockElements,node){var brPreferred=settings.padd_empty_with_br||args.insert;if(brPreferred&&blockElements[node.name]){node.empty().append(new AstNode('br',1)).shortEnded=true;}else{node.empty().append(new AstNode('#text',3)).value=nbsp;}};var isPaddedWithNbsp=function(node){return hasOnlyChild(node,'#text')&&node.firstChild.value===nbsp;};var hasOnlyChild=function(node,name){return node&&node.firstChild&&node.firstChild===node.lastChild&&node.firstChild.name===name;};var isPadded=function(schema,node){var rule=schema.getElementRule(node.name);return rule&&rule.paddEmpty;};var isEmpty=function(schema,nonEmptyElements,whitespaceElements,node){return node.isEmpty(nonEmptyElements,whitespaceElements,function(node){return isPadded(schema,node);});};var isLineBreakNode=function(node,blockElements){return node&&(has$2(blockElements,node.name)||node.name==='br');};var isBogusImage=function(img){return isNonNullable(img.attr('data-mce-bogus'));};var isInternalImageSource=function(img){return img.attr('src')===Env.transparentSrc||isNonNullable(img.attr('data-mce-placeholder'));};var isValidDataImg=function(img,settings){if(settings.images_dataimg_filter){var imgElem_1=new Image();imgElem_1.src=img.attr('src');each$j(img.attributes.map,function(value,key){imgElem_1.setAttribute(key,value);});return settings.images_dataimg_filter(imgElem_1);}else{return true;}};var registerBase64ImageFilter=function(parser,settings){var blobCache=settings.blob_cache;var processImage=function(img){var inputSrc=img.attr('src');if(isInternalImageSource(img)||isBogusImage(img)){return;}parseDataUri$1(inputSrc).filter(function(){return isValidDataImg(img,settings);}).bind(function(_a){var type=_a.type,data=_a.data;return Optional.from(blobCache.getByData(data,type)).orThunk(function(){return buildBlob(type,data).map(function(blob){var blobInfo=blobCache.create(uniqueId(),blob,data);blobCache.add(blobInfo);return blobInfo;});});}).each(function(blobInfo){img.attr('src',blobInfo.blobUri());});};if(blobCache){parser.addAttributeFilter('src',function(nodes){return each$k(nodes,processImage);});}};var register$1=function(parser,settings){var schema=parser.schema;if(settings.remove_trailing_brs){parser.addNodeFilter('br',function(nodes,_,args){var i;var l=nodes.length;var node;var blockElements=Tools.extend({},schema.getBlockElements());var nonEmptyElements=schema.getNonEmptyElements();var parent,lastParent,prev,prevName;var whiteSpaceElements=schema.getWhiteSpaceElements();var elementRule,textNode;blockElements.body=1;for(i=0;i<l;i++){node=nodes[i];parent=node.parent;if(blockElements[node.parent.name]&&node===parent.lastChild){prev=node.prev;while(prev){prevName=prev.name;if(prevName!=='span'||prev.attr('data-mce-type')!=='bookmark'){if(prevName==='br'){node=null;}break;}prev=prev.prev;}if(node){node.remove();if(isEmpty(schema,nonEmptyElements,whiteSpaceElements,parent)){elementRule=schema.getElementRule(parent.name);if(elementRule){if(elementRule.removeEmpty){parent.remove();}else if(elementRule.paddEmpty){paddEmptyNode(settings,args,blockElements,parent);}}}}}else{lastParent=node;while(parent&&parent.firstChild===lastParent&&parent.lastChild===lastParent){lastParent=parent;if(blockElements[parent.name]){break;}parent=parent.parent;}if(lastParent===parent&&settings.padd_empty_with_br!==true){textNode=new AstNode('#text',3);textNode.value=nbsp;node.replace(textNode);}}}});}parser.addAttributeFilter('href',function(nodes){var i=nodes.length;var appendRel=function(rel){var parts=rel.split(' ').filter(function(p){return p.length>0;});return parts.concat(['noopener']).sort().join(' ');};var addNoOpener=function(rel){var newRel=rel?Tools.trim(rel):'';if(!/\\b(noopener)\\b/g.test(newRel)){return appendRel(newRel);}else{return newRel;}};if(!settings.allow_unsafe_link_target){while(i--){var node=nodes[i];if(node.name==='a'&&node.attr('target')==='_blank'){node.attr('rel',addNoOpener(node.attr('rel')));}}}});if(!settings.allow_html_in_named_anchor){parser.addAttributeFilter('id,name',function(nodes){var i=nodes.length,sibling,prevSibling,parent,node;while(i--){node=nodes[i];if(node.name==='a'&&node.firstChild&&!node.attr('href')){parent=node.parent;sibling=node.lastChild;do{prevSibling=sibling.prev;parent.insert(sibling,node);sibling=prevSibling;}while(sibling);}}});}if(settings.fix_list_elements){parser.addNodeFilter('ul,ol',function(nodes){var i=nodes.length,node,parentNode;while(i--){node=nodes[i];parentNode=node.parent;if(parentNode.name==='ul'||parentNode.name==='ol'){if(node.prev&&node.prev.name==='li'){node.prev.append(node);}else{var li=new AstNode('li',1);li.attr('style','list-style-type: none');node.wrap(li);}}}});}if(settings.validate&&schema.getValidClasses()){parser.addAttributeFilter('class',function(nodes){var validClasses=schema.getValidClasses();var i=nodes.length;while(i--){var node=nodes[i];var classList=node.attr('class').split(' ');var classValue='';for(var ci=0;ci<classList.length;ci++){var className=classList[ci];var valid=false;var validClassesMap=validClasses['*'];if(validClassesMap&&validClassesMap[className]){valid=true;}validClassesMap=validClasses[node.name];if(!valid&&validClassesMap&&validClassesMap[className]){valid=true;}if(valid){if(classValue){classValue+=' ';}classValue+=className;}}if(!classValue.length){classValue=null;}node.attr('class',classValue);}});}registerBase64ImageFilter(parser,settings);};var makeMap=Tools.makeMap,each$6=Tools.each,explode$2=Tools.explode,extend$4=Tools.extend;var DomParser=function(settings,schema){if(schema===void 0){schema=Schema();}var nodeFilters={};var attributeFilters=[];var matchedNodes={};var matchedAttributes={};settings=settings||{};settings.validate='validate'in settings?settings.validate:true;settings.root_name=settings.root_name||'body';var fixInvalidChildren=function(nodes){var nonSplitableElements=makeMap('tr,td,th,tbody,thead,tfoot,table');var nonEmptyElements=schema.getNonEmptyElements();var whitespaceElements=schema.getWhiteSpaceElements();var textBlockElements=schema.getTextBlockElements();var specialElements=schema.getSpecialElements();var removeOrUnwrapInvalidNode=function(node,originalNodeParent){if(originalNodeParent===void 0){originalNodeParent=node.parent;}if(specialElements[node.name]){node.empty().remove();}else{var children=node.children();for(var _i=0,children_1=children;_i<children_1.length;_i++){var childNode=children_1[_i];if(!schema.isValidChild(originalNodeParent.name,childNode.name)){removeOrUnwrapInvalidNode(childNode,originalNodeParent);}}node.unwrap();}};for(var ni=0;ni<nodes.length;ni++){var node=nodes[ni];var parent_1=void 0,newParent=void 0,tempNode=void 0;if(!node.parent||node.fixed){continue;}if(textBlockElements[node.name]&&node.parent.name==='li'){var sibling=node.next;while(sibling){if(textBlockElements[sibling.name]){sibling.name='li';sibling.fixed=true;node.parent.insert(sibling,node.parent);}else{break;}sibling=sibling.next;}node.unwrap();continue;}var parents=[node];for(parent_1=node.parent;parent_1&&!schema.isValidChild(parent_1.name,node.name)&&!nonSplitableElements[parent_1.name];parent_1=parent_1.parent){parents.push(parent_1);}if(parent_1&&parents.length>1){if(schema.isValidChild(parent_1.name,node.name)){parents.reverse();newParent=filterNode(parents[0].clone());var currentNode=newParent;for(var i=0;i<parents.length-1;i++){if(schema.isValidChild(currentNode.name,parents[i].name)){tempNode=filterNode(parents[i].clone());currentNode.append(tempNode);}else{tempNode=currentNode;}for(var childNode=parents[i].firstChild;childNode&&childNode!==parents[i+1];){var nextNode=childNode.next;tempNode.append(childNode);childNode=nextNode;}currentNode=tempNode;}if(!isEmpty(schema,nonEmptyElements,whitespaceElements,newParent)){parent_1.insert(newParent,parents[0],true);parent_1.insert(node,newParent);}else{parent_1.insert(node,parents[0],true);}parent_1=parents[0];if(isEmpty(schema,nonEmptyElements,whitespaceElements,parent_1)||hasOnlyChild(parent_1,'br')){parent_1.empty().remove();}}else{removeOrUnwrapInvalidNode(node);}}else if(node.parent){if(node.name==='li'){var sibling=node.prev;if(sibling&&(sibling.name==='ul'||sibling.name==='ol')){sibling.append(node);continue;}sibling=node.next;if(sibling&&(sibling.name==='ul'||sibling.name==='ol')){sibling.insert(node,sibling.firstChild,true);continue;}node.wrap(filterNode(new AstNode('ul',1)));continue;}if(schema.isValidChild(node.parent.name,'div')&&schema.isValidChild('div',node.name)){node.wrap(filterNode(new AstNode('div',1)));}else{removeOrUnwrapInvalidNode(node);}}}};var filterNode=function(node){var name=node.name;if(name in nodeFilters){var list=matchedNodes[name];if(list){list.push(node);}else{matchedNodes[name]=[node];}}var i=attributeFilters.length;while(i--){var attrName=attributeFilters[i].name;if(attrName in node.attributes.map){var list=matchedAttributes[attrName];if(list){list.push(node);}else{matchedAttributes[attrName]=[node];}}}return node;};var addNodeFilter=function(name,callback){each$6(explode$2(name),function(name){var list=nodeFilters[name];if(!list){nodeFilters[name]=list=[];}list.push(callback);});};var getNodeFilters=function(){var out=[];for(var name_1 in nodeFilters){if(has$2(nodeFilters,name_1)){out.push({name:name_1,callbacks:nodeFilters[name_1]});}}return out;};var addAttributeFilter=function(name,callback){each$6(explode$2(name),function(name){var i;for(i=0;i<attributeFilters.length;i++){if(attributeFilters[i].name===name){attributeFilters[i].callbacks.push(callback);return;}}attributeFilters.push({name:name,callbacks:[callback]});});};var getAttributeFilters=function(){return[].concat(attributeFilters);};var parse=function(html,args){var nodes,i,l,fi,fl,list,name;var invalidChildren=[];var node;var getRootBlockName=function(name){if(name===false){return'';}else if(name===true){return'p';}else{return name;}};args=args||{};matchedNodes={};matchedAttributes={};var blockElements=extend$4(makeMap('script,style,head,html,body,title,meta,param'),schema.getBlockElements());var textRootBlockElements=getTextRootBlockElements(schema);var nonEmptyElements=schema.getNonEmptyElements();var children=schema.children;var validate=settings.validate;var forcedRootBlockName='forced_root_block'in args?args.forced_root_block:settings.forced_root_block;var rootBlockName=getRootBlockName(forcedRootBlockName);var whiteSpaceElements=schema.getWhiteSpaceElements();var startWhiteSpaceRegExp=/^[ \\t\\r\\n]+/;var endWhiteSpaceRegExp=/[ \\t\\r\\n]+$/;var allWhiteSpaceRegExp=/[ \\t\\r\\n]+/g;var isAllWhiteSpaceRegExp=/^[ \\t\\r\\n]+$/;var isInWhiteSpacePreservedElement=has$2(whiteSpaceElements,args.context)||has$2(whiteSpaceElements,settings.root_name);var addRootBlocks=function(){var node=rootNode.firstChild,rootBlockNode=null;var trim=function(rootBlock){if(rootBlock){node=rootBlock.firstChild;if(node&&node.type===3){node.value=node.value.replace(startWhiteSpaceRegExp,'');}node=rootBlock.lastChild;if(node&&node.type===3){node.value=node.value.replace(endWhiteSpaceRegExp,'');}}};if(!schema.isValidChild(rootNode.name,rootBlockName.toLowerCase())){return;}while(node){var next=node.next;if(node.type===3||node.type===1&&node.name!=='p'&&!blockElements[node.name]&&!node.attr('data-mce-type')){if(!rootBlockNode){rootBlockNode=createNode(rootBlockName,1);rootBlockNode.attr(settings.forced_root_block_attrs);rootNode.insert(rootBlockNode,node);rootBlockNode.append(node);}else{rootBlockNode.append(node);}}else{trim(rootBlockNode);rootBlockNode=null;}node=next;}trim(rootBlockNode);};var createNode=function(name,type){var node=new AstNode(name,type);var list;if(name in nodeFilters){list=matchedNodes[name];if(list){list.push(node);}else{matchedNodes[name]=[node];}}return node;};var removeWhitespaceBefore=function(node){var blockElements=schema.getBlockElements();for(var textNode=node.prev;textNode&&textNode.type===3;){var textVal=textNode.value.replace(endWhiteSpaceRegExp,'');if(textVal.length>0){textNode.value=textVal;return;}var textNodeNext=textNode.next;if(textNodeNext){if(textNodeNext.type===3&&textNodeNext.value.length){textNode=textNode.prev;continue;}if(!blockElements[textNodeNext.name]&&textNodeNext.name!=='script'&&textNodeNext.name!=='style'){textNode=textNode.prev;continue;}}var sibling=textNode.prev;textNode.remove();textNode=sibling;}};var cloneAndExcludeBlocks=function(input){var output={};for(var name_2 in input){if(name_2!=='li'&&name_2!=='p'){output[name_2]=input[name_2];}}return output;};var isTextRootBlockEmpty=function(node){var tempNode=node;while(isNonNullable(tempNode)){if(tempNode.name in textRootBlockElements){return isEmpty(schema,nonEmptyElements,whiteSpaceElements,tempNode);}else{tempNode=tempNode.parent;}}return false;};var parser=SaxParser({validate:validate,document:settings.document,allow_html_data_urls:settings.allow_html_data_urls,allow_svg_data_urls:settings.allow_svg_data_urls,allow_script_urls:settings.allow_script_urls,allow_conditional_comments:settings.allow_conditional_comments,preserve_cdata:settings.preserve_cdata,self_closing_elements:cloneAndExcludeBlocks(schema.getSelfClosingElements()),cdata:function(text){node.append(createNode('#cdata',4)).value=text;},text:function(text,raw){var textNode;if(!isInWhiteSpacePreservedElement){text=text.replace(allWhiteSpaceRegExp,' ');if(isLineBreakNode(node.lastChild,blockElements)){text=text.replace(startWhiteSpaceRegExp,'');}}if(text.length!==0){textNode=createNode('#text',3);textNode.raw=!!raw;node.append(textNode).value=text;}},comment:function(text){node.append(createNode('#comment',8)).value=text;},pi:function(name,text){node.append(createNode(name,7)).value=text;removeWhitespaceBefore(node);},doctype:function(text){var newNode=node.append(createNode('#doctype',10));newNode.value=text;removeWhitespaceBefore(node);},start:function(name,attrs,empty){var elementRule=validate?schema.getElementRule(name):{};if(elementRule){var newNode=createNode(elementRule.outputName||name,1);newNode.attributes=attrs;newNode.shortEnded=empty;node.append(newNode);var parent_2=children[node.name];if(parent_2&&children[newNode.name]&&!parent_2[newNode.name]){invalidChildren.push(newNode);}var attrFiltersLen=attributeFilters.length;while(attrFiltersLen--){var attrName=attributeFilters[attrFiltersLen].name;if(attrName in attrs.map){list=matchedAttributes[attrName];if(list){list.push(newNode);}else{matchedAttributes[attrName]=[newNode];}}}if(blockElements[name]){removeWhitespaceBefore(newNode);}if(!empty){node=newNode;}if(!isInWhiteSpacePreservedElement&&whiteSpaceElements[name]){isInWhiteSpacePreservedElement=true;}}},end:function(name){var textNode,text,sibling;var elementRule=validate?schema.getElementRule(name):{};if(elementRule){if(blockElements[name]){if(!isInWhiteSpacePreservedElement){textNode=node.firstChild;if(textNode&&textNode.type===3){text=textNode.value.replace(startWhiteSpaceRegExp,'');if(text.length>0){textNode.value=text;textNode=textNode.next;}else{sibling=textNode.next;textNode.remove();textNode=sibling;while(textNode&&textNode.type===3){text=textNode.value;sibling=textNode.next;if(text.length===0||isAllWhiteSpaceRegExp.test(text)){textNode.remove();textNode=sibling;}textNode=sibling;}}}textNode=node.lastChild;if(textNode&&textNode.type===3){text=textNode.value.replace(endWhiteSpaceRegExp,'');if(text.length>0){textNode.value=text;textNode=textNode.prev;}else{sibling=textNode.prev;textNode.remove();textNode=sibling;while(textNode&&textNode.type===3){text=textNode.value;sibling=textNode.prev;if(text.length===0||isAllWhiteSpaceRegExp.test(text)){textNode.remove();textNode=sibling;}textNode=sibling;}}}}}if(isInWhiteSpacePreservedElement&&whiteSpaceElements[name]){isInWhiteSpacePreservedElement=false;}var isNodeEmpty=isEmpty(schema,nonEmptyElements,whiteSpaceElements,node);var parentNode=node.parent;if(elementRule.paddInEmptyBlock&&isNodeEmpty&&isTextRootBlockEmpty(node)){paddEmptyNode(settings,args,blockElements,node);}else if(elementRule.removeEmpty&&isNodeEmpty){if(blockElements[node.name]){node.empty().remove();}else{node.unwrap();}}else if(elementRule.paddEmpty&&(isPaddedWithNbsp(node)||isNodeEmpty)){paddEmptyNode(settings,args,blockElements,node);}node=parentNode;}}},schema);var rootNode=node=new AstNode(args.context||settings.root_name,11);parser.parse(html,args.format);if(validate&&invalidChildren.length){if(!args.context){fixInvalidChildren(invalidChildren);}else{args.invalid=true;}}if(rootBlockName&&(rootNode.name==='body'||args.isRootContent)){addRootBlocks();}if(!args.invalid){for(name in matchedNodes){if(!has$2(matchedNodes,name)){continue;}list=nodeFilters[name];nodes=matchedNodes[name];fi=nodes.length;while(fi--){if(!nodes[fi].parent){nodes.splice(fi,1);}}for(i=0,l=list.length;i<l;i++){list[i](nodes,name,args);}}for(i=0,l=attributeFilters.length;i<l;i++){list=attributeFilters[i];if(list.name in matchedAttributes){nodes=matchedAttributes[list.name];fi=nodes.length;while(fi--){if(!nodes[fi].parent){nodes.splice(fi,1);}}for(fi=0,fl=list.callbacks.length;fi<fl;fi++){list.callbacks[fi](nodes,list.name,args);}}}}return rootNode;};var exports={schema:schema,addAttributeFilter:addAttributeFilter,getAttributeFilters:getAttributeFilters,addNodeFilter:addNodeFilter,getNodeFilters:getNodeFilters,filterNode:filterNode,parse:parse};register$1(exports,settings);register$2(exports,settings);return exports;};var register=function(htmlParser,settings,dom){htmlParser.addAttributeFilter('data-mce-tabindex',function(nodes,name){var i=nodes.length;while(i--){var node=nodes[i];node.attr('tabindex',node.attr('data-mce-tabindex'));node.attr(name,null);}});htmlParser.addAttributeFilter('src,href,style',function(nodes,name){var internalName='data-mce-'+name;var urlConverter=settings.url_converter;var urlConverterScope=settings.url_converter_scope;var i=nodes.length;while(i--){var node=nodes[i];var value=node.attr(internalName);if(value!==undefined){node.attr(name,value.length>0?value:null);node.attr(internalName,null);}else{value=node.attr(name);if(name==='style'){value=dom.serializeStyle(dom.parseStyle(value),node.name);}else if(urlConverter){value=urlConverter.call(urlConverterScope,value,name,node.name);}node.attr(name,value.length>0?value:null);}}});htmlParser.addAttributeFilter('class',function(nodes){var i=nodes.length;while(i--){var node=nodes[i];var value=node.attr('class');if(value){value=node.attr('class').replace(/(?:^|\\s)mce-item-\\w+(?!\\S)/g,'');node.attr('class',value.length>0?value:null);}}});htmlParser.addAttributeFilter('data-mce-type',function(nodes,name,args){var i=nodes.length;while(i--){var node=nodes[i];if(node.attr('data-mce-type')==='bookmark'&&!args.cleanup){var hasChildren=Optional.from(node.firstChild).exists(function(firstChild){return!isZwsp(firstChild.value);});if(hasChildren){node.unwrap();}else{node.remove();}}}});htmlParser.addNodeFilter('noscript',function(nodes){var i=nodes.length;while(i--){var node=nodes[i].firstChild;if(node){node.value=Entities.decode(node.value);}}});htmlParser.addNodeFilter('script,style',function(nodes,name){var trim=function(value){return value.replace(/(<!--\\[CDATA\\[|\\]\\]-->)/g,'\\n').replace(/^[\\r\\n]*|[\\r\\n]*$/g,'').replace(/^\\s*((<!--)?(\\s*\\/\\/)?\\s*<!\\[CDATA\\[|(<!--\\s*)?\\/\\*\\s*<!\\[CDATA\\[\\s*\\*\\/|(\\/\\/)?\\s*<!--|\\/\\*\\s*<!--\\s*\\*\\/)\\s*[\\r\\n]*/gi,'').replace(/\\s*(\\/\\*\\s*\\]\\]>\\s*\\*\\/(-->)?|\\s*\\/\\/\\s*\\]\\]>(-->)?|\\/\\/\\s*(-->)?|\\]\\]>|\\/\\*\\s*-->\\s*\\*\\/|\\s*-->\\s*)\\s*$/g,'');};var i=nodes.length;while(i--){var node=nodes[i];var value=node.firstChild?node.firstChild.value:'';if(name==='script'){var type=node.attr('type');if(type){node.attr('type',type==='mce-no/type'?null:type.replace(/^mce\\-/,''));}if(settings.element_format==='xhtml'&&value.length>0){node.firstChild.value='// <![CDATA[\\n'+trim(value)+'\\n// ]]>';}}else{if(settings.element_format==='xhtml'&&value.length>0){node.firstChild.value='<!--\\n'+trim(value)+'\\n-->';}}}});htmlParser.addNodeFilter('#comment',function(nodes){var i=nodes.length;while(i--){var node=nodes[i];if(settings.preserve_cdata&&node.value.indexOf('[CDATA[')===0){node.name='#cdata';node.type=4;node.value=dom.decode(node.value.replace(/^\\[CDATA\\[|\\]\\]$/g,''));}else if(node.value.indexOf('mce:protected ')===0){node.name='#text';node.type=3;node.raw=true;node.value=unescape(node.value).substr(14);}}});htmlParser.addNodeFilter('xml:namespace,input',function(nodes,name){var i=nodes.length;while(i--){var node=nodes[i];if(node.type===7){node.remove();}else if(node.type===1){if(name==='input'&&!node.attr('type')){node.attr('type','text');}}}});htmlParser.addAttributeFilter('data-mce-type',function(nodes){each$k(nodes,function(node){if(node.attr('data-mce-type')==='format-caret'){if(node.isEmpty(htmlParser.schema.getNonEmptyElements())){node.remove();}else{node.unwrap();}}});});htmlParser.addAttributeFilter('data-mce-src,data-mce-href,data-mce-style,'+'data-mce-selected,data-mce-expando,'+'data-mce-type,data-mce-resize,data-mce-placeholder',function(nodes,name){var i=nodes.length;while(i--){nodes[i].attr(name,null);}});};var trimTrailingBr=function(rootNode){var isBr=function(node){return node&&node.name==='br';};var brNode1=rootNode.lastChild;if(isBr(brNode1)){var brNode2=brNode1.prev;if(isBr(brNode2)){brNode1.remove();brNode2.remove();}}};var preProcess=function(editor,node,args){var oldDoc;var dom=editor.dom;var clonedNode=node.cloneNode(true);var impl=document.implementation;if(impl.createHTMLDocument){var doc_1=impl.createHTMLDocument('');Tools.each(clonedNode.nodeName==='BODY'?clonedNode.childNodes:[clonedNode],function(node){doc_1.body.appendChild(doc_1.importNode(node,true));});if(clonedNode.nodeName!=='BODY'){clonedNode=doc_1.body.firstChild;}else{clonedNode=doc_1.body;}oldDoc=dom.doc;dom.doc=doc_1;}firePreProcess(editor,__assign(__assign({},args),{node:clonedNode}));if(oldDoc){dom.doc=oldDoc;}return clonedNode;};var shouldFireEvent=function(editor,args){return editor&&editor.hasEventListeners('PreProcess')&&!args.no_events;};var process=function(editor,node,args){return shouldFireEvent(editor,args)?preProcess(editor,node,args):node;};var addTempAttr=function(htmlParser,tempAttrs,name){if(Tools.inArray(tempAttrs,name)===-1){htmlParser.addAttributeFilter(name,function(nodes,name){var i=nodes.length;while(i--){nodes[i].attr(name,null);}});tempAttrs.push(name);}};var postProcess=function(editor,args,content){if(!args.no_events&&editor){var outArgs=firePostProcess(editor,__assign(__assign({},args),{content:content}));return outArgs.content;}else{return content;}};var getHtmlFromNode=function(dom,node,args){var html=trim$2(args.getInner?node.innerHTML:dom.getOuterHTML(node));return args.selection||isWsPreserveElement(SugarElement.fromDom(node))?html:Tools.trim(html);};var parseHtml=function(htmlParser,html,args){var parserArgs=args.selection?__assign({forced_root_block:false},args):args;var rootNode=htmlParser.parse(html,parserArgs);trimTrailingBr(rootNode);return rootNode;};var serializeNode=function(settings,schema,node){var htmlSerializer=HtmlSerializer(settings,schema);return htmlSerializer.serialize(node);};var toHtml=function(editor,settings,schema,rootNode,args){var content=serializeNode(settings,schema,rootNode);return postProcess(editor,args,content);};var DomSerializerImpl=function(settings,editor){var tempAttrs=['data-mce-selected'];var dom=editor&&editor.dom?editor.dom:DOMUtils.DOM;var schema=editor&&editor.schema?editor.schema:Schema(settings);settings.entity_encoding=settings.entity_encoding||'named';settings.remove_trailing_brs='remove_trailing_brs'in settings?settings.remove_trailing_brs:true;var htmlParser=DomParser(settings,schema);register(htmlParser,settings,dom);var serialize=function(node,parserArgs){if(parserArgs===void 0){parserArgs={};}var args=__assign({format:'html'},parserArgs);var targetNode=process(editor,node,args);var html=getHtmlFromNode(dom,targetNode,args);var rootNode=parseHtml(htmlParser,html,args);return args.format==='tree'?rootNode:toHtml(editor,settings,schema,rootNode,args);};return{schema:schema,addNodeFilter:htmlParser.addNodeFilter,addAttributeFilter:htmlParser.addAttributeFilter,serialize:serialize,addRules:schema.addValidElements,setRules:schema.setValidElements,addTempAttr:curry(addTempAttr,htmlParser,tempAttrs),getTempAttrs:constant(tempAttrs),getNodeFilters:htmlParser.getNodeFilters,getAttributeFilters:htmlParser.getAttributeFilters};};var DomSerializer=function(settings,editor){var domSerializer=DomSerializerImpl(settings,editor);return{schema:domSerializer.schema,addNodeFilter:domSerializer.addNodeFilter,addAttributeFilter:domSerializer.addAttributeFilter,serialize:domSerializer.serialize,addRules:domSerializer.addRules,setRules:domSerializer.setRules,addTempAttr:domSerializer.addTempAttr,getTempAttrs:domSerializer.getTempAttrs,getNodeFilters:domSerializer.getNodeFilters,getAttributeFilters:domSerializer.getAttributeFilters};};var defaultFormat='html';var getContent=function(editor,args){if(args===void 0){args={};}var format=args.format?args.format:defaultFormat;return getContent$2(editor,args,format);};var setContent=function(editor,content,args){if(args===void 0){args={};}return setContent$2(editor,content,args);};var DOM$7=DOMUtils.DOM;var restoreOriginalStyles=function(editor){DOM$7.setStyle(editor.id,'display',editor.orgDisplay);};var safeDestroy=function(x){return Optional.from(x).each(function(x){return x.destroy();});};var clearDomReferences=function(editor){editor.contentAreaContainer=editor.formElement=editor.container=editor.editorContainer=null;editor.bodyElement=editor.contentDocument=editor.contentWindow=null;editor.iframeElement=editor.targetElm=null;if(editor.selection){editor.selection=editor.selection.win=editor.selection.dom=editor.selection.dom.doc=null;}};var restoreForm=function(editor){var form=editor.formElement;if(form){if(form._mceOldSubmit){form.submit=form._mceOldSubmit;form._mceOldSubmit=null;}DOM$7.unbind(form,'submit reset',editor.formEventDelegate);}};var remove=function(editor){if(!editor.removed){var _selectionOverrides=editor._selectionOverrides,editorUpload=editor.editorUpload;var body=editor.getBody();var element=editor.getElement();if(body){editor.save({is_removing:true});}editor.removed=true;editor.unbindAllNativeEvents();if(editor.hasHiddenInput&&element){DOM$7.remove(element.nextSibling);}fireRemove(editor);editor.editorManager.remove(editor);if(!editor.inline&&body){restoreOriginalStyles(editor);}fireDetach(editor);DOM$7.remove(editor.getContainer());safeDestroy(_selectionOverrides);safeDestroy(editorUpload);editor.destroy();}};var destroy=function(editor,automatic){var selection=editor.selection,dom=editor.dom;if(editor.destroyed){return;}if(!automatic&&!editor.removed){editor.remove();return;}if(!automatic){editor.editorManager.off('beforeunload',editor._beforeUnload);if(editor.theme&&editor.theme.destroy){editor.theme.destroy();}safeDestroy(selection);safeDestroy(dom);}restoreForm(editor);clearDomReferences(editor);editor.destroyed=true;};var deep=function(old,nu){var bothObjects=isObject(old)&&isObject(nu);return bothObjects?deepMerge(old,nu):nu;};var baseMerge=function(merger){return function(){var objects=[];for(var _i=0;_i<arguments.length;_i++){objects[_i]=arguments[_i];}if(objects.length===0){throw new Error('Can\\'t merge zero objects');}var ret={};for(var j=0;j<objects.length;j++){var curObject=objects[j];for(var key in curObject){if(has$2(curObject,key)){ret[key]=merger(ret[key],curObject[key]);}}}return ret;};};var deepMerge=baseMerge(deep);var deprecatedSettings=('autoresize_on_init,content_editable_state,convert_fonts_to_spans,inline_styles,padd_empty_with_br,block_elements,'+'boolean_attributes,editor_deselector,editor_selector,elements,file_browser_callback_types,filepicker_validator_handler,'+'force_hex_style_colors,force_p_newlines,gecko_spellcheck,images_dataimg_filter,media_scripts,mode,move_caret_before_on_enter_elements,'+'non_empty_elements,self_closing_elements,short_ended_elements,special,spellchecker_select_languages,spellchecker_whitelist,'+'tab_focus,table_responsive_width,text_block_elements,text_inline_elements,toolbar_drawer,types,validate,whitespace_elements,'+'paste_word_valid_elements,paste_retain_style_properties,paste_convert_word_fake_lists').split(',');var deprecatedPlugins='bbcode,colorpicker,contextmenu,fullpage,legacyoutput,spellchecker,textcolor'.split(',');var movedToPremiumPlugins='imagetools,toc'.split(',');var getDeprecatedSettings=function(settings){var settingNames=filter$4(deprecatedSettings,function(setting){return has$2(settings,setting);});var forcedRootBlock=settings.forced_root_block;if(forcedRootBlock===false||forcedRootBlock===''){settingNames.push('forced_root_block (false only)');}return sort(settingNames);};var getDeprecatedPlugins=function(settings){var plugins=Tools.makeMap(settings.plugins,' ');var hasPlugin=function(plugin){return has$2(plugins,plugin);};var pluginNames=__spreadArray(__spreadArray([],filter$4(deprecatedPlugins,hasPlugin),true),bind(movedToPremiumPlugins,function(plugin){return hasPlugin(plugin)?[plugin+' (moving to premium)']:[];}),true);return sort(pluginNames);};var logDeprecationsWarning=function(rawSettings,finalSettings){var deprecatedSettings=getDeprecatedSettings(rawSettings);var deprecatedPlugins=getDeprecatedPlugins(finalSettings);var hasDeprecatedPlugins=deprecatedPlugins.length>0;var hasDeprecatedSettings=deprecatedSettings.length>0;var isLegacyMobileTheme=finalSettings.theme==='mobile';if(hasDeprecatedPlugins||hasDeprecatedSettings||isLegacyMobileTheme){var listJoiner='\\n- ';var themesMessage=isLegacyMobileTheme?'\\n\\nThemes:'+listJoiner+'mobile':'';var pluginsMessage=hasDeprecatedPlugins?'\\n\\nPlugins:'+listJoiner+deprecatedPlugins.join(listJoiner):'';var settingsMessage=hasDeprecatedSettings?'\\n\\nSettings:'+listJoiner+deprecatedSettings.join(listJoiner):'';console.warn('The following deprecated features are currently enabled, these will be removed in TinyMCE 6.0. '+'See https://www.tiny.cloud/docs/release-notes/6.0-upcoming-changes/ for more information.'+themesMessage+pluginsMessage+settingsMessage);}};var sectionResult=function(sections,settings){return{sections:constant(sections),settings:constant(settings)};};var deviceDetection=detect().deviceType;var isTouch=deviceDetection.isTouch();var isPhone=deviceDetection.isPhone();var isTablet=deviceDetection.isTablet();var legacyMobilePlugins=['lists','autolink','autosave'];var defaultTouchSettings={table_grid:false,object_resizing:false,resize:false};var normalizePlugins=function(plugins){var pluginNames=isArray$1(plugins)?plugins.join(' '):plugins;var trimmedPlugins=map$3(isString$1(pluginNames)?pluginNames.split(' '):[],trim$4);return filter$4(trimmedPlugins,function(item){return item.length>0;});};var filterLegacyMobilePlugins=function(plugins){return filter$4(plugins,curry(contains$3,legacyMobilePlugins));};var extractSections=function(keys,settings){var result=bifilter(settings,function(value,key){return contains$3(keys,key);});return sectionResult(result.t,result.f);};var getSection=function(sectionResult,name,defaults){if(defaults===void 0){defaults={};}var sections=sectionResult.sections();var sectionSettings=get$9(sections,name).getOr({});return Tools.extend({},defaults,sectionSettings);};var hasSection=function(sectionResult,name){return has$2(sectionResult.sections(),name);};var isSectionTheme=function(sectionResult,name,theme){var section=sectionResult.sections();return hasSection(sectionResult,name)&&section[name].theme===theme;};var getSectionConfig=function(sectionResult,name){return hasSection(sectionResult,name)?sectionResult.sections()[name]:{};};var getToolbarMode=function(settings,defaultVal){return get$9(settings,'toolbar_mode').orThunk(function(){return get$9(settings,'toolbar_drawer').map(function(val){return val===false?'wrap':val;});}).getOr(defaultVal);};var getDefaultSettings=function(settings,id,documentBaseUrl,isTouch,editor){var baseDefaults={id:id,theme:'silver',toolbar_mode:getToolbarMode(settings,'floating'),plugins:'',document_base_url:documentBaseUrl,add_form_submit_trigger:true,submit_patch:true,add_unload_trigger:true,convert_urls:true,relative_urls:true,remove_script_host:true,object_resizing:true,doctype:'<!DOCTYPE html>',visual:true,font_size_legacy_values:'xx-small,small,medium,large,x-large,xx-large,300%',forced_root_block:'p',hidden_input:true,inline_styles:true,convert_fonts_to_spans:true,indent:true,indent_before:'p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,th,ul,ol,li,dl,dt,dd,area,table,thead,'+'tfoot,tbody,tr,section,summary,article,hgroup,aside,figure,figcaption,option,optgroup,datalist',indent_after:'p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,th,ul,ol,li,dl,dt,dd,area,table,thead,'+'tfoot,tbody,tr,section,summary,article,hgroup,aside,figure,figcaption,option,optgroup,datalist',entity_encoding:'named',url_converter:editor.convertURL,url_converter_scope:editor};return __assign(__assign({},baseDefaults),isTouch?defaultTouchSettings:{});};var getDefaultMobileSettings=function(mobileSettings,isPhone){var defaultMobileSettings={resize:false,toolbar_mode:getToolbarMode(mobileSettings,'scrolling'),toolbar_sticky:false};var defaultPhoneSettings={menubar:false};return __assign(__assign(__assign({},defaultTouchSettings),defaultMobileSettings),isPhone?defaultPhoneSettings:{});};var getExternalPlugins=function(overrideSettings,settings){var userDefinedExternalPlugins=settings.external_plugins?settings.external_plugins:{};if(overrideSettings&&overrideSettings.external_plugins){return Tools.extend({},overrideSettings.external_plugins,userDefinedExternalPlugins);}else{return userDefinedExternalPlugins;}};var combinePlugins=function(forcedPlugins,plugins){return[].concat(normalizePlugins(forcedPlugins)).concat(normalizePlugins(plugins));};var getPlatformPlugins=function(isMobileDevice,sectionResult,desktopPlugins,mobilePlugins){if(isMobileDevice&&isSectionTheme(sectionResult,'mobile','mobile')){return filterLegacyMobilePlugins(mobilePlugins);}else if(isMobileDevice&&hasSection(sectionResult,'mobile')){return mobilePlugins;}else{return desktopPlugins;}};var processPlugins=function(isMobileDevice,sectionResult,defaultOverrideSettings,settings){var forcedPlugins=normalizePlugins(defaultOverrideSettings.forced_plugins);var desktopPlugins=normalizePlugins(settings.plugins);var mobileConfig=getSectionConfig(sectionResult,'mobile');var mobilePlugins=mobileConfig.plugins?normalizePlugins(mobileConfig.plugins):desktopPlugins;var platformPlugins=getPlatformPlugins(isMobileDevice,sectionResult,desktopPlugins,mobilePlugins);var combinedPlugins=combinePlugins(forcedPlugins,platformPlugins);if(Env.browser.isIE()&&contains$3(combinedPlugins,'rtc')){throw new Error('RTC plugin is not supported on IE 11.');}return Tools.extend(settings,{plugins:combinedPlugins.join(' ')});};var isOnMobile=function(isMobileDevice,sectionResult){return isMobileDevice&&hasSection(sectionResult,'mobile');};var combineSettings=function(isMobileDevice,isPhone,defaultSettings,defaultOverrideSettings,settings){var defaultDeviceSettings=isMobileDevice?{mobile:getDefaultMobileSettings(settings.mobile||{},isPhone)}:{};var sectionResult=extractSections(['mobile'],deepMerge(defaultDeviceSettings,settings));var extendedSettings=Tools.extend(defaultSettings,defaultOverrideSettings,sectionResult.settings(),isOnMobile(isMobileDevice,sectionResult)?getSection(sectionResult,'mobile'):{},{validate:true,external_plugins:getExternalPlugins(defaultOverrideSettings,sectionResult.settings())});return processPlugins(isMobileDevice,sectionResult,defaultOverrideSettings,extendedSettings);};var getEditorSettings=function(editor,id,documentBaseUrl,defaultOverrideSettings,settings){var defaultSettings=getDefaultSettings(settings,id,documentBaseUrl,isTouch,editor);var finalSettings=combineSettings(isPhone||isTablet,isPhone,defaultSettings,defaultOverrideSettings,settings);if(finalSettings.deprecation_warnings!==false){logDeprecationsWarning(settings,finalSettings);}return finalSettings;};var getFiltered=function(predicate,editor,name){return Optional.from(editor.settings[name]).filter(predicate);};var getParamObject=function(value){var output={};if(typeof value==='string'){each$k(value.indexOf('=')>0?value.split(/[;,](?![^=;,]*(?:[;,]|$))/):value.split(','),function(val){var arr=val.split('=');if(arr.length>1){output[Tools.trim(arr[0])]=Tools.trim(arr[1]);}else{output[Tools.trim(arr[0])]=Tools.trim(arr[0]);}});}else{output=value;}return output;};var isArrayOf=function(p){return function(a){return isArray$1(a)&&forall(a,p);};};var getParam=function(editor,name,defaultVal,type){var value=name in editor.settings?editor.settings[name]:defaultVal;if(type==='hash'){return getParamObject(value);}else if(type==='string'){return getFiltered(isString$1,editor,name).getOr(defaultVal);}else if(type==='number'){return getFiltered(isNumber,editor,name).getOr(defaultVal);}else if(type==='boolean'){return getFiltered(isBoolean,editor,name).getOr(defaultVal);}else if(type==='object'){return getFiltered(isObject,editor,name).getOr(defaultVal);}else if(type==='array'){return getFiltered(isArray$1,editor,name).getOr(defaultVal);}else if(type==='string[]'){return getFiltered(isArrayOf(isString$1),editor,name).getOr(defaultVal);}else if(type==='function'){return getFiltered(isFunction,editor,name).getOr(defaultVal);}else{return value;}};var CreateIconManager=function(){var lookup={};var add=function(id,iconPack){lookup[id]=iconPack;};var get=function(id){if(lookup[id]){return lookup[id];}return{icons:{}};};var has=function(id){return has$2(lookup,id);};return{add:add,get:get,has:has};};var IconManager=CreateIconManager();var getProp=function(propName,elm){var rawElm=elm.dom;return rawElm[propName];};var getComputedSizeProp=function(propName,elm){return parseInt(get$5(elm,propName),10);};var getClientWidth=curry(getProp,'clientWidth');var getClientHeight=curry(getProp,'clientHeight');var getMarginTop=curry(getComputedSizeProp,'margin-top');var getMarginLeft=curry(getComputedSizeProp,'margin-left');var getBoundingClientRect=function(elm){return elm.dom.getBoundingClientRect();};var isInsideElementContentArea=function(bodyElm,clientX,clientY){var clientWidth=getClientWidth(bodyElm);var clientHeight=getClientHeight(bodyElm);return clientX>=0&&clientY>=0&&clientX<=clientWidth&&clientY<=clientHeight;};var transpose=function(inline,elm,clientX,clientY){var clientRect=getBoundingClientRect(elm);var deltaX=inline?clientRect.left+elm.dom.clientLeft+getMarginLeft(elm):0;var deltaY=inline?clientRect.top+elm.dom.clientTop+getMarginTop(elm):0;var x=clientX-deltaX;var y=clientY-deltaY;return{x:x,y:y};};var isXYInContentArea=function(editor,clientX,clientY){var bodyElm=SugarElement.fromDom(editor.getBody());var targetElm=editor.inline?bodyElm:documentElement(bodyElm);var transposedPoint=transpose(editor.inline,targetElm,clientX,clientY);return isInsideElementContentArea(targetElm,transposedPoint.x,transposedPoint.y);};var fromDomSafe=function(node){return Optional.from(node).map(SugarElement.fromDom);};var isEditorAttachedToDom=function(editor){var rawContainer=editor.inline?editor.getBody():editor.getContentAreaContainer();return fromDomSafe(rawContainer).map(inBody).getOr(false);};var NotificationManagerImpl=function(){var unimplemented=function(){throw new Error('Theme did not provide a NotificationManager implementation.');};return{open:unimplemented,close:unimplemented,reposition:unimplemented,getArgs:unimplemented};};var NotificationManager=function(editor){var notifications=[];var getImplementation=function(){var theme=editor.theme;return theme&&theme.getNotificationManagerImpl?theme.getNotificationManagerImpl():NotificationManagerImpl();};var getTopNotification=function(){return Optional.from(notifications[0]);};var isEqual=function(a,b){return a.type===b.type&&a.text===b.text&&!a.progressBar&&!a.timeout&&!b.progressBar&&!b.timeout;};var reposition=function(){if(notifications.length>0){getImplementation().reposition(notifications);}};var addNotification=function(notification){notifications.push(notification);};var closeNotification=function(notification){findIndex$2(notifications,function(otherNotification){return otherNotification===notification;}).each(function(index){notifications.splice(index,1);});};var open=function(spec,fireEvent){if(fireEvent===void 0){fireEvent=true;}if(editor.removed||!isEditorAttachedToDom(editor)){return;}if(fireEvent){editor.fire('BeforeOpenNotification',{notification:spec});}return find$3(notifications,function(notification){return isEqual(getImplementation().getArgs(notification),spec);}).getOrThunk(function(){editor.editorManager.setActive(editor);var notification=getImplementation().open(spec,function(){closeNotification(notification);reposition();getTopNotification().fold(function(){return editor.focus();},function(top){return focus$1(SugarElement.fromDom(top.getEl()));});});addNotification(notification);reposition();editor.fire('OpenNotification',{notification:__assign({},notification)});return notification;});};var close=function(){getTopNotification().each(function(notification){getImplementation().close(notification);closeNotification(notification);reposition();});};var getNotifications=constant(notifications);var registerEvents=function(editor){editor.on('SkinLoaded',function(){var serviceMessage=getServiceMessage(editor);if(serviceMessage){open({text:serviceMessage,type:'warning',timeout:0},false);}reposition();});editor.on('show ResizeEditor ResizeWindow NodeChange',function(){Delay.requestAnimationFrame(reposition);});editor.on('remove',function(){each$k(notifications.slice(),function(notification){getImplementation().close(notification);});});};registerEvents(editor);return{open:open,close:close,getNotifications:getNotifications};};var PluginManager=AddOnManager.PluginManager;var ThemeManager=AddOnManager.ThemeManager;function WindowManagerImpl(){var unimplemented=function(){throw new Error('Theme did not provide a WindowManager implementation.');};return{open:unimplemented,openUrl:unimplemented,alert:unimplemented,confirm:unimplemented,close:unimplemented,getParams:unimplemented,setParams:unimplemented};}var WindowManager=function(editor){var dialogs=[];var getImplementation=function(){var theme=editor.theme;return theme&&theme.getWindowManagerImpl?theme.getWindowManagerImpl():WindowManagerImpl();};var funcBind=function(scope,f){return function(){var args=[];for(var _i=0;_i<arguments.length;_i++){args[_i]=arguments[_i];}return f?f.apply(scope,args):undefined;};};var fireOpenEvent=function(dialog){editor.fire('OpenWindow',{dialog:dialog});};var fireCloseEvent=function(dialog){editor.fire('CloseWindow',{dialog:dialog});};var addDialog=function(dialog){dialogs.push(dialog);fireOpenEvent(dialog);};var closeDialog=function(dialog){fireCloseEvent(dialog);dialogs=filter$4(dialogs,function(otherDialog){return otherDialog!==dialog;});if(dialogs.length===0){editor.focus();}};var getTopDialog=function(){return Optional.from(dialogs[dialogs.length-1]);};var storeSelectionAndOpenDialog=function(openDialog){editor.editorManager.setActive(editor);store(editor);var dialog=openDialog();addDialog(dialog);return dialog;};var open=function(args,params){return storeSelectionAndOpenDialog(function(){return getImplementation().open(args,params,closeDialog);});};var openUrl=function(args){return storeSelectionAndOpenDialog(function(){return getImplementation().openUrl(args,closeDialog);});};var alert=function(message,callback,scope){var windowManagerImpl=getImplementation();windowManagerImpl.alert(message,funcBind(scope?scope:windowManagerImpl,callback));};var confirm=function(message,callback,scope){var windowManagerImpl=getImplementation();windowManagerImpl.confirm(message,funcBind(scope?scope:windowManagerImpl,callback));};var close=function(){getTopDialog().each(function(dialog){getImplementation().close(dialog);closeDialog(dialog);});};editor.on('remove',function(){each$k(dialogs,function(dialog){getImplementation().close(dialog);});});return{open:open,openUrl:openUrl,alert:alert,confirm:confirm,close:close};};var displayNotification=function(editor,message){editor.notificationManager.open({type:'error',text:message});};var displayError=function(editor,message){if(editor._skinLoaded){displayNotification(editor,message);}else{editor.on('SkinLoaded',function(){displayNotification(editor,message);});}};var uploadError=function(editor,message){displayError(editor,I18n.translate(['Failed to upload image: {0}',message]));};var logError=function(editor,errorType,msg){fireError(editor,errorType,{message:msg});console.error(msg);};var createLoadError=function(type,url,name){return name?'Failed to load '+type+': '+name+' from url '+url:'Failed to load '+type+' url: '+url;};var pluginLoadError=function(editor,url,name){logError(editor,'PluginLoadError',createLoadError('plugin',url,name));};var iconsLoadError=function(editor,url,name){logError(editor,'IconsLoadError',createLoadError('icons',url,name));};var languageLoadError=function(editor,url,name){logError(editor,'LanguageLoadError',createLoadError('language',url,name));};var pluginInitError=function(editor,name,err){var message=I18n.translate(['Failed to initialize plugin: {0}',name]);fireError(editor,'PluginLoadError',{message:message});initError(message,err);displayError(editor,message);};var initError=function(message){var x=[];for(var _i=1;_i<arguments.length;_i++){x[_i-1]=arguments[_i];}var console=window.console;if(console){if(console.error){console.error.apply(console,__spreadArray([message],x,false));}else{console.log.apply(console,__spreadArray([message],x,false));}}};var isContentCssSkinName=function(url){return /^[a-z0-9\\-]+$/i.test(url);};var getContentCssUrls=function(editor){return transformToUrls(editor,getContentCss(editor));};var getFontCssUrls=function(editor){return transformToUrls(editor,getFontCss(editor));};var transformToUrls=function(editor,cssLinks){var skinUrl=editor.editorManager.baseURL+'/skins/content';var suffix=editor.editorManager.suffix;var contentCssFile='content'+suffix+'.css';var inline=editor.inline===true;return map$3(cssLinks,function(url){if(isContentCssSkinName(url)&&!inline){return skinUrl+'/'+url+'/'+contentCssFile;}else{return editor.documentBaseURI.toAbsolute(url);}});};var appendContentCssFromSettings=function(editor){editor.contentCSS=editor.contentCSS.concat(getContentCssUrls(editor),getFontCssUrls(editor));};var UploadStatus=function(){var PENDING=1,UPLOADED=2;var blobUriStatuses={};var createStatus=function(status,resultUri){return{status:status,resultUri:resultUri};};var hasBlobUri=function(blobUri){return blobUri in blobUriStatuses;};var getResultUri=function(blobUri){var result=blobUriStatuses[blobUri];return result?result.resultUri:null;};var isPending=function(blobUri){return hasBlobUri(blobUri)?blobUriStatuses[blobUri].status===PENDING:false;};var isUploaded=function(blobUri){return hasBlobUri(blobUri)?blobUriStatuses[blobUri].status===UPLOADED:false;};var markPending=function(blobUri){blobUriStatuses[blobUri]=createStatus(PENDING,null);};var markUploaded=function(blobUri,resultUri){blobUriStatuses[blobUri]=createStatus(UPLOADED,resultUri);};var removeFailed=function(blobUri){delete blobUriStatuses[blobUri];};var destroy=function(){blobUriStatuses={};};return{hasBlobUri:hasBlobUri,getResultUri:getResultUri,isPending:isPending,isUploaded:isUploaded,markPending:markPending,markUploaded:markUploaded,removeFailed:removeFailed,destroy:destroy};};var count=0;var seed=function(){var rnd=function(){return Math.round(Math.random()*4294967295).toString(36);};var now=new Date().getTime();return's'+now.toString(36)+rnd()+rnd()+rnd();};var uuid=function(prefix){return prefix+count++ +seed();};var BlobCache=function(){var cache=[];var mimeToExt=function(mime){var mimes={'image/jpeg':'jpg','image/jpg':'jpg','image/gif':'gif','image/png':'png','image/apng':'apng','image/avif':'avif','image/svg+xml':'svg','image/webp':'webp','image/bmp':'bmp','image/tiff':'tiff'};return mimes[mime.toLowerCase()]||'dat';};var create=function(o,blob,base64,name,filename){if(isString$1(o)){var id=o;return toBlobInfo({id:id,name:name,filename:filename,blob:blob,base64:base64});}else if(isObject(o)){return toBlobInfo(o);}else{throw new Error('Unknown input type');}};var toBlobInfo=function(o){if(!o.blob||!o.base64){throw new Error('blob and base64 representations of the image are required for BlobInfo to be created');}var id=o.id||uuid('blobid');var name=o.name||id;var blob=o.blob;return{id:constant(id),name:constant(name),filename:constant(o.filename||name+'.'+mimeToExt(blob.type)),blob:constant(blob),base64:constant(o.base64),blobUri:constant(o.blobUri||URL.createObjectURL(blob)),uri:constant(o.uri)};};var add=function(blobInfo){if(!get(blobInfo.id())){cache.push(blobInfo);}};var findFirst=function(predicate){return find$3(cache,predicate).getOrUndefined();};var get=function(id){return findFirst(function(cachedBlobInfo){return cachedBlobInfo.id()===id;});};var getByUri=function(blobUri){return findFirst(function(blobInfo){return blobInfo.blobUri()===blobUri;});};var getByData=function(base64,type){return findFirst(function(blobInfo){return blobInfo.base64()===base64&&blobInfo.blob().type===type;});};var removeByUri=function(blobUri){cache=filter$4(cache,function(blobInfo){if(blobInfo.blobUri()===blobUri){URL.revokeObjectURL(blobInfo.blobUri());return false;}return true;});};var destroy=function(){each$k(cache,function(cachedBlobInfo){URL.revokeObjectURL(cachedBlobInfo.blobUri());});cache=[];};return{create:create,add:add,get:get,getByUri:getByUri,getByData:getByData,findFirst:findFirst,removeByUri:removeByUri,destroy:destroy};};var Uploader=function(uploadStatus,settings){var pendingPromises={};var pathJoin=function(path1,path2){if(path1){return path1.replace(/\\/$/,'')+'/'+path2.replace(/^\\//,'');}return path2;};var defaultHandler=function(blobInfo,success,failure,progress){var xhr=new XMLHttpRequest();xhr.open('POST',settings.url);xhr.withCredentials=settings.credentials;xhr.upload.onprogress=function(e){progress(e.loaded/e.total*100);};xhr.onerror=function(){failure('Image upload failed due to a XHR Transport error. Code: '+xhr.status);};xhr.onload=function(){if(xhr.status<200||xhr.status>=300){failure('HTTP Error: '+xhr.status);return;}var json=JSON.parse(xhr.responseText);if(!json||typeof json.location!=='string'){failure('Invalid JSON: '+xhr.responseText);return;}success(pathJoin(settings.basePath,json.location));};var formData=new FormData();formData.append('file',blobInfo.blob(),blobInfo.filename());xhr.send(formData);};var noUpload=function(){return new promiseObj(function(resolve){resolve([]);});};var handlerSuccess=function(blobInfo,url){return{url:url,blobInfo:blobInfo,status:true};};var handlerFailure=function(blobInfo,message,options){return{url:'',blobInfo:blobInfo,status:false,error:{message:message,options:options}};};var resolvePending=function(blobUri,result){Tools.each(pendingPromises[blobUri],function(resolve){resolve(result);});delete pendingPromises[blobUri];};var uploadBlobInfo=function(blobInfo,handler,openNotification){uploadStatus.markPending(blobInfo.blobUri());return new promiseObj(function(resolve){var notification,progress;try{var closeNotification_1=function(){if(notification){notification.close();progress=noop;}};var success=function(url){closeNotification_1();uploadStatus.markUploaded(blobInfo.blobUri(),url);resolvePending(blobInfo.blobUri(),handlerSuccess(blobInfo,url));resolve(handlerSuccess(blobInfo,url));};var failure=function(error,options){var failureOptions=options?options:{};closeNotification_1();uploadStatus.removeFailed(blobInfo.blobUri());resolvePending(blobInfo.blobUri(),handlerFailure(blobInfo,error,failureOptions));resolve(handlerFailure(blobInfo,error,failureOptions));};progress=function(percent){if(percent<0||percent>100){return;}Optional.from(notification).orThunk(function(){return Optional.from(openNotification).map(apply);}).each(function(n){notification=n;n.progressBar.value(percent);});};handler(blobInfo,success,failure,progress);}catch(ex){resolve(handlerFailure(blobInfo,ex.message,{}));}});};var isDefaultHandler=function(handler){return handler===defaultHandler;};var pendingUploadBlobInfo=function(blobInfo){var blobUri=blobInfo.blobUri();return new promiseObj(function(resolve){pendingPromises[blobUri]=pendingPromises[blobUri]||[];pendingPromises[blobUri].push(resolve);});};var uploadBlobs=function(blobInfos,openNotification){blobInfos=Tools.grep(blobInfos,function(blobInfo){return!uploadStatus.isUploaded(blobInfo.blobUri());});return promiseObj.all(Tools.map(blobInfos,function(blobInfo){return uploadStatus.isPending(blobInfo.blobUri())?pendingUploadBlobInfo(blobInfo):uploadBlobInfo(blobInfo,settings.handler,openNotification);}));};var upload=function(blobInfos,openNotification){return!settings.url&&isDefaultHandler(settings.handler)?noUpload():uploadBlobs(blobInfos,openNotification);};if(isFunction(settings.handler)===false){settings.handler=defaultHandler;}return{upload:upload};};var openNotification=function(editor){return function(){return editor.notificationManager.open({text:editor.translate('Image uploading...'),type:'info',timeout:-1,progressBar:true});};};var createUploader=function(editor,uploadStatus){return Uploader(uploadStatus,{url:getImageUploadUrl(editor),basePath:getImageUploadBasePath(editor),credentials:getImagesUploadCredentials(editor),handler:getImagesUploadHandler(editor)});};var ImageUploader=function(editor){var uploadStatus=UploadStatus();var uploader=createUploader(editor,uploadStatus);return{upload:function(blobInfos,showNotification){if(showNotification===void 0){showNotification=true;}return uploader.upload(blobInfos,showNotification?openNotification(editor):undefined);}};};var UploadChangeHandler=function(editor){var lastChangedLevel=Cell(null);editor.on('change AddUndo',function(e){lastChangedLevel.set(__assign({},e.level));});var fireIfChanged=function(){var data=editor.undoManager.data;last$2(data).filter(function(level){return!isEq$1(lastChangedLevel.get(),level);}).each(function(level){editor.setDirty(true);editor.fire('change',{level:level,lastLevel:get$a(data,data.length-2).getOrNull()});});};return{fireIfChanged:fireIfChanged};};var EditorUpload=function(editor){var blobCache=BlobCache();var uploader,imageScanner;var uploadStatus=UploadStatus();var urlFilters=[];var changeHandler=UploadChangeHandler(editor);var aliveGuard=function(callback){return function(result){if(editor.selection){return callback(result);}return[];};};var cacheInvalidator=function(url){return url+(url.indexOf('?')===-1?'?':'&')+new Date().getTime();};var replaceString=function(content,search,replace){var index=0;do{index=content.indexOf(search,index);if(index!==-1){content=content.substring(0,index)+replace+content.substr(index+search.length);index+=replace.length-search.length+1;}}while(index!==-1);return content;};var replaceImageUrl=function(content,targetUrl,replacementUrl){var replacementString='src=\"'+replacementUrl+'\"'+(replacementUrl===Env.transparentSrc?' data-mce-placeholder=\"1\"':'');content=replaceString(content,'src=\"'+targetUrl+'\"',replacementString);content=replaceString(content,'data-mce-src=\"'+targetUrl+'\"','data-mce-src=\"'+replacementUrl+'\"');return content;};var replaceUrlInUndoStack=function(targetUrl,replacementUrl){each$k(editor.undoManager.data,function(level){if(level.type==='fragmented'){level.fragments=map$3(level.fragments,function(fragment){return replaceImageUrl(fragment,targetUrl,replacementUrl);});}else{level.content=replaceImageUrl(level.content,targetUrl,replacementUrl);}});};var replaceImageUriInView=function(image,resultUri){var src=editor.convertURL(resultUri,'src');replaceUrlInUndoStack(image.src,resultUri);editor.$(image).attr({'src':shouldReuseFileName(editor)?cacheInvalidator(resultUri):resultUri,'data-mce-src':src});};var uploadImages=function(callback){if(!uploader){uploader=createUploader(editor,uploadStatus);}return scanForImages().then(aliveGuard(function(imageInfos){var blobInfos=map$3(imageInfos,function(imageInfo){return imageInfo.blobInfo;});return uploader.upload(blobInfos,openNotification(editor)).then(aliveGuard(function(result){var imagesToRemove=[];var filteredResult=map$3(result,function(uploadInfo,index){var blobInfo=imageInfos[index].blobInfo;var image=imageInfos[index].image;if(uploadInfo.status&&shouldReplaceBlobUris(editor)){blobCache.removeByUri(image.src);if(isRtc(editor));else{replaceImageUriInView(image,uploadInfo.url);}}else if(uploadInfo.error){if(uploadInfo.error.options.remove){replaceUrlInUndoStack(image.getAttribute('src'),Env.transparentSrc);imagesToRemove.push(image);}uploadError(editor,uploadInfo.error.message);}return{element:image,status:uploadInfo.status,uploadUri:uploadInfo.url,blobInfo:blobInfo};});if(filteredResult.length>0){changeHandler.fireIfChanged();}if(imagesToRemove.length>0){if(isRtc(editor)){console.error('Removing images on failed uploads is currently unsupported for RTC');}else{editor.undoManager.transact(function(){each$k(imagesToRemove,function(element){editor.dom.remove(element);blobCache.removeByUri(element.src);});});}}if(callback){callback(filteredResult);}return filteredResult;}));}));};var uploadImagesAuto=function(callback){if(isAutomaticUploadsEnabled(editor)){return uploadImages(callback);}};var isValidDataUriImage=function(imgElm){if(forall(urlFilters,function(filter){return filter(imgElm);})===false){return false;}if(imgElm.getAttribute('src').indexOf('data:')===0){var dataImgFilter=getImagesDataImgFilter(editor);return dataImgFilter(imgElm);}return true;};var addFilter=function(filter){urlFilters.push(filter);};var scanForImages=function(){if(!imageScanner){imageScanner=ImageScanner(uploadStatus,blobCache);}return imageScanner.findAll(editor.getBody(),isValidDataUriImage).then(aliveGuard(function(result){result=filter$4(result,function(resultItem){if(typeof resultItem==='string'){displayError(editor,resultItem);return false;}return true;});if(isRtc(editor));else{each$k(result,function(resultItem){replaceUrlInUndoStack(resultItem.image.src,resultItem.blobInfo.blobUri());resultItem.image.src=resultItem.blobInfo.blobUri();resultItem.image.removeAttribute('data-mce-src');});}return result;}));};var destroy=function(){blobCache.destroy();uploadStatus.destroy();imageScanner=uploader=null;};var replaceBlobUris=function(content){return content.replace(/src=\"(blob:[^\"]+)\"/g,function(match,blobUri){var resultUri=uploadStatus.getResultUri(blobUri);if(resultUri){return'src=\"'+resultUri+'\"';}var blobInfo=blobCache.getByUri(blobUri);if(!blobInfo){blobInfo=foldl(editor.editorManager.get(),function(result,editor){return result||editor.editorUpload&&editor.editorUpload.blobCache.getByUri(blobUri);},null);}if(blobInfo){var blob=blobInfo.blob();return'src=\"data:'+blob.type+';base64,'+blobInfo.base64()+'\"';}return match;});};editor.on('SetContent',function(){if(isAutomaticUploadsEnabled(editor)){uploadImagesAuto();}else{scanForImages();}});editor.on('RawSaveContent',function(e){e.content=replaceBlobUris(e.content);});editor.on('GetContent',function(e){if(e.source_view||e.format==='raw'||e.format==='tree'){return;}e.content=replaceBlobUris(e.content);});editor.on('PostRender',function(){editor.parser.addNodeFilter('img',function(images){each$k(images,function(img){var src=img.attr('src');if(blobCache.getByUri(src)){return;}var resultUri=uploadStatus.getResultUri(src);if(resultUri){img.attr('src',resultUri);}});});});return{blobCache:blobCache,addFilter:addFilter,uploadImages:uploadImages,uploadImagesAuto:uploadImagesAuto,scanForImages:scanForImages,destroy:destroy};};var get=function(dom){var formats={valigntop:[{selector:'td,th',styles:{verticalAlign:'top'}}],valignmiddle:[{selector:'td,th',styles:{verticalAlign:'middle'}}],valignbottom:[{selector:'td,th',styles:{verticalAlign:'bottom'}}],alignleft:[{selector:'figure.image',collapsed:false,classes:'align-left',ceFalseOverride:true,preview:'font-family font-size'},{selector:'figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li',styles:{textAlign:'left'},inherit:false,preview:false,defaultBlock:'div'},{selector:'img,table,audio,video',collapsed:false,styles:{float:'left'},preview:'font-family font-size'}],aligncenter:[{selector:'figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li',styles:{textAlign:'center'},inherit:false,preview:'font-family font-size',defaultBlock:'div'},{selector:'figure.image',collapsed:false,classes:'align-center',ceFalseOverride:true,preview:'font-family font-size'},{selector:'img,audio,video',collapsed:false,styles:{display:'block',marginLeft:'auto',marginRight:'auto'},preview:false},{selector:'table',collapsed:false,styles:{marginLeft:'auto',marginRight:'auto'},preview:'font-family font-size'}],alignright:[{selector:'figure.image',collapsed:false,classes:'align-right',ceFalseOverride:true,preview:'font-family font-size'},{selector:'figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li',styles:{textAlign:'right'},inherit:false,preview:'font-family font-size',defaultBlock:'div'},{selector:'img,table,audio,video',collapsed:false,styles:{float:'right'},preview:'font-family font-size'}],alignjustify:[{selector:'figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li',styles:{textAlign:'justify'},inherit:false,defaultBlock:'div',preview:'font-family font-size'}],bold:[{inline:'strong',remove:'all',preserve_attributes:['class','style']},{inline:'span',styles:{fontWeight:'bold'}},{inline:'b',remove:'all',preserve_attributes:['class','style']}],italic:[{inline:'em',remove:'all',preserve_attributes:['class','style']},{inline:'span',styles:{fontStyle:'italic'}},{inline:'i',remove:'all',preserve_attributes:['class','style']}],underline:[{inline:'span',styles:{textDecoration:'underline'},exact:true},{inline:'u',remove:'all',preserve_attributes:['class','style']}],strikethrough:[{inline:'span',styles:{textDecoration:'line-through'},exact:true},{inline:'strike',remove:'all',preserve_attributes:['class','style']},{inline:'s',remove:'all',preserve_attributes:['class','style']}],forecolor:{inline:'span',styles:{color:'%value'},links:true,remove_similar:true,clear_child_styles:true},hilitecolor:{inline:'span',styles:{backgroundColor:'%value'},links:true,remove_similar:true,clear_child_styles:true},fontname:{inline:'span',toggle:false,styles:{fontFamily:'%value'},clear_child_styles:true},fontsize:{inline:'span',toggle:false,styles:{fontSize:'%value'},clear_child_styles:true},lineheight:{selector:'h1,h2,h3,h4,h5,h6,p,li,td,th,div',defaultBlock:'p',styles:{lineHeight:'%value'}},fontsize_class:{inline:'span',attributes:{class:'%value'}},blockquote:{block:'blockquote',wrapper:true,remove:'all'},subscript:{inline:'sub'},superscript:{inline:'sup'},code:{inline:'code'},link:{inline:'a',selector:'a',remove:'all',split:true,deep:true,onmatch:function(node,_fmt,_itemName){return isElement$5(node)&&node.hasAttribute('href');},onformat:function(elm,_fmt,vars){Tools.each(vars,function(value,key){dom.setAttrib(elm,key,value);});}},lang:{inline:'span',clear_child_styles:true,remove_similar:true,attributes:{'lang':'%value','data-mce-lang':function(vars){var _a;return(_a=vars===null||vars===void 0?void 0:vars.customValue)!==null&&_a!==void 0?_a:null;}}},removeformat:[{selector:'b,strong,em,i,font,u,strike,s,sub,sup,dfn,code,samp,kbd,var,cite,mark,q,del,ins,small',remove:'all',split:true,expand:false,block_expand:true,deep:true},{selector:'span',attributes:['style','class'],remove:'empty',split:true,expand:false,deep:true},{selector:'*',attributes:['style','class'],split:false,expand:false,deep:true}]};Tools.each('p h1 h2 h3 h4 h5 h6 div address pre dt dd samp'.split(/\\s/),function(name){formats[name]={block:name,remove:'all'};});return formats;};var FormatRegistry=function(editor){var formats={};var get$1=function(name){return isNonNullable(name)?formats[name]:formats;};var has=function(name){return has$2(formats,name);};var register=function(name,format){if(name){if(!isString$1(name)){each$j(name,function(format,name){register(name,format);});}else{if(!isArray$1(format)){format=[format];}each$k(format,function(format){if(isUndefined(format.deep)){format.deep=!isSelectorFormat(format);}if(isUndefined(format.split)){format.split=!isSelectorFormat(format)||isInlineFormat(format);}if(isUndefined(format.remove)&&isSelectorFormat(format)&&!isInlineFormat(format)){format.remove='none';}if(isSelectorFormat(format)&&isInlineFormat(format)){format.mixed=true;format.block_expand=true;}if(isString$1(format.classes)){format.classes=format.classes.split(/\\s+/);}});formats[name]=format;}}};var unregister=function(name){if(name&&formats[name]){delete formats[name];}return formats;};register(get(editor.dom));register(getFormats(editor));return{get:get$1,has:has,register:register,unregister:unregister};};var each$5=Tools.each;var dom=DOMUtils.DOM;var parsedSelectorToHtml=function(ancestry,editor){var elm,item,fragment;var schema=editor&&editor.schema||Schema({});var decorate=function(elm,item){if(item.classes.length){dom.addClass(elm,item.classes.join(' '));}dom.setAttribs(elm,item.attrs);};var createElement=function(sItem){item=typeof sItem==='string'?{name:sItem,classes:[],attrs:{}}:sItem;var elm=dom.create(item.name);decorate(elm,item);return elm;};var getRequiredParent=function(elm,candidate){var name=typeof elm!=='string'?elm.nodeName.toLowerCase():elm;var elmRule=schema.getElementRule(name);var parentsRequired=elmRule&&elmRule.parentsRequired;if(parentsRequired&&parentsRequired.length){return candidate&&Tools.inArray(parentsRequired,candidate)!==-1?candidate:parentsRequired[0];}else{return false;}};var wrapInHtml=function(elm,ancestry,siblings){var parent,parentCandidate;var ancestor=ancestry.length>0&&ancestry[0];var ancestorName=ancestor&&ancestor.name;var parentRequired=getRequiredParent(elm,ancestorName);if(parentRequired){if(ancestorName===parentRequired){parentCandidate=ancestry[0];ancestry=ancestry.slice(1);}else{parentCandidate=parentRequired;}}else if(ancestor){parentCandidate=ancestry[0];ancestry=ancestry.slice(1);}else if(!siblings){return elm;}if(parentCandidate){parent=createElement(parentCandidate);parent.appendChild(elm);}if(siblings){if(!parent){parent=dom.create('div');parent.appendChild(elm);}Tools.each(siblings,function(sibling){var siblingElm=createElement(sibling);parent.insertBefore(siblingElm,elm);});}return wrapInHtml(parent,ancestry,parentCandidate&&parentCandidate.siblings);};if(ancestry&&ancestry.length){item=ancestry[0];elm=createElement(item);fragment=dom.create('div');fragment.appendChild(wrapInHtml(elm,ancestry.slice(1),item.siblings));return fragment;}else{return'';}};var parseSelectorItem=function(item){var tagName;var obj={classes:[],attrs:{}};item=obj.selector=Tools.trim(item);if(item!=='*'){tagName=item.replace(/(?:([#\\.]|::?)([\\w\\-]+)|(\\[)([^\\]]+)\\]?)/g,function($0,$1,$2,$3,$4){switch($1){case'#':obj.attrs.id=$2;break;case'.':obj.classes.push($2);break;case':':if(Tools.inArray('checked disabled enabled read-only required'.split(' '),$2)!==-1){obj.attrs[$2]=$2;}break;}if($3==='['){var m=$4.match(/([\\w\\-]+)(?:\\=\\\"([^\\\"]+))?/);if(m){obj.attrs[m[1]]=m[2];}}return'';});}obj.name=tagName||'div';return obj;};var parseSelector=function(selector){if(!selector||typeof selector!=='string'){return[];}selector=selector.split(/\\s*,\\s*/)[0];selector=selector.replace(/\\s*(~\\+|~|\\+|>)\\s*/g,'$1');return Tools.map(selector.split(/(?:>|\\s+(?![^\\[\\]]+\\]))/),function(item){var siblings=Tools.map(item.split(/(?:~\\+|~|\\+)/),parseSelectorItem);var obj=siblings.pop();if(siblings.length){obj.siblings=siblings;}return obj;}).reverse();};var getCssText=function(editor,format){var name,previewFrag;var previewCss='',parentFontSize;var previewStyles=getPreviewStyles(editor);if(previewStyles===''){return'';}var removeVars=function(val){return val.replace(/%(\\w+)/g,'');};if(typeof format==='string'){format=editor.formatter.get(format);if(!format){return;}format=format[0];}if('preview'in format){var previewOpt=get$9(format,'preview');if(is$1(previewOpt,false)){return'';}else{previewStyles=previewOpt.getOr(previewStyles);}}name=format.block||format.inline||'span';var items=parseSelector(format.selector);if(items.length){if(!items[0].name){items[0].name=name;}name=format.selector;previewFrag=parsedSelectorToHtml(items,editor);}else{previewFrag=parsedSelectorToHtml([name],editor);}var previewElm=dom.select(name,previewFrag)[0]||previewFrag.firstChild;each$5(format.styles,function(value,name){var newValue=removeVars(value);if(newValue){dom.setStyle(previewElm,name,newValue);}});each$5(format.attributes,function(value,name){var newValue=removeVars(value);if(newValue){dom.setAttrib(previewElm,name,newValue);}});each$5(format.classes,function(value){var newValue=removeVars(value);if(!dom.hasClass(previewElm,newValue)){dom.addClass(previewElm,newValue);}});editor.fire('PreviewFormats');dom.setStyles(previewFrag,{position:'absolute',left:-65535});editor.getBody().appendChild(previewFrag);parentFontSize=dom.getStyle(editor.getBody(),'fontSize',true);parentFontSize=/px$/.test(parentFontSize)?parseInt(parentFontSize,10):0;each$5(previewStyles.split(' '),function(name){var value=dom.getStyle(previewElm,name,true);if(name==='background-color'&&/transparent|rgba\\s*\\([^)]+,\\s*0\\)/.test(value)){value=dom.getStyle(editor.getBody(),name,true);if(dom.toHex(value).toLowerCase()==='#ffffff'){return;}}if(name==='color'){if(dom.toHex(value).toLowerCase()==='#000000'){return;}}if(name==='font-size'){if(/em|%$/.test(value)){if(parentFontSize===0){return;}var numValue=parseFloat(value)/(/%$/.test(value)?100:1);value=numValue*parentFontSize+'px';}}if(name==='border'&&value){previewCss+='padding:0 2px;';}previewCss+=name+':'+value+';';});editor.fire('AfterPreviewFormats');dom.remove(previewFrag);return previewCss;};var setup$h=function(editor){editor.addShortcut('meta+b','','Bold');editor.addShortcut('meta+i','','Italic');editor.addShortcut('meta+u','','Underline');for(var i=1;i<=6;i++){editor.addShortcut('access+'+i,'',['FormatBlock',false,'h'+i]);}editor.addShortcut('access+7','',['FormatBlock',false,'p']);editor.addShortcut('access+8','',['FormatBlock',false,'div']);editor.addShortcut('access+9','',['FormatBlock',false,'address']);};var Formatter=function(editor){var formats=FormatRegistry(editor);var formatChangeState=Cell(null);setup$h(editor);setup$k(editor);return{get:formats.get,has:formats.has,register:formats.register,unregister:formats.unregister,apply:function(name,vars,node){applyFormat(editor,name,vars,node);},remove:function(name,vars,node,similar){removeFormat(editor,name,vars,node,similar);},toggle:function(name,vars,node){toggleFormat(editor,name,vars,node);},match:function(name,vars,node,similar){return matchFormat(editor,name,vars,node,similar);},closest:function(names){return closestFormat(editor,names);},matchAll:function(names,vars){return matchAllFormats(editor,names,vars);},matchNode:function(node,name,vars,similar){return matchNodeFormat(editor,node,name,vars,similar);},canApply:function(name){return canApplyFormat(editor,name);},formatChanged:function(formats,callback,similar,vars){return formatChanged(editor,formatChangeState,formats,callback,similar,vars);},getCssText:curry(getCssText,editor)};};var shouldIgnoreCommand=function(cmd){switch(cmd.toLowerCase()){case'undo':case'redo':case'mcerepaint':case'mcefocus':return true;default:return false;}};var registerEvents=function(editor,undoManager,locks){var isFirstTypedCharacter=Cell(false);var addNonTypingUndoLevel=function(e){setTyping(undoManager,false,locks);undoManager.add({},e);};editor.on('init',function(){undoManager.add();});editor.on('BeforeExecCommand',function(e){var cmd=e.command;if(!shouldIgnoreCommand(cmd)){endTyping(undoManager,locks);undoManager.beforeChange();}});editor.on('ExecCommand',function(e){var cmd=e.command;if(!shouldIgnoreCommand(cmd)){addNonTypingUndoLevel(e);}});editor.on('ObjectResizeStart cut',function(){undoManager.beforeChange();});editor.on('SaveContent ObjectResized blur',addNonTypingUndoLevel);editor.on('dragend',addNonTypingUndoLevel);editor.on('keyup',function(e){var keyCode=e.keyCode;if(e.isDefaultPrevented()){return;}if(keyCode>=33&&keyCode<=36||keyCode>=37&&keyCode<=40||keyCode===45||e.ctrlKey){addNonTypingUndoLevel();editor.nodeChanged();}if(keyCode===46||keyCode===8){editor.nodeChanged();}if(isFirstTypedCharacter.get()&&undoManager.typing&&isEq$1(createFromEditor(editor),undoManager.data[0])===false){if(editor.isDirty()===false){editor.setDirty(true);editor.fire('change',{level:undoManager.data[0],lastLevel:null});}editor.fire('TypingUndo');isFirstTypedCharacter.set(false);editor.nodeChanged();}});editor.on('keydown',function(e){var keyCode=e.keyCode;if(e.isDefaultPrevented()){return;}if(keyCode>=33&&keyCode<=36||keyCode>=37&&keyCode<=40||keyCode===45){if(undoManager.typing){addNonTypingUndoLevel(e);}return;}var modKey=e.ctrlKey&&!e.altKey||e.metaKey;if((keyCode<16||keyCode>20)&&keyCode!==224&&keyCode!==91&&!undoManager.typing&&!modKey){undoManager.beforeChange();setTyping(undoManager,true,locks);undoManager.add({},e);isFirstTypedCharacter.set(true);}});editor.on('mousedown',function(e){if(undoManager.typing){addNonTypingUndoLevel(e);}});var isInsertReplacementText=function(event){return event.inputType==='insertReplacementText';};var isInsertTextDataNull=function(event){return event.inputType==='insertText'&&event.data===null;};var isInsertFromPasteOrDrop=function(event){return event.inputType==='insertFromPaste'||event.inputType==='insertFromDrop';};editor.on('input',function(e){if(e.inputType&&(isInsertReplacementText(e)||isInsertTextDataNull(e)||isInsertFromPasteOrDrop(e))){addNonTypingUndoLevel(e);}});editor.on('AddUndo Undo Redo ClearUndos',function(e){if(!e.isDefaultPrevented()){editor.nodeChanged();}});};var addKeyboardShortcuts=function(editor){editor.addShortcut('meta+z','','Undo');editor.addShortcut('meta+y,meta+shift+z','','Redo');};var UndoManager=function(editor){var beforeBookmark=value();var locks=Cell(0);var index=Cell(0);var undoManager={data:[],typing:false,beforeChange:function(){beforeChange(editor,locks,beforeBookmark);},add:function(level,event){return addUndoLevel(editor,undoManager,index,locks,beforeBookmark,level,event);},undo:function(){return undo(editor,undoManager,locks,index);},redo:function(){return redo(editor,index,undoManager.data);},clear:function(){clear(editor,undoManager,index);},reset:function(){reset(editor,undoManager);},hasUndo:function(){return hasUndo(editor,undoManager,index);},hasRedo:function(){return hasRedo(editor,undoManager,index);},transact:function(callback){return transact(editor,undoManager,locks,callback);},ignore:function(callback){ignore(editor,locks,callback);},extra:function(callback1,callback2){extra(editor,undoManager,index,callback1,callback2);}};if(!isRtc(editor)){registerEvents(editor,undoManager,locks);}addKeyboardShortcuts(editor);return undoManager;};var nonTypingKeycodes=[9,27,VK.HOME,VK.END,19,20,44,144,145,33,34,45,16,17,18,91,92,93,VK.DOWN,VK.UP,VK.LEFT,VK.RIGHT].concat(Env.browser.isFirefox()?[224]:[]);var placeholderAttr='data-mce-placeholder';var isKeyboardEvent=function(e){return e.type==='keydown'||e.type==='keyup';};var isDeleteEvent=function(e){var keyCode=e.keyCode;return keyCode===VK.BACKSPACE||keyCode===VK.DELETE;};var isNonTypingKeyboardEvent=function(e){if(isKeyboardEvent(e)){var keyCode=e.keyCode;return!isDeleteEvent(e)&&(VK.metaKeyPressed(e)||e.altKey||keyCode>=112&&keyCode<=123||contains$3(nonTypingKeycodes,keyCode));}else{return false;}};var isTypingKeyboardEvent=function(e){return isKeyboardEvent(e)&&!(isDeleteEvent(e)||e.type==='keyup'&&e.keyCode===229);};var isVisuallyEmpty=function(dom,rootElm,forcedRootBlock){if(isEmpty$2(SugarElement.fromDom(rootElm),false)){var isForcedRootBlockFalse=forcedRootBlock==='';var firstElement=rootElm.firstElementChild;if(!firstElement){return true;}else if(dom.getStyle(rootElm.firstElementChild,'padding-left')||dom.getStyle(rootElm.firstElementChild,'padding-right')){return false;}else{return isForcedRootBlockFalse?!dom.isBlock(firstElement):forcedRootBlock===firstElement.nodeName.toLowerCase();}}else{return false;}};var setup$g=function(editor){var dom=editor.dom;var rootBlock=getForcedRootBlock(editor);var placeholder=getPlaceholder(editor);var updatePlaceholder=function(e,initial){if(isNonTypingKeyboardEvent(e)){return;}var body=editor.getBody();var showPlaceholder=isTypingKeyboardEvent(e)?false:isVisuallyEmpty(dom,body,rootBlock);var isPlaceholderShown=dom.getAttrib(body,placeholderAttr)!=='';if(isPlaceholderShown!==showPlaceholder||initial){dom.setAttrib(body,placeholderAttr,showPlaceholder?placeholder:null);dom.setAttrib(body,'aria-placeholder',showPlaceholder?placeholder:null);firePlaceholderToggle(editor,showPlaceholder);editor.on(showPlaceholder?'keydown':'keyup',updatePlaceholder);editor.off(showPlaceholder?'keyup':'keydown',updatePlaceholder);}};if(placeholder){editor.on('init',function(e){updatePlaceholder(e,true);editor.on('change SetContent ExecCommand',updatePlaceholder);editor.on('paste',function(e){return Delay.setEditorTimeout(editor,function(){return updatePlaceholder(e);});});});}};var strongRtl=/[\\u0591-\\u07FF\\uFB1D-\\uFDFF\\uFE70-\\uFEFC]/;var hasStrongRtl=function(text){return strongRtl.test(text);};var isInlineTarget=function(editor,elm){return is$2(SugarElement.fromDom(elm),getInlineBoundarySelector(editor));};var isRtl=function(element){return DOMUtils.DOM.getStyle(element,'direction',true)==='rtl'||hasStrongRtl(element.textContent);};var findInlineParents=function(isInlineTarget,rootNode,pos){return filter$4(DOMUtils.DOM.getParents(pos.container(),'*',rootNode),isInlineTarget);};var findRootInline=function(isInlineTarget,rootNode,pos){var parents=findInlineParents(isInlineTarget,rootNode,pos);return Optional.from(parents[parents.length-1]);};var hasSameParentBlock=function(rootNode,node1,node2){var block1=getParentBlock$2(node1,rootNode);var block2=getParentBlock$2(node2,rootNode);return block1&&block1===block2;};var isAtZwsp=function(pos){return isBeforeInline(pos)||isAfterInline(pos);};var normalizePosition=function(forward,pos){if(!pos){return pos;}var container=pos.container(),offset=pos.offset();if(forward){if(isCaretContainerInline(container)){if(isText$7(container.nextSibling)){return CaretPosition(container.nextSibling,0);}else{return CaretPosition.after(container);}}else{return isBeforeInline(pos)?CaretPosition(container,offset+1):pos;}}else{if(isCaretContainerInline(container)){if(isText$7(container.previousSibling)){return CaretPosition(container.previousSibling,container.previousSibling.data.length);}else{return CaretPosition.before(container);}}else{return isAfterInline(pos)?CaretPosition(container,offset-1):pos;}}};var normalizeForwards=curry(normalizePosition,true);var normalizeBackwards=curry(normalizePosition,false);var isBeforeRoot=function(rootNode){return function(elm){return eq(rootNode,SugarElement.fromDom(elm.dom.parentNode));};};var isTextBlockOrListItem=function(element){return isTextBlock$2(element)||isListItem(element);};var getParentBlock$1=function(rootNode,elm){if(contains$1(rootNode,elm)){return closest$3(elm,isTextBlockOrListItem,isBeforeRoot(rootNode));}else{return Optional.none();}};var placeCaretInEmptyBody=function(editor){var body=editor.getBody();var node=body.firstChild&&editor.dom.isBlock(body.firstChild)?body.firstChild:body;editor.selection.setCursorLocation(node,0);};var paddEmptyBody=function(editor){if(editor.dom.isEmpty(editor.getBody())){editor.setContent('');placeCaretInEmptyBody(editor);}};var willDeleteLastPositionInElement=function(forward,fromPos,elm){return lift2(firstPositionIn(elm),lastPositionIn(elm),function(firstPos,lastPos){var normalizedFirstPos=normalizePosition(true,firstPos);var normalizedLastPos=normalizePosition(false,lastPos);var normalizedFromPos=normalizePosition(false,fromPos);if(forward){return nextPosition(elm,normalizedFromPos).exists(function(nextPos){return nextPos.isEqual(normalizedLastPos)&&fromPos.isEqual(normalizedFirstPos);});}else{return prevPosition(elm,normalizedFromPos).exists(function(prevPos){return prevPos.isEqual(normalizedFirstPos)&&fromPos.isEqual(normalizedLastPos);});}}).getOr(true);};var blockPosition=function(block,position){return{block:block,position:position};};var blockBoundary=function(from,to){return{from:from,to:to};};var getBlockPosition=function(rootNode,pos){var rootElm=SugarElement.fromDom(rootNode);var containerElm=SugarElement.fromDom(pos.container());return getParentBlock$1(rootElm,containerElm).map(function(block){return blockPosition(block,pos);});};var isDifferentBlocks=function(blockBoundary){return eq(blockBoundary.from.block,blockBoundary.to.block)===false;};var hasSameParent=function(blockBoundary){return parent(blockBoundary.from.block).bind(function(parent1){return parent(blockBoundary.to.block).filter(function(parent2){return eq(parent1,parent2);});}).isSome();};var isEditable$1=function(blockBoundary){return isContentEditableFalse$b(blockBoundary.from.block.dom)===false&&isContentEditableFalse$b(blockBoundary.to.block.dom)===false;};var skipLastBr=function(rootNode,forward,blockPosition){if(isBr$5(blockPosition.position.getNode())&&isEmpty$2(blockPosition.block)===false){return positionIn(false,blockPosition.block.dom).bind(function(lastPositionInBlock){if(lastPositionInBlock.isEqual(blockPosition.position)){return fromPosition(forward,rootNode,lastPositionInBlock).bind(function(to){return getBlockPosition(rootNode,to);});}else{return Optional.some(blockPosition);}}).getOr(blockPosition);}else{return blockPosition;}};var readFromRange=function(rootNode,forward,rng){var fromBlockPos=getBlockPosition(rootNode,CaretPosition.fromRangeStart(rng));var toBlockPos=fromBlockPos.bind(function(blockPos){return fromPosition(forward,rootNode,blockPos.position).bind(function(to){return getBlockPosition(rootNode,to).map(function(blockPos){return skipLastBr(rootNode,forward,blockPos);});});});return lift2(fromBlockPos,toBlockPos,blockBoundary).filter(function(blockBoundary){return isDifferentBlocks(blockBoundary)&&hasSameParent(blockBoundary)&&isEditable$1(blockBoundary);});};var read$1=function(rootNode,forward,rng){return rng.collapsed?readFromRange(rootNode,forward,rng):Optional.none();};var getChildrenUntilBlockBoundary=function(block){var children$1=children(block);return findIndex$2(children$1,isBlock$2).fold(constant(children$1),function(index){return children$1.slice(0,index);});};var extractChildren=function(block){var children=getChildrenUntilBlockBoundary(block);each$k(children,remove$7);return children;};var removeEmptyRoot=function(rootNode,block){var parents=parentsAndSelf(block,rootNode);return find$3(parents.reverse(),function(element){return isEmpty$2(element);}).each(remove$7);};var isEmptyBefore=function(el){return filter$4(prevSiblings(el),function(el){return!isEmpty$2(el);}).length===0;};var nestedBlockMerge=function(rootNode,fromBlock,toBlock,insertionPoint){if(isEmpty$2(toBlock)){fillWithPaddingBr(toBlock);return firstPositionIn(toBlock.dom);}if(isEmptyBefore(insertionPoint)&&isEmpty$2(fromBlock)){before$4(insertionPoint,SugarElement.fromTag('br'));}var position=prevPosition(toBlock.dom,CaretPosition.before(insertionPoint.dom));each$k(extractChildren(fromBlock),function(child){before$4(insertionPoint,child);});removeEmptyRoot(rootNode,fromBlock);return position;};var sidelongBlockMerge=function(rootNode,fromBlock,toBlock){if(isEmpty$2(toBlock)){remove$7(toBlock);if(isEmpty$2(fromBlock)){fillWithPaddingBr(fromBlock);}return firstPositionIn(fromBlock.dom);}var position=lastPositionIn(toBlock.dom);each$k(extractChildren(fromBlock),function(child){append$1(toBlock,child);});removeEmptyRoot(rootNode,fromBlock);return position;};var findInsertionPoint=function(toBlock,block){var parentsAndSelf$1=parentsAndSelf(block,toBlock);return Optional.from(parentsAndSelf$1[parentsAndSelf$1.length-1]);};var getInsertionPoint=function(fromBlock,toBlock){return contains$1(toBlock,fromBlock)?findInsertionPoint(toBlock,fromBlock):Optional.none();};var trimBr=function(first,block){positionIn(first,block.dom).map(function(position){return position.getNode();}).map(SugarElement.fromDom).filter(isBr$4).each(remove$7);};var mergeBlockInto=function(rootNode,fromBlock,toBlock){trimBr(true,fromBlock);trimBr(false,toBlock);return getInsertionPoint(fromBlock,toBlock).fold(curry(sidelongBlockMerge,rootNode,fromBlock,toBlock),curry(nestedBlockMerge,rootNode,fromBlock,toBlock));};var mergeBlocks=function(rootNode,forward,block1,block2){return forward?mergeBlockInto(rootNode,block2,block1):mergeBlockInto(rootNode,block1,block2);};var backspaceDelete$8=function(editor,forward){var rootNode=SugarElement.fromDom(editor.getBody());var position=read$1(rootNode.dom,forward,editor.selection.getRng()).bind(function(blockBoundary){return mergeBlocks(rootNode,forward,blockBoundary.from.block,blockBoundary.to.block);});position.each(function(pos){editor.selection.setRng(pos.toRange());});return position.isSome();};var deleteRangeMergeBlocks=function(rootNode,selection){var rng=selection.getRng();return lift2(getParentBlock$1(rootNode,SugarElement.fromDom(rng.startContainer)),getParentBlock$1(rootNode,SugarElement.fromDom(rng.endContainer)),function(block1,block2){if(eq(block1,block2)===false){rng.deleteContents();mergeBlocks(rootNode,true,block1,block2).each(function(pos){selection.setRng(pos.toRange());});return true;}else{return false;}}).getOr(false);};var isRawNodeInTable=function(root,rawNode){var node=SugarElement.fromDom(rawNode);var isRoot=curry(eq,root);return ancestor$3(node,isTableCell$4,isRoot).isSome();};var isSelectionInTable=function(root,rng){return isRawNodeInTable(root,rng.startContainer)||isRawNodeInTable(root,rng.endContainer);};var isEverythingSelected=function(root,rng){var noPrevious=prevPosition(root.dom,CaretPosition.fromRangeStart(rng)).isNone();var noNext=nextPosition(root.dom,CaretPosition.fromRangeEnd(rng)).isNone();return!isSelectionInTable(root,rng)&&noPrevious&&noNext;};var emptyEditor=function(editor){editor.setContent('');editor.selection.setCursorLocation();return true;};var deleteRange$1=function(editor){var rootNode=SugarElement.fromDom(editor.getBody());var rng=editor.selection.getRng();return isEverythingSelected(rootNode,rng)?emptyEditor(editor):deleteRangeMergeBlocks(rootNode,editor.selection);};var backspaceDelete$7=function(editor,_forward){return editor.selection.isCollapsed()?false:deleteRange$1(editor);};var isContentEditableTrue$2=isContentEditableTrue$4;var isContentEditableFalse$4=isContentEditableFalse$b;var showCaret=function(direction,editor,node,before,scrollIntoView){return Optional.from(editor._selectionOverrides.showCaret(direction,node,before,scrollIntoView));};var getNodeRange=function(node){var rng=node.ownerDocument.createRange();rng.selectNode(node);return rng;};var selectNode=function(editor,node){var e=editor.fire('BeforeObjectSelected',{target:node});if(e.isDefaultPrevented()){return Optional.none();}return Optional.some(getNodeRange(node));};var renderCaretAtRange=function(editor,range,scrollIntoView){var normalizedRange=normalizeRange(1,editor.getBody(),range);var caretPosition=CaretPosition.fromRangeStart(normalizedRange);var caretPositionNode=caretPosition.getNode();if(isInlineFakeCaretTarget(caretPositionNode)){return showCaret(1,editor,caretPositionNode,!caretPosition.isAtEnd(),false);}var caretPositionBeforeNode=caretPosition.getNode(true);if(isInlineFakeCaretTarget(caretPositionBeforeNode)){return showCaret(1,editor,caretPositionBeforeNode,false,false);}var ceRoot=editor.dom.getParent(caretPosition.getNode(),function(node){return isContentEditableFalse$4(node)||isContentEditableTrue$2(node);});if(isInlineFakeCaretTarget(ceRoot)){return showCaret(1,editor,ceRoot,false,scrollIntoView);}return Optional.none();};var renderRangeCaret=function(editor,range,scrollIntoView){return range.collapsed?renderCaretAtRange(editor,range,scrollIntoView).getOr(range):range;};var isBeforeBoundary=function(pos){return isBeforeContentEditableFalse(pos)||isBeforeMedia(pos);};var isAfterBoundary=function(pos){return isAfterContentEditableFalse(pos)||isAfterMedia(pos);};var trimEmptyTextNode=function(dom,node){if(isText$7(node)&&node.data.length===0){dom.remove(node);}};var deleteContentAndShowCaret=function(editor,range,node,direction,forward,peekCaretPosition){showCaret(direction,editor,peekCaretPosition.getNode(!forward),forward,true).each(function(caretRange){if(range.collapsed){var deleteRange=range.cloneRange();if(forward){deleteRange.setEnd(caretRange.startContainer,caretRange.startOffset);}else{deleteRange.setStart(caretRange.endContainer,caretRange.endOffset);}deleteRange.deleteContents();}else{range.deleteContents();}editor.selection.setRng(caretRange);});trimEmptyTextNode(editor.dom,node);return true;};var deleteBoundaryText=function(editor,forward){var range=editor.selection.getRng();if(!isText$7(range.commonAncestorContainer)){return false;}var direction=forward?HDirection.Forwards:HDirection.Backwards;var caretWalker=CaretWalker(editor.getBody());var getNextPosFn=curry(getVisualCaretPosition,forward?caretWalker.next:caretWalker.prev);var isBeforeFn=forward?isBeforeBoundary:isAfterBoundary;var caretPosition=getNormalizedRangeEndPoint(direction,editor.getBody(),range);var nextCaretPosition=normalizePosition(forward,getNextPosFn(caretPosition));if(!nextCaretPosition||!isMoveInsideSameBlock(caretPosition,nextCaretPosition)){return false;}else if(isBeforeFn(nextCaretPosition)){return deleteContentAndShowCaret(editor,range,caretPosition.getNode(),direction,forward,nextCaretPosition);}var peekCaretPosition=getNextPosFn(nextCaretPosition);if(peekCaretPosition&&isBeforeFn(peekCaretPosition)){if(isMoveInsideSameBlock(nextCaretPosition,peekCaretPosition)){return deleteContentAndShowCaret(editor,range,caretPosition.getNode(),direction,forward,peekCaretPosition);}}return false;};var backspaceDelete$6=function(editor,forward){return deleteBoundaryText(editor,forward);};var isCompoundElement=function(node){return isTableCell$4(SugarElement.fromDom(node))||isListItem(SugarElement.fromDom(node));};var DeleteAction=Adt.generate([{remove:['element']},{moveToElement:['element']},{moveToPosition:['position']}]);var isAtContentEditableBlockCaret=function(forward,from){var elm=from.getNode(forward===false);var caretLocation=forward?'after':'before';return isElement$5(elm)&&elm.getAttribute('data-mce-caret')===caretLocation;};var isDeleteFromCefDifferentBlocks=function(root,forward,from,to){var inSameBlock=function(elm){return isInline$1(SugarElement.fromDom(elm))&&!isInSameBlock(from,to,root);};return getRelativeCefElm(!forward,from).fold(function(){return getRelativeCefElm(forward,to).fold(never,inSameBlock);},inSameBlock);};var deleteEmptyBlockOrMoveToCef=function(root,forward,from,to){var toCefElm=to.getNode(forward===false);return getParentBlock$1(SugarElement.fromDom(root),SugarElement.fromDom(from.getNode())).map(function(blockElm){return isEmpty$2(blockElm)?DeleteAction.remove(blockElm.dom):DeleteAction.moveToElement(toCefElm);}).orThunk(function(){return Optional.some(DeleteAction.moveToElement(toCefElm));});};var findCefPosition=function(root,forward,from){return fromPosition(forward,root,from).bind(function(to){if(isCompoundElement(to.getNode())){return Optional.none();}else if(isDeleteFromCefDifferentBlocks(root,forward,from,to)){return Optional.none();}else if(forward&&isContentEditableFalse$b(to.getNode())){return deleteEmptyBlockOrMoveToCef(root,forward,from,to);}else if(forward===false&&isContentEditableFalse$b(to.getNode(true))){return deleteEmptyBlockOrMoveToCef(root,forward,from,to);}else if(forward&&isAfterContentEditableFalse(from)){return Optional.some(DeleteAction.moveToPosition(to));}else if(forward===false&&isBeforeContentEditableFalse(from)){return Optional.some(DeleteAction.moveToPosition(to));}else{return Optional.none();}});};var getContentEditableBlockAction=function(forward,elm){if(forward&&isContentEditableFalse$b(elm.nextSibling)){return Optional.some(DeleteAction.moveToElement(elm.nextSibling));}else if(forward===false&&isContentEditableFalse$b(elm.previousSibling)){return Optional.some(DeleteAction.moveToElement(elm.previousSibling));}else{return Optional.none();}};var skipMoveToActionFromInlineCefToContent=function(root,from,deleteAction){return deleteAction.fold(function(elm){return Optional.some(DeleteAction.remove(elm));},function(elm){return Optional.some(DeleteAction.moveToElement(elm));},function(to){if(isInSameBlock(from,to,root)){return Optional.none();}else{return Optional.some(DeleteAction.moveToPosition(to));}});};var getContentEditableAction=function(root,forward,from){if(isAtContentEditableBlockCaret(forward,from)){return getContentEditableBlockAction(forward,from.getNode(forward===false)).fold(function(){return findCefPosition(root,forward,from);},Optional.some);}else{return findCefPosition(root,forward,from).bind(function(deleteAction){return skipMoveToActionFromInlineCefToContent(root,from,deleteAction);});}};var read=function(root,forward,rng){var normalizedRange=normalizeRange(forward?1:-1,root,rng);var from=CaretPosition.fromRangeStart(normalizedRange);var rootElement=SugarElement.fromDom(root);if(forward===false&&isAfterContentEditableFalse(from)){return Optional.some(DeleteAction.remove(from.getNode(true)));}else if(forward&&isBeforeContentEditableFalse(from)){return Optional.some(DeleteAction.remove(from.getNode()));}else if(forward===false&&isBeforeContentEditableFalse(from)&&isAfterBr(rootElement,from)){return findPreviousBr(rootElement,from).map(function(br){return DeleteAction.remove(br.getNode());});}else if(forward&&isAfterContentEditableFalse(from)&&isBeforeBr$1(rootElement,from)){return findNextBr(rootElement,from).map(function(br){return DeleteAction.remove(br.getNode());});}else{return getContentEditableAction(root,forward,from);}};var deleteElement$1=function(editor,forward){return function(element){editor._selectionOverrides.hideFakeCaret();deleteElement$2(editor,forward,SugarElement.fromDom(element));return true;};};var moveToElement=function(editor,forward){return function(element){var pos=forward?CaretPosition.before(element):CaretPosition.after(element);editor.selection.setRng(pos.toRange());return true;};};var moveToPosition=function(editor){return function(pos){editor.selection.setRng(pos.toRange());return true;};};var getAncestorCe=function(editor,node){return Optional.from(getContentEditableRoot$1(editor.getBody(),node));};var backspaceDeleteCaret=function(editor,forward){var selectedNode=editor.selection.getNode();return getAncestorCe(editor,selectedNode).filter(isContentEditableFalse$b).fold(function(){return read(editor.getBody(),forward,editor.selection.getRng()).exists(function(deleteAction){return deleteAction.fold(deleteElement$1(editor,forward),moveToElement(editor,forward),moveToPosition(editor));});},always);};var deleteOffscreenSelection=function(rootElement){each$k(descendants(rootElement,'.mce-offscreen-selection'),remove$7);};var backspaceDeleteRange=function(editor,forward){var selectedNode=editor.selection.getNode();if(isContentEditableFalse$b(selectedNode)&&!isTableCell$5(selectedNode)){var hasCefAncestor=getAncestorCe(editor,selectedNode.parentNode).filter(isContentEditableFalse$b);return hasCefAncestor.fold(function(){deleteOffscreenSelection(SugarElement.fromDom(editor.getBody()));deleteElement$2(editor,forward,SugarElement.fromDom(editor.selection.getNode()));paddEmptyBody(editor);return true;},always);}return false;};var paddEmptyElement=function(editor){var dom=editor.dom,selection=editor.selection;var ceRoot=getContentEditableRoot$1(editor.getBody(),selection.getNode());if(isContentEditableTrue$4(ceRoot)&&dom.isBlock(ceRoot)&&dom.isEmpty(ceRoot)){var br=dom.create('br',{'data-mce-bogus':'1'});dom.setHTML(ceRoot,'');ceRoot.appendChild(br);selection.setRng(CaretPosition.before(br).toRange());}return true;};var backspaceDelete$5=function(editor,forward){if(editor.selection.isCollapsed()){return backspaceDeleteCaret(editor,forward);}else{return backspaceDeleteRange(editor,forward);}};var deleteCaret$2=function(editor,forward){var fromPos=CaretPosition.fromRangeStart(editor.selection.getRng());return fromPosition(forward,editor.getBody(),fromPos).filter(function(pos){return forward?isBeforeImageBlock(pos):isAfterImageBlock(pos);}).bind(function(pos){return Optional.from(getChildNodeAtRelativeOffset(forward?0:-1,pos));}).exists(function(elm){editor.selection.select(elm);return true;});};var backspaceDelete$4=function(editor,forward){return editor.selection.isCollapsed()?deleteCaret$2(editor,forward):false;};var isText=isText$7;var startsWithCaretContainer=function(node){return isText(node)&&node.data[0]===ZWSP$1;};var endsWithCaretContainer=function(node){return isText(node)&&node.data[node.data.length-1]===ZWSP$1;};var createZwsp=function(node){return node.ownerDocument.createTextNode(ZWSP$1);};var insertBefore=function(node){if(isText(node.previousSibling)){if(endsWithCaretContainer(node.previousSibling)){return node.previousSibling;}else{node.previousSibling.appendData(ZWSP$1);return node.previousSibling;}}else if(isText(node)){if(startsWithCaretContainer(node)){return node;}else{node.insertData(0,ZWSP$1);return node;}}else{var newNode=createZwsp(node);node.parentNode.insertBefore(newNode,node);return newNode;}};var insertAfter=function(node){if(isText(node.nextSibling)){if(startsWithCaretContainer(node.nextSibling)){return node.nextSibling;}else{node.nextSibling.insertData(0,ZWSP$1);return node.nextSibling;}}else if(isText(node)){if(endsWithCaretContainer(node)){return node;}else{node.appendData(ZWSP$1);return node;}}else{var newNode=createZwsp(node);if(node.nextSibling){node.parentNode.insertBefore(newNode,node.nextSibling);}else{node.parentNode.appendChild(newNode);}return newNode;}};var insertInline=function(before,node){return before?insertBefore(node):insertAfter(node);};var insertInlineBefore=curry(insertInline,true);var insertInlineAfter=curry(insertInline,false);var insertInlinePos=function(pos,before){if(isText$7(pos.container())){return insertInline(before,pos.container());}else{return insertInline(before,pos.getNode());}};var isPosCaretContainer=function(pos,caret){var caretNode=caret.get();return caretNode&&pos.container()===caretNode&&isCaretContainerInline(caretNode);};var renderCaret=function(caret,location){return location.fold(function(element){remove$2(caret.get());var text=insertInlineBefore(element);caret.set(text);return Optional.some(CaretPosition(text,text.length-1));},function(element){return firstPositionIn(element).map(function(pos){if(!isPosCaretContainer(pos,caret)){remove$2(caret.get());var text=insertInlinePos(pos,true);caret.set(text);return CaretPosition(text,1);}else{return CaretPosition(caret.get(),1);}});},function(element){return lastPositionIn(element).map(function(pos){if(!isPosCaretContainer(pos,caret)){remove$2(caret.get());var text=insertInlinePos(pos,false);caret.set(text);return CaretPosition(text,text.length-1);}else{return CaretPosition(caret.get(),caret.get().length-1);}});},function(element){remove$2(caret.get());var text=insertInlineAfter(element);caret.set(text);return Optional.some(CaretPosition(text,1));});};var evaluateUntil=function(fns,args){for(var i=0;i<fns.length;i++){var result=fns[i].apply(null,args);if(result.isSome()){return result;}}return Optional.none();};var Location=Adt.generate([{before:['element']},{start:['element']},{end:['element']},{after:['element']}]);var rescope$1=function(rootNode,node){var parentBlock=getParentBlock$2(node,rootNode);return parentBlock?parentBlock:rootNode;};var before=function(isInlineTarget,rootNode,pos){var nPos=normalizeForwards(pos);var scope=rescope$1(rootNode,nPos.container());return findRootInline(isInlineTarget,scope,nPos).fold(function(){return nextPosition(scope,nPos).bind(curry(findRootInline,isInlineTarget,scope)).map(function(inline){return Location.before(inline);});},Optional.none);};var isNotInsideFormatCaretContainer=function(rootNode,elm){return getParentCaretContainer(rootNode,elm)===null;};var findInsideRootInline=function(isInlineTarget,rootNode,pos){return findRootInline(isInlineTarget,rootNode,pos).filter(curry(isNotInsideFormatCaretContainer,rootNode));};var start$1=function(isInlineTarget,rootNode,pos){var nPos=normalizeBackwards(pos);return findInsideRootInline(isInlineTarget,rootNode,nPos).bind(function(inline){var prevPos=prevPosition(inline,nPos);return prevPos.isNone()?Optional.some(Location.start(inline)):Optional.none();});};var end=function(isInlineTarget,rootNode,pos){var nPos=normalizeForwards(pos);return findInsideRootInline(isInlineTarget,rootNode,nPos).bind(function(inline){var nextPos=nextPosition(inline,nPos);return nextPos.isNone()?Optional.some(Location.end(inline)):Optional.none();});};var after=function(isInlineTarget,rootNode,pos){var nPos=normalizeBackwards(pos);var scope=rescope$1(rootNode,nPos.container());return findRootInline(isInlineTarget,scope,nPos).fold(function(){return prevPosition(scope,nPos).bind(curry(findRootInline,isInlineTarget,scope)).map(function(inline){return Location.after(inline);});},Optional.none);};var isValidLocation=function(location){return isRtl(getElement(location))===false;};var readLocation=function(isInlineTarget,rootNode,pos){var location=evaluateUntil([before,start$1,end,after],[isInlineTarget,rootNode,pos]);return location.filter(isValidLocation);};var getElement=function(location){return location.fold(identity,identity,identity,identity);};var getName=function(location){return location.fold(constant('before'),constant('start'),constant('end'),constant('after'));};var outside=function(location){return location.fold(Location.before,Location.before,Location.after,Location.after);};var inside=function(location){return location.fold(Location.start,Location.start,Location.end,Location.end);};var isEq=function(location1,location2){return getName(location1)===getName(location2)&&getElement(location1)===getElement(location2);};var betweenInlines=function(forward,isInlineTarget,rootNode,from,to,location){return lift2(findRootInline(isInlineTarget,rootNode,from),findRootInline(isInlineTarget,rootNode,to),function(fromInline,toInline){if(fromInline!==toInline&&hasSameParentBlock(rootNode,fromInline,toInline)){return Location.after(forward?fromInline:toInline);}else{return location;}}).getOr(location);};var skipNoMovement=function(fromLocation,toLocation){return fromLocation.fold(always,function(fromLocation){return!isEq(fromLocation,toLocation);});};var findLocationTraverse=function(forward,isInlineTarget,rootNode,fromLocation,pos){var from=normalizePosition(forward,pos);var to=fromPosition(forward,rootNode,from).map(curry(normalizePosition,forward));var location=to.fold(function(){return fromLocation.map(outside);},function(to){return readLocation(isInlineTarget,rootNode,to).map(curry(betweenInlines,forward,isInlineTarget,rootNode,from,to)).filter(curry(skipNoMovement,fromLocation));});return location.filter(isValidLocation);};var findLocationSimple=function(forward,location){if(forward){return location.fold(compose(Optional.some,Location.start),Optional.none,compose(Optional.some,Location.after),Optional.none);}else{return location.fold(Optional.none,compose(Optional.some,Location.before),Optional.none,compose(Optional.some,Location.end));}};var findLocation$1=function(forward,isInlineTarget,rootNode,pos){var from=normalizePosition(forward,pos);var fromLocation=readLocation(isInlineTarget,rootNode,from);return readLocation(isInlineTarget,rootNode,from).bind(curry(findLocationSimple,forward)).orThunk(function(){return findLocationTraverse(forward,isInlineTarget,rootNode,fromLocation,pos);});};curry(findLocation$1,false);curry(findLocation$1,true);var hasSelectionModifyApi=function(editor){return isFunction(editor.selection.getSel().modify);};var moveRel=function(forward,selection,pos){var delta=forward?1:-1;selection.setRng(CaretPosition(pos.container(),pos.offset()+delta).toRange());selection.getSel().modify('move',forward?'forward':'backward','word');return true;};var moveByWord=function(forward,editor){var rng=editor.selection.getRng();var pos=forward?CaretPosition.fromRangeEnd(rng):CaretPosition.fromRangeStart(rng);if(!hasSelectionModifyApi(editor)){return false;}else if(forward&&isBeforeInline(pos)){return moveRel(true,editor.selection,pos);}else if(!forward&&isAfterInline(pos)){return moveRel(false,editor.selection,pos);}else{return false;}};var BreakType;(function(BreakType){BreakType[BreakType['Br']=0]='Br';BreakType[BreakType['Block']=1]='Block';BreakType[BreakType['Wrap']=2]='Wrap';BreakType[BreakType['Eol']=3]='Eol';})(BreakType||(BreakType={}));var flip=function(direction,positions){return direction===HDirection.Backwards?reverse(positions):positions;};var walk=function(direction,caretWalker,pos){return direction===HDirection.Forwards?caretWalker.next(pos):caretWalker.prev(pos);};var getBreakType=function(scope,direction,currentPos,nextPos){if(isBr$5(nextPos.getNode(direction===HDirection.Forwards))){return BreakType.Br;}else if(isInSameBlock(currentPos,nextPos)===false){return BreakType.Block;}else{return BreakType.Wrap;}};var getPositionsUntil=function(predicate,direction,scope,start){var caretWalker=CaretWalker(scope);var currentPos=start;var positions=[];while(currentPos){var nextPos=walk(direction,caretWalker,currentPos);if(!nextPos){break;}if(isBr$5(nextPos.getNode(false))){if(direction===HDirection.Forwards){return{positions:flip(direction,positions).concat([nextPos]),breakType:BreakType.Br,breakAt:Optional.some(nextPos)};}else{return{positions:flip(direction,positions),breakType:BreakType.Br,breakAt:Optional.some(nextPos)};}}if(!nextPos.isVisible()){currentPos=nextPos;continue;}if(predicate(currentPos,nextPos)){var breakType=getBreakType(scope,direction,currentPos,nextPos);return{positions:flip(direction,positions),breakType:breakType,breakAt:Optional.some(nextPos)};}positions.push(nextPos);currentPos=nextPos;}return{positions:flip(direction,positions),breakType:BreakType.Eol,breakAt:Optional.none()};};var getAdjacentLinePositions=function(direction,getPositionsUntilBreak,scope,start){return getPositionsUntilBreak(scope,start).breakAt.map(function(pos){var positions=getPositionsUntilBreak(scope,pos).positions;return direction===HDirection.Backwards?positions.concat(pos):[pos].concat(positions);}).getOr([]);};var findClosestHorizontalPositionFromPoint=function(positions,x){return foldl(positions,function(acc,newPos){return acc.fold(function(){return Optional.some(newPos);},function(lastPos){return lift2(head(lastPos.getClientRects()),head(newPos.getClientRects()),function(lastRect,newRect){var lastDist=Math.abs(x-lastRect.left);var newDist=Math.abs(x-newRect.left);return newDist<=lastDist?newPos:lastPos;}).or(acc);});},Optional.none());};var findClosestHorizontalPosition=function(positions,pos){return head(pos.getClientRects()).bind(function(targetRect){return findClosestHorizontalPositionFromPoint(positions,targetRect.left);});};var getPositionsUntilPreviousLine=curry(getPositionsUntil,CaretPosition.isAbove,-1);var getPositionsUntilNextLine=curry(getPositionsUntil,CaretPosition.isBelow,1);var getPositionsAbove=curry(getAdjacentLinePositions,-1,getPositionsUntilPreviousLine);var getPositionsBelow=curry(getAdjacentLinePositions,1,getPositionsUntilNextLine);var isAtFirstLine=function(scope,pos){return getPositionsUntilPreviousLine(scope,pos).breakAt.isNone();};var isAtLastLine=function(scope,pos){return getPositionsUntilNextLine(scope,pos).breakAt.isNone();};var getFirstLinePositions=function(scope){return firstPositionIn(scope).map(function(pos){return[pos].concat(getPositionsUntilNextLine(scope,pos).positions);}).getOr([]);};var getLastLinePositions=function(scope){return lastPositionIn(scope).map(function(pos){return getPositionsUntilPreviousLine(scope,pos).positions.concat(pos);}).getOr([]);};var getNodeClientRects=function(node){var toArrayWithNode=function(clientRects){return map$3(clientRects,function(rect){var clientRect=clone(rect);clientRect.node=node;return clientRect;});};if(isElement$5(node)){return toArrayWithNode(node.getClientRects());}if(isText$7(node)){var rng=node.ownerDocument.createRange();rng.setStart(node,0);rng.setEnd(node,node.data.length);return toArrayWithNode(rng.getClientRects());}};var getClientRects=function(nodes){return bind(nodes,getNodeClientRects);};var VDirection;(function(VDirection){VDirection[VDirection['Up']=-1]='Up';VDirection[VDirection['Down']=1]='Down';})(VDirection||(VDirection={}));var findUntil=function(direction,root,predicateFn,node){while(node=findNode$1(node,direction,isEditableCaretCandidate$1,root)){if(predicateFn(node)){return;}}};var walkUntil$1=function(direction,isAboveFn,isBeflowFn,root,predicateFn,caretPosition){var line=0;var result=[];var add=function(node){var clientRects=getClientRects([node]);if(direction===-1){clientRects=clientRects.reverse();}for(var i=0;i<clientRects.length;i++){var clientRect=clientRects[i];if(isBeflowFn(clientRect,targetClientRect)){continue;}if(result.length>0&&isAboveFn(clientRect,last$1(result))){line++;}clientRect.line=line;if(predicateFn(clientRect)){return true;}result.push(clientRect);}};var targetClientRect=last$1(caretPosition.getClientRects());if(!targetClientRect){return result;}var node=caretPosition.getNode();add(node);findUntil(direction,root,add,node);return result;};var aboveLineNumber=function(lineNumber,clientRect){return clientRect.line>lineNumber;};var isLineNumber=function(lineNumber,clientRect){return clientRect.line===lineNumber;};var upUntil=curry(walkUntil$1,VDirection.Up,isAbove$1,isBelow$1);var downUntil=curry(walkUntil$1,VDirection.Down,isBelow$1,isAbove$1);var positionsUntil=function(direction,root,predicateFn,node){var caretWalker=CaretWalker(root);var walkFn;var isBelowFn;var isAboveFn;var caretPosition;var result=[];var line=0;var getClientRect=function(caretPosition){if(direction===1){return last$1(caretPosition.getClientRects());}return last$1(caretPosition.getClientRects());};if(direction===1){walkFn=caretWalker.next;isBelowFn=isBelow$1;isAboveFn=isAbove$1;caretPosition=CaretPosition.after(node);}else{walkFn=caretWalker.prev;isBelowFn=isAbove$1;isAboveFn=isBelow$1;caretPosition=CaretPosition.before(node);}var targetClientRect=getClientRect(caretPosition);do{if(!caretPosition.isVisible()){continue;}var rect=getClientRect(caretPosition);if(isAboveFn(rect,targetClientRect)){continue;}if(result.length>0&&isBelowFn(rect,last$1(result))){line++;}var clientRect=clone(rect);clientRect.position=caretPosition;clientRect.line=line;if(predicateFn(clientRect)){return result;}result.push(clientRect);}while(caretPosition=walkFn(caretPosition));return result;};var isAboveLine=function(lineNumber){return function(clientRect){return aboveLineNumber(lineNumber,clientRect);};};var isLine=function(lineNumber){return function(clientRect){return isLineNumber(lineNumber,clientRect);};};var isContentEditableFalse$3=isContentEditableFalse$b;var findNode=findNode$1;var distanceToRectLeft=function(clientRect,clientX){return Math.abs(clientRect.left-clientX);};var distanceToRectRight=function(clientRect,clientX){return Math.abs(clientRect.right-clientX);};var isInsideX=function(clientX,clientRect){return clientX>=clientRect.left&&clientX<=clientRect.right;};var isInsideY=function(clientY,clientRect){return clientY>=clientRect.top&&clientY<=clientRect.bottom;};var isNodeClientRect=function(rect){return hasNonNullableKey(rect,'node');};var findClosestClientRect=function(clientRects,clientX,allowInside){if(allowInside===void 0){allowInside=always;}return reduce(clientRects,function(oldClientRect,clientRect){if(isInsideX(clientX,clientRect)){return allowInside(clientRect)?clientRect:oldClientRect;}if(isInsideX(clientX,oldClientRect)){return allowInside(oldClientRect)?oldClientRect:clientRect;}var oldDistance=Math.min(distanceToRectLeft(oldClientRect,clientX),distanceToRectRight(oldClientRect,clientX));var newDistance=Math.min(distanceToRectLeft(clientRect,clientX),distanceToRectRight(clientRect,clientX));if(newDistance===oldDistance&&isNodeClientRect(clientRect)&&isContentEditableFalse$3(clientRect.node)){return clientRect;}if(newDistance<oldDistance){return clientRect;}return oldClientRect;});};var walkUntil=function(direction,root,predicateFn,startNode,includeChildren){var node=findNode(startNode,direction,isEditableCaretCandidate$1,root,!includeChildren);do{if(!node||predicateFn(node)){return;}}while(node=findNode(node,direction,isEditableCaretCandidate$1,root));};var findLineNodeRects=function(root,targetNodeRect,includeChildren){if(includeChildren===void 0){includeChildren=true;}var clientRects=[];var collect=function(checkPosFn,node){var lineRects=filter$4(getClientRects([node]),function(clientRect){return!checkPosFn(clientRect,targetNodeRect);});clientRects=clientRects.concat(lineRects);return lineRects.length===0;};clientRects.push(targetNodeRect);walkUntil(VDirection.Up,root,curry(collect,isAbove$1),targetNodeRect.node,includeChildren);walkUntil(VDirection.Down,root,curry(collect,isBelow$1),targetNodeRect.node,includeChildren);return clientRects;};var getFakeCaretTargets=function(root){return filter$4(from(root.getElementsByTagName('*')),isFakeCaretTarget);};var caretInfo=function(clientRect,clientX){return{node:clientRect.node,before:distanceToRectLeft(clientRect,clientX)<distanceToRectRight(clientRect,clientX)};};var closestFakeCaret=function(root,clientX,clientY){var fakeTargetNodeRects=getClientRects(getFakeCaretTargets(root));var targetNodeRects=filter$4(fakeTargetNodeRects,curry(isInsideY,clientY));var checkInside=function(clientRect){return!isTable$3(clientRect.node)&&!isMedia$2(clientRect.node);};var closestNodeRect=findClosestClientRect(targetNodeRects,clientX,checkInside);if(closestNodeRect){var includeChildren=checkInside(closestNodeRect);closestNodeRect=findClosestClientRect(findLineNodeRects(root,closestNodeRect,includeChildren),clientX,checkInside);if(closestNodeRect&&isFakeCaretTarget(closestNodeRect.node)){return caretInfo(closestNodeRect,clientX);}}return null;};var moveToRange=function(editor,rng){editor.selection.setRng(rng);scrollRangeIntoView(editor,editor.selection.getRng());};var renderRangeCaretOpt=function(editor,range,scrollIntoView){return Optional.some(renderRangeCaret(editor,range,scrollIntoView));};var moveHorizontally=function(editor,direction,range,isBefore,isAfter,isElement){var forwards=direction===HDirection.Forwards;var caretWalker=CaretWalker(editor.getBody());var getNextPosFn=curry(getVisualCaretPosition,forwards?caretWalker.next:caretWalker.prev);var isBeforeFn=forwards?isBefore:isAfter;if(!range.collapsed){var node=getSelectedNode(range);if(isElement(node)){return showCaret(direction,editor,node,direction===HDirection.Backwards,false);}}var caretPosition=getNormalizedRangeEndPoint(direction,editor.getBody(),range);if(isBeforeFn(caretPosition)){return selectNode(editor,caretPosition.getNode(!forwards));}var nextCaretPosition=normalizePosition(forwards,getNextPosFn(caretPosition));var rangeIsInContainerBlock=isRangeInCaretContainerBlock(range);if(!nextCaretPosition){return rangeIsInContainerBlock?Optional.some(range):Optional.none();}if(isBeforeFn(nextCaretPosition)){return showCaret(direction,editor,nextCaretPosition.getNode(!forwards),forwards,false);}var peekCaretPosition=getNextPosFn(nextCaretPosition);if(peekCaretPosition&&isBeforeFn(peekCaretPosition)){if(isMoveInsideSameBlock(nextCaretPosition,peekCaretPosition)){return showCaret(direction,editor,peekCaretPosition.getNode(!forwards),forwards,false);}}if(rangeIsInContainerBlock){return renderRangeCaretOpt(editor,nextCaretPosition.toRange(),false);}return Optional.none();};var moveVertically=function(editor,direction,range,isBefore,isAfter,isElement){var caretPosition=getNormalizedRangeEndPoint(direction,editor.getBody(),range);var caretClientRect=last$1(caretPosition.getClientRects());var forwards=direction===VDirection.Down;if(!caretClientRect){return Optional.none();}var walkerFn=forwards?downUntil:upUntil;var linePositions=walkerFn(editor.getBody(),isAboveLine(1),caretPosition);var nextLinePositions=filter$4(linePositions,isLine(1));var clientX=caretClientRect.left;var nextLineRect=findClosestClientRect(nextLinePositions,clientX);if(nextLineRect&&isElement(nextLineRect.node)){var dist1=Math.abs(clientX-nextLineRect.left);var dist2=Math.abs(clientX-nextLineRect.right);return showCaret(direction,editor,nextLineRect.node,dist1<dist2,false);}var currentNode;if(isBefore(caretPosition)){currentNode=caretPosition.getNode();}else if(isAfter(caretPosition)){currentNode=caretPosition.getNode(true);}else{currentNode=getSelectedNode(range);}if(currentNode){var caretPositions=positionsUntil(direction,editor.getBody(),isAboveLine(1),currentNode);var closestNextLineRect=findClosestClientRect(filter$4(caretPositions,isLine(1)),clientX);if(closestNextLineRect){return renderRangeCaretOpt(editor,closestNextLineRect.position.toRange(),false);}closestNextLineRect=last$1(filter$4(caretPositions,isLine(0)));if(closestNextLineRect){return renderRangeCaretOpt(editor,closestNextLineRect.position.toRange(),false);}}if(nextLinePositions.length===0){return getLineEndPoint(editor,forwards).filter(forwards?isAfter:isBefore).map(function(pos){return renderRangeCaret(editor,pos.toRange(),false);});}return Optional.none();};var getLineEndPoint=function(editor,forward){var rng=editor.selection.getRng();var body=editor.getBody();if(forward){var from=CaretPosition.fromRangeEnd(rng);var result=getPositionsUntilNextLine(body,from);return last$2(result.positions);}else{var from=CaretPosition.fromRangeStart(rng);var result=getPositionsUntilPreviousLine(body,from);return head(result.positions);}};var moveToLineEndPoint$3=function(editor,forward,isElementPosition){return getLineEndPoint(editor,forward).filter(isElementPosition).exists(function(pos){editor.selection.setRng(pos.toRange());return true;});};var setCaretPosition=function(editor,pos){var rng=editor.dom.createRng();rng.setStart(pos.container(),pos.offset());rng.setEnd(pos.container(),pos.offset());editor.selection.setRng(rng);};var setSelected=function(state,elm){if(state){elm.setAttribute('data-mce-selected','inline-boundary');}else{elm.removeAttribute('data-mce-selected');}};var renderCaretLocation=function(editor,caret,location){return renderCaret(caret,location).map(function(pos){setCaretPosition(editor,pos);return location;});};var findLocation=function(editor,caret,forward){var rootNode=editor.getBody();var from=CaretPosition.fromRangeStart(editor.selection.getRng());var isInlineTarget$1=curry(isInlineTarget,editor);var location=findLocation$1(forward,isInlineTarget$1,rootNode,from);return location.bind(function(location){return renderCaretLocation(editor,caret,location);});};var toggleInlines=function(isInlineTarget,dom,elms){var inlineBoundaries=map$3(descendants(SugarElement.fromDom(dom.getRoot()),'*[data-mce-selected=\"inline-boundary\"]'),function(e){return e.dom;});var selectedInlines=filter$4(inlineBoundaries,isInlineTarget);var targetInlines=filter$4(elms,isInlineTarget);each$k(difference(selectedInlines,targetInlines),curry(setSelected,false));each$k(difference(targetInlines,selectedInlines),curry(setSelected,true));};var safeRemoveCaretContainer=function(editor,caret){if(editor.selection.isCollapsed()&&editor.composing!==true&&caret.get()){var pos=CaretPosition.fromRangeStart(editor.selection.getRng());if(CaretPosition.isTextPosition(pos)&&isAtZwsp(pos)===false){setCaretPosition(editor,removeAndReposition(caret.get(),pos));caret.set(null);}}};var renderInsideInlineCaret=function(isInlineTarget,editor,caret,elms){if(editor.selection.isCollapsed()){var inlines=filter$4(elms,isInlineTarget);each$k(inlines,function(_inline){var pos=CaretPosition.fromRangeStart(editor.selection.getRng());readLocation(isInlineTarget,editor.getBody(),pos).bind(function(location){return renderCaretLocation(editor,caret,location);});});}};var move$2=function(editor,caret,forward){return isInlineBoundariesEnabled(editor)?findLocation(editor,caret,forward).isSome():false;};var moveWord=function(forward,editor,_caret){return isInlineBoundariesEnabled(editor)?moveByWord(forward,editor):false;};var setupSelectedState=function(editor){var caret=Cell(null);var isInlineTarget$1=curry(isInlineTarget,editor);editor.on('NodeChange',function(e){if(isInlineBoundariesEnabled(editor)&&!(Env.browser.isIE()&&e.initial)){toggleInlines(isInlineTarget$1,editor.dom,e.parents);safeRemoveCaretContainer(editor,caret);renderInsideInlineCaret(isInlineTarget$1,editor,caret,e.parents);}});return caret;};var moveNextWord=curry(moveWord,true);var movePrevWord=curry(moveWord,false);var moveToLineEndPoint$2=function(editor,forward,caret){if(isInlineBoundariesEnabled(editor)){var linePoint=getLineEndPoint(editor,forward).getOrThunk(function(){var rng=editor.selection.getRng();return forward?CaretPosition.fromRangeEnd(rng):CaretPosition.fromRangeStart(rng);});return readLocation(curry(isInlineTarget,editor),editor.getBody(),linePoint).exists(function(loc){var outsideLoc=outside(loc);return renderCaret(caret,outsideLoc).exists(function(pos){setCaretPosition(editor,pos);return true;});});}else{return false;}};var rangeFromPositions=function(from,to){var range=document.createRange();range.setStart(from.container(),from.offset());range.setEnd(to.container(),to.offset());return range;};var hasOnlyTwoOrLessPositionsLeft=function(elm){return lift2(firstPositionIn(elm),lastPositionIn(elm),function(firstPos,lastPos){var normalizedFirstPos=normalizePosition(true,firstPos);var normalizedLastPos=normalizePosition(false,lastPos);return nextPosition(elm,normalizedFirstPos).forall(function(pos){return pos.isEqual(normalizedLastPos);});}).getOr(true);};var setCaretLocation=function(editor,caret){return function(location){return renderCaret(caret,location).exists(function(pos){setCaretPosition(editor,pos);return true;});};};var deleteFromTo=function(editor,caret,from,to){var rootNode=editor.getBody();var isInlineTarget$1=curry(isInlineTarget,editor);editor.undoManager.ignore(function(){editor.selection.setRng(rangeFromPositions(from,to));editor.execCommand('Delete');readLocation(isInlineTarget$1,rootNode,CaretPosition.fromRangeStart(editor.selection.getRng())).map(inside).map(setCaretLocation(editor,caret));});editor.nodeChanged();};var rescope=function(rootNode,node){var parentBlock=getParentBlock$2(node,rootNode);return parentBlock?parentBlock:rootNode;};var backspaceDeleteCollapsed=function(editor,caret,forward,from){var rootNode=rescope(editor.getBody(),from.container());var isInlineTarget$1=curry(isInlineTarget,editor);var fromLocation=readLocation(isInlineTarget$1,rootNode,from);return fromLocation.bind(function(location){if(forward){return location.fold(constant(Optional.some(inside(location))),Optional.none,constant(Optional.some(outside(location))),Optional.none);}else{return location.fold(Optional.none,constant(Optional.some(outside(location))),Optional.none,constant(Optional.some(inside(location))));}}).map(setCaretLocation(editor,caret)).getOrThunk(function(){var toPosition=navigate(forward,rootNode,from);var toLocation=toPosition.bind(function(pos){return readLocation(isInlineTarget$1,rootNode,pos);});return lift2(fromLocation,toLocation,function(){return findRootInline(isInlineTarget$1,rootNode,from).exists(function(elm){if(hasOnlyTwoOrLessPositionsLeft(elm)){deleteElement$2(editor,forward,SugarElement.fromDom(elm));return true;}else{return false;}});}).orThunk(function(){return toLocation.bind(function(_){return toPosition.map(function(to){if(forward){deleteFromTo(editor,caret,from,to);}else{deleteFromTo(editor,caret,to,from);}return true;});});}).getOr(false);});};var backspaceDelete$3=function(editor,caret,forward){if(editor.selection.isCollapsed()&&isInlineBoundariesEnabled(editor)){var from=CaretPosition.fromRangeStart(editor.selection.getRng());return backspaceDeleteCollapsed(editor,caret,forward,from);}return false;};var getParentInlines=function(rootElm,startElm){var parents=parentsAndSelf(startElm,rootElm);return findIndex$2(parents,isBlock$2).fold(constant(parents),function(index){return parents.slice(0,index);});};var hasOnlyOneChild=function(elm){return childNodesCount(elm)===1;};var deleteLastPosition=function(forward,editor,target,parentInlines){var isFormatElement$1=curry(isFormatElement,editor);var formatNodes=map$3(filter$4(parentInlines,isFormatElement$1),function(elm){return elm.dom;});if(formatNodes.length===0){deleteElement$2(editor,forward,target);}else{var pos=replaceWithCaretFormat(target.dom,formatNodes);editor.selection.setRng(pos.toRange());}};var deleteCaret$1=function(editor,forward){var rootElm=SugarElement.fromDom(editor.getBody());var startElm=SugarElement.fromDom(editor.selection.getStart());var parentInlines=filter$4(getParentInlines(rootElm,startElm),hasOnlyOneChild);return last$2(parentInlines).exists(function(target){var fromPos=CaretPosition.fromRangeStart(editor.selection.getRng());if(willDeleteLastPositionInElement(forward,fromPos,target.dom)&&!isEmptyCaretFormatElement(target)){deleteLastPosition(forward,editor,target,parentInlines);return true;}else{return false;}});};var backspaceDelete$2=function(editor,forward){return editor.selection.isCollapsed()?deleteCaret$1(editor,forward):false;};var deleteElement=function(editor,forward,element){editor._selectionOverrides.hideFakeCaret();deleteElement$2(editor,forward,SugarElement.fromDom(element));return true;};var deleteCaret=function(editor,forward){var isNearMedia=forward?isBeforeMedia:isAfterMedia;var direction=forward?HDirection.Forwards:HDirection.Backwards;var fromPos=getNormalizedRangeEndPoint(direction,editor.getBody(),editor.selection.getRng());if(isNearMedia(fromPos)){return deleteElement(editor,forward,fromPos.getNode(!forward));}else{return Optional.from(normalizePosition(forward,fromPos)).filter(function(pos){return isNearMedia(pos)&&isMoveInsideSameBlock(fromPos,pos);}).exists(function(pos){return deleteElement(editor,forward,pos.getNode(!forward));});}};var deleteRange=function(editor,forward){var selectedNode=editor.selection.getNode();return isMedia$2(selectedNode)?deleteElement(editor,forward,selectedNode):false;};var backspaceDelete$1=function(editor,forward){return editor.selection.isCollapsed()?deleteCaret(editor,forward):deleteRange(editor,forward);};var isEditable=function(target){return closest$3(target,function(elm){return isContentEditableTrue$4(elm.dom)||isContentEditableFalse$b(elm.dom);}).exists(function(elm){return isContentEditableTrue$4(elm.dom);});};var parseIndentValue=function(value){var number=parseInt(value,10);return isNaN(number)?0:number;};var getIndentStyleName=function(useMargin,element){var indentStyleName=useMargin||isTable$2(element)?'margin':'padding';var suffix=get$5(element,'direction')==='rtl'?'-right':'-left';return indentStyleName+suffix;};var indentElement=function(dom,command,useMargin,value,unit,element){var indentStyleName=getIndentStyleName(useMargin,SugarElement.fromDom(element));if(command==='outdent'){var styleValue=Math.max(0,parseIndentValue(element.style[indentStyleName])-value);dom.setStyle(element,indentStyleName,styleValue?styleValue+unit:'');}else{var styleValue=parseIndentValue(element.style[indentStyleName])+value+unit;dom.setStyle(element,indentStyleName,styleValue);}};var validateBlocks=function(editor,blocks){return forall(blocks,function(block){var indentStyleName=getIndentStyleName(shouldIndentUseMargin(editor),block);var intentValue=getRaw(block,indentStyleName).map(parseIndentValue).getOr(0);var contentEditable=editor.dom.getContentEditable(block.dom);return contentEditable!=='false'&&intentValue>0;});};var canOutdent=function(editor){var blocks=getBlocksToIndent(editor);return!editor.mode.isReadOnly()&&(blocks.length>1||validateBlocks(editor,blocks));};var isListComponent=function(el){return isList(el)||isListItem(el);};var parentIsListComponent=function(el){return parent(el).exists(isListComponent);};var getBlocksToIndent=function(editor){return filter$4(fromDom$1(editor.selection.getSelectedBlocks()),function(el){return!isListComponent(el)&&!parentIsListComponent(el)&&isEditable(el);});};var handle=function(editor,command){var dom=editor.dom,selection=editor.selection,formatter=editor.formatter;var indentation=getIndentation(editor);var indentUnit=/[a-z%]+$/i.exec(indentation)[0];var indentValue=parseInt(indentation,10);var useMargin=shouldIndentUseMargin(editor);var forcedRootBlock=getForcedRootBlock(editor);if(!editor.queryCommandState('InsertUnorderedList')&&!editor.queryCommandState('InsertOrderedList')){if(forcedRootBlock===''&&!dom.getParent(selection.getNode(),dom.isBlock)){formatter.apply('div');}}each$k(getBlocksToIndent(editor),function(block){indentElement(dom,command,useMargin,indentValue,indentUnit,block.dom);});};var backspaceDelete=function(editor,_forward){if(editor.selection.isCollapsed()&&canOutdent(editor)){var dom=editor.dom;var rng=editor.selection.getRng();var pos=CaretPosition.fromRangeStart(rng);var block=dom.getParent(rng.startContainer,dom.isBlock);if(block!==null&&isAtStartOfBlock(SugarElement.fromDom(block),pos)){handle(editor,'outdent');return true;}}return false;};var nativeCommand=function(editor,command){editor.getDoc().execCommand(command,false,null);};var deleteCommand=function(editor,caret){if(backspaceDelete(editor)){return;}else if(backspaceDelete$5(editor,false)){return;}else if(backspaceDelete$6(editor,false)){return;}else if(backspaceDelete$3(editor,caret,false)){return;}else if(backspaceDelete$8(editor,false)){return;}else if(backspaceDelete$9(editor)){return;}else if(backspaceDelete$4(editor,false)){return;}else if(backspaceDelete$1(editor,false)){return;}else if(backspaceDelete$7(editor)){return;}else if(backspaceDelete$2(editor,false)){return;}else{nativeCommand(editor,'Delete');paddEmptyBody(editor);}};var forwardDeleteCommand=function(editor,caret){if(backspaceDelete$5(editor,true)){return;}else if(backspaceDelete$6(editor,true)){return;}else if(backspaceDelete$3(editor,caret,true)){return;}else if(backspaceDelete$8(editor,true)){return;}else if(backspaceDelete$9(editor)){return;}else if(backspaceDelete$4(editor,true)){return;}else if(backspaceDelete$1(editor,true)){return;}else if(backspaceDelete$7(editor)){return;}else if(backspaceDelete$2(editor,true)){return;}else{nativeCommand(editor,'ForwardDelete');}};var setup$f=function(editor,caret){editor.addCommand('delete',function(){deleteCommand(editor,caret);});editor.addCommand('forwardDelete',function(){forwardDeleteCommand(editor,caret);});};var SIGNIFICANT_MOVE=5;var LONGPRESS_DELAY=400;var getTouch=function(event){if(event.touches===undefined||event.touches.length!==1){return Optional.none();}return Optional.some(event.touches[0]);};var isFarEnough=function(touch,data){var distX=Math.abs(touch.clientX-data.x);var distY=Math.abs(touch.clientY-data.y);return distX>SIGNIFICANT_MOVE||distY>SIGNIFICANT_MOVE;};var setup$e=function(editor){var startData=value();var longpressFired=Cell(false);var debounceLongpress=last(function(e){editor.fire('longpress',__assign(__assign({},e),{type:'longpress'}));longpressFired.set(true);},LONGPRESS_DELAY);editor.on('touchstart',function(e){getTouch(e).each(function(touch){debounceLongpress.cancel();var data={x:touch.clientX,y:touch.clientY,target:e.target};debounceLongpress.throttle(e);longpressFired.set(false);startData.set(data);});},true);editor.on('touchmove',function(e){debounceLongpress.cancel();getTouch(e).each(function(touch){startData.on(function(data){if(isFarEnough(touch,data)){startData.clear();longpressFired.set(false);editor.fire('longpresscancel');}});});},true);editor.on('touchend touchcancel',function(e){debounceLongpress.cancel();if(e.type==='touchcancel'){return;}startData.get().filter(function(data){return data.target.isEqualNode(e.target);}).each(function(){if(longpressFired.get()){e.preventDefault();}else{editor.fire('tap',__assign(__assign({},e),{type:'tap'}));}});},true);};var isBlockElement=function(blockElements,node){return has$2(blockElements,node.nodeName);};var isValidTarget=function(blockElements,node){if(isText$7(node)){return true;}else if(isElement$5(node)){return!isBlockElement(blockElements,node)&&!isBookmarkNode$1(node);}else{return false;}};var hasBlockParent=function(blockElements,root,node){return exists(parents(SugarElement.fromDom(node),SugarElement.fromDom(root)),function(elm){return isBlockElement(blockElements,elm.dom);});};var shouldRemoveTextNode=function(blockElements,node){if(isText$7(node)){if(node.nodeValue.length===0){return true;}else if(/^\\s+$/.test(node.nodeValue)&&(!node.nextSibling||isBlockElement(blockElements,node.nextSibling))){return true;}}return false;};var addRootBlocks=function(editor){var dom=editor.dom,selection=editor.selection;var schema=editor.schema,blockElements=schema.getBlockElements();var node=selection.getStart();var rootNode=editor.getBody();var rootBlockNode,tempNode,wrapped;var forcedRootBlock=getForcedRootBlock(editor);if(!node||!isElement$5(node)||!forcedRootBlock){return;}var rootNodeName=rootNode.nodeName.toLowerCase();if(!schema.isValidChild(rootNodeName,forcedRootBlock.toLowerCase())||hasBlockParent(blockElements,rootNode,node)){return;}var rng=selection.getRng();var startContainer=rng.startContainer;var startOffset=rng.startOffset;var endContainer=rng.endContainer;var endOffset=rng.endOffset;var restoreSelection=hasFocus(editor);node=rootNode.firstChild;while(node){if(isValidTarget(blockElements,node)){if(shouldRemoveTextNode(blockElements,node)){tempNode=node;node=node.nextSibling;dom.remove(tempNode);continue;}if(!rootBlockNode){rootBlockNode=dom.create(forcedRootBlock,getForcedRootBlockAttrs(editor));node.parentNode.insertBefore(rootBlockNode,node);wrapped=true;}tempNode=node;node=node.nextSibling;rootBlockNode.appendChild(tempNode);}else{rootBlockNode=null;node=node.nextSibling;}}if(wrapped&&restoreSelection){rng.setStart(startContainer,startOffset);rng.setEnd(endContainer,endOffset);selection.setRng(rng);editor.nodeChanged();}};var setup$d=function(editor){if(getForcedRootBlock(editor)){editor.on('NodeChange',curry(addRootBlocks,editor));}};var findBlockCaretContainer=function(editor){return descendant(SugarElement.fromDom(editor.getBody()),'*[data-mce-caret]').map(function(elm){return elm.dom;}).getOrNull();};var removeIeControlRect=function(editor){editor.selection.setRng(editor.selection.getRng());};var showBlockCaretContainer=function(editor,blockCaretContainer){if(blockCaretContainer.hasAttribute('data-mce-caret')){showCaretContainerBlock(blockCaretContainer);removeIeControlRect(editor);editor.selection.scrollIntoView(blockCaretContainer);}};var handleBlockContainer=function(editor,e){var blockCaretContainer=findBlockCaretContainer(editor);if(!blockCaretContainer){return;}if(e.type==='compositionstart'){e.preventDefault();e.stopPropagation();showBlockCaretContainer(editor,blockCaretContainer);return;}if(hasContent(blockCaretContainer)){showBlockCaretContainer(editor,blockCaretContainer);editor.undoManager.add();}};var setup$c=function(editor){editor.on('keyup compositionstart',curry(handleBlockContainer,editor));};var isContentEditableFalse$2=isContentEditableFalse$b;var moveToCeFalseHorizontally=function(direction,editor,range){return moveHorizontally(editor,direction,range,isBeforeContentEditableFalse,isAfterContentEditableFalse,isContentEditableFalse$2);};var moveToCeFalseVertically=function(direction,editor,range){var isBefore=function(caretPosition){return isBeforeContentEditableFalse(caretPosition)||isBeforeTable(caretPosition);};var isAfter=function(caretPosition){return isAfterContentEditableFalse(caretPosition)||isAfterTable(caretPosition);};return moveVertically(editor,direction,range,isBefore,isAfter,isContentEditableFalse$2);};var createTextBlock=function(editor){var textBlock=editor.dom.create(getForcedRootBlock(editor));if(!Env.ie||Env.ie>=11){textBlock.innerHTML='<br data-mce-bogus=\"1\">';}return textBlock;};var exitPreBlock=function(editor,direction,range){var caretWalker=CaretWalker(editor.getBody());var getVisualCaretPosition$1=curry(getVisualCaretPosition,direction===1?caretWalker.next:caretWalker.prev);if(range.collapsed&&hasForcedRootBlock(editor)){var pre=editor.dom.getParent(range.startContainer,'PRE');if(!pre){return;}var caretPos=getVisualCaretPosition$1(CaretPosition.fromRangeStart(range));if(!caretPos){var newBlock=createTextBlock(editor);if(direction===1){editor.$(pre).after(newBlock);}else{editor.$(pre).before(newBlock);}editor.selection.select(newBlock,true);editor.selection.collapse();}}};var getHorizontalRange=function(editor,forward){var direction=forward?HDirection.Forwards:HDirection.Backwards;var range=editor.selection.getRng();return moveToCeFalseHorizontally(direction,editor,range).orThunk(function(){exitPreBlock(editor,direction,range);return Optional.none();});};var getVerticalRange=function(editor,down){var direction=down?1:-1;var range=editor.selection.getRng();return moveToCeFalseVertically(direction,editor,range).orThunk(function(){exitPreBlock(editor,direction,range);return Optional.none();});};var moveH$2=function(editor,forward){return getHorizontalRange(editor,forward).exists(function(newRange){moveToRange(editor,newRange);return true;});};var moveV$3=function(editor,down){return getVerticalRange(editor,down).exists(function(newRange){moveToRange(editor,newRange);return true;});};var moveToLineEndPoint$1=function(editor,forward){var isCefPosition=forward?isAfterContentEditableFalse:isBeforeContentEditableFalse;return moveToLineEndPoint$3(editor,forward,isCefPosition);};var isTarget=function(node){return contains$3(['figcaption'],name(node));};var rangeBefore=function(target){var rng=document.createRange();rng.setStartBefore(target.dom);rng.setEndBefore(target.dom);return rng;};var insertElement=function(root,elm,forward){if(forward){append$1(root,elm);}else{prepend(root,elm);}};var insertBr=function(root,forward){var br=SugarElement.fromTag('br');insertElement(root,br,forward);return rangeBefore(br);};var insertBlock=function(root,forward,blockName,attrs){var block=SugarElement.fromTag(blockName);var br=SugarElement.fromTag('br');setAll$1(block,attrs);append$1(block,br);insertElement(root,block,forward);return rangeBefore(br);};var insertEmptyLine=function(root,rootBlockName,attrs,forward){if(rootBlockName===''){return insertBr(root,forward);}else{return insertBlock(root,forward,rootBlockName,attrs);}};var getClosestTargetBlock=function(pos,root){var isRoot=curry(eq,root);return closest$3(SugarElement.fromDom(pos.container()),isBlock$2,isRoot).filter(isTarget);};var isAtFirstOrLastLine=function(root,forward,pos){return forward?isAtLastLine(root.dom,pos):isAtFirstLine(root.dom,pos);};var moveCaretToNewEmptyLine=function(editor,forward){var root=SugarElement.fromDom(editor.getBody());var pos=CaretPosition.fromRangeStart(editor.selection.getRng());var rootBlock=getForcedRootBlock(editor);var rootBlockAttrs=getForcedRootBlockAttrs(editor);return getClosestTargetBlock(pos,root).exists(function(){if(isAtFirstOrLastLine(root,forward,pos)){var rng=insertEmptyLine(root,rootBlock,rootBlockAttrs,forward);editor.selection.setRng(rng);return true;}else{return false;}});};var moveV$2=function(editor,forward){if(editor.selection.isCollapsed()){return moveCaretToNewEmptyLine(editor,forward);}else{return false;}};var defaultPatterns=function(patterns){return map$3(patterns,function(pattern){return __assign({shiftKey:false,altKey:false,ctrlKey:false,metaKey:false,keyCode:0,action:noop},pattern);});};var matchesEvent=function(pattern,evt){return evt.keyCode===pattern.keyCode&&evt.shiftKey===pattern.shiftKey&&evt.altKey===pattern.altKey&&evt.ctrlKey===pattern.ctrlKey&&evt.metaKey===pattern.metaKey;};var match$1=function(patterns,evt){return bind(defaultPatterns(patterns),function(pattern){return matchesEvent(pattern,evt)?[pattern]:[];});};var action=function(f){var x=[];for(var _i=1;_i<arguments.length;_i++){x[_i-1]=arguments[_i];}return function(){return f.apply(null,x);};};var execute=function(patterns,evt){return find$3(match$1(patterns,evt),function(pattern){return pattern.action();});};var moveH$1=function(editor,forward){var direction=forward?HDirection.Forwards:HDirection.Backwards;var range=editor.selection.getRng();return moveHorizontally(editor,direction,range,isBeforeMedia,isAfterMedia,isMedia$2).exists(function(newRange){moveToRange(editor,newRange);return true;});};var moveV$1=function(editor,down){var direction=down?1:-1;var range=editor.selection.getRng();return moveVertically(editor,direction,range,isBeforeMedia,isAfterMedia,isMedia$2).exists(function(newRange){moveToRange(editor,newRange);return true;});};var moveToLineEndPoint=function(editor,forward){var isNearMedia=forward?isAfterMedia:isBeforeMedia;return moveToLineEndPoint$3(editor,forward,isNearMedia);};var deflate=function(rect,delta){return{left:rect.left-delta,top:rect.top-delta,right:rect.right+delta*2,bottom:rect.bottom+delta*2,width:rect.width+delta,height:rect.height+delta};};var getCorners=function(getYAxisValue,tds){return bind(tds,function(td){var rect=deflate(clone(td.getBoundingClientRect()),-1);return[{x:rect.left,y:getYAxisValue(rect),cell:td},{x:rect.right,y:getYAxisValue(rect),cell:td}];});};var findClosestCorner=function(corners,x,y){return foldl(corners,function(acc,newCorner){return acc.fold(function(){return Optional.some(newCorner);},function(oldCorner){var oldDist=Math.sqrt(Math.abs(oldCorner.x-x)+Math.abs(oldCorner.y-y));var newDist=Math.sqrt(Math.abs(newCorner.x-x)+Math.abs(newCorner.y-y));return Optional.some(newDist<oldDist?newCorner:oldCorner);});},Optional.none());};var getClosestCell=function(getYAxisValue,isTargetCorner,table,x,y){var cells=descendants(SugarElement.fromDom(table),'td,th,caption').map(function(e){return e.dom;});var corners=filter$4(getCorners(getYAxisValue,cells),function(corner){return isTargetCorner(corner,y);});return findClosestCorner(corners,x,y).map(function(corner){return corner.cell;});};var getBottomValue=function(rect){return rect.bottom;};var getTopValue=function(rect){return rect.top;};var isAbove=function(corner,y){return corner.y<y;};var isBelow=function(corner,y){return corner.y>y;};var getClosestCellAbove=curry(getClosestCell,getBottomValue,isAbove);var getClosestCellBelow=curry(getClosestCell,getTopValue,isBelow);var findClosestPositionInAboveCell=function(table,pos){return head(pos.getClientRects()).bind(function(rect){return getClosestCellAbove(table,rect.left,rect.top);}).bind(function(cell){return findClosestHorizontalPosition(getLastLinePositions(cell),pos);});};var findClosestPositionInBelowCell=function(table,pos){return last$2(pos.getClientRects()).bind(function(rect){return getClosestCellBelow(table,rect.left,rect.top);}).bind(function(cell){return findClosestHorizontalPosition(getFirstLinePositions(cell),pos);});};var hasNextBreak=function(getPositionsUntil,scope,lineInfo){return lineInfo.breakAt.exists(function(breakPos){return getPositionsUntil(scope,breakPos).breakAt.isSome();});};var startsWithWrapBreak=function(lineInfo){return lineInfo.breakType===BreakType.Wrap&&lineInfo.positions.length===0;};var startsWithBrBreak=function(lineInfo){return lineInfo.breakType===BreakType.Br&&lineInfo.positions.length===1;};var isAtTableCellLine=function(getPositionsUntil,scope,pos){var lineInfo=getPositionsUntil(scope,pos);if(startsWithWrapBreak(lineInfo)||!isBr$5(pos.getNode())&&startsWithBrBreak(lineInfo)){return!hasNextBreak(getPositionsUntil,scope,lineInfo);}else{return lineInfo.breakAt.isNone();}};var isAtFirstTableCellLine=curry(isAtTableCellLine,getPositionsUntilPreviousLine);var isAtLastTableCellLine=curry(isAtTableCellLine,getPositionsUntilNextLine);var isCaretAtStartOrEndOfTable=function(forward,rng,table){var caretPos=CaretPosition.fromRangeStart(rng);return positionIn(!forward,table).exists(function(pos){return pos.isEqual(caretPos);});};var navigateHorizontally=function(editor,forward,table,_td){var rng=editor.selection.getRng();var direction=forward?1:-1;if(isFakeCaretTableBrowser()&&isCaretAtStartOrEndOfTable(forward,rng,table)){showCaret(direction,editor,table,!forward,false).each(function(newRng){moveToRange(editor,newRng);});return true;}return false;};var getClosestAbovePosition=function(root,table,start){return findClosestPositionInAboveCell(table,start).orThunk(function(){return head(start.getClientRects()).bind(function(rect){return findClosestHorizontalPositionFromPoint(getPositionsAbove(root,CaretPosition.before(table)),rect.left);});}).getOr(CaretPosition.before(table));};var getClosestBelowPosition=function(root,table,start){return findClosestPositionInBelowCell(table,start).orThunk(function(){return head(start.getClientRects()).bind(function(rect){return findClosestHorizontalPositionFromPoint(getPositionsBelow(root,CaretPosition.after(table)),rect.left);});}).getOr(CaretPosition.after(table));};var getTable=function(previous,pos){var node=pos.getNode(previous);return isElement$5(node)&&node.nodeName==='TABLE'?Optional.some(node):Optional.none();};var renderBlock=function(down,editor,table,pos){var forcedRootBlock=getForcedRootBlock(editor);if(forcedRootBlock){editor.undoManager.transact(function(){var element=SugarElement.fromTag(forcedRootBlock);setAll$1(element,getForcedRootBlockAttrs(editor));append$1(element,SugarElement.fromTag('br'));if(down){after$3(SugarElement.fromDom(table),element);}else{before$4(SugarElement.fromDom(table),element);}var rng=editor.dom.createRng();rng.setStart(element.dom,0);rng.setEnd(element.dom,0);moveToRange(editor,rng);});}else{moveToRange(editor,pos.toRange());}};var moveCaret=function(editor,down,pos){var table=down?getTable(true,pos):getTable(false,pos);var last=down===false;table.fold(function(){return moveToRange(editor,pos.toRange());},function(table){return positionIn(last,editor.getBody()).filter(function(lastPos){return lastPos.isEqual(pos);}).fold(function(){return moveToRange(editor,pos.toRange());},function(_){return renderBlock(down,editor,table,pos);});});};var navigateVertically=function(editor,down,table,td){var rng=editor.selection.getRng();var pos=CaretPosition.fromRangeStart(rng);var root=editor.getBody();if(!down&&isAtFirstTableCellLine(td,pos)){var newPos=getClosestAbovePosition(root,table,pos);moveCaret(editor,down,newPos);return true;}else if(down&&isAtLastTableCellLine(td,pos)){var newPos=getClosestBelowPosition(root,table,pos);moveCaret(editor,down,newPos);return true;}else{return false;}};var move$1=function(editor,forward,mover){return Optional.from(editor.dom.getParent(editor.selection.getNode(),'td,th')).bind(function(td){return Optional.from(editor.dom.getParent(td,'table')).map(function(table){return mover(editor,forward,table,td);});}).getOr(false);};var moveH=function(editor,forward){return move$1(editor,forward,navigateHorizontally);};var moveV=function(editor,forward){return move$1(editor,forward,navigateVertically);};var executeKeydownOverride$3=function(editor,caret,evt){var os=detect().os;execute([{keyCode:VK.RIGHT,action:action(moveH$2,editor,true)},{keyCode:VK.LEFT,action:action(moveH$2,editor,false)},{keyCode:VK.UP,action:action(moveV$3,editor,false)},{keyCode:VK.DOWN,action:action(moveV$3,editor,true)},{keyCode:VK.RIGHT,action:action(moveH,editor,true)},{keyCode:VK.LEFT,action:action(moveH,editor,false)},{keyCode:VK.UP,action:action(moveV,editor,false)},{keyCode:VK.DOWN,action:action(moveV,editor,true)},{keyCode:VK.RIGHT,action:action(moveH$1,editor,true)},{keyCode:VK.LEFT,action:action(moveH$1,editor,false)},{keyCode:VK.UP,action:action(moveV$1,editor,false)},{keyCode:VK.DOWN,action:action(moveV$1,editor,true)},{keyCode:VK.RIGHT,action:action(move$2,editor,caret,true)},{keyCode:VK.LEFT,action:action(move$2,editor,caret,false)},{keyCode:VK.RIGHT,ctrlKey:!os.isOSX(),altKey:os.isOSX(),action:action(moveNextWord,editor,caret)},{keyCode:VK.LEFT,ctrlKey:!os.isOSX(),altKey:os.isOSX(),action:action(movePrevWord,editor,caret)},{keyCode:VK.UP,action:action(moveV$2,editor,false)},{keyCode:VK.DOWN,action:action(moveV$2,editor,true)}],evt).each(function(_){evt.preventDefault();});};var setup$b=function(editor,caret){editor.on('keydown',function(evt){if(evt.isDefaultPrevented()===false){executeKeydownOverride$3(editor,caret,evt);}});};var executeKeydownOverride$2=function(editor,caret,evt){execute([{keyCode:VK.BACKSPACE,action:action(backspaceDelete,editor,false)},{keyCode:VK.BACKSPACE,action:action(backspaceDelete$5,editor,false)},{keyCode:VK.DELETE,action:action(backspaceDelete$5,editor,true)},{keyCode:VK.BACKSPACE,action:action(backspaceDelete$6,editor,false)},{keyCode:VK.DELETE,action:action(backspaceDelete$6,editor,true)},{keyCode:VK.BACKSPACE,action:action(backspaceDelete$3,editor,caret,false)},{keyCode:VK.DELETE,action:action(backspaceDelete$3,editor,caret,true)},{keyCode:VK.BACKSPACE,action:action(backspaceDelete$9,editor,false)},{keyCode:VK.DELETE,action:action(backspaceDelete$9,editor,true)},{keyCode:VK.BACKSPACE,action:action(backspaceDelete$4,editor,false)},{keyCode:VK.DELETE,action:action(backspaceDelete$4,editor,true)},{keyCode:VK.BACKSPACE,action:action(backspaceDelete$1,editor,false)},{keyCode:VK.DELETE,action:action(backspaceDelete$1,editor,true)},{keyCode:VK.BACKSPACE,action:action(backspaceDelete$7,editor,false)},{keyCode:VK.DELETE,action:action(backspaceDelete$7,editor,true)},{keyCode:VK.BACKSPACE,action:action(backspaceDelete$8,editor,false)},{keyCode:VK.DELETE,action:action(backspaceDelete$8,editor,true)},{keyCode:VK.BACKSPACE,action:action(backspaceDelete$2,editor,false)},{keyCode:VK.DELETE,action:action(backspaceDelete$2,editor,true)}],evt).each(function(_){evt.preventDefault();});};var executeKeyupOverride=function(editor,evt){execute([{keyCode:VK.BACKSPACE,action:action(paddEmptyElement,editor)},{keyCode:VK.DELETE,action:action(paddEmptyElement,editor)}],evt);};var setup$a=function(editor,caret){editor.on('keydown',function(evt){if(evt.isDefaultPrevented()===false){executeKeydownOverride$2(editor,caret,evt);}});editor.on('keyup',function(evt){if(evt.isDefaultPrevented()===false){executeKeyupOverride(editor,evt);}});};var firstNonWhiteSpaceNodeSibling=function(node){while(node){if(node.nodeType===1||node.nodeType===3&&node.data&&/[\\r\\n\\s]/.test(node.data)){return node;}node=node.nextSibling;}};var moveToCaretPosition=function(editor,root){var node,lastNode=root;var dom=editor.dom;var moveCaretBeforeOnEnterElementsMap=editor.schema.getMoveCaretBeforeOnEnterElements();if(!root){return;}if(/^(LI|DT|DD)$/.test(root.nodeName)){var firstChild=firstNonWhiteSpaceNodeSibling(root.firstChild);if(firstChild&&/^(UL|OL|DL)$/.test(firstChild.nodeName)){root.insertBefore(dom.doc.createTextNode(nbsp),root.firstChild);}}var rng=dom.createRng();root.normalize();if(root.hasChildNodes()){var walker=new DomTreeWalker(root,root);while(node=walker.current()){if(isText$7(node)){rng.setStart(node,0);rng.setEnd(node,0);break;}if(moveCaretBeforeOnEnterElementsMap[node.nodeName.toLowerCase()]){rng.setStartBefore(node);rng.setEndBefore(node);break;}lastNode=node;node=walker.next();}if(!node){rng.setStart(lastNode,0);rng.setEnd(lastNode,0);}}else{if(isBr$5(root)){if(root.nextSibling&&dom.isBlock(root.nextSibling)){rng.setStartBefore(root);rng.setEndBefore(root);}else{rng.setStartAfter(root);rng.setEndAfter(root);}}else{rng.setStart(root,0);rng.setEnd(root,0);}}editor.selection.setRng(rng);scrollRangeIntoView(editor,rng);};var getEditableRoot$1=function(dom,node){var root=dom.getRoot();var parent,editableRoot;parent=node;while(parent!==root&&dom.getContentEditable(parent)!=='false'){if(dom.getContentEditable(parent)==='true'){editableRoot=parent;}parent=parent.parentNode;}return parent!==root?editableRoot:root;};var getParentBlock=function(editor){return Optional.from(editor.dom.getParent(editor.selection.getStart(true),editor.dom.isBlock));};var getParentBlockName=function(editor){return getParentBlock(editor).fold(constant(''),function(parentBlock){return parentBlock.nodeName.toUpperCase();});};var isListItemParentBlock=function(editor){return getParentBlock(editor).filter(function(elm){return isListItem(SugarElement.fromDom(elm));}).isSome();};var hasFirstChild=function(elm,name){return elm.firstChild&&elm.firstChild.nodeName===name;};var isFirstChild=function(elm){var _a;return((_a=elm.parentNode)===null||_a===void 0?void 0:_a.firstChild)===elm;};var hasParent=function(elm,parentName){return elm&&elm.parentNode&&elm.parentNode.nodeName===parentName;};var isListBlock=function(elm){return elm&&/^(OL|UL|LI)$/.test(elm.nodeName);};var isNestedList=function(elm){return isListBlock(elm)&&isListBlock(elm.parentNode);};var getContainerBlock=function(containerBlock){var containerBlockParent=containerBlock.parentNode;if(/^(LI|DT|DD)$/.test(containerBlockParent.nodeName)){return containerBlockParent;}return containerBlock;};var isFirstOrLastLi=function(containerBlock,parentBlock,first){var node=containerBlock[first?'firstChild':'lastChild'];while(node){if(isElement$5(node)){break;}node=node[first?'nextSibling':'previousSibling'];}return node===parentBlock;};var insert$3=function(editor,createNewBlock,containerBlock,parentBlock,newBlockName){var dom=editor.dom;var rng=editor.selection.getRng();if(containerBlock===editor.getBody()){return;}if(isNestedList(containerBlock)){newBlockName='LI';}var newBlock=newBlockName?createNewBlock(newBlockName):dom.create('BR');if(isFirstOrLastLi(containerBlock,parentBlock,true)&&isFirstOrLastLi(containerBlock,parentBlock,false)){if(hasParent(containerBlock,'LI')){var containerBlockParent=getContainerBlock(containerBlock);dom.insertAfter(newBlock,containerBlockParent);if(isFirstChild(containerBlock)){dom.remove(containerBlockParent);}else{dom.remove(containerBlock);}}else{dom.replace(newBlock,containerBlock);}}else if(isFirstOrLastLi(containerBlock,parentBlock,true)){if(hasParent(containerBlock,'LI')){dom.insertAfter(newBlock,getContainerBlock(containerBlock));newBlock.appendChild(dom.doc.createTextNode(' '));newBlock.appendChild(containerBlock);}else{containerBlock.parentNode.insertBefore(newBlock,containerBlock);}dom.remove(parentBlock);}else if(isFirstOrLastLi(containerBlock,parentBlock,false)){dom.insertAfter(newBlock,getContainerBlock(containerBlock));dom.remove(parentBlock);}else{containerBlock=getContainerBlock(containerBlock);var tmpRng=rng.cloneRange();tmpRng.setStartAfter(parentBlock);tmpRng.setEndAfter(containerBlock);var fragment=tmpRng.extractContents();if(newBlockName==='LI'&&hasFirstChild(fragment,'LI')){newBlock=fragment.firstChild;dom.insertAfter(fragment,containerBlock);}else{dom.insertAfter(fragment,containerBlock);dom.insertAfter(newBlock,containerBlock);}dom.remove(parentBlock);}moveToCaretPosition(editor,newBlock);};var trimZwsp=function(fragment){each$k(descendants$1(SugarElement.fromDom(fragment),isText$8),function(text){var rawNode=text.dom;rawNode.nodeValue=trim$2(rawNode.nodeValue);});};var isEmptyAnchor=function(dom,elm){return elm&&elm.nodeName==='A'&&dom.isEmpty(elm);};var isTableCell=function(node){return node&&/^(TD|TH|CAPTION)$/.test(node.nodeName);};var emptyBlock=function(elm){elm.innerHTML='<br data-mce-bogus=\"1\">';};var containerAndSiblingName=function(container,nodeName){return container.nodeName===nodeName||container.previousSibling&&container.previousSibling.nodeName===nodeName;};var canSplitBlock=function(dom,node){return node&&dom.isBlock(node)&&!/^(TD|TH|CAPTION|FORM)$/.test(node.nodeName)&&!/^(fixed|absolute)/i.test(node.style.position)&&dom.getContentEditable(node)!=='true';};var trimInlineElementsOnLeftSideOfBlock=function(dom,nonEmptyElementsMap,block){var node=block;var firstChilds=[];var i;if(!node){return;}while(node=node.firstChild){if(dom.isBlock(node)){return;}if(isElement$5(node)&&!nonEmptyElementsMap[node.nodeName.toLowerCase()]){firstChilds.push(node);}}i=firstChilds.length;while(i--){node=firstChilds[i];if(!node.hasChildNodes()||node.firstChild===node.lastChild&&node.firstChild.nodeValue===''){dom.remove(node);}else{if(isEmptyAnchor(dom,node)){dom.remove(node);}}}};var normalizeZwspOffset=function(start,container,offset){if(isText$7(container)===false){return offset;}else if(start){return offset===1&&container.data.charAt(offset-1)===ZWSP$1?0:offset;}else{return offset===container.data.length-1&&container.data.charAt(offset)===ZWSP$1?container.data.length:offset;}};var includeZwspInRange=function(rng){var newRng=rng.cloneRange();newRng.setStart(rng.startContainer,normalizeZwspOffset(true,rng.startContainer,rng.startOffset));newRng.setEnd(rng.endContainer,normalizeZwspOffset(false,rng.endContainer,rng.endOffset));return newRng;};var trimLeadingLineBreaks=function(node){do{if(isText$7(node)){node.nodeValue=node.nodeValue.replace(/^[\\r\\n]+/,'');}node=node.firstChild;}while(node);};var getEditableRoot=function(dom,node){var root=dom.getRoot();var parent,editableRoot;parent=node;while(parent!==root&&dom.getContentEditable(parent)!=='false'){if(dom.getContentEditable(parent)==='true'){editableRoot=parent;}parent=parent.parentNode;}return parent!==root?editableRoot:root;};var applyAttributes=function(editor,node,forcedRootBlockAttrs){var dom=editor.dom;Optional.from(forcedRootBlockAttrs.style).map(dom.parseStyle).each(function(attrStyles){var currentStyles=getAllRaw(SugarElement.fromDom(node));var newStyles=__assign(__assign({},currentStyles),attrStyles);dom.setStyles(node,newStyles);});var attrClassesOpt=Optional.from(forcedRootBlockAttrs.class).map(function(attrClasses){return attrClasses.split(/\\s+/);});var currentClassesOpt=Optional.from(node.className).map(function(currentClasses){return filter$4(currentClasses.split(/\\s+/),function(clazz){return clazz!=='';});});lift2(attrClassesOpt,currentClassesOpt,function(attrClasses,currentClasses){var filteredClasses=filter$4(currentClasses,function(clazz){return!contains$3(attrClasses,clazz);});var newClasses=__spreadArray(__spreadArray([],attrClasses,true),filteredClasses,true);dom.setAttrib(node,'class',newClasses.join(' '));});var appliedAttrs=['style','class'];var remainingAttrs=filter$3(forcedRootBlockAttrs,function(_,attrs){return!contains$3(appliedAttrs,attrs);});dom.setAttribs(node,remainingAttrs);};var setForcedBlockAttrs=function(editor,node){var forcedRootBlockName=getForcedRootBlock(editor);if(forcedRootBlockName&&forcedRootBlockName.toLowerCase()===node.tagName.toLowerCase()){var forcedRootBlockAttrs=getForcedRootBlockAttrs(editor);applyAttributes(editor,node,forcedRootBlockAttrs);}};var wrapSelfAndSiblingsInDefaultBlock=function(editor,newBlockName,rng,container,offset){var newBlock,parentBlock,startNode,node,next,rootBlockName;var blockName=newBlockName||'P';var dom=editor.dom,editableRoot=getEditableRoot(dom,container);parentBlock=dom.getParent(container,dom.isBlock);if(!parentBlock||!canSplitBlock(dom,parentBlock)){parentBlock=parentBlock||editableRoot;if(parentBlock===editor.getBody()||isTableCell(parentBlock)){rootBlockName=parentBlock.nodeName.toLowerCase();}else{rootBlockName=parentBlock.parentNode.nodeName.toLowerCase();}if(!parentBlock.hasChildNodes()){newBlock=dom.create(blockName);setForcedBlockAttrs(editor,newBlock);parentBlock.appendChild(newBlock);rng.setStart(newBlock,0);rng.setEnd(newBlock,0);return newBlock;}node=container;while(node.parentNode!==parentBlock){node=node.parentNode;}while(node&&!dom.isBlock(node)){startNode=node;node=node.previousSibling;}if(startNode&&editor.schema.isValidChild(rootBlockName,blockName.toLowerCase())){newBlock=dom.create(blockName);setForcedBlockAttrs(editor,newBlock);startNode.parentNode.insertBefore(newBlock,startNode);node=startNode;while(node&&!dom.isBlock(node)){next=node.nextSibling;newBlock.appendChild(node);node=next;}rng.setStart(container,offset);rng.setEnd(container,offset);}}return container;};var addBrToBlockIfNeeded=function(dom,block){block.normalize();var lastChild=block.lastChild;if(!lastChild||/^(left|right)$/gi.test(dom.getStyle(lastChild,'float',true))){dom.add(block,'br');}};var insert$2=function(editor,evt){var tmpRng,container,offset,parentBlock;var newBlock,fragment,containerBlock,parentBlockName,newBlockName,isAfterLastNodeInContainer;var dom=editor.dom;var schema=editor.schema,nonEmptyElementsMap=schema.getNonEmptyElements();var rng=editor.selection.getRng();var createNewBlock=function(name){var node=container,block,clonedNode,caretNode;var textInlineElements=schema.getTextInlineElements();if(name||parentBlockName==='TABLE'||parentBlockName==='HR'){block=dom.create(name||newBlockName);}else{block=parentBlock.cloneNode(false);}caretNode=block;if(shouldKeepStyles(editor)===false){dom.setAttrib(block,'style',null);dom.setAttrib(block,'class',null);}else{do{if(textInlineElements[node.nodeName]){if(isCaretNode(node)||isBookmarkNode$1(node)){continue;}clonedNode=node.cloneNode(false);dom.setAttrib(clonedNode,'id','');if(block.hasChildNodes()){clonedNode.appendChild(block.firstChild);block.appendChild(clonedNode);}else{caretNode=clonedNode;block.appendChild(clonedNode);}}}while((node=node.parentNode)&&node!==editableRoot);}setForcedBlockAttrs(editor,block);emptyBlock(caretNode);return block;};var isCaretAtStartOrEndOfBlock=function(start){var node,name;var normalizedOffset=normalizeZwspOffset(start,container,offset);if(isText$7(container)&&(start?normalizedOffset>0:normalizedOffset<container.nodeValue.length)){return false;}if(container.parentNode===parentBlock&&isAfterLastNodeInContainer&&!start){return true;}if(start&&isElement$5(container)&&container===parentBlock.firstChild){return true;}if(containerAndSiblingName(container,'TABLE')||containerAndSiblingName(container,'HR')){return isAfterLastNodeInContainer&&!start||!isAfterLastNodeInContainer&&start;}var walker=new DomTreeWalker(container,parentBlock);if(isText$7(container)){if(start&&normalizedOffset===0){walker.prev();}else if(!start&&normalizedOffset===container.nodeValue.length){walker.next();}}while(node=walker.current()){if(isElement$5(node)){if(!node.getAttribute('data-mce-bogus')){name=node.nodeName.toLowerCase();if(nonEmptyElementsMap[name]&&name!=='br'){return false;}}}else if(isText$7(node)&&!isWhitespaceText(node.nodeValue)){return false;}if(start){walker.prev();}else{walker.next();}}return true;};var insertNewBlockAfter=function(){if(/^(H[1-6]|PRE|FIGURE)$/.test(parentBlockName)&&containerBlockName!=='HGROUP'){newBlock=createNewBlock(newBlockName);}else{newBlock=createNewBlock();}if(shouldEndContainerOnEmptyBlock(editor)&&canSplitBlock(dom,containerBlock)&&dom.isEmpty(parentBlock)){newBlock=dom.split(containerBlock,parentBlock);}else{dom.insertAfter(newBlock,parentBlock);}moveToCaretPosition(editor,newBlock);};normalize$2(dom,rng).each(function(normRng){rng.setStart(normRng.startContainer,normRng.startOffset);rng.setEnd(normRng.endContainer,normRng.endOffset);});container=rng.startContainer;offset=rng.startOffset;newBlockName=getForcedRootBlock(editor);var shiftKey=!!(evt&&evt.shiftKey);var ctrlKey=!!(evt&&evt.ctrlKey);if(isElement$5(container)&&container.hasChildNodes()){isAfterLastNodeInContainer=offset>container.childNodes.length-1;container=container.childNodes[Math.min(offset,container.childNodes.length-1)]||container;if(isAfterLastNodeInContainer&&isText$7(container)){offset=container.nodeValue.length;}else{offset=0;}}var editableRoot=getEditableRoot(dom,container);if(!editableRoot){return;}if(newBlockName&&!shiftKey||!newBlockName&&shiftKey){container=wrapSelfAndSiblingsInDefaultBlock(editor,newBlockName,rng,container,offset);}parentBlock=dom.getParent(container,dom.isBlock);containerBlock=parentBlock?dom.getParent(parentBlock.parentNode,dom.isBlock):null;parentBlockName=parentBlock?parentBlock.nodeName.toUpperCase():'';var containerBlockName=containerBlock?containerBlock.nodeName.toUpperCase():'';if(containerBlockName==='LI'&&!ctrlKey){parentBlock=containerBlock;containerBlock=containerBlock.parentNode;parentBlockName=containerBlockName;}if(/^(LI|DT|DD)$/.test(parentBlockName)){if(dom.isEmpty(parentBlock)){insert$3(editor,createNewBlock,containerBlock,parentBlock,newBlockName);return;}}if(newBlockName&&parentBlock===editor.getBody()){return;}newBlockName=newBlockName||'P';if(isCaretContainerBlock$1(parentBlock)){newBlock=showCaretContainerBlock(parentBlock);if(dom.isEmpty(parentBlock)){emptyBlock(parentBlock);}setForcedBlockAttrs(editor,newBlock);moveToCaretPosition(editor,newBlock);}else if(isCaretAtStartOrEndOfBlock()){insertNewBlockAfter();}else if(isCaretAtStartOrEndOfBlock(true)){newBlock=parentBlock.parentNode.insertBefore(createNewBlock(),parentBlock);moveToCaretPosition(editor,containerAndSiblingName(parentBlock,'HR')?newBlock:parentBlock);}else{tmpRng=includeZwspInRange(rng).cloneRange();tmpRng.setEndAfter(parentBlock);fragment=tmpRng.extractContents();trimZwsp(fragment);trimLeadingLineBreaks(fragment);newBlock=fragment.firstChild;dom.insertAfter(fragment,parentBlock);trimInlineElementsOnLeftSideOfBlock(dom,nonEmptyElementsMap,newBlock);addBrToBlockIfNeeded(dom,parentBlock);if(dom.isEmpty(parentBlock)){emptyBlock(parentBlock);}newBlock.normalize();if(dom.isEmpty(newBlock)){dom.remove(newBlock);insertNewBlockAfter();}else{setForcedBlockAttrs(editor,newBlock);moveToCaretPosition(editor,newBlock);}}dom.setAttrib(newBlock,'id','');editor.fire('NewBlock',{newBlock:newBlock});};var hasRightSideContent=function(schema,container,parentBlock){var walker=new DomTreeWalker(container,parentBlock);var node;var nonEmptyElementsMap=schema.getNonEmptyElements();while(node=walker.next()){if(nonEmptyElementsMap[node.nodeName.toLowerCase()]||node.length>0){return true;}}};var moveSelectionToBr=function(editor,brElm,extraBr){var rng=editor.dom.createRng();if(!extraBr){rng.setStartAfter(brElm);rng.setEndAfter(brElm);}else{rng.setStartBefore(brElm);rng.setEndBefore(brElm);}editor.selection.setRng(rng);scrollRangeIntoView(editor,rng);};var insertBrAtCaret=function(editor,evt){var selection=editor.selection;var dom=editor.dom;var rng=selection.getRng();var brElm;var extraBr;normalize$2(dom,rng).each(function(normRng){rng.setStart(normRng.startContainer,normRng.startOffset);rng.setEnd(normRng.endContainer,normRng.endOffset);});var offset=rng.startOffset;var container=rng.startContainer;if(container.nodeType===1&&container.hasChildNodes()){var isAfterLastNodeInContainer=offset>container.childNodes.length-1;container=container.childNodes[Math.min(offset,container.childNodes.length-1)]||container;if(isAfterLastNodeInContainer&&container.nodeType===3){offset=container.nodeValue.length;}else{offset=0;}}var parentBlock=dom.getParent(container,dom.isBlock);var containerBlock=parentBlock?dom.getParent(parentBlock.parentNode,dom.isBlock):null;var containerBlockName=containerBlock?containerBlock.nodeName.toUpperCase():'';var isControlKey=!!(evt&&evt.ctrlKey);if(containerBlockName==='LI'&&!isControlKey){parentBlock=containerBlock;}if(container&&container.nodeType===3&&offset>=container.nodeValue.length){if(!hasRightSideContent(editor.schema,container,parentBlock)){brElm=dom.create('br');rng.insertNode(brElm);rng.setStartAfter(brElm);rng.setEndAfter(brElm);extraBr=true;}}brElm=dom.create('br');rangeInsertNode(dom,rng,brElm);moveSelectionToBr(editor,brElm,extraBr);editor.undoManager.add();};var insertBrBefore=function(editor,inline){var br=SugarElement.fromTag('br');before$4(SugarElement.fromDom(inline),br);editor.undoManager.add();};var insertBrAfter=function(editor,inline){if(!hasBrAfter(editor.getBody(),inline)){after$3(SugarElement.fromDom(inline),SugarElement.fromTag('br'));}var br=SugarElement.fromTag('br');after$3(SugarElement.fromDom(inline),br);moveSelectionToBr(editor,br.dom,false);editor.undoManager.add();};var isBeforeBr=function(pos){return isBr$5(pos.getNode());};var hasBrAfter=function(rootNode,startNode){if(isBeforeBr(CaretPosition.after(startNode))){return true;}else{return nextPosition(rootNode,CaretPosition.after(startNode)).map(function(pos){return isBr$5(pos.getNode());}).getOr(false);}};var isAnchorLink=function(elm){return elm&&elm.nodeName==='A'&&'href'in elm;};var isInsideAnchor=function(location){return location.fold(never,isAnchorLink,isAnchorLink,never);};var readInlineAnchorLocation=function(editor){var isInlineTarget$1=curry(isInlineTarget,editor);var position=CaretPosition.fromRangeStart(editor.selection.getRng());return readLocation(isInlineTarget$1,editor.getBody(),position).filter(isInsideAnchor);};var insertBrOutsideAnchor=function(editor,location){location.fold(noop,curry(insertBrBefore,editor),curry(insertBrAfter,editor),noop);};var insert$1=function(editor,evt){var anchorLocation=readInlineAnchorLocation(editor);if(anchorLocation.isSome()){anchorLocation.each(curry(insertBrOutsideAnchor,editor));}else{insertBrAtCaret(editor,evt);}};var matchesSelector=function(editor,selector){return getParentBlock(editor).filter(function(parentBlock){return selector.length>0&&is$2(SugarElement.fromDom(parentBlock),selector);}).isSome();};var shouldInsertBr=function(editor){return matchesSelector(editor,getBrNewLineSelector(editor));};var shouldBlockNewLine$1=function(editor){return matchesSelector(editor,getNoNewLineSelector(editor));};var newLineAction=Adt.generate([{br:[]},{block:[]},{none:[]}]);var shouldBlockNewLine=function(editor,_shiftKey){return shouldBlockNewLine$1(editor);};var isBrMode=function(requiredState){return function(editor,_shiftKey){var brMode=getForcedRootBlock(editor)==='';return brMode===requiredState;};};var inListBlock=function(requiredState){return function(editor,_shiftKey){return isListItemParentBlock(editor)===requiredState;};};var inBlock=function(blockName,requiredState){return function(editor,_shiftKey){var state=getParentBlockName(editor)===blockName.toUpperCase();return state===requiredState;};};var inPreBlock=function(requiredState){return inBlock('pre',requiredState);};var inSummaryBlock=function(){return inBlock('summary',true);};var shouldPutBrInPre=function(requiredState){return function(editor,_shiftKey){return shouldPutBrInPre$1(editor)===requiredState;};};var inBrContext=function(editor,_shiftKey){return shouldInsertBr(editor);};var hasShiftKey=function(_editor,shiftKey){return shiftKey;};var canInsertIntoEditableRoot=function(editor){var forcedRootBlock=getForcedRootBlock(editor);var rootEditable=getEditableRoot$1(editor.dom,editor.selection.getStart());return rootEditable&&editor.schema.isValidChild(rootEditable.nodeName,forcedRootBlock?forcedRootBlock:'P');};var match=function(predicates,action){return function(editor,shiftKey){var isMatch=foldl(predicates,function(res,p){return res&&p(editor,shiftKey);},true);return isMatch?Optional.some(action):Optional.none();};};var getAction=function(editor,evt){return evaluateUntil([match([shouldBlockNewLine],newLineAction.none()),match([inSummaryBlock()],newLineAction.br()),match([inPreBlock(true),shouldPutBrInPre(false),hasShiftKey],newLineAction.br()),match([inPreBlock(true),shouldPutBrInPre(false)],newLineAction.block()),match([inPreBlock(true),shouldPutBrInPre(true),hasShiftKey],newLineAction.block()),match([inPreBlock(true),shouldPutBrInPre(true)],newLineAction.br()),match([inListBlock(true),hasShiftKey],newLineAction.br()),match([inListBlock(true)],newLineAction.block()),match([isBrMode(true),hasShiftKey,canInsertIntoEditableRoot],newLineAction.block()),match([isBrMode(true)],newLineAction.br()),match([inBrContext],newLineAction.br()),match([isBrMode(false),hasShiftKey],newLineAction.br()),match([canInsertIntoEditableRoot],newLineAction.block())],[editor,!!(evt&&evt.shiftKey)]).getOr(newLineAction.none());};var insert=function(editor,evt){getAction(editor,evt).fold(function(){insert$1(editor,evt);},function(){insert$2(editor,evt);},noop);};var handleEnterKeyEvent=function(editor,event){if(event.isDefaultPrevented()){return;}event.preventDefault();endTypingLevelIgnoreLocks(editor.undoManager);editor.undoManager.transact(function(){if(editor.selection.isCollapsed()===false){editor.execCommand('Delete');}insert(editor,event);});};var setup$9=function(editor){editor.on('keydown',function(event){if(event.keyCode===VK.ENTER){handleEnterKeyEvent(editor,event);}});};var executeKeydownOverride$1=function(editor,caret,evt){execute([{keyCode:VK.END,action:action(moveToLineEndPoint$1,editor,true)},{keyCode:VK.HOME,action:action(moveToLineEndPoint$1,editor,false)},{keyCode:VK.END,action:action(moveToLineEndPoint,editor,true)},{keyCode:VK.HOME,action:action(moveToLineEndPoint,editor,false)},{keyCode:VK.END,action:action(moveToLineEndPoint$2,editor,true,caret)},{keyCode:VK.HOME,action:action(moveToLineEndPoint$2,editor,false,caret)}],evt).each(function(_){evt.preventDefault();});};var setup$8=function(editor,caret){editor.on('keydown',function(evt){if(evt.isDefaultPrevented()===false){executeKeydownOverride$1(editor,caret,evt);}});};var browser=detect().browser;var setupIeInput=function(editor){var keypressThrotter=first(function(){if(!editor.composing){normalizeNbspsInEditor(editor);}},0);if(browser.isIE()){editor.on('keypress',function(_e){keypressThrotter.throttle();});editor.on('remove',function(_e){keypressThrotter.cancel();});}};var setup$7=function(editor){setupIeInput(editor);editor.on('input',function(e){if(e.isComposing===false){normalizeNbspsInEditor(editor);}});};var platform=detect();var executeKeyupAction=function(editor,caret,evt){execute([{keyCode:VK.PAGE_UP,action:action(moveToLineEndPoint$2,editor,false,caret)},{keyCode:VK.PAGE_DOWN,action:action(moveToLineEndPoint$2,editor,true,caret)}],evt);};var stopImmediatePropagation=function(e){return e.stopImmediatePropagation();};var isPageUpDown=function(evt){return evt.keyCode===VK.PAGE_UP||evt.keyCode===VK.PAGE_DOWN;};var setNodeChangeBlocker=function(blocked,editor,block){if(block&&!blocked.get()){editor.on('NodeChange',stopImmediatePropagation,true);}else if(!block&&blocked.get()){editor.off('NodeChange',stopImmediatePropagation);}blocked.set(block);};var setup$6=function(editor,caret){if(platform.os.isOSX()){return;}var blocked=Cell(false);editor.on('keydown',function(evt){if(isPageUpDown(evt)){setNodeChangeBlocker(blocked,editor,true);}});editor.on('keyup',function(evt){if(evt.isDefaultPrevented()===false){executeKeyupAction(editor,caret,evt);}if(isPageUpDown(evt)&&blocked.get()){setNodeChangeBlocker(blocked,editor,false);editor.nodeChanged();}});};var insertTextAtPosition=function(text,pos){var container=pos.container();var offset=pos.offset();if(isText$7(container)){container.insertData(offset,text);return Optional.some(CaretPosition(container,offset+text.length));}else{return getElementFromPosition(pos).map(function(elm){var textNode=SugarElement.fromText(text);if(pos.isAtEnd()){after$3(elm,textNode);}else{before$4(elm,textNode);}return CaretPosition(textNode.dom,text.length);});}};var insertNbspAtPosition=curry(insertTextAtPosition,nbsp);var insertSpaceAtPosition=curry(insertTextAtPosition,' ');var locationToCaretPosition=function(root){return function(location){return location.fold(function(element){return prevPosition(root.dom,CaretPosition.before(element));},function(element){return firstPositionIn(element);},function(element){return lastPositionIn(element);},function(element){return nextPosition(root.dom,CaretPosition.after(element));});};};var insertInlineBoundarySpaceOrNbsp=function(root,pos){return function(checkPos){return needsToHaveNbsp(root,checkPos)?insertNbspAtPosition(pos):insertSpaceAtPosition(pos);};};var setSelection=function(editor){return function(pos){editor.selection.setRng(pos.toRange());editor.nodeChanged();return true;};};var insertSpaceOrNbspAtSelection=function(editor){var pos=CaretPosition.fromRangeStart(editor.selection.getRng());var root=SugarElement.fromDom(editor.getBody());if(editor.selection.isCollapsed()){var isInlineTarget$1=curry(isInlineTarget,editor);var caretPosition=CaretPosition.fromRangeStart(editor.selection.getRng());return readLocation(isInlineTarget$1,editor.getBody(),caretPosition).bind(locationToCaretPosition(root)).bind(insertInlineBoundarySpaceOrNbsp(root,pos)).exists(setSelection(editor));}else{return false;}};var executeKeydownOverride=function(editor,evt){execute([{keyCode:VK.SPACEBAR,action:action(insertSpaceOrNbspAtSelection,editor)}],evt).each(function(_){evt.preventDefault();});};var setup$5=function(editor){editor.on('keydown',function(evt){if(evt.isDefaultPrevented()===false){executeKeydownOverride(editor,evt);}});};var registerKeyboardOverrides=function(editor){var caret=setupSelectedState(editor);setup$c(editor);setup$b(editor,caret);setup$a(editor,caret);setup$9(editor);setup$5(editor);setup$7(editor);setup$8(editor,caret);setup$6(editor,caret);return caret;};var setup$4=function(editor){if(!isRtc(editor)){return registerKeyboardOverrides(editor);}else{return Cell(null);}};var NodeChange=function(){function NodeChange(editor){this.lastPath=[];this.editor=editor;var lastRng;var self=this;if(!('onselectionchange'in editor.getDoc())){editor.on('NodeChange click mouseup keyup focus',function(e){var nativeRng=editor.selection.getRng();var fakeRng={startContainer:nativeRng.startContainer,startOffset:nativeRng.startOffset,endContainer:nativeRng.endContainer,endOffset:nativeRng.endOffset};if(e.type==='nodechange'||!isEq$4(fakeRng,lastRng)){editor.fire('SelectionChange');}lastRng=fakeRng;});}editor.on('contextmenu',function(){editor.fire('SelectionChange');});editor.on('SelectionChange',function(){var startElm=editor.selection.getStart(true);if(!startElm||!Env.range&&editor.selection.isCollapsed()){return;}if(hasAnyRanges(editor)&&!self.isSameElementPath(startElm)&&editor.dom.isChildOf(startElm,editor.getBody())){editor.nodeChanged({selectionChange:true});}});editor.on('mouseup',function(e){if(!e.isDefaultPrevented()&&hasAnyRanges(editor)){if(editor.selection.getNode().nodeName==='IMG'){Delay.setEditorTimeout(editor,function(){editor.nodeChanged();});}else{editor.nodeChanged();}}});}NodeChange.prototype.nodeChanged=function(args){var selection=this.editor.selection;var node,parents,root;if(this.editor.initialized&&selection&&!shouldDisableNodeChange(this.editor)&&!this.editor.mode.isReadOnly()){root=this.editor.getBody();node=selection.getStart(true)||root;if(node.ownerDocument!==this.editor.getDoc()||!this.editor.dom.isChildOf(node,root)){node=root;}parents=[];this.editor.dom.getParent(node,function(node){if(node===root){return true;}parents.push(node);});args=args||{};args.element=node;args.parents=parents;this.editor.fire('NodeChange',args);}};NodeChange.prototype.isSameElementPath=function(startElm){var i;var currentPath=this.editor.$(startElm).parentsUntil(this.editor.getBody()).add(startElm);if(currentPath.length===this.lastPath.length){for(i=currentPath.length;i>=0;i--){if(currentPath[i]!==this.lastPath[i]){break;}}if(i===-1){this.lastPath=currentPath;return true;}}this.lastPath=currentPath;return false;};return NodeChange;}();var preventSummaryToggle=function(editor){editor.on('click',function(e){if(editor.dom.getParent(e.target,'details')){e.preventDefault();}});};var filterDetails=function(editor){editor.parser.addNodeFilter('details',function(elms){each$k(elms,function(details){details.attr('data-mce-open',details.attr('open'));details.attr('open','open');});});editor.serializer.addNodeFilter('details',function(elms){each$k(elms,function(details){var open=details.attr('data-mce-open');details.attr('open',isString$1(open)?open:null);details.attr('data-mce-open',null);});});};var setup$3=function(editor){preventSummaryToggle(editor);filterDetails(editor);};var isTextBlockNode=function(node){return isElement$5(node)&&isTextBlock$2(SugarElement.fromDom(node));};var normalizeSelection=function(editor){var rng=editor.selection.getRng();var startPos=CaretPosition.fromRangeStart(rng);var endPos=CaretPosition.fromRangeEnd(rng);if(CaretPosition.isElementPosition(startPos)){var container=startPos.container();if(isTextBlockNode(container)){firstPositionIn(container).each(function(pos){return rng.setStart(pos.container(),pos.offset());});}}if(CaretPosition.isElementPosition(endPos)){var container=startPos.container();if(isTextBlockNode(container)){lastPositionIn(container).each(function(pos){return rng.setEnd(pos.container(),pos.offset());});}}editor.selection.setRng(normalize(rng));};var setup$2=function(editor){editor.on('click',function(e){if(e.detail>=3){normalizeSelection(editor);}});};var getAbsolutePosition=function(elm){var clientRect=elm.getBoundingClientRect();var doc=elm.ownerDocument;var docElem=doc.documentElement;var win=doc.defaultView;return{top:clientRect.top+win.pageYOffset-docElem.clientTop,left:clientRect.left+win.pageXOffset-docElem.clientLeft};};var getBodyPosition=function(editor){return editor.inline?getAbsolutePosition(editor.getBody()):{left:0,top:0};};var getScrollPosition=function(editor){var body=editor.getBody();return editor.inline?{left:body.scrollLeft,top:body.scrollTop}:{left:0,top:0};};var getBodyScroll=function(editor){var body=editor.getBody(),docElm=editor.getDoc().documentElement;var inlineScroll={left:body.scrollLeft,top:body.scrollTop};var iframeScroll={left:body.scrollLeft||docElm.scrollLeft,top:body.scrollTop||docElm.scrollTop};return editor.inline?inlineScroll:iframeScroll;};var getMousePosition=function(editor,event){if(event.target.ownerDocument!==editor.getDoc()){var iframePosition=getAbsolutePosition(editor.getContentAreaContainer());var scrollPosition=getBodyScroll(editor);return{left:event.pageX-iframePosition.left+scrollPosition.left,top:event.pageY-iframePosition.top+scrollPosition.top};}return{left:event.pageX,top:event.pageY};};var calculatePosition=function(bodyPosition,scrollPosition,mousePosition){return{pageX:mousePosition.left-bodyPosition.left+scrollPosition.left,pageY:mousePosition.top-bodyPosition.top+scrollPosition.top};};var calc=function(editor,event){return calculatePosition(getBodyPosition(editor),getScrollPosition(editor),getMousePosition(editor,event));};var isContentEditableFalse$1=isContentEditableFalse$b,isContentEditableTrue$1=isContentEditableTrue$4;var isDraggable=function(rootElm,elm){return isContentEditableFalse$1(elm)&&elm!==rootElm;};var isValidDropTarget=function(editor,targetElement,dragElement){if(targetElement===dragElement||editor.dom.isChildOf(targetElement,dragElement)){return false;}return!isContentEditableFalse$1(targetElement);};var cloneElement=function(elm){var cloneElm=elm.cloneNode(true);cloneElm.removeAttribute('data-mce-selected');return cloneElm;};var createGhost=function(editor,elm,width,height){var dom=editor.dom;var clonedElm=elm.cloneNode(true);dom.setStyles(clonedElm,{width:width,height:height});dom.setAttrib(clonedElm,'data-mce-selected',null);var ghostElm=dom.create('div',{'class':'mce-drag-container','data-mce-bogus':'all','unselectable':'on','contenteditable':'false'});dom.setStyles(ghostElm,{position:'absolute',opacity:0.5,overflow:'hidden',border:0,padding:0,margin:0,width:width,height:height});dom.setStyles(clonedElm,{margin:0,boxSizing:'border-box'});ghostElm.appendChild(clonedElm);return ghostElm;};var appendGhostToBody=function(ghostElm,bodyElm){if(ghostElm.parentNode!==bodyElm){bodyElm.appendChild(ghostElm);}};var moveGhost=function(ghostElm,position,width,height,maxX,maxY){var overflowX=0,overflowY=0;ghostElm.style.left=position.pageX+'px';ghostElm.style.top=position.pageY+'px';if(position.pageX+width>maxX){overflowX=position.pageX+width-maxX;}if(position.pageY+height>maxY){overflowY=position.pageY+height-maxY;}ghostElm.style.width=width-overflowX+'px';ghostElm.style.height=height-overflowY+'px';};var removeElement=function(elm){if(elm&&elm.parentNode){elm.parentNode.removeChild(elm);}};var isLeftMouseButtonPressed=function(e){return e.button===0;};var applyRelPos=function(state,position){return{pageX:position.pageX-state.relX,pageY:position.pageY+5};};var start=function(state,editor){return function(e){if(isLeftMouseButtonPressed(e)){var ceElm=find$3(editor.dom.getParents(e.target),or(isContentEditableFalse$1,isContentEditableTrue$1)).getOr(null);if(isDraggable(editor.getBody(),ceElm)){var elmPos=editor.dom.getPos(ceElm);var bodyElm=editor.getBody();var docElm=editor.getDoc().documentElement;state.set({element:ceElm,dragging:false,screenX:e.screenX,screenY:e.screenY,maxX:(editor.inline?bodyElm.scrollWidth:docElm.offsetWidth)-2,maxY:(editor.inline?bodyElm.scrollHeight:docElm.offsetHeight)-2,relX:e.pageX-elmPos.x,relY:e.pageY-elmPos.y,width:ceElm.offsetWidth,height:ceElm.offsetHeight,ghost:createGhost(editor,ceElm,ceElm.offsetWidth,ceElm.offsetHeight)});}}};};var move=function(state,editor){var throttledPlaceCaretAt=Delay.throttle(function(clientX,clientY){editor._selectionOverrides.hideFakeCaret();editor.selection.placeCaretAt(clientX,clientY);},0);editor.on('remove',throttledPlaceCaretAt.stop);return function(e){return state.on(function(state){var movement=Math.max(Math.abs(e.screenX-state.screenX),Math.abs(e.screenY-state.screenY));if(!state.dragging&&movement>10){var args=editor.fire('dragstart',{target:state.element});if(args.isDefaultPrevented()){return;}state.dragging=true;editor.focus();}if(state.dragging){var targetPos=applyRelPos(state,calc(editor,e));appendGhostToBody(state.ghost,editor.getBody());moveGhost(state.ghost,targetPos,state.width,state.height,state.maxX,state.maxY);throttledPlaceCaretAt(e.clientX,e.clientY);}});};};var getRawTarget=function(selection){var rng=selection.getSel().getRangeAt(0);var startContainer=rng.startContainer;return startContainer.nodeType===3?startContainer.parentNode:startContainer;};var drop=function(state,editor){return function(e){state.on(function(state){if(state.dragging){if(isValidDropTarget(editor,getRawTarget(editor.selection),state.element)){var targetClone_1=cloneElement(state.element);var args=editor.fire('drop',{clientX:e.clientX,clientY:e.clientY});if(!args.isDefaultPrevented()){editor.undoManager.transact(function(){removeElement(state.element);editor.insertContent(editor.dom.getOuterHTML(targetClone_1));editor._selectionOverrides.hideFakeCaret();});}}editor.fire('dragend');}});removeDragState(state);};};var stop=function(state,editor){return function(){state.on(function(state){if(state.dragging){editor.fire('dragend');}});removeDragState(state);};};var removeDragState=function(state){state.on(function(state){removeElement(state.ghost);});state.clear();};var bindFakeDragEvents=function(editor){var state=value();var pageDom=DOMUtils.DOM;var rootDocument=document;var dragStartHandler=start(state,editor);var dragHandler=move(state,editor);var dropHandler=drop(state,editor);var dragEndHandler=stop(state,editor);editor.on('mousedown',dragStartHandler);editor.on('mousemove',dragHandler);editor.on('mouseup',dropHandler);pageDom.bind(rootDocument,'mousemove',dragHandler);pageDom.bind(rootDocument,'mouseup',dragEndHandler);editor.on('remove',function(){pageDom.unbind(rootDocument,'mousemove',dragHandler);pageDom.unbind(rootDocument,'mouseup',dragEndHandler);});editor.on('keydown',function(e){if(e.keyCode===VK.ESC){dragEndHandler();}});};var blockIeDrop=function(editor){editor.on('drop',function(e){var realTarget=typeof e.clientX!=='undefined'?editor.getDoc().elementFromPoint(e.clientX,e.clientY):null;if(isContentEditableFalse$1(realTarget)||editor.dom.getContentEditableParent(realTarget)==='false'){e.preventDefault();}});};var blockUnsupportedFileDrop=function(editor){var preventFileDrop=function(e){if(!e.isDefaultPrevented()){var dataTransfer=e.dataTransfer;if(dataTransfer&&(contains$3(dataTransfer.types,'Files')||dataTransfer.files.length>0)){e.preventDefault();if(e.type==='drop'){displayError(editor,'Dropped file type is not supported');}}}};var preventFileDropIfUIElement=function(e){if(isUIElement(editor,e.target)){preventFileDrop(e);}};var setup=function(){var pageDom=DOMUtils.DOM;var dom=editor.dom;var doc=document;var editorRoot=editor.inline?editor.getBody():editor.getDoc();var eventNames=['drop','dragover'];each$k(eventNames,function(name){pageDom.bind(doc,name,preventFileDropIfUIElement);dom.bind(editorRoot,name,preventFileDrop);});editor.on('remove',function(){each$k(eventNames,function(name){pageDom.unbind(doc,name,preventFileDropIfUIElement);dom.unbind(editorRoot,name,preventFileDrop);});});};editor.on('init',function(){Delay.setEditorTimeout(editor,setup,0);});};var init$2=function(editor){bindFakeDragEvents(editor);blockIeDrop(editor);if(shouldBlockUnsupportedDrop(editor)){blockUnsupportedFileDrop(editor);}};var setup$1=function(editor){var renderFocusCaret=first(function(){if(!editor.removed&&editor.getBody().contains(document.activeElement)){var rng=editor.selection.getRng();if(rng.collapsed){var caretRange=renderRangeCaret(editor,rng,false);editor.selection.setRng(caretRange);}}},0);editor.on('focus',function(){renderFocusCaret.throttle();});editor.on('blur',function(){renderFocusCaret.cancel();});};var setup=function(editor){editor.on('init',function(){editor.on('focusin',function(e){var target=e.target;if(isMedia$2(target)){var ceRoot=getContentEditableRoot$1(editor.getBody(),target);var node=isContentEditableFalse$b(ceRoot)?ceRoot:target;if(editor.selection.getNode()!==node){selectNode(editor,node).each(function(rng){return editor.selection.setRng(rng);});}}});});};var isContentEditableTrue=isContentEditableTrue$4;var isContentEditableFalse=isContentEditableFalse$b;var getContentEditableRoot=function(editor,node){return getContentEditableRoot$1(editor.getBody(),node);};var SelectionOverrides=function(editor){var selection=editor.selection,dom=editor.dom;var isBlock=dom.isBlock;var rootNode=editor.getBody();var fakeCaret=FakeCaret(editor,rootNode,isBlock,function(){return hasFocus(editor);});var realSelectionId='sel-'+dom.uniqueId();var elementSelectionAttr='data-mce-selected';var selectedElement;var isFakeSelectionElement=function(node){return dom.hasClass(node,'mce-offscreen-selection');};var isFakeSelectionTargetElement=function(node){return node!==rootNode&&(isContentEditableFalse(node)||isMedia$2(node))&&dom.isChildOf(node,rootNode);};var isNearFakeSelectionElement=function(pos){return isBeforeContentEditableFalse(pos)||isAfterContentEditableFalse(pos)||isBeforeMedia(pos)||isAfterMedia(pos);};var getRealSelectionElement=function(){var container=dom.get(realSelectionId);return container?container.getElementsByTagName('*')[0]:container;};var setRange=function(range){if(range){selection.setRng(range);}};var getRange=selection.getRng;var showCaret=function(direction,node,before,scrollIntoView){if(scrollIntoView===void 0){scrollIntoView=true;}var e=editor.fire('ShowCaret',{target:node,direction:direction,before:before});if(e.isDefaultPrevented()){return null;}if(scrollIntoView){selection.scrollIntoView(node,direction===-1);}return fakeCaret.show(before,node);};var showBlockCaretContainer=function(blockCaretContainer){if(blockCaretContainer.hasAttribute('data-mce-caret')){showCaretContainerBlock(blockCaretContainer);setRange(getRange());selection.scrollIntoView(blockCaretContainer);}};var registerEvents=function(){editor.on('mouseup',function(e){var range=getRange();if(range.collapsed&&isXYInContentArea(editor,e.clientX,e.clientY)){renderCaretAtRange(editor,range,false).each(setRange);}});editor.on('click',function(e){var contentEditableRoot=getContentEditableRoot(editor,e.target);if(contentEditableRoot){if(isContentEditableFalse(contentEditableRoot)){e.preventDefault();editor.focus();}if(isContentEditableTrue(contentEditableRoot)){if(dom.isChildOf(contentEditableRoot,selection.getNode())){removeElementSelection();}}}});editor.on('blur NewBlock',removeElementSelection);editor.on('ResizeWindow FullscreenStateChanged',fakeCaret.reposition);var hasNormalCaretPosition=function(elm){var start=elm.firstChild;if(isNullable(start)){return false;}var startPos=CaretPosition.before(start);if(isBr$5(startPos.getNode())&&elm.childNodes.length===1){return!isNearFakeSelectionElement(startPos);}else{var caretWalker=CaretWalker(elm);var newPos=caretWalker.next(startPos);return newPos&&!isNearFakeSelectionElement(newPos);}};var isInSameBlock=function(node1,node2){var block1=dom.getParent(node1,isBlock);var block2=dom.getParent(node2,isBlock);return block1===block2;};var hasBetterMouseTarget=function(targetNode,caretNode){var targetBlock=dom.getParent(targetNode,isBlock);var caretBlock=dom.getParent(caretNode,isBlock);if(isNullable(targetBlock)){return false;}if(targetNode!==caretBlock&&dom.isChildOf(targetBlock,caretBlock)&&isContentEditableFalse(getContentEditableRoot(editor,targetBlock))===false){return true;}return!dom.isChildOf(caretBlock,targetBlock)&&!isInSameBlock(targetBlock,caretBlock)&&hasNormalCaretPosition(targetBlock);};editor.on('tap',function(e){var targetElm=e.target;var contentEditableRoot=getContentEditableRoot(editor,targetElm);if(isContentEditableFalse(contentEditableRoot)){e.preventDefault();selectNode(editor,contentEditableRoot).each(setElementSelection);}else if(isFakeSelectionTargetElement(targetElm)){selectNode(editor,targetElm).each(setElementSelection);}},true);editor.on('mousedown',function(e){var targetElm=e.target;if(targetElm!==rootNode&&targetElm.nodeName!=='HTML'&&!dom.isChildOf(targetElm,rootNode)){return;}if(isXYInContentArea(editor,e.clientX,e.clientY)===false){return;}var contentEditableRoot=getContentEditableRoot(editor,targetElm);if(contentEditableRoot){if(isContentEditableFalse(contentEditableRoot)){e.preventDefault();selectNode(editor,contentEditableRoot).each(setElementSelection);}else{removeElementSelection();if(!(isContentEditableTrue(contentEditableRoot)&&e.shiftKey)&&!isXYWithinRange(e.clientX,e.clientY,selection.getRng())){hideFakeCaret();selection.placeCaretAt(e.clientX,e.clientY);}}}else if(isFakeSelectionTargetElement(targetElm)){selectNode(editor,targetElm).each(setElementSelection);}else if(isFakeCaretTarget(targetElm)===false){removeElementSelection();hideFakeCaret();var fakeCaretInfo=closestFakeCaret(rootNode,e.clientX,e.clientY);if(fakeCaretInfo){if(!hasBetterMouseTarget(targetElm,fakeCaretInfo.node)){e.preventDefault();var range=showCaret(1,fakeCaretInfo.node,fakeCaretInfo.before,false);setRange(range);editor.getBody().focus();}}}});editor.on('keypress',function(e){if(VK.modifierPressed(e)){return;}if(isContentEditableFalse(selection.getNode())){e.preventDefault();}});editor.on('GetSelectionRange',function(e){var rng=e.range;if(selectedElement){if(!selectedElement.parentNode){selectedElement=null;return;}rng=rng.cloneRange();rng.selectNode(selectedElement);e.range=rng;}});editor.on('SetSelectionRange',function(e){e.range=normalizeShortEndedElementSelection(e.range);var rng=setElementSelection(e.range,e.forward);if(rng){e.range=rng;}});var isPasteBin=function(node){return node.id==='mcepastebin';};editor.on('AfterSetSelectionRange',function(e){var rng=e.range;var parentNode=rng.startContainer.parentNode;if(!isRangeInCaretContainer(rng)&&!isPasteBin(parentNode)){hideFakeCaret();}if(!isFakeSelectionElement(parentNode)){removeElementSelection();}});editor.on('copy',function(e){var clipboardData=e.clipboardData;if(!e.isDefaultPrevented()&&e.clipboardData&&!Env.ie){var realSelectionElement=getRealSelectionElement();if(realSelectionElement){e.preventDefault();clipboardData.clearData();clipboardData.setData('text/html',realSelectionElement.outerHTML);clipboardData.setData('text/plain',realSelectionElement.outerText||realSelectionElement.innerText);}}});init$2(editor);setup$1(editor);setup(editor);};var isWithinCaretContainer=function(node){return isCaretContainer$2(node)||startsWithCaretContainer$1(node)||endsWithCaretContainer$1(node);};var isRangeInCaretContainer=function(rng){return isWithinCaretContainer(rng.startContainer)||isWithinCaretContainer(rng.endContainer);};var normalizeShortEndedElementSelection=function(rng){var shortEndedElements=editor.schema.getShortEndedElements();var newRng=dom.createRng();var startContainer=rng.startContainer;var startOffset=rng.startOffset;var endContainer=rng.endContainer;var endOffset=rng.endOffset;if(has$2(shortEndedElements,startContainer.nodeName.toLowerCase())){if(startOffset===0){newRng.setStartBefore(startContainer);}else{newRng.setStartAfter(startContainer);}}else{newRng.setStart(startContainer,startOffset);}if(has$2(shortEndedElements,endContainer.nodeName.toLowerCase())){if(endOffset===0){newRng.setEndBefore(endContainer);}else{newRng.setEndAfter(endContainer);}}else{newRng.setEnd(endContainer,endOffset);}return newRng;};var setupOffscreenSelection=function(node,targetClone,origTargetClone){var $=editor.$;var $realSelectionContainer=descendant(SugarElement.fromDom(editor.getBody()),'#'+realSelectionId).fold(function(){return $([]);},function(elm){return $([elm.dom]);});if($realSelectionContainer.length===0){$realSelectionContainer=$('<div data-mce-bogus=\"all\" class=\"mce-offscreen-selection\"></div>').attr('id',realSelectionId);$realSelectionContainer.appendTo(editor.getBody());}var newRange=dom.createRng();if(targetClone===origTargetClone&&Env.ie){$realSelectionContainer.empty().append('<p style=\"font-size: 0\" data-mce-bogus=\"all\">\\xA0</p>').append(targetClone);newRange.setStartAfter($realSelectionContainer[0].firstChild.firstChild);newRange.setEndAfter(targetClone);}else{$realSelectionContainer.empty().append(nbsp).append(targetClone).append(nbsp);newRange.setStart($realSelectionContainer[0].firstChild,1);newRange.setEnd($realSelectionContainer[0].lastChild,0);}$realSelectionContainer.css({top:dom.getPos(node,editor.getBody()).y});$realSelectionContainer[0].focus();var sel=selection.getSel();sel.removeAllRanges();sel.addRange(newRange);return newRange;};var selectElement=function(elm){var targetClone=elm.cloneNode(true);var e=editor.fire('ObjectSelected',{target:elm,targetClone:targetClone});if(e.isDefaultPrevented()){return null;}var range=setupOffscreenSelection(elm,e.targetClone,targetClone);var nodeElm=SugarElement.fromDom(elm);each$k(descendants(SugarElement.fromDom(editor.getBody()),'*[data-mce-selected]'),function(elm){if(!eq(nodeElm,elm)){remove$6(elm,elementSelectionAttr);}});if(!dom.getAttrib(elm,elementSelectionAttr)){elm.setAttribute(elementSelectionAttr,'1');}selectedElement=elm;hideFakeCaret();return range;};var setElementSelection=function(range,forward){if(!range){return null;}if(range.collapsed){if(!isRangeInCaretContainer(range)){var dir=forward?1:-1;var caretPosition=getNormalizedRangeEndPoint(dir,rootNode,range);var beforeNode=caretPosition.getNode(!forward);if(isFakeCaretTarget(beforeNode)){return showCaret(dir,beforeNode,forward?!caretPosition.isAtEnd():false,false);}var afterNode=caretPosition.getNode(forward);if(isFakeCaretTarget(afterNode)){return showCaret(dir,afterNode,forward?false:!caretPosition.isAtEnd(),false);}}return null;}var startContainer=range.startContainer;var startOffset=range.startOffset;var endOffset=range.endOffset;if(startContainer.nodeType===3&&startOffset===0&&isContentEditableFalse(startContainer.parentNode)){startContainer=startContainer.parentNode;startOffset=dom.nodeIndex(startContainer);startContainer=startContainer.parentNode;}if(startContainer.nodeType!==1){return null;}if(endOffset===startOffset+1&&startContainer===range.endContainer){var node=startContainer.childNodes[startOffset];if(isFakeSelectionTargetElement(node)){return selectElement(node);}}return null;};var removeElementSelection=function(){if(selectedElement){selectedElement.removeAttribute(elementSelectionAttr);}descendant(SugarElement.fromDom(editor.getBody()),'#'+realSelectionId).each(remove$7);selectedElement=null;};var destroy=function(){fakeCaret.destroy();selectedElement=null;};var hideFakeCaret=function(){fakeCaret.hide();};if(Env.ceFalse&&!isRtc(editor)){registerEvents();}return{showCaret:showCaret,showBlockCaretContainer:showBlockCaretContainer,hideFakeCaret:hideFakeCaret,destroy:destroy};};var Quirks=function(editor){var each=Tools.each;var BACKSPACE=VK.BACKSPACE,DELETE=VK.DELETE,dom=editor.dom,selection=editor.selection,parser=editor.parser;var isGecko=Env.gecko,isIE=Env.ie,isWebKit=Env.webkit;var mceInternalUrlPrefix='data:text/mce-internal,';var mceInternalDataType=isIE?'Text':'URL';var setEditorCommandState=function(cmd,state){try{editor.getDoc().execCommand(cmd,false,state);}catch(ex){}};var isDefaultPrevented=function(e){return e.isDefaultPrevented();};var setMceInternalContent=function(e){var selectionHtml,internalContent;if(e.dataTransfer){if(editor.selection.isCollapsed()&&e.target.tagName==='IMG'){selection.select(e.target);}selectionHtml=editor.selection.getContent();if(selectionHtml.length>0){internalContent=mceInternalUrlPrefix+escape(editor.id)+','+escape(selectionHtml);e.dataTransfer.setData(mceInternalDataType,internalContent);}}};var getMceInternalContent=function(e){var internalContent;if(e.dataTransfer){internalContent=e.dataTransfer.getData(mceInternalDataType);if(internalContent&&internalContent.indexOf(mceInternalUrlPrefix)>=0){internalContent=internalContent.substr(mceInternalUrlPrefix.length).split(',');return{id:unescape(internalContent[0]),html:unescape(internalContent[1])};}}return null;};var insertClipboardContents=function(content,internal){if(editor.queryCommandSupported('mceInsertClipboardContent')){editor.execCommand('mceInsertClipboardContent',false,{content:content,internal:internal});}else{editor.execCommand('mceInsertContent',false,content);}};var emptyEditorWhenDeleting=function(){var serializeRng=function(rng){var body=dom.create('body');var contents=rng.cloneContents();body.appendChild(contents);return selection.serializer.serialize(body,{format:'html'});};var allContentsSelected=function(rng){var selection=serializeRng(rng);var allRng=dom.createRng();allRng.selectNode(editor.getBody());var allSelection=serializeRng(allRng);return selection===allSelection;};editor.on('keydown',function(e){var keyCode=e.keyCode;var isCollapsed,body;if(!isDefaultPrevented(e)&&(keyCode===DELETE||keyCode===BACKSPACE)){isCollapsed=editor.selection.isCollapsed();body=editor.getBody();if(isCollapsed&&!dom.isEmpty(body)){return;}if(!isCollapsed&&!allContentsSelected(editor.selection.getRng())){return;}e.preventDefault();editor.setContent('');if(body.firstChild&&dom.isBlock(body.firstChild)){editor.selection.setCursorLocation(body.firstChild,0);}else{editor.selection.setCursorLocation(body,0);}editor.nodeChanged();}});};var selectAll=function(){editor.shortcuts.add('meta+a',null,'SelectAll');};var documentElementEditingFocus=function(){if(!editor.inline){dom.bind(editor.getDoc(),'mousedown mouseup',function(e){var rng;if(e.target===editor.getDoc().documentElement){rng=selection.getRng();editor.getBody().focus();if(e.type==='mousedown'){if(isCaretContainer$2(rng.startContainer)){return;}selection.placeCaretAt(e.clientX,e.clientY);}else{selection.setRng(rng);}}});}};var removeHrOnBackspace=function(){editor.on('keydown',function(e){if(!isDefaultPrevented(e)&&e.keyCode===BACKSPACE){if(!editor.getBody().getElementsByTagName('hr').length){return;}if(selection.isCollapsed()&&selection.getRng().startOffset===0){var node=selection.getNode();var previousSibling=node.previousSibling;if(node.nodeName==='HR'){dom.remove(node);e.preventDefault();return;}if(previousSibling&&previousSibling.nodeName&&previousSibling.nodeName.toLowerCase()==='hr'){dom.remove(previousSibling);e.preventDefault();}}}});};var focusBody=function(){if(!Range.prototype.getClientRects){editor.on('mousedown',function(e){if(!isDefaultPrevented(e)&&e.target.nodeName==='HTML'){var body_1=editor.getBody();body_1.blur();Delay.setEditorTimeout(editor,function(){body_1.focus();});}});}};var selectControlElements=function(){editor.on('click',function(e){var target=e.target;if(/^(IMG|HR)$/.test(target.nodeName)&&dom.getContentEditableParent(target)!=='false'){e.preventDefault();editor.selection.select(target);editor.nodeChanged();}if(target.nodeName==='A'&&dom.hasClass(target,'mce-item-anchor')){e.preventDefault();selection.select(target);}});};var removeStylesWhenDeletingAcrossBlockElements=function(){var getAttributeApplyFunction=function(){var template=dom.getAttribs(selection.getStart().cloneNode(false));return function(){var target=selection.getStart();if(target!==editor.getBody()){dom.setAttrib(target,'style',null);each(template,function(attr){target.setAttributeNode(attr.cloneNode(true));});}};};var isSelectionAcrossElements=function(){return!selection.isCollapsed()&&dom.getParent(selection.getStart(),dom.isBlock)!==dom.getParent(selection.getEnd(),dom.isBlock);};editor.on('keypress',function(e){var applyAttributes;if(!isDefaultPrevented(e)&&(e.keyCode===8||e.keyCode===46)&&isSelectionAcrossElements()){applyAttributes=getAttributeApplyFunction();editor.getDoc().execCommand('delete',false,null);applyAttributes();e.preventDefault();return false;}});dom.bind(editor.getDoc(),'cut',function(e){var applyAttributes;if(!isDefaultPrevented(e)&&isSelectionAcrossElements()){applyAttributes=getAttributeApplyFunction();Delay.setEditorTimeout(editor,function(){applyAttributes();});}});};var disableBackspaceIntoATable=function(){editor.on('keydown',function(e){if(!isDefaultPrevented(e)&&e.keyCode===BACKSPACE){if(selection.isCollapsed()&&selection.getRng().startOffset===0){var previousSibling=selection.getNode().previousSibling;if(previousSibling&&previousSibling.nodeName&&previousSibling.nodeName.toLowerCase()==='table'){e.preventDefault();return false;}}}});};var removeBlockQuoteOnBackSpace=function(){editor.on('keydown',function(e){var rng,parent;if(isDefaultPrevented(e)||e.keyCode!==VK.BACKSPACE){return;}rng=selection.getRng();var container=rng.startContainer;var offset=rng.startOffset;var root=dom.getRoot();parent=container;if(!rng.collapsed||offset!==0){return;}while(parent&&parent.parentNode&&parent.parentNode.firstChild===parent&&parent.parentNode!==root){parent=parent.parentNode;}if(parent.tagName==='BLOCKQUOTE'){editor.formatter.toggle('blockquote',null,parent);rng=dom.createRng();rng.setStart(container,0);rng.setEnd(container,0);selection.setRng(rng);}});};var setGeckoEditingOptions=function(){var setOpts=function(){setEditorCommandState('StyleWithCSS',false);setEditorCommandState('enableInlineTableEditing',false);if(!getObjectResizing(editor)){setEditorCommandState('enableObjectResizing',false);}};if(!isReadOnly$1(editor)){editor.on('BeforeExecCommand mousedown',setOpts);}};var addBrAfterLastLinks=function(){var fixLinks=function(){each(dom.select('a'),function(node){var parentNode=node.parentNode;var root=dom.getRoot();if(parentNode.lastChild===node){while(parentNode&&!dom.isBlock(parentNode)){if(parentNode.parentNode.lastChild!==parentNode||parentNode===root){return;}parentNode=parentNode.parentNode;}dom.add(parentNode,'br',{'data-mce-bogus':1});}});};editor.on('SetContent ExecCommand',function(e){if(e.type==='setcontent'||e.command==='mceInsertLink'){fixLinks();}});};var setDefaultBlockType=function(){if(getForcedRootBlock(editor)){editor.on('init',function(){setEditorCommandState('DefaultParagraphSeparator',getForcedRootBlock(editor));});}};var normalizeSelection=function(){editor.on('keyup focusin mouseup',function(e){if(!VK.modifierPressed(e)){selection.normalize();}},true);};var showBrokenImageIcon=function(){editor.contentStyles.push('img:-moz-broken {'+'-moz-force-broken-image-icon:1;'+'min-width:24px;'+'min-height:24px'+'}');};var restoreFocusOnKeyDown=function(){if(!editor.inline){editor.on('keydown',function(){if(document.activeElement===document.body){editor.getWin().focus();}});}};var bodyHeight=function(){if(!editor.inline){editor.contentStyles.push('body {min-height: 150px}');editor.on('click',function(e){var rng;if(e.target.nodeName==='HTML'){if(Env.ie>11){editor.getBody().focus();return;}rng=editor.selection.getRng();editor.getBody().focus();editor.selection.setRng(rng);editor.selection.normalize();editor.nodeChanged();}});}};var blockCmdArrowNavigation=function(){if(Env.mac){editor.on('keydown',function(e){if(VK.metaKeyPressed(e)&&!e.shiftKey&&(e.keyCode===37||e.keyCode===39)){e.preventDefault();var selection_1=editor.selection.getSel();selection_1.modify('move',e.keyCode===37?'backward':'forward','lineboundary');}});}};var disableAutoUrlDetect=function(){setEditorCommandState('AutoUrlDetect',false);};var tapLinksAndImages=function(){editor.on('click',function(e){var elm=e.target;do{if(elm.tagName==='A'){e.preventDefault();return;}}while(elm=elm.parentNode);});editor.contentStyles.push('.mce-content-body {-webkit-touch-callout: none}');};var blockFormSubmitInsideEditor=function(){editor.on('init',function(){editor.dom.bind(editor.getBody(),'submit',function(e){e.preventDefault();});});};var removeAppleInterchangeBrs=function(){parser.addNodeFilter('br',function(nodes){var i=nodes.length;while(i--){if(nodes[i].attr('class')==='Apple-interchange-newline'){nodes[i].remove();}}});};var ieInternalDragAndDrop=function(){editor.on('dragstart',function(e){setMceInternalContent(e);});editor.on('drop',function(e){if(!isDefaultPrevented(e)){var internalContent=getMceInternalContent(e);if(internalContent&&internalContent.id!==editor.id){e.preventDefault();var rng=fromPoint(e.x,e.y,editor.getDoc());selection.setRng(rng);insertClipboardContents(internalContent.html,true);}}});};var refreshContentEditable=noop;var isHidden=function(){if(!isGecko||editor.removed){return false;}var sel=editor.selection.getSel();return!sel||!sel.rangeCount||sel.rangeCount===0;};var setupRtc=function(){if(isWebKit){documentElementEditingFocus();selectControlElements();blockFormSubmitInsideEditor();selectAll();if(Env.iOS){restoreFocusOnKeyDown();bodyHeight();tapLinksAndImages();}}if(isGecko){focusBody();setGeckoEditingOptions();showBrokenImageIcon();blockCmdArrowNavigation();}};var setup=function(){removeBlockQuoteOnBackSpace();emptyEditorWhenDeleting();if(!Env.windowsPhone){normalizeSelection();}if(isWebKit){documentElementEditingFocus();selectControlElements();setDefaultBlockType();blockFormSubmitInsideEditor();disableBackspaceIntoATable();removeAppleInterchangeBrs();if(Env.iOS){restoreFocusOnKeyDown();bodyHeight();tapLinksAndImages();}else{selectAll();}}if(Env.ie>=11){bodyHeight();disableBackspaceIntoATable();}if(Env.ie){selectAll();disableAutoUrlDetect();ieInternalDragAndDrop();}if(isGecko){removeHrOnBackspace();focusBody();removeStylesWhenDeletingAcrossBlockElements();setGeckoEditingOptions();addBrAfterLastLinks();showBrokenImageIcon();blockCmdArrowNavigation();disableBackspaceIntoATable();}};if(isRtc(editor)){setupRtc();}else{setup();}return{refreshContentEditable:refreshContentEditable,isHidden:isHidden};};var DOM$6=DOMUtils.DOM;var appendStyle=function(editor,text){var body=SugarElement.fromDom(editor.getBody());var container=getStyleContainer(getRootNode(body));var style=SugarElement.fromTag('style');set$1(style,'type','text/css');append$1(style,SugarElement.fromText(text));append$1(container,style);editor.on('remove',function(){remove$7(style);});};var getRootName=function(editor){return editor.inline?editor.getElement().nodeName.toLowerCase():undefined;};var removeUndefined=function(obj){return filter$3(obj,function(v){return isUndefined(v)===false;});};var mkSchemaSettings=function(editor){var settings=editor.settings;return removeUndefined({block_elements:settings.block_elements,boolean_attributes:settings.boolean_attributes,custom_elements:settings.custom_elements,extended_valid_elements:settings.extended_valid_elements,invalid_elements:settings.invalid_elements,invalid_styles:settings.invalid_styles,move_caret_before_on_enter_elements:settings.move_caret_before_on_enter_elements,non_empty_elements:settings.non_empty_elements,schema:settings.schema,self_closing_elements:settings.self_closing_elements,short_ended_elements:settings.short_ended_elements,special:settings.special,text_block_elements:settings.text_block_elements,text_inline_elements:settings.text_inline_elements,valid_children:settings.valid_children,valid_classes:settings.valid_classes,valid_elements:settings.valid_elements,valid_styles:settings.valid_styles,verify_html:settings.verify_html,whitespace_elements:settings.whitespace_elements,padd_empty_block_inline_children:settings.format_empty_lines});};var mkParserSettings=function(editor){var settings=editor.settings;var blobCache=editor.editorUpload.blobCache;return removeUndefined({allow_conditional_comments:settings.allow_conditional_comments,allow_html_data_urls:settings.allow_html_data_urls,allow_svg_data_urls:settings.allow_svg_data_urls,allow_html_in_named_anchor:settings.allow_html_in_named_anchor,allow_script_urls:settings.allow_script_urls,allow_unsafe_link_target:settings.allow_unsafe_link_target,convert_fonts_to_spans:settings.convert_fonts_to_spans,fix_list_elements:settings.fix_list_elements,font_size_legacy_values:settings.font_size_legacy_values,forced_root_block:settings.forced_root_block,forced_root_block_attrs:settings.forced_root_block_attrs,padd_empty_with_br:settings.padd_empty_with_br,preserve_cdata:settings.preserve_cdata,remove_trailing_brs:settings.remove_trailing_brs,inline_styles:settings.inline_styles,root_name:getRootName(editor),validate:true,blob_cache:blobCache,document:editor.getDoc(),images_dataimg_filter:settings.images_dataimg_filter});};var mkSerializerSettings=function(editor){var settings=editor.settings;return __assign(__assign(__assign({},mkParserSettings(editor)),mkSchemaSettings(editor)),removeUndefined({url_converter:settings.url_converter,url_converter_scope:settings.url_converter_scope,element_format:settings.element_format,entities:settings.entities,entity_encoding:settings.entity_encoding,indent:settings.indent,indent_after:settings.indent_after,indent_before:settings.indent_before}));};var createParser=function(editor){var parser=DomParser(mkParserSettings(editor),editor.schema);parser.addAttributeFilter('src,href,style,tabindex',function(nodes,name){var i=nodes.length,node,value;var dom=editor.dom;var internalName='data-mce-'+name;while(i--){node=nodes[i];value=node.attr(name);if(value&&!node.attr(internalName)){if(value.indexOf('data:')===0||value.indexOf('blob:')===0){continue;}if(name==='style'){value=dom.serializeStyle(dom.parseStyle(value),node.name);if(!value.length){value=null;}node.attr(internalName,value);node.attr(name,value);}else if(name==='tabindex'){node.attr(internalName,value);node.attr(name,null);}else{node.attr(internalName,editor.convertURL(value,name,node.name));}}}});parser.addNodeFilter('script',function(nodes){var i=nodes.length;while(i--){var node=nodes[i];var type=node.attr('type')||'no/type';if(type.indexOf('mce-')!==0){node.attr('type','mce-'+type);}}});if(editor.settings.preserve_cdata){parser.addNodeFilter('#cdata',function(nodes){var i=nodes.length;while(i--){var node=nodes[i];node.type=8;node.name='#comment';node.value='[CDATA['+editor.dom.encode(node.value)+']]';}});}parser.addNodeFilter('p,h1,h2,h3,h4,h5,h6,div',function(nodes){var i=nodes.length;var nonEmptyElements=editor.schema.getNonEmptyElements();while(i--){var node=nodes[i];if(node.isEmpty(nonEmptyElements)&&node.getAll('br').length===0){node.append(new AstNode('br',1)).shortEnded=true;}}});return parser;};var autoFocus=function(editor){if(editor.settings.auto_focus){Delay.setEditorTimeout(editor,function(){var focusEditor;if(editor.settings.auto_focus===true){focusEditor=editor;}else{focusEditor=editor.editorManager.get(editor.settings.auto_focus);}if(!focusEditor.destroyed){focusEditor.focus();}},100);}};var moveSelectionToFirstCaretPosition=function(editor){var root=editor.dom.getRoot();if(!editor.inline&&(!hasAnyRanges(editor)||editor.selection.getStart(true)===root)){firstPositionIn(root).each(function(pos){var node=pos.getNode();var caretPos=isTable$3(node)?firstPositionIn(node).getOr(pos):pos;if(Env.browser.isIE()){storeNative(editor,caretPos.toRange());}else{editor.selection.setRng(caretPos.toRange());}});}};var initEditor=function(editor){editor.bindPendingEventDelegates();editor.initialized=true;fireInit(editor);editor.focus(true);moveSelectionToFirstCaretPosition(editor);editor.nodeChanged({initial:true});editor.execCallback('init_instance_callback',editor);autoFocus(editor);};var getStyleSheetLoader$1=function(editor){return editor.inline?editor.ui.styleSheetLoader:editor.dom.styleSheetLoader;};var makeStylesheetLoadingPromises=function(editor,css,framedFonts){var promises=[new promiseObj(function(resolve,reject){return getStyleSheetLoader$1(editor).loadAll(css,resolve,reject);})];if(editor.inline){return promises;}else{return promises.concat([new promiseObj(function(resolve,reject){return editor.ui.styleSheetLoader.loadAll(framedFonts,resolve,reject);})]);}};var loadContentCss=function(editor){var styleSheetLoader=getStyleSheetLoader$1(editor);var fontCss=getFontCss(editor);var css=editor.contentCSS;var removeCss=function(){styleSheetLoader.unloadAll(css);if(!editor.inline){editor.ui.styleSheetLoader.unloadAll(fontCss);}};var loaded=function(){if(editor.removed){removeCss();}else{editor.on('remove',removeCss);}};if(editor.contentStyles.length>0){var contentCssText_1='';Tools.each(editor.contentStyles,function(style){contentCssText_1+=style+'\\r\\n';});editor.dom.addStyle(contentCssText_1);}var allStylesheets=promiseObj.all(makeStylesheetLoadingPromises(editor,css,fontCss)).then(loaded).catch(loaded);if(editor.settings.content_style){appendStyle(editor,editor.settings.content_style);}return allStylesheets;};var preInit=function(editor){var settings=editor.settings,doc=editor.getDoc(),body=editor.getBody();firePreInit(editor);if(!settings.browser_spellcheck&&!settings.gecko_spellcheck){doc.body.spellcheck=false;DOM$6.setAttrib(body,'spellcheck','false');}editor.quirks=Quirks(editor);firePostRender(editor);var directionality=getDirectionality(editor);if(directionality!==undefined){body.dir=directionality;}if(settings.protect){editor.on('BeforeSetContent',function(e){Tools.each(settings.protect,function(pattern){e.content=e.content.replace(pattern,function(str){return'<!--mce:protected '+escape(str)+'-->';});});});}editor.on('SetContent',function(){editor.addVisual(editor.getBody());});editor.on('compositionstart compositionend',function(e){editor.composing=e.type==='compositionstart';});};var loadInitialContent=function(editor){if(!isRtc(editor)){editor.load({initial:true,format:'html'});}editor.startContent=editor.getContent({format:'raw'});};var initEditorWithInitialContent=function(editor){if(editor.removed!==true){loadInitialContent(editor);initEditor(editor);}};var initContentBody=function(editor,skipWrite){var settings=editor.settings;var targetElm=editor.getElement();var doc=editor.getDoc();if(!settings.inline){editor.getElement().style.visibility=editor.orgVisibility;}if(!skipWrite&&!editor.inline){doc.open();doc.write(editor.iframeHTML);doc.close();}if(editor.inline){DOM$6.addClass(targetElm,'mce-content-body');editor.contentDocument=doc=document;editor.contentWindow=window;editor.bodyElement=targetElm;editor.contentAreaContainer=targetElm;}var body=editor.getBody();body.disabled=true;editor.readonly=!!settings.readonly;if(!editor.readonly){if(editor.inline&&DOM$6.getStyle(body,'position',true)==='static'){body.style.position='relative';}body.contentEditable=editor.getParam('content_editable_state',true);}body.disabled=false;editor.editorUpload=EditorUpload(editor);editor.schema=Schema(mkSchemaSettings(editor));editor.dom=DOMUtils(doc,{keep_values:true,url_converter:editor.convertURL,url_converter_scope:editor,hex_colors:settings.force_hex_style_colors,update_styles:true,root_element:editor.inline?editor.getBody():null,collect:function(){return editor.inline;},schema:editor.schema,contentCssCors:shouldUseContentCssCors(editor),referrerPolicy:getReferrerPolicy(editor),onSetAttrib:function(e){editor.fire('SetAttrib',e);}});editor.parser=createParser(editor);editor.serializer=DomSerializer(mkSerializerSettings(editor),editor);editor.selection=EditorSelection(editor.dom,editor.getWin(),editor.serializer,editor);editor.annotator=Annotator(editor);editor.formatter=Formatter(editor);editor.undoManager=UndoManager(editor);editor._nodeChangeDispatcher=new NodeChange(editor);editor._selectionOverrides=SelectionOverrides(editor);setup$e(editor);setup$3(editor);if(!isRtc(editor)){setup$2(editor);}var caret=setup$4(editor);setup$f(editor,caret);setup$d(editor);setup$g(editor);var setupRtcThunk=setup$i(editor);preInit(editor);setupRtcThunk.fold(function(){loadContentCss(editor).then(function(){return initEditorWithInitialContent(editor);});},function(setupRtc){editor.setProgressState(true);loadContentCss(editor).then(function(){setupRtc().then(function(_rtcMode){editor.setProgressState(false);initEditorWithInitialContent(editor);},function(err){editor.notificationManager.open({type:'error',text:String(err)});initEditorWithInitialContent(editor);});});});};var DOM$5=DOMUtils.DOM;var relaxDomain=function(editor,ifr){if(document.domain!==window.location.hostname&&Env.browser.isIE()){var bodyUuid=uuid('mce');editor[bodyUuid]=function(){initContentBody(editor);};var domainRelaxUrl='javascript:(function(){'+'document.open();document.domain=\"'+document.domain+'\";'+'var ed = window.parent.tinymce.get(\"'+editor.id+'\");document.write(ed.iframeHTML);'+'document.close();ed.'+bodyUuid+'(true);})()';DOM$5.setAttrib(ifr,'src',domainRelaxUrl);return true;}return false;};var createIframeElement=function(id,title,height,customAttrs){var iframe=SugarElement.fromTag('iframe');setAll$1(iframe,customAttrs);setAll$1(iframe,{id:id+'_ifr',frameBorder:'0',allowTransparency:'true',title:title});add$1(iframe,'tox-edit-area__iframe');return iframe;};var getIframeHtml=function(editor){var iframeHTML=getDocType(editor)+'<html><head>';if(getDocumentBaseUrl(editor)!==editor.documentBaseUrl){iframeHTML+='<base href=\"'+editor.documentBaseURI.getURI()+'\" />';}iframeHTML+='<meta http-equiv=\"Content-Type\" content=\"text/html; charset=UTF-8\" />';var bodyId=getBodyId(editor);var bodyClass=getBodyClass(editor);var translatedAriaText=editor.translate(getIframeAriaText(editor));if(getContentSecurityPolicy(editor)){iframeHTML+='<meta http-equiv=\"Content-Security-Policy\" content=\"'+getContentSecurityPolicy(editor)+'\" />';}iframeHTML+='</head>'+('<body id=\"'+bodyId+'\" class=\"mce-content-body '+bodyClass+'\" data-id=\"'+editor.id+'\" aria-label=\"'+translatedAriaText+'\">')+'<br>'+'</body></html>';return iframeHTML;};var createIframe=function(editor,o){var iframeTitle=editor.translate('Rich Text Area');var ifr=createIframeElement(editor.id,iframeTitle,o.height,getIframeAttrs(editor)).dom;ifr.onload=function(){ifr.onload=null;editor.fire('load');};var isDomainRelaxed=relaxDomain(editor,ifr);editor.contentAreaContainer=o.iframeContainer;editor.iframeElement=ifr;editor.iframeHTML=getIframeHtml(editor);DOM$5.add(o.iframeContainer,ifr);return isDomainRelaxed;};var init$1=function(editor,boxInfo){var isDomainRelaxed=createIframe(editor,boxInfo);if(boxInfo.editorContainer){DOM$5.get(boxInfo.editorContainer).style.display=editor.orgDisplay;editor.hidden=DOM$5.isHidden(boxInfo.editorContainer);}editor.getElement().style.display='none';DOM$5.setAttrib(editor.id,'aria-hidden','true');if(!isDomainRelaxed){initContentBody(editor);}};var DOM$4=DOMUtils.DOM;var initPlugin=function(editor,initializedPlugins,plugin){var Plugin=PluginManager.get(plugin);var pluginUrl=PluginManager.urls[plugin]||editor.documentBaseUrl.replace(/\\/$/,'');plugin=Tools.trim(plugin);if(Plugin&&Tools.inArray(initializedPlugins,plugin)===-1){Tools.each(PluginManager.dependencies(plugin),function(dep){initPlugin(editor,initializedPlugins,dep);});if(editor.plugins[plugin]){return;}try{var pluginInstance=new Plugin(editor,pluginUrl,editor.$);editor.plugins[plugin]=pluginInstance;if(pluginInstance.init){pluginInstance.init(editor,pluginUrl);initializedPlugins.push(plugin);}}catch(e){pluginInitError(editor,plugin,e);}}};var trimLegacyPrefix=function(name){return name.replace(/^\\-/,'');};var initPlugins=function(editor){var initializedPlugins=[];Tools.each(getPlugins(editor).split(/[ ,]/),function(name){initPlugin(editor,initializedPlugins,trimLegacyPrefix(name));});};var initIcons=function(editor){var iconPackName=Tools.trim(getIconPackName(editor));var currentIcons=editor.ui.registry.getAll().icons;var loadIcons=__assign(__assign({},IconManager.get('default').icons),IconManager.get(iconPackName).icons);each$j(loadIcons,function(svgData,icon){if(!has$2(currentIcons,icon)){editor.ui.registry.addIcon(icon,svgData);}});};var initTheme=function(editor){var theme=getTheme(editor);if(isString$1(theme)){editor.settings.theme=trimLegacyPrefix(theme);var Theme=ThemeManager.get(theme);editor.theme=new Theme(editor,ThemeManager.urls[theme]);if(editor.theme.init){editor.theme.init(editor,ThemeManager.urls[theme]||editor.documentBaseUrl.replace(/\\/$/,''),editor.$);}}else{editor.theme={};}};var renderFromLoadedTheme=function(editor){return editor.theme.renderUI();};var renderFromThemeFunc=function(editor){var elm=editor.getElement();var theme=getTheme(editor);var info=theme(editor,elm);if(info.editorContainer.nodeType){info.editorContainer.id=info.editorContainer.id||editor.id+'_parent';}if(info.iframeContainer&&info.iframeContainer.nodeType){info.iframeContainer.id=info.iframeContainer.id||editor.id+'_iframecontainer';}info.height=info.iframeHeight?info.iframeHeight:elm.offsetHeight;return info;};var createThemeFalseResult=function(element){return{editorContainer:element,iframeContainer:element,api:{}};};var renderThemeFalseIframe=function(targetElement){var iframeContainer=DOM$4.create('div');DOM$4.insertAfter(iframeContainer,targetElement);return createThemeFalseResult(iframeContainer);};var renderThemeFalse=function(editor){var targetElement=editor.getElement();return editor.inline?createThemeFalseResult(null):renderThemeFalseIframe(targetElement);};var renderThemeUi=function(editor){var elm=editor.getElement();editor.orgDisplay=elm.style.display;if(isString$1(getTheme(editor))){return renderFromLoadedTheme(editor);}else if(isFunction(getTheme(editor))){return renderFromThemeFunc(editor);}else{return renderThemeFalse(editor);}};var augmentEditorUiApi=function(editor,api){var uiApiFacade={show:Optional.from(api.show).getOr(noop),hide:Optional.from(api.hide).getOr(noop),disable:Optional.from(api.disable).getOr(noop),isDisabled:Optional.from(api.isDisabled).getOr(never),enable:function(){if(!editor.mode.isReadOnly()){Optional.from(api.enable).map(call);}}};editor.ui=__assign(__assign({},editor.ui),uiApiFacade);};var init=function(editor){editor.fire('ScriptsLoaded');initIcons(editor);initTheme(editor);initPlugins(editor);var renderInfo=renderThemeUi(editor);augmentEditorUiApi(editor,Optional.from(renderInfo.api).getOr({}));var boxInfo={editorContainer:renderInfo.editorContainer,iframeContainer:renderInfo.iframeContainer};editor.editorContainer=boxInfo.editorContainer?boxInfo.editorContainer:null;appendContentCssFromSettings(editor);if(editor.inline){return initContentBody(editor);}else{return init$1(editor,boxInfo);}};var DOM$3=DOMUtils.DOM;var hasSkipLoadPrefix=function(name){return name.charAt(0)==='-';};var loadLanguage=function(scriptLoader,editor){var languageCode=getLanguageCode(editor);var languageUrl=getLanguageUrl(editor);if(I18n.hasCode(languageCode)===false&&languageCode!=='en'){var url_1=languageUrl!==''?languageUrl:editor.editorManager.baseURL+'/langs/'+languageCode+'.js';scriptLoader.add(url_1,noop,undefined,function(){languageLoadError(editor,url_1,languageCode);});}};var loadTheme=function(scriptLoader,editor,suffix,callback){var theme=getTheme(editor);if(isString$1(theme)){if(!hasSkipLoadPrefix(theme)&&!has$2(ThemeManager.urls,theme)){var themeUrl=getThemeUrl(editor);if(themeUrl){ThemeManager.load(theme,editor.documentBaseURI.toAbsolute(themeUrl));}else{ThemeManager.load(theme,'themes/'+theme+'/theme'+suffix+'.js');}}scriptLoader.loadQueue(function(){ThemeManager.waitFor(theme,callback);});}else{callback();}};var getIconsUrlMetaFromUrl=function(editor){return Optional.from(getIconsUrl(editor)).filter(function(url){return url.length>0;}).map(function(url){return{url:url,name:Optional.none()};});};var getIconsUrlMetaFromName=function(editor,name,suffix){return Optional.from(name).filter(function(name){return name.length>0&&!IconManager.has(name);}).map(function(name){return{url:editor.editorManager.baseURL+'/icons/'+name+'/icons'+suffix+'.js',name:Optional.some(name)};});};var loadIcons=function(scriptLoader,editor,suffix){var defaultIconsUrl=getIconsUrlMetaFromName(editor,'default',suffix);var customIconsUrl=getIconsUrlMetaFromUrl(editor).orThunk(function(){return getIconsUrlMetaFromName(editor,getIconPackName(editor),'');});each$k(cat([defaultIconsUrl,customIconsUrl]),function(urlMeta){scriptLoader.add(urlMeta.url,noop,undefined,function(){iconsLoadError(editor,urlMeta.url,urlMeta.name.getOrUndefined());});});};var loadPlugins=function(editor,suffix){Tools.each(getExternalPlugins$1(editor),function(url,name){PluginManager.load(name,url,noop,undefined,function(){pluginLoadError(editor,url,name);});editor.settings.plugins+=' '+name;});Tools.each(getPlugins(editor).split(/[ ,]/),function(plugin){plugin=Tools.trim(plugin);if(plugin&&!PluginManager.urls[plugin]){if(hasSkipLoadPrefix(plugin)){plugin=plugin.substr(1,plugin.length);var dependencies=PluginManager.dependencies(plugin);Tools.each(dependencies,function(depPlugin){var defaultSettings={prefix:'plugins/',resource:depPlugin,suffix:'/plugin'+suffix+'.js'};var dep=PluginManager.createUrl(defaultSettings,depPlugin);PluginManager.load(dep.resource,dep,noop,undefined,function(){pluginLoadError(editor,dep.prefix+dep.resource+dep.suffix,dep.resource);});});}else{var url_2={prefix:'plugins/',resource:plugin,suffix:'/plugin'+suffix+'.js'};PluginManager.load(plugin,url_2,noop,undefined,function(){pluginLoadError(editor,url_2.prefix+url_2.resource+url_2.suffix,plugin);});}}});};var loadScripts=function(editor,suffix){var scriptLoader=ScriptLoader.ScriptLoader;loadTheme(scriptLoader,editor,suffix,function(){loadLanguage(scriptLoader,editor);loadIcons(scriptLoader,editor,suffix);loadPlugins(editor,suffix);scriptLoader.loadQueue(function(){if(!editor.removed){init(editor);}},editor,function(){if(!editor.removed){init(editor);}});});};var getStyleSheetLoader=function(element,editor){return instance.forElement(element,{contentCssCors:hasContentCssCors(editor),referrerPolicy:getReferrerPolicy(editor)});};var render=function(editor){var id=editor.id;I18n.setCode(getLanguageCode(editor));var readyHandler=function(){DOM$3.unbind(window,'ready',readyHandler);editor.render();};if(!EventUtils.Event.domLoaded){DOM$3.bind(window,'ready',readyHandler);return;}if(!editor.getElement()){return;}if(!Env.contentEditable){return;}var element=SugarElement.fromDom(editor.getElement());var snapshot=clone$3(element);editor.on('remove',function(){eachr(element.dom.attributes,function(attr){return remove$6(element,attr.name);});setAll$1(element,snapshot);});editor.ui.styleSheetLoader=getStyleSheetLoader(element,editor);if(!isInline(editor)){editor.orgVisibility=editor.getElement().style.visibility;editor.getElement().style.visibility='hidden';}else{editor.inline=true;}var form=editor.getElement().form||DOM$3.getParent(id,'form');if(form){editor.formElement=form;if(hasHiddenInput(editor)&&!isTextareaOrInput(editor.getElement())){DOM$3.insertAfter(DOM$3.create('input',{type:'hidden',name:id}),id);editor.hasHiddenInput=true;}editor.formEventDelegate=function(e){editor.fire(e.type,e);};DOM$3.bind(form,'submit reset',editor.formEventDelegate);editor.on('reset',function(){editor.resetContent();});if(shouldPatchSubmit(editor)&&!form.submit.nodeType&&!form.submit.length&&!form._mceOldSubmit){form._mceOldSubmit=form.submit;form.submit=function(){editor.editorManager.triggerSave();editor.setDirty(false);return form._mceOldSubmit(form);};}}editor.windowManager=WindowManager(editor);editor.notificationManager=NotificationManager(editor);if(isEncodingXml(editor)){editor.on('GetContent',function(e){if(e.save){e.content=DOM$3.encode(e.content);}});}if(shouldAddFormSubmitTrigger(editor)){editor.on('submit',function(){if(editor.initialized){editor.save();}});}if(shouldAddUnloadTrigger(editor)){editor._beforeUnload=function(){if(editor.initialized&&!editor.destroyed&&!editor.isHidden()){editor.save({format:'raw',no_events:true,set_dirty:false});}};editor.editorManager.on('BeforeUnload',editor._beforeUnload);}editor.editorManager.add(editor);loadScripts(editor,editor.suffix);};var addVisual=function(editor,elm){return addVisual$1(editor,elm);};var legacyPropNames={'font-size':'size','font-family':'face'};var getSpecifiedFontProp=function(propName,rootElm,elm){var getProperty=function(elm){return getRaw(elm,propName).orThunk(function(){if(name(elm)==='font'){return get$9(legacyPropNames,propName).bind(function(legacyPropName){return getOpt(elm,legacyPropName);});}else{return Optional.none();}});};var isRoot=function(elm){return eq(SugarElement.fromDom(rootElm),elm);};return closest$1(SugarElement.fromDom(elm),function(elm){return getProperty(elm);},isRoot);};var normalizeFontFamily=function(fontFamily){return fontFamily.replace(/[\\'\\\"\\\\]/g,'').replace(/,\\s+/g,',');};var getComputedFontProp=function(propName,elm){return Optional.from(DOMUtils.DOM.getStyle(elm,propName,true));};var getFontProp=function(propName){return function(rootElm,elm){return Optional.from(elm).map(SugarElement.fromDom).filter(isElement$6).bind(function(element){return getSpecifiedFontProp(propName,rootElm,element.dom).or(getComputedFontProp(propName,element.dom));}).getOr('');};};var getFontSize=getFontProp('font-size');var getFontFamily=compose(normalizeFontFamily,getFontProp('font-family'));var findFirstCaretElement=function(editor){return firstPositionIn(editor.getBody()).map(function(caret){var container=caret.container();return isText$7(container)?container.parentNode:container;});};var getCaretElement=function(editor){return Optional.from(editor.selection.getRng()).bind(function(rng){var root=editor.getBody();var atStartOfNode=rng.startContainer===root&&rng.startOffset===0;return atStartOfNode?Optional.none():Optional.from(editor.selection.getStart(true));});};var bindRange=function(editor,binder){return getCaretElement(editor).orThunk(curry(findFirstCaretElement,editor)).map(SugarElement.fromDom).filter(isElement$6).bind(binder);};var mapRange=function(editor,mapper){return bindRange(editor,compose1(Optional.some,mapper));};var fromFontSizeNumber=function(editor,value){if(/^[0-9.]+$/.test(value)){var fontSizeNumber=parseInt(value,10);if(fontSizeNumber>=1&&fontSizeNumber<=7){var fontSizes=getFontStyleValues(editor);var fontClasses=getFontSizeClasses(editor);if(fontClasses){return fontClasses[fontSizeNumber-1]||value;}else{return fontSizes[fontSizeNumber-1]||value;}}else{return value;}}else{return value;}};var normalizeFontNames=function(font){var fonts=font.split(/\\s*,\\s*/);return map$3(fonts,function(font){if(font.indexOf(' ')!==-1&&!(startsWith(font,'\"')||startsWith(font,'\\''))){return'\\''+font+'\\'';}else{return font;}}).join(',');};var fontNameAction=function(editor,value){var font=fromFontSizeNumber(editor,value);editor.formatter.toggle('fontname',{value:normalizeFontNames(font)});editor.nodeChanged();};var fontNameQuery=function(editor){return mapRange(editor,function(elm){return getFontFamily(editor.getBody(),elm.dom);}).getOr('');};var fontSizeAction=function(editor,value){editor.formatter.toggle('fontsize',{value:fromFontSizeNumber(editor,value)});editor.nodeChanged();};var fontSizeQuery=function(editor){return mapRange(editor,function(elm){return getFontSize(editor.getBody(),elm.dom);}).getOr('');};var lineHeightQuery=function(editor){return mapRange(editor,function(elm){var root=SugarElement.fromDom(editor.getBody());var specifiedStyle=closest$1(elm,function(elm){return getRaw(elm,'line-height');},curry(eq,root));var computedStyle=function(){var lineHeight=parseFloat(get$5(elm,'line-height'));var fontSize=parseFloat(get$5(elm,'font-size'));return String(lineHeight/fontSize);};return specifiedStyle.getOrThunk(computedStyle);}).getOr('');};var lineHeightAction=function(editor,lineHeight){editor.formatter.toggle('lineheight',{value:String(lineHeight)});editor.nodeChanged();};var processValue=function(value){if(typeof value!=='string'){var details=Tools.extend({paste:value.paste,data:{paste:value.paste}},value);return{content:value.content,details:details};}return{content:value,details:{}};};var insertAtCaret=function(editor,value){var result=processValue(value);insertContent(editor,result.content,result.details);};var each$4=Tools.each;var map=Tools.map,inArray=Tools.inArray;var EditorCommands=function(){function EditorCommands(editor){this.commands={state:{},exec:{},value:{}};this.editor=editor;this.setupCommands(editor);}EditorCommands.prototype.execCommand=function(command,ui,value,args){var func,state=false;var self=this;if(self.editor.removed){return;}if(command.toLowerCase()!=='mcefocus'){if(!/^(mceAddUndoLevel|mceEndUndoLevel|mceBeginUndoLevel|mceRepaint)$/.test(command)&&(!args||!args.skip_focus)){self.editor.focus();}else{restore(self.editor);}}args=self.editor.fire('BeforeExecCommand',{command:command,ui:ui,value:value});if(args.isDefaultPrevented()){return false;}var customCommand=command.toLowerCase();if(func=self.commands.exec[customCommand]){func(customCommand,ui,value);self.editor.fire('ExecCommand',{command:command,ui:ui,value:value});return true;}each$4(this.editor.plugins,function(p){if(p.execCommand&&p.execCommand(command,ui,value)){self.editor.fire('ExecCommand',{command:command,ui:ui,value:value});state=true;return false;}});if(state){return state;}if(self.editor.theme&&self.editor.theme.execCommand&&self.editor.theme.execCommand(command,ui,value)){self.editor.fire('ExecCommand',{command:command,ui:ui,value:value});return true;}try{state=self.editor.getDoc().execCommand(command,ui,value);}catch(ex){}if(state){self.editor.fire('ExecCommand',{command:command,ui:ui,value:value});return true;}return false;};EditorCommands.prototype.queryCommandState=function(command){var func;if(this.editor.quirks.isHidden()||this.editor.removed){return;}command=command.toLowerCase();if(func=this.commands.state[command]){return func(command);}try{return this.editor.getDoc().queryCommandState(command);}catch(ex){}return false;};EditorCommands.prototype.queryCommandValue=function(command){var func;if(this.editor.quirks.isHidden()||this.editor.removed){return;}command=command.toLowerCase();if(func=this.commands.value[command]){return func(command);}try{return this.editor.getDoc().queryCommandValue(command);}catch(ex){}};EditorCommands.prototype.addCommands=function(commandList,type){if(type===void 0){type='exec';}var self=this;each$4(commandList,function(callback,command){each$4(command.toLowerCase().split(','),function(command){self.commands[type][command]=callback;});});};EditorCommands.prototype.addCommand=function(command,callback,scope){var _this=this;command=command.toLowerCase();this.commands.exec[command]=function(command,ui,value,args){return callback.call(scope||_this.editor,ui,value,args);};};EditorCommands.prototype.queryCommandSupported=function(command){command=command.toLowerCase();if(this.commands.exec[command]){return true;}try{return this.editor.getDoc().queryCommandSupported(command);}catch(ex){}return false;};EditorCommands.prototype.addQueryStateHandler=function(command,callback,scope){var _this=this;command=command.toLowerCase();this.commands.state[command]=function(){return callback.call(scope||_this.editor);};};EditorCommands.prototype.addQueryValueHandler=function(command,callback,scope){var _this=this;command=command.toLowerCase();this.commands.value[command]=function(){return callback.call(scope||_this.editor);};};EditorCommands.prototype.hasCustomCommand=function(command){command=command.toLowerCase();return!!this.commands.exec[command];};EditorCommands.prototype.execNativeCommand=function(command,ui,value){if(ui===undefined){ui=false;}if(value===undefined){value=null;}return this.editor.getDoc().execCommand(command,ui,value);};EditorCommands.prototype.isFormatMatch=function(name){return this.editor.formatter.match(name);};EditorCommands.prototype.toggleFormat=function(name,value){this.editor.formatter.toggle(name,value);this.editor.nodeChanged();};EditorCommands.prototype.storeSelection=function(type){this.selectionBookmark=this.editor.selection.getBookmark(type);};EditorCommands.prototype.restoreSelection=function(){this.editor.selection.moveToBookmark(this.selectionBookmark);};EditorCommands.prototype.setupCommands=function(editor){var self=this;this.addCommands({'mceResetDesignMode,mceBeginUndoLevel':noop,'mceEndUndoLevel,mceAddUndoLevel':function(){editor.undoManager.add();},'mceFocus':function(_command,_ui,value){focus(editor,value);},'Cut,Copy,Paste':function(command){var doc=editor.getDoc();var failed;try{self.execNativeCommand(command);}catch(ex){failed=true;}if(command==='paste'&&!doc.queryCommandEnabled(command)){failed=true;}if(failed||!doc.queryCommandSupported(command)){var msg=editor.translate('Your browser doesn\\'t support direct access to the clipboard. '+'Please use the Ctrl+X/C/V keyboard shortcuts instead.');if(Env.mac){msg=msg.replace(/Ctrl\\+/g,'\\u2318+');}editor.notificationManager.open({text:msg,type:'error'});}},'unlink':function(){if(editor.selection.isCollapsed()){var elm=editor.dom.getParent(editor.selection.getStart(),'a');if(elm){editor.dom.remove(elm,true);}return;}editor.formatter.remove('link');},'JustifyLeft,JustifyCenter,JustifyRight,JustifyFull,JustifyNone':function(command){var align=command.substring(7);if(align==='full'){align='justify';}each$4('left,center,right,justify'.split(','),function(name){if(align!==name){editor.formatter.remove('align'+name);}});if(align!=='none'){self.toggleFormat('align'+align);}},'InsertUnorderedList,InsertOrderedList':function(command){var listParent;self.execNativeCommand(command);var listElm=editor.dom.getParent(editor.selection.getNode(),'ol,ul');if(listElm){listParent=listElm.parentNode;if(/^(H[1-6]|P|ADDRESS|PRE)$/.test(listParent.nodeName)){self.storeSelection();editor.dom.split(listParent,listElm);self.restoreSelection();}}},'Bold,Italic,Underline,Strikethrough,Superscript,Subscript':function(command){self.toggleFormat(command);},'ForeColor,HiliteColor':function(command,ui,value){self.toggleFormat(command,{value:value});},'FontName':function(command,ui,value){fontNameAction(editor,value);},'FontSize':function(command,ui,value){fontSizeAction(editor,value);},'LineHeight':function(command,ui,value){lineHeightAction(editor,value);},'Lang':function(command,ui,lang){self.toggleFormat(command,{value:lang.code,customValue:lang.customCode});},'RemoveFormat':function(command){editor.formatter.remove(command);},'mceBlockQuote':function(){self.toggleFormat('blockquote');},'FormatBlock':function(command,ui,value){return self.toggleFormat(value||'p');},'mceCleanup':function(){var bookmark=editor.selection.getBookmark();editor.setContent(editor.getContent());editor.selection.moveToBookmark(bookmark);},'mceRemoveNode':function(command,ui,value){var node=value||editor.selection.getNode();if(node!==editor.getBody()){self.storeSelection();editor.dom.remove(node,true);self.restoreSelection();}},'mceSelectNodeDepth':function(command,ui,value){var counter=0;editor.dom.getParent(editor.selection.getNode(),function(node){if(node.nodeType===1&&counter++===value){editor.selection.select(node);return false;}},editor.getBody());},'mceSelectNode':function(command,ui,value){editor.selection.select(value);},'mceInsertContent':function(command,ui,value){insertAtCaret(editor,value);},'mceInsertRawHTML':function(command,ui,value){editor.selection.setContent('tiny_mce_marker');var content=editor.getContent();editor.setContent(content.replace(/tiny_mce_marker/g,function(){return value;}));},'mceInsertNewLine':function(command,ui,value){insert(editor,value);},'mceToggleFormat':function(command,ui,value){self.toggleFormat(value);},'mceSetContent':function(command,ui,value){editor.setContent(value);},'Indent,Outdent':function(command){handle(editor,command);},'mceRepaint':noop,'InsertHorizontalRule':function(){editor.execCommand('mceInsertContent',false,'<hr />');},'mceToggleVisualAid':function(){editor.hasVisual=!editor.hasVisual;editor.addVisual();},'mceReplaceContent':function(command,ui,value){editor.execCommand('mceInsertContent',false,value.replace(/\\{\\$selection\\}/g,editor.selection.getContent({format:'text'})));},'mceInsertLink':function(command,ui,value){if(typeof value==='string'){value={href:value};}var anchor=editor.dom.getParent(editor.selection.getNode(),'a');value.href=value.href.replace(/ /g,'%20');if(!anchor||!value.href){editor.formatter.remove('link');}if(value.href){editor.formatter.apply('link',value,anchor);}},'selectAll':function(){var editingHost=editor.dom.getParent(editor.selection.getStart(),isContentEditableTrue$4);if(editingHost){var rng=editor.dom.createRng();rng.selectNodeContents(editingHost);editor.selection.setRng(rng);}},'mceNewDocument':function(){editor.setContent('');},'InsertLineBreak':function(command,ui,value){insert$1(editor,value);return true;}});var alignStates=function(name){return function(){var selection=editor.selection;var nodes=selection.isCollapsed()?[editor.dom.getParent(selection.getNode(),editor.dom.isBlock)]:selection.getSelectedBlocks();var matches=map(nodes,function(node){return!!editor.formatter.matchNode(node,name);});return inArray(matches,true)!==-1;};};self.addCommands({'JustifyLeft':alignStates('alignleft'),'JustifyCenter':alignStates('aligncenter'),'JustifyRight':alignStates('alignright'),'JustifyFull':alignStates('alignjustify'),'Bold,Italic,Underline,Strikethrough,Superscript,Subscript':function(command){return self.isFormatMatch(command);},'mceBlockQuote':function(){return self.isFormatMatch('blockquote');},'Outdent':function(){return canOutdent(editor);},'InsertUnorderedList,InsertOrderedList':function(command){var list=editor.dom.getParent(editor.selection.getNode(),'ul,ol');return list&&(command==='insertunorderedlist'&&list.tagName==='UL'||command==='insertorderedlist'&&list.tagName==='OL');}},'state');self.addCommands({Undo:function(){editor.undoManager.undo();},Redo:function(){editor.undoManager.redo();}});self.addQueryValueHandler('FontName',function(){return fontNameQuery(editor);},this);self.addQueryValueHandler('FontSize',function(){return fontSizeQuery(editor);},this);self.addQueryValueHandler('LineHeight',function(){return lineHeightQuery(editor);},this);};return EditorCommands;}();var internalContentEditableAttr='data-mce-contenteditable';var toggleClass=function(elm,cls,state){if(has(elm,cls)&&state===false){remove$3(elm,cls);}else if(state){add$1(elm,cls);}};var setEditorCommandState=function(editor,cmd,state){try{editor.getDoc().execCommand(cmd,false,String(state));}catch(ex){}};var setContentEditable=function(elm,state){elm.dom.contentEditable=state?'true':'false';};var switchOffContentEditableTrue=function(elm){each$k(descendants(elm,'*[contenteditable=\"true\"]'),function(elm){set$1(elm,internalContentEditableAttr,'true');setContentEditable(elm,false);});};var switchOnContentEditableTrue=function(elm){each$k(descendants(elm,'*['+internalContentEditableAttr+'=\"true\"]'),function(elm){remove$6(elm,internalContentEditableAttr);setContentEditable(elm,true);});};var removeFakeSelection=function(editor){Optional.from(editor.selection.getNode()).each(function(elm){elm.removeAttribute('data-mce-selected');});};var restoreFakeSelection=function(editor){editor.selection.setRng(editor.selection.getRng());};var toggleReadOnly=function(editor,state){var body=SugarElement.fromDom(editor.getBody());toggleClass(body,'mce-content-readonly',state);if(state){editor.selection.controlSelection.hideResizeRect();editor._selectionOverrides.hideFakeCaret();removeFakeSelection(editor);editor.readonly=true;setContentEditable(body,false);switchOffContentEditableTrue(body);}else{editor.readonly=false;setContentEditable(body,true);switchOnContentEditableTrue(body);setEditorCommandState(editor,'StyleWithCSS',false);setEditorCommandState(editor,'enableInlineTableEditing',false);setEditorCommandState(editor,'enableObjectResizing',false);if(hasEditorOrUiFocus(editor)){editor.focus();}restoreFakeSelection(editor);editor.nodeChanged();}};var isReadOnly=function(editor){return editor.readonly;};var registerFilters=function(editor){editor.parser.addAttributeFilter('contenteditable',function(nodes){if(isReadOnly(editor)){each$k(nodes,function(node){node.attr(internalContentEditableAttr,node.attr('contenteditable'));node.attr('contenteditable','false');});}});editor.serializer.addAttributeFilter(internalContentEditableAttr,function(nodes){if(isReadOnly(editor)){each$k(nodes,function(node){node.attr('contenteditable',node.attr(internalContentEditableAttr));});}});editor.serializer.addTempAttr(internalContentEditableAttr);};var registerReadOnlyContentFilters=function(editor){if(editor.serializer){registerFilters(editor);}else{editor.on('PreInit',function(){registerFilters(editor);});}};var isClickEvent=function(e){return e.type==='click';};var getAnchorHrefOpt=function(editor,elm){var isRoot=function(elm){return eq(elm,SugarElement.fromDom(editor.getBody()));};return closest$2(elm,'a',isRoot).bind(function(a){return getOpt(a,'href');});};var processReadonlyEvents=function(editor,e){if(isClickEvent(e)&&!VK.metaKeyPressed(e)){var elm=SugarElement.fromDom(e.target);getAnchorHrefOpt(editor,elm).each(function(href){e.preventDefault();if(/^#/.test(href)){var targetEl=editor.dom.select(href+',[name=\"'+removeLeading(href,'#')+'\"]');if(targetEl.length){editor.selection.scrollIntoView(targetEl[0],true);}}else{window.open(href,'_blank','rel=noopener noreferrer,menubar=yes,toolbar=yes,location=yes,status=yes,resizable=yes,scrollbars=yes');}});}};var registerReadOnlySelectionBlockers=function(editor){editor.on('ShowCaret',function(e){if(isReadOnly(editor)){e.preventDefault();}});editor.on('ObjectSelected',function(e){if(isReadOnly(editor)){e.preventDefault();}});};var nativeEvents=Tools.makeMap('focus blur focusin focusout click dblclick mousedown mouseup mousemove mouseover beforepaste paste cut copy selectionchange '+'mouseout mouseenter mouseleave wheel keydown keypress keyup input beforeinput contextmenu dragstart dragend dragover '+'draggesture dragdrop drop drag submit '+'compositionstart compositionend compositionupdate touchstart touchmove touchend touchcancel',' ');var EventDispatcher=function(){function EventDispatcher(settings){this.bindings={};this.settings=settings||{};this.scope=this.settings.scope||this;this.toggleEvent=this.settings.toggleEvent||never;}EventDispatcher.isNative=function(name){return!!nativeEvents[name.toLowerCase()];};EventDispatcher.prototype.fire=function(name,args){var lcName=name.toLowerCase();var event=normalize$3(lcName,args||{},this.scope);if(this.settings.beforeFire){this.settings.beforeFire(event);}var handlers=this.bindings[lcName];if(handlers){for(var i=0,l=handlers.length;i<l;i++){var callback=handlers[i];if(callback.removed){continue;}if(callback.once){this.off(lcName,callback.func);}if(event.isImmediatePropagationStopped()){return event;}if(callback.func.call(this.scope,event)===false){event.preventDefault();return event;}}}return event;};EventDispatcher.prototype.on=function(name,callback,prepend,extra){if(callback===false){callback=never;}if(callback){var wrappedCallback={func:callback,removed:false};if(extra){Tools.extend(wrappedCallback,extra);}var names=name.toLowerCase().split(' ');var i=names.length;while(i--){var currentName=names[i];var handlers=this.bindings[currentName];if(!handlers){handlers=[];this.toggleEvent(currentName,true);}if(prepend){handlers=__spreadArray([wrappedCallback],handlers,true);}else{handlers=__spreadArray(__spreadArray([],handlers,true),[wrappedCallback],false);}this.bindings[currentName]=handlers;}}return this;};EventDispatcher.prototype.off=function(name,callback){var _this=this;if(name){var names=name.toLowerCase().split(' ');var i=names.length;while(i--){var currentName=names[i];var handlers=this.bindings[currentName];if(!currentName){each$j(this.bindings,function(_value,bindingName){_this.toggleEvent(bindingName,false);delete _this.bindings[bindingName];});return this;}if(handlers){if(!callback){handlers.length=0;}else{var filteredHandlers=partition(handlers,function(handler){return handler.func===callback;});handlers=filteredHandlers.fail;this.bindings[currentName]=handlers;each$k(filteredHandlers.pass,function(handler){handler.removed=true;});}if(!handlers.length){this.toggleEvent(name,false);delete this.bindings[currentName];}}}}else{each$j(this.bindings,function(_value,name){_this.toggleEvent(name,false);});this.bindings={};}return this;};EventDispatcher.prototype.once=function(name,callback,prepend){return this.on(name,callback,prepend,{once:true});};EventDispatcher.prototype.has=function(name){name=name.toLowerCase();return!(!this.bindings[name]||this.bindings[name].length===0);};return EventDispatcher;}();var getEventDispatcher=function(obj){if(!obj._eventDispatcher){obj._eventDispatcher=new EventDispatcher({scope:obj,toggleEvent:function(name,state){if(EventDispatcher.isNative(name)&&obj.toggleNativeEvent){obj.toggleNativeEvent(name,state);}}});}return obj._eventDispatcher;};var Observable={fire:function(name,args,bubble){var self=this;if(self.removed&&name!=='remove'&&name!=='detach'){return args;}var dispatcherArgs=getEventDispatcher(self).fire(name,args);if(bubble!==false&&self.parent){var parent_1=self.parent();while(parent_1&&!dispatcherArgs.isPropagationStopped()){parent_1.fire(name,dispatcherArgs,false);parent_1=parent_1.parent();}}return dispatcherArgs;},on:function(name,callback,prepend){return getEventDispatcher(this).on(name,callback,prepend);},off:function(name,callback){return getEventDispatcher(this).off(name,callback);},once:function(name,callback){return getEventDispatcher(this).once(name,callback);},hasEventListeners:function(name){return getEventDispatcher(this).has(name);}};var DOM$2=DOMUtils.DOM;var customEventRootDelegates;var getEventTarget=function(editor,eventName){if(eventName==='selectionchange'){return editor.getDoc();}if(!editor.inline&&/^mouse|touch|click|contextmenu|drop|dragover|dragend/.test(eventName)){return editor.getDoc().documentElement;}var eventRoot=getEventRoot(editor);if(eventRoot){if(!editor.eventRoot){editor.eventRoot=DOM$2.select(eventRoot)[0];}return editor.eventRoot;}return editor.getBody();};var isListening=function(editor){return!editor.hidden&&!isReadOnly(editor);};var fireEvent=function(editor,eventName,e){if(isListening(editor)){editor.fire(eventName,e);}else if(isReadOnly(editor)){processReadonlyEvents(editor,e);}};var bindEventDelegate=function(editor,eventName){var delegate;if(!editor.delegates){editor.delegates={};}if(editor.delegates[eventName]||editor.removed){return;}var eventRootElm=getEventTarget(editor,eventName);if(getEventRoot(editor)){if(!customEventRootDelegates){customEventRootDelegates={};editor.editorManager.on('removeEditor',function(){if(!editor.editorManager.activeEditor){if(customEventRootDelegates){each$j(customEventRootDelegates,function(_value,name){editor.dom.unbind(getEventTarget(editor,name));});customEventRootDelegates=null;}}});}if(customEventRootDelegates[eventName]){return;}delegate=function(e){var target=e.target;var editors=editor.editorManager.get();var i=editors.length;while(i--){var body=editors[i].getBody();if(body===target||DOM$2.isChildOf(target,body)){fireEvent(editors[i],eventName,e);}}};customEventRootDelegates[eventName]=delegate;DOM$2.bind(eventRootElm,eventName,delegate);}else{delegate=function(e){fireEvent(editor,eventName,e);};DOM$2.bind(eventRootElm,eventName,delegate);editor.delegates[eventName]=delegate;}};var EditorObservable=__assign(__assign({},Observable),{bindPendingEventDelegates:function(){var self=this;Tools.each(self._pendingNativeEvents,function(name){bindEventDelegate(self,name);});},toggleNativeEvent:function(name,state){var self=this;if(name==='focus'||name==='blur'){return;}if(self.removed){return;}if(state){if(self.initialized){bindEventDelegate(self,name);}else{if(!self._pendingNativeEvents){self._pendingNativeEvents=[name];}else{self._pendingNativeEvents.push(name);}}}else if(self.initialized){self.dom.unbind(getEventTarget(self,name),name,self.delegates[name]);delete self.delegates[name];}},unbindAllNativeEvents:function(){var self=this;var body=self.getBody();var dom=self.dom;if(self.delegates){each$j(self.delegates,function(value,name){self.dom.unbind(getEventTarget(self,name),name,value);});delete self.delegates;}if(!self.inline&&body&&dom){body.onload=null;dom.unbind(self.getWin());dom.unbind(self.getDoc());}if(dom){dom.unbind(body);dom.unbind(self.getContainer());}}});var defaultModes=['design','readonly'];var switchToMode=function(editor,activeMode,availableModes,mode){var oldMode=availableModes[activeMode.get()];var newMode=availableModes[mode];try{newMode.activate();}catch(e){console.error('problem while activating editor mode '+mode+':',e);return;}oldMode.deactivate();if(oldMode.editorReadOnly!==newMode.editorReadOnly){toggleReadOnly(editor,newMode.editorReadOnly);}activeMode.set(mode);fireSwitchMode(editor,mode);};var setMode=function(editor,availableModes,activeMode,mode){if(mode===activeMode.get()){return;}else if(!has$2(availableModes,mode)){throw new Error('Editor mode \\''+mode+'\\' is invalid');}if(editor.initialized){switchToMode(editor,activeMode,availableModes,mode);}else{editor.on('init',function(){return switchToMode(editor,activeMode,availableModes,mode);});}};var registerMode=function(availableModes,mode,api){var _a;if(contains$3(defaultModes,mode)){throw new Error('Cannot override default mode '+mode);}return __assign(__assign({},availableModes),(_a={},_a[mode]=__assign(__assign({},api),{deactivate:function(){try{api.deactivate();}catch(e){console.error('problem while deactivating editor mode '+mode+':',e);}}}),_a));};var create$4=function(editor){var activeMode=Cell('design');var availableModes=Cell({design:{activate:noop,deactivate:noop,editorReadOnly:false},readonly:{activate:noop,deactivate:noop,editorReadOnly:true}});registerReadOnlyContentFilters(editor);registerReadOnlySelectionBlockers(editor);return{isReadOnly:function(){return isReadOnly(editor);},set:function(mode){return setMode(editor,availableModes.get(),activeMode,mode);},get:function(){return activeMode.get();},register:function(mode,api){availableModes.set(registerMode(availableModes.get(),mode,api));}};};var each$3=Tools.each,explode$1=Tools.explode;var keyCodeLookup={f1:112,f2:113,f3:114,f4:115,f5:116,f6:117,f7:118,f8:119,f9:120,f10:121,f11:122,f12:123};var modifierNames=Tools.makeMap('alt,ctrl,shift,meta,access');var parseShortcut=function(pattern){var key;var shortcut={};each$3(explode$1(pattern.toLowerCase(),'+'),function(value){if(value in modifierNames){shortcut[value]=true;}else{if(/^[0-9]{2,}$/.test(value)){shortcut.keyCode=parseInt(value,10);}else{shortcut.charCode=value.charCodeAt(0);shortcut.keyCode=keyCodeLookup[value]||value.toUpperCase().charCodeAt(0);}}});var id=[shortcut.keyCode];for(key in modifierNames){if(shortcut[key]){id.push(key);}else{shortcut[key]=false;}}shortcut.id=id.join(',');if(shortcut.access){shortcut.alt=true;if(Env.mac){shortcut.ctrl=true;}else{shortcut.shift=true;}}if(shortcut.meta){if(Env.mac){shortcut.meta=true;}else{shortcut.ctrl=true;shortcut.meta=false;}}return shortcut;};var Shortcuts=function(){function Shortcuts(editor){this.shortcuts={};this.pendingPatterns=[];this.editor=editor;var self=this;editor.on('keyup keypress keydown',function(e){if((self.hasModifier(e)||self.isFunctionKey(e))&&!e.isDefaultPrevented()){each$3(self.shortcuts,function(shortcut){if(self.matchShortcut(e,shortcut)){self.pendingPatterns=shortcut.subpatterns.slice(0);if(e.type==='keydown'){self.executeShortcutAction(shortcut);}return true;}});if(self.matchShortcut(e,self.pendingPatterns[0])){if(self.pendingPatterns.length===1){if(e.type==='keydown'){self.executeShortcutAction(self.pendingPatterns[0]);}}self.pendingPatterns.shift();}}});}Shortcuts.prototype.add=function(pattern,desc,cmdFunc,scope){var self=this;var func=self.normalizeCommandFunc(cmdFunc);each$3(explode$1(Tools.trim(pattern)),function(pattern){var shortcut=self.createShortcut(pattern,desc,func,scope);self.shortcuts[shortcut.id]=shortcut;});return true;};Shortcuts.prototype.remove=function(pattern){var shortcut=this.createShortcut(pattern);if(this.shortcuts[shortcut.id]){delete this.shortcuts[shortcut.id];return true;}return false;};Shortcuts.prototype.normalizeCommandFunc=function(cmdFunc){var self=this;var cmd=cmdFunc;if(typeof cmd==='string'){return function(){self.editor.execCommand(cmd,false,null);};}else if(Tools.isArray(cmd)){return function(){self.editor.execCommand(cmd[0],cmd[1],cmd[2]);};}else{return cmd;}};Shortcuts.prototype.createShortcut=function(pattern,desc,cmdFunc,scope){var shortcuts=Tools.map(explode$1(pattern,'>'),parseShortcut);shortcuts[shortcuts.length-1]=Tools.extend(shortcuts[shortcuts.length-1],{func:cmdFunc,scope:scope||this.editor});return Tools.extend(shortcuts[0],{desc:this.editor.translate(desc),subpatterns:shortcuts.slice(1)});};Shortcuts.prototype.hasModifier=function(e){return e.altKey||e.ctrlKey||e.metaKey;};Shortcuts.prototype.isFunctionKey=function(e){return e.type==='keydown'&&e.keyCode>=112&&e.keyCode<=123;};Shortcuts.prototype.matchShortcut=function(e,shortcut){if(!shortcut){return false;}if(shortcut.ctrl!==e.ctrlKey||shortcut.meta!==e.metaKey){return false;}if(shortcut.alt!==e.altKey||shortcut.shift!==e.shiftKey){return false;}if(e.keyCode===shortcut.keyCode||e.charCode&&e.charCode===shortcut.charCode){e.preventDefault();return true;}return false;};Shortcuts.prototype.executeShortcutAction=function(shortcut){return shortcut.func?shortcut.func.call(shortcut.scope):null;};return Shortcuts;}();var create$3=function(){var buttons={};var menuItems={};var popups={};var icons={};var contextMenus={};var contextToolbars={};var sidebars={};var add=function(collection,type){return function(name,spec){return collection[name.toLowerCase()]=__assign(__assign({},spec),{type:type});};};var addIcon=function(name,svgData){return icons[name.toLowerCase()]=svgData;};return{addButton:add(buttons,'button'),addGroupToolbarButton:add(buttons,'grouptoolbarbutton'),addToggleButton:add(buttons,'togglebutton'),addMenuButton:add(buttons,'menubutton'),addSplitButton:add(buttons,'splitbutton'),addMenuItem:add(menuItems,'menuitem'),addNestedMenuItem:add(menuItems,'nestedmenuitem'),addToggleMenuItem:add(menuItems,'togglemenuitem'),addAutocompleter:add(popups,'autocompleter'),addContextMenu:add(contextMenus,'contextmenu'),addContextToolbar:add(contextToolbars,'contexttoolbar'),addContextForm:add(contextToolbars,'contextform'),addSidebar:add(sidebars,'sidebar'),addIcon:addIcon,getAll:function(){return{buttons:buttons,menuItems:menuItems,icons:icons,popups:popups,contextMenus:contextMenus,contextToolbars:contextToolbars,sidebars:sidebars};}};};var registry=function(){var bridge=create$3();return{addAutocompleter:bridge.addAutocompleter,addButton:bridge.addButton,addContextForm:bridge.addContextForm,addContextMenu:bridge.addContextMenu,addContextToolbar:bridge.addContextToolbar,addIcon:bridge.addIcon,addMenuButton:bridge.addMenuButton,addMenuItem:bridge.addMenuItem,addNestedMenuItem:bridge.addNestedMenuItem,addSidebar:bridge.addSidebar,addSplitButton:bridge.addSplitButton,addToggleButton:bridge.addToggleButton,addGroupToolbarButton:bridge.addGroupToolbarButton,addToggleMenuItem:bridge.addToggleMenuItem,getAll:bridge.getAll};};var DOM$1=DOMUtils.DOM;var extend$3=Tools.extend,each$2=Tools.each;var resolve=Tools.resolve;var ie=Env.ie;var Editor=function(){function Editor(id,settings,editorManager){var _this=this;this.plugins={};this.contentCSS=[];this.contentStyles=[];this.loadedCSS={};this.isNotDirty=false;this.editorManager=editorManager;this.documentBaseUrl=editorManager.documentBaseURL;extend$3(this,EditorObservable);this.settings=getEditorSettings(this,id,this.documentBaseUrl,editorManager.defaultSettings,settings);if(this.settings.suffix){editorManager.suffix=this.settings.suffix;}this.suffix=editorManager.suffix;if(this.settings.base_url){editorManager._setBaseUrl(this.settings.base_url);}this.baseUri=editorManager.baseURI;if(this.settings.referrer_policy){ScriptLoader.ScriptLoader._setReferrerPolicy(this.settings.referrer_policy);DOMUtils.DOM.styleSheetLoader._setReferrerPolicy(this.settings.referrer_policy);}AddOnManager.languageLoad=this.settings.language_load;AddOnManager.baseURL=editorManager.baseURL;this.id=id;this.setDirty(false);this.documentBaseURI=new URI(this.settings.document_base_url,{base_uri:this.baseUri});this.baseURI=this.baseUri;this.inline=!!this.settings.inline;this.shortcuts=new Shortcuts(this);this.editorCommands=new EditorCommands(this);if(this.settings.cache_suffix){Env.cacheSuffix=this.settings.cache_suffix.replace(/^[\\?\\&]+/,'');}this.ui={registry:registry(),styleSheetLoader:undefined,show:noop,hide:noop,enable:noop,disable:noop,isDisabled:never};var self=this;var modeInstance=create$4(self);this.mode=modeInstance;this.setMode=modeInstance.set;editorManager.fire('SetupEditor',{editor:this});this.execCallback('setup',this);this.$=DomQuery.overrideDefaults(function(){return{context:_this.inline?_this.getBody():_this.getDoc(),element:_this.getBody()};});}Editor.prototype.render=function(){render(this);};Editor.prototype.focus=function(skipFocus){this.execCommand('mceFocus',false,skipFocus);};Editor.prototype.hasFocus=function(){return hasFocus(this);};Editor.prototype.execCallback=function(name){var x=[];for(var _i=1;_i<arguments.length;_i++){x[_i-1]=arguments[_i];}var self=this;var callback=self.settings[name],scope;if(!callback){return;}if(self.callbackLookup&&(scope=self.callbackLookup[name])){callback=scope.func;scope=scope.scope;}if(typeof callback==='string'){scope=callback.replace(/\\.\\w+$/,'');scope=scope?resolve(scope):0;callback=resolve(callback);self.callbackLookup=self.callbackLookup||{};self.callbackLookup[name]={func:callback,scope:scope};}return callback.apply(scope||self,x);};Editor.prototype.translate=function(text){return I18n.translate(text);};Editor.prototype.getParam=function(name,defaultVal,type){return getParam(this,name,defaultVal,type);};Editor.prototype.hasPlugin=function(name,loaded){var hasPlugin=contains$3(getPlugins(this).split(/[ ,]/),name);if(hasPlugin){return loaded?PluginManager.get(name)!==undefined:true;}else{return false;}};Editor.prototype.nodeChanged=function(args){this._nodeChangeDispatcher.nodeChanged(args);};Editor.prototype.addCommand=function(name,callback,scope){this.editorCommands.addCommand(name,callback,scope);};Editor.prototype.addQueryStateHandler=function(name,callback,scope){this.editorCommands.addQueryStateHandler(name,callback,scope);};Editor.prototype.addQueryValueHandler=function(name,callback,scope){this.editorCommands.addQueryValueHandler(name,callback,scope);};Editor.prototype.addShortcut=function(pattern,desc,cmdFunc,scope){this.shortcuts.add(pattern,desc,cmdFunc,scope);};Editor.prototype.execCommand=function(cmd,ui,value,args){return this.editorCommands.execCommand(cmd,ui,value,args);};Editor.prototype.queryCommandState=function(cmd){return this.editorCommands.queryCommandState(cmd);};Editor.prototype.queryCommandValue=function(cmd){return this.editorCommands.queryCommandValue(cmd);};Editor.prototype.queryCommandSupported=function(cmd){return this.editorCommands.queryCommandSupported(cmd);};Editor.prototype.show=function(){var self=this;if(self.hidden){self.hidden=false;if(self.inline){self.getBody().contentEditable='true';}else{DOM$1.show(self.getContainer());DOM$1.hide(self.id);}self.load();self.fire('show');}};Editor.prototype.hide=function(){var self=this,doc=self.getDoc();if(!self.hidden){if(ie&&doc&&!self.inline){doc.execCommand('SelectAll');}self.save();if(self.inline){self.getBody().contentEditable='false';if(self===self.editorManager.focusedEditor){self.editorManager.focusedEditor=null;}}else{DOM$1.hide(self.getContainer());DOM$1.setStyle(self.id,'display',self.orgDisplay);}self.hidden=true;self.fire('hide');}};Editor.prototype.isHidden=function(){return!!this.hidden;};Editor.prototype.setProgressState=function(state,time){this.fire('ProgressState',{state:state,time:time});};Editor.prototype.load=function(args){var self=this;var elm=self.getElement(),html;if(self.removed){return'';}if(elm){args=args||{};args.load=true;var value=isTextareaOrInput(elm)?elm.value:elm.innerHTML;html=self.setContent(value,args);args.element=elm;if(!args.no_events){self.fire('LoadContent',args);}args.element=elm=null;return html;}};Editor.prototype.save=function(args){var self=this;var elm=self.getElement(),html,form;if(!elm||!self.initialized||self.removed){return;}args=args||{};args.save=true;args.element=elm;html=args.content=self.getContent(args);if(!args.no_events){self.fire('SaveContent',args);}if(args.format==='raw'){self.fire('RawSaveContent',args);}html=args.content;if(!isTextareaOrInput(elm)){if(args.is_removing||!self.inline){elm.innerHTML=html;}if(form=DOM$1.getParent(self.id,'form')){each$2(form.elements,function(elm){if(elm.name===self.id){elm.value=html;return false;}});}}else{elm.value=html;}args.element=elm=null;if(args.set_dirty!==false){self.setDirty(false);}return html;};Editor.prototype.setContent=function(content,args){return setContent(this,content,args);};Editor.prototype.getContent=function(args){return getContent(this,args);};Editor.prototype.insertContent=function(content,args){if(args){content=extend$3({content:content},args);}this.execCommand('mceInsertContent',false,content);};Editor.prototype.resetContent=function(initialContent){if(initialContent===undefined){setContent(this,this.startContent,{format:'raw'});}else{setContent(this,initialContent);}this.undoManager.reset();this.setDirty(false);this.nodeChanged();};Editor.prototype.isDirty=function(){return!this.isNotDirty;};Editor.prototype.setDirty=function(state){var oldState=!this.isNotDirty;this.isNotDirty=!state;if(state&&state!==oldState){this.fire('dirty');}};Editor.prototype.getContainer=function(){var self=this;if(!self.container){self.container=DOM$1.get(self.editorContainer||self.id+'_parent');}return self.container;};Editor.prototype.getContentAreaContainer=function(){return this.contentAreaContainer;};Editor.prototype.getElement=function(){if(!this.targetElm){this.targetElm=DOM$1.get(this.id);}return this.targetElm;};Editor.prototype.getWin=function(){var self=this;var elm;if(!self.contentWindow){elm=self.iframeElement;if(elm){self.contentWindow=elm.contentWindow;}}return self.contentWindow;};Editor.prototype.getDoc=function(){var self=this;var win;if(!self.contentDocument){win=self.getWin();if(win){self.contentDocument=win.document;}}return self.contentDocument;};Editor.prototype.getBody=function(){var doc=this.getDoc();return this.bodyElement||(doc?doc.body:null);};Editor.prototype.convertURL=function(url,name,elm){var self=this,settings=self.settings;if(settings.urlconverter_callback){return self.execCallback('urlconverter_callback',url,elm,true,name);}if(!settings.convert_urls||elm&&elm.nodeName==='LINK'||url.indexOf('file:')===0||url.length===0){return url;}if(settings.relative_urls){return self.documentBaseURI.toRelative(url);}url=self.documentBaseURI.toAbsolute(url,settings.remove_script_host);return url;};Editor.prototype.addVisual=function(elm){addVisual(this,elm);};Editor.prototype.remove=function(){remove(this);};Editor.prototype.destroy=function(automatic){destroy(this,automatic);};Editor.prototype.uploadImages=function(callback){return this.editorUpload.uploadImages(callback);};Editor.prototype._scanForImages=function(){return this.editorUpload.scanForImages();};Editor.prototype.addButton=function(){throw new Error('editor.addButton has been removed in tinymce 5x, use editor.ui.registry.addButton or editor.ui.registry.addToggleButton or editor.ui.registry.addSplitButton instead');};Editor.prototype.addSidebar=function(){throw new Error('editor.addSidebar has been removed in tinymce 5x, use editor.ui.registry.addSidebar instead');};Editor.prototype.addMenuItem=function(){throw new Error('editor.addMenuItem has been removed in tinymce 5x, use editor.ui.registry.addMenuItem instead');};Editor.prototype.addContextToolbar=function(){throw new Error('editor.addContextToolbar has been removed in tinymce 5x, use editor.ui.registry.addContextToolbar instead');};return Editor;}();var DOM=DOMUtils.DOM;var explode=Tools.explode,each$1=Tools.each,extend$2=Tools.extend;var instanceCounter=0,boundGlobalEvents=false;var beforeUnloadDelegate;var legacyEditors=[];var editors=[];var isValidLegacyKey=function(id){return id!=='length';};var globalEventDelegate=function(e){var type=e.type;each$1(EditorManager.get(),function(editor){switch(type){case'scroll':editor.fire('ScrollWindow',e);break;case'resize':editor.fire('ResizeWindow',e);break;}});};var toggleGlobalEvents=function(state){if(state!==boundGlobalEvents){if(state){DomQuery(window).on('resize scroll',globalEventDelegate);}else{DomQuery(window).off('resize scroll',globalEventDelegate);}boundGlobalEvents=state;}};var removeEditorFromList=function(targetEditor){var oldEditors=editors;delete legacyEditors[targetEditor.id];for(var i=0;i<legacyEditors.length;i++){if(legacyEditors[i]===targetEditor){legacyEditors.splice(i,1);break;}}editors=filter$4(editors,function(editor){return targetEditor!==editor;});if(EditorManager.activeEditor===targetEditor){EditorManager.activeEditor=editors.length>0?editors[0]:null;}if(EditorManager.focusedEditor===targetEditor){EditorManager.focusedEditor=null;}return oldEditors.length!==editors.length;};var purgeDestroyedEditor=function(editor){if(editor&&editor.initialized&&!(editor.getContainer()||editor.getBody()).parentNode){removeEditorFromList(editor);editor.unbindAllNativeEvents();editor.destroy(true);editor.removed=true;editor=null;}return editor;};var isQuirksMode=document.compatMode!=='CSS1Compat';var EditorManager=__assign(__assign({},Observable),{baseURI:null,baseURL:null,defaultSettings:{},documentBaseURL:null,suffix:null,$:DomQuery,majorVersion:'5',minorVersion:'10.7',releaseDate:'2022-12-06',editors:legacyEditors,i18n:I18n,activeEditor:null,focusedEditor:null,settings:{},setup:function(){var self=this;var baseURL,documentBaseURL,suffix='';documentBaseURL=URI.getDocumentBaseUrl(document.location);if(/^[^:]+:\\/\\/\\/?[^\\/]+\\//.test(documentBaseURL)){documentBaseURL=documentBaseURL.replace(/[\\?#].*$/,'').replace(/[\\/\\\\][^\\/]+$/,'');if(!/[\\/\\\\]$/.test(documentBaseURL)){documentBaseURL+='/';}}var preInit=window.tinymce||window.tinyMCEPreInit;if(preInit){baseURL=preInit.base||preInit.baseURL;suffix=preInit.suffix;}else{var scripts=document.getElementsByTagName('script');for(var i=0;i<scripts.length;i++){var src=scripts[i].src||'';if(src===''){continue;}var srcScript=src.substring(src.lastIndexOf('/'));if(/tinymce(\\.full|\\.jquery|)(\\.min|\\.dev|)\\.js/.test(src)){if(srcScript.indexOf('.min')!==-1){suffix='.min';}baseURL=src.substring(0,src.lastIndexOf('/'));break;}}if(!baseURL&&document.currentScript){var src=document.currentScript.src;if(src.indexOf('.min')!==-1){suffix='.min';}baseURL=src.substring(0,src.lastIndexOf('/'));}}self.baseURL=new URI(documentBaseURL).toAbsolute(baseURL);self.documentBaseURL=documentBaseURL;self.baseURI=new URI(self.baseURL);self.suffix=suffix;setup$l(self);},overrideDefaults:function(defaultSettings){var baseUrl=defaultSettings.base_url;if(baseUrl){this._setBaseUrl(baseUrl);}var suffix=defaultSettings.suffix;if(defaultSettings.suffix){this.suffix=suffix;}this.defaultSettings=defaultSettings;var pluginBaseUrls=defaultSettings.plugin_base_urls;if(pluginBaseUrls!==undefined){each$j(pluginBaseUrls,function(pluginBaseUrl,pluginName){AddOnManager.PluginManager.urls[pluginName]=pluginBaseUrl;});}},init:function(settings){var self=this;var result;var invalidInlineTargets=Tools.makeMap('area base basefont br col frame hr img input isindex link meta param embed source wbr track '+'colgroup option table tbody tfoot thead tr th td script noscript style textarea video audio iframe object menu',' ');var isInvalidInlineTarget=function(settings,elm){return settings.inline&&elm.tagName.toLowerCase()in invalidInlineTargets;};var createId=function(elm){var id=elm.id;if(!id){id=get$9(elm,'name').filter(function(name){return!DOM.get(name);}).getOrThunk(DOM.uniqueId);elm.setAttribute('id',id);}return id;};var execCallback=function(name){var callback=settings[name];if(!callback){return;}return callback.apply(self,[]);};var hasClass=function(elm,className){return className.constructor===RegExp?className.test(elm.className):DOM.hasClass(elm,className);};var findTargets=function(settings){var targets=[];if(Env.browser.isIE()&&Env.browser.version.major<11){initError('TinyMCE does not support the browser you are using. For a list of supported'+' browsers please see: https://www.tinymce.com/docs/get-started/system-requirements/');return[];}else if(isQuirksMode){initError('Failed to initialize the editor as the document is not in standards mode. '+'TinyMCE requires standards mode.');return[];}if(settings.types){each$1(settings.types,function(type){targets=targets.concat(DOM.select(type.selector));});return targets;}else if(settings.selector){return DOM.select(settings.selector);}else if(settings.target){return[settings.target];}switch(settings.mode){case'exact':var l=settings.elements||'';if(l.length>0){each$1(explode(l),function(id){var elm=DOM.get(id);if(elm){targets.push(elm);}else{each$1(document.forms,function(f){each$1(f.elements,function(e){if(e.name===id){id='mce_editor_'+instanceCounter++;DOM.setAttrib(e,'id',id);targets.push(e);}});});}});}break;case'textareas':case'specific_textareas':each$1(DOM.select('textarea'),function(elm){if(settings.editor_deselector&&hasClass(elm,settings.editor_deselector)){return;}if(!settings.editor_selector||hasClass(elm,settings.editor_selector)){targets.push(elm);}});break;}return targets;};var provideResults=function(editors){result=editors;};var initEditors=function(){var initCount=0;var editors=[];var targets;var createEditor=function(id,settings,targetElm){var editor=new Editor(id,settings,self);editors.push(editor);editor.on('init',function(){if(++initCount===targets.length){provideResults(editors);}});editor.targetElm=editor.targetElm||targetElm;editor.render();};DOM.unbind(window,'ready',initEditors);execCallback('onpageload');targets=DomQuery.unique(findTargets(settings));if(settings.types){each$1(settings.types,function(type){Tools.each(targets,function(elm){if(DOM.is(elm,type.selector)){createEditor(createId(elm),extend$2({},settings,type),elm);return false;}return true;});});return;}Tools.each(targets,function(elm){purgeDestroyedEditor(self.get(elm.id));});targets=Tools.grep(targets,function(elm){return!self.get(elm.id);});if(targets.length===0){provideResults([]);}else{each$1(targets,function(elm){if(isInvalidInlineTarget(settings,elm)){initError('Could not initialize inline editor on invalid inline target element',elm);}else{createEditor(createId(elm),settings,elm);}});}};self.settings=settings;DOM.bind(window,'ready',initEditors);return new promiseObj(function(resolve){if(result){resolve(result);}else{provideResults=function(editors){resolve(editors);};}});},get:function(id){if(arguments.length===0){return editors.slice(0);}else if(isString$1(id)){return find$3(editors,function(editor){return editor.id===id;}).getOr(null);}else if(isNumber(id)){return editors[id]?editors[id]:null;}else{return null;}},add:function(editor){var self=this;var existingEditor=legacyEditors[editor.id];if(existingEditor===editor){return editor;}if(self.get(editor.id)===null){if(isValidLegacyKey(editor.id)){legacyEditors[editor.id]=editor;}legacyEditors.push(editor);editors.push(editor);}toggleGlobalEvents(true);self.activeEditor=editor;self.fire('AddEditor',{editor:editor});if(!beforeUnloadDelegate){beforeUnloadDelegate=function(e){var event=self.fire('BeforeUnload');if(event.returnValue){e.preventDefault();e.returnValue=event.returnValue;return event.returnValue;}};window.addEventListener('beforeunload',beforeUnloadDelegate);}return editor;},createEditor:function(id,settings){return this.add(new Editor(id,settings,this));},remove:function(selector){var self=this;var i,editor;if(!selector){for(i=editors.length-1;i>=0;i--){self.remove(editors[i]);}return;}if(isString$1(selector)){each$1(DOM.select(selector),function(elm){editor=self.get(elm.id);if(editor){self.remove(editor);}});return;}editor=selector;if(isNull(self.get(editor.id))){return null;}if(removeEditorFromList(editor)){self.fire('RemoveEditor',{editor:editor});}if(editors.length===0){window.removeEventListener('beforeunload',beforeUnloadDelegate);}editor.remove();toggleGlobalEvents(editors.length>0);return editor;},execCommand:function(cmd,ui,value){var self=this,editor=self.get(value);switch(cmd){case'mceAddEditor':if(!self.get(value)){new Editor(value,self.settings,self).render();}return true;case'mceRemoveEditor':if(editor){editor.remove();}return true;case'mceToggleEditor':if(!editor){self.execCommand('mceAddEditor',false,value);return true;}if(editor.isHidden()){editor.show();}else{editor.hide();}return true;}if(self.activeEditor){return self.activeEditor.execCommand(cmd,ui,value);}return false;},triggerSave:function(){each$1(editors,function(editor){editor.save();});},addI18n:function(code,items){I18n.add(code,items);},translate:function(text){return I18n.translate(text);},setActive:function(editor){var activeEditor=this.activeEditor;if(this.activeEditor!==editor){if(activeEditor){activeEditor.fire('deactivate',{relatedTarget:editor});}editor.fire('activate',{relatedTarget:activeEditor});}this.activeEditor=editor;},_setBaseUrl:function(baseUrl){this.baseURL=new URI(this.documentBaseURL).toAbsolute(baseUrl.replace(/\\/+$/,''));this.baseURI=new URI(this.baseURL);}});EditorManager.setup();var min$1=Math.min,max$1=Math.max,round$1=Math.round;var relativePosition=function(rect,targetRect,rel){var x=targetRect.x;var y=targetRect.y;var w=rect.w;var h=rect.h;var targetW=targetRect.w;var targetH=targetRect.h;var relChars=(rel||'').split('');if(relChars[0]==='b'){y+=targetH;}if(relChars[1]==='r'){x+=targetW;}if(relChars[0]==='c'){y+=round$1(targetH/2);}if(relChars[1]==='c'){x+=round$1(targetW/2);}if(relChars[3]==='b'){y-=h;}if(relChars[4]==='r'){x-=w;}if(relChars[3]==='c'){y-=round$1(h/2);}if(relChars[4]==='c'){x-=round$1(w/2);}return create$2(x,y,w,h);};var findBestRelativePosition=function(rect,targetRect,constrainRect,rels){var pos,i;for(i=0;i<rels.length;i++){pos=relativePosition(rect,targetRect,rels[i]);if(pos.x>=constrainRect.x&&pos.x+pos.w<=constrainRect.w+constrainRect.x&&pos.y>=constrainRect.y&&pos.y+pos.h<=constrainRect.h+constrainRect.y){return rels[i];}}return null;};var inflate=function(rect,w,h){return create$2(rect.x-w,rect.y-h,rect.w+w*2,rect.h+h*2);};var intersect=function(rect,cropRect){var x1=max$1(rect.x,cropRect.x);var y1=max$1(rect.y,cropRect.y);var x2=min$1(rect.x+rect.w,cropRect.x+cropRect.w);var y2=min$1(rect.y+rect.h,cropRect.y+cropRect.h);if(x2-x1<0||y2-y1<0){return null;}return create$2(x1,y1,x2-x1,y2-y1);};var clamp=function(rect,clampRect,fixedSize){var x1=rect.x;var y1=rect.y;var x2=rect.x+rect.w;var y2=rect.y+rect.h;var cx2=clampRect.x+clampRect.w;var cy2=clampRect.y+clampRect.h;var underflowX1=max$1(0,clampRect.x-x1);var underflowY1=max$1(0,clampRect.y-y1);var overflowX2=max$1(0,x2-cx2);var overflowY2=max$1(0,y2-cy2);x1+=underflowX1;y1+=underflowY1;if(fixedSize){x2+=underflowX1;y2+=underflowY1;x1-=overflowX2;y1-=overflowY2;}x2-=overflowX2;y2-=overflowY2;return create$2(x1,y1,x2-x1,y2-y1);};var create$2=function(x,y,w,h){return{x:x,y:y,w:w,h:h};};var fromClientRect=function(clientRect){return create$2(clientRect.left,clientRect.top,clientRect.width,clientRect.height);};var Rect={inflate:inflate,relativePosition:relativePosition,findBestRelativePosition:findBestRelativePosition,intersect:intersect,clamp:clamp,create:create$2,fromClientRect:fromClientRect};var awaiter=function(resolveCb,rejectCb,timeout){if(timeout===void 0){timeout=1000;}var done=false;var timer=null;var complete=function(completer){return function(){var args=[];for(var _i=0;_i<arguments.length;_i++){args[_i]=arguments[_i];}if(!done){done=true;if(timer!==null){clearTimeout(timer);timer=null;}completer.apply(null,args);}};};var resolve=complete(resolveCb);var reject=complete(rejectCb);var start=function(){var args=[];for(var _i=0;_i<arguments.length;_i++){args[_i]=arguments[_i];}if(!done&&timer===null){timer=setTimeout(function(){return reject.apply(null,args);},timeout);}};return{start:start,resolve:resolve,reject:reject};};var create$1=function(){var tasks={};var resultFns={};var load=function(id,url){var loadErrMsg='Script at URL \"'+url+'\" failed to load';var runErrMsg='Script at URL \"'+url+'\" did not call `tinymce.Resource.add(\\''+id+'\\', data)` within 1 second';if(tasks[id]!==undefined){return tasks[id];}else{var task=new promiseObj(function(resolve,reject){var waiter=awaiter(resolve,reject);resultFns[id]=waiter.resolve;ScriptLoader.ScriptLoader.loadScript(url,function(){return waiter.start(runErrMsg);},function(){return waiter.reject(loadErrMsg);});});tasks[id]=task;return task;}};var add=function(id,data){if(resultFns[id]!==undefined){resultFns[id](data);delete resultFns[id];}tasks[id]=promiseObj.resolve(data);};return{load:load,add:add};};var Resource=create$1();var each=Tools.each,extend$1=Tools.extend;var extendClass,initializing;var Class=function(){};Class.extend=extendClass=function(props){var self=this;var _super=self.prototype;var Class=function(){var i,mixins,mixin;var self=this;if(!initializing){if(self.init){self.init.apply(self,arguments);}mixins=self.Mixins;if(mixins){i=mixins.length;while(i--){mixin=mixins[i];if(mixin.init){mixin.init.apply(self,arguments);}}}}};var dummy=function(){return this;};var createMethod=function(name,fn){return function(){var self=this;var tmp=self._super;self._super=_super[name];var ret=fn.apply(self,arguments);self._super=tmp;return ret;};};initializing=true;var prototype=new self();initializing=false;if(props.Mixins){each(props.Mixins,function(mixin){for(var name_1 in mixin){if(name_1!=='init'){props[name_1]=mixin[name_1];}}});if(_super.Mixins){props.Mixins=_super.Mixins.concat(props.Mixins);}}if(props.Methods){each(props.Methods.split(','),function(name){props[name]=dummy;});}if(props.Properties){each(props.Properties.split(','),function(name){var fieldName='_'+name;props[name]=function(value){var self=this;if(value!==undefined){self[fieldName]=value;return self;}return self[fieldName];};});}if(props.Statics){each(props.Statics,function(func,name){Class[name]=func;});}if(props.Defaults&&_super.Defaults){props.Defaults=extend$1({},_super.Defaults,props.Defaults);}each$j(props,function(member,name){if(typeof member==='function'&&_super[name]){prototype[name]=createMethod(name,member);}else{prototype[name]=member;}});Class.prototype=prototype;Class.constructor=Class;Class.extend=extendClass;return Class;};var min=Math.min,max=Math.max,round=Math.round;var Color=function(value){var self={};var r=0,g=0,b=0;var rgb2hsv=function(r,g,b){var h,s,v;h=0;s=0;v=0;r=r/255;g=g/255;b=b/255;var minRGB=min(r,min(g,b));var maxRGB=max(r,max(g,b));if(minRGB===maxRGB){v=minRGB;return{h:0,s:0,v:v*100};}var d=r===minRGB?g-b:b===minRGB?r-g:b-r;h=r===minRGB?3:b===minRGB?1:5;h=60*(h-d/(maxRGB-minRGB));s=(maxRGB-minRGB)/maxRGB;v=maxRGB;return{h:round(h),s:round(s*100),v:round(v*100)};};var hsvToRgb=function(hue,saturation,brightness){hue=(parseInt(hue,10)||0)%360;saturation=parseInt(saturation,10)/100;brightness=parseInt(brightness,10)/100;saturation=max(0,min(saturation,1));brightness=max(0,min(brightness,1));if(saturation===0){r=g=b=round(255*brightness);return;}var side=hue/60;var chroma=brightness*saturation;var x=chroma*(1-Math.abs(side%2-1));var match=brightness-chroma;switch(Math.floor(side)){case 0:r=chroma;g=x;b=0;break;case 1:r=x;g=chroma;b=0;break;case 2:r=0;g=chroma;b=x;break;case 3:r=0;g=x;b=chroma;break;case 4:r=x;g=0;b=chroma;break;case 5:r=chroma;g=0;b=x;break;default:r=g=b=0;}r=round(255*(r+match));g=round(255*(g+match));b=round(255*(b+match));};var toHex=function(){var hex=function(val){val=parseInt(val,10).toString(16);return val.length>1?val:'0'+val;};return'#'+hex(r)+hex(g)+hex(b);};var toRgb=function(){return{r:r,g:g,b:b};};var toHsv=function(){return rgb2hsv(r,g,b);};var parse=function(value){var matches;if(typeof value==='object'){if('r'in value){r=value.r;g=value.g;b=value.b;}else if('v'in value){hsvToRgb(value.h,value.s,value.v);}}else{if(matches=/rgb\\s*\\(\\s*([0-9]+)\\s*,\\s*([0-9]+)\\s*,\\s*([0-9]+)[^\\)]*\\)/gi.exec(value)){r=parseInt(matches[1],10);g=parseInt(matches[2],10);b=parseInt(matches[3],10);}else if(matches=/#([0-F]{2})([0-F]{2})([0-F]{2})/gi.exec(value)){r=parseInt(matches[1],16);g=parseInt(matches[2],16);b=parseInt(matches[3],16);}else if(matches=/#([0-F])([0-F])([0-F])/gi.exec(value)){r=parseInt(matches[1]+matches[1],16);g=parseInt(matches[2]+matches[2],16);b=parseInt(matches[3]+matches[3],16);}}r=r<0?0:r>255?255:r;g=g<0?0:g>255?255:g;b=b<0?0:b>255?255:b;return self;};if(value){parse(value);}self.toRgb=toRgb;self.toHsv=toHsv;self.toHex=toHex;self.parse=parse;return self;};var serialize=function(obj){var data=JSON.stringify(obj);if(!isString$1(data)){return data;}return data.replace(/[\\u0080-\\uFFFF]/g,function(match){var hexCode=match.charCodeAt(0).toString(16);return'\\\\u'+'0000'.substring(hexCode.length)+hexCode;});};var JSONUtils={serialize:serialize,parse:function(text){try{return JSON.parse(text);}catch(ex){}}};var JSONP={callbacks:{},count:0,send:function(settings){var self=this,dom=DOMUtils.DOM,count=settings.count!==undefined?settings.count:self.count;var id='tinymce_jsonp_'+count;self.callbacks[count]=function(json){dom.remove(id);delete self.callbacks[count];settings.callback(json);};dom.add(dom.doc.body,'script',{id:id,src:settings.url,type:'text/javascript'});self.count++;}};var XHR=__assign(__assign({},Observable),{send:function(settings){var xhr,count=0;var ready=function(){if(!settings.async||xhr.readyState===4||count++>10000){if(settings.success&&count<10000&&xhr.status===200){settings.success.call(settings.success_scope,''+xhr.responseText,xhr,settings);}else if(settings.error){settings.error.call(settings.error_scope,count>10000?'TIMED_OUT':'GENERAL',xhr,settings);}xhr=null;}else{Delay.setTimeout(ready,10);}};settings.scope=settings.scope||this;settings.success_scope=settings.success_scope||settings.scope;settings.error_scope=settings.error_scope||settings.scope;settings.async=settings.async!==false;settings.data=settings.data||'';XHR.fire('beforeInitialize',{settings:settings});xhr=new XMLHttpRequest();if(xhr.overrideMimeType){xhr.overrideMimeType(settings.content_type);}xhr.open(settings.type||(settings.data?'POST':'GET'),settings.url,settings.async);if(settings.crossDomain){xhr.withCredentials=true;}if(settings.content_type){xhr.setRequestHeader('Content-Type',settings.content_type);}if(settings.requestheaders){Tools.each(settings.requestheaders,function(header){xhr.setRequestHeader(header.key,header.value);});}xhr.setRequestHeader('X-Requested-With','XMLHttpRequest');xhr=XHR.fire('beforeSend',{xhr:xhr,settings:settings}).xhr;xhr.send(settings.data);if(!settings.async){return ready();}Delay.setTimeout(ready,10);}});var extend=Tools.extend;var JSONRequest=function(){function JSONRequest(settings){this.settings=extend({},settings);this.count=0;}JSONRequest.sendRPC=function(o){return new JSONRequest().send(o);};JSONRequest.prototype.send=function(args){var ecb=args.error,scb=args.success;var xhrArgs=extend(this.settings,args);xhrArgs.success=function(c,x){c=JSONUtils.parse(c);if(typeof c==='undefined'){c={error:'JSON Parse error.'};}if(c.error){ecb.call(xhrArgs.error_scope||xhrArgs.scope,c.error,x);}else{scb.call(xhrArgs.success_scope||xhrArgs.scope,c.result);}};xhrArgs.error=function(ty,x){if(ecb){ecb.call(xhrArgs.error_scope||xhrArgs.scope,ty,x);}};xhrArgs.data=JSONUtils.serialize({id:args.id||'c'+this.count++,method:args.method,params:args.params});xhrArgs.content_type='application/json';XHR.send(xhrArgs);};return JSONRequest;}();var create=function(){return function(){var data={};var keys=[];var storage={getItem:function(key){var item=data[key];return item?item:null;},setItem:function(key,value){keys.push(key);data[key]=String(value);},key:function(index){return keys[index];},removeItem:function(key){keys=keys.filter(function(k){return k===key;});delete data[key];},clear:function(){keys=[];data={};},length:0};Object.defineProperty(storage,'length',{get:function(){return keys.length;},configurable:false,enumerable:false});return storage;}();};var localStorage;try{var test='__storage_test__';localStorage=window.localStorage;localStorage.setItem(test,test);localStorage.removeItem(test);}catch(e){localStorage=create();}var LocalStorage=localStorage;var publicApi={geom:{Rect:Rect},util:{Promise:promiseObj,Delay:Delay,Tools:Tools,VK:VK,URI:URI,Class:Class,EventDispatcher:EventDispatcher,Observable:Observable,I18n:I18n,XHR:XHR,JSON:JSONUtils,JSONRequest:JSONRequest,JSONP:JSONP,LocalStorage:LocalStorage,Color:Color,ImageUploader:ImageUploader},dom:{EventUtils:EventUtils,Sizzle:Sizzle,DomQuery:DomQuery,TreeWalker:DomTreeWalker,TextSeeker:TextSeeker,DOMUtils:DOMUtils,ScriptLoader:ScriptLoader,RangeUtils:RangeUtils,Serializer:DomSerializer,StyleSheetLoader:StyleSheetLoader,ControlSelection:ControlSelection,BookmarkManager:BookmarkManager,Selection:EditorSelection,Event:EventUtils.Event},html:{Styles:Styles,Entities:Entities,Node:AstNode,Schema:Schema,SaxParser:SaxParser,DomParser:DomParser,Writer:Writer,Serializer:HtmlSerializer},Env:Env,AddOnManager:AddOnManager,Annotator:Annotator,Formatter:Formatter,UndoManager:UndoManager,EditorCommands:EditorCommands,WindowManager:WindowManager,NotificationManager:NotificationManager,EditorObservable:EditorObservable,Shortcuts:Shortcuts,Editor:Editor,FocusManager:FocusManager,EditorManager:EditorManager,DOM:DOMUtils.DOM,ScriptLoader:ScriptLoader.ScriptLoader,PluginManager:PluginManager,ThemeManager:ThemeManager,IconManager:IconManager,Resource:Resource,trim:Tools.trim,isArray:Tools.isArray,is:Tools.is,toArray:Tools.toArray,makeMap:Tools.makeMap,each:Tools.each,map:Tools.map,grep:Tools.grep,inArray:Tools.inArray,extend:Tools.extend,create:Tools.create,walk:Tools.walk,createNS:Tools.createNS,resolve:Tools.resolve,explode:Tools.explode,_addCacheSuffix:Tools._addCacheSuffix,isOpera:Env.opera,isWebKit:Env.webkit,isIE:Env.ie,isGecko:Env.gecko,isMac:Env.mac};var tinymce=Tools.extend(EditorManager,publicApi);var exportToModuleLoaders=function(tinymce){if(typeof module==='object'){try{module.exports=tinymce;}catch(_){}}};var exportToWindowGlobal=function(tinymce){window.tinymce=tinymce;window.tinyMCE=tinymce;};exportToWindowGlobal(tinymce);exportToModuleLoaders(tinymce);})();","map":{"version":3,"names":["typeOf$1","x","undefined","t","Array","prototype","isPrototypeOf","constructor","name","String","isEquatableType","indexOf","sort$1","xs","compareFn","clone","slice","call","sort","contramap","eqa","f","eq$2","y","eq","tripleEq","eqString","eqArray","length","len","i","eqSortedArray","eqRecord","kx","Object","keys","ky","q","eqAny","tx","ty","typeOf","isType$1","type","value","isSimpleType","eq$1","a","isString$1","isObject","isArray$1","isNull","isBoolean","isUndefined","isNullable","isNonNullable","isFunction","isNumber","noop","compose","fa","fb","args","_i","arguments","apply","compose1","fbc","fab","constant","identity","tripleEquals","b","curry","fn","initialArgs","restArgs","all","concat","not","die","msg","Error","never","always","none","NONE","thunk","id","me","fold","n","_s","isSome","isNone","getOr","getOrThunk","getOrDie","getOrNull","getOrUndefined","or","orThunk","map","each","bind","exists","forall","filter","toArray","toString","some","constant_a","self","s","from$1","Optional","from","nativeSlice","nativeIndexOf","nativePush","push","rawIndexOf","ts","indexOf$2","r","contains$3","pred","map$3","each$k","eachr","partition","pass","fail","arr","filter$4","foldr","acc","foldl","findUntil$1","until","find$3","findIndex$2","flatten","reverse","difference","a1","a2","mapToObject","comparator","copy","get$a","head","last$2","findMap","hasOwnProperty$1","hasOwnProperty","each$j","obj","props","k","map$2","tupleMap","v","tuple","objAcc","internalFilter","onTrue","onFalse","bifilter","filter$3","mapToArray","values","get$9","key","has$2","hasNonNullableKey","equal$1","isArray","toArray$1","array","l","each$i","o","cb","map$1","callback","out","item","index","filter$2","indexOf$1","reduce","collection","iteratee","accumulator","thisArg","findIndex$1","predicate","last$1","__assign","assign","p","__rest","e","getOwnPropertySymbols","propertyIsEnumerable","__spreadArray","to","pack","ar","cached","called","DeviceType","os","browser","userAgent","mediaMatch","isiPad","isiOS","test","isiPhone","isMobile","isAndroid","isTouch","isTablet","isPhone","iOSwebview","isSafari","isDesktop","isWebView","firstMatch","regexes","find$2","agent","major","minor","group","Number","replace","nu$4","detect$3","versionRegexes","cleanedAgent","toLowerCase","unknown$2","Version","nu","detect","unknown","detectBrowser$1","browsers","userAgentData","brands","uaBrand","lcBrand","brand","_a","info","current","version","parseInt","detect$2","candidates","candidate","search","detectBrowser","detectOs","oses","removeFromStart","str","numChars","substring","checkRange","substr","start","removeLeading","prefix","startsWith","contains$2","blank","trim$4","lTrim","rTrim","isNotEmpty","isEmpty$3","normalVersionRegex","checkContains","target","uastring","PlatformInfo","edge","chrome","ie$1","opera","firefox","safari","unknown$1","nu$3","isBrowser","isEdge","isChrome","isIE","isOpera","isFirefox","Browser","ie","windows","ios","android","linux","osx","solaris","freebsd","chromeos","nu$2","isOS","isWindows","isOSX","isLinux","isSolaris","isFreeBSD","isChromeOS","OperatingSystem","detect$1","userAgentDataOpt","deviceType","PlatformDetection","query","window","matchMedia","matches","platform$2","navigator","platform$1","browser$4","webkit","fileApi","URL","createObjectURL","windowsPhone","Env","gecko","mac","iOS","contentEditable","transparentSrc","caretAfter","range","getSelection","documentMode","document","ceFalse","cacheSuffix","container","experimentalShadowDom","canHaveCSP","desktop","whiteSpaceRegExp$2","trim$3","is$3","makeMap$4","items","delim","split","create$9","root","sp","scn","c","de","exec","cn","match","ns","createNS","onCreate","extend","resolve","parent","static","extend$6","exts","ext","name_1","walk$3","resolve$3","explode$4","d","_addCacheSuffix","url","Tools","trim","is","makeMap","grep","inArray","hasOwn","create","walk","explode","fromHtml$1","html","scope","doc","div","createElement","innerHTML","hasChildNodes","childNodes","console","error","fromDom$2","fromTag","tag","node","fromText","text","createTextNode","dom","fromPoint$1","docElm","elementFromPoint","SugarElement","fromHtml","fromDom","fromPoint","recurse","cur","compareDocumentPosition","documentPositionContainedBy","Node","DOCUMENT_POSITION_CONTAINED_BY","COMMENT","DOCUMENT","DOCUMENT_FRAGMENT","ELEMENT","TEXT","is$2","element","selector","nodeType","elem","msMatchesSelector","webkitMatchesSelector","mozMatchesSelector","bypassSelector","childElementCount","base","querySelectorAll","one","querySelector","e1","e2","regularContains","d1","d2","contains","ieContains","contains$1","Function","nodeName","isType","isComment$1","isElement$6","isText$8","isDocument$2","isDocumentFragment$1","isTag","owner$1","ownerDocument","documentOrOwner","dos","documentElement","defaultView","parentNode","parents$1","isRoot","stop","ret","rawParent","siblings","filterSelf","elements","children","prevSibling","previousSibling","nextSibling","prevSiblings","nextSiblings","child$1","cs","firstChild","lastChild","childNodesCount","getHead","isShadowRoot","host","supported","Element","attachShadow","getRootNode","isSupported$1","getStyleContainer","getShadowRoot","getShadowHost","getOriginalEventTarget","event","el","isOpenShadowHost","composed","composedPath","shadowRoot","before$4","marker","parent$1","insertBefore","after$3","sibling","append$1","prepend","firstChild$1","appendChild","wrap$3","wrapper","before$3","append","empty","textContent","rogue","remove$7","removeChild","unwrap","children$1","inBody","body","left","top","translate","SugarPosition","boxPosition","box","getBoundingClientRect","firstDefinedOrZero","absolute","win","offsetLeft","offsetTop","scrollTop","pageYOffset","scrollLeft","pageXOffset","clientTop","clientLeft","viewport","get$8","_DOC","scrollTo","intoView","alignToTop","scrollIntoViewIfNeeded","scrollIntoView","get$7","_win","bounds","width","height","right","bottom","getBounds","scroll","clientWidth","clientHeight","visualViewport","Math","max","pageLeft","pageTop","isNodeType","isRestrictedNode","getPrototypeOf","isElement$5","matchNodeNames","names","lowercasedNames","matchStyleValues","computed","getComputedStyle","cssValue","getPropertyValue","hasAttribute","attrName","hasAttributeValue","attrValue","getAttribute","isBogus$2","isBogusAll$1","isTable$3","tagName","hasContentEditableState","isTextareaOrInput","isText$7","isComment","isDocument$1","isDocumentFragment","isBr$5","isImg","isContentEditableTrue$4","isContentEditableFalse$b","isTableCell$5","isMedia$2","is$1","lhs","rhs","cat","lift2","oa","ob","lift3","oc","someIf","isSupported","style","rawSet","setAttribute","set$1","setAll$1","attrs","get$6","getOpt","has$1","remove$6","removeAttribute","clone$3","attributes","attr","internalSet","property","setProperty","setAll","css","get$5","styles","getUnsafeProperty","getRaw","raw","getAllRaw","ruleName","reflow","offsetWidth","browser$3","firstElement","nodes","getTableCaptionDeltaY","elm","caption","bodyTop","captionTop","captionHeight","offsetHeight","hasChild","child","getPos","rootElm","pos","offsetParent","castOffsetParent","exports$1","module$1","exports","define","module","require","global","factory","amd","globalThis","EphoxContactWrapper","commonjsGlobal","promise","setTimeoutFunc","setTimeout","Promise","TypeError","_state","_handled","_value","_deferreds","doResolve","handle","deferred","_immediateFn","onFulfilled","onRejected","reject","newValue","then","finale","_unhandledRejectionFn","Handler","done","reason","ex","prom","remaining","res","val","race","setImmediate","err","warn","_setImmediateFn","_setUnhandledRejectionFn","promisePolyfill","Global","promisePolyfill_1","boltExport","Promise$1","nu$1","baseFn","data","callbacks","nCallback","get","isReady","set","run","cbs","pure$1","LazyValue","pure","errorReporter","make","aFutureB","toPromise","anonBind","futureB","toLazy","toCached","cache","Future","par$1","asyncValues","count","asyncValue","par","futures","value$1","_opt","_f","mapError","_","onValue","toOptional","isValue","isError","message","onError","fromOption","opt","Result","generate$1","cases","constructors","adt","acase","keys$1","argLength","branches","branchKeys","join","allReqd","reqKey","foldArgs","log","label","params","Adt","generate","bothErrors","firstError","secondError","bothValues","unite","result","ClosestOrAncestor","ancestor","ancestor$3","closest$3","sibling$2","ancestor$2","descendant","closest$2","promiseObj","requestAnimationFramePromise","requestAnimationFrame","requestAnimationFrameFunc","vendors","featurefill","wrappedSetTimeout","time","wrappedSetInterval","setInterval","wrappedClearTimeout","clearTimeout","wrappedClearInterval","clearInterval","debounce","timer","func","Delay","setEditorTimeout","editor","removed","setEditorInterval","throttle","StyleSheetLoader","documentOrShadowRoot","settings","idCount","loadedStates","edos","maxLoadTime","_setReferrerPolicy","referrerPolicy","addStyle","removeStyle","styleContainer","getOrCreateState","passed","failed","load","success","failure","link","urlWithSuffix","state","status","onload","onerror","wait","testCallback","waitCallback","Date","now","startTime","waitForWebKitLinkLoaded","styleSheets","styleSheet","owner","ownerNode","linkElem","rel","contentCssCors","loadF","loadAll","urls","parts","unload","unloadAll","create$8","WeakMap","forElement","referenceElement","rootDom","sl","instance","DomTreeWalker","startNode","rootNode","next","prev","prev2","shallow","findSibling","findPreviousNode","startName","siblingName","blocks","tableCells","tableSections","textBlocks","headings","listItems$1","lists","wsElements","lazyLookup","lookup","isHeading","isBlock$2","isTable$2","isInline$1","isBr$4","isTextBlock$2","isList","isListItem","isTableSection","isTableCell$4","isWsPreserveElement","ancestor$1","zeroWidth","nbsp","isZwsp$1","char","removeZwsp","ZWSP$1","isZwsp","trim$2","isElement$4","isText$6","isCaretContainerBlock$1","isCaretContainerInline","isCaretContainer$2","hasContent","insertInline$1","before","textNode","startsWithCaretContainer$1","splitText","endsWithCaretContainer$1","isBeforeInline","charAt","offset","isAtStart","isAfterInline","isAtEnd","createBogusBr","br","insertBlock$1","blockName","blockNode","trimBogusBr","brs","getElementsByTagName","lastBr","showCaretContainerBlock","caretContainer","isRangeInCaretContainerBlock","startContainer","isContentEditableTrue$3","isContentEditableFalse$a","isBr$3","isText$5","isInvalidTextElement","isAtomicInline","isTable$1","isCaretContainer$1","isCaretCandidate$3","isNonUiContentEditableFalse","isUnselectable","isInEditable","isAtomicContentEditableFalse","isAtomic$1","isEditableCaretCandidate$1","whiteSpaceRegExp$1","isWhitespaceText","hasWhitespacePreserveParent","rootElement","isWhitespace","isNamedAnchor","isContent$1","isBookmark","isBogus$1","isBogusAll","isEmptyNode","targetNode","skipBogus","brCount","walker","isEmpty$2","isSpan","isInlineContent","surroundedByInlineContent","prevIsInline","nextIsInline","isBookmarkNode$2","isKeepTextNode","isKeepElement","isDocument","trimNode","currentChildren","remove","makeMap$3","attrsCharsRegExp","textCharsRegExp","rawCharsRegExp","entityRegExp","asciiMap","baseEntities","reverseEntities","nativeDecode","innerText","buildEntitiesLookup","radix","chr","entity","fromCharCode","namedEntities","encodeRaw","encodeAllRaw","encodeNumeric","charCodeAt","encodeNamed","entities","getEncodeFunc","entitiesMap","encodeNamedAndNumeric","encodeCustomNamed","nameMap","named","numeric","decode","Entities","mapCache","dummyObj","makeMap$2","each$h","extend$5","explode$3","inArray$2","split$1","createMap","defaultValue","extendWith","toUpperCase","getTextRootBlockElements","schema","getTextBlockElements","compileSchema","globalAttributes","blockContent","phrasingContent","flowContent","html4BlockContent","html4PhrasingContent","add","ni","attributesOrder","arrayToMap","addAttrs","schemaItem","table","script","compileElementMap","mode","Schema","patternElements","customElementsMap","specialElements","createLookupTable","option","schemaItems","verify_html","valid_elements","validStyles","valid_styles","invalidStyles","invalid_styles","validClasses","valid_classes","whiteSpaceElementsMap","selfClosingElementsMap","shortEndedElementsMap","boolAttrMap","nonEmptyOrMoveCaretBeforeOnEnter","nonEmptyElementsMap","moveCaretBeforeOnEnterElementsMap","textBlockElementsMap","blockElementsMap","textInlineElementsMap","special","RegExp","patternToRegExp","addValidElements","validElements","ei","ai","al","attrData","elementName","attrType","outputName","globalAttributesOrder","elementRuleRegExp","attrRuleRegExp","hasPatternsRegExp","validElementsArr","paddEmpty","removeEmpty","removeEmptyAttrs","attributesRequired","required","splice","attributesDefault","attributesForced","forcedValue","validValues","attributePatterns","pattern","setValidElements","addCustomElements","customElements","customElementRegExp","text_block_elements","block_elements","rule","inline","cloneName","customRule","elmName","addValidChildren","validChildren","childRuleRegExp","getElementRule","_val","padd_empty_block_inline_children","paddInEmptyBlock","custom_elements","valid_children","extended_valid_elements","dd","dt","li","td","th","tr","tbody","thead","tfoot","legend","area","param","parents","parentsRequired","invalid_elements","getValidStyles","getInvalidStyles","getValidClasses","getBoolAttrs","getBlockElements","getTextInlineElements","getShortEndedElements","getSelfClosingElements","getNonEmptyElements","getMoveCaretBeforeOnEnterElements","getWhiteSpaceElements","getSpecialElements","isValidChild","isValid","attrPatterns","getCustomElements","toHex","g","hex","Styles","_this","rgbRegExp","urlOrStrRegExp","styleRegExp","trimRightRegExp","encodingLookup","invisibleChar","encodingItems","color","parse","isEncoded","urlConverter","url_converter","urlConverterScope","url_converter_scope","compress","suffix","noJoin","canCompress","compress2","encode","keepSlashes","decodeSingleHexSequence","escSeq","decodeHexSequences","processUrl","url2","url3","str2","allow_script_urls","scriptUrl","allow_svg_data_urls","lastIndex","border","serialize","serializeStyles","styleList","i_1","styleMap","deprecated","keyLocation","layerX","layerY","returnValue","webkitMovementX","webkitMovementY","keyIdentifier","mozPressure","isNativeEvent","Event","initEvent","hasIsDefaultPrevented","isDefaultPrevented","needsNormalizing","preventDefault","clone$2","originalEvent","normalize$3","fallbackTarget","srcElement","defaultPrevented","stopPropagation","cancelBubble","isPropagationStopped","stopImmediatePropagation","isImmediatePropagationStopped","eventExpandoPrefix","mouseEventRe","addEvent","capture","addEventListener","attachEvent","removeEvent","removeEventListener","detachEvent","isMouseEvent","fix","pageX","clientX","eventDoc","mouseEvent","pageY","clientY","metaKey","bindOnReady","eventUtils","domLoaded","isDocReady","readyState","readyHandler","EventUtils","events","expando","hasMouseEnterLeave","hasFocusIn","callbackList","fakeName","nativeHandler","defaultNativeHandler","evt","executeHandlers","namesList","mouseEnterLeave","currentTarget","related","relatedTarget","unbind","ci","eventMap","fire","parentWindow","clean","destroy","cancel","support","Expr","getText","isXML","tokenize","compile","select$1","outermostContext","sortInput","hasDuplicate","setDocument","document$1","docElem","documentIsHTML","rbuggyQSA","rbuggyMatches","preferredDoc","dirruns","classCache","createCache","tokenCache","compilerCache","sortOrder","strundefined","MAX_NEGATIVE","pop","push_native","push$1","slice$1","booleans","whitespace","identifier","pseudos","rtrim","rcomma","rcombinators","rattributeQuotes","rpseudo","ridentifier","matchExpr","ID","CLASS","TAG","ATTR","PSEUDO","CHILD","bool","needsContext","rinputs","rheader","rnative","rquickExpr$1","rsibling","rescape","runescape","funescape","escaped","escapedWhitespace","high","els","j","Sizzle","context","results","seed","m","groups","old","nid","newContext","newSelector","getElementById","getElementsByClassName","qsa","toSelector","testContext","qsaError","cacheLength","shift","markFunction","siblingCheck","diff","sourceIndex","createInputPseudo","createButtonPseudo","createPositionalPseudo","argument","matchIndexes","hasCompare","getTop","getById","find","attrId","tmp","className","disconnectedMatch","adown","bup","compare","sortDetached","aup","ap","bp","unshift","expr","matchesSelector","attrHandle","getAttributeNode","specified","uniqueSort","duplicates","detectDuplicates","sortStable","nodeValue","selectors","createPseudo","relative","dir","first","preFilter","excess","unquoted","nodeNameSelector","operator","check","what","last","simple","forward","ofType","xml","outerCache","nodeIndex","useCache","pseudo","setFilters","idx","matched","input","matcher","unmatched","has","lang","elemLang","hash","location","focus","activeElement","hasFocus","href","tabIndex","enabled","disabled","checked","selected","selectedIndex","header","button","even","odd","lt","gt","nth","filters","parseOnly","tokens","soFar","preFilters","addCombinator","combinator","checkNonElements","doneName","oldCache","newCache","elementMatcher","matchers","multipleContexts","contexts","condense","newUnmatched","mapped","setMatcher","postFilter","postFinder","postSelector","temp","preMap","postMap","preexisting","elems","matcherIn","matcherOut","matcherFromTokens","checkContext","leadingRelative","implicitRelative","matchContext","matchAnyContext","matcherFromGroupMatchers","elementMatchers","setMatchers","bySet","byElement","superMatcher","outermost","matchedCount","setMatched","contextBackup","dirrunsUnique","random","select","token","compiled","rquickExpr","Event$1","skipUniques","isDefined","isString","isWindow","createFragment$1","fragDoc","frag","createDocumentFragment","domManipulate","targetNodes","sourceItem","getElementDocument","DomQuery","makeArray","hasClass","wrap$2","lastParent","newWrapper","cloneNode","numericCssMap","booleanMap","propFix","for","class","readonly","cssFix","float","attrHooks","cssHooks","DomQueryConstructor","init","inArray$1","whiteSpaceRegExp","trim$1","each$g","grep$2","unique","hook","prop","removeAttr","camel","dashed","removeProperty","currentStyle","after","appendTo","prependTo","replaceWith","content","wrap","wrapAll","wrapInner","contents","addClass","toggleClass","removeClass","classState","existingClassName","on","off","trigger","show","hide","closest","object","sibling$1","firstSibling","contentDocument","contentWindow","wrappedResult","parentsUntil","nextUntil","prevUntil","overrideDefaults","defaults","sub","each$f","grep$1","simpleSelectorRe","setupAttrHooks","getContext","keepValues","keep_values","keepUrlHook","$elm","src","updateInternalStyleAttr","rawValue","findNodeIndex","normalized","lastNodeType","DOMUtils","addedStyles","files","counter","stdMode","boxModel","styleSheetLoader","boundEvents","ownEvents","$","getRoot","isBlock","$$","getAttrib","defaultVal","getAttribs","setAttrib","originalValue","onSetAttrib","attrElm","deep","clone_1","root_element","getViewPort","argWin","vp","w","h","getPos$1","setStyle","update_styles","setStyles","stylesArg","getStyle","getSize","getRect","size","elms","getParents","collect","selectorVal","getParent","_findSib","getNext","getPrev","setAttribs","setHTML","canHaveHTML","parentElm","newElm","createHTML","outHtml","createFragment","keepChildren","$node","removeAllAttribs","removeAttributeNode","parseStyle","cssText","serializeStyle","styleElm","DOM","loadCSS","cls","isHidden","uniqueId","getOuterHTML","outerHTML","setOuterHTML","insertAfter","reference","referenceNode","oldElm","replaceChild","rename","attrNode","findCommonAncestor","ps","pe","rgbVal","isNonEmptyElement","isEmpty","bogusVal","createRng","createRange","splitElm","replacementElm","beforeFragment","afterFragment","setStart","setEnd","extractContents","rv","output","getContentEditable","getContentEditableParent","isChildOf","dumpRng","startOffset","endContainer","endOffset","DOM$a","each$e","QUEUED","LOADING","LOADED","FAILED","ScriptLoader","states","queue","scriptLoadedCallbacks","queueLoadedCallbacks","loading","loadScript","cleanup","isDone","markDone","loadQueue","loadScripts","scripts","failures","execCallbacks","loadingScripts","notifyCallbacks","Cell","initial","isRaw","isTokenised","currentCode","getLanguageData","getData","setCode","newCode","getCode","add$4","code","langData","translation","getLangData","textstr","removeContext","values_1","substitued","$1","$2","isRtl$1","hasCode","I18n","isRtl","AddOnManager","_listeners","runListeners","matchedListeners","listener","dependencies","requireLangPack","languages","languageLoad","waitFor","language","wrappedLanguages","addOn","addOnConstructor","createUrl","baseUrl","dep","resource","addComponents","pluginName","pluginUrl","loadDependencies","addOnUrl","deps","newUrl","urlString","baseURL","lastIndexOf","PluginManager","ThemeManager","singleton","doRevoke","subject","revoke","clear","isSet","rate","read$4","add$3","remove$5","supports","classList","get$4","add$2","clazz","remove$4","add$1","cleanClass","remove$3","descendants$1","descendants","annotation","dataAnnotation","dataAnnotationId","identify","annotationName","rng","selection","getRng","getBody","an","newStart","getAttr","uid","findMarkers","isAnnotation","findAll","markers","directory","nodesAlready","setup$n","_registry","changeCallbacks","initData","listeners","previous","withCallbacks","updateCallbacks","callbackMap","outputData","fireCallbacks","fireNoAnnotation","onNodeChange","annotations","addListener","setup$m","registry","identifyParserNode","span","serializer","addNodeFilter","spans","persistent","create$7","register","date","getTime","floor","classes","fromDom$1","get$3","docDom","fragment","contentElements","clone$1","original","isDeep","deep$1","TextWalker","isBoundary","direction","TextSeeker","isBlockBoundary","process","newOffset","backwards","forwards","round$2","round","rect","collapse","toStart","isEqual","rect1","rect2","isValidOverflow","overflowY","min","isAbove$1","halfHeight","isBelow$1","containsXY","clamp$2","getSelectedNode","getNode$1","safeOffset","getNodeUnsafe","extendingChars","isExtendingChar","ch","and","isElement$3","isCaretCandidate$2","isBlock$1","isFloated","isValidElementCaretCandidate","isNotPre","isText$4","isBr$2","nodeIndex$1","resolveIndex$1","createRange$1","isWhiteSpace$1","isRange","isHiddenWhiteSpaceRange","getBrClientRect","brNode","nbsp$1","clientRect","getBoundingClientRectWebKitText","sc","ec","so","eo","newRng","cloneRange","setEndAfter","getBoundingClientRect$1","isZeroRect","clientRects","getClientRects","collapseAndInflateWidth","newClientRect","getCaretPositionClientRects","caretPosition","addUniqueAndValidRect","addCharacterOffset","beforeNode","CaretPosition","toRange","isVisible","getNode","fromRangeStart","fromRangeEnd","isAbove","pos1","pos2","isBelow","isTextPosition","isElementPosition","trimEmptyTextNode$1","insertNode","insertFragment","rangeInsertNode","isText$3","isBogus","normalizedParent","getChildNodes","normalizedTextOffset","equal","normalizedNodeIndex","numTextFragments","createPathItem","parentsUntil$1","create$6","path","outputOffset","resolvePathItem","findTextPosition","targetOffset","dataLen","resolve$2","paths","isContentEditableFalse$9","getNormalizedTextOffset","trimmedOffset","getPoint","point","getLocation","bookmark","isCollapsed","end","isFakeCaret","findIndex","moveEndPoint$1","normalizeTableCellSelection","findAdjacentContentEditableFalseElm","getOffsetBookmark","getCaretBookmark","getRangeBookmark","createBookmarkSpan","filled","getPersistentBookmark","collapsed","rng2","endBookmarkNode","startBookmarkNode","moveToBookmark","keep","getBookmark$2","getUndoBookmark","DOM$9","defaultPreviewStyles","getBodySetting","getParam","bodyObj","getIframeAttrs","getDocType","getDocumentBaseUrl","getBodyId","getBodyClass","getContentSecurityPolicy","shouldPutBrInPre$1","getForcedRootBlock","block","getForcedRootBlockAttrs","getBrNewLineSelector","getNoNewLineSelector","shouldKeepStyles","shouldEndContainerOnEmptyBlock","getFontStyleValues","getFontSizeClasses","getImagesDataImgFilter","isAutomaticUploadsEnabled","shouldReuseFileName","shouldReplaceBlobUris","getIconPackName","getIconsUrl","getImageUploadUrl","getImageUploadBasePath","getImagesUploadCredentials","getImagesUploadHandler","shouldUseContentCssCors","getReferrerPolicy","getLanguageCode","getLanguageUrl","shouldIndentUseMargin","getIndentation","getContentCss","contentCss","getFontCss","fontCss","getDirectionality","getInlineBoundarySelector","getObjectResizing","getResizeImgProportional","getPlaceholder","getElement","getEventRoot","getServiceMessage","getTheme","shouldValidate","isInlineBoundariesEnabled","getFormats","getPreviewStyles","canFormatEmptyLines","getCustomUiSelector","getThemeUrl","isInline","hasHiddenInput","shouldPatchSubmit","isEncodingXml","shouldAddFormSubmitTrigger","shouldAddUnloadTrigger","hasForcedRootBlock","getCustomUndoRedoLevels","shouldDisableNodeChange","isReadOnly$1","hasContentCssCors","getPlugins","getExternalPlugins$1","shouldBlockUnsupportedDrop","isVisualAidsEnabled","getVisualAidsTableClass","getVisualAidsAnchorClass","getIframeAriaText","isElement$2","isText$2","removeNode$1","trimCount","trimmedText","deleteZwspChars","deleteData","removeUnchanged","remove$2","removeTextAndReposition","removeElementAndReposition","newPosition","removeTextCaretContainer","removeElementCaretContainer","removeAndReposition","caretContainerNode","browser$2","isContentEditableFalse$8","isMedia$1","isTableCell$3","inlineFakeCaretSelector","getAbsoluteClientRect","scrollX","scrollY","rootRect","margin","trimInlineCaretContainers","fakeCaretTargetNodes","FakeCaret","lastVisualCaret","cursorInterval","rootBlock","caretBlock","caret","startBlink","isInlineFakeCaretTarget","caretState","reposition","getCss","isFakeCaretTableBrowser","isFakeCaretTarget","isContentEditableFalse$7","isMedia","isBlockLike","isCaretContainer","isCaretContainerBlock","isElement$1","isCaretCandidate$1","isForwards","isBackwards","skipCaretContainers","findNode$1","predicateFn","isCefOrCaretContainer","getParentBlock$2","isInSameBlock","caretPosition1","caretPosition2","getChildNodeAtRelativeOffset","relativeOffset","beforeAfter","setStartBefore","setEndBefore","setStartAfter","isNodesInSameBlock","node1","node2","lean","before$2","after$2","normalizeRange","leanLeft","leanRight","location_1","getRelativeCefElm","getNormalizedRangeEndPoint","normalizedRange","getElementFromPosition","getElementFromPrevPosition","getVisualCaretPosition","walkFn","isMoveInsideSameBlock","inSameBlock","HDirection","isContentEditableFalse$6","isText$1","isElement","isBr$1","isCaretCandidate","isAtomic","isEditableCaretCandidate","getParents$3","nodeAtIndex","getCaretCandidatePosition","moveForwardFromBr","nextNode","findCaretPosition$1","Forwards","startPos","innerNode","rootContentEditableFalseElm","CaretWalker","Backwards","walkToPositionIn","position","fromPosition","afterElement","isBeforeOrStart","isAfterOrEnd","isBeforeAfterSameElement","isAtBr","shouldSkipPosition","navigate","navigateIgnore","ignoreFilter","positionIn","nextPosition","prevPosition","firstPositionIn","lastPositionIn","CARET_ID$1","isCaretNode","getParentCaretContainer","isStringPathBookmark","isRangeBookmark","isIdBookmark","isIndexBookmark","isPathBookmark","addBogus","resolveCaretPositionBookmark","insertZwsp","isEmpty$1","tryFindRangePosition","padEmptyCaretContainer","setEndPoint","isValidTextNode","restoreEndPoint","appendData","resolvePaths","resolveId","endPos","spos","epos","resolveIndex","selectNode","resolve$1","getBookmark$1","setRng","isBookmarkNode$1","expected","actual","isNbsp","isWhiteSpace","isContent","isNode","isInlineBlock","moveStart","isWhiteSpaceNode$1","getNonWhiteSpaceSibling","inc","nextName","isTextBlock$1","ed","allowSpaces","isEmptyTextNode$1","replaceVars","vars","isEq$5","str1","normalizeStyleValue","getTextDecoration","decoration","getParents$2","isVariableFormatName","formatName","hasVariableValues","format","isVariableValue","field","fieldValues","formatter","areSimilarFormats","otherFormatName","validKeys","filterObj","validKey","fmt1","filteredFmt1","fmt2","filteredFmt2","isBlockFormat","isSelectorFormat","isInlineFormat","isMixedFormat","shouldExpandToSelector","expand","isBookmarkNode","getParents$1","isWhiteSpaceNode","isTextBlock","isBogusBr","findParentContentEditable","walkText","findSpace","findContent","findWordEndPoint","includeTrailingSpaces","lastTextNode","textSeeker","textOffset","spaceResult","findSelectorEndPoint","formatList","curFormat","findBlockEndPoint","scopeRoot","isAtBlockBoundary$1","findParentContainer","block_expand","isSelfOrParentBookmark","expandRng","includeTrailingSpace","startPoint","endPoint","walk$2","exclude","firstNode","lastNode","collectSiblings","endNode","findEndPoint","walkBoundary","parent_1","siblings_1","getRanges","ranges","rangeCount","getRangeAt","getSelectedNodes","hasMultipleRanges","getCellsFromRanges","getCellsFromElement","getCellsFromElementOrRanges","selectedCells","getCellsFromEditor","getSel","getClosestTable","cell","getStartNode","getEndNode","getFirstChildren","getLastChildren$1","hasAllContentsSelected","moveEndPoint","hasAnyRanges","sel","runOnRanges","executor","fakeSelectionNodes","fakeNodeRng","preserve","fillBookmark","NodeValue","getOption","api$1","get$2","isZeroWidth","wrapName","applyWordGrab","makeAnnotation","eDoc","decorate","_b","master","_c","_d","_e","annotate","newWrappers","getDoc","finishWrapper","getOrOpenWrapper","processElements","processElement","ctx","processNodes","annotateWithBookmark","undoManager","transact","initialRng","hasFakeSelection","selectionRng","Annotator","changes","annotationChanged","getAll","BookmarkManager","getBookmark","getContentEditableRoot$1","isXYWithinRange","firePreProcess","firePostProcess","fireRemove","fireDetach","fireSwitchMode","fireObjectResizeStart","origin","fireObjectResized","firePreInit","firePostRender","fireInit","firePlaceholderToggle","fireError","errorType","fireFormatApply","fireFormatRemove","VK","BACKSPACE","DELETE","DOWN","ENTER","ESC","LEFT","RIGHT","SPACEBAR","TAB","UP","PAGE_UP","PAGE_DOWN","END","HOME","modifierPressed","shiftKey","ctrlKey","altKey","metaKeyPressed","isContentEditableFalse$5","ControlSelection","elementSelectionAttr","selectedElm","selectedElmGhost","resizeHelper","selectedHandle","resizeBackdrop","startX","startY","selectedElmX","selectedElmY","startW","startH","ratio","resizeStarted","editableDoc","rootDocument","abs","startScrollWidth","startScrollHeight","resizeHandles","nw","ne","se","sw","isImage","isEventOnImageOutsideRange","touch","touches","contextMenuSelectImage","getResizeTargets","firstElementChild","isResizable","createGhostElement","setSizeProp","targets","setGhostElmSize","ghostElm","resizeGhostElement","deltaX","deltaY","proportional","resizeHelperX","resizeHelperY","screenX","screenY","display","scrollWidth","scrollHeight","endGhostResize","wasResizeStarted","showResizeRect","nodeChanged","targetElm","unbindResizeHandleEvents","targetWidth","targetHeight","hideResizeRect","selectedValue","handleElm","startDrag","updateResizeRect","startElm","controlElm","isChildOrEqual","img","disableGeckoResize","getStart","getEnd","isWithinContentEditableFalse","execCommand","handleMSControlSelect_1","delayedSelect","throttledUpdateResizeRect","composing","hasCeProperty","findParent$1","findClosestIeRange","rects","createTextRange","moveToElementText","moveToPoint","moveOutOfContentEditableFalse","parentElement","pointDoc","caretPositionFromPoint","offsetNode","caretRangeFromPoint","isEq$4","rng1","findParent","hasParent$1","hasParentWithName","isTable","isTableCell$2","isCeFalseCaretContainer","hasBrBeforeAfter","isPrevNode","hasContentEditableFalseParent","findTextNodeRelative","isAfterNode","lastInlineElement","parentBlockContainer","normalizeEndPoint","directionLeft","normalize$2","normRng","RangeUtils","normalize","normalizedRng","compareRanges","getCaretRangeFromPoint","Dimension","getOffset","parseFloat","getOuter","aggregate","properties","isNaN","cumulativeInclusions","absoluteMax","api","get$1","walkUp","navigation","frame","view","rest","pathTo","frameElement","Navigation","freeze","__proto__","find$1","frames","loc","excludeFromDescend","fireScrollIntoViewEvent","scrollEvent","fireAfterScrollIntoViewEvent","descend","markerInfo","cleanupFun","createMarker","elementMarker","withMarker","preserveWith","applyWithMarker","withScrollEvents","withElement","startElement","endElement","scrollToMarker","viewHeight","intoWindowIfNeeded","viewportBottom","markerTop","markerBottom","largerThanViewport","align","intoWindow","innerHeight","intoFrame","frameViewHeight","op","viewportBounds","rangeIntoWindow","elementIntoWindow","rangeIntoFrame","elementIntoFrame","scrollElementIntoView","scroller","scrollRangeIntoView","getDocument","focus$1","hasFocus$1","active","create$5","soffset","finish","foffset","SimRange","adt$1","cata","onBefore","onOn","onAfter","getStart$2","situ","before$1","after$1","Situ","domRange","exact","exactFromRange","simRange","getStart$1","startSitu","_finishSitu","_soffset","_finish","_foffset","getWin","SimSelection","browser$1","clamp$1","normalizeRng","isOrContains","isRngInRoot","shouldStore","nativeRangeToSelectionRange","readRange","validate","bookmarkToNativeRng","store","newBookmark","storeNative","restore","isEditorUIElement$1","FocusManager","isEditorUIElement","isManualNodeChange","selectionChange","registerPageMouseUp","throttledStore","mouseUpPage","registerFocusOut","registerMouseUp","registerEditorEvents","register$3","documentFocusInHandler","DOM$8","isEditorContentAreaElement","isUIElement","customSelector","getActiveElement","registerEvents$1","editorManager","focusedEditor","setActive","blurredEditor","activeEditor","unregisterDocumentEvents","setup$l","getContentEditableHost","getCollapsedNode","getFocusInElement","normalizeSelection$1","caretPos","focusBody","hasElementFocus","hasIframeFocus","iframeElement","hasInlineFocus","rawBody","hasUiFocus","hasEditorOrUiFocus","focusEditor","quirks","refreshContentEditable","bookmarkRng","contentEditableHost","activateEditor","skipFocus","getEndpointElement","real","skipEmptyTextNodes","orig","commonAncestorContainer","getSelectedBlocks","endElm","selectedBlocks","processRanges","typeLookup","walk$1","isEmptyTextNode","AstNode","insert","selfAttrs","cloneAttrs","selfAttr","shortEnded","refNode","extractBase64DataUris","dataImageUri","chunks","uris","uri","imageId","re","restoreDataUris","parseDataUri$1","decodeURIComponent","each$d","queryParts","DEFAULT_PORTS","ftp","http","https","mailto","safeSvgDataUrlElements","blockSvgDataUris","allowSvgDataUrls","isInvalidUri","allow_html_data_urls","URI","baseUri","base_uri","source","isProtocolRelative","protocol","toAbsPath","urlMatch","part","userInfo","port","parseDataUri","uriComponents","isDomSafe","options","decodedUri","unescape","pathname","setPath","pathMatch","file","getURI","toRelative","relativeUri","tu","uu","toRelPath","anchor","toAbsolute","noHost","absoluteUri","isSameOrigin","defaultPort","breakPoint","normalizedBase","nb","outPath","normalizedPath","noProtoHost","filteredClobberElements","isValidPrefixAttrName","lazyTempDocument$1","implementation","createHTMLDocument","findMatchingEndTagIndex","startIndex","startTagRegExp","endTagRegExp","shortEndedElements","startMatch","findCommentEndIndex","endMatch","isConditionalComment","lcHtml","endIfIndex","endIndex","endCommentRegexp","checkBogusAttribute","regExp","attrString","SaxParser","form","fix_self_closing","comment","cdata","pi","doctype","parseInternal","base64Extract","endRegExp","stack","attrList","textData","isInternalElement","isShortEnded","elementRule","isValidElement","attribsValue","validAttributesMap","validAttributePatterns","anyAttributesRequired","filteredUrlAttrs","parsingMode","processEndTag","valid","processText","processComment","allow_conditional_comments","processAttr","processMalformedComment","startTag","parseAttribute","val2","val3","fillAttrsMap","attrRule","isNameOrId","tokenRegExp","attrRegExp","selfClosing","self_closing_elements","removeInternalElements","remove_internals","fixSelfClosing","processHtml","matchText","bogusValue","isValidCdataSection","preserve_cdata","findEndTag","trimHtml","tempAttrs","trimContentRegExp","trimInternal","bogusAllRegExp","getTempAttrs","matchLength","endTagIndex","trimExternal","trimEmptyContents","emptyRegExp","setupArgs$3","getInner","getContentFromBody","defaultedArgs","updatedArgs","no_events","getContentInternal","each$c","ElementUtils","attribs","compareObjects","obj1","obj2","makeMap$1","Writer","indent","indentBefore","indent_before","indentAfter","indent_after","entity_encoding","htmlOutput","element_format","reset","getContent","HtmlSerializer","writer","handlers","handler","sortedAttrs","inner","nonInheritableStyles","Set","nonInheritableStylesArr","shorthandStyleProps","getStyleProps","isNonInheritableStyle","hasInheritableStyles","getLonghandStyleProps","hasStyleConflict","nodeStyleProps","parentNodeStyleProps","valueMismatch","parentValue","nodeStyleProp","propExists","longhandProps","isChar","delta","isBeforeSpace","isAfterSpace","isEmptyText","matchesElementPosition","isImageBlock","isCefNode","isBeforeImageBlock","isAfterImageBlock","isBeforeMedia","isAfterMedia","isBeforeTable","isAfterTable","isBeforeContentEditableFalse","isAfterContentEditableFalse","getLastChildren","rawNode","removeTrailingBr","allBrs","fillWithPaddingBr","trimBlockTrailingBr","lastChildPrevSibling","dropLast","parentsAndSelf","navigateIgnoreEmptyTextNodes","getClosestBlock$1","isAtBeforeAfterBlockBoundary","newPos","fromBlock","isAtBlockBoundary","isAtStartOfBlock","isAtEndOfBlock","isBeforeBlock","isAfterBlock","isBr","findBr","parentBlocks","isBeforeBr$1","isAfterBr","findPreviousBr","findNextBr","isInMiddleOfText","getClosestBlock","hasSpaceBefore","hasSpaceAfter","isPreValue","isInPre","isAtBeginningOfBody","isAtEndOfBody","isAtLineBoundary","needsToHaveNbsp","needsToBeNbspLeft","needsToBeNbspRight","needsToBeNbsp","isNbspAt","hasNbsp","normalizeNbspMiddle","chars","normalizeNbspAtStart","firstPos","normalizeNbspInMiddleOfTextNode","newText","normalizeNbspAtEnd","lastPos","normalizeNbsps","normalizeNbspsInEditor","normalizeContent","isStartOfContent","isEndOfContent","previousCharIsSpace","normalize$1","replaceData","normalizeWhitespaceAfter","whitespaceCount","normalizeWhitespaceBefore","mergeTextNodes","prevNode","normalizeWhitespace","mergeToPrev","whitespaceOffset","newNode","removeNode","insertData","needsReposition","beforeOrStartOf","afterOrEndOf","getPreviousSiblingCaretPosition","getNextSiblingCaretPosition","findCaretPositionBackwardsFromElm","startPosition","findCaretPositionForwardsFromElm","findCaretPositionBackwards","findCaretPositionForward","findCaretPosition","findCaretPosOutsideElmAfterDelete","setSelection$1","eqRawNode","paddEmptyBlock","deleteNormalized","afterDeletePosOpt","prevTextOpt","nextTextOpt","isInlineElement","deleteElement$2","moveCaret","afterDeletePos","parentBlock","normalizedAfterDeletePos","setContent","setCursorLocation","paddPos","isRootFromElement","getTableCells","getTableDetailsFromRange","getTable","startTable","endTable","isStartInTable","isEndInTable","isSameTable","isMultiTable","tableCellRng","tableSelection","cells","deleteAction","singleCellTable","fullTable","partialTable","multiTable","getClosestCell$1","isExpandedCellRng","cellRng","getTableFromCellRng","startParentTable","endParentTable","isSingleCellTable","rows","getCellRng","startCell","endCell","getCellRangeFromStartTable","getCellRangeFromEndTable","getTableSelectionFromCellRng","getTableSelections","selectionDetails","sameTableSelection","startTableSelection","endTableSelection","getCellIndex","getSelectedCells","isSingleCellTableContentSelected","optCellRng","unselectCells","otherContentRng","handleSingleTable","handleMultiTable","startTableSelectedCells","endTableSelectedCells","getActionFromRange","freefallRtl","cleanCells","getOutsideBlock","handleEmptyBlock","startInTable","emptyBlock","deleteContentInsideCell","isFirstCellInSelection","insideTableRng","deleteCellContents","collapseAndRestoreCellSelection","selectedNode","emptySingleTableCells","outsideDetails","editorRng","cellsToClean","outsideBlock","deleteContents","endPointCell","emptyMultiTableCells","startTableCells","endTableCells","betweenRng","startTableCellsToClean","endTableCellsToClean","moveSelection","lastBlock","additionalCleanupNodes","deleteTableElement","deleteCellRange","action","deleteCaptionRange","emptyElement","deleteTableRange","getParentCaption","deleteRange$2","getParentCell","deleteBetweenCells","fromCell","toCell","isDeleteOfLastCharPos","fromCaption","emptyCaretCaption","validateCaretCaption","toCaption","deleteCaretInsideCaption","deleteCaretCells","deleteCaretCaption","isNearTable","isBeforeOrAfterTable","fromPos","deleteCaret$3","backspaceDelete$9","normalizeBlockSelectionRange","newEndPos","hasOnlyOneChild$1","isPaddingNode","isPaddedEmptyBlock","blockElements","isEmptyFragmentElement","nonEmptyElements","isListFragment","cleanupDomFragment","domFragment","toDomFragment","listItems","isPadding","isListItemPadded","isEmptyOrPadded","trimListItems","getParentLi","isParentBlockLi","getSplit","beforeRng","afterRng","cloneContents","findFirstIn","caretWalker","newCaretPos","findLastOf","insertMiddle","insertBefore$1","insertAfter$1","insertAtCaret$1","liTarget","liElms","BEGINNING","isAt","trimOrPadLeftRight","isTableCell$1","isTableCellContentSelected","validInsertion","trimBrsFromTableCell","reduceInlineTextElements","merge","textInlineElements","root_1","elementUtils_1","styleConflict","markFragmentElements","unmarkFragmentElements","isPartOfFragment","canHaveChildren","moveSelectionToMarker","nextRng","parentEditableElm","findNextCaretRng","deleteSelectedContent","insertHtmlAtCaret","details","parser","bookmarkHtml","paste","caretElement","parserArgs","_selectionOverrides","showBlockCaretContainer","invalid","addVisual","traverse","findMatchingNodes","nodeFilters","attributeFilters","nodeMatches","attrMatches","name_2","filter$1","defaultFormat$1","isTreeNode","setEditorHtml","noSelection","setContentString","padd","forcedRootBlockName","no_selection","isRootContent","setContentTree","getNodeFilters","getAttributeFilters","setupArgs$2","setContentInternal","ensureIsRoot","transform","transformed","closest$1","isEq$3","matchesUnInheritedFormatSelector","inherit","matchParents","similar","matchNode","matchName$1","matchItems","itemName","onmatch","expectedValue","isEmptyValue","match$2","matchAll","matchedFormatNames","checkedMap","rawElm","canApply","defaultBlock","matchAllOnNode","formatNames","matchSimilar","ZWSP","CARET_ID","importNode","getEmptyCaretContainers","isCaretContainerEmpty","findFirstTextNode","createCaretContainer","fill","trimZwspFromCaretContainer","removeCaretContainerNode","removeCaretContainer","insertCaretContainerNode","formatNode","appendNode","insertFormatNodesIntoCaretContainer","formatNodes","innerMostFormatNode","cleanFormatNode","validFormats","matchedFormats","uniqueFormats","fmtName","clonedFormatNode","applyCaretFormat","wordcharRegex","removeCaretFormat","hasContentAfter","expandedRng","newCaretContainer","cleanedFormatNode","caretTextNode","disableCaretContainer","keyCode","setup$k","replaceWithCaretFormat","innerMost","isFormatElement","inlineElements","isEmptyCaretFormatElement","postProcessHooks","each$b","addPostProcessHook","hooks","postProcess$1","hasPreSibling","pre","isPre","joinPre","pre1","pre2","each$a","isElementNode$1","findElementSibling","mergeSiblingsNodes","elementUtils","tmpSibling","mergeSiblings","merge_siblings","clearChildStyles","clear_child_styles","links","processChildElements","unwrapEmptySpan","hasStyle","applyStyle","removeResult","MCE_ATTR_RE","each$9","isEq$2","isTableCellOrRow","isChildOfInlineParent","getContainer","lastIdx","normalizeTableSelection","childNode","wrap$1","wrapWithSiblings","matchName","isColorFormatAndAnchor","rootBlockElm","forcedRootBlock","list_block","forced_root_block_attrs","removeFormatInternal","compareNode","stylesModified","preserve_attributes","attrsToPreserve","remove_similar","valueOut","removeFormat$1","newName","findFormatRoot","formatRoot","removeFormatFromClone","wrapAndSplit","lastClone","firstClone","formatRootParent","mixed","remove$1","splitToFormatRoot","isRemoveBookmarkNode","removeNodeFormat","fmt","lastContentEditable","currentNodeMatches","textDecorations","textDecoration","removeRngStyle","ceFalseOverride","each$8","mergeTextDecorationsAndColor","processTextDecorationsAndColor","mergeBackgroundColorAndFontSize","backgroundColor","mergeSubSup","mergeWithChildren","mergeWithParents","merge_with_parents","each$7","isElementNode","canFormatBR","parentName","validBRParentElements","hasCaretNodeSibling","applyFormat$1","setElementFormat","onformat","styleVal","applyNodeStyle","found","createWrapElement","wrapElm","applyRngStyle","nodeSpecific","currentWrapElm","getChildCount","mergeStyles","childElement","childCount","formatItem","curSelNode","firstFormat","forced_root_block","fake","hasVars","setup$j","registeredFormatListeners","updateAndFireChangeCallbacks","nodeOrRange","fallbackElement","matchingNode","isMatchingNode","matchingFormat","isUnableToMatch","registeredCallbacks","runIfChanged","spec","node_1","withSimilar","withoutSimilar","withVars","addListeners","formats","formatChangeItems","getCurrent","toAppendTo","removeListeners","formatChangedInternal","toggle","fromElements","tableModel","tableRow","cellPosition","getSpan","fillout","rowspan","colspan","y2","x2","cellExists","skipCellsX","getWidth","row","findElementPos","extractRows","sx","sy","ey","newRows","subTable","createDomTable","tableElement","tableBody","modelRowsToDomRows","tableElm","toDom","subsection","findParentListContainer","getFullySelectedListWrappers","_li","listCont","listElm","listStyles","_style","innerElm","wrapped","directListWrappers","commonAnchorContainer","getWrapElements","wrapElements","listWrappers","allWrappers","emptyFragment","getFragmentFromRange","getParentTable","getTableFragment","selectedTableCells","firstCell","lastCell","fullTableModel","sectionedTableModel","getSelectionFragment","read$3","trimLeadingCollapsibleText","isCollapsibleWhitespace","getInnerText","bin","shouldTrim","getContextNodeName","parentBlockOpt","getTextContent","contextNodeName","shouldTrimSpaces","nonRenderedText","parentBlockText","textIndex","hasProceedingSpace","hasTrailingSpace","getSerializedContent","tmpElm","contextual","setupArgs$1","getSelectedContentInternal","KEEP","INSERT","vDown","vUp","snake","diag","buildScript","start1","end1","start2","end2","middle","getMiddleSnake","i2","buildSnake","sum","getOuterHtml","insertAt","removeAt","applyDiff","read$2","write","fragments","currentFragments","lazyTempDocument","hasIframes","createFragmentedLevel","beforeBookmark","createCompleteLevel","createFromEditor","trimmedFragments","trimmed","applyToEditor","level","getLevelContent","getCleanLevelContent","hasEqualContent","level1","level2","hasEqualCleanedContent","isEq$1","isUnlocked","locks","setTyping","typing","endTyping","endTypingLevelIgnoreLocks","beforeChange$1","addUndoLevel$1","currentLevel","lastLevel","bm","customUndoRedoLevels","setDirty","clear$1","extra$1","callback1","callback2","redo$1","undo$1","reset$1","hasUndo$1","hasRedo$1","transact$1","beforeChange","ignore","ignore$1","addVisualInternal","hasVisual","matchedElm","value_1","cls_1","makePlainAdaptor","undo","redo","hasUndo","hasRedo","extra","formatChanged","insertContent","getModel","makeRtcAdaptor","rtcEditor","defaultVars","_undoManager","_locks","_index","_node","_similar","_rfl","_format","_details","getRawModel","makeNoopAdaptor","nul","isRtc","plugins","getRtcSetup","rtcPlugin","setup","setup$i","editorCast","rtcInstance","rtc","isRemote","getRtcInstanceWithFallback","getRtcInstanceWithError","addUndoLevel","matchFormat","matchAllFormats","matchNodeFormat","canApplyFormat","closestFormat","applyFormat","removeFormat","toggleFormat","getContent$2","setContent$2","getSelectedContent","addVisual$1","getContent$1","walkPastBookmark","outer","outerElm","oldLength","normalizeTextIfRequired","mergeAndNormalizeText","outerNode","normalizer","innerTextNode","rngSetContent","prevText","nextText","setupArgs","cleanContent","contextBlock","contextArgs","setContent$1","eventArgs","createContextualFragment","deleteFromCallbackMap","newCallbacks","SelectorChanged","selectorChangedData","currentSelectors","findMatchingNode","selectorChangedWithUnbind","matchedSelectors","isNativeIeSelection","isAttachedToDom","isValidRange","EditorSelection","selectedRange","explicitRange","getRng$1","getEnd$1","bookmarkManager","compareEndPoints","tryCompareBoundaryPoints","how","sourceRange","destinationRange","compareBoundaryPoints","anchorNode","START_TO_START","END_TO_END","ieRange","removeAllRanges","addRange","setBaseAndExtent","focusNode","setNode","getSelectedBlocks$1","isForward","anchorRange","anchorOffset","focusRange","focusOffset","selectorChanged","getScrollContainer","scrollContainer","placeCaretAt","controlSelection","removeAttrs","addFontToSpansFilter","domParser","fontSizes","face","addStrikeToSpanFilter","addFilters","convert_fonts_to_spans","font_size_legacy_values","register$2","inline_styles","blobUriToBlob","rejectWithError","xhr_1","XMLHttpRequest","open","responseType","response","send","uriParts","buildBlob","atob","Uint8Array","Blob","dataUriToBlob","uriToBlob","blobToDataUri","blob","reader","FileReader","onloadend","readAsDataURL","count$1","imageToBlobInfo","blobCache","base64","blobInfo","getByUri","image","dataUri","getByData","getAllImages","ImageScanner","uploadStatus","cachedPromises","images","isUploaded","promises","imageInfo","newPromise","catch","paddEmptyNode","brPreferred","padd_empty_with_br","isPaddedWithNbsp","hasOnlyChild","isPadded","whitespaceElements","isLineBreakNode","isBogusImage","isInternalImageSource","isValidDataImg","images_dataimg_filter","imgElem_1","Image","registerBase64ImageFilter","blob_cache","processImage","inputSrc","blobUri","addAttributeFilter","register$1","remove_trailing_brs","prevName","whiteSpaceElements","appendRel","addNoOpener","newRel","allow_unsafe_link_target","allow_html_in_named_anchor","fix_list_elements","classValue","validClassesMap","each$6","explode$2","extend$4","DomParser","matchedNodes","matchedAttributes","root_name","fixInvalidChildren","nonSplitableElements","textBlockElements","removeOrUnwrapInvalidNode","originalNodeParent","children_1","newParent","tempNode","fixed","filterNode","currentNode","list","fi","fl","invalidChildren","getRootBlockName","textRootBlockElements","rootBlockName","startWhiteSpaceRegExp","endWhiteSpaceRegExp","allWhiteSpaceRegExp","isAllWhiteSpaceRegExp","isInWhiteSpacePreservedElement","addRootBlocks","rootBlockNode","createNode","removeWhitespaceBefore","textVal","textNodeNext","cloneAndExcludeBlocks","isTextRootBlockEmpty","parent_2","attrFiltersLen","isNodeEmpty","htmlParser","internalName","hasChildren","trimTrailingBr","brNode1","brNode2","preProcess","oldDoc","clonedNode","impl","doc_1","shouldFireEvent","hasEventListeners","addTempAttr","postProcess","outArgs","getHtmlFromNode","parseHtml","serializeNode","htmlSerializer","toHtml","DomSerializerImpl","addRules","setRules","DomSerializer","domSerializer","defaultFormat","DOM$7","restoreOriginalStyles","orgDisplay","safeDestroy","clearDomReferences","contentAreaContainer","formElement","editorContainer","bodyElement","restoreForm","_mceOldSubmit","submit","formEventDelegate","editorUpload","save","is_removing","unbindAllNativeEvents","automatic","destroyed","_beforeUnload","theme","bothObjects","deepMerge","baseMerge","merger","objects","curObject","deprecatedSettings","deprecatedPlugins","movedToPremiumPlugins","getDeprecatedSettings","settingNames","setting","getDeprecatedPlugins","hasPlugin","plugin","pluginNames","logDeprecationsWarning","rawSettings","finalSettings","hasDeprecatedPlugins","hasDeprecatedSettings","isLegacyMobileTheme","listJoiner","themesMessage","pluginsMessage","settingsMessage","sectionResult","sections","deviceDetection","legacyMobilePlugins","defaultTouchSettings","table_grid","object_resizing","resize","normalizePlugins","trimmedPlugins","filterLegacyMobilePlugins","extractSections","getSection","sectionSettings","hasSection","isSectionTheme","section","getSectionConfig","getToolbarMode","getDefaultSettings","documentBaseUrl","baseDefaults","toolbar_mode","document_base_url","add_form_submit_trigger","submit_patch","add_unload_trigger","convert_urls","relative_urls","remove_script_host","visual","hidden_input","convertURL","getDefaultMobileSettings","mobileSettings","defaultMobileSettings","toolbar_sticky","defaultPhoneSettings","menubar","getExternalPlugins","overrideSettings","userDefinedExternalPlugins","external_plugins","combinePlugins","forcedPlugins","getPlatformPlugins","isMobileDevice","desktopPlugins","mobilePlugins","processPlugins","defaultOverrideSettings","forced_plugins","mobileConfig","platformPlugins","combinedPlugins","isOnMobile","combineSettings","defaultSettings","defaultDeviceSettings","mobile","extendedSettings","getEditorSettings","deprecation_warnings","getFiltered","getParamObject","isArrayOf","CreateIconManager","iconPack","icons","IconManager","getProp","propName","getComputedSizeProp","getClientWidth","getClientHeight","getMarginTop","getMarginLeft","isInsideElementContentArea","bodyElm","transpose","isXYInContentArea","transposedPoint","fromDomSafe","isEditorAttachedToDom","rawContainer","getContentAreaContainer","NotificationManagerImpl","unimplemented","close","getArgs","NotificationManager","notifications","getImplementation","getNotificationManagerImpl","getTopNotification","progressBar","timeout","addNotification","notification","closeNotification","otherNotification","fireEvent","getEl","getNotifications","registerEvents","serviceMessage","WindowManagerImpl","openUrl","alert","confirm","getParams","setParams","WindowManager","dialogs","getWindowManagerImpl","funcBind","fireOpenEvent","dialog","fireCloseEvent","addDialog","closeDialog","otherDialog","getTopDialog","storeSelectionAndOpenDialog","openDialog","windowManagerImpl","displayNotification","notificationManager","displayError","_skinLoaded","uploadError","logError","createLoadError","pluginLoadError","iconsLoadError","languageLoadError","pluginInitError","initError","isContentCssSkinName","getContentCssUrls","transformToUrls","getFontCssUrls","cssLinks","skinUrl","contentCssFile","documentBaseURI","appendContentCssFromSettings","contentCSS","UploadStatus","PENDING","UPLOADED","blobUriStatuses","createStatus","resultUri","hasBlobUri","getResultUri","isPending","markPending","markUploaded","removeFailed","rnd","uuid","BlobCache","mimeToExt","mime","mimes","filename","toBlobInfo","findFirst","cachedBlobInfo","removeByUri","revokeObjectURL","Uploader","pendingPromises","pathJoin","path1","path2","defaultHandler","progress","xhr","withCredentials","credentials","upload","onprogress","loaded","total","json","JSON","responseText","basePath","formData","FormData","noUpload","handlerSuccess","handlerFailure","resolvePending","uploadBlobInfo","openNotification","closeNotification_1","failureOptions","percent","isDefaultHandler","pendingUploadBlobInfo","uploadBlobs","blobInfos","createUploader","ImageUploader","uploader","showNotification","UploadChangeHandler","lastChangedLevel","fireIfChanged","EditorUpload","imageScanner","urlFilters","changeHandler","aliveGuard","cacheInvalidator","replaceString","replaceImageUrl","targetUrl","replacementUrl","replacementString","replaceUrlInUndoStack","replaceImageUriInView","uploadImages","scanForImages","imageInfos","imagesToRemove","filteredResult","uploadInfo","uploadUri","uploadImagesAuto","isValidDataUriImage","imgElm","dataImgFilter","addFilter","resultItem","replaceBlobUris","source_view","valigntop","verticalAlign","valignmiddle","valignbottom","alignleft","preview","textAlign","aligncenter","marginLeft","marginRight","alignright","alignjustify","bold","fontWeight","italic","fontStyle","underline","strikethrough","forecolor","hilitecolor","fontname","fontFamily","fontsize","fontSize","lineheight","lineHeight","fontsize_class","blockquote","subscript","superscript","_fmt","_itemName","customValue","removeformat","FormatRegistry","unregister","each$5","parsedSelectorToHtml","ancestry","sItem","getRequiredParent","elmRule","wrapInHtml","parentCandidate","ancestorName","parentRequired","siblingElm","parseSelectorItem","$0","$3","$4","parseSelector","getCssText","previewFrag","previewCss","parentFontSize","previewStyles","removeVars","previewOpt","previewElm","numValue","setup$h","addShortcut","Formatter","formatChangeState","shouldIgnoreCommand","cmd","isFirstTypedCharacter","addNonTypingUndoLevel","command","isDirty","modKey","isInsertReplacementText","inputType","isInsertTextDataNull","isInsertFromPasteOrDrop","addKeyboardShortcuts","UndoManager","nonTypingKeycodes","placeholderAttr","isKeyboardEvent","isDeleteEvent","isNonTypingKeyboardEvent","isTypingKeyboardEvent","isVisuallyEmpty","isForcedRootBlockFalse","setup$g","placeholder","updatePlaceholder","showPlaceholder","isPlaceholderShown","strongRtl","hasStrongRtl","isInlineTarget","findInlineParents","findRootInline","hasSameParentBlock","block1","block2","isAtZwsp","normalizePosition","normalizeForwards","normalizeBackwards","isBeforeRoot","isTextBlockOrListItem","getParentBlock$1","placeCaretInEmptyBody","paddEmptyBody","willDeleteLastPositionInElement","normalizedFirstPos","normalizedLastPos","normalizedFromPos","nextPos","prevPos","blockPosition","blockBoundary","getBlockPosition","containerElm","isDifferentBlocks","hasSameParent","parent1","parent2","isEditable$1","skipLastBr","lastPositionInBlock","readFromRange","fromBlockPos","toBlockPos","blockPos","read$1","getChildrenUntilBlockBoundary","extractChildren","removeEmptyRoot","isEmptyBefore","nestedBlockMerge","toBlock","insertionPoint","sidelongBlockMerge","findInsertionPoint","parentsAndSelf$1","getInsertionPoint","trimBr","mergeBlockInto","mergeBlocks","backspaceDelete$8","deleteRangeMergeBlocks","isRawNodeInTable","isSelectionInTable","isEverythingSelected","noPrevious","noNext","emptyEditor","deleteRange$1","backspaceDelete$7","_forward","isContentEditableTrue$2","isContentEditableFalse$4","showCaret","getNodeRange","renderCaretAtRange","caretPositionNode","caretPositionBeforeNode","ceRoot","renderRangeCaret","isBeforeBoundary","isAfterBoundary","trimEmptyTextNode","deleteContentAndShowCaret","peekCaretPosition","caretRange","deleteRange","deleteBoundaryText","getNextPosFn","isBeforeFn","nextCaretPosition","backspaceDelete$6","isCompoundElement","DeleteAction","moveToElement","moveToPosition","isAtContentEditableBlockCaret","caretLocation","isDeleteFromCefDifferentBlocks","deleteEmptyBlockOrMoveToCef","toCefElm","blockElm","findCefPosition","getContentEditableBlockAction","skipMoveToActionFromInlineCefToContent","getContentEditableAction","read","deleteElement$1","hideFakeCaret","getAncestorCe","backspaceDeleteCaret","deleteOffscreenSelection","backspaceDeleteRange","hasCefAncestor","paddEmptyElement","backspaceDelete$5","deleteCaret$2","backspaceDelete$4","isText","startsWithCaretContainer","endsWithCaretContainer","createZwsp","insertInline","insertInlineBefore","insertInlineAfter","insertInlinePos","isPosCaretContainer","caretNode","renderCaret","evaluateUntil","fns","Location","rescope$1","nPos","isNotInsideFormatCaretContainer","findInsideRootInline","start$1","isValidLocation","readLocation","getName","outside","inside","isEq","location1","location2","betweenInlines","fromInline","toInline","skipNoMovement","fromLocation","toLocation","findLocationTraverse","findLocationSimple","findLocation$1","hasSelectionModifyApi","modify","moveRel","moveByWord","BreakType","flip","positions","getBreakType","currentPos","Br","Block","Wrap","getPositionsUntil","breakType","breakAt","Eol","getAdjacentLinePositions","getPositionsUntilBreak","findClosestHorizontalPositionFromPoint","lastRect","newRect","lastDist","newDist","findClosestHorizontalPosition","targetRect","getPositionsUntilPreviousLine","getPositionsUntilNextLine","getPositionsAbove","getPositionsBelow","isAtFirstLine","isAtLastLine","getFirstLinePositions","getLastLinePositions","getNodeClientRects","toArrayWithNode","VDirection","findUntil","walkUntil$1","isAboveFn","isBeflowFn","line","targetClientRect","aboveLineNumber","lineNumber","isLineNumber","upUntil","Up","downUntil","Down","positionsUntil","isBelowFn","getClientRect","isAboveLine","isLine","isContentEditableFalse$3","findNode","distanceToRectLeft","distanceToRectRight","isInsideX","isInsideY","isNodeClientRect","findClosestClientRect","allowInside","oldClientRect","oldDistance","newDistance","walkUntil","includeChildren","findLineNodeRects","targetNodeRect","checkPosFn","lineRects","getFakeCaretTargets","caretInfo","closestFakeCaret","fakeTargetNodeRects","targetNodeRects","checkInside","closestNodeRect","moveToRange","renderRangeCaretOpt","moveHorizontally","isBefore","isAfter","rangeIsInContainerBlock","moveVertically","caretClientRect","walkerFn","linePositions","nextLinePositions","nextLineRect","dist1","dist2","caretPositions","closestNextLineRect","getLineEndPoint","moveToLineEndPoint$3","setCaretPosition","setSelected","renderCaretLocation","findLocation","isInlineTarget$1","toggleInlines","inlineBoundaries","selectedInlines","targetInlines","safeRemoveCaretContainer","renderInsideInlineCaret","inlines","_inline","move$2","moveWord","_caret","setupSelectedState","moveNextWord","movePrevWord","moveToLineEndPoint$2","linePoint","outsideLoc","rangeFromPositions","hasOnlyTwoOrLessPositionsLeft","setCaretLocation","deleteFromTo","rescope","backspaceDeleteCollapsed","toPosition","backspaceDelete$3","getParentInlines","hasOnlyOneChild","deleteLastPosition","parentInlines","isFormatElement$1","deleteCaret$1","backspaceDelete$2","deleteElement","deleteCaret","isNearMedia","backspaceDelete$1","isEditable","parseIndentValue","number","getIndentStyleName","useMargin","indentStyleName","indentElement","unit","styleValue","validateBlocks","intentValue","canOutdent","getBlocksToIndent","isReadOnly","isListComponent","parentIsListComponent","indentation","indentUnit","indentValue","queryCommandState","backspaceDelete","nativeCommand","deleteCommand","forwardDeleteCommand","setup$f","addCommand","SIGNIFICANT_MOVE","LONGPRESS_DELAY","getTouch","isFarEnough","distX","distY","setup$e","startData","longpressFired","debounceLongpress","isEqualNode","isBlockElement","isValidTarget","hasBlockParent","shouldRemoveTextNode","rootNodeName","restoreSelection","setup$d","findBlockCaretContainer","removeIeControlRect","blockCaretContainer","handleBlockContainer","setup$c","isContentEditableFalse$2","moveToCeFalseHorizontally","moveToCeFalseVertically","createTextBlock","textBlock","exitPreBlock","getVisualCaretPosition$1","newBlock","getHorizontalRange","getVerticalRange","down","moveH$2","newRange","moveV$3","moveToLineEndPoint$1","isCefPosition","isTarget","rangeBefore","insertElement","insertBr","insertBlock","insertEmptyLine","getClosestTargetBlock","isAtFirstOrLastLine","moveCaretToNewEmptyLine","rootBlockAttrs","moveV$2","defaultPatterns","patterns","matchesEvent","match$1","execute","moveH$1","moveV$1","moveToLineEndPoint","deflate","getCorners","getYAxisValue","tds","findClosestCorner","corners","newCorner","oldCorner","oldDist","sqrt","getClosestCell","isTargetCorner","corner","getBottomValue","getTopValue","getClosestCellAbove","getClosestCellBelow","findClosestPositionInAboveCell","findClosestPositionInBelowCell","hasNextBreak","lineInfo","breakPos","startsWithWrapBreak","startsWithBrBreak","isAtTableCellLine","isAtFirstTableCellLine","isAtLastTableCellLine","isCaretAtStartOrEndOfTable","navigateHorizontally","_td","getClosestAbovePosition","getClosestBelowPosition","renderBlock","navigateVertically","move$1","mover","moveH","moveV","executeKeydownOverride$3","setup$b","executeKeydownOverride$2","executeKeyupOverride","setup$a","firstNonWhiteSpaceNodeSibling","moveToCaretPosition","getEditableRoot$1","editableRoot","getParentBlock","getParentBlockName","isListItemParentBlock","hasFirstChild","isFirstChild","hasParent","isListBlock","isNestedList","getContainerBlock","containerBlock","containerBlockParent","isFirstOrLastLi","insert$3","createNewBlock","newBlockName","tmpRng","trimZwsp","isEmptyAnchor","isTableCell","containerAndSiblingName","canSplitBlock","trimInlineElementsOnLeftSideOfBlock","firstChilds","normalizeZwspOffset","includeZwspInRange","trimLeadingLineBreaks","getEditableRoot","applyAttributes","forcedRootBlockAttrs","attrStyles","currentStyles","newStyles","attrClassesOpt","attrClasses","currentClassesOpt","currentClasses","filteredClasses","newClasses","appliedAttrs","remainingAttrs","setForcedBlockAttrs","wrapSelfAndSiblingsInDefaultBlock","addBrToBlockIfNeeded","insert$2","parentBlockName","isAfterLastNodeInContainer","isCaretAtStartOrEndOfBlock","normalizedOffset","insertNewBlockAfter","containerBlockName","hasRightSideContent","moveSelectionToBr","brElm","extraBr","insertBrAtCaret","isControlKey","insertBrBefore","insertBrAfter","hasBrAfter","isBeforeBr","isAnchorLink","isInsideAnchor","readInlineAnchorLocation","insertBrOutsideAnchor","insert$1","anchorLocation","shouldInsertBr","shouldBlockNewLine$1","newLineAction","shouldBlockNewLine","_shiftKey","isBrMode","requiredState","brMode","inListBlock","inBlock","inPreBlock","inSummaryBlock","shouldPutBrInPre","inBrContext","hasShiftKey","_editor","canInsertIntoEditableRoot","rootEditable","predicates","isMatch","getAction","handleEnterKeyEvent","setup$9","executeKeydownOverride$1","setup$8","setupIeInput","keypressThrotter","setup$7","isComposing","platform","executeKeyupAction","isPageUpDown","setNodeChangeBlocker","blocked","setup$6","insertTextAtPosition","insertNbspAtPosition","insertSpaceAtPosition","locationToCaretPosition","insertInlineBoundarySpaceOrNbsp","checkPos","setSelection","insertSpaceOrNbspAtSelection","executeKeydownOverride","setup$5","registerKeyboardOverrides","setup$4","NodeChange","lastPath","lastRng","nativeRng","fakeRng","isSameElementPath","initialized","currentPath","preventSummaryToggle","filterDetails","setup$3","isTextBlockNode","normalizeSelection","setup$2","detail","getAbsolutePosition","getBodyPosition","getScrollPosition","getBodyScroll","inlineScroll","iframeScroll","getMousePosition","iframePosition","scrollPosition","calculatePosition","bodyPosition","mousePosition","calc","isContentEditableFalse$1","isContentEditableTrue$1","isDraggable","isValidDropTarget","targetElement","dragElement","cloneElement","cloneElm","createGhost","clonedElm","opacity","overflow","padding","boxSizing","appendGhostToBody","moveGhost","maxX","maxY","overflowX","removeElement","isLeftMouseButtonPressed","applyRelPos","relX","ceElm","elmPos","dragging","relY","ghost","move","throttledPlaceCaretAt","movement","targetPos","getRawTarget","drop","targetClone_1","removeDragState","bindFakeDragEvents","pageDom","dragStartHandler","dragHandler","dropHandler","dragEndHandler","blockIeDrop","realTarget","blockUnsupportedFileDrop","preventFileDrop","dataTransfer","types","preventFileDropIfUIElement","editorRoot","eventNames","init$2","setup$1","renderFocusCaret","isContentEditableTrue","isContentEditableFalse","getContentEditableRoot","SelectionOverrides","fakeCaret","realSelectionId","selectedElement","isFakeSelectionElement","isFakeSelectionTargetElement","isNearFakeSelectionElement","getRealSelectionElement","setRange","getRange","contentEditableRoot","removeElementSelection","hasNormalCaretPosition","hasBetterMouseTarget","targetBlock","setElementSelection","fakeCaretInfo","normalizeShortEndedElementSelection","isPasteBin","isRangeInCaretContainer","clipboardData","realSelectionElement","clearData","setData","outerText","isWithinCaretContainer","setupOffscreenSelection","targetClone","origTargetClone","$realSelectionContainer","selectElement","nodeElm","afterNode","Quirks","isGecko","isWebKit","mceInternalUrlPrefix","mceInternalDataType","setEditorCommandState","setMceInternalContent","selectionHtml","internalContent","escape","getMceInternalContent","insertClipboardContents","internal","queryCommandSupported","emptyEditorWhenDeleting","serializeRng","allContentsSelected","allRng","allSelection","selectAll","shortcuts","documentElementEditingFocus","removeHrOnBackspace","Range","body_1","blur","selectControlElements","removeStylesWhenDeletingAcrossBlockElements","getAttributeApplyFunction","template","setAttributeNode","isSelectionAcrossElements","disableBackspaceIntoATable","removeBlockQuoteOnBackSpace","setGeckoEditingOptions","setOpts","addBrAfterLastLinks","fixLinks","setDefaultBlockType","showBrokenImageIcon","contentStyles","restoreFocusOnKeyDown","bodyHeight","blockCmdArrowNavigation","selection_1","disableAutoUrlDetect","tapLinksAndImages","blockFormSubmitInsideEditor","removeAppleInterchangeBrs","ieInternalDragAndDrop","setupRtc","DOM$6","appendStyle","getRootName","removeUndefined","mkSchemaSettings","boolean_attributes","move_caret_before_on_enter_elements","non_empty_elements","short_ended_elements","text_inline_elements","whitespace_elements","format_empty_lines","mkParserSettings","mkSerializerSettings","createParser","autoFocus","auto_focus","moveSelectionToFirstCaretPosition","initEditor","bindPendingEventDelegates","execCallback","getStyleSheetLoader$1","ui","makeStylesheetLoadingPromises","framedFonts","loadContentCss","removeCss","contentCssText_1","allStylesheets","content_style","preInit","browser_spellcheck","gecko_spellcheck","spellcheck","directionality","protect","loadInitialContent","startContent","initEditorWithInitialContent","initContentBody","skipWrite","visibility","orgVisibility","iframeHTML","hex_colors","force_hex_style_colors","annotator","_nodeChangeDispatcher","setupRtcThunk","setProgressState","_rtcMode","DOM$5","relaxDomain","ifr","domain","hostname","bodyUuid","domainRelaxUrl","createIframeElement","title","customAttrs","iframe","frameBorder","allowTransparency","getIframeHtml","bodyId","bodyClass","translatedAriaText","createIframe","iframeTitle","isDomainRelaxed","iframeContainer","init$1","boxInfo","hidden","DOM$4","initPlugin","initializedPlugins","Plugin","pluginInstance","trimLegacyPrefix","initPlugins","initIcons","iconPackName","currentIcons","loadIcons","svgData","icon","addIcon","initTheme","Theme","renderFromLoadedTheme","renderUI","renderFromThemeFunc","iframeHeight","createThemeFalseResult","renderThemeFalseIframe","renderThemeFalse","renderThemeUi","augmentEditorUiApi","uiApiFacade","disable","isDisabled","enable","renderInfo","DOM$3","hasSkipLoadPrefix","loadLanguage","scriptLoader","languageCode","languageUrl","url_1","loadTheme","themeUrl","getIconsUrlMetaFromUrl","getIconsUrlMetaFromName","defaultIconsUrl","customIconsUrl","urlMeta","loadPlugins","depPlugin","url_2","getStyleSheetLoader","render","snapshot","resetContent","triggerSave","windowManager","set_dirty","legacyPropNames","getSpecifiedFontProp","getProperty","legacyPropName","normalizeFontFamily","getComputedFontProp","getFontProp","getFontSize","getFontFamily","findFirstCaretElement","getCaretElement","atStartOfNode","bindRange","binder","mapRange","mapper","fromFontSizeNumber","fontSizeNumber","fontClasses","normalizeFontNames","font","fonts","fontNameAction","fontNameQuery","fontSizeAction","fontSizeQuery","lineHeightQuery","specifiedStyle","computedStyle","lineHeightAction","processValue","insertAtCaret","each$4","EditorCommands","commands","setupCommands","skip_focus","customCommand","queryCommandValue","addCommands","commandList","addQueryStateHandler","addQueryValueHandler","hasCustomCommand","execNativeCommand","isFormatMatch","storeSelection","selectionBookmark","_command","_ui","queryCommandEnabled","listParent","customCode","editingHost","selectNodeContents","alignStates","Undo","Redo","internalContentEditableAttr","setContentEditable","switchOffContentEditableTrue","switchOnContentEditableTrue","removeFakeSelection","restoreFakeSelection","toggleReadOnly","registerFilters","registerReadOnlyContentFilters","isClickEvent","getAnchorHrefOpt","processReadonlyEvents","targetEl","registerReadOnlySelectionBlockers","nativeEvents","EventDispatcher","bindings","toggleEvent","isNative","lcName","beforeFire","once","wrappedCallback","currentName","bindingName","filteredHandlers","getEventDispatcher","_eventDispatcher","toggleNativeEvent","Observable","bubble","dispatcherArgs","DOM$2","customEventRootDelegates","getEventTarget","eventName","eventRoot","isListening","bindEventDelegate","delegate","delegates","eventRootElm","editors","EditorObservable","_pendingNativeEvents","defaultModes","switchToMode","activeMode","availableModes","oldMode","newMode","activate","deactivate","editorReadOnly","setMode","registerMode","create$4","design","each$3","explode$1","keyCodeLookup","f1","f2","f3","f4","f5","f6","f7","f8","f9","f10","f11","f12","modifierNames","parseShortcut","shortcut","charCode","access","alt","ctrl","meta","Shortcuts","pendingPatterns","hasModifier","isFunctionKey","matchShortcut","subpatterns","executeShortcutAction","desc","cmdFunc","normalizeCommandFunc","createShortcut","create$3","buttons","menuItems","popups","contextMenus","contextToolbars","sidebars","addButton","addGroupToolbarButton","addToggleButton","addMenuButton","addSplitButton","addMenuItem","addNestedMenuItem","addToggleMenuItem","addAutocompleter","addContextMenu","addContextToolbar","addContextForm","addSidebar","bridge","DOM$1","extend$3","each$2","Editor","loadedCSS","isNotDirty","documentBaseURL","base_url","_setBaseUrl","baseURI","referrer_policy","language_load","editorCommands","cache_suffix","modeInstance","callbackLookup","initialContent","oldState","urlconverter_callback","_scanForImages","each$1","extend$2","instanceCounter","boundGlobalEvents","beforeUnloadDelegate","legacyEditors","isValidLegacyKey","globalEventDelegate","EditorManager","toggleGlobalEvents","removeEditorFromList","targetEditor","oldEditors","purgeDestroyedEditor","isQuirksMode","compatMode","majorVersion","minorVersion","releaseDate","i18n","tinymce","tinyMCEPreInit","srcScript","currentScript","pluginBaseUrls","plugin_base_urls","pluginBaseUrl","invalidInlineTargets","isInvalidInlineTarget","createId","findTargets","forms","editor_deselector","editor_selector","provideResults","initEditors","initCount","createEditor","existingEditor","addI18n","min$1","max$1","round$1","relativePosition","targetW","targetH","relChars","create$2","findBestRelativePosition","constrainRect","rels","inflate","intersect","cropRect","x1","y1","clamp","clampRect","fixedSize","cx2","cy2","underflowX1","underflowY1","overflowX2","overflowY2","fromClientRect","Rect","awaiter","resolveCb","rejectCb","complete","completer","create$1","tasks","resultFns","loadErrMsg","runErrMsg","task","waiter","Resource","extend$1","extendClass","initializing","Class","_super","mixins","mixin","Mixins","dummy","createMethod","Methods","Properties","fieldName","Statics","Defaults","member","Color","rgb2hsv","minRGB","maxRGB","hsvToRgb","hue","saturation","brightness","side","chroma","toRgb","toHsv","stringify","hexCode","JSONUtils","JSONP","XHR","ready","async","success_scope","error_scope","overrideMimeType","content_type","crossDomain","setRequestHeader","requestheaders","JSONRequest","sendRPC","ecb","scb","xhrArgs","method","storage","getItem","setItem","removeItem","defineProperty","configurable","enumerable","localStorage","LocalStorage","publicApi","geom","util","TreeWalker","Serializer","Selection","isMac","exportToModuleLoaders","exportToWindowGlobal","tinyMCE"],"sources":["D:/Desktop///2.0/xbr//node_modules/tinymce/tinymce.js"],"sourcesContent":["/**\r\n * Copyright (c) Tiny Technologies, Inc. All rights reserved.\r\n * Licensed under the LGPL or a commercial license.\r\n * For LGPL see License.txt in the project root for license information.\r\n * For commercial licenses see https://www.tiny.cloud/\r\n *\r\n * Version: 5.10.7 (2022-12-06)\r\n */\r\n(function () {\r\n    'use strict';\r\n\r\n    var typeOf$1 = function (x) {\r\n      if (x === null) {\r\n        return 'null';\r\n      }\r\n      if (x === undefined) {\r\n        return 'undefined';\r\n      }\r\n      var t = typeof x;\r\n      if (t === 'object' && (Array.prototype.isPrototypeOf(x) || x.constructor && x.constructor.name === 'Array')) {\r\n        return 'array';\r\n      }\r\n      if (t === 'object' && (String.prototype.isPrototypeOf(x) || x.constructor && x.constructor.name === 'String')) {\r\n        return 'string';\r\n      }\r\n      return t;\r\n    };\r\n    var isEquatableType = function (x) {\r\n      return [\r\n        'undefined',\r\n        'boolean',\r\n        'number',\r\n        'string',\r\n        'function',\r\n        'xml',\r\n        'null'\r\n      ].indexOf(x) !== -1;\r\n    };\r\n\r\n    var sort$1 = function (xs, compareFn) {\r\n      var clone = Array.prototype.slice.call(xs);\r\n      return clone.sort(compareFn);\r\n    };\r\n\r\n    var contramap = function (eqa, f) {\r\n      return eq$2(function (x, y) {\r\n        return eqa.eq(f(x), f(y));\r\n      });\r\n    };\r\n    var eq$2 = function (f) {\r\n      return { eq: f };\r\n    };\r\n    var tripleEq = eq$2(function (x, y) {\r\n      return x === y;\r\n    });\r\n    var eqString = tripleEq;\r\n    var eqArray = function (eqa) {\r\n      return eq$2(function (x, y) {\r\n        if (x.length !== y.length) {\r\n          return false;\r\n        }\r\n        var len = x.length;\r\n        for (var i = 0; i < len; i++) {\r\n          if (!eqa.eq(x[i], y[i])) {\r\n            return false;\r\n          }\r\n        }\r\n        return true;\r\n      });\r\n    };\r\n    var eqSortedArray = function (eqa, compareFn) {\r\n      return contramap(eqArray(eqa), function (xs) {\r\n        return sort$1(xs, compareFn);\r\n      });\r\n    };\r\n    var eqRecord = function (eqa) {\r\n      return eq$2(function (x, y) {\r\n        var kx = Object.keys(x);\r\n        var ky = Object.keys(y);\r\n        if (!eqSortedArray(eqString).eq(kx, ky)) {\r\n          return false;\r\n        }\r\n        var len = kx.length;\r\n        for (var i = 0; i < len; i++) {\r\n          var q = kx[i];\r\n          if (!eqa.eq(x[q], y[q])) {\r\n            return false;\r\n          }\r\n        }\r\n        return true;\r\n      });\r\n    };\r\n    var eqAny = eq$2(function (x, y) {\r\n      if (x === y) {\r\n        return true;\r\n      }\r\n      var tx = typeOf$1(x);\r\n      var ty = typeOf$1(y);\r\n      if (tx !== ty) {\r\n        return false;\r\n      }\r\n      if (isEquatableType(tx)) {\r\n        return x === y;\r\n      } else if (tx === 'array') {\r\n        return eqArray(eqAny).eq(x, y);\r\n      } else if (tx === 'object') {\r\n        return eqRecord(eqAny).eq(x, y);\r\n      }\r\n      return false;\r\n    });\r\n\r\n    var typeOf = function (x) {\r\n      var t = typeof x;\r\n      if (x === null) {\r\n        return 'null';\r\n      } else if (t === 'object' && (Array.prototype.isPrototypeOf(x) || x.constructor && x.constructor.name === 'Array')) {\r\n        return 'array';\r\n      } else if (t === 'object' && (String.prototype.isPrototypeOf(x) || x.constructor && x.constructor.name === 'String')) {\r\n        return 'string';\r\n      } else {\r\n        return t;\r\n      }\r\n    };\r\n    var isType$1 = function (type) {\r\n      return function (value) {\r\n        return typeOf(value) === type;\r\n      };\r\n    };\r\n    var isSimpleType = function (type) {\r\n      return function (value) {\r\n        return typeof value === type;\r\n      };\r\n    };\r\n    var eq$1 = function (t) {\r\n      return function (a) {\r\n        return t === a;\r\n      };\r\n    };\r\n    var isString$1 = isType$1('string');\r\n    var isObject = isType$1('object');\r\n    var isArray$1 = isType$1('array');\r\n    var isNull = eq$1(null);\r\n    var isBoolean = isSimpleType('boolean');\r\n    var isUndefined = eq$1(undefined);\r\n    var isNullable = function (a) {\r\n      return a === null || a === undefined;\r\n    };\r\n    var isNonNullable = function (a) {\r\n      return !isNullable(a);\r\n    };\r\n    var isFunction = isSimpleType('function');\r\n    var isNumber = isSimpleType('number');\r\n\r\n    var noop = function () {\r\n    };\r\n    var compose = function (fa, fb) {\r\n      return function () {\r\n        var args = [];\r\n        for (var _i = 0; _i < arguments.length; _i++) {\r\n          args[_i] = arguments[_i];\r\n        }\r\n        return fa(fb.apply(null, args));\r\n      };\r\n    };\r\n    var compose1 = function (fbc, fab) {\r\n      return function (a) {\r\n        return fbc(fab(a));\r\n      };\r\n    };\r\n    var constant = function (value) {\r\n      return function () {\r\n        return value;\r\n      };\r\n    };\r\n    var identity = function (x) {\r\n      return x;\r\n    };\r\n    var tripleEquals = function (a, b) {\r\n      return a === b;\r\n    };\r\n    function curry(fn) {\r\n      var initialArgs = [];\r\n      for (var _i = 1; _i < arguments.length; _i++) {\r\n        initialArgs[_i - 1] = arguments[_i];\r\n      }\r\n      return function () {\r\n        var restArgs = [];\r\n        for (var _i = 0; _i < arguments.length; _i++) {\r\n          restArgs[_i] = arguments[_i];\r\n        }\r\n        var all = initialArgs.concat(restArgs);\r\n        return fn.apply(null, all);\r\n      };\r\n    }\r\n    var not = function (f) {\r\n      return function (t) {\r\n        return !f(t);\r\n      };\r\n    };\r\n    var die = function (msg) {\r\n      return function () {\r\n        throw new Error(msg);\r\n      };\r\n    };\r\n    var apply = function (f) {\r\n      return f();\r\n    };\r\n    var call = function (f) {\r\n      f();\r\n    };\r\n    var never = constant(false);\r\n    var always = constant(true);\r\n\r\n    var none = function () {\r\n      return NONE;\r\n    };\r\n    var NONE = function () {\r\n      var call = function (thunk) {\r\n        return thunk();\r\n      };\r\n      var id = identity;\r\n      var me = {\r\n        fold: function (n, _s) {\r\n          return n();\r\n        },\r\n        isSome: never,\r\n        isNone: always,\r\n        getOr: id,\r\n        getOrThunk: call,\r\n        getOrDie: function (msg) {\r\n          throw new Error(msg || 'error: getOrDie called on none.');\r\n        },\r\n        getOrNull: constant(null),\r\n        getOrUndefined: constant(undefined),\r\n        or: id,\r\n        orThunk: call,\r\n        map: none,\r\n        each: noop,\r\n        bind: none,\r\n        exists: never,\r\n        forall: always,\r\n        filter: function () {\r\n          return none();\r\n        },\r\n        toArray: function () {\r\n          return [];\r\n        },\r\n        toString: constant('none()')\r\n      };\r\n      return me;\r\n    }();\r\n    var some = function (a) {\r\n      var constant_a = constant(a);\r\n      var self = function () {\r\n        return me;\r\n      };\r\n      var bind = function (f) {\r\n        return f(a);\r\n      };\r\n      var me = {\r\n        fold: function (n, s) {\r\n          return s(a);\r\n        },\r\n        isSome: always,\r\n        isNone: never,\r\n        getOr: constant_a,\r\n        getOrThunk: constant_a,\r\n        getOrDie: constant_a,\r\n        getOrNull: constant_a,\r\n        getOrUndefined: constant_a,\r\n        or: self,\r\n        orThunk: self,\r\n        map: function (f) {\r\n          return some(f(a));\r\n        },\r\n        each: function (f) {\r\n          f(a);\r\n        },\r\n        bind: bind,\r\n        exists: bind,\r\n        forall: bind,\r\n        filter: function (f) {\r\n          return f(a) ? me : NONE;\r\n        },\r\n        toArray: function () {\r\n          return [a];\r\n        },\r\n        toString: function () {\r\n          return 'some(' + a + ')';\r\n        }\r\n      };\r\n      return me;\r\n    };\r\n    var from$1 = function (value) {\r\n      return value === null || value === undefined ? NONE : some(value);\r\n    };\r\n    var Optional = {\r\n      some: some,\r\n      none: none,\r\n      from: from$1\r\n    };\r\n\r\n    var nativeSlice = Array.prototype.slice;\r\n    var nativeIndexOf = Array.prototype.indexOf;\r\n    var nativePush = Array.prototype.push;\r\n    var rawIndexOf = function (ts, t) {\r\n      return nativeIndexOf.call(ts, t);\r\n    };\r\n    var indexOf$2 = function (xs, x) {\r\n      var r = rawIndexOf(xs, x);\r\n      return r === -1 ? Optional.none() : Optional.some(r);\r\n    };\r\n    var contains$3 = function (xs, x) {\r\n      return rawIndexOf(xs, x) > -1;\r\n    };\r\n    var exists = function (xs, pred) {\r\n      for (var i = 0, len = xs.length; i < len; i++) {\r\n        var x = xs[i];\r\n        if (pred(x, i)) {\r\n          return true;\r\n        }\r\n      }\r\n      return false;\r\n    };\r\n    var map$3 = function (xs, f) {\r\n      var len = xs.length;\r\n      var r = new Array(len);\r\n      for (var i = 0; i < len; i++) {\r\n        var x = xs[i];\r\n        r[i] = f(x, i);\r\n      }\r\n      return r;\r\n    };\r\n    var each$k = function (xs, f) {\r\n      for (var i = 0, len = xs.length; i < len; i++) {\r\n        var x = xs[i];\r\n        f(x, i);\r\n      }\r\n    };\r\n    var eachr = function (xs, f) {\r\n      for (var i = xs.length - 1; i >= 0; i--) {\r\n        var x = xs[i];\r\n        f(x, i);\r\n      }\r\n    };\r\n    var partition = function (xs, pred) {\r\n      var pass = [];\r\n      var fail = [];\r\n      for (var i = 0, len = xs.length; i < len; i++) {\r\n        var x = xs[i];\r\n        var arr = pred(x, i) ? pass : fail;\r\n        arr.push(x);\r\n      }\r\n      return {\r\n        pass: pass,\r\n        fail: fail\r\n      };\r\n    };\r\n    var filter$4 = function (xs, pred) {\r\n      var r = [];\r\n      for (var i = 0, len = xs.length; i < len; i++) {\r\n        var x = xs[i];\r\n        if (pred(x, i)) {\r\n          r.push(x);\r\n        }\r\n      }\r\n      return r;\r\n    };\r\n    var foldr = function (xs, f, acc) {\r\n      eachr(xs, function (x, i) {\r\n        acc = f(acc, x, i);\r\n      });\r\n      return acc;\r\n    };\r\n    var foldl = function (xs, f, acc) {\r\n      each$k(xs, function (x, i) {\r\n        acc = f(acc, x, i);\r\n      });\r\n      return acc;\r\n    };\r\n    var findUntil$1 = function (xs, pred, until) {\r\n      for (var i = 0, len = xs.length; i < len; i++) {\r\n        var x = xs[i];\r\n        if (pred(x, i)) {\r\n          return Optional.some(x);\r\n        } else if (until(x, i)) {\r\n          break;\r\n        }\r\n      }\r\n      return Optional.none();\r\n    };\r\n    var find$3 = function (xs, pred) {\r\n      return findUntil$1(xs, pred, never);\r\n    };\r\n    var findIndex$2 = function (xs, pred) {\r\n      for (var i = 0, len = xs.length; i < len; i++) {\r\n        var x = xs[i];\r\n        if (pred(x, i)) {\r\n          return Optional.some(i);\r\n        }\r\n      }\r\n      return Optional.none();\r\n    };\r\n    var flatten = function (xs) {\r\n      var r = [];\r\n      for (var i = 0, len = xs.length; i < len; ++i) {\r\n        if (!isArray$1(xs[i])) {\r\n          throw new Error('Arr.flatten item ' + i + ' was not an array, input: ' + xs);\r\n        }\r\n        nativePush.apply(r, xs[i]);\r\n      }\r\n      return r;\r\n    };\r\n    var bind = function (xs, f) {\r\n      return flatten(map$3(xs, f));\r\n    };\r\n    var forall = function (xs, pred) {\r\n      for (var i = 0, len = xs.length; i < len; ++i) {\r\n        var x = xs[i];\r\n        if (pred(x, i) !== true) {\r\n          return false;\r\n        }\r\n      }\r\n      return true;\r\n    };\r\n    var reverse = function (xs) {\r\n      var r = nativeSlice.call(xs, 0);\r\n      r.reverse();\r\n      return r;\r\n    };\r\n    var difference = function (a1, a2) {\r\n      return filter$4(a1, function (x) {\r\n        return !contains$3(a2, x);\r\n      });\r\n    };\r\n    var mapToObject = function (xs, f) {\r\n      var r = {};\r\n      for (var i = 0, len = xs.length; i < len; i++) {\r\n        var x = xs[i];\r\n        r[String(x)] = f(x, i);\r\n      }\r\n      return r;\r\n    };\r\n    var sort = function (xs, comparator) {\r\n      var copy = nativeSlice.call(xs, 0);\r\n      copy.sort(comparator);\r\n      return copy;\r\n    };\r\n    var get$a = function (xs, i) {\r\n      return i >= 0 && i < xs.length ? Optional.some(xs[i]) : Optional.none();\r\n    };\r\n    var head = function (xs) {\r\n      return get$a(xs, 0);\r\n    };\r\n    var last$2 = function (xs) {\r\n      return get$a(xs, xs.length - 1);\r\n    };\r\n    var from = isFunction(Array.from) ? Array.from : function (x) {\r\n      return nativeSlice.call(x);\r\n    };\r\n    var findMap = function (arr, f) {\r\n      for (var i = 0; i < arr.length; i++) {\r\n        var r = f(arr[i], i);\r\n        if (r.isSome()) {\r\n          return r;\r\n        }\r\n      }\r\n      return Optional.none();\r\n    };\r\n\r\n    var keys = Object.keys;\r\n    var hasOwnProperty$1 = Object.hasOwnProperty;\r\n    var each$j = function (obj, f) {\r\n      var props = keys(obj);\r\n      for (var k = 0, len = props.length; k < len; k++) {\r\n        var i = props[k];\r\n        var x = obj[i];\r\n        f(x, i);\r\n      }\r\n    };\r\n    var map$2 = function (obj, f) {\r\n      return tupleMap(obj, function (x, i) {\r\n        return {\r\n          k: i,\r\n          v: f(x, i)\r\n        };\r\n      });\r\n    };\r\n    var tupleMap = function (obj, f) {\r\n      var r = {};\r\n      each$j(obj, function (x, i) {\r\n        var tuple = f(x, i);\r\n        r[tuple.k] = tuple.v;\r\n      });\r\n      return r;\r\n    };\r\n    var objAcc = function (r) {\r\n      return function (x, i) {\r\n        r[i] = x;\r\n      };\r\n    };\r\n    var internalFilter = function (obj, pred, onTrue, onFalse) {\r\n      var r = {};\r\n      each$j(obj, function (x, i) {\r\n        (pred(x, i) ? onTrue : onFalse)(x, i);\r\n      });\r\n      return r;\r\n    };\r\n    var bifilter = function (obj, pred) {\r\n      var t = {};\r\n      var f = {};\r\n      internalFilter(obj, pred, objAcc(t), objAcc(f));\r\n      return {\r\n        t: t,\r\n        f: f\r\n      };\r\n    };\r\n    var filter$3 = function (obj, pred) {\r\n      var t = {};\r\n      internalFilter(obj, pred, objAcc(t), noop);\r\n      return t;\r\n    };\r\n    var mapToArray = function (obj, f) {\r\n      var r = [];\r\n      each$j(obj, function (value, name) {\r\n        r.push(f(value, name));\r\n      });\r\n      return r;\r\n    };\r\n    var values = function (obj) {\r\n      return mapToArray(obj, identity);\r\n    };\r\n    var get$9 = function (obj, key) {\r\n      return has$2(obj, key) ? Optional.from(obj[key]) : Optional.none();\r\n    };\r\n    var has$2 = function (obj, key) {\r\n      return hasOwnProperty$1.call(obj, key);\r\n    };\r\n    var hasNonNullableKey = function (obj, key) {\r\n      return has$2(obj, key) && obj[key] !== undefined && obj[key] !== null;\r\n    };\r\n    var equal$1 = function (a1, a2, eq) {\r\n      if (eq === void 0) {\r\n        eq = eqAny;\r\n      }\r\n      return eqRecord(eq).eq(a1, a2);\r\n    };\r\n\r\n    var isArray = Array.isArray;\r\n    var toArray$1 = function (obj) {\r\n      if (!isArray(obj)) {\r\n        var array = [];\r\n        for (var i = 0, l = obj.length; i < l; i++) {\r\n          array[i] = obj[i];\r\n        }\r\n        return array;\r\n      } else {\r\n        return obj;\r\n      }\r\n    };\r\n    var each$i = function (o, cb, s) {\r\n      var n, l;\r\n      if (!o) {\r\n        return false;\r\n      }\r\n      s = s || o;\r\n      if (o.length !== undefined) {\r\n        for (n = 0, l = o.length; n < l; n++) {\r\n          if (cb.call(s, o[n], n, o) === false) {\r\n            return false;\r\n          }\r\n        }\r\n      } else {\r\n        for (n in o) {\r\n          if (has$2(o, n)) {\r\n            if (cb.call(s, o[n], n, o) === false) {\r\n              return false;\r\n            }\r\n          }\r\n        }\r\n      }\r\n      return true;\r\n    };\r\n    var map$1 = function (array, callback) {\r\n      var out = [];\r\n      each$i(array, function (item, index) {\r\n        out.push(callback(item, index, array));\r\n      });\r\n      return out;\r\n    };\r\n    var filter$2 = function (a, f) {\r\n      var o = [];\r\n      each$i(a, function (v, index) {\r\n        if (!f || f(v, index, a)) {\r\n          o.push(v);\r\n        }\r\n      });\r\n      return o;\r\n    };\r\n    var indexOf$1 = function (a, v) {\r\n      if (a) {\r\n        for (var i = 0, l = a.length; i < l; i++) {\r\n          if (a[i] === v) {\r\n            return i;\r\n          }\r\n        }\r\n      }\r\n      return -1;\r\n    };\r\n    var reduce = function (collection, iteratee, accumulator, thisArg) {\r\n      var acc = isUndefined(accumulator) ? collection[0] : accumulator;\r\n      for (var i = 0; i < collection.length; i++) {\r\n        acc = iteratee.call(thisArg, acc, collection[i], i);\r\n      }\r\n      return acc;\r\n    };\r\n    var findIndex$1 = function (array, predicate, thisArg) {\r\n      var i, l;\r\n      for (i = 0, l = array.length; i < l; i++) {\r\n        if (predicate.call(thisArg, array[i], i, array)) {\r\n          return i;\r\n        }\r\n      }\r\n      return -1;\r\n    };\r\n    var last$1 = function (collection) {\r\n      return collection[collection.length - 1];\r\n    };\r\n\r\n    var __assign = function () {\r\n      __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n          s = arguments[i];\r\n          for (var p in s)\r\n            if (Object.prototype.hasOwnProperty.call(s, p))\r\n              t[p] = s[p];\r\n        }\r\n        return t;\r\n      };\r\n      return __assign.apply(this, arguments);\r\n    };\r\n    function __rest(s, e) {\r\n      var t = {};\r\n      for (var p in s)\r\n        if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n          t[p] = s[p];\r\n      if (s != null && typeof Object.getOwnPropertySymbols === 'function')\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\r\n          if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\r\n            t[p[i]] = s[p[i]];\r\n        }\r\n      return t;\r\n    }\r\n    function __spreadArray(to, from, pack) {\r\n      if (pack || arguments.length === 2)\r\n        for (var i = 0, l = from.length, ar; i < l; i++) {\r\n          if (ar || !(i in from)) {\r\n            if (!ar)\r\n              ar = Array.prototype.slice.call(from, 0, i);\r\n            ar[i] = from[i];\r\n          }\r\n        }\r\n      return to.concat(ar || Array.prototype.slice.call(from));\r\n    }\r\n\r\n    var cached = function (f) {\r\n      var called = false;\r\n      var r;\r\n      return function () {\r\n        var args = [];\r\n        for (var _i = 0; _i < arguments.length; _i++) {\r\n          args[_i] = arguments[_i];\r\n        }\r\n        if (!called) {\r\n          called = true;\r\n          r = f.apply(null, args);\r\n        }\r\n        return r;\r\n      };\r\n    };\r\n\r\n    var DeviceType = function (os, browser, userAgent, mediaMatch) {\r\n      var isiPad = os.isiOS() && /ipad/i.test(userAgent) === true;\r\n      var isiPhone = os.isiOS() && !isiPad;\r\n      var isMobile = os.isiOS() || os.isAndroid();\r\n      var isTouch = isMobile || mediaMatch('(pointer:coarse)');\r\n      var isTablet = isiPad || !isiPhone && isMobile && mediaMatch('(min-device-width:768px)');\r\n      var isPhone = isiPhone || isMobile && !isTablet;\r\n      var iOSwebview = browser.isSafari() && os.isiOS() && /safari/i.test(userAgent) === false;\r\n      var isDesktop = !isPhone && !isTablet && !iOSwebview;\r\n      return {\r\n        isiPad: constant(isiPad),\r\n        isiPhone: constant(isiPhone),\r\n        isTablet: constant(isTablet),\r\n        isPhone: constant(isPhone),\r\n        isTouch: constant(isTouch),\r\n        isAndroid: os.isAndroid,\r\n        isiOS: os.isiOS,\r\n        isWebView: constant(iOSwebview),\r\n        isDesktop: constant(isDesktop)\r\n      };\r\n    };\r\n\r\n    var firstMatch = function (regexes, s) {\r\n      for (var i = 0; i < regexes.length; i++) {\r\n        var x = regexes[i];\r\n        if (x.test(s)) {\r\n          return x;\r\n        }\r\n      }\r\n      return undefined;\r\n    };\r\n    var find$2 = function (regexes, agent) {\r\n      var r = firstMatch(regexes, agent);\r\n      if (!r) {\r\n        return {\r\n          major: 0,\r\n          minor: 0\r\n        };\r\n      }\r\n      var group = function (i) {\r\n        return Number(agent.replace(r, '$' + i));\r\n      };\r\n      return nu$4(group(1), group(2));\r\n    };\r\n    var detect$3 = function (versionRegexes, agent) {\r\n      var cleanedAgent = String(agent).toLowerCase();\r\n      if (versionRegexes.length === 0) {\r\n        return unknown$2();\r\n      }\r\n      return find$2(versionRegexes, cleanedAgent);\r\n    };\r\n    var unknown$2 = function () {\r\n      return nu$4(0, 0);\r\n    };\r\n    var nu$4 = function (major, minor) {\r\n      return {\r\n        major: major,\r\n        minor: minor\r\n      };\r\n    };\r\n    var Version = {\r\n      nu: nu$4,\r\n      detect: detect$3,\r\n      unknown: unknown$2\r\n    };\r\n\r\n    var detectBrowser$1 = function (browsers, userAgentData) {\r\n      return findMap(userAgentData.brands, function (uaBrand) {\r\n        var lcBrand = uaBrand.brand.toLowerCase();\r\n        return find$3(browsers, function (browser) {\r\n          var _a;\r\n          return lcBrand === ((_a = browser.brand) === null || _a === void 0 ? void 0 : _a.toLowerCase());\r\n        }).map(function (info) {\r\n          return {\r\n            current: info.name,\r\n            version: Version.nu(parseInt(uaBrand.version, 10), 0)\r\n          };\r\n        });\r\n      });\r\n    };\r\n\r\n    var detect$2 = function (candidates, userAgent) {\r\n      var agent = String(userAgent).toLowerCase();\r\n      return find$3(candidates, function (candidate) {\r\n        return candidate.search(agent);\r\n      });\r\n    };\r\n    var detectBrowser = function (browsers, userAgent) {\r\n      return detect$2(browsers, userAgent).map(function (browser) {\r\n        var version = Version.detect(browser.versionRegexes, userAgent);\r\n        return {\r\n          current: browser.name,\r\n          version: version\r\n        };\r\n      });\r\n    };\r\n    var detectOs = function (oses, userAgent) {\r\n      return detect$2(oses, userAgent).map(function (os) {\r\n        var version = Version.detect(os.versionRegexes, userAgent);\r\n        return {\r\n          current: os.name,\r\n          version: version\r\n        };\r\n      });\r\n    };\r\n\r\n    var removeFromStart = function (str, numChars) {\r\n      return str.substring(numChars);\r\n    };\r\n\r\n    var checkRange = function (str, substr, start) {\r\n      return substr === '' || str.length >= substr.length && str.substr(start, start + substr.length) === substr;\r\n    };\r\n    var removeLeading = function (str, prefix) {\r\n      return startsWith(str, prefix) ? removeFromStart(str, prefix.length) : str;\r\n    };\r\n    var contains$2 = function (str, substr) {\r\n      return str.indexOf(substr) !== -1;\r\n    };\r\n    var startsWith = function (str, prefix) {\r\n      return checkRange(str, prefix, 0);\r\n    };\r\n    var blank = function (r) {\r\n      return function (s) {\r\n        return s.replace(r, '');\r\n      };\r\n    };\r\n    var trim$4 = blank(/^\\s+|\\s+$/g);\r\n    var lTrim = blank(/^\\s+/g);\r\n    var rTrim = blank(/\\s+$/g);\r\n    var isNotEmpty = function (s) {\r\n      return s.length > 0;\r\n    };\r\n    var isEmpty$3 = function (s) {\r\n      return !isNotEmpty(s);\r\n    };\r\n\r\n    var normalVersionRegex = /.*?version\\/\\ ?([0-9]+)\\.([0-9]+).*/;\r\n    var checkContains = function (target) {\r\n      return function (uastring) {\r\n        return contains$2(uastring, target);\r\n      };\r\n    };\r\n    var browsers = [\r\n      {\r\n        name: 'Edge',\r\n        versionRegexes: [/.*?edge\\/ ?([0-9]+)\\.([0-9]+)$/],\r\n        search: function (uastring) {\r\n          return contains$2(uastring, 'edge/') && contains$2(uastring, 'chrome') && contains$2(uastring, 'safari') && contains$2(uastring, 'applewebkit');\r\n        }\r\n      },\r\n      {\r\n        name: 'Chrome',\r\n        brand: 'Chromium',\r\n        versionRegexes: [\r\n          /.*?chrome\\/([0-9]+)\\.([0-9]+).*/,\r\n          normalVersionRegex\r\n        ],\r\n        search: function (uastring) {\r\n          return contains$2(uastring, 'chrome') && !contains$2(uastring, 'chromeframe');\r\n        }\r\n      },\r\n      {\r\n        name: 'IE',\r\n        versionRegexes: [\r\n          /.*?msie\\ ?([0-9]+)\\.([0-9]+).*/,\r\n          /.*?rv:([0-9]+)\\.([0-9]+).*/\r\n        ],\r\n        search: function (uastring) {\r\n          return contains$2(uastring, 'msie') || contains$2(uastring, 'trident');\r\n        }\r\n      },\r\n      {\r\n        name: 'Opera',\r\n        versionRegexes: [\r\n          normalVersionRegex,\r\n          /.*?opera\\/([0-9]+)\\.([0-9]+).*/\r\n        ],\r\n        search: checkContains('opera')\r\n      },\r\n      {\r\n        name: 'Firefox',\r\n        versionRegexes: [/.*?firefox\\/\\ ?([0-9]+)\\.([0-9]+).*/],\r\n        search: checkContains('firefox')\r\n      },\r\n      {\r\n        name: 'Safari',\r\n        versionRegexes: [\r\n          normalVersionRegex,\r\n          /.*?cpu os ([0-9]+)_([0-9]+).*/\r\n        ],\r\n        search: function (uastring) {\r\n          return (contains$2(uastring, 'safari') || contains$2(uastring, 'mobile/')) && contains$2(uastring, 'applewebkit');\r\n        }\r\n      }\r\n    ];\r\n    var oses = [\r\n      {\r\n        name: 'Windows',\r\n        search: checkContains('win'),\r\n        versionRegexes: [/.*?windows\\ nt\\ ?([0-9]+)\\.([0-9]+).*/]\r\n      },\r\n      {\r\n        name: 'iOS',\r\n        search: function (uastring) {\r\n          return contains$2(uastring, 'iphone') || contains$2(uastring, 'ipad');\r\n        },\r\n        versionRegexes: [\r\n          /.*?version\\/\\ ?([0-9]+)\\.([0-9]+).*/,\r\n          /.*cpu os ([0-9]+)_([0-9]+).*/,\r\n          /.*cpu iphone os ([0-9]+)_([0-9]+).*/\r\n        ]\r\n      },\r\n      {\r\n        name: 'Android',\r\n        search: checkContains('android'),\r\n        versionRegexes: [/.*?android\\ ?([0-9]+)\\.([0-9]+).*/]\r\n      },\r\n      {\r\n        name: 'OSX',\r\n        search: checkContains('mac os x'),\r\n        versionRegexes: [/.*?mac\\ os\\ x\\ ?([0-9]+)_([0-9]+).*/]\r\n      },\r\n      {\r\n        name: 'Linux',\r\n        search: checkContains('linux'),\r\n        versionRegexes: []\r\n      },\r\n      {\r\n        name: 'Solaris',\r\n        search: checkContains('sunos'),\r\n        versionRegexes: []\r\n      },\r\n      {\r\n        name: 'FreeBSD',\r\n        search: checkContains('freebsd'),\r\n        versionRegexes: []\r\n      },\r\n      {\r\n        name: 'ChromeOS',\r\n        search: checkContains('cros'),\r\n        versionRegexes: [/.*?chrome\\/([0-9]+)\\.([0-9]+).*/]\r\n      }\r\n    ];\r\n    var PlatformInfo = {\r\n      browsers: constant(browsers),\r\n      oses: constant(oses)\r\n    };\r\n\r\n    var edge = 'Edge';\r\n    var chrome = 'Chrome';\r\n    var ie$1 = 'IE';\r\n    var opera = 'Opera';\r\n    var firefox = 'Firefox';\r\n    var safari = 'Safari';\r\n    var unknown$1 = function () {\r\n      return nu$3({\r\n        current: undefined,\r\n        version: Version.unknown()\r\n      });\r\n    };\r\n    var nu$3 = function (info) {\r\n      var current = info.current;\r\n      var version = info.version;\r\n      var isBrowser = function (name) {\r\n        return function () {\r\n          return current === name;\r\n        };\r\n      };\r\n      return {\r\n        current: current,\r\n        version: version,\r\n        isEdge: isBrowser(edge),\r\n        isChrome: isBrowser(chrome),\r\n        isIE: isBrowser(ie$1),\r\n        isOpera: isBrowser(opera),\r\n        isFirefox: isBrowser(firefox),\r\n        isSafari: isBrowser(safari)\r\n      };\r\n    };\r\n    var Browser = {\r\n      unknown: unknown$1,\r\n      nu: nu$3,\r\n      edge: constant(edge),\r\n      chrome: constant(chrome),\r\n      ie: constant(ie$1),\r\n      opera: constant(opera),\r\n      firefox: constant(firefox),\r\n      safari: constant(safari)\r\n    };\r\n\r\n    var windows = 'Windows';\r\n    var ios = 'iOS';\r\n    var android = 'Android';\r\n    var linux = 'Linux';\r\n    var osx = 'OSX';\r\n    var solaris = 'Solaris';\r\n    var freebsd = 'FreeBSD';\r\n    var chromeos = 'ChromeOS';\r\n    var unknown = function () {\r\n      return nu$2({\r\n        current: undefined,\r\n        version: Version.unknown()\r\n      });\r\n    };\r\n    var nu$2 = function (info) {\r\n      var current = info.current;\r\n      var version = info.version;\r\n      var isOS = function (name) {\r\n        return function () {\r\n          return current === name;\r\n        };\r\n      };\r\n      return {\r\n        current: current,\r\n        version: version,\r\n        isWindows: isOS(windows),\r\n        isiOS: isOS(ios),\r\n        isAndroid: isOS(android),\r\n        isOSX: isOS(osx),\r\n        isLinux: isOS(linux),\r\n        isSolaris: isOS(solaris),\r\n        isFreeBSD: isOS(freebsd),\r\n        isChromeOS: isOS(chromeos)\r\n      };\r\n    };\r\n    var OperatingSystem = {\r\n      unknown: unknown,\r\n      nu: nu$2,\r\n      windows: constant(windows),\r\n      ios: constant(ios),\r\n      android: constant(android),\r\n      linux: constant(linux),\r\n      osx: constant(osx),\r\n      solaris: constant(solaris),\r\n      freebsd: constant(freebsd),\r\n      chromeos: constant(chromeos)\r\n    };\r\n\r\n    var detect$1 = function (userAgent, userAgentDataOpt, mediaMatch) {\r\n      var browsers = PlatformInfo.browsers();\r\n      var oses = PlatformInfo.oses();\r\n      var browser = userAgentDataOpt.bind(function (userAgentData) {\r\n        return detectBrowser$1(browsers, userAgentData);\r\n      }).orThunk(function () {\r\n        return detectBrowser(browsers, userAgent);\r\n      }).fold(Browser.unknown, Browser.nu);\r\n      var os = detectOs(oses, userAgent).fold(OperatingSystem.unknown, OperatingSystem.nu);\r\n      var deviceType = DeviceType(os, browser, userAgent, mediaMatch);\r\n      return {\r\n        browser: browser,\r\n        os: os,\r\n        deviceType: deviceType\r\n      };\r\n    };\r\n    var PlatformDetection = { detect: detect$1 };\r\n\r\n    var mediaMatch = function (query) {\r\n      return window.matchMedia(query).matches;\r\n    };\r\n    var platform$2 = cached(function () {\r\n      return PlatformDetection.detect(navigator.userAgent, Optional.from(navigator.userAgentData), mediaMatch);\r\n    });\r\n    var detect = function () {\r\n      return platform$2();\r\n    };\r\n\r\n    var userAgent = navigator.userAgent;\r\n    var platform$1 = detect();\r\n    var browser$4 = platform$1.browser;\r\n    var os = platform$1.os;\r\n    var deviceType = platform$1.deviceType;\r\n    var webkit = /WebKit/.test(userAgent) && !browser$4.isEdge();\r\n    var fileApi = 'FormData' in window && 'FileReader' in window && 'URL' in window && !!URL.createObjectURL;\r\n    var windowsPhone = userAgent.indexOf('Windows Phone') !== -1;\r\n    var Env = {\r\n      opera: browser$4.isOpera(),\r\n      webkit: webkit,\r\n      ie: browser$4.isIE() || browser$4.isEdge() ? browser$4.version.major : false,\r\n      gecko: browser$4.isFirefox(),\r\n      mac: os.isOSX() || os.isiOS(),\r\n      iOS: deviceType.isiPad() || deviceType.isiPhone(),\r\n      android: os.isAndroid(),\r\n      contentEditable: true,\r\n      transparentSrc: 'data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7',\r\n      caretAfter: true,\r\n      range: window.getSelection && 'Range' in window,\r\n      documentMode: browser$4.isIE() ? document.documentMode || 7 : 10,\r\n      fileApi: fileApi,\r\n      ceFalse: true,\r\n      cacheSuffix: null,\r\n      container: null,\r\n      experimentalShadowDom: false,\r\n      canHaveCSP: !browser$4.isIE(),\r\n      desktop: deviceType.isDesktop(),\r\n      windowsPhone: windowsPhone,\r\n      browser: {\r\n        current: browser$4.current,\r\n        version: browser$4.version,\r\n        isChrome: browser$4.isChrome,\r\n        isEdge: browser$4.isEdge,\r\n        isFirefox: browser$4.isFirefox,\r\n        isIE: browser$4.isIE,\r\n        isOpera: browser$4.isOpera,\r\n        isSafari: browser$4.isSafari\r\n      },\r\n      os: {\r\n        current: os.current,\r\n        version: os.version,\r\n        isAndroid: os.isAndroid,\r\n        isChromeOS: os.isChromeOS,\r\n        isFreeBSD: os.isFreeBSD,\r\n        isiOS: os.isiOS,\r\n        isLinux: os.isLinux,\r\n        isOSX: os.isOSX,\r\n        isSolaris: os.isSolaris,\r\n        isWindows: os.isWindows\r\n      },\r\n      deviceType: {\r\n        isDesktop: deviceType.isDesktop,\r\n        isiPad: deviceType.isiPad,\r\n        isiPhone: deviceType.isiPhone,\r\n        isPhone: deviceType.isPhone,\r\n        isTablet: deviceType.isTablet,\r\n        isTouch: deviceType.isTouch,\r\n        isWebView: deviceType.isWebView\r\n      }\r\n    };\r\n\r\n    var whiteSpaceRegExp$2 = /^\\s*|\\s*$/g;\r\n    var trim$3 = function (str) {\r\n      return str === null || str === undefined ? '' : ('' + str).replace(whiteSpaceRegExp$2, '');\r\n    };\r\n    var is$3 = function (obj, type) {\r\n      if (!type) {\r\n        return obj !== undefined;\r\n      }\r\n      if (type === 'array' && isArray(obj)) {\r\n        return true;\r\n      }\r\n      return typeof obj === type;\r\n    };\r\n    var makeMap$4 = function (items, delim, map) {\r\n      var i;\r\n      items = items || [];\r\n      delim = delim || ',';\r\n      if (typeof items === 'string') {\r\n        items = items.split(delim);\r\n      }\r\n      map = map || {};\r\n      i = items.length;\r\n      while (i--) {\r\n        map[items[i]] = {};\r\n      }\r\n      return map;\r\n    };\r\n    var hasOwnProperty = has$2;\r\n    var create$9 = function (s, p, root) {\r\n      var self = this;\r\n      var sp, scn, c, de = 0;\r\n      s = /^((static) )?([\\w.]+)(:([\\w.]+))?/.exec(s);\r\n      var cn = s[3].match(/(^|\\.)(\\w+)$/i)[2];\r\n      var ns = self.createNS(s[3].replace(/\\.\\w+$/, ''), root);\r\n      if (ns[cn]) {\r\n        return;\r\n      }\r\n      if (s[2] === 'static') {\r\n        ns[cn] = p;\r\n        if (this.onCreate) {\r\n          this.onCreate(s[2], s[3], ns[cn]);\r\n        }\r\n        return;\r\n      }\r\n      if (!p[cn]) {\r\n        p[cn] = function () {\r\n        };\r\n        de = 1;\r\n      }\r\n      ns[cn] = p[cn];\r\n      self.extend(ns[cn].prototype, p);\r\n      if (s[5]) {\r\n        sp = self.resolve(s[5]).prototype;\r\n        scn = s[5].match(/\\.(\\w+)$/i)[1];\r\n        c = ns[cn];\r\n        if (de) {\r\n          ns[cn] = function () {\r\n            return sp[scn].apply(this, arguments);\r\n          };\r\n        } else {\r\n          ns[cn] = function () {\r\n            this.parent = sp[scn];\r\n            return c.apply(this, arguments);\r\n          };\r\n        }\r\n        ns[cn].prototype[cn] = ns[cn];\r\n        self.each(sp, function (f, n) {\r\n          ns[cn].prototype[n] = sp[n];\r\n        });\r\n        self.each(p, function (f, n) {\r\n          if (sp[n]) {\r\n            ns[cn].prototype[n] = function () {\r\n              this.parent = sp[n];\r\n              return f.apply(this, arguments);\r\n            };\r\n          } else {\r\n            if (n !== cn) {\r\n              ns[cn].prototype[n] = f;\r\n            }\r\n          }\r\n        });\r\n      }\r\n      self.each(p.static, function (f, n) {\r\n        ns[cn][n] = f;\r\n      });\r\n    };\r\n    var extend$6 = function (obj) {\r\n      var exts = [];\r\n      for (var _i = 1; _i < arguments.length; _i++) {\r\n        exts[_i - 1] = arguments[_i];\r\n      }\r\n      for (var i = 0; i < exts.length; i++) {\r\n        var ext = exts[i];\r\n        for (var name_1 in ext) {\r\n          if (has$2(ext, name_1)) {\r\n            var value = ext[name_1];\r\n            if (value !== undefined) {\r\n              obj[name_1] = value;\r\n            }\r\n          }\r\n        }\r\n      }\r\n      return obj;\r\n    };\r\n    var walk$3 = function (o, f, n, s) {\r\n      s = s || this;\r\n      if (o) {\r\n        if (n) {\r\n          o = o[n];\r\n        }\r\n        each$i(o, function (o, i) {\r\n          if (f.call(s, o, i, n) === false) {\r\n            return false;\r\n          }\r\n          walk$3(o, f, n, s);\r\n        });\r\n      }\r\n    };\r\n    var createNS = function (n, o) {\r\n      var i, v;\r\n      o = o || window;\r\n      n = n.split('.');\r\n      for (i = 0; i < n.length; i++) {\r\n        v = n[i];\r\n        if (!o[v]) {\r\n          o[v] = {};\r\n        }\r\n        o = o[v];\r\n      }\r\n      return o;\r\n    };\r\n    var resolve$3 = function (n, o) {\r\n      var i, l;\r\n      o = o || window;\r\n      n = n.split('.');\r\n      for (i = 0, l = n.length; i < l; i++) {\r\n        o = o[n[i]];\r\n        if (!o) {\r\n          break;\r\n        }\r\n      }\r\n      return o;\r\n    };\r\n    var explode$4 = function (s, d) {\r\n      if (!s || is$3(s, 'array')) {\r\n        return s;\r\n      }\r\n      return map$1(s.split(d || ','), trim$3);\r\n    };\r\n    var _addCacheSuffix = function (url) {\r\n      var cacheSuffix = Env.cacheSuffix;\r\n      if (cacheSuffix) {\r\n        url += (url.indexOf('?') === -1 ? '?' : '&') + cacheSuffix;\r\n      }\r\n      return url;\r\n    };\r\n    var Tools = {\r\n      trim: trim$3,\r\n      isArray: isArray,\r\n      is: is$3,\r\n      toArray: toArray$1,\r\n      makeMap: makeMap$4,\r\n      each: each$i,\r\n      map: map$1,\r\n      grep: filter$2,\r\n      inArray: indexOf$1,\r\n      hasOwn: hasOwnProperty,\r\n      extend: extend$6,\r\n      create: create$9,\r\n      walk: walk$3,\r\n      createNS: createNS,\r\n      resolve: resolve$3,\r\n      explode: explode$4,\r\n      _addCacheSuffix: _addCacheSuffix\r\n    };\r\n\r\n    var fromHtml$1 = function (html, scope) {\r\n      var doc = scope || document;\r\n      var div = doc.createElement('div');\r\n      div.innerHTML = html;\r\n      if (!div.hasChildNodes() || div.childNodes.length > 1) {\r\n        console.error('HTML does not have a single root node', html);\r\n        throw new Error('HTML must have a single root node');\r\n      }\r\n      return fromDom$2(div.childNodes[0]);\r\n    };\r\n    var fromTag = function (tag, scope) {\r\n      var doc = scope || document;\r\n      var node = doc.createElement(tag);\r\n      return fromDom$2(node);\r\n    };\r\n    var fromText = function (text, scope) {\r\n      var doc = scope || document;\r\n      var node = doc.createTextNode(text);\r\n      return fromDom$2(node);\r\n    };\r\n    var fromDom$2 = function (node) {\r\n      if (node === null || node === undefined) {\r\n        throw new Error('Node cannot be null or undefined');\r\n      }\r\n      return { dom: node };\r\n    };\r\n    var fromPoint$1 = function (docElm, x, y) {\r\n      return Optional.from(docElm.dom.elementFromPoint(x, y)).map(fromDom$2);\r\n    };\r\n    var SugarElement = {\r\n      fromHtml: fromHtml$1,\r\n      fromTag: fromTag,\r\n      fromText: fromText,\r\n      fromDom: fromDom$2,\r\n      fromPoint: fromPoint$1\r\n    };\r\n\r\n    var toArray = function (target, f) {\r\n      var r = [];\r\n      var recurse = function (e) {\r\n        r.push(e);\r\n        return f(e);\r\n      };\r\n      var cur = f(target);\r\n      do {\r\n        cur = cur.bind(recurse);\r\n      } while (cur.isSome());\r\n      return r;\r\n    };\r\n\r\n    var compareDocumentPosition = function (a, b, match) {\r\n      return (a.compareDocumentPosition(b) & match) !== 0;\r\n    };\r\n    var documentPositionContainedBy = function (a, b) {\r\n      return compareDocumentPosition(a, b, Node.DOCUMENT_POSITION_CONTAINED_BY);\r\n    };\r\n\r\n    var COMMENT = 8;\r\n    var DOCUMENT = 9;\r\n    var DOCUMENT_FRAGMENT = 11;\r\n    var ELEMENT = 1;\r\n    var TEXT = 3;\r\n\r\n    var is$2 = function (element, selector) {\r\n      var dom = element.dom;\r\n      if (dom.nodeType !== ELEMENT) {\r\n        return false;\r\n      } else {\r\n        var elem = dom;\r\n        if (elem.matches !== undefined) {\r\n          return elem.matches(selector);\r\n        } else if (elem.msMatchesSelector !== undefined) {\r\n          return elem.msMatchesSelector(selector);\r\n        } else if (elem.webkitMatchesSelector !== undefined) {\r\n          return elem.webkitMatchesSelector(selector);\r\n        } else if (elem.mozMatchesSelector !== undefined) {\r\n          return elem.mozMatchesSelector(selector);\r\n        } else {\r\n          throw new Error('Browser lacks native selectors');\r\n        }\r\n      }\r\n    };\r\n    var bypassSelector = function (dom) {\r\n      return dom.nodeType !== ELEMENT && dom.nodeType !== DOCUMENT && dom.nodeType !== DOCUMENT_FRAGMENT || dom.childElementCount === 0;\r\n    };\r\n    var all = function (selector, scope) {\r\n      var base = scope === undefined ? document : scope.dom;\r\n      return bypassSelector(base) ? [] : map$3(base.querySelectorAll(selector), SugarElement.fromDom);\r\n    };\r\n    var one = function (selector, scope) {\r\n      var base = scope === undefined ? document : scope.dom;\r\n      return bypassSelector(base) ? Optional.none() : Optional.from(base.querySelector(selector)).map(SugarElement.fromDom);\r\n    };\r\n\r\n    var eq = function (e1, e2) {\r\n      return e1.dom === e2.dom;\r\n    };\r\n    var regularContains = function (e1, e2) {\r\n      var d1 = e1.dom;\r\n      var d2 = e2.dom;\r\n      return d1 === d2 ? false : d1.contains(d2);\r\n    };\r\n    var ieContains = function (e1, e2) {\r\n      return documentPositionContainedBy(e1.dom, e2.dom);\r\n    };\r\n    var contains$1 = function (e1, e2) {\r\n      return detect().browser.isIE() ? ieContains(e1, e2) : regularContains(e1, e2);\r\n    };\r\n\r\n    typeof window !== 'undefined' ? window : Function('return this;')();\r\n\r\n    var name = function (element) {\r\n      var r = element.dom.nodeName;\r\n      return r.toLowerCase();\r\n    };\r\n    var type = function (element) {\r\n      return element.dom.nodeType;\r\n    };\r\n    var isType = function (t) {\r\n      return function (element) {\r\n        return type(element) === t;\r\n      };\r\n    };\r\n    var isComment$1 = function (element) {\r\n      return type(element) === COMMENT || name(element) === '#comment';\r\n    };\r\n    var isElement$6 = isType(ELEMENT);\r\n    var isText$8 = isType(TEXT);\r\n    var isDocument$2 = isType(DOCUMENT);\r\n    var isDocumentFragment$1 = isType(DOCUMENT_FRAGMENT);\r\n    var isTag = function (tag) {\r\n      return function (e) {\r\n        return isElement$6(e) && name(e) === tag;\r\n      };\r\n    };\r\n\r\n    var owner$1 = function (element) {\r\n      return SugarElement.fromDom(element.dom.ownerDocument);\r\n    };\r\n    var documentOrOwner = function (dos) {\r\n      return isDocument$2(dos) ? dos : owner$1(dos);\r\n    };\r\n    var documentElement = function (element) {\r\n      return SugarElement.fromDom(documentOrOwner(element).dom.documentElement);\r\n    };\r\n    var defaultView = function (element) {\r\n      return SugarElement.fromDom(documentOrOwner(element).dom.defaultView);\r\n    };\r\n    var parent = function (element) {\r\n      return Optional.from(element.dom.parentNode).map(SugarElement.fromDom);\r\n    };\r\n    var parents$1 = function (element, isRoot) {\r\n      var stop = isFunction(isRoot) ? isRoot : never;\r\n      var dom = element.dom;\r\n      var ret = [];\r\n      while (dom.parentNode !== null && dom.parentNode !== undefined) {\r\n        var rawParent = dom.parentNode;\r\n        var p = SugarElement.fromDom(rawParent);\r\n        ret.push(p);\r\n        if (stop(p) === true) {\r\n          break;\r\n        } else {\r\n          dom = rawParent;\r\n        }\r\n      }\r\n      return ret;\r\n    };\r\n    var siblings = function (element) {\r\n      var filterSelf = function (elements) {\r\n        return filter$4(elements, function (x) {\r\n          return !eq(element, x);\r\n        });\r\n      };\r\n      return parent(element).map(children).map(filterSelf).getOr([]);\r\n    };\r\n    var prevSibling = function (element) {\r\n      return Optional.from(element.dom.previousSibling).map(SugarElement.fromDom);\r\n    };\r\n    var nextSibling = function (element) {\r\n      return Optional.from(element.dom.nextSibling).map(SugarElement.fromDom);\r\n    };\r\n    var prevSiblings = function (element) {\r\n      return reverse(toArray(element, prevSibling));\r\n    };\r\n    var nextSiblings = function (element) {\r\n      return toArray(element, nextSibling);\r\n    };\r\n    var children = function (element) {\r\n      return map$3(element.dom.childNodes, SugarElement.fromDom);\r\n    };\r\n    var child$1 = function (element, index) {\r\n      var cs = element.dom.childNodes;\r\n      return Optional.from(cs[index]).map(SugarElement.fromDom);\r\n    };\r\n    var firstChild = function (element) {\r\n      return child$1(element, 0);\r\n    };\r\n    var lastChild = function (element) {\r\n      return child$1(element, element.dom.childNodes.length - 1);\r\n    };\r\n    var childNodesCount = function (element) {\r\n      return element.dom.childNodes.length;\r\n    };\r\n\r\n    var getHead = function (doc) {\r\n      var b = doc.dom.head;\r\n      if (b === null || b === undefined) {\r\n        throw new Error('Head is not available yet');\r\n      }\r\n      return SugarElement.fromDom(b);\r\n    };\r\n\r\n    var isShadowRoot = function (dos) {\r\n      return isDocumentFragment$1(dos) && isNonNullable(dos.dom.host);\r\n    };\r\n    var supported = isFunction(Element.prototype.attachShadow) && isFunction(Node.prototype.getRootNode);\r\n    var isSupported$1 = constant(supported);\r\n    var getRootNode = supported ? function (e) {\r\n      return SugarElement.fromDom(e.dom.getRootNode());\r\n    } : documentOrOwner;\r\n    var getStyleContainer = function (dos) {\r\n      return isShadowRoot(dos) ? dos : getHead(documentOrOwner(dos));\r\n    };\r\n    var getShadowRoot = function (e) {\r\n      var r = getRootNode(e);\r\n      return isShadowRoot(r) ? Optional.some(r) : Optional.none();\r\n    };\r\n    var getShadowHost = function (e) {\r\n      return SugarElement.fromDom(e.dom.host);\r\n    };\r\n    var getOriginalEventTarget = function (event) {\r\n      if (isSupported$1() && isNonNullable(event.target)) {\r\n        var el = SugarElement.fromDom(event.target);\r\n        if (isElement$6(el) && isOpenShadowHost(el)) {\r\n          if (event.composed && event.composedPath) {\r\n            var composedPath = event.composedPath();\r\n            if (composedPath) {\r\n              return head(composedPath);\r\n            }\r\n          }\r\n        }\r\n      }\r\n      return Optional.from(event.target);\r\n    };\r\n    var isOpenShadowHost = function (element) {\r\n      return isNonNullable(element.dom.shadowRoot);\r\n    };\r\n\r\n    var before$4 = function (marker, element) {\r\n      var parent$1 = parent(marker);\r\n      parent$1.each(function (v) {\r\n        v.dom.insertBefore(element.dom, marker.dom);\r\n      });\r\n    };\r\n    var after$3 = function (marker, element) {\r\n      var sibling = nextSibling(marker);\r\n      sibling.fold(function () {\r\n        var parent$1 = parent(marker);\r\n        parent$1.each(function (v) {\r\n          append$1(v, element);\r\n        });\r\n      }, function (v) {\r\n        before$4(v, element);\r\n      });\r\n    };\r\n    var prepend = function (parent, element) {\r\n      var firstChild$1 = firstChild(parent);\r\n      firstChild$1.fold(function () {\r\n        append$1(parent, element);\r\n      }, function (v) {\r\n        parent.dom.insertBefore(element.dom, v.dom);\r\n      });\r\n    };\r\n    var append$1 = function (parent, element) {\r\n      parent.dom.appendChild(element.dom);\r\n    };\r\n    var wrap$3 = function (element, wrapper) {\r\n      before$4(element, wrapper);\r\n      append$1(wrapper, element);\r\n    };\r\n\r\n    var before$3 = function (marker, elements) {\r\n      each$k(elements, function (x) {\r\n        before$4(marker, x);\r\n      });\r\n    };\r\n    var append = function (parent, elements) {\r\n      each$k(elements, function (x) {\r\n        append$1(parent, x);\r\n      });\r\n    };\r\n\r\n    var empty = function (element) {\r\n      element.dom.textContent = '';\r\n      each$k(children(element), function (rogue) {\r\n        remove$7(rogue);\r\n      });\r\n    };\r\n    var remove$7 = function (element) {\r\n      var dom = element.dom;\r\n      if (dom.parentNode !== null) {\r\n        dom.parentNode.removeChild(dom);\r\n      }\r\n    };\r\n    var unwrap = function (wrapper) {\r\n      var children$1 = children(wrapper);\r\n      if (children$1.length > 0) {\r\n        before$3(wrapper, children$1);\r\n      }\r\n      remove$7(wrapper);\r\n    };\r\n\r\n    var inBody = function (element) {\r\n      var dom = isText$8(element) ? element.dom.parentNode : element.dom;\r\n      if (dom === undefined || dom === null || dom.ownerDocument === null) {\r\n        return false;\r\n      }\r\n      var doc = dom.ownerDocument;\r\n      return getShadowRoot(SugarElement.fromDom(dom)).fold(function () {\r\n        return doc.body.contains(dom);\r\n      }, compose1(inBody, getShadowHost));\r\n    };\r\n\r\n    var r = function (left, top) {\r\n      var translate = function (x, y) {\r\n        return r(left + x, top + y);\r\n      };\r\n      return {\r\n        left: left,\r\n        top: top,\r\n        translate: translate\r\n      };\r\n    };\r\n    var SugarPosition = r;\r\n\r\n    var boxPosition = function (dom) {\r\n      var box = dom.getBoundingClientRect();\r\n      return SugarPosition(box.left, box.top);\r\n    };\r\n    var firstDefinedOrZero = function (a, b) {\r\n      if (a !== undefined) {\r\n        return a;\r\n      } else {\r\n        return b !== undefined ? b : 0;\r\n      }\r\n    };\r\n    var absolute = function (element) {\r\n      var doc = element.dom.ownerDocument;\r\n      var body = doc.body;\r\n      var win = doc.defaultView;\r\n      var html = doc.documentElement;\r\n      if (body === element.dom) {\r\n        return SugarPosition(body.offsetLeft, body.offsetTop);\r\n      }\r\n      var scrollTop = firstDefinedOrZero(win === null || win === void 0 ? void 0 : win.pageYOffset, html.scrollTop);\r\n      var scrollLeft = firstDefinedOrZero(win === null || win === void 0 ? void 0 : win.pageXOffset, html.scrollLeft);\r\n      var clientTop = firstDefinedOrZero(html.clientTop, body.clientTop);\r\n      var clientLeft = firstDefinedOrZero(html.clientLeft, body.clientLeft);\r\n      return viewport(element).translate(scrollLeft - clientLeft, scrollTop - clientTop);\r\n    };\r\n    var viewport = function (element) {\r\n      var dom = element.dom;\r\n      var doc = dom.ownerDocument;\r\n      var body = doc.body;\r\n      if (body === dom) {\r\n        return SugarPosition(body.offsetLeft, body.offsetTop);\r\n      }\r\n      if (!inBody(element)) {\r\n        return SugarPosition(0, 0);\r\n      }\r\n      return boxPosition(dom);\r\n    };\r\n\r\n    var get$8 = function (_DOC) {\r\n      var doc = _DOC !== undefined ? _DOC.dom : document;\r\n      var x = doc.body.scrollLeft || doc.documentElement.scrollLeft;\r\n      var y = doc.body.scrollTop || doc.documentElement.scrollTop;\r\n      return SugarPosition(x, y);\r\n    };\r\n    var to = function (x, y, _DOC) {\r\n      var doc = _DOC !== undefined ? _DOC.dom : document;\r\n      var win = doc.defaultView;\r\n      if (win) {\r\n        win.scrollTo(x, y);\r\n      }\r\n    };\r\n    var intoView = function (element, alignToTop) {\r\n      var isSafari = detect().browser.isSafari();\r\n      if (isSafari && isFunction(element.dom.scrollIntoViewIfNeeded)) {\r\n        element.dom.scrollIntoViewIfNeeded(false);\r\n      } else {\r\n        element.dom.scrollIntoView(alignToTop);\r\n      }\r\n    };\r\n\r\n    var get$7 = function (_win) {\r\n      var win = _win === undefined ? window : _win;\r\n      if (detect().browser.isFirefox()) {\r\n        return Optional.none();\r\n      } else {\r\n        return Optional.from(win['visualViewport']);\r\n      }\r\n    };\r\n    var bounds = function (x, y, width, height) {\r\n      return {\r\n        x: x,\r\n        y: y,\r\n        width: width,\r\n        height: height,\r\n        right: x + width,\r\n        bottom: y + height\r\n      };\r\n    };\r\n    var getBounds = function (_win) {\r\n      var win = _win === undefined ? window : _win;\r\n      var doc = win.document;\r\n      var scroll = get$8(SugarElement.fromDom(doc));\r\n      return get$7(win).fold(function () {\r\n        var html = win.document.documentElement;\r\n        var width = html.clientWidth;\r\n        var height = html.clientHeight;\r\n        return bounds(scroll.left, scroll.top, width, height);\r\n      }, function (visualViewport) {\r\n        return bounds(Math.max(visualViewport.pageLeft, scroll.left), Math.max(visualViewport.pageTop, scroll.top), visualViewport.width, visualViewport.height);\r\n      });\r\n    };\r\n\r\n    var isNodeType = function (type) {\r\n      return function (node) {\r\n        return !!node && node.nodeType === type;\r\n      };\r\n    };\r\n    var isRestrictedNode = function (node) {\r\n      return !!node && !Object.getPrototypeOf(node);\r\n    };\r\n    var isElement$5 = isNodeType(1);\r\n    var matchNodeNames = function (names) {\r\n      var lowercasedNames = names.map(function (s) {\r\n        return s.toLowerCase();\r\n      });\r\n      return function (node) {\r\n        if (node && node.nodeName) {\r\n          var nodeName = node.nodeName.toLowerCase();\r\n          return contains$3(lowercasedNames, nodeName);\r\n        }\r\n        return false;\r\n      };\r\n    };\r\n    var matchStyleValues = function (name, values) {\r\n      var items = values.toLowerCase().split(' ');\r\n      return function (node) {\r\n        if (isElement$5(node)) {\r\n          for (var i = 0; i < items.length; i++) {\r\n            var computed = node.ownerDocument.defaultView.getComputedStyle(node, null);\r\n            var cssValue = computed ? computed.getPropertyValue(name) : null;\r\n            if (cssValue === items[i]) {\r\n              return true;\r\n            }\r\n          }\r\n        }\r\n        return false;\r\n      };\r\n    };\r\n    var hasAttribute = function (attrName) {\r\n      return function (node) {\r\n        return isElement$5(node) && node.hasAttribute(attrName);\r\n      };\r\n    };\r\n    var hasAttributeValue = function (attrName, attrValue) {\r\n      return function (node) {\r\n        return isElement$5(node) && node.getAttribute(attrName) === attrValue;\r\n      };\r\n    };\r\n    var isBogus$2 = function (node) {\r\n      return isElement$5(node) && node.hasAttribute('data-mce-bogus');\r\n    };\r\n    var isBogusAll$1 = function (node) {\r\n      return isElement$5(node) && node.getAttribute('data-mce-bogus') === 'all';\r\n    };\r\n    var isTable$3 = function (node) {\r\n      return isElement$5(node) && node.tagName === 'TABLE';\r\n    };\r\n    var hasContentEditableState = function (value) {\r\n      return function (node) {\r\n        if (isElement$5(node)) {\r\n          if (node.contentEditable === value) {\r\n            return true;\r\n          }\r\n          if (node.getAttribute('data-mce-contenteditable') === value) {\r\n            return true;\r\n          }\r\n        }\r\n        return false;\r\n      };\r\n    };\r\n    var isTextareaOrInput = matchNodeNames([\r\n      'textarea',\r\n      'input'\r\n    ]);\r\n    var isText$7 = isNodeType(3);\r\n    var isComment = isNodeType(8);\r\n    var isDocument$1 = isNodeType(9);\r\n    var isDocumentFragment = isNodeType(11);\r\n    var isBr$5 = matchNodeNames(['br']);\r\n    var isImg = matchNodeNames(['img']);\r\n    var isContentEditableTrue$4 = hasContentEditableState('true');\r\n    var isContentEditableFalse$b = hasContentEditableState('false');\r\n    var isTableCell$5 = matchNodeNames([\r\n      'td',\r\n      'th'\r\n    ]);\r\n    var isMedia$2 = matchNodeNames([\r\n      'video',\r\n      'audio',\r\n      'object',\r\n      'embed'\r\n    ]);\r\n\r\n    var is$1 = function (lhs, rhs, comparator) {\r\n      if (comparator === void 0) {\r\n        comparator = tripleEquals;\r\n      }\r\n      return lhs.exists(function (left) {\r\n        return comparator(left, rhs);\r\n      });\r\n    };\r\n    var cat = function (arr) {\r\n      var r = [];\r\n      var push = function (x) {\r\n        r.push(x);\r\n      };\r\n      for (var i = 0; i < arr.length; i++) {\r\n        arr[i].each(push);\r\n      }\r\n      return r;\r\n    };\r\n    var lift2 = function (oa, ob, f) {\r\n      return oa.isSome() && ob.isSome() ? Optional.some(f(oa.getOrDie(), ob.getOrDie())) : Optional.none();\r\n    };\r\n    var lift3 = function (oa, ob, oc, f) {\r\n      return oa.isSome() && ob.isSome() && oc.isSome() ? Optional.some(f(oa.getOrDie(), ob.getOrDie(), oc.getOrDie())) : Optional.none();\r\n    };\r\n    var someIf = function (b, a) {\r\n      return b ? Optional.some(a) : Optional.none();\r\n    };\r\n\r\n    var isSupported = function (dom) {\r\n      return dom.style !== undefined && isFunction(dom.style.getPropertyValue);\r\n    };\r\n\r\n    var rawSet = function (dom, key, value) {\r\n      if (isString$1(value) || isBoolean(value) || isNumber(value)) {\r\n        dom.setAttribute(key, value + '');\r\n      } else {\r\n        console.error('Invalid call to Attribute.set. Key ', key, ':: Value ', value, ':: Element ', dom);\r\n        throw new Error('Attribute value was not simple');\r\n      }\r\n    };\r\n    var set$1 = function (element, key, value) {\r\n      rawSet(element.dom, key, value);\r\n    };\r\n    var setAll$1 = function (element, attrs) {\r\n      var dom = element.dom;\r\n      each$j(attrs, function (v, k) {\r\n        rawSet(dom, k, v);\r\n      });\r\n    };\r\n    var get$6 = function (element, key) {\r\n      var v = element.dom.getAttribute(key);\r\n      return v === null ? undefined : v;\r\n    };\r\n    var getOpt = function (element, key) {\r\n      return Optional.from(get$6(element, key));\r\n    };\r\n    var has$1 = function (element, key) {\r\n      var dom = element.dom;\r\n      return dom && dom.hasAttribute ? dom.hasAttribute(key) : false;\r\n    };\r\n    var remove$6 = function (element, key) {\r\n      element.dom.removeAttribute(key);\r\n    };\r\n    var clone$3 = function (element) {\r\n      return foldl(element.dom.attributes, function (acc, attr) {\r\n        acc[attr.name] = attr.value;\r\n        return acc;\r\n      }, {});\r\n    };\r\n\r\n    var internalSet = function (dom, property, value) {\r\n      if (!isString$1(value)) {\r\n        console.error('Invalid call to CSS.set. Property ', property, ':: Value ', value, ':: Element ', dom);\r\n        throw new Error('CSS value must be a string: ' + value);\r\n      }\r\n      if (isSupported(dom)) {\r\n        dom.style.setProperty(property, value);\r\n      }\r\n    };\r\n    var setAll = function (element, css) {\r\n      var dom = element.dom;\r\n      each$j(css, function (v, k) {\r\n        internalSet(dom, k, v);\r\n      });\r\n    };\r\n    var get$5 = function (element, property) {\r\n      var dom = element.dom;\r\n      var styles = window.getComputedStyle(dom);\r\n      var r = styles.getPropertyValue(property);\r\n      return r === '' && !inBody(element) ? getUnsafeProperty(dom, property) : r;\r\n    };\r\n    var getUnsafeProperty = function (dom, property) {\r\n      return isSupported(dom) ? dom.style.getPropertyValue(property) : '';\r\n    };\r\n    var getRaw = function (element, property) {\r\n      var dom = element.dom;\r\n      var raw = getUnsafeProperty(dom, property);\r\n      return Optional.from(raw).filter(function (r) {\r\n        return r.length > 0;\r\n      });\r\n    };\r\n    var getAllRaw = function (element) {\r\n      var css = {};\r\n      var dom = element.dom;\r\n      if (isSupported(dom)) {\r\n        for (var i = 0; i < dom.style.length; i++) {\r\n          var ruleName = dom.style.item(i);\r\n          css[ruleName] = dom.style[ruleName];\r\n        }\r\n      }\r\n      return css;\r\n    };\r\n    var reflow = function (e) {\r\n      return e.dom.offsetWidth;\r\n    };\r\n\r\n    var browser$3 = detect().browser;\r\n    var firstElement = function (nodes) {\r\n      return find$3(nodes, isElement$6);\r\n    };\r\n    var getTableCaptionDeltaY = function (elm) {\r\n      if (browser$3.isFirefox() && name(elm) === 'table') {\r\n        return firstElement(children(elm)).filter(function (elm) {\r\n          return name(elm) === 'caption';\r\n        }).bind(function (caption) {\r\n          return firstElement(nextSiblings(caption)).map(function (body) {\r\n            var bodyTop = body.dom.offsetTop;\r\n            var captionTop = caption.dom.offsetTop;\r\n            var captionHeight = caption.dom.offsetHeight;\r\n            return bodyTop <= captionTop ? -captionHeight : 0;\r\n          });\r\n        }).getOr(0);\r\n      } else {\r\n        return 0;\r\n      }\r\n    };\r\n    var hasChild = function (elm, child) {\r\n      return elm.children && contains$3(elm.children, child);\r\n    };\r\n    var getPos = function (body, elm, rootElm) {\r\n      var x = 0, y = 0;\r\n      var doc = body.ownerDocument;\r\n      rootElm = rootElm ? rootElm : body;\r\n      if (elm) {\r\n        if (rootElm === body && elm.getBoundingClientRect && get$5(SugarElement.fromDom(body), 'position') === 'static') {\r\n          var pos = elm.getBoundingClientRect();\r\n          x = pos.left + (doc.documentElement.scrollLeft || body.scrollLeft) - doc.documentElement.clientLeft;\r\n          y = pos.top + (doc.documentElement.scrollTop || body.scrollTop) - doc.documentElement.clientTop;\r\n          return {\r\n            x: x,\r\n            y: y\r\n          };\r\n        }\r\n        var offsetParent = elm;\r\n        while (offsetParent && offsetParent !== rootElm && offsetParent.nodeType && !hasChild(offsetParent, rootElm)) {\r\n          var castOffsetParent = offsetParent;\r\n          x += castOffsetParent.offsetLeft || 0;\r\n          y += castOffsetParent.offsetTop || 0;\r\n          offsetParent = castOffsetParent.offsetParent;\r\n        }\r\n        offsetParent = elm.parentNode;\r\n        while (offsetParent && offsetParent !== rootElm && offsetParent.nodeType && !hasChild(offsetParent, rootElm)) {\r\n          x -= offsetParent.scrollLeft || 0;\r\n          y -= offsetParent.scrollTop || 0;\r\n          offsetParent = offsetParent.parentNode;\r\n        }\r\n        y += getTableCaptionDeltaY(SugarElement.fromDom(elm));\r\n      }\r\n      return {\r\n        x: x,\r\n        y: y\r\n      };\r\n    };\r\n\r\n    var exports$1 = {}, module$1 = { exports: exports$1 };\r\n    (function (define, exports, module, require) {\r\n      (function (global, factory) {\r\n        typeof exports === 'object' && typeof module !== 'undefined' ? module.exports = factory() : typeof define === 'function' && define.amd ? define(factory) : (global = typeof globalThis !== 'undefined' ? globalThis : global || self, global.EphoxContactWrapper = factory());\r\n      }(this, function () {\r\n        var commonjsGlobal = typeof globalThis !== 'undefined' ? globalThis : typeof window !== 'undefined' ? window : typeof global !== 'undefined' ? global : typeof self !== 'undefined' ? self : {};\r\n        var promise = { exports: {} };\r\n        (function (module) {\r\n          (function (root) {\r\n            var setTimeoutFunc = setTimeout;\r\n            function noop() {\r\n            }\r\n            function bind(fn, thisArg) {\r\n              return function () {\r\n                fn.apply(thisArg, arguments);\r\n              };\r\n            }\r\n            function Promise(fn) {\r\n              if (typeof this !== 'object')\r\n                throw new TypeError('Promises must be constructed via new');\r\n              if (typeof fn !== 'function')\r\n                throw new TypeError('not a function');\r\n              this._state = 0;\r\n              this._handled = false;\r\n              this._value = undefined;\r\n              this._deferreds = [];\r\n              doResolve(fn, this);\r\n            }\r\n            function handle(self, deferred) {\r\n              while (self._state === 3) {\r\n                self = self._value;\r\n              }\r\n              if (self._state === 0) {\r\n                self._deferreds.push(deferred);\r\n                return;\r\n              }\r\n              self._handled = true;\r\n              Promise._immediateFn(function () {\r\n                var cb = self._state === 1 ? deferred.onFulfilled : deferred.onRejected;\r\n                if (cb === null) {\r\n                  (self._state === 1 ? resolve : reject)(deferred.promise, self._value);\r\n                  return;\r\n                }\r\n                var ret;\r\n                try {\r\n                  ret = cb(self._value);\r\n                } catch (e) {\r\n                  reject(deferred.promise, e);\r\n                  return;\r\n                }\r\n                resolve(deferred.promise, ret);\r\n              });\r\n            }\r\n            function resolve(self, newValue) {\r\n              try {\r\n                if (newValue === self)\r\n                  throw new TypeError('A promise cannot be resolved with itself.');\r\n                if (newValue && (typeof newValue === 'object' || typeof newValue === 'function')) {\r\n                  var then = newValue.then;\r\n                  if (newValue instanceof Promise) {\r\n                    self._state = 3;\r\n                    self._value = newValue;\r\n                    finale(self);\r\n                    return;\r\n                  } else if (typeof then === 'function') {\r\n                    doResolve(bind(then, newValue), self);\r\n                    return;\r\n                  }\r\n                }\r\n                self._state = 1;\r\n                self._value = newValue;\r\n                finale(self);\r\n              } catch (e) {\r\n                reject(self, e);\r\n              }\r\n            }\r\n            function reject(self, newValue) {\r\n              self._state = 2;\r\n              self._value = newValue;\r\n              finale(self);\r\n            }\r\n            function finale(self) {\r\n              if (self._state === 2 && self._deferreds.length === 0) {\r\n                Promise._immediateFn(function () {\r\n                  if (!self._handled) {\r\n                    Promise._unhandledRejectionFn(self._value);\r\n                  }\r\n                });\r\n              }\r\n              for (var i = 0, len = self._deferreds.length; i < len; i++) {\r\n                handle(self, self._deferreds[i]);\r\n              }\r\n              self._deferreds = null;\r\n            }\r\n            function Handler(onFulfilled, onRejected, promise) {\r\n              this.onFulfilled = typeof onFulfilled === 'function' ? onFulfilled : null;\r\n              this.onRejected = typeof onRejected === 'function' ? onRejected : null;\r\n              this.promise = promise;\r\n            }\r\n            function doResolve(fn, self) {\r\n              var done = false;\r\n              try {\r\n                fn(function (value) {\r\n                  if (done)\r\n                    return;\r\n                  done = true;\r\n                  resolve(self, value);\r\n                }, function (reason) {\r\n                  if (done)\r\n                    return;\r\n                  done = true;\r\n                  reject(self, reason);\r\n                });\r\n              } catch (ex) {\r\n                if (done)\r\n                  return;\r\n                done = true;\r\n                reject(self, ex);\r\n              }\r\n            }\r\n            Promise.prototype['catch'] = function (onRejected) {\r\n              return this.then(null, onRejected);\r\n            };\r\n            Promise.prototype.then = function (onFulfilled, onRejected) {\r\n              var prom = new this.constructor(noop);\r\n              handle(this, new Handler(onFulfilled, onRejected, prom));\r\n              return prom;\r\n            };\r\n            Promise.all = function (arr) {\r\n              var args = Array.prototype.slice.call(arr);\r\n              return new Promise(function (resolve, reject) {\r\n                if (args.length === 0)\r\n                  return resolve([]);\r\n                var remaining = args.length;\r\n                function res(i, val) {\r\n                  try {\r\n                    if (val && (typeof val === 'object' || typeof val === 'function')) {\r\n                      var then = val.then;\r\n                      if (typeof then === 'function') {\r\n                        then.call(val, function (val) {\r\n                          res(i, val);\r\n                        }, reject);\r\n                        return;\r\n                      }\r\n                    }\r\n                    args[i] = val;\r\n                    if (--remaining === 0) {\r\n                      resolve(args);\r\n                    }\r\n                  } catch (ex) {\r\n                    reject(ex);\r\n                  }\r\n                }\r\n                for (var i = 0; i < args.length; i++) {\r\n                  res(i, args[i]);\r\n                }\r\n              });\r\n            };\r\n            Promise.resolve = function (value) {\r\n              if (value && typeof value === 'object' && value.constructor === Promise) {\r\n                return value;\r\n              }\r\n              return new Promise(function (resolve) {\r\n                resolve(value);\r\n              });\r\n            };\r\n            Promise.reject = function (value) {\r\n              return new Promise(function (resolve, reject) {\r\n                reject(value);\r\n              });\r\n            };\r\n            Promise.race = function (values) {\r\n              return new Promise(function (resolve, reject) {\r\n                for (var i = 0, len = values.length; i < len; i++) {\r\n                  values[i].then(resolve, reject);\r\n                }\r\n              });\r\n            };\r\n            Promise._immediateFn = typeof setImmediate === 'function' ? function (fn) {\r\n              setImmediate(fn);\r\n            } : function (fn) {\r\n              setTimeoutFunc(fn, 0);\r\n            };\r\n            Promise._unhandledRejectionFn = function _unhandledRejectionFn(err) {\r\n              if (typeof console !== 'undefined' && console) {\r\n                console.warn('Possible Unhandled Promise Rejection:', err);\r\n              }\r\n            };\r\n            Promise._setImmediateFn = function _setImmediateFn(fn) {\r\n              Promise._immediateFn = fn;\r\n            };\r\n            Promise._setUnhandledRejectionFn = function _setUnhandledRejectionFn(fn) {\r\n              Promise._unhandledRejectionFn = fn;\r\n            };\r\n            if (module.exports) {\r\n              module.exports = Promise;\r\n            } else if (!root.Promise) {\r\n              root.Promise = Promise;\r\n            }\r\n          }(commonjsGlobal));\r\n        }(promise));\r\n        var promisePolyfill = promise.exports;\r\n        var Global = function () {\r\n          if (typeof window !== 'undefined') {\r\n            return window;\r\n          } else {\r\n            return Function('return this;')();\r\n          }\r\n        }();\r\n        var promisePolyfill_1 = { boltExport: Global.Promise || promisePolyfill };\r\n        return promisePolyfill_1;\r\n      }));\r\n    }(undefined, exports$1, module$1));\r\n    var Promise$1 = module$1.exports.boltExport;\r\n\r\n    var nu$1 = function (baseFn) {\r\n      var data = Optional.none();\r\n      var callbacks = [];\r\n      var map = function (f) {\r\n        return nu$1(function (nCallback) {\r\n          get(function (data) {\r\n            nCallback(f(data));\r\n          });\r\n        });\r\n      };\r\n      var get = function (nCallback) {\r\n        if (isReady()) {\r\n          call(nCallback);\r\n        } else {\r\n          callbacks.push(nCallback);\r\n        }\r\n      };\r\n      var set = function (x) {\r\n        if (!isReady()) {\r\n          data = Optional.some(x);\r\n          run(callbacks);\r\n          callbacks = [];\r\n        }\r\n      };\r\n      var isReady = function () {\r\n        return data.isSome();\r\n      };\r\n      var run = function (cbs) {\r\n        each$k(cbs, call);\r\n      };\r\n      var call = function (cb) {\r\n        data.each(function (x) {\r\n          setTimeout(function () {\r\n            cb(x);\r\n          }, 0);\r\n        });\r\n      };\r\n      baseFn(set);\r\n      return {\r\n        get: get,\r\n        map: map,\r\n        isReady: isReady\r\n      };\r\n    };\r\n    var pure$1 = function (a) {\r\n      return nu$1(function (callback) {\r\n        callback(a);\r\n      });\r\n    };\r\n    var LazyValue = {\r\n      nu: nu$1,\r\n      pure: pure$1\r\n    };\r\n\r\n    var errorReporter = function (err) {\r\n      setTimeout(function () {\r\n        throw err;\r\n      }, 0);\r\n    };\r\n    var make = function (run) {\r\n      var get = function (callback) {\r\n        run().then(callback, errorReporter);\r\n      };\r\n      var map = function (fab) {\r\n        return make(function () {\r\n          return run().then(fab);\r\n        });\r\n      };\r\n      var bind = function (aFutureB) {\r\n        return make(function () {\r\n          return run().then(function (v) {\r\n            return aFutureB(v).toPromise();\r\n          });\r\n        });\r\n      };\r\n      var anonBind = function (futureB) {\r\n        return make(function () {\r\n          return run().then(function () {\r\n            return futureB.toPromise();\r\n          });\r\n        });\r\n      };\r\n      var toLazy = function () {\r\n        return LazyValue.nu(get);\r\n      };\r\n      var toCached = function () {\r\n        var cache = null;\r\n        return make(function () {\r\n          if (cache === null) {\r\n            cache = run();\r\n          }\r\n          return cache;\r\n        });\r\n      };\r\n      var toPromise = run;\r\n      return {\r\n        map: map,\r\n        bind: bind,\r\n        anonBind: anonBind,\r\n        toLazy: toLazy,\r\n        toCached: toCached,\r\n        toPromise: toPromise,\r\n        get: get\r\n      };\r\n    };\r\n    var nu = function (baseFn) {\r\n      return make(function () {\r\n        return new Promise$1(baseFn);\r\n      });\r\n    };\r\n    var pure = function (a) {\r\n      return make(function () {\r\n        return Promise$1.resolve(a);\r\n      });\r\n    };\r\n    var Future = {\r\n      nu: nu,\r\n      pure: pure\r\n    };\r\n\r\n    var par$1 = function (asyncValues, nu) {\r\n      return nu(function (callback) {\r\n        var r = [];\r\n        var count = 0;\r\n        var cb = function (i) {\r\n          return function (value) {\r\n            r[i] = value;\r\n            count++;\r\n            if (count >= asyncValues.length) {\r\n              callback(r);\r\n            }\r\n          };\r\n        };\r\n        if (asyncValues.length === 0) {\r\n          callback([]);\r\n        } else {\r\n          each$k(asyncValues, function (asyncValue, i) {\r\n            asyncValue.get(cb(i));\r\n          });\r\n        }\r\n      });\r\n    };\r\n\r\n    var par = function (futures) {\r\n      return par$1(futures, Future.nu);\r\n    };\r\n\r\n    var value$1 = function (o) {\r\n      var or = function (_opt) {\r\n        return value$1(o);\r\n      };\r\n      var orThunk = function (_f) {\r\n        return value$1(o);\r\n      };\r\n      var map = function (f) {\r\n        return value$1(f(o));\r\n      };\r\n      var mapError = function (_f) {\r\n        return value$1(o);\r\n      };\r\n      var each = function (f) {\r\n        f(o);\r\n      };\r\n      var bind = function (f) {\r\n        return f(o);\r\n      };\r\n      var fold = function (_, onValue) {\r\n        return onValue(o);\r\n      };\r\n      var exists = function (f) {\r\n        return f(o);\r\n      };\r\n      var forall = function (f) {\r\n        return f(o);\r\n      };\r\n      var toOptional = function () {\r\n        return Optional.some(o);\r\n      };\r\n      return {\r\n        isValue: always,\r\n        isError: never,\r\n        getOr: constant(o),\r\n        getOrThunk: constant(o),\r\n        getOrDie: constant(o),\r\n        or: or,\r\n        orThunk: orThunk,\r\n        fold: fold,\r\n        map: map,\r\n        mapError: mapError,\r\n        each: each,\r\n        bind: bind,\r\n        exists: exists,\r\n        forall: forall,\r\n        toOptional: toOptional\r\n      };\r\n    };\r\n    var error = function (message) {\r\n      var getOrThunk = function (f) {\r\n        return f();\r\n      };\r\n      var getOrDie = function () {\r\n        return die(String(message))();\r\n      };\r\n      var or = identity;\r\n      var orThunk = function (f) {\r\n        return f();\r\n      };\r\n      var map = function (_f) {\r\n        return error(message);\r\n      };\r\n      var mapError = function (f) {\r\n        return error(f(message));\r\n      };\r\n      var bind = function (_f) {\r\n        return error(message);\r\n      };\r\n      var fold = function (onError, _) {\r\n        return onError(message);\r\n      };\r\n      return {\r\n        isValue: never,\r\n        isError: always,\r\n        getOr: identity,\r\n        getOrThunk: getOrThunk,\r\n        getOrDie: getOrDie,\r\n        or: or,\r\n        orThunk: orThunk,\r\n        fold: fold,\r\n        map: map,\r\n        mapError: mapError,\r\n        each: noop,\r\n        bind: bind,\r\n        exists: never,\r\n        forall: always,\r\n        toOptional: Optional.none\r\n      };\r\n    };\r\n    var fromOption = function (opt, err) {\r\n      return opt.fold(function () {\r\n        return error(err);\r\n      }, value$1);\r\n    };\r\n    var Result = {\r\n      value: value$1,\r\n      error: error,\r\n      fromOption: fromOption\r\n    };\r\n\r\n    var generate$1 = function (cases) {\r\n      if (!isArray$1(cases)) {\r\n        throw new Error('cases must be an array');\r\n      }\r\n      if (cases.length === 0) {\r\n        throw new Error('there must be at least one case');\r\n      }\r\n      var constructors = [];\r\n      var adt = {};\r\n      each$k(cases, function (acase, count) {\r\n        var keys$1 = keys(acase);\r\n        if (keys$1.length !== 1) {\r\n          throw new Error('one and only one name per case');\r\n        }\r\n        var key = keys$1[0];\r\n        var value = acase[key];\r\n        if (adt[key] !== undefined) {\r\n          throw new Error('duplicate key detected:' + key);\r\n        } else if (key === 'cata') {\r\n          throw new Error('cannot have a case named cata (sorry)');\r\n        } else if (!isArray$1(value)) {\r\n          throw new Error('case arguments must be an array');\r\n        }\r\n        constructors.push(key);\r\n        adt[key] = function () {\r\n          var args = [];\r\n          for (var _i = 0; _i < arguments.length; _i++) {\r\n            args[_i] = arguments[_i];\r\n          }\r\n          var argLength = args.length;\r\n          if (argLength !== value.length) {\r\n            throw new Error('Wrong number of arguments to case ' + key + '. Expected ' + value.length + ' (' + value + '), got ' + argLength);\r\n          }\r\n          var match = function (branches) {\r\n            var branchKeys = keys(branches);\r\n            if (constructors.length !== branchKeys.length) {\r\n              throw new Error('Wrong number of arguments to match. Expected: ' + constructors.join(',') + '\\nActual: ' + branchKeys.join(','));\r\n            }\r\n            var allReqd = forall(constructors, function (reqKey) {\r\n              return contains$3(branchKeys, reqKey);\r\n            });\r\n            if (!allReqd) {\r\n              throw new Error('Not all branches were specified when using match. Specified: ' + branchKeys.join(', ') + '\\nRequired: ' + constructors.join(', '));\r\n            }\r\n            return branches[key].apply(null, args);\r\n          };\r\n          return {\r\n            fold: function () {\r\n              var foldArgs = [];\r\n              for (var _i = 0; _i < arguments.length; _i++) {\r\n                foldArgs[_i] = arguments[_i];\r\n              }\r\n              if (foldArgs.length !== cases.length) {\r\n                throw new Error('Wrong number of arguments to fold. Expected ' + cases.length + ', got ' + foldArgs.length);\r\n              }\r\n              var target = foldArgs[count];\r\n              return target.apply(null, args);\r\n            },\r\n            match: match,\r\n            log: function (label) {\r\n              console.log(label, {\r\n                constructors: constructors,\r\n                constructor: key,\r\n                params: args\r\n              });\r\n            }\r\n          };\r\n        };\r\n      });\r\n      return adt;\r\n    };\r\n    var Adt = { generate: generate$1 };\r\n\r\n    Adt.generate([\r\n      {\r\n        bothErrors: [\r\n          'error1',\r\n          'error2'\r\n        ]\r\n      },\r\n      {\r\n        firstError: [\r\n          'error1',\r\n          'value2'\r\n        ]\r\n      },\r\n      {\r\n        secondError: [\r\n          'value1',\r\n          'error2'\r\n        ]\r\n      },\r\n      {\r\n        bothValues: [\r\n          'value1',\r\n          'value2'\r\n        ]\r\n      }\r\n    ]);\r\n    var unite = function (result) {\r\n      return result.fold(identity, identity);\r\n    };\r\n\r\n    function ClosestOrAncestor (is, ancestor, scope, a, isRoot) {\r\n      if (is(scope, a)) {\r\n        return Optional.some(scope);\r\n      } else if (isFunction(isRoot) && isRoot(scope)) {\r\n        return Optional.none();\r\n      } else {\r\n        return ancestor(scope, a, isRoot);\r\n      }\r\n    }\r\n\r\n    var ancestor$3 = function (scope, predicate, isRoot) {\r\n      var element = scope.dom;\r\n      var stop = isFunction(isRoot) ? isRoot : never;\r\n      while (element.parentNode) {\r\n        element = element.parentNode;\r\n        var el = SugarElement.fromDom(element);\r\n        if (predicate(el)) {\r\n          return Optional.some(el);\r\n        } else if (stop(el)) {\r\n          break;\r\n        }\r\n      }\r\n      return Optional.none();\r\n    };\r\n    var closest$3 = function (scope, predicate, isRoot) {\r\n      var is = function (s, test) {\r\n        return test(s);\r\n      };\r\n      return ClosestOrAncestor(is, ancestor$3, scope, predicate, isRoot);\r\n    };\r\n    var sibling$2 = function (scope, predicate) {\r\n      var element = scope.dom;\r\n      if (!element.parentNode) {\r\n        return Optional.none();\r\n      }\r\n      return child(SugarElement.fromDom(element.parentNode), function (x) {\r\n        return !eq(scope, x) && predicate(x);\r\n      });\r\n    };\r\n    var child = function (scope, predicate) {\r\n      var pred = function (node) {\r\n        return predicate(SugarElement.fromDom(node));\r\n      };\r\n      var result = find$3(scope.dom.childNodes, pred);\r\n      return result.map(SugarElement.fromDom);\r\n    };\r\n\r\n    var ancestor$2 = function (scope, selector, isRoot) {\r\n      return ancestor$3(scope, function (e) {\r\n        return is$2(e, selector);\r\n      }, isRoot);\r\n    };\r\n    var descendant = function (scope, selector) {\r\n      return one(selector, scope);\r\n    };\r\n    var closest$2 = function (scope, selector, isRoot) {\r\n      var is = function (element, selector) {\r\n        return is$2(element, selector);\r\n      };\r\n      return ClosestOrAncestor(is, ancestor$2, scope, selector, isRoot);\r\n    };\r\n\r\n    var promiseObj = window.Promise ? window.Promise : Promise$1;\r\n\r\n    var requestAnimationFramePromise;\r\n    var requestAnimationFrame = function (callback, element) {\r\n      var requestAnimationFrameFunc = window.requestAnimationFrame;\r\n      var vendors = [\r\n        'ms',\r\n        'moz',\r\n        'webkit'\r\n      ];\r\n      var featurefill = function (cb) {\r\n        window.setTimeout(cb, 0);\r\n      };\r\n      for (var i = 0; i < vendors.length && !requestAnimationFrameFunc; i++) {\r\n        requestAnimationFrameFunc = window[vendors[i] + 'RequestAnimationFrame'];\r\n      }\r\n      if (!requestAnimationFrameFunc) {\r\n        requestAnimationFrameFunc = featurefill;\r\n      }\r\n      requestAnimationFrameFunc(callback, element);\r\n    };\r\n    var wrappedSetTimeout = function (callback, time) {\r\n      if (typeof time !== 'number') {\r\n        time = 0;\r\n      }\r\n      return setTimeout(callback, time);\r\n    };\r\n    var wrappedSetInterval = function (callback, time) {\r\n      if (typeof time !== 'number') {\r\n        time = 1;\r\n      }\r\n      return setInterval(callback, time);\r\n    };\r\n    var wrappedClearTimeout = function (id) {\r\n      return clearTimeout(id);\r\n    };\r\n    var wrappedClearInterval = function (id) {\r\n      return clearInterval(id);\r\n    };\r\n    var debounce = function (callback, time) {\r\n      var timer;\r\n      var func = function () {\r\n        var args = [];\r\n        for (var _i = 0; _i < arguments.length; _i++) {\r\n          args[_i] = arguments[_i];\r\n        }\r\n        clearTimeout(timer);\r\n        timer = wrappedSetTimeout(function () {\r\n          callback.apply(this, args);\r\n        }, time);\r\n      };\r\n      func.stop = function () {\r\n        clearTimeout(timer);\r\n      };\r\n      return func;\r\n    };\r\n    var Delay = {\r\n      requestAnimationFrame: function (callback, element) {\r\n        if (requestAnimationFramePromise) {\r\n          requestAnimationFramePromise.then(callback);\r\n          return;\r\n        }\r\n        requestAnimationFramePromise = new promiseObj(function (resolve) {\r\n          if (!element) {\r\n            element = document.body;\r\n          }\r\n          requestAnimationFrame(resolve, element);\r\n        }).then(callback);\r\n      },\r\n      setTimeout: wrappedSetTimeout,\r\n      setInterval: wrappedSetInterval,\r\n      setEditorTimeout: function (editor, callback, time) {\r\n        return wrappedSetTimeout(function () {\r\n          if (!editor.removed) {\r\n            callback();\r\n          }\r\n        }, time);\r\n      },\r\n      setEditorInterval: function (editor, callback, time) {\r\n        var timer = wrappedSetInterval(function () {\r\n          if (!editor.removed) {\r\n            callback();\r\n          } else {\r\n            clearInterval(timer);\r\n          }\r\n        }, time);\r\n        return timer;\r\n      },\r\n      debounce: debounce,\r\n      throttle: debounce,\r\n      clearInterval: wrappedClearInterval,\r\n      clearTimeout: wrappedClearTimeout\r\n    };\r\n\r\n    var StyleSheetLoader = function (documentOrShadowRoot, settings) {\r\n      if (settings === void 0) {\r\n        settings = {};\r\n      }\r\n      var idCount = 0;\r\n      var loadedStates = {};\r\n      var edos = SugarElement.fromDom(documentOrShadowRoot);\r\n      var doc = documentOrOwner(edos);\r\n      var maxLoadTime = settings.maxLoadTime || 5000;\r\n      var _setReferrerPolicy = function (referrerPolicy) {\r\n        settings.referrerPolicy = referrerPolicy;\r\n      };\r\n      var addStyle = function (element) {\r\n        append$1(getStyleContainer(edos), element);\r\n      };\r\n      var removeStyle = function (id) {\r\n        var styleContainer = getStyleContainer(edos);\r\n        descendant(styleContainer, '#' + id).each(remove$7);\r\n      };\r\n      var getOrCreateState = function (url) {\r\n        return get$9(loadedStates, url).getOrThunk(function () {\r\n          return {\r\n            id: 'mce-u' + idCount++,\r\n            passed: [],\r\n            failed: [],\r\n            count: 0\r\n          };\r\n        });\r\n      };\r\n      var load = function (url, success, failure) {\r\n        var link;\r\n        var urlWithSuffix = Tools._addCacheSuffix(url);\r\n        var state = getOrCreateState(urlWithSuffix);\r\n        loadedStates[urlWithSuffix] = state;\r\n        state.count++;\r\n        var resolve = function (callbacks, status) {\r\n          var i = callbacks.length;\r\n          while (i--) {\r\n            callbacks[i]();\r\n          }\r\n          state.status = status;\r\n          state.passed = [];\r\n          state.failed = [];\r\n          if (link) {\r\n            link.onload = null;\r\n            link.onerror = null;\r\n            link = null;\r\n          }\r\n        };\r\n        var passed = function () {\r\n          return resolve(state.passed, 2);\r\n        };\r\n        var failed = function () {\r\n          return resolve(state.failed, 3);\r\n        };\r\n        var wait = function (testCallback, waitCallback) {\r\n          if (!testCallback()) {\r\n            if (Date.now() - startTime < maxLoadTime) {\r\n              Delay.setTimeout(waitCallback);\r\n            } else {\r\n              failed();\r\n            }\r\n          }\r\n        };\r\n        var waitForWebKitLinkLoaded = function () {\r\n          wait(function () {\r\n            var styleSheets = documentOrShadowRoot.styleSheets;\r\n            var i = styleSheets.length;\r\n            while (i--) {\r\n              var styleSheet = styleSheets[i];\r\n              var owner = styleSheet.ownerNode;\r\n              if (owner && owner.id === link.id) {\r\n                passed();\r\n                return true;\r\n              }\r\n            }\r\n            return false;\r\n          }, waitForWebKitLinkLoaded);\r\n        };\r\n        if (success) {\r\n          state.passed.push(success);\r\n        }\r\n        if (failure) {\r\n          state.failed.push(failure);\r\n        }\r\n        if (state.status === 1) {\r\n          return;\r\n        }\r\n        if (state.status === 2) {\r\n          passed();\r\n          return;\r\n        }\r\n        if (state.status === 3) {\r\n          failed();\r\n          return;\r\n        }\r\n        state.status = 1;\r\n        var linkElem = SugarElement.fromTag('link', doc.dom);\r\n        setAll$1(linkElem, {\r\n          rel: 'stylesheet',\r\n          type: 'text/css',\r\n          id: state.id\r\n        });\r\n        var startTime = Date.now();\r\n        if (settings.contentCssCors) {\r\n          set$1(linkElem, 'crossOrigin', 'anonymous');\r\n        }\r\n        if (settings.referrerPolicy) {\r\n          set$1(linkElem, 'referrerpolicy', settings.referrerPolicy);\r\n        }\r\n        link = linkElem.dom;\r\n        link.onload = waitForWebKitLinkLoaded;\r\n        link.onerror = failed;\r\n        addStyle(linkElem);\r\n        set$1(linkElem, 'href', urlWithSuffix);\r\n      };\r\n      var loadF = function (url) {\r\n        return Future.nu(function (resolve) {\r\n          load(url, compose(resolve, constant(Result.value(url))), compose(resolve, constant(Result.error(url))));\r\n        });\r\n      };\r\n      var loadAll = function (urls, success, failure) {\r\n        par(map$3(urls, loadF)).get(function (result) {\r\n          var parts = partition(result, function (r) {\r\n            return r.isValue();\r\n          });\r\n          if (parts.fail.length > 0) {\r\n            failure(parts.fail.map(unite));\r\n          } else {\r\n            success(parts.pass.map(unite));\r\n          }\r\n        });\r\n      };\r\n      var unload = function (url) {\r\n        var urlWithSuffix = Tools._addCacheSuffix(url);\r\n        get$9(loadedStates, urlWithSuffix).each(function (state) {\r\n          var count = --state.count;\r\n          if (count === 0) {\r\n            delete loadedStates[urlWithSuffix];\r\n            removeStyle(state.id);\r\n          }\r\n        });\r\n      };\r\n      var unloadAll = function (urls) {\r\n        each$k(urls, function (url) {\r\n          unload(url);\r\n        });\r\n      };\r\n      return {\r\n        load: load,\r\n        loadAll: loadAll,\r\n        unload: unload,\r\n        unloadAll: unloadAll,\r\n        _setReferrerPolicy: _setReferrerPolicy\r\n      };\r\n    };\r\n\r\n    var create$8 = function () {\r\n      var map = new WeakMap();\r\n      var forElement = function (referenceElement, settings) {\r\n        var root = getRootNode(referenceElement);\r\n        var rootDom = root.dom;\r\n        return Optional.from(map.get(rootDom)).getOrThunk(function () {\r\n          var sl = StyleSheetLoader(rootDom, settings);\r\n          map.set(rootDom, sl);\r\n          return sl;\r\n        });\r\n      };\r\n      return { forElement: forElement };\r\n    };\r\n    var instance = create$8();\r\n\r\n    var DomTreeWalker = function () {\r\n      function DomTreeWalker(startNode, rootNode) {\r\n        this.node = startNode;\r\n        this.rootNode = rootNode;\r\n        this.current = this.current.bind(this);\r\n        this.next = this.next.bind(this);\r\n        this.prev = this.prev.bind(this);\r\n        this.prev2 = this.prev2.bind(this);\r\n      }\r\n      DomTreeWalker.prototype.current = function () {\r\n        return this.node;\r\n      };\r\n      DomTreeWalker.prototype.next = function (shallow) {\r\n        this.node = this.findSibling(this.node, 'firstChild', 'nextSibling', shallow);\r\n        return this.node;\r\n      };\r\n      DomTreeWalker.prototype.prev = function (shallow) {\r\n        this.node = this.findSibling(this.node, 'lastChild', 'previousSibling', shallow);\r\n        return this.node;\r\n      };\r\n      DomTreeWalker.prototype.prev2 = function (shallow) {\r\n        this.node = this.findPreviousNode(this.node, 'lastChild', 'previousSibling', shallow);\r\n        return this.node;\r\n      };\r\n      DomTreeWalker.prototype.findSibling = function (node, startName, siblingName, shallow) {\r\n        var sibling, parent;\r\n        if (node) {\r\n          if (!shallow && node[startName]) {\r\n            return node[startName];\r\n          }\r\n          if (node !== this.rootNode) {\r\n            sibling = node[siblingName];\r\n            if (sibling) {\r\n              return sibling;\r\n            }\r\n            for (parent = node.parentNode; parent && parent !== this.rootNode; parent = parent.parentNode) {\r\n              sibling = parent[siblingName];\r\n              if (sibling) {\r\n                return sibling;\r\n              }\r\n            }\r\n          }\r\n        }\r\n      };\r\n      DomTreeWalker.prototype.findPreviousNode = function (node, startName, siblingName, shallow) {\r\n        var sibling, parent, child;\r\n        if (node) {\r\n          sibling = node[siblingName];\r\n          if (this.rootNode && sibling === this.rootNode) {\r\n            return;\r\n          }\r\n          if (sibling) {\r\n            if (!shallow) {\r\n              for (child = sibling[startName]; child; child = child[startName]) {\r\n                if (!child[startName]) {\r\n                  return child;\r\n                }\r\n              }\r\n            }\r\n            return sibling;\r\n          }\r\n          parent = node.parentNode;\r\n          if (parent && parent !== this.rootNode) {\r\n            return parent;\r\n          }\r\n        }\r\n      };\r\n      return DomTreeWalker;\r\n    }();\r\n\r\n    var blocks = [\r\n      'article',\r\n      'aside',\r\n      'details',\r\n      'div',\r\n      'dt',\r\n      'figcaption',\r\n      'footer',\r\n      'form',\r\n      'fieldset',\r\n      'header',\r\n      'hgroup',\r\n      'html',\r\n      'main',\r\n      'nav',\r\n      'section',\r\n      'summary',\r\n      'body',\r\n      'p',\r\n      'dl',\r\n      'multicol',\r\n      'dd',\r\n      'figure',\r\n      'address',\r\n      'center',\r\n      'blockquote',\r\n      'h1',\r\n      'h2',\r\n      'h3',\r\n      'h4',\r\n      'h5',\r\n      'h6',\r\n      'listing',\r\n      'xmp',\r\n      'pre',\r\n      'plaintext',\r\n      'menu',\r\n      'dir',\r\n      'ul',\r\n      'ol',\r\n      'li',\r\n      'hr',\r\n      'table',\r\n      'tbody',\r\n      'thead',\r\n      'tfoot',\r\n      'th',\r\n      'tr',\r\n      'td',\r\n      'caption'\r\n    ];\r\n    var tableCells = [\r\n      'td',\r\n      'th'\r\n    ];\r\n    var tableSections = [\r\n      'thead',\r\n      'tbody',\r\n      'tfoot'\r\n    ];\r\n    var textBlocks = [\r\n      'h1',\r\n      'h2',\r\n      'h3',\r\n      'h4',\r\n      'h5',\r\n      'h6',\r\n      'p',\r\n      'div',\r\n      'address',\r\n      'pre',\r\n      'form',\r\n      'blockquote',\r\n      'center',\r\n      'dir',\r\n      'fieldset',\r\n      'header',\r\n      'footer',\r\n      'article',\r\n      'section',\r\n      'hgroup',\r\n      'aside',\r\n      'nav',\r\n      'figure'\r\n    ];\r\n    var headings = [\r\n      'h1',\r\n      'h2',\r\n      'h3',\r\n      'h4',\r\n      'h5',\r\n      'h6'\r\n    ];\r\n    var listItems$1 = [\r\n      'li',\r\n      'dd',\r\n      'dt'\r\n    ];\r\n    var lists = [\r\n      'ul',\r\n      'ol',\r\n      'dl'\r\n    ];\r\n    var wsElements = [\r\n      'pre',\r\n      'script',\r\n      'textarea',\r\n      'style'\r\n    ];\r\n    var lazyLookup = function (items) {\r\n      var lookup;\r\n      return function (node) {\r\n        lookup = lookup ? lookup : mapToObject(items, always);\r\n        return has$2(lookup, name(node));\r\n      };\r\n    };\r\n    var isHeading = lazyLookup(headings);\r\n    var isBlock$2 = lazyLookup(blocks);\r\n    var isTable$2 = function (node) {\r\n      return name(node) === 'table';\r\n    };\r\n    var isInline$1 = function (node) {\r\n      return isElement$6(node) && !isBlock$2(node);\r\n    };\r\n    var isBr$4 = function (node) {\r\n      return isElement$6(node) && name(node) === 'br';\r\n    };\r\n    var isTextBlock$2 = lazyLookup(textBlocks);\r\n    var isList = lazyLookup(lists);\r\n    var isListItem = lazyLookup(listItems$1);\r\n    var isTableSection = lazyLookup(tableSections);\r\n    var isTableCell$4 = lazyLookup(tableCells);\r\n    var isWsPreserveElement = lazyLookup(wsElements);\r\n\r\n    var ancestor$1 = function (scope, selector, isRoot) {\r\n      return ancestor$2(scope, selector, isRoot).isSome();\r\n    };\r\n\r\n    var zeroWidth = '\\uFEFF';\r\n    var nbsp = '\\xA0';\r\n    var isZwsp$1 = function (char) {\r\n      return char === zeroWidth;\r\n    };\r\n    var removeZwsp = function (s) {\r\n      return s.replace(/\\uFEFF/g, '');\r\n    };\r\n\r\n    var ZWSP$1 = zeroWidth;\r\n    var isZwsp = isZwsp$1;\r\n    var trim$2 = removeZwsp;\r\n\r\n    var isElement$4 = isElement$5;\r\n    var isText$6 = isText$7;\r\n    var isCaretContainerBlock$1 = function (node) {\r\n      if (isText$6(node)) {\r\n        node = node.parentNode;\r\n      }\r\n      return isElement$4(node) && node.hasAttribute('data-mce-caret');\r\n    };\r\n    var isCaretContainerInline = function (node) {\r\n      return isText$6(node) && isZwsp(node.data);\r\n    };\r\n    var isCaretContainer$2 = function (node) {\r\n      return isCaretContainerBlock$1(node) || isCaretContainerInline(node);\r\n    };\r\n    var hasContent = function (node) {\r\n      return node.firstChild !== node.lastChild || !isBr$5(node.firstChild);\r\n    };\r\n    var insertInline$1 = function (node, before) {\r\n      var doc = node.ownerDocument;\r\n      var textNode = doc.createTextNode(ZWSP$1);\r\n      var parentNode = node.parentNode;\r\n      if (!before) {\r\n        var sibling = node.nextSibling;\r\n        if (isText$6(sibling)) {\r\n          if (isCaretContainer$2(sibling)) {\r\n            return sibling;\r\n          }\r\n          if (startsWithCaretContainer$1(sibling)) {\r\n            sibling.splitText(1);\r\n            return sibling;\r\n          }\r\n        }\r\n        if (node.nextSibling) {\r\n          parentNode.insertBefore(textNode, node.nextSibling);\r\n        } else {\r\n          parentNode.appendChild(textNode);\r\n        }\r\n      } else {\r\n        var sibling = node.previousSibling;\r\n        if (isText$6(sibling)) {\r\n          if (isCaretContainer$2(sibling)) {\r\n            return sibling;\r\n          }\r\n          if (endsWithCaretContainer$1(sibling)) {\r\n            return sibling.splitText(sibling.data.length - 1);\r\n          }\r\n        }\r\n        parentNode.insertBefore(textNode, node);\r\n      }\r\n      return textNode;\r\n    };\r\n    var isBeforeInline = function (pos) {\r\n      var container = pos.container();\r\n      if (!isText$7(container)) {\r\n        return false;\r\n      }\r\n      return container.data.charAt(pos.offset()) === ZWSP$1 || pos.isAtStart() && isCaretContainerInline(container.previousSibling);\r\n    };\r\n    var isAfterInline = function (pos) {\r\n      var container = pos.container();\r\n      if (!isText$7(container)) {\r\n        return false;\r\n      }\r\n      return container.data.charAt(pos.offset() - 1) === ZWSP$1 || pos.isAtEnd() && isCaretContainerInline(container.nextSibling);\r\n    };\r\n    var createBogusBr = function () {\r\n      var br = document.createElement('br');\r\n      br.setAttribute('data-mce-bogus', '1');\r\n      return br;\r\n    };\r\n    var insertBlock$1 = function (blockName, node, before) {\r\n      var doc = node.ownerDocument;\r\n      var blockNode = doc.createElement(blockName);\r\n      blockNode.setAttribute('data-mce-caret', before ? 'before' : 'after');\r\n      blockNode.setAttribute('data-mce-bogus', 'all');\r\n      blockNode.appendChild(createBogusBr());\r\n      var parentNode = node.parentNode;\r\n      if (!before) {\r\n        if (node.nextSibling) {\r\n          parentNode.insertBefore(blockNode, node.nextSibling);\r\n        } else {\r\n          parentNode.appendChild(blockNode);\r\n        }\r\n      } else {\r\n        parentNode.insertBefore(blockNode, node);\r\n      }\r\n      return blockNode;\r\n    };\r\n    var startsWithCaretContainer$1 = function (node) {\r\n      return isText$6(node) && node.data[0] === ZWSP$1;\r\n    };\r\n    var endsWithCaretContainer$1 = function (node) {\r\n      return isText$6(node) && node.data[node.data.length - 1] === ZWSP$1;\r\n    };\r\n    var trimBogusBr = function (elm) {\r\n      var brs = elm.getElementsByTagName('br');\r\n      var lastBr = brs[brs.length - 1];\r\n      if (isBogus$2(lastBr)) {\r\n        lastBr.parentNode.removeChild(lastBr);\r\n      }\r\n    };\r\n    var showCaretContainerBlock = function (caretContainer) {\r\n      if (caretContainer && caretContainer.hasAttribute('data-mce-caret')) {\r\n        trimBogusBr(caretContainer);\r\n        caretContainer.removeAttribute('data-mce-caret');\r\n        caretContainer.removeAttribute('data-mce-bogus');\r\n        caretContainer.removeAttribute('style');\r\n        caretContainer.removeAttribute('_moz_abspos');\r\n        return caretContainer;\r\n      }\r\n      return null;\r\n    };\r\n    var isRangeInCaretContainerBlock = function (range) {\r\n      return isCaretContainerBlock$1(range.startContainer);\r\n    };\r\n\r\n    var isContentEditableTrue$3 = isContentEditableTrue$4;\r\n    var isContentEditableFalse$a = isContentEditableFalse$b;\r\n    var isBr$3 = isBr$5;\r\n    var isText$5 = isText$7;\r\n    var isInvalidTextElement = matchNodeNames([\r\n      'script',\r\n      'style',\r\n      'textarea'\r\n    ]);\r\n    var isAtomicInline = matchNodeNames([\r\n      'img',\r\n      'input',\r\n      'textarea',\r\n      'hr',\r\n      'iframe',\r\n      'video',\r\n      'audio',\r\n      'object',\r\n      'embed'\r\n    ]);\r\n    var isTable$1 = matchNodeNames(['table']);\r\n    var isCaretContainer$1 = isCaretContainer$2;\r\n    var isCaretCandidate$3 = function (node) {\r\n      if (isCaretContainer$1(node)) {\r\n        return false;\r\n      }\r\n      if (isText$5(node)) {\r\n        return !isInvalidTextElement(node.parentNode);\r\n      }\r\n      return isAtomicInline(node) || isBr$3(node) || isTable$1(node) || isNonUiContentEditableFalse(node);\r\n    };\r\n    var isUnselectable = function (node) {\r\n      return isElement$5(node) && node.getAttribute('unselectable') === 'true';\r\n    };\r\n    var isNonUiContentEditableFalse = function (node) {\r\n      return isUnselectable(node) === false && isContentEditableFalse$a(node);\r\n    };\r\n    var isInEditable = function (node, root) {\r\n      for (node = node.parentNode; node && node !== root; node = node.parentNode) {\r\n        if (isNonUiContentEditableFalse(node)) {\r\n          return false;\r\n        }\r\n        if (isContentEditableTrue$3(node)) {\r\n          return true;\r\n        }\r\n      }\r\n      return true;\r\n    };\r\n    var isAtomicContentEditableFalse = function (node) {\r\n      if (!isNonUiContentEditableFalse(node)) {\r\n        return false;\r\n      }\r\n      return foldl(from(node.getElementsByTagName('*')), function (result, elm) {\r\n        return result || isContentEditableTrue$3(elm);\r\n      }, false) !== true;\r\n    };\r\n    var isAtomic$1 = function (node) {\r\n      return isAtomicInline(node) || isAtomicContentEditableFalse(node);\r\n    };\r\n    var isEditableCaretCandidate$1 = function (node, root) {\r\n      return isCaretCandidate$3(node) && isInEditable(node, root);\r\n    };\r\n\r\n    var whiteSpaceRegExp$1 = /^[ \\t\\r\\n]*$/;\r\n    var isWhitespaceText = function (text) {\r\n      return whiteSpaceRegExp$1.test(text);\r\n    };\r\n\r\n    var hasWhitespacePreserveParent = function (node, rootNode) {\r\n      var rootElement = SugarElement.fromDom(rootNode);\r\n      var startNode = SugarElement.fromDom(node);\r\n      return ancestor$1(startNode, 'pre,code', curry(eq, rootElement));\r\n    };\r\n    var isWhitespace = function (node, rootNode) {\r\n      return isText$7(node) && isWhitespaceText(node.data) && hasWhitespacePreserveParent(node, rootNode) === false;\r\n    };\r\n    var isNamedAnchor = function (node) {\r\n      return isElement$5(node) && node.nodeName === 'A' && !node.hasAttribute('href') && (node.hasAttribute('name') || node.hasAttribute('id'));\r\n    };\r\n    var isContent$1 = function (node, rootNode) {\r\n      return isCaretCandidate$3(node) && isWhitespace(node, rootNode) === false || isNamedAnchor(node) || isBookmark(node);\r\n    };\r\n    var isBookmark = hasAttribute('data-mce-bookmark');\r\n    var isBogus$1 = hasAttribute('data-mce-bogus');\r\n    var isBogusAll = hasAttributeValue('data-mce-bogus', 'all');\r\n    var isEmptyNode = function (targetNode, skipBogus) {\r\n      var brCount = 0;\r\n      if (isContent$1(targetNode, targetNode)) {\r\n        return false;\r\n      } else {\r\n        var node = targetNode.firstChild;\r\n        if (!node) {\r\n          return true;\r\n        }\r\n        var walker = new DomTreeWalker(node, targetNode);\r\n        do {\r\n          if (skipBogus) {\r\n            if (isBogusAll(node)) {\r\n              node = walker.next(true);\r\n              continue;\r\n            }\r\n            if (isBogus$1(node)) {\r\n              node = walker.next();\r\n              continue;\r\n            }\r\n          }\r\n          if (isBr$5(node)) {\r\n            brCount++;\r\n            node = walker.next();\r\n            continue;\r\n          }\r\n          if (isContent$1(node, targetNode)) {\r\n            return false;\r\n          }\r\n          node = walker.next();\r\n        } while (node);\r\n        return brCount <= 1;\r\n      }\r\n    };\r\n    var isEmpty$2 = function (elm, skipBogus) {\r\n      if (skipBogus === void 0) {\r\n        skipBogus = true;\r\n      }\r\n      return isEmptyNode(elm.dom, skipBogus);\r\n    };\r\n\r\n    var isSpan = function (node) {\r\n      return node.nodeName.toLowerCase() === 'span';\r\n    };\r\n    var isInlineContent = function (node, root) {\r\n      return isNonNullable(node) && (isContent$1(node, root) || isInline$1(SugarElement.fromDom(node)));\r\n    };\r\n    var surroundedByInlineContent = function (node, root) {\r\n      var prev = new DomTreeWalker(node, root).prev(false);\r\n      var next = new DomTreeWalker(node, root).next(false);\r\n      var prevIsInline = isUndefined(prev) || isInlineContent(prev, root);\r\n      var nextIsInline = isUndefined(next) || isInlineContent(next, root);\r\n      return prevIsInline && nextIsInline;\r\n    };\r\n    var isBookmarkNode$2 = function (node) {\r\n      return isSpan(node) && node.getAttribute('data-mce-type') === 'bookmark';\r\n    };\r\n    var isKeepTextNode = function (node, root) {\r\n      return isText$7(node) && node.data.length > 0 && surroundedByInlineContent(node, root);\r\n    };\r\n    var isKeepElement = function (node) {\r\n      return isElement$5(node) ? node.childNodes.length > 0 : false;\r\n    };\r\n    var isDocument = function (node) {\r\n      return isDocumentFragment(node) || isDocument$1(node);\r\n    };\r\n    var trimNode = function (dom, node, root) {\r\n      var rootNode = root || node;\r\n      if (isElement$5(node) && isBookmarkNode$2(node)) {\r\n        return node;\r\n      }\r\n      var children = node.childNodes;\r\n      for (var i = children.length - 1; i >= 0; i--) {\r\n        trimNode(dom, children[i], rootNode);\r\n      }\r\n      if (isElement$5(node)) {\r\n        var currentChildren = node.childNodes;\r\n        if (currentChildren.length === 1 && isBookmarkNode$2(currentChildren[0])) {\r\n          node.parentNode.insertBefore(currentChildren[0], node);\r\n        }\r\n      }\r\n      if (!isDocument(node) && !isContent$1(node, rootNode) && !isKeepElement(node) && !isKeepTextNode(node, rootNode)) {\r\n        dom.remove(node);\r\n      }\r\n      return node;\r\n    };\r\n\r\n    var makeMap$3 = Tools.makeMap;\r\n    var attrsCharsRegExp = /[&<>\\\"\\u0060\\u007E-\\uD7FF\\uE000-\\uFFEF]|[\\uD800-\\uDBFF][\\uDC00-\\uDFFF]/g;\r\n    var textCharsRegExp = /[<>&\\u007E-\\uD7FF\\uE000-\\uFFEF]|[\\uD800-\\uDBFF][\\uDC00-\\uDFFF]/g;\r\n    var rawCharsRegExp = /[<>&\\\"\\']/g;\r\n    var entityRegExp = /&#([a-z0-9]+);?|&([a-z0-9]+);/gi;\r\n    var asciiMap = {\r\n      128: '\\u20AC',\r\n      130: '\\u201A',\r\n      131: '\\u0192',\r\n      132: '\\u201E',\r\n      133: '\\u2026',\r\n      134: '\\u2020',\r\n      135: '\\u2021',\r\n      136: '\\u02c6',\r\n      137: '\\u2030',\r\n      138: '\\u0160',\r\n      139: '\\u2039',\r\n      140: '\\u0152',\r\n      142: '\\u017d',\r\n      145: '\\u2018',\r\n      146: '\\u2019',\r\n      147: '\\u201C',\r\n      148: '\\u201D',\r\n      149: '\\u2022',\r\n      150: '\\u2013',\r\n      151: '\\u2014',\r\n      152: '\\u02DC',\r\n      153: '\\u2122',\r\n      154: '\\u0161',\r\n      155: '\\u203A',\r\n      156: '\\u0153',\r\n      158: '\\u017e',\r\n      159: '\\u0178'\r\n    };\r\n    var baseEntities = {\r\n      '\"': '&quot;',\r\n      '\\'': '&#39;',\r\n      '<': '&lt;',\r\n      '>': '&gt;',\r\n      '&': '&amp;',\r\n      '`': '&#96;'\r\n    };\r\n    var reverseEntities = {\r\n      '&lt;': '<',\r\n      '&gt;': '>',\r\n      '&amp;': '&',\r\n      '&quot;': '\"',\r\n      '&apos;': '\\''\r\n    };\r\n    var nativeDecode = function (text) {\r\n      var elm = SugarElement.fromTag('div').dom;\r\n      elm.innerHTML = text;\r\n      return elm.textContent || elm.innerText || text;\r\n    };\r\n    var buildEntitiesLookup = function (items, radix) {\r\n      var i, chr, entity;\r\n      var lookup = {};\r\n      if (items) {\r\n        items = items.split(',');\r\n        radix = radix || 10;\r\n        for (i = 0; i < items.length; i += 2) {\r\n          chr = String.fromCharCode(parseInt(items[i], radix));\r\n          if (!baseEntities[chr]) {\r\n            entity = '&' + items[i + 1] + ';';\r\n            lookup[chr] = entity;\r\n            lookup[entity] = chr;\r\n          }\r\n        }\r\n        return lookup;\r\n      }\r\n    };\r\n    var namedEntities = buildEntitiesLookup('50,nbsp,51,iexcl,52,cent,53,pound,54,curren,55,yen,56,brvbar,57,sect,58,uml,59,copy,' + '5a,ordf,5b,laquo,5c,not,5d,shy,5e,reg,5f,macr,5g,deg,5h,plusmn,5i,sup2,5j,sup3,5k,acute,' + '5l,micro,5m,para,5n,middot,5o,cedil,5p,sup1,5q,ordm,5r,raquo,5s,frac14,5t,frac12,5u,frac34,' + '5v,iquest,60,Agrave,61,Aacute,62,Acirc,63,Atilde,64,Auml,65,Aring,66,AElig,67,Ccedil,' + '68,Egrave,69,Eacute,6a,Ecirc,6b,Euml,6c,Igrave,6d,Iacute,6e,Icirc,6f,Iuml,6g,ETH,6h,Ntilde,' + '6i,Ograve,6j,Oacute,6k,Ocirc,6l,Otilde,6m,Ouml,6n,times,6o,Oslash,6p,Ugrave,6q,Uacute,' + '6r,Ucirc,6s,Uuml,6t,Yacute,6u,THORN,6v,szlig,70,agrave,71,aacute,72,acirc,73,atilde,74,auml,' + '75,aring,76,aelig,77,ccedil,78,egrave,79,eacute,7a,ecirc,7b,euml,7c,igrave,7d,iacute,7e,icirc,' + '7f,iuml,7g,eth,7h,ntilde,7i,ograve,7j,oacute,7k,ocirc,7l,otilde,7m,ouml,7n,divide,7o,oslash,' + '7p,ugrave,7q,uacute,7r,ucirc,7s,uuml,7t,yacute,7u,thorn,7v,yuml,ci,fnof,sh,Alpha,si,Beta,' + 'sj,Gamma,sk,Delta,sl,Epsilon,sm,Zeta,sn,Eta,so,Theta,sp,Iota,sq,Kappa,sr,Lambda,ss,Mu,' + 'st,Nu,su,Xi,sv,Omicron,t0,Pi,t1,Rho,t3,Sigma,t4,Tau,t5,Upsilon,t6,Phi,t7,Chi,t8,Psi,' + 't9,Omega,th,alpha,ti,beta,tj,gamma,tk,delta,tl,epsilon,tm,zeta,tn,eta,to,theta,tp,iota,' + 'tq,kappa,tr,lambda,ts,mu,tt,nu,tu,xi,tv,omicron,u0,pi,u1,rho,u2,sigmaf,u3,sigma,u4,tau,' + 'u5,upsilon,u6,phi,u7,chi,u8,psi,u9,omega,uh,thetasym,ui,upsih,um,piv,812,bull,816,hellip,' + '81i,prime,81j,Prime,81u,oline,824,frasl,88o,weierp,88h,image,88s,real,892,trade,89l,alefsym,' + '8cg,larr,8ch,uarr,8ci,rarr,8cj,darr,8ck,harr,8dl,crarr,8eg,lArr,8eh,uArr,8ei,rArr,8ej,dArr,' + '8ek,hArr,8g0,forall,8g2,part,8g3,exist,8g5,empty,8g7,nabla,8g8,isin,8g9,notin,8gb,ni,8gf,prod,' + '8gh,sum,8gi,minus,8gn,lowast,8gq,radic,8gt,prop,8gu,infin,8h0,ang,8h7,and,8h8,or,8h9,cap,8ha,cup,' + '8hb,int,8hk,there4,8hs,sim,8i5,cong,8i8,asymp,8j0,ne,8j1,equiv,8j4,le,8j5,ge,8k2,sub,8k3,sup,8k4,' + 'nsub,8k6,sube,8k7,supe,8kl,oplus,8kn,otimes,8l5,perp,8m5,sdot,8o8,lceil,8o9,rceil,8oa,lfloor,8ob,' + 'rfloor,8p9,lang,8pa,rang,9ea,loz,9j0,spades,9j3,clubs,9j5,hearts,9j6,diams,ai,OElig,aj,oelig,b0,' + 'Scaron,b1,scaron,bo,Yuml,m6,circ,ms,tilde,802,ensp,803,emsp,809,thinsp,80c,zwnj,80d,zwj,80e,lrm,' + '80f,rlm,80j,ndash,80k,mdash,80o,lsquo,80p,rsquo,80q,sbquo,80s,ldquo,80t,rdquo,80u,bdquo,810,dagger,' + '811,Dagger,81g,permil,81p,lsaquo,81q,rsaquo,85c,euro', 32);\r\n    var encodeRaw = function (text, attr) {\r\n      return text.replace(attr ? attrsCharsRegExp : textCharsRegExp, function (chr) {\r\n        return baseEntities[chr] || chr;\r\n      });\r\n    };\r\n    var encodeAllRaw = function (text) {\r\n      return ('' + text).replace(rawCharsRegExp, function (chr) {\r\n        return baseEntities[chr] || chr;\r\n      });\r\n    };\r\n    var encodeNumeric = function (text, attr) {\r\n      return text.replace(attr ? attrsCharsRegExp : textCharsRegExp, function (chr) {\r\n        if (chr.length > 1) {\r\n          return '&#' + ((chr.charCodeAt(0) - 55296) * 1024 + (chr.charCodeAt(1) - 56320) + 65536) + ';';\r\n        }\r\n        return baseEntities[chr] || '&#' + chr.charCodeAt(0) + ';';\r\n      });\r\n    };\r\n    var encodeNamed = function (text, attr, entities) {\r\n      entities = entities || namedEntities;\r\n      return text.replace(attr ? attrsCharsRegExp : textCharsRegExp, function (chr) {\r\n        return baseEntities[chr] || entities[chr] || chr;\r\n      });\r\n    };\r\n    var getEncodeFunc = function (name, entities) {\r\n      var entitiesMap = buildEntitiesLookup(entities) || namedEntities;\r\n      var encodeNamedAndNumeric = function (text, attr) {\r\n        return text.replace(attr ? attrsCharsRegExp : textCharsRegExp, function (chr) {\r\n          if (baseEntities[chr] !== undefined) {\r\n            return baseEntities[chr];\r\n          }\r\n          if (entitiesMap[chr] !== undefined) {\r\n            return entitiesMap[chr];\r\n          }\r\n          if (chr.length > 1) {\r\n            return '&#' + ((chr.charCodeAt(0) - 55296) * 1024 + (chr.charCodeAt(1) - 56320) + 65536) + ';';\r\n          }\r\n          return '&#' + chr.charCodeAt(0) + ';';\r\n        });\r\n      };\r\n      var encodeCustomNamed = function (text, attr) {\r\n        return encodeNamed(text, attr, entitiesMap);\r\n      };\r\n      var nameMap = makeMap$3(name.replace(/\\+/g, ','));\r\n      if (nameMap.named && nameMap.numeric) {\r\n        return encodeNamedAndNumeric;\r\n      }\r\n      if (nameMap.named) {\r\n        if (entities) {\r\n          return encodeCustomNamed;\r\n        }\r\n        return encodeNamed;\r\n      }\r\n      if (nameMap.numeric) {\r\n        return encodeNumeric;\r\n      }\r\n      return encodeRaw;\r\n    };\r\n    var decode = function (text) {\r\n      return text.replace(entityRegExp, function (all, numeric) {\r\n        if (numeric) {\r\n          if (numeric.charAt(0).toLowerCase() === 'x') {\r\n            numeric = parseInt(numeric.substr(1), 16);\r\n          } else {\r\n            numeric = parseInt(numeric, 10);\r\n          }\r\n          if (numeric > 65535) {\r\n            numeric -= 65536;\r\n            return String.fromCharCode(55296 + (numeric >> 10), 56320 + (numeric & 1023));\r\n          }\r\n          return asciiMap[numeric] || String.fromCharCode(numeric);\r\n        }\r\n        return reverseEntities[all] || namedEntities[all] || nativeDecode(all);\r\n      });\r\n    };\r\n    var Entities = {\r\n      encodeRaw: encodeRaw,\r\n      encodeAllRaw: encodeAllRaw,\r\n      encodeNumeric: encodeNumeric,\r\n      encodeNamed: encodeNamed,\r\n      getEncodeFunc: getEncodeFunc,\r\n      decode: decode\r\n    };\r\n\r\n    var mapCache = {}, dummyObj = {};\r\n    var makeMap$2 = Tools.makeMap, each$h = Tools.each, extend$5 = Tools.extend, explode$3 = Tools.explode, inArray$2 = Tools.inArray;\r\n    var split$1 = function (items, delim) {\r\n      items = Tools.trim(items);\r\n      return items ? items.split(delim || ' ') : [];\r\n    };\r\n    var createMap = function (defaultValue, extendWith) {\r\n      var value = makeMap$2(defaultValue, ' ', makeMap$2(defaultValue.toUpperCase(), ' '));\r\n      return extend$5(value, extendWith);\r\n    };\r\n    var getTextRootBlockElements = function (schema) {\r\n      return createMap('td th li dt dd figcaption caption details summary', schema.getTextBlockElements());\r\n    };\r\n    var compileSchema = function (type) {\r\n      var schema = {};\r\n      var globalAttributes, blockContent;\r\n      var phrasingContent, flowContent, html4BlockContent, html4PhrasingContent;\r\n      var add = function (name, attributes, children) {\r\n        var ni, attributesOrder, element;\r\n        var arrayToMap = function (array, obj) {\r\n          var map = {};\r\n          var i, l;\r\n          for (i = 0, l = array.length; i < l; i++) {\r\n            map[array[i]] = obj || {};\r\n          }\r\n          return map;\r\n        };\r\n        children = children || [];\r\n        attributes = attributes || '';\r\n        if (typeof children === 'string') {\r\n          children = split$1(children);\r\n        }\r\n        var names = split$1(name);\r\n        ni = names.length;\r\n        while (ni--) {\r\n          attributesOrder = split$1([\r\n            globalAttributes,\r\n            attributes\r\n          ].join(' '));\r\n          element = {\r\n            attributes: arrayToMap(attributesOrder),\r\n            attributesOrder: attributesOrder,\r\n            children: arrayToMap(children, dummyObj)\r\n          };\r\n          schema[names[ni]] = element;\r\n        }\r\n      };\r\n      var addAttrs = function (name, attributes) {\r\n        var ni, schemaItem, i, l;\r\n        var names = split$1(name);\r\n        ni = names.length;\r\n        var attrs = split$1(attributes);\r\n        while (ni--) {\r\n          schemaItem = schema[names[ni]];\r\n          for (i = 0, l = attrs.length; i < l; i++) {\r\n            schemaItem.attributes[attrs[i]] = {};\r\n            schemaItem.attributesOrder.push(attrs[i]);\r\n          }\r\n        }\r\n      };\r\n      if (mapCache[type]) {\r\n        return mapCache[type];\r\n      }\r\n      globalAttributes = 'id accesskey class dir lang style tabindex title role';\r\n      blockContent = 'address blockquote div dl fieldset form h1 h2 h3 h4 h5 h6 hr menu ol p pre table ul';\r\n      phrasingContent = 'a abbr b bdo br button cite code del dfn em embed i iframe img input ins kbd ' + 'label map noscript object q s samp script select small span strong sub sup ' + 'textarea u var #text #comment';\r\n      if (type !== 'html4') {\r\n        globalAttributes += ' contenteditable contextmenu draggable dropzone ' + 'hidden spellcheck translate';\r\n        blockContent += ' article aside details dialog figure main header footer hgroup section nav';\r\n        phrasingContent += ' audio canvas command datalist mark meter output picture ' + 'progress time wbr video ruby bdi keygen';\r\n      }\r\n      if (type !== 'html5-strict') {\r\n        globalAttributes += ' xml:lang';\r\n        html4PhrasingContent = 'acronym applet basefont big font strike tt';\r\n        phrasingContent = [\r\n          phrasingContent,\r\n          html4PhrasingContent\r\n        ].join(' ');\r\n        each$h(split$1(html4PhrasingContent), function (name) {\r\n          add(name, '', phrasingContent);\r\n        });\r\n        html4BlockContent = 'center dir isindex noframes';\r\n        blockContent = [\r\n          blockContent,\r\n          html4BlockContent\r\n        ].join(' ');\r\n        flowContent = [\r\n          blockContent,\r\n          phrasingContent\r\n        ].join(' ');\r\n        each$h(split$1(html4BlockContent), function (name) {\r\n          add(name, '', flowContent);\r\n        });\r\n      }\r\n      flowContent = flowContent || [\r\n        blockContent,\r\n        phrasingContent\r\n      ].join(' ');\r\n      add('html', 'manifest', 'head body');\r\n      add('head', '', 'base command link meta noscript script style title');\r\n      add('title hr noscript br');\r\n      add('base', 'href target');\r\n      add('link', 'href rel media hreflang type sizes hreflang');\r\n      add('meta', 'name http-equiv content charset');\r\n      add('style', 'media type scoped');\r\n      add('script', 'src async defer type charset');\r\n      add('body', 'onafterprint onbeforeprint onbeforeunload onblur onerror onfocus ' + 'onhashchange onload onmessage onoffline ononline onpagehide onpageshow ' + 'onpopstate onresize onscroll onstorage onunload', flowContent);\r\n      add('address dt dd div caption', '', flowContent);\r\n      add('h1 h2 h3 h4 h5 h6 pre p abbr code var samp kbd sub sup i b u bdo span legend em strong small s cite dfn', '', phrasingContent);\r\n      add('blockquote', 'cite', flowContent);\r\n      add('ol', 'reversed start type', 'li');\r\n      add('ul', '', 'li');\r\n      add('li', 'value', flowContent);\r\n      add('dl', '', 'dt dd');\r\n      add('a', 'href target rel media hreflang type', phrasingContent);\r\n      add('q', 'cite', phrasingContent);\r\n      add('ins del', 'cite datetime', flowContent);\r\n      add('img', 'src sizes srcset alt usemap ismap width height');\r\n      add('iframe', 'src name width height', flowContent);\r\n      add('embed', 'src type width height');\r\n      add('object', 'data type typemustmatch name usemap form width height', [\r\n        flowContent,\r\n        'param'\r\n      ].join(' '));\r\n      add('param', 'name value');\r\n      add('map', 'name', [\r\n        flowContent,\r\n        'area'\r\n      ].join(' '));\r\n      add('area', 'alt coords shape href target rel media hreflang type');\r\n      add('table', 'border', 'caption colgroup thead tfoot tbody tr' + (type === 'html4' ? ' col' : ''));\r\n      add('colgroup', 'span', 'col');\r\n      add('col', 'span');\r\n      add('tbody thead tfoot', '', 'tr');\r\n      add('tr', '', 'td th');\r\n      add('td', 'colspan rowspan headers', flowContent);\r\n      add('th', 'colspan rowspan headers scope abbr', flowContent);\r\n      add('form', 'accept-charset action autocomplete enctype method name novalidate target', flowContent);\r\n      add('fieldset', 'disabled form name', [\r\n        flowContent,\r\n        'legend'\r\n      ].join(' '));\r\n      add('label', 'form for', phrasingContent);\r\n      add('input', 'accept alt autocomplete checked dirname disabled form formaction formenctype formmethod formnovalidate ' + 'formtarget height list max maxlength min multiple name pattern readonly required size src step type value width');\r\n      add('button', 'disabled form formaction formenctype formmethod formnovalidate formtarget name type value', type === 'html4' ? flowContent : phrasingContent);\r\n      add('select', 'disabled form multiple name required size', 'option optgroup');\r\n      add('optgroup', 'disabled label', 'option');\r\n      add('option', 'disabled label selected value');\r\n      add('textarea', 'cols dirname disabled form maxlength name readonly required rows wrap');\r\n      add('menu', 'type label', [\r\n        flowContent,\r\n        'li'\r\n      ].join(' '));\r\n      add('noscript', '', flowContent);\r\n      if (type !== 'html4') {\r\n        add('wbr');\r\n        add('ruby', '', [\r\n          phrasingContent,\r\n          'rt rp'\r\n        ].join(' '));\r\n        add('figcaption', '', flowContent);\r\n        add('mark rt rp summary bdi', '', phrasingContent);\r\n        add('canvas', 'width height', flowContent);\r\n        add('video', 'src crossorigin poster preload autoplay mediagroup loop ' + 'muted controls width height buffered', [\r\n          flowContent,\r\n          'track source'\r\n        ].join(' '));\r\n        add('audio', 'src crossorigin preload autoplay mediagroup loop muted controls ' + 'buffered volume', [\r\n          flowContent,\r\n          'track source'\r\n        ].join(' '));\r\n        add('picture', '', 'img source');\r\n        add('source', 'src srcset type media sizes');\r\n        add('track', 'kind src srclang label default');\r\n        add('datalist', '', [\r\n          phrasingContent,\r\n          'option'\r\n        ].join(' '));\r\n        add('article section nav aside main header footer', '', flowContent);\r\n        add('hgroup', '', 'h1 h2 h3 h4 h5 h6');\r\n        add('figure', '', [\r\n          flowContent,\r\n          'figcaption'\r\n        ].join(' '));\r\n        add('time', 'datetime', phrasingContent);\r\n        add('dialog', 'open', flowContent);\r\n        add('command', 'type label icon disabled checked radiogroup command');\r\n        add('output', 'for form name', phrasingContent);\r\n        add('progress', 'value max', phrasingContent);\r\n        add('meter', 'value min max low high optimum', phrasingContent);\r\n        add('details', 'open', [\r\n          flowContent,\r\n          'summary'\r\n        ].join(' '));\r\n        add('keygen', 'autofocus challenge disabled form keytype name');\r\n      }\r\n      if (type !== 'html5-strict') {\r\n        addAttrs('script', 'language xml:space');\r\n        addAttrs('style', 'xml:space');\r\n        addAttrs('object', 'declare classid code codebase codetype archive standby align border hspace vspace');\r\n        addAttrs('embed', 'align name hspace vspace');\r\n        addAttrs('param', 'valuetype type');\r\n        addAttrs('a', 'charset name rev shape coords');\r\n        addAttrs('br', 'clear');\r\n        addAttrs('applet', 'codebase archive code object alt name width height align hspace vspace');\r\n        addAttrs('img', 'name longdesc align border hspace vspace');\r\n        addAttrs('iframe', 'longdesc frameborder marginwidth marginheight scrolling align');\r\n        addAttrs('font basefont', 'size color face');\r\n        addAttrs('input', 'usemap align');\r\n        addAttrs('select');\r\n        addAttrs('textarea');\r\n        addAttrs('h1 h2 h3 h4 h5 h6 div p legend caption', 'align');\r\n        addAttrs('ul', 'type compact');\r\n        addAttrs('li', 'type');\r\n        addAttrs('ol dl menu dir', 'compact');\r\n        addAttrs('pre', 'width xml:space');\r\n        addAttrs('hr', 'align noshade size width');\r\n        addAttrs('isindex', 'prompt');\r\n        addAttrs('table', 'summary width frame rules cellspacing cellpadding align bgcolor');\r\n        addAttrs('col', 'width align char charoff valign');\r\n        addAttrs('colgroup', 'width align char charoff valign');\r\n        addAttrs('thead', 'align char charoff valign');\r\n        addAttrs('tr', 'align char charoff valign bgcolor');\r\n        addAttrs('th', 'axis align char charoff valign nowrap bgcolor width height');\r\n        addAttrs('form', 'accept');\r\n        addAttrs('td', 'abbr axis scope align char charoff valign nowrap bgcolor width height');\r\n        addAttrs('tfoot', 'align char charoff valign');\r\n        addAttrs('tbody', 'align char charoff valign');\r\n        addAttrs('area', 'nohref');\r\n        addAttrs('body', 'background bgcolor text link vlink alink');\r\n      }\r\n      if (type !== 'html4') {\r\n        addAttrs('input button select textarea', 'autofocus');\r\n        addAttrs('input textarea', 'placeholder');\r\n        addAttrs('a', 'download');\r\n        addAttrs('link script img', 'crossorigin');\r\n        addAttrs('img', 'loading');\r\n        addAttrs('iframe', 'sandbox seamless allowfullscreen loading');\r\n      }\r\n      each$h(split$1('a form meter progress dfn'), function (name) {\r\n        if (schema[name]) {\r\n          delete schema[name].children[name];\r\n        }\r\n      });\r\n      delete schema.caption.children.table;\r\n      delete schema.script;\r\n      mapCache[type] = schema;\r\n      return schema;\r\n    };\r\n    var compileElementMap = function (value, mode) {\r\n      var styles;\r\n      if (value) {\r\n        styles = {};\r\n        if (typeof value === 'string') {\r\n          value = { '*': value };\r\n        }\r\n        each$h(value, function (value, key) {\r\n          styles[key] = styles[key.toUpperCase()] = mode === 'map' ? makeMap$2(value, /[, ]/) : explode$3(value, /[, ]/);\r\n        });\r\n      }\r\n      return styles;\r\n    };\r\n    var Schema = function (settings) {\r\n      var elements = {};\r\n      var children = {};\r\n      var patternElements = [];\r\n      var customElementsMap = {}, specialElements = {};\r\n      var createLookupTable = function (option, defaultValue, extendWith) {\r\n        var value = settings[option];\r\n        if (!value) {\r\n          value = mapCache[option];\r\n          if (!value) {\r\n            value = createMap(defaultValue, extendWith);\r\n            mapCache[option] = value;\r\n          }\r\n        } else {\r\n          value = makeMap$2(value, /[, ]/, makeMap$2(value.toUpperCase(), /[, ]/));\r\n        }\r\n        return value;\r\n      };\r\n      settings = settings || {};\r\n      var schemaItems = compileSchema(settings.schema);\r\n      if (settings.verify_html === false) {\r\n        settings.valid_elements = '*[*]';\r\n      }\r\n      var validStyles = compileElementMap(settings.valid_styles);\r\n      var invalidStyles = compileElementMap(settings.invalid_styles, 'map');\r\n      var validClasses = compileElementMap(settings.valid_classes, 'map');\r\n      var whiteSpaceElementsMap = createLookupTable('whitespace_elements', 'pre script noscript style textarea video audio iframe object code');\r\n      var selfClosingElementsMap = createLookupTable('self_closing_elements', 'colgroup dd dt li option p td tfoot th thead tr');\r\n      var shortEndedElementsMap = createLookupTable('short_ended_elements', 'area base basefont br col frame hr img input isindex link ' + 'meta param embed source wbr track');\r\n      var boolAttrMap = createLookupTable('boolean_attributes', 'checked compact declare defer disabled ismap multiple nohref noresize ' + 'noshade nowrap readonly selected autoplay loop controls');\r\n      var nonEmptyOrMoveCaretBeforeOnEnter = 'td th iframe video audio object script code';\r\n      var nonEmptyElementsMap = createLookupTable('non_empty_elements', nonEmptyOrMoveCaretBeforeOnEnter + ' pre', shortEndedElementsMap);\r\n      var moveCaretBeforeOnEnterElementsMap = createLookupTable('move_caret_before_on_enter_elements', nonEmptyOrMoveCaretBeforeOnEnter + ' table', shortEndedElementsMap);\r\n      var textBlockElementsMap = createLookupTable('text_block_elements', 'h1 h2 h3 h4 h5 h6 p div address pre form ' + 'blockquote center dir fieldset header footer article section hgroup aside main nav figure');\r\n      var blockElementsMap = createLookupTable('block_elements', 'hr table tbody thead tfoot ' + 'th tr td li ol ul caption dl dt dd noscript menu isindex option ' + 'datalist select optgroup figcaption details summary', textBlockElementsMap);\r\n      var textInlineElementsMap = createLookupTable('text_inline_elements', 'span strong b em i font s strike u var cite ' + 'dfn code mark q sup sub samp');\r\n      each$h((settings.special || 'script noscript iframe noframes noembed title style textarea xmp').split(' '), function (name) {\r\n        specialElements[name] = new RegExp('</' + name + '[^>]*>', 'gi');\r\n      });\r\n      var patternToRegExp = function (str) {\r\n        return new RegExp('^' + str.replace(/([?+*])/g, '.$1') + '$');\r\n      };\r\n      var addValidElements = function (validElements) {\r\n        var ei, el, ai, al, matches, element, attr, attrData, elementName, attrName, attrType, attributes, attributesOrder, prefix, outputName, globalAttributes, globalAttributesOrder, value;\r\n        var elementRuleRegExp = /^([#+\\-])?([^\\[!\\/]+)(?:\\/([^\\[!]+))?(?:(!?)\\[([^\\]]+)])?$/, attrRuleRegExp = /^([!\\-])?(\\w+[\\\\:]:\\w+|[^=:<]+)?(?:([=:<])(.*))?$/, hasPatternsRegExp = /[*?+]/;\r\n        if (validElements) {\r\n          var validElementsArr = split$1(validElements, ',');\r\n          if (elements['@']) {\r\n            globalAttributes = elements['@'].attributes;\r\n            globalAttributesOrder = elements['@'].attributesOrder;\r\n          }\r\n          for (ei = 0, el = validElementsArr.length; ei < el; ei++) {\r\n            matches = elementRuleRegExp.exec(validElementsArr[ei]);\r\n            if (matches) {\r\n              prefix = matches[1];\r\n              elementName = matches[2];\r\n              outputName = matches[3];\r\n              attrData = matches[5];\r\n              attributes = {};\r\n              attributesOrder = [];\r\n              element = {\r\n                attributes: attributes,\r\n                attributesOrder: attributesOrder\r\n              };\r\n              if (prefix === '#') {\r\n                element.paddEmpty = true;\r\n              }\r\n              if (prefix === '-') {\r\n                element.removeEmpty = true;\r\n              }\r\n              if (matches[4] === '!') {\r\n                element.removeEmptyAttrs = true;\r\n              }\r\n              if (globalAttributes) {\r\n                each$j(globalAttributes, function (value, key) {\r\n                  attributes[key] = value;\r\n                });\r\n                attributesOrder.push.apply(attributesOrder, globalAttributesOrder);\r\n              }\r\n              if (attrData) {\r\n                attrData = split$1(attrData, '|');\r\n                for (ai = 0, al = attrData.length; ai < al; ai++) {\r\n                  matches = attrRuleRegExp.exec(attrData[ai]);\r\n                  if (matches) {\r\n                    attr = {};\r\n                    attrType = matches[1];\r\n                    attrName = matches[2].replace(/[\\\\:]:/g, ':');\r\n                    prefix = matches[3];\r\n                    value = matches[4];\r\n                    if (attrType === '!') {\r\n                      element.attributesRequired = element.attributesRequired || [];\r\n                      element.attributesRequired.push(attrName);\r\n                      attr.required = true;\r\n                    }\r\n                    if (attrType === '-') {\r\n                      delete attributes[attrName];\r\n                      attributesOrder.splice(inArray$2(attributesOrder, attrName), 1);\r\n                      continue;\r\n                    }\r\n                    if (prefix) {\r\n                      if (prefix === '=') {\r\n                        element.attributesDefault = element.attributesDefault || [];\r\n                        element.attributesDefault.push({\r\n                          name: attrName,\r\n                          value: value\r\n                        });\r\n                        attr.defaultValue = value;\r\n                      }\r\n                      if (prefix === ':') {\r\n                        element.attributesForced = element.attributesForced || [];\r\n                        element.attributesForced.push({\r\n                          name: attrName,\r\n                          value: value\r\n                        });\r\n                        attr.forcedValue = value;\r\n                      }\r\n                      if (prefix === '<') {\r\n                        attr.validValues = makeMap$2(value, '?');\r\n                      }\r\n                    }\r\n                    if (hasPatternsRegExp.test(attrName)) {\r\n                      element.attributePatterns = element.attributePatterns || [];\r\n                      attr.pattern = patternToRegExp(attrName);\r\n                      element.attributePatterns.push(attr);\r\n                    } else {\r\n                      if (!attributes[attrName]) {\r\n                        attributesOrder.push(attrName);\r\n                      }\r\n                      attributes[attrName] = attr;\r\n                    }\r\n                  }\r\n                }\r\n              }\r\n              if (!globalAttributes && elementName === '@') {\r\n                globalAttributes = attributes;\r\n                globalAttributesOrder = attributesOrder;\r\n              }\r\n              if (outputName) {\r\n                element.outputName = elementName;\r\n                elements[outputName] = element;\r\n              }\r\n              if (hasPatternsRegExp.test(elementName)) {\r\n                element.pattern = patternToRegExp(elementName);\r\n                patternElements.push(element);\r\n              } else {\r\n                elements[elementName] = element;\r\n              }\r\n            }\r\n          }\r\n        }\r\n      };\r\n      var setValidElements = function (validElements) {\r\n        elements = {};\r\n        patternElements = [];\r\n        addValidElements(validElements);\r\n        each$h(schemaItems, function (element, name) {\r\n          children[name] = element.children;\r\n        });\r\n      };\r\n      var addCustomElements = function (customElements) {\r\n        var customElementRegExp = /^(~)?(.+)$/;\r\n        if (customElements) {\r\n          mapCache.text_block_elements = mapCache.block_elements = null;\r\n          each$h(split$1(customElements, ','), function (rule) {\r\n            var matches = customElementRegExp.exec(rule), inline = matches[1] === '~', cloneName = inline ? 'span' : 'div', name = matches[2];\r\n            children[name] = children[cloneName];\r\n            customElementsMap[name] = cloneName;\r\n            if (!inline) {\r\n              blockElementsMap[name.toUpperCase()] = {};\r\n              blockElementsMap[name] = {};\r\n            }\r\n            if (!elements[name]) {\r\n              var customRule = elements[cloneName];\r\n              customRule = extend$5({}, customRule);\r\n              delete customRule.removeEmptyAttrs;\r\n              delete customRule.removeEmpty;\r\n              elements[name] = customRule;\r\n            }\r\n            each$h(children, function (element, elmName) {\r\n              if (element[cloneName]) {\r\n                children[elmName] = element = extend$5({}, children[elmName]);\r\n                element[name] = element[cloneName];\r\n              }\r\n            });\r\n          });\r\n        }\r\n      };\r\n      var addValidChildren = function (validChildren) {\r\n        var childRuleRegExp = /^([+\\-]?)([A-Za-z0-9_\\-.\\u00b7\\u00c0-\\u00d6\\u00d8-\\u00f6\\u00f8-\\u037d\\u037f-\\u1fff\\u200c-\\u200d\\u203f-\\u2040\\u2070-\\u218f\\u2c00-\\u2fef\\u3001-\\ud7ff\\uf900-\\ufdcf\\ufdf0-\\ufffd]+)\\[([^\\]]+)]$/;\r\n        mapCache[settings.schema] = null;\r\n        if (validChildren) {\r\n          each$h(split$1(validChildren, ','), function (rule) {\r\n            var matches = childRuleRegExp.exec(rule);\r\n            var parent, prefix;\r\n            if (matches) {\r\n              prefix = matches[1];\r\n              if (prefix) {\r\n                parent = children[matches[2]];\r\n              } else {\r\n                parent = children[matches[2]] = { '#comment': {} };\r\n              }\r\n              parent = children[matches[2]];\r\n              each$h(split$1(matches[3], '|'), function (child) {\r\n                if (prefix === '-') {\r\n                  delete parent[child];\r\n                } else {\r\n                  parent[child] = {};\r\n                }\r\n              });\r\n            }\r\n          });\r\n        }\r\n      };\r\n      var getElementRule = function (name) {\r\n        var element = elements[name], i;\r\n        if (element) {\r\n          return element;\r\n        }\r\n        i = patternElements.length;\r\n        while (i--) {\r\n          element = patternElements[i];\r\n          if (element.pattern.test(name)) {\r\n            return element;\r\n          }\r\n        }\r\n      };\r\n      if (!settings.valid_elements) {\r\n        each$h(schemaItems, function (element, name) {\r\n          elements[name] = {\r\n            attributes: element.attributes,\r\n            attributesOrder: element.attributesOrder\r\n          };\r\n          children[name] = element.children;\r\n        });\r\n        if (settings.schema !== 'html5') {\r\n          each$h(split$1('strong/b em/i'), function (item) {\r\n            var items = split$1(item, '/');\r\n            elements[items[1]].outputName = items[0];\r\n          });\r\n        }\r\n        each$h(textInlineElementsMap, function (_val, name) {\r\n          if (elements[name]) {\r\n            if (settings.padd_empty_block_inline_children) {\r\n              elements[name].paddInEmptyBlock = true;\r\n            }\r\n            elements[name].removeEmpty = true;\r\n          }\r\n        });\r\n        each$h(split$1('ol ul blockquote a table tbody'), function (name) {\r\n          if (elements[name]) {\r\n            elements[name].removeEmpty = true;\r\n          }\r\n        });\r\n        each$h(split$1('p h1 h2 h3 h4 h5 h6 th td pre div address caption li'), function (name) {\r\n          elements[name].paddEmpty = true;\r\n        });\r\n        each$h(split$1('span'), function (name) {\r\n          elements[name].removeEmptyAttrs = true;\r\n        });\r\n      } else {\r\n        setValidElements(settings.valid_elements);\r\n      }\r\n      addCustomElements(settings.custom_elements);\r\n      addValidChildren(settings.valid_children);\r\n      addValidElements(settings.extended_valid_elements);\r\n      addValidChildren('+ol[ul|ol],+ul[ul|ol]');\r\n      each$h({\r\n        dd: 'dl',\r\n        dt: 'dl',\r\n        li: 'ul ol',\r\n        td: 'tr',\r\n        th: 'tr',\r\n        tr: 'tbody thead tfoot',\r\n        tbody: 'table',\r\n        thead: 'table',\r\n        tfoot: 'table',\r\n        legend: 'fieldset',\r\n        area: 'map',\r\n        param: 'video audio object'\r\n      }, function (parents, item) {\r\n        if (elements[item]) {\r\n          elements[item].parentsRequired = split$1(parents);\r\n        }\r\n      });\r\n      if (settings.invalid_elements) {\r\n        each$h(explode$3(settings.invalid_elements), function (item) {\r\n          if (elements[item]) {\r\n            delete elements[item];\r\n          }\r\n        });\r\n      }\r\n      if (!getElementRule('span')) {\r\n        addValidElements('span[!data-mce-type|*]');\r\n      }\r\n      var getValidStyles = constant(validStyles);\r\n      var getInvalidStyles = constant(invalidStyles);\r\n      var getValidClasses = constant(validClasses);\r\n      var getBoolAttrs = constant(boolAttrMap);\r\n      var getBlockElements = constant(blockElementsMap);\r\n      var getTextBlockElements = constant(textBlockElementsMap);\r\n      var getTextInlineElements = constant(textInlineElementsMap);\r\n      var getShortEndedElements = constant(shortEndedElementsMap);\r\n      var getSelfClosingElements = constant(selfClosingElementsMap);\r\n      var getNonEmptyElements = constant(nonEmptyElementsMap);\r\n      var getMoveCaretBeforeOnEnterElements = constant(moveCaretBeforeOnEnterElementsMap);\r\n      var getWhiteSpaceElements = constant(whiteSpaceElementsMap);\r\n      var getSpecialElements = constant(specialElements);\r\n      var isValidChild = function (name, child) {\r\n        var parent = children[name.toLowerCase()];\r\n        return !!(parent && parent[child.toLowerCase()]);\r\n      };\r\n      var isValid = function (name, attr) {\r\n        var attrPatterns, i;\r\n        var rule = getElementRule(name);\r\n        if (rule) {\r\n          if (attr) {\r\n            if (rule.attributes[attr]) {\r\n              return true;\r\n            }\r\n            attrPatterns = rule.attributePatterns;\r\n            if (attrPatterns) {\r\n              i = attrPatterns.length;\r\n              while (i--) {\r\n                if (attrPatterns[i].pattern.test(name)) {\r\n                  return true;\r\n                }\r\n              }\r\n            }\r\n          } else {\r\n            return true;\r\n          }\r\n        }\r\n        return false;\r\n      };\r\n      var getCustomElements = constant(customElementsMap);\r\n      return {\r\n        children: children,\r\n        elements: elements,\r\n        getValidStyles: getValidStyles,\r\n        getValidClasses: getValidClasses,\r\n        getBlockElements: getBlockElements,\r\n        getInvalidStyles: getInvalidStyles,\r\n        getShortEndedElements: getShortEndedElements,\r\n        getTextBlockElements: getTextBlockElements,\r\n        getTextInlineElements: getTextInlineElements,\r\n        getBoolAttrs: getBoolAttrs,\r\n        getElementRule: getElementRule,\r\n        getSelfClosingElements: getSelfClosingElements,\r\n        getNonEmptyElements: getNonEmptyElements,\r\n        getMoveCaretBeforeOnEnterElements: getMoveCaretBeforeOnEnterElements,\r\n        getWhiteSpaceElements: getWhiteSpaceElements,\r\n        getSpecialElements: getSpecialElements,\r\n        isValidChild: isValidChild,\r\n        isValid: isValid,\r\n        getCustomElements: getCustomElements,\r\n        addValidElements: addValidElements,\r\n        setValidElements: setValidElements,\r\n        addCustomElements: addCustomElements,\r\n        addValidChildren: addValidChildren\r\n      };\r\n    };\r\n\r\n    var toHex = function (match, r, g, b) {\r\n      var hex = function (val) {\r\n        val = parseInt(val, 10).toString(16);\r\n        return val.length > 1 ? val : '0' + val;\r\n      };\r\n      return '#' + hex(r) + hex(g) + hex(b);\r\n    };\r\n    var Styles = function (settings, schema) {\r\n      var _this = this;\r\n      var rgbRegExp = /rgb\\s*\\(\\s*([0-9]+)\\s*,\\s*([0-9]+)\\s*,\\s*([0-9]+)\\s*\\)/gi;\r\n      var urlOrStrRegExp = /(?:url(?:(?:\\(\\s*\\\"([^\\\"]+)\\\"\\s*\\))|(?:\\(\\s*\\'([^\\']+)\\'\\s*\\))|(?:\\(\\s*([^)\\s]+)\\s*\\))))|(?:\\'([^\\']+)\\')|(?:\\\"([^\\\"]+)\\\")/gi;\r\n      var styleRegExp = /\\s*([^:]+):\\s*([^;]+);?/g;\r\n      var trimRightRegExp = /\\s+$/;\r\n      var i;\r\n      var encodingLookup = {};\r\n      var validStyles;\r\n      var invalidStyles;\r\n      var invisibleChar = zeroWidth;\r\n      settings = settings || {};\r\n      if (schema) {\r\n        validStyles = schema.getValidStyles();\r\n        invalidStyles = schema.getInvalidStyles();\r\n      }\r\n      var encodingItems = ('\\\\\" \\\\\\' \\\\; \\\\: ; : ' + invisibleChar).split(' ');\r\n      for (i = 0; i < encodingItems.length; i++) {\r\n        encodingLookup[encodingItems[i]] = invisibleChar + i;\r\n        encodingLookup[invisibleChar + i] = encodingItems[i];\r\n      }\r\n      return {\r\n        toHex: function (color) {\r\n          return color.replace(rgbRegExp, toHex);\r\n        },\r\n        parse: function (css) {\r\n          var styles = {};\r\n          var matches, name, value, isEncoded;\r\n          var urlConverter = settings.url_converter;\r\n          var urlConverterScope = settings.url_converter_scope || _this;\r\n          var compress = function (prefix, suffix, noJoin) {\r\n            var top = styles[prefix + '-top' + suffix];\r\n            if (!top) {\r\n              return;\r\n            }\r\n            var right = styles[prefix + '-right' + suffix];\r\n            if (!right) {\r\n              return;\r\n            }\r\n            var bottom = styles[prefix + '-bottom' + suffix];\r\n            if (!bottom) {\r\n              return;\r\n            }\r\n            var left = styles[prefix + '-left' + suffix];\r\n            if (!left) {\r\n              return;\r\n            }\r\n            var box = [\r\n              top,\r\n              right,\r\n              bottom,\r\n              left\r\n            ];\r\n            i = box.length - 1;\r\n            while (i--) {\r\n              if (box[i] !== box[i + 1]) {\r\n                break;\r\n              }\r\n            }\r\n            if (i > -1 && noJoin) {\r\n              return;\r\n            }\r\n            styles[prefix + suffix] = i === -1 ? box[0] : box.join(' ');\r\n            delete styles[prefix + '-top' + suffix];\r\n            delete styles[prefix + '-right' + suffix];\r\n            delete styles[prefix + '-bottom' + suffix];\r\n            delete styles[prefix + '-left' + suffix];\r\n          };\r\n          var canCompress = function (key) {\r\n            var value = styles[key], i;\r\n            if (!value) {\r\n              return;\r\n            }\r\n            value = value.split(' ');\r\n            i = value.length;\r\n            while (i--) {\r\n              if (value[i] !== value[0]) {\r\n                return false;\r\n              }\r\n            }\r\n            styles[key] = value[0];\r\n            return true;\r\n          };\r\n          var compress2 = function (target, a, b, c) {\r\n            if (!canCompress(a)) {\r\n              return;\r\n            }\r\n            if (!canCompress(b)) {\r\n              return;\r\n            }\r\n            if (!canCompress(c)) {\r\n              return;\r\n            }\r\n            styles[target] = styles[a] + ' ' + styles[b] + ' ' + styles[c];\r\n            delete styles[a];\r\n            delete styles[b];\r\n            delete styles[c];\r\n          };\r\n          var encode = function (str) {\r\n            isEncoded = true;\r\n            return encodingLookup[str];\r\n          };\r\n          var decode = function (str, keepSlashes) {\r\n            if (isEncoded) {\r\n              str = str.replace(/\\uFEFF[0-9]/g, function (str) {\r\n                return encodingLookup[str];\r\n              });\r\n            }\r\n            if (!keepSlashes) {\r\n              str = str.replace(/\\\\([\\'\\\";:])/g, '$1');\r\n            }\r\n            return str;\r\n          };\r\n          var decodeSingleHexSequence = function (escSeq) {\r\n            return String.fromCharCode(parseInt(escSeq.slice(1), 16));\r\n          };\r\n          var decodeHexSequences = function (value) {\r\n            return value.replace(/\\\\[0-9a-f]+/gi, decodeSingleHexSequence);\r\n          };\r\n          var processUrl = function (match, url, url2, url3, str, str2) {\r\n            str = str || str2;\r\n            if (str) {\r\n              str = decode(str);\r\n              return '\\'' + str.replace(/\\'/g, '\\\\\\'') + '\\'';\r\n            }\r\n            url = decode(url || url2 || url3);\r\n            if (!settings.allow_script_urls) {\r\n              var scriptUrl = url.replace(/[\\s\\r\\n]+/g, '');\r\n              if (/(java|vb)script:/i.test(scriptUrl)) {\r\n                return '';\r\n              }\r\n              if (!settings.allow_svg_data_urls && /^data:image\\/svg/i.test(scriptUrl)) {\r\n                return '';\r\n              }\r\n            }\r\n            if (urlConverter) {\r\n              url = urlConverter.call(urlConverterScope, url, 'style');\r\n            }\r\n            return 'url(\\'' + url.replace(/\\'/g, '\\\\\\'') + '\\')';\r\n          };\r\n          if (css) {\r\n            css = css.replace(/[\\u0000-\\u001F]/g, '');\r\n            css = css.replace(/\\\\[\\\"\\';:\\uFEFF]/g, encode).replace(/\\\"[^\\\"]+\\\"|\\'[^\\']+\\'/g, function (str) {\r\n              return str.replace(/[;:]/g, encode);\r\n            });\r\n            while (matches = styleRegExp.exec(css)) {\r\n              styleRegExp.lastIndex = matches.index + matches[0].length;\r\n              name = matches[1].replace(trimRightRegExp, '').toLowerCase();\r\n              value = matches[2].replace(trimRightRegExp, '');\r\n              if (name && value) {\r\n                name = decodeHexSequences(name);\r\n                value = decodeHexSequences(value);\r\n                if (name.indexOf(invisibleChar) !== -1 || name.indexOf('\"') !== -1) {\r\n                  continue;\r\n                }\r\n                if (!settings.allow_script_urls && (name === 'behavior' || /expression\\s*\\(|\\/\\*|\\*\\//.test(value))) {\r\n                  continue;\r\n                }\r\n                if (name === 'font-weight' && value === '700') {\r\n                  value = 'bold';\r\n                } else if (name === 'color' || name === 'background-color') {\r\n                  value = value.toLowerCase();\r\n                }\r\n                value = value.replace(rgbRegExp, toHex);\r\n                value = value.replace(urlOrStrRegExp, processUrl);\r\n                styles[name] = isEncoded ? decode(value, true) : value;\r\n              }\r\n            }\r\n            compress('border', '', true);\r\n            compress('border', '-width');\r\n            compress('border', '-color');\r\n            compress('border', '-style');\r\n            compress('padding', '');\r\n            compress('margin', '');\r\n            compress2('border', 'border-width', 'border-style', 'border-color');\r\n            if (styles.border === 'medium none') {\r\n              delete styles.border;\r\n            }\r\n            if (styles['border-image'] === 'none') {\r\n              delete styles['border-image'];\r\n            }\r\n          }\r\n          return styles;\r\n        },\r\n        serialize: function (styles, elementName) {\r\n          var css = '';\r\n          var serializeStyles = function (name) {\r\n            var value;\r\n            var styleList = validStyles[name];\r\n            if (styleList) {\r\n              for (var i_1 = 0, l = styleList.length; i_1 < l; i_1++) {\r\n                name = styleList[i_1];\r\n                value = styles[name];\r\n                if (value) {\r\n                  css += (css.length > 0 ? ' ' : '') + name + ': ' + value + ';';\r\n                }\r\n              }\r\n            }\r\n          };\r\n          var isValid = function (name, elementName) {\r\n            var styleMap = invalidStyles['*'];\r\n            if (styleMap && styleMap[name]) {\r\n              return false;\r\n            }\r\n            styleMap = invalidStyles[elementName];\r\n            return !(styleMap && styleMap[name]);\r\n          };\r\n          if (elementName && validStyles) {\r\n            serializeStyles('*');\r\n            serializeStyles(elementName);\r\n          } else {\r\n            each$j(styles, function (value, name) {\r\n              if (value && (!invalidStyles || isValid(name, elementName))) {\r\n                css += (css.length > 0 ? ' ' : '') + name + ': ' + value + ';';\r\n              }\r\n            });\r\n          }\r\n          return css;\r\n        }\r\n      };\r\n    };\r\n\r\n    var deprecated = {\r\n      keyLocation: true,\r\n      layerX: true,\r\n      layerY: true,\r\n      returnValue: true,\r\n      webkitMovementX: true,\r\n      webkitMovementY: true,\r\n      keyIdentifier: true,\r\n      mozPressure: true\r\n    };\r\n    var isNativeEvent = function (event) {\r\n      return event instanceof Event || isFunction(event.initEvent);\r\n    };\r\n    var hasIsDefaultPrevented = function (event) {\r\n      return event.isDefaultPrevented === always || event.isDefaultPrevented === never;\r\n    };\r\n    var needsNormalizing = function (event) {\r\n      return isNullable(event.preventDefault) || isNativeEvent(event);\r\n    };\r\n    var clone$2 = function (originalEvent, data) {\r\n      var event = data !== null && data !== void 0 ? data : {};\r\n      for (var name_1 in originalEvent) {\r\n        if (!has$2(deprecated, name_1)) {\r\n          event[name_1] = originalEvent[name_1];\r\n        }\r\n      }\r\n      if (isNonNullable(event.composedPath)) {\r\n        event.composedPath = function () {\r\n          return originalEvent.composedPath();\r\n        };\r\n      }\r\n      return event;\r\n    };\r\n    var normalize$3 = function (type, originalEvent, fallbackTarget, data) {\r\n      var _a;\r\n      var event = clone$2(originalEvent, data);\r\n      event.type = type;\r\n      if (isNullable(event.target)) {\r\n        event.target = (_a = event.srcElement) !== null && _a !== void 0 ? _a : fallbackTarget;\r\n      }\r\n      if (needsNormalizing(originalEvent)) {\r\n        event.preventDefault = function () {\r\n          event.defaultPrevented = true;\r\n          event.isDefaultPrevented = always;\r\n          if (isFunction(originalEvent.preventDefault)) {\r\n            originalEvent.preventDefault();\r\n          } else if (isNativeEvent(originalEvent)) {\r\n            originalEvent.returnValue = false;\r\n          }\r\n        };\r\n        event.stopPropagation = function () {\r\n          event.cancelBubble = true;\r\n          event.isPropagationStopped = always;\r\n          if (isFunction(originalEvent.stopPropagation)) {\r\n            originalEvent.stopPropagation();\r\n          } else if (isNativeEvent(originalEvent)) {\r\n            originalEvent.cancelBubble = true;\r\n          }\r\n        };\r\n        event.stopImmediatePropagation = function () {\r\n          event.isImmediatePropagationStopped = always;\r\n          event.stopPropagation();\r\n        };\r\n        if (!hasIsDefaultPrevented(event)) {\r\n          event.isDefaultPrevented = event.defaultPrevented === true ? always : never;\r\n          event.isPropagationStopped = event.cancelBubble === true ? always : never;\r\n          event.isImmediatePropagationStopped = never;\r\n        }\r\n      }\r\n      return event;\r\n    };\r\n\r\n    var eventExpandoPrefix = 'mce-data-';\r\n    var mouseEventRe = /^(?:mouse|contextmenu)|click/;\r\n    var addEvent = function (target, name, callback, capture) {\r\n      if (target.addEventListener) {\r\n        target.addEventListener(name, callback, capture || false);\r\n      } else if (target.attachEvent) {\r\n        target.attachEvent('on' + name, callback);\r\n      }\r\n    };\r\n    var removeEvent = function (target, name, callback, capture) {\r\n      if (target.removeEventListener) {\r\n        target.removeEventListener(name, callback, capture || false);\r\n      } else if (target.detachEvent) {\r\n        target.detachEvent('on' + name, callback);\r\n      }\r\n    };\r\n    var isMouseEvent = function (event) {\r\n      return isNonNullable(event) && mouseEventRe.test(event.type);\r\n    };\r\n    var fix = function (originalEvent, data) {\r\n      var event = normalize$3(originalEvent.type, originalEvent, document, data);\r\n      if (isMouseEvent(originalEvent) && isUndefined(originalEvent.pageX) && !isUndefined(originalEvent.clientX)) {\r\n        var eventDoc = event.target.ownerDocument || document;\r\n        var doc = eventDoc.documentElement;\r\n        var body = eventDoc.body;\r\n        var mouseEvent = event;\r\n        mouseEvent.pageX = originalEvent.clientX + (doc && doc.scrollLeft || body && body.scrollLeft || 0) - (doc && doc.clientLeft || body && body.clientLeft || 0);\r\n        mouseEvent.pageY = originalEvent.clientY + (doc && doc.scrollTop || body && body.scrollTop || 0) - (doc && doc.clientTop || body && body.clientTop || 0);\r\n      }\r\n      if (isUndefined(event.metaKey)) {\r\n        event.metaKey = false;\r\n      }\r\n      return event;\r\n    };\r\n    var bindOnReady = function (win, callback, eventUtils) {\r\n      var doc = win.document, event = { type: 'ready' };\r\n      if (eventUtils.domLoaded) {\r\n        callback(event);\r\n        return;\r\n      }\r\n      var isDocReady = function () {\r\n        return doc.readyState === 'complete' || doc.readyState === 'interactive' && doc.body;\r\n      };\r\n      var readyHandler = function () {\r\n        removeEvent(win, 'DOMContentLoaded', readyHandler);\r\n        removeEvent(win, 'load', readyHandler);\r\n        if (!eventUtils.domLoaded) {\r\n          eventUtils.domLoaded = true;\r\n          callback(event);\r\n        }\r\n        win = null;\r\n      };\r\n      if (isDocReady()) {\r\n        readyHandler();\r\n      } else {\r\n        addEvent(win, 'DOMContentLoaded', readyHandler);\r\n      }\r\n      if (!eventUtils.domLoaded) {\r\n        addEvent(win, 'load', readyHandler);\r\n      }\r\n    };\r\n    var EventUtils = function () {\r\n      function EventUtils() {\r\n        this.domLoaded = false;\r\n        this.events = {};\r\n        this.count = 1;\r\n        this.expando = eventExpandoPrefix + (+new Date()).toString(32);\r\n        this.hasMouseEnterLeave = 'onmouseenter' in document.documentElement;\r\n        this.hasFocusIn = 'onfocusin' in document.documentElement;\r\n        this.count = 1;\r\n      }\r\n      EventUtils.prototype.bind = function (target, names, callback, scope) {\r\n        var self = this;\r\n        var id, callbackList, i, name, fakeName, nativeHandler, capture;\r\n        var win = window;\r\n        var defaultNativeHandler = function (evt) {\r\n          self.executeHandlers(fix(evt || win.event), id);\r\n        };\r\n        if (!target || target.nodeType === 3 || target.nodeType === 8) {\r\n          return;\r\n        }\r\n        if (!target[self.expando]) {\r\n          id = self.count++;\r\n          target[self.expando] = id;\r\n          self.events[id] = {};\r\n        } else {\r\n          id = target[self.expando];\r\n        }\r\n        scope = scope || target;\r\n        var namesList = names.split(' ');\r\n        i = namesList.length;\r\n        while (i--) {\r\n          name = namesList[i];\r\n          nativeHandler = defaultNativeHandler;\r\n          fakeName = capture = false;\r\n          if (name === 'DOMContentLoaded') {\r\n            name = 'ready';\r\n          }\r\n          if (self.domLoaded && name === 'ready' && target.readyState === 'complete') {\r\n            callback.call(scope, fix({ type: name }));\r\n            continue;\r\n          }\r\n          if (!self.hasMouseEnterLeave) {\r\n            fakeName = self.mouseEnterLeave[name];\r\n            if (fakeName) {\r\n              nativeHandler = function (evt) {\r\n                var current = evt.currentTarget;\r\n                var related = evt.relatedTarget;\r\n                if (related && current.contains) {\r\n                  related = current.contains(related);\r\n                } else {\r\n                  while (related && related !== current) {\r\n                    related = related.parentNode;\r\n                  }\r\n                }\r\n                if (!related) {\r\n                  evt = fix(evt || win.event);\r\n                  evt.type = evt.type === 'mouseout' ? 'mouseleave' : 'mouseenter';\r\n                  evt.target = current;\r\n                  self.executeHandlers(evt, id);\r\n                }\r\n              };\r\n            }\r\n          }\r\n          if (!self.hasFocusIn && (name === 'focusin' || name === 'focusout')) {\r\n            capture = true;\r\n            fakeName = name === 'focusin' ? 'focus' : 'blur';\r\n            nativeHandler = function (evt) {\r\n              evt = fix(evt || win.event);\r\n              evt.type = evt.type === 'focus' ? 'focusin' : 'focusout';\r\n              self.executeHandlers(evt, id);\r\n            };\r\n          }\r\n          callbackList = self.events[id][name];\r\n          if (!callbackList) {\r\n            self.events[id][name] = callbackList = [{\r\n                func: callback,\r\n                scope: scope\r\n              }];\r\n            callbackList.fakeName = fakeName;\r\n            callbackList.capture = capture;\r\n            callbackList.nativeHandler = nativeHandler;\r\n            if (name === 'ready') {\r\n              bindOnReady(target, nativeHandler, self);\r\n            } else {\r\n              addEvent(target, fakeName || name, nativeHandler, capture);\r\n            }\r\n          } else {\r\n            if (name === 'ready' && self.domLoaded) {\r\n              callback(fix({ type: name }));\r\n            } else {\r\n              callbackList.push({\r\n                func: callback,\r\n                scope: scope\r\n              });\r\n            }\r\n          }\r\n        }\r\n        target = callbackList = null;\r\n        return callback;\r\n      };\r\n      EventUtils.prototype.unbind = function (target, names, callback) {\r\n        var callbackList, i, ci, name, eventMap;\r\n        if (!target || target.nodeType === 3 || target.nodeType === 8) {\r\n          return this;\r\n        }\r\n        var id = target[this.expando];\r\n        if (id) {\r\n          eventMap = this.events[id];\r\n          if (names) {\r\n            var namesList = names.split(' ');\r\n            i = namesList.length;\r\n            while (i--) {\r\n              name = namesList[i];\r\n              callbackList = eventMap[name];\r\n              if (callbackList) {\r\n                if (callback) {\r\n                  ci = callbackList.length;\r\n                  while (ci--) {\r\n                    if (callbackList[ci].func === callback) {\r\n                      var nativeHandler = callbackList.nativeHandler;\r\n                      var fakeName = callbackList.fakeName, capture = callbackList.capture;\r\n                      callbackList = callbackList.slice(0, ci).concat(callbackList.slice(ci + 1));\r\n                      callbackList.nativeHandler = nativeHandler;\r\n                      callbackList.fakeName = fakeName;\r\n                      callbackList.capture = capture;\r\n                      eventMap[name] = callbackList;\r\n                    }\r\n                  }\r\n                }\r\n                if (!callback || callbackList.length === 0) {\r\n                  delete eventMap[name];\r\n                  removeEvent(target, callbackList.fakeName || name, callbackList.nativeHandler, callbackList.capture);\r\n                }\r\n              }\r\n            }\r\n          } else {\r\n            each$j(eventMap, function (callbackList, name) {\r\n              removeEvent(target, callbackList.fakeName || name, callbackList.nativeHandler, callbackList.capture);\r\n            });\r\n            eventMap = {};\r\n          }\r\n          for (name in eventMap) {\r\n            if (has$2(eventMap, name)) {\r\n              return this;\r\n            }\r\n          }\r\n          delete this.events[id];\r\n          try {\r\n            delete target[this.expando];\r\n          } catch (ex) {\r\n            target[this.expando] = null;\r\n          }\r\n        }\r\n        return this;\r\n      };\r\n      EventUtils.prototype.fire = function (target, name, args) {\r\n        var id;\r\n        if (!target || target.nodeType === 3 || target.nodeType === 8) {\r\n          return this;\r\n        }\r\n        var event = fix({\r\n          type: name,\r\n          target: target\r\n        }, args);\r\n        do {\r\n          id = target[this.expando];\r\n          if (id) {\r\n            this.executeHandlers(event, id);\r\n          }\r\n          target = target.parentNode || target.ownerDocument || target.defaultView || target.parentWindow;\r\n        } while (target && !event.isPropagationStopped());\r\n        return this;\r\n      };\r\n      EventUtils.prototype.clean = function (target) {\r\n        var i, children;\r\n        if (!target || target.nodeType === 3 || target.nodeType === 8) {\r\n          return this;\r\n        }\r\n        if (target[this.expando]) {\r\n          this.unbind(target);\r\n        }\r\n        if (!target.getElementsByTagName) {\r\n          target = target.document;\r\n        }\r\n        if (target && target.getElementsByTagName) {\r\n          this.unbind(target);\r\n          children = target.getElementsByTagName('*');\r\n          i = children.length;\r\n          while (i--) {\r\n            target = children[i];\r\n            if (target[this.expando]) {\r\n              this.unbind(target);\r\n            }\r\n          }\r\n        }\r\n        return this;\r\n      };\r\n      EventUtils.prototype.destroy = function () {\r\n        this.events = {};\r\n      };\r\n      EventUtils.prototype.cancel = function (e) {\r\n        if (e) {\r\n          e.preventDefault();\r\n          e.stopImmediatePropagation();\r\n        }\r\n        return false;\r\n      };\r\n      EventUtils.prototype.executeHandlers = function (evt, id) {\r\n        var container = this.events[id];\r\n        var callbackList = container && container[evt.type];\r\n        if (callbackList) {\r\n          for (var i = 0, l = callbackList.length; i < l; i++) {\r\n            var callback = callbackList[i];\r\n            if (callback && callback.func.call(callback.scope, evt) === false) {\r\n              evt.preventDefault();\r\n            }\r\n            if (evt.isImmediatePropagationStopped()) {\r\n              return;\r\n            }\r\n          }\r\n        }\r\n      };\r\n      EventUtils.Event = new EventUtils();\r\n      return EventUtils;\r\n    }();\r\n\r\n    var support, Expr, getText, isXML, tokenize, compile, select$1, outermostContext, sortInput, hasDuplicate, setDocument, document$1, docElem, documentIsHTML, rbuggyQSA, rbuggyMatches, matches, contains, expando = 'sizzle' + -new Date(), preferredDoc = window.document, dirruns = 0, done = 0, classCache = createCache(), tokenCache = createCache(), compilerCache = createCache(), sortOrder = function (a, b) {\r\n        if (a === b) {\r\n          hasDuplicate = true;\r\n        }\r\n        return 0;\r\n      }, strundefined = typeof undefined, MAX_NEGATIVE = 1 << 31, hasOwn = {}.hasOwnProperty, arr = [], pop = arr.pop, push_native = arr.push, push$1 = arr.push, slice$1 = arr.slice, indexOf = arr.indexOf || function (elem) {\r\n        var i = 0, len = this.length;\r\n        for (; i < len; i++) {\r\n          if (this[i] === elem) {\r\n            return i;\r\n          }\r\n        }\r\n        return -1;\r\n      }, booleans = 'checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped', whitespace = '[\\\\x20\\\\t\\\\r\\\\n\\\\f]', identifier = '(?:\\\\\\\\.|[\\\\w-]|[^\\\\x00-\\\\xa0])+', attributes = '\\\\[' + whitespace + '*(' + identifier + ')(?:' + whitespace + '*([*^$|!~]?=)' + whitespace + '*(?:\\'((?:\\\\\\\\.|[^\\\\\\\\\\'])*)\\'|\"((?:\\\\\\\\.|[^\\\\\\\\\"])*)\"|(' + identifier + '))|)' + whitespace + '*\\\\]', pseudos = ':(' + identifier + ')(?:\\\\((' + '(\\'((?:\\\\\\\\.|[^\\\\\\\\\\'])*)\\'|\"((?:\\\\\\\\.|[^\\\\\\\\\"])*)\")|' + '((?:\\\\\\\\.|[^\\\\\\\\()[\\\\]]|' + attributes + ')*)|' + '.*' + ')\\\\)|)', rtrim = new RegExp('^' + whitespace + '+|((?:^|[^\\\\\\\\])(?:\\\\\\\\.)*)' + whitespace + '+$', 'g'), rcomma = new RegExp('^' + whitespace + '*,' + whitespace + '*'), rcombinators = new RegExp('^' + whitespace + '*([>+~]|' + whitespace + ')' + whitespace + '*'), rattributeQuotes = new RegExp('=' + whitespace + '*([^\\\\]\\'\"]*?)' + whitespace + '*\\\\]', 'g'), rpseudo = new RegExp(pseudos), ridentifier = new RegExp('^' + identifier + '$'), matchExpr = {\r\n        ID: new RegExp('^#(' + identifier + ')'),\r\n        CLASS: new RegExp('^\\\\.(' + identifier + ')'),\r\n        TAG: new RegExp('^(' + identifier + '|[*])'),\r\n        ATTR: new RegExp('^' + attributes),\r\n        PSEUDO: new RegExp('^' + pseudos),\r\n        CHILD: new RegExp('^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\\\(' + whitespace + '*(even|odd|(([+-]|)(\\\\d*)n|)' + whitespace + '*(?:([+-]|)' + whitespace + '*(\\\\d+)|))' + whitespace + '*\\\\)|)', 'i'),\r\n        bool: new RegExp('^(?:' + booleans + ')$', 'i'),\r\n        needsContext: new RegExp('^' + whitespace + '*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\\\(' + whitespace + '*((?:-\\\\d)?\\\\d*)' + whitespace + '*\\\\)|)(?=[^-]|$)', 'i')\r\n      }, rinputs = /^(?:input|select|textarea|button)$/i, rheader = /^h\\d$/i, rnative = /^[^{]+\\{\\s*\\[native \\w/, rquickExpr$1 = /^(?:#([\\w-]+)|(\\w+)|\\.([\\w-]+))$/, rsibling = /[+~]/, rescape = /'|\\\\/g, runescape = new RegExp('\\\\\\\\([\\\\da-f]{1,6}' + whitespace + '?|(' + whitespace + ')|.)', 'ig'), funescape = function (_, escaped, escapedWhitespace) {\r\n        var high = '0x' + escaped - 65536;\r\n        return high !== high || escapedWhitespace ? escaped : high < 0 ? String.fromCharCode(high + 65536) : String.fromCharCode(high >> 10 | 55296, high & 1023 | 56320);\r\n      };\r\n    try {\r\n      push$1.apply(arr = slice$1.call(preferredDoc.childNodes), preferredDoc.childNodes);\r\n      arr[preferredDoc.childNodes.length].nodeType;\r\n    } catch (e) {\r\n      push$1 = {\r\n        apply: arr.length ? function (target, els) {\r\n          push_native.apply(target, slice$1.call(els));\r\n        } : function (target, els) {\r\n          var j = target.length, i = 0;\r\n          while (target[j++] = els[i++]) {\r\n          }\r\n          target.length = j - 1;\r\n        }\r\n      };\r\n    }\r\n    var Sizzle = function (selector, context, results, seed) {\r\n      var match, elem, m, nodeType, i, groups, old, nid, newContext, newSelector;\r\n      if ((context ? context.ownerDocument || context : preferredDoc) !== document$1) {\r\n        setDocument(context);\r\n      }\r\n      context = context || document$1;\r\n      results = results || [];\r\n      if (!selector || typeof selector !== 'string') {\r\n        return results;\r\n      }\r\n      if ((nodeType = context.nodeType) !== 1 && nodeType !== 9) {\r\n        return [];\r\n      }\r\n      if (documentIsHTML && !seed) {\r\n        if (match = rquickExpr$1.exec(selector)) {\r\n          if (m = match[1]) {\r\n            if (nodeType === 9) {\r\n              elem = context.getElementById(m);\r\n              if (elem && elem.parentNode) {\r\n                if (elem.id === m) {\r\n                  results.push(elem);\r\n                  return results;\r\n                }\r\n              } else {\r\n                return results;\r\n              }\r\n            } else {\r\n              if (context.ownerDocument && (elem = context.ownerDocument.getElementById(m)) && contains(context, elem) && elem.id === m) {\r\n                results.push(elem);\r\n                return results;\r\n              }\r\n            }\r\n          } else if (match[2]) {\r\n            push$1.apply(results, context.getElementsByTagName(selector));\r\n            return results;\r\n          } else if ((m = match[3]) && support.getElementsByClassName) {\r\n            push$1.apply(results, context.getElementsByClassName(m));\r\n            return results;\r\n          }\r\n        }\r\n        if (support.qsa && (!rbuggyQSA || !rbuggyQSA.test(selector))) {\r\n          nid = old = expando;\r\n          newContext = context;\r\n          newSelector = nodeType === 9 && selector;\r\n          if (nodeType === 1 && context.nodeName.toLowerCase() !== 'object') {\r\n            groups = tokenize(selector);\r\n            if (old = context.getAttribute('id')) {\r\n              nid = old.replace(rescape, '\\\\$&');\r\n            } else {\r\n              context.setAttribute('id', nid);\r\n            }\r\n            nid = '[id=\\'' + nid + '\\'] ';\r\n            i = groups.length;\r\n            while (i--) {\r\n              groups[i] = nid + toSelector(groups[i]);\r\n            }\r\n            newContext = rsibling.test(selector) && testContext(context.parentNode) || context;\r\n            newSelector = groups.join(',');\r\n          }\r\n          if (newSelector) {\r\n            try {\r\n              push$1.apply(results, newContext.querySelectorAll(newSelector));\r\n              return results;\r\n            } catch (qsaError) {\r\n            } finally {\r\n              if (!old) {\r\n                context.removeAttribute('id');\r\n              }\r\n            }\r\n          }\r\n        }\r\n      }\r\n      return select$1(selector.replace(rtrim, '$1'), context, results, seed);\r\n    };\r\n    function createCache() {\r\n      var keys = [];\r\n      function cache(key, value) {\r\n        if (keys.push(key + ' ') > Expr.cacheLength) {\r\n          delete cache[keys.shift()];\r\n        }\r\n        return cache[key + ' '] = value;\r\n      }\r\n      return cache;\r\n    }\r\n    function markFunction(fn) {\r\n      fn[expando] = true;\r\n      return fn;\r\n    }\r\n    function siblingCheck(a, b) {\r\n      var cur = b && a, diff = cur && a.nodeType === 1 && b.nodeType === 1 && (~b.sourceIndex || MAX_NEGATIVE) - (~a.sourceIndex || MAX_NEGATIVE);\r\n      if (diff) {\r\n        return diff;\r\n      }\r\n      if (cur) {\r\n        while (cur = cur.nextSibling) {\r\n          if (cur === b) {\r\n            return -1;\r\n          }\r\n        }\r\n      }\r\n      return a ? 1 : -1;\r\n    }\r\n    function createInputPseudo(type) {\r\n      return function (elem) {\r\n        var name = elem.nodeName.toLowerCase();\r\n        return name === 'input' && elem.type === type;\r\n      };\r\n    }\r\n    function createButtonPseudo(type) {\r\n      return function (elem) {\r\n        var name = elem.nodeName.toLowerCase();\r\n        return (name === 'input' || name === 'button') && elem.type === type;\r\n      };\r\n    }\r\n    function createPositionalPseudo(fn) {\r\n      return markFunction(function (argument) {\r\n        argument = +argument;\r\n        return markFunction(function (seed, matches) {\r\n          var j, matchIndexes = fn([], seed.length, argument), i = matchIndexes.length;\r\n          while (i--) {\r\n            if (seed[j = matchIndexes[i]]) {\r\n              seed[j] = !(matches[j] = seed[j]);\r\n            }\r\n          }\r\n        });\r\n      });\r\n    }\r\n    function testContext(context) {\r\n      return context && typeof context.getElementsByTagName !== strundefined && context;\r\n    }\r\n    support = Sizzle.support = {};\r\n    isXML = Sizzle.isXML = function (elem) {\r\n      var documentElement = elem && (elem.ownerDocument || elem).documentElement;\r\n      return documentElement ? documentElement.nodeName !== 'HTML' : false;\r\n    };\r\n    setDocument = Sizzle.setDocument = function (node) {\r\n      var hasCompare, doc = node ? node.ownerDocument || node : preferredDoc, parent = doc.defaultView;\r\n      function getTop(win) {\r\n        try {\r\n          return win.top;\r\n        } catch (ex) {\r\n        }\r\n        return null;\r\n      }\r\n      if (doc === document$1 || doc.nodeType !== 9 || !doc.documentElement) {\r\n        return document$1;\r\n      }\r\n      document$1 = doc;\r\n      docElem = doc.documentElement;\r\n      documentIsHTML = !isXML(doc);\r\n      if (parent && parent !== getTop(parent)) {\r\n        if (parent.addEventListener) {\r\n          parent.addEventListener('unload', function () {\r\n            setDocument();\r\n          }, false);\r\n        } else if (parent.attachEvent) {\r\n          parent.attachEvent('onunload', function () {\r\n            setDocument();\r\n          });\r\n        }\r\n      }\r\n      support.attributes = true;\r\n      support.getElementsByTagName = true;\r\n      support.getElementsByClassName = rnative.test(doc.getElementsByClassName);\r\n      support.getById = true;\r\n      Expr.find.ID = function (id, context) {\r\n        if (typeof context.getElementById !== strundefined && documentIsHTML) {\r\n          var m = context.getElementById(id);\r\n          return m && m.parentNode ? [m] : [];\r\n        }\r\n      };\r\n      Expr.filter.ID = function (id) {\r\n        var attrId = id.replace(runescape, funescape);\r\n        return function (elem) {\r\n          return elem.getAttribute('id') === attrId;\r\n        };\r\n      };\r\n      Expr.find.TAG = support.getElementsByTagName ? function (tag, context) {\r\n        if (typeof context.getElementsByTagName !== strundefined) {\r\n          return context.getElementsByTagName(tag);\r\n        }\r\n      } : function (tag, context) {\r\n        var elem, tmp = [], i = 0, results = context.getElementsByTagName(tag);\r\n        if (tag === '*') {\r\n          while (elem = results[i++]) {\r\n            if (elem.nodeType === 1) {\r\n              tmp.push(elem);\r\n            }\r\n          }\r\n          return tmp;\r\n        }\r\n        return results;\r\n      };\r\n      Expr.find.CLASS = support.getElementsByClassName && function (className, context) {\r\n        if (documentIsHTML) {\r\n          return context.getElementsByClassName(className);\r\n        }\r\n      };\r\n      rbuggyMatches = [];\r\n      rbuggyQSA = [];\r\n      support.disconnectedMatch = true;\r\n      rbuggyQSA = rbuggyQSA.length && new RegExp(rbuggyQSA.join('|'));\r\n      rbuggyMatches = rbuggyMatches.length && new RegExp(rbuggyMatches.join('|'));\r\n      hasCompare = rnative.test(docElem.compareDocumentPosition);\r\n      contains = hasCompare || rnative.test(docElem.contains) ? function (a, b) {\r\n        var adown = a.nodeType === 9 ? a.documentElement : a, bup = b && b.parentNode;\r\n        return a === bup || !!(bup && bup.nodeType === 1 && (adown.contains ? adown.contains(bup) : a.compareDocumentPosition && a.compareDocumentPosition(bup) & 16));\r\n      } : function (a, b) {\r\n        if (b) {\r\n          while (b = b.parentNode) {\r\n            if (b === a) {\r\n              return true;\r\n            }\r\n          }\r\n        }\r\n        return false;\r\n      };\r\n      sortOrder = hasCompare ? function (a, b) {\r\n        if (a === b) {\r\n          hasDuplicate = true;\r\n          return 0;\r\n        }\r\n        var compare = !a.compareDocumentPosition - !b.compareDocumentPosition;\r\n        if (compare) {\r\n          return compare;\r\n        }\r\n        compare = (a.ownerDocument || a) === (b.ownerDocument || b) ? a.compareDocumentPosition(b) : 1;\r\n        if (compare & 1 || !support.sortDetached && b.compareDocumentPosition(a) === compare) {\r\n          if (a === doc || a.ownerDocument === preferredDoc && contains(preferredDoc, a)) {\r\n            return -1;\r\n          }\r\n          if (b === doc || b.ownerDocument === preferredDoc && contains(preferredDoc, b)) {\r\n            return 1;\r\n          }\r\n          return sortInput ? indexOf.call(sortInput, a) - indexOf.call(sortInput, b) : 0;\r\n        }\r\n        return compare & 4 ? -1 : 1;\r\n      } : function (a, b) {\r\n        if (a === b) {\r\n          hasDuplicate = true;\r\n          return 0;\r\n        }\r\n        var cur, i = 0, aup = a.parentNode, bup = b.parentNode, ap = [a], bp = [b];\r\n        if (!aup || !bup) {\r\n          return a === doc ? -1 : b === doc ? 1 : aup ? -1 : bup ? 1 : sortInput ? indexOf.call(sortInput, a) - indexOf.call(sortInput, b) : 0;\r\n        } else if (aup === bup) {\r\n          return siblingCheck(a, b);\r\n        }\r\n        cur = a;\r\n        while (cur = cur.parentNode) {\r\n          ap.unshift(cur);\r\n        }\r\n        cur = b;\r\n        while (cur = cur.parentNode) {\r\n          bp.unshift(cur);\r\n        }\r\n        while (ap[i] === bp[i]) {\r\n          i++;\r\n        }\r\n        return i ? siblingCheck(ap[i], bp[i]) : ap[i] === preferredDoc ? -1 : bp[i] === preferredDoc ? 1 : 0;\r\n      };\r\n      return doc;\r\n    };\r\n    Sizzle.matches = function (expr, elements) {\r\n      return Sizzle(expr, null, null, elements);\r\n    };\r\n    Sizzle.matchesSelector = function (elem, expr) {\r\n      if ((elem.ownerDocument || elem) !== document$1) {\r\n        setDocument(elem);\r\n      }\r\n      expr = expr.replace(rattributeQuotes, '=\\'$1\\']');\r\n      if (support.matchesSelector && documentIsHTML && (!rbuggyMatches || !rbuggyMatches.test(expr)) && (!rbuggyQSA || !rbuggyQSA.test(expr))) {\r\n        try {\r\n          var ret = matches.call(elem, expr);\r\n          if (ret || support.disconnectedMatch || elem.document && elem.document.nodeType !== 11) {\r\n            return ret;\r\n          }\r\n        } catch (e) {\r\n        }\r\n      }\r\n      return Sizzle(expr, document$1, null, [elem]).length > 0;\r\n    };\r\n    Sizzle.contains = function (context, elem) {\r\n      if ((context.ownerDocument || context) !== document$1) {\r\n        setDocument(context);\r\n      }\r\n      return contains(context, elem);\r\n    };\r\n    Sizzle.attr = function (elem, name) {\r\n      if ((elem.ownerDocument || elem) !== document$1) {\r\n        setDocument(elem);\r\n      }\r\n      var fn = Expr.attrHandle[name.toLowerCase()], val = fn && hasOwn.call(Expr.attrHandle, name.toLowerCase()) ? fn(elem, name, !documentIsHTML) : undefined;\r\n      return val !== undefined ? val : support.attributes || !documentIsHTML ? elem.getAttribute(name) : (val = elem.getAttributeNode(name)) && val.specified ? val.value : null;\r\n    };\r\n    Sizzle.error = function (msg) {\r\n      throw new Error('Syntax error, unrecognized expression: ' + msg);\r\n    };\r\n    Sizzle.uniqueSort = function (results) {\r\n      var elem, duplicates = [], j = 0, i = 0;\r\n      hasDuplicate = !support.detectDuplicates;\r\n      sortInput = !support.sortStable && results.slice(0);\r\n      results.sort(sortOrder);\r\n      if (hasDuplicate) {\r\n        while (elem = results[i++]) {\r\n          if (elem === results[i]) {\r\n            j = duplicates.push(i);\r\n          }\r\n        }\r\n        while (j--) {\r\n          results.splice(duplicates[j], 1);\r\n        }\r\n      }\r\n      sortInput = null;\r\n      return results;\r\n    };\r\n    getText = Sizzle.getText = function (elem) {\r\n      var node, ret = '', i = 0, nodeType = elem.nodeType;\r\n      if (!nodeType) {\r\n        while (node = elem[i++]) {\r\n          ret += getText(node);\r\n        }\r\n      } else if (nodeType === 1 || nodeType === 9 || nodeType === 11) {\r\n        if (typeof elem.textContent === 'string') {\r\n          return elem.textContent;\r\n        } else {\r\n          for (elem = elem.firstChild; elem; elem = elem.nextSibling) {\r\n            ret += getText(elem);\r\n          }\r\n        }\r\n      } else if (nodeType === 3 || nodeType === 4) {\r\n        return elem.nodeValue;\r\n      }\r\n      return ret;\r\n    };\r\n    Expr = Sizzle.selectors = {\r\n      cacheLength: 50,\r\n      createPseudo: markFunction,\r\n      match: matchExpr,\r\n      attrHandle: {},\r\n      find: {},\r\n      relative: {\r\n        '>': {\r\n          dir: 'parentNode',\r\n          first: true\r\n        },\r\n        ' ': { dir: 'parentNode' },\r\n        '+': {\r\n          dir: 'previousSibling',\r\n          first: true\r\n        },\r\n        '~': { dir: 'previousSibling' }\r\n      },\r\n      preFilter: {\r\n        ATTR: function (match) {\r\n          match[1] = match[1].replace(runescape, funescape);\r\n          match[3] = (match[3] || match[4] || match[5] || '').replace(runescape, funescape);\r\n          if (match[2] === '~=') {\r\n            match[3] = ' ' + match[3] + ' ';\r\n          }\r\n          return match.slice(0, 4);\r\n        },\r\n        CHILD: function (match) {\r\n          match[1] = match[1].toLowerCase();\r\n          if (match[1].slice(0, 3) === 'nth') {\r\n            if (!match[3]) {\r\n              Sizzle.error(match[0]);\r\n            }\r\n            match[4] = +(match[4] ? match[5] + (match[6] || 1) : 2 * (match[3] === 'even' || match[3] === 'odd'));\r\n            match[5] = +(match[7] + match[8] || match[3] === 'odd');\r\n          } else if (match[3]) {\r\n            Sizzle.error(match[0]);\r\n          }\r\n          return match;\r\n        },\r\n        PSEUDO: function (match) {\r\n          var excess, unquoted = !match[6] && match[2];\r\n          if (matchExpr.CHILD.test(match[0])) {\r\n            return null;\r\n          }\r\n          if (match[3]) {\r\n            match[2] = match[4] || match[5] || '';\r\n          } else if (unquoted && rpseudo.test(unquoted) && (excess = tokenize(unquoted, true)) && (excess = unquoted.indexOf(')', unquoted.length - excess) - unquoted.length)) {\r\n            match[0] = match[0].slice(0, excess);\r\n            match[2] = unquoted.slice(0, excess);\r\n          }\r\n          return match.slice(0, 3);\r\n        }\r\n      },\r\n      filter: {\r\n        TAG: function (nodeNameSelector) {\r\n          var nodeName = nodeNameSelector.replace(runescape, funescape).toLowerCase();\r\n          return nodeNameSelector === '*' ? function () {\r\n            return true;\r\n          } : function (elem) {\r\n            return elem.nodeName && elem.nodeName.toLowerCase() === nodeName;\r\n          };\r\n        },\r\n        CLASS: function (className) {\r\n          var pattern = classCache[className + ' '];\r\n          return pattern || (pattern = new RegExp('(^|' + whitespace + ')' + className + '(' + whitespace + '|$)')) && classCache(className, function (elem) {\r\n            return pattern.test(typeof elem.className === 'string' && elem.className || typeof elem.getAttribute !== strundefined && elem.getAttribute('class') || '');\r\n          });\r\n        },\r\n        ATTR: function (name, operator, check) {\r\n          return function (elem) {\r\n            var result = Sizzle.attr(elem, name);\r\n            if (result == null) {\r\n              return operator === '!=';\r\n            }\r\n            if (!operator) {\r\n              return true;\r\n            }\r\n            result += '';\r\n            return operator === '=' ? result === check : operator === '!=' ? result !== check : operator === '^=' ? check && result.indexOf(check) === 0 : operator === '*=' ? check && result.indexOf(check) > -1 : operator === '$=' ? check && result.slice(-check.length) === check : operator === '~=' ? (' ' + result + ' ').indexOf(check) > -1 : operator === '|=' ? result === check || result.slice(0, check.length + 1) === check + '-' : false;\r\n          };\r\n        },\r\n        CHILD: function (type, what, argument, first, last) {\r\n          var simple = type.slice(0, 3) !== 'nth', forward = type.slice(-4) !== 'last', ofType = what === 'of-type';\r\n          return first === 1 && last === 0 ? function (elem) {\r\n            return !!elem.parentNode;\r\n          } : function (elem, context, xml) {\r\n            var cache, outerCache, node, diff, nodeIndex, start, dir = simple !== forward ? 'nextSibling' : 'previousSibling', parent = elem.parentNode, name = ofType && elem.nodeName.toLowerCase(), useCache = !xml && !ofType;\r\n            if (parent) {\r\n              if (simple) {\r\n                while (dir) {\r\n                  node = elem;\r\n                  while (node = node[dir]) {\r\n                    if (ofType ? node.nodeName.toLowerCase() === name : node.nodeType === 1) {\r\n                      return false;\r\n                    }\r\n                  }\r\n                  start = dir = type === 'only' && !start && 'nextSibling';\r\n                }\r\n                return true;\r\n              }\r\n              start = [forward ? parent.firstChild : parent.lastChild];\r\n              if (forward && useCache) {\r\n                outerCache = parent[expando] || (parent[expando] = {});\r\n                cache = outerCache[type] || [];\r\n                nodeIndex = cache[0] === dirruns && cache[1];\r\n                diff = cache[0] === dirruns && cache[2];\r\n                node = nodeIndex && parent.childNodes[nodeIndex];\r\n                while (node = ++nodeIndex && node && node[dir] || (diff = nodeIndex = 0) || start.pop()) {\r\n                  if (node.nodeType === 1 && ++diff && node === elem) {\r\n                    outerCache[type] = [\r\n                      dirruns,\r\n                      nodeIndex,\r\n                      diff\r\n                    ];\r\n                    break;\r\n                  }\r\n                }\r\n              } else if (useCache && (cache = (elem[expando] || (elem[expando] = {}))[type]) && cache[0] === dirruns) {\r\n                diff = cache[1];\r\n              } else {\r\n                while (node = ++nodeIndex && node && node[dir] || (diff = nodeIndex = 0) || start.pop()) {\r\n                  if ((ofType ? node.nodeName.toLowerCase() === name : node.nodeType === 1) && ++diff) {\r\n                    if (useCache) {\r\n                      (node[expando] || (node[expando] = {}))[type] = [\r\n                        dirruns,\r\n                        diff\r\n                      ];\r\n                    }\r\n                    if (node === elem) {\r\n                      break;\r\n                    }\r\n                  }\r\n                }\r\n              }\r\n              diff -= last;\r\n              return diff === first || diff % first === 0 && diff / first >= 0;\r\n            }\r\n          };\r\n        },\r\n        PSEUDO: function (pseudo, argument) {\r\n          var args, fn = Expr.pseudos[pseudo] || Expr.setFilters[pseudo.toLowerCase()] || Sizzle.error('unsupported pseudo: ' + pseudo);\r\n          if (fn[expando]) {\r\n            return fn(argument);\r\n          }\r\n          if (fn.length > 1) {\r\n            args = [\r\n              pseudo,\r\n              pseudo,\r\n              '',\r\n              argument\r\n            ];\r\n            return Expr.setFilters.hasOwnProperty(pseudo.toLowerCase()) ? markFunction(function (seed, matches) {\r\n              var idx, matched = fn(seed, argument), i = matched.length;\r\n              while (i--) {\r\n                idx = indexOf.call(seed, matched[i]);\r\n                seed[idx] = !(matches[idx] = matched[i]);\r\n              }\r\n            }) : function (elem) {\r\n              return fn(elem, 0, args);\r\n            };\r\n          }\r\n          return fn;\r\n        }\r\n      },\r\n      pseudos: {\r\n        not: markFunction(function (selector) {\r\n          var input = [], results = [], matcher = compile(selector.replace(rtrim, '$1'));\r\n          return matcher[expando] ? markFunction(function (seed, matches, context, xml) {\r\n            var elem, unmatched = matcher(seed, null, xml, []), i = seed.length;\r\n            while (i--) {\r\n              if (elem = unmatched[i]) {\r\n                seed[i] = !(matches[i] = elem);\r\n              }\r\n            }\r\n          }) : function (elem, context, xml) {\r\n            input[0] = elem;\r\n            matcher(input, null, xml, results);\r\n            input[0] = null;\r\n            return !results.pop();\r\n          };\r\n        }),\r\n        has: markFunction(function (selector) {\r\n          return function (elem) {\r\n            return Sizzle(selector, elem).length > 0;\r\n          };\r\n        }),\r\n        contains: markFunction(function (text) {\r\n          text = text.replace(runescape, funescape);\r\n          return function (elem) {\r\n            return (elem.textContent || elem.innerText || getText(elem)).indexOf(text) > -1;\r\n          };\r\n        }),\r\n        lang: markFunction(function (lang) {\r\n          if (!ridentifier.test(lang || '')) {\r\n            Sizzle.error('unsupported lang: ' + lang);\r\n          }\r\n          lang = lang.replace(runescape, funescape).toLowerCase();\r\n          return function (elem) {\r\n            var elemLang;\r\n            do {\r\n              if (elemLang = documentIsHTML ? elem.lang : elem.getAttribute('xml:lang') || elem.getAttribute('lang')) {\r\n                elemLang = elemLang.toLowerCase();\r\n                return elemLang === lang || elemLang.indexOf(lang + '-') === 0;\r\n              }\r\n            } while ((elem = elem.parentNode) && elem.nodeType === 1);\r\n            return false;\r\n          };\r\n        }),\r\n        target: function (elem) {\r\n          var hash = window.location && window.location.hash;\r\n          return hash && hash.slice(1) === elem.id;\r\n        },\r\n        root: function (elem) {\r\n          return elem === docElem;\r\n        },\r\n        focus: function (elem) {\r\n          return elem === document$1.activeElement && (!document$1.hasFocus || document$1.hasFocus()) && !!(elem.type || elem.href || ~elem.tabIndex);\r\n        },\r\n        enabled: function (elem) {\r\n          return elem.disabled === false;\r\n        },\r\n        disabled: function (elem) {\r\n          return elem.disabled === true;\r\n        },\r\n        checked: function (elem) {\r\n          var nodeName = elem.nodeName.toLowerCase();\r\n          return nodeName === 'input' && !!elem.checked || nodeName === 'option' && !!elem.selected;\r\n        },\r\n        selected: function (elem) {\r\n          if (elem.parentNode) {\r\n            elem.parentNode.selectedIndex;\r\n          }\r\n          return elem.selected === true;\r\n        },\r\n        empty: function (elem) {\r\n          for (elem = elem.firstChild; elem; elem = elem.nextSibling) {\r\n            if (elem.nodeType < 6) {\r\n              return false;\r\n            }\r\n          }\r\n          return true;\r\n        },\r\n        parent: function (elem) {\r\n          return !Expr.pseudos.empty(elem);\r\n        },\r\n        header: function (elem) {\r\n          return rheader.test(elem.nodeName);\r\n        },\r\n        input: function (elem) {\r\n          return rinputs.test(elem.nodeName);\r\n        },\r\n        button: function (elem) {\r\n          var name = elem.nodeName.toLowerCase();\r\n          return name === 'input' && elem.type === 'button' || name === 'button';\r\n        },\r\n        text: function (elem) {\r\n          var attr;\r\n          return elem.nodeName.toLowerCase() === 'input' && elem.type === 'text' && ((attr = elem.getAttribute('type')) == null || attr.toLowerCase() === 'text');\r\n        },\r\n        first: createPositionalPseudo(function () {\r\n          return [0];\r\n        }),\r\n        last: createPositionalPseudo(function (matchIndexes, length) {\r\n          return [length - 1];\r\n        }),\r\n        eq: createPositionalPseudo(function (matchIndexes, length, argument) {\r\n          return [argument < 0 ? argument + length : argument];\r\n        }),\r\n        even: createPositionalPseudo(function (matchIndexes, length) {\r\n          var i = 0;\r\n          for (; i < length; i += 2) {\r\n            matchIndexes.push(i);\r\n          }\r\n          return matchIndexes;\r\n        }),\r\n        odd: createPositionalPseudo(function (matchIndexes, length) {\r\n          var i = 1;\r\n          for (; i < length; i += 2) {\r\n            matchIndexes.push(i);\r\n          }\r\n          return matchIndexes;\r\n        }),\r\n        lt: createPositionalPseudo(function (matchIndexes, length, argument) {\r\n          var i = argument < 0 ? argument + length : argument;\r\n          for (; --i >= 0;) {\r\n            matchIndexes.push(i);\r\n          }\r\n          return matchIndexes;\r\n        }),\r\n        gt: createPositionalPseudo(function (matchIndexes, length, argument) {\r\n          var i = argument < 0 ? argument + length : argument;\r\n          for (; ++i < length;) {\r\n            matchIndexes.push(i);\r\n          }\r\n          return matchIndexes;\r\n        })\r\n      }\r\n    };\r\n    Expr.pseudos.nth = Expr.pseudos.eq;\r\n    each$k([\r\n      'radio',\r\n      'checkbox',\r\n      'file',\r\n      'password',\r\n      'image'\r\n    ], function (i) {\r\n      Expr.pseudos[i] = createInputPseudo(i);\r\n    });\r\n    each$k([\r\n      'submit',\r\n      'reset'\r\n    ], function (i) {\r\n      Expr.pseudos[i] = createButtonPseudo(i);\r\n    });\r\n    function setFilters() {\r\n    }\r\n    setFilters.prototype = Expr.filters = Expr.pseudos;\r\n    Expr.setFilters = new setFilters();\r\n    tokenize = Sizzle.tokenize = function (selector, parseOnly) {\r\n      var matched, match, tokens, type, soFar, groups, preFilters, cached = tokenCache[selector + ' '];\r\n      if (cached) {\r\n        return parseOnly ? 0 : cached.slice(0);\r\n      }\r\n      soFar = selector;\r\n      groups = [];\r\n      preFilters = Expr.preFilter;\r\n      while (soFar) {\r\n        if (!matched || (match = rcomma.exec(soFar))) {\r\n          if (match) {\r\n            soFar = soFar.slice(match[0].length) || soFar;\r\n          }\r\n          groups.push(tokens = []);\r\n        }\r\n        matched = false;\r\n        if (match = rcombinators.exec(soFar)) {\r\n          matched = match.shift();\r\n          tokens.push({\r\n            value: matched,\r\n            type: match[0].replace(rtrim, ' ')\r\n          });\r\n          soFar = soFar.slice(matched.length);\r\n        }\r\n        for (type in Expr.filter) {\r\n          if (!Expr.filter.hasOwnProperty(type)) {\r\n            continue;\r\n          }\r\n          if ((match = matchExpr[type].exec(soFar)) && (!preFilters[type] || (match = preFilters[type](match)))) {\r\n            matched = match.shift();\r\n            tokens.push({\r\n              value: matched,\r\n              type: type,\r\n              matches: match\r\n            });\r\n            soFar = soFar.slice(matched.length);\r\n          }\r\n        }\r\n        if (!matched) {\r\n          break;\r\n        }\r\n      }\r\n      return parseOnly ? soFar.length : soFar ? Sizzle.error(selector) : tokenCache(selector, groups).slice(0);\r\n    };\r\n    function toSelector(tokens) {\r\n      var i = 0, len = tokens.length, selector = '';\r\n      for (; i < len; i++) {\r\n        selector += tokens[i].value;\r\n      }\r\n      return selector;\r\n    }\r\n    function addCombinator(matcher, combinator, base) {\r\n      var dir = combinator.dir, checkNonElements = base && dir === 'parentNode', doneName = done++;\r\n      return combinator.first ? function (elem, context, xml) {\r\n        while (elem = elem[dir]) {\r\n          if (elem.nodeType === 1 || checkNonElements) {\r\n            return matcher(elem, context, xml);\r\n          }\r\n        }\r\n      } : function (elem, context, xml) {\r\n        var oldCache, outerCache, newCache = [\r\n            dirruns,\r\n            doneName\r\n          ];\r\n        if (xml) {\r\n          while (elem = elem[dir]) {\r\n            if (elem.nodeType === 1 || checkNonElements) {\r\n              if (matcher(elem, context, xml)) {\r\n                return true;\r\n              }\r\n            }\r\n          }\r\n        } else {\r\n          while (elem = elem[dir]) {\r\n            if (elem.nodeType === 1 || checkNonElements) {\r\n              outerCache = elem[expando] || (elem[expando] = {});\r\n              if ((oldCache = outerCache[dir]) && oldCache[0] === dirruns && oldCache[1] === doneName) {\r\n                return newCache[2] = oldCache[2];\r\n              } else {\r\n                outerCache[dir] = newCache;\r\n                if (newCache[2] = matcher(elem, context, xml)) {\r\n                  return true;\r\n                }\r\n              }\r\n            }\r\n          }\r\n        }\r\n      };\r\n    }\r\n    function elementMatcher(matchers) {\r\n      return matchers.length > 1 ? function (elem, context, xml) {\r\n        var i = matchers.length;\r\n        while (i--) {\r\n          if (!matchers[i](elem, context, xml)) {\r\n            return false;\r\n          }\r\n        }\r\n        return true;\r\n      } : matchers[0];\r\n    }\r\n    function multipleContexts(selector, contexts, results) {\r\n      var i = 0, len = contexts.length;\r\n      for (; i < len; i++) {\r\n        Sizzle(selector, contexts[i], results);\r\n      }\r\n      return results;\r\n    }\r\n    function condense(unmatched, map, filter, context, xml) {\r\n      var elem, newUnmatched = [], i = 0, len = unmatched.length, mapped = map != null;\r\n      for (; i < len; i++) {\r\n        if (elem = unmatched[i]) {\r\n          if (!filter || filter(elem, context, xml)) {\r\n            newUnmatched.push(elem);\r\n            if (mapped) {\r\n              map.push(i);\r\n            }\r\n          }\r\n        }\r\n      }\r\n      return newUnmatched;\r\n    }\r\n    function setMatcher(preFilter, selector, matcher, postFilter, postFinder, postSelector) {\r\n      if (postFilter && !postFilter[expando]) {\r\n        postFilter = setMatcher(postFilter);\r\n      }\r\n      if (postFinder && !postFinder[expando]) {\r\n        postFinder = setMatcher(postFinder, postSelector);\r\n      }\r\n      return markFunction(function (seed, results, context, xml) {\r\n        var temp, i, elem, preMap = [], postMap = [], preexisting = results.length, elems = seed || multipleContexts(selector || '*', context.nodeType ? [context] : context, []), matcherIn = preFilter && (seed || !selector) ? condense(elems, preMap, preFilter, context, xml) : elems, matcherOut = matcher ? postFinder || (seed ? preFilter : preexisting || postFilter) ? [] : results : matcherIn;\r\n        if (matcher) {\r\n          matcher(matcherIn, matcherOut, context, xml);\r\n        }\r\n        if (postFilter) {\r\n          temp = condense(matcherOut, postMap);\r\n          postFilter(temp, [], context, xml);\r\n          i = temp.length;\r\n          while (i--) {\r\n            if (elem = temp[i]) {\r\n              matcherOut[postMap[i]] = !(matcherIn[postMap[i]] = elem);\r\n            }\r\n          }\r\n        }\r\n        if (seed) {\r\n          if (postFinder || preFilter) {\r\n            if (postFinder) {\r\n              temp = [];\r\n              i = matcherOut.length;\r\n              while (i--) {\r\n                if (elem = matcherOut[i]) {\r\n                  temp.push(matcherIn[i] = elem);\r\n                }\r\n              }\r\n              postFinder(null, matcherOut = [], temp, xml);\r\n            }\r\n            i = matcherOut.length;\r\n            while (i--) {\r\n              if ((elem = matcherOut[i]) && (temp = postFinder ? indexOf.call(seed, elem) : preMap[i]) > -1) {\r\n                seed[temp] = !(results[temp] = elem);\r\n              }\r\n            }\r\n          }\r\n        } else {\r\n          matcherOut = condense(matcherOut === results ? matcherOut.splice(preexisting, matcherOut.length) : matcherOut);\r\n          if (postFinder) {\r\n            postFinder(null, results, matcherOut, xml);\r\n          } else {\r\n            push$1.apply(results, matcherOut);\r\n          }\r\n        }\r\n      });\r\n    }\r\n    function matcherFromTokens(tokens) {\r\n      var checkContext, matcher, j, len = tokens.length, leadingRelative = Expr.relative[tokens[0].type], implicitRelative = leadingRelative || Expr.relative[' '], i = leadingRelative ? 1 : 0, matchContext = addCombinator(function (elem) {\r\n          return elem === checkContext;\r\n        }, implicitRelative, true), matchAnyContext = addCombinator(function (elem) {\r\n          return indexOf.call(checkContext, elem) > -1;\r\n        }, implicitRelative, true), matchers = [function (elem, context, xml) {\r\n            var ret = !leadingRelative && (xml || context !== outermostContext) || ((checkContext = context).nodeType ? matchContext(elem, context, xml) : matchAnyContext(elem, context, xml));\r\n            checkContext = null;\r\n            return ret;\r\n          }];\r\n      for (; i < len; i++) {\r\n        if (matcher = Expr.relative[tokens[i].type]) {\r\n          matchers = [addCombinator(elementMatcher(matchers), matcher)];\r\n        } else {\r\n          matcher = Expr.filter[tokens[i].type].apply(null, tokens[i].matches);\r\n          if (matcher[expando]) {\r\n            j = ++i;\r\n            for (; j < len; j++) {\r\n              if (Expr.relative[tokens[j].type]) {\r\n                break;\r\n              }\r\n            }\r\n            return setMatcher(i > 1 && elementMatcher(matchers), i > 1 && toSelector(tokens.slice(0, i - 1).concat({ value: tokens[i - 2].type === ' ' ? '*' : '' })).replace(rtrim, '$1'), matcher, i < j && matcherFromTokens(tokens.slice(i, j)), j < len && matcherFromTokens(tokens = tokens.slice(j)), j < len && toSelector(tokens));\r\n          }\r\n          matchers.push(matcher);\r\n        }\r\n      }\r\n      return elementMatcher(matchers);\r\n    }\r\n    function matcherFromGroupMatchers(elementMatchers, setMatchers) {\r\n      var bySet = setMatchers.length > 0, byElement = elementMatchers.length > 0, superMatcher = function (seed, context, xml, results, outermost) {\r\n          var elem, j, matcher, matchedCount = 0, i = '0', unmatched = seed && [], setMatched = [], contextBackup = outermostContext, elems = seed || byElement && Expr.find.TAG('*', outermost), dirrunsUnique = dirruns += contextBackup == null ? 1 : Math.random() || 0.1, len = elems.length;\r\n          if (outermost) {\r\n            outermostContext = context !== document$1 && context;\r\n          }\r\n          for (; i !== len && (elem = elems[i]) != null; i++) {\r\n            if (byElement && elem) {\r\n              j = 0;\r\n              while (matcher = elementMatchers[j++]) {\r\n                if (matcher(elem, context, xml)) {\r\n                  results.push(elem);\r\n                  break;\r\n                }\r\n              }\r\n              if (outermost) {\r\n                dirruns = dirrunsUnique;\r\n              }\r\n            }\r\n            if (bySet) {\r\n              if (elem = !matcher && elem) {\r\n                matchedCount--;\r\n              }\r\n              if (seed) {\r\n                unmatched.push(elem);\r\n              }\r\n            }\r\n          }\r\n          matchedCount += i;\r\n          if (bySet && i !== matchedCount) {\r\n            j = 0;\r\n            while (matcher = setMatchers[j++]) {\r\n              matcher(unmatched, setMatched, context, xml);\r\n            }\r\n            if (seed) {\r\n              if (matchedCount > 0) {\r\n                while (i--) {\r\n                  if (!(unmatched[i] || setMatched[i])) {\r\n                    setMatched[i] = pop.call(results);\r\n                  }\r\n                }\r\n              }\r\n              setMatched = condense(setMatched);\r\n            }\r\n            push$1.apply(results, setMatched);\r\n            if (outermost && !seed && setMatched.length > 0 && matchedCount + setMatchers.length > 1) {\r\n              Sizzle.uniqueSort(results);\r\n            }\r\n          }\r\n          if (outermost) {\r\n            dirruns = dirrunsUnique;\r\n            outermostContext = contextBackup;\r\n          }\r\n          return unmatched;\r\n        };\r\n      return bySet ? markFunction(superMatcher) : superMatcher;\r\n    }\r\n    compile = Sizzle.compile = function (selector, match) {\r\n      var i, setMatchers = [], elementMatchers = [], cached = compilerCache[selector + ' '];\r\n      if (!cached) {\r\n        if (!match) {\r\n          match = tokenize(selector);\r\n        }\r\n        i = match.length;\r\n        while (i--) {\r\n          cached = matcherFromTokens(match[i]);\r\n          if (cached[expando]) {\r\n            setMatchers.push(cached);\r\n          } else {\r\n            elementMatchers.push(cached);\r\n          }\r\n        }\r\n        cached = compilerCache(selector, matcherFromGroupMatchers(elementMatchers, setMatchers));\r\n        cached.selector = selector;\r\n      }\r\n      return cached;\r\n    };\r\n    select$1 = Sizzle.select = function (selector, context, results, seed) {\r\n      var i, tokens, token, type, find, compiled = typeof selector === 'function' && selector, match = !seed && tokenize(selector = compiled.selector || selector);\r\n      results = results || [];\r\n      if (match.length === 1) {\r\n        tokens = match[0] = match[0].slice(0);\r\n        if (tokens.length > 2 && (token = tokens[0]).type === 'ID' && support.getById && context.nodeType === 9 && documentIsHTML && Expr.relative[tokens[1].type]) {\r\n          context = (Expr.find.ID(token.matches[0].replace(runescape, funescape), context) || [])[0];\r\n          if (!context) {\r\n            return results;\r\n          } else if (compiled) {\r\n            context = context.parentNode;\r\n          }\r\n          selector = selector.slice(tokens.shift().value.length);\r\n        }\r\n        i = matchExpr.needsContext.test(selector) ? 0 : tokens.length;\r\n        while (i--) {\r\n          token = tokens[i];\r\n          if (Expr.relative[type = token.type]) {\r\n            break;\r\n          }\r\n          if (find = Expr.find[type]) {\r\n            if (seed = find(token.matches[0].replace(runescape, funescape), rsibling.test(tokens[0].type) && testContext(context.parentNode) || context)) {\r\n              tokens.splice(i, 1);\r\n              selector = seed.length && toSelector(tokens);\r\n              if (!selector) {\r\n                push$1.apply(results, seed);\r\n                return results;\r\n              }\r\n              break;\r\n            }\r\n          }\r\n        }\r\n      }\r\n      (compiled || compile(selector, match))(seed, context, !documentIsHTML, results, rsibling.test(selector) && testContext(context.parentNode) || context);\r\n      return results;\r\n    };\r\n    support.sortStable = expando.split('').sort(sortOrder).join('') === expando;\r\n    support.detectDuplicates = !!hasDuplicate;\r\n    setDocument();\r\n    support.sortDetached = true;\r\n\r\n    var doc = document;\r\n    var push = Array.prototype.push;\r\n    var slice = Array.prototype.slice;\r\n    var rquickExpr = /^(?:[^#<]*(<[\\w\\W]+>)[^>]*$|#([\\w\\-]*)$)/;\r\n    var Event$1 = EventUtils.Event;\r\n    var skipUniques = Tools.makeMap('children,contents,next,prev');\r\n    var isDefined = function (obj) {\r\n      return typeof obj !== 'undefined';\r\n    };\r\n    var isString = function (obj) {\r\n      return typeof obj === 'string';\r\n    };\r\n    var isWindow = function (obj) {\r\n      return obj && obj === obj.window;\r\n    };\r\n    var createFragment$1 = function (html, fragDoc) {\r\n      fragDoc = fragDoc || doc;\r\n      var container = fragDoc.createElement('div');\r\n      var frag = fragDoc.createDocumentFragment();\r\n      container.innerHTML = html;\r\n      var node;\r\n      while (node = container.firstChild) {\r\n        frag.appendChild(node);\r\n      }\r\n      return frag;\r\n    };\r\n    var domManipulate = function (targetNodes, sourceItem, callback, reverse) {\r\n      var i;\r\n      if (isString(sourceItem)) {\r\n        sourceItem = createFragment$1(sourceItem, getElementDocument(targetNodes[0]));\r\n      } else if (sourceItem.length && !sourceItem.nodeType) {\r\n        sourceItem = DomQuery.makeArray(sourceItem);\r\n        if (reverse) {\r\n          for (i = sourceItem.length - 1; i >= 0; i--) {\r\n            domManipulate(targetNodes, sourceItem[i], callback, reverse);\r\n          }\r\n        } else {\r\n          for (i = 0; i < sourceItem.length; i++) {\r\n            domManipulate(targetNodes, sourceItem[i], callback, reverse);\r\n          }\r\n        }\r\n        return targetNodes;\r\n      }\r\n      if (sourceItem.nodeType) {\r\n        i = targetNodes.length;\r\n        while (i--) {\r\n          callback.call(targetNodes[i], sourceItem);\r\n        }\r\n      }\r\n      return targetNodes;\r\n    };\r\n    var hasClass = function (node, className) {\r\n      return node && className && (' ' + node.className + ' ').indexOf(' ' + className + ' ') !== -1;\r\n    };\r\n    var wrap$2 = function (elements, wrapper, all) {\r\n      var lastParent, newWrapper;\r\n      wrapper = DomQuery(wrapper)[0];\r\n      elements.each(function () {\r\n        var self = this;\r\n        if (!all || lastParent !== self.parentNode) {\r\n          lastParent = self.parentNode;\r\n          newWrapper = wrapper.cloneNode(false);\r\n          self.parentNode.insertBefore(newWrapper, self);\r\n          newWrapper.appendChild(self);\r\n        } else {\r\n          newWrapper.appendChild(self);\r\n        }\r\n      });\r\n      return elements;\r\n    };\r\n    var numericCssMap = Tools.makeMap('fillOpacity fontWeight lineHeight opacity orphans widows zIndex zoom', ' ');\r\n    var booleanMap = Tools.makeMap('checked compact declare defer disabled ismap multiple nohref noshade nowrap readonly selected', ' ');\r\n    var propFix = {\r\n      for: 'htmlFor',\r\n      class: 'className',\r\n      readonly: 'readOnly'\r\n    };\r\n    var cssFix = { float: 'cssFloat' };\r\n    var attrHooks = {}, cssHooks = {};\r\n    var DomQueryConstructor = function (selector, context) {\r\n      return new DomQuery.fn.init(selector, context);\r\n    };\r\n    var inArray$1 = function (item, array) {\r\n      var i;\r\n      if (array.indexOf) {\r\n        return array.indexOf(item);\r\n      }\r\n      i = array.length;\r\n      while (i--) {\r\n        if (array[i] === item) {\r\n          return i;\r\n        }\r\n      }\r\n      return -1;\r\n    };\r\n    var whiteSpaceRegExp = /^\\s*|\\s*$/g;\r\n    var trim$1 = function (str) {\r\n      return str === null || str === undefined ? '' : ('' + str).replace(whiteSpaceRegExp, '');\r\n    };\r\n    var each$g = function (obj, callback) {\r\n      var length, key, i, value;\r\n      if (obj) {\r\n        length = obj.length;\r\n        if (length === undefined) {\r\n          for (key in obj) {\r\n            if (obj.hasOwnProperty(key)) {\r\n              value = obj[key];\r\n              if (callback.call(value, key, value) === false) {\r\n                break;\r\n              }\r\n            }\r\n          }\r\n        } else {\r\n          for (i = 0; i < length; i++) {\r\n            value = obj[i];\r\n            if (callback.call(value, i, value) === false) {\r\n              break;\r\n            }\r\n          }\r\n        }\r\n      }\r\n      return obj;\r\n    };\r\n    var grep$2 = function (array, callback) {\r\n      var out = [];\r\n      each$g(array, function (i, item) {\r\n        if (callback(item, i)) {\r\n          out.push(item);\r\n        }\r\n      });\r\n      return out;\r\n    };\r\n    var getElementDocument = function (element) {\r\n      if (!element) {\r\n        return doc;\r\n      }\r\n      if (element.nodeType === 9) {\r\n        return element;\r\n      }\r\n      return element.ownerDocument;\r\n    };\r\n    DomQueryConstructor.fn = DomQueryConstructor.prototype = {\r\n      constructor: DomQueryConstructor,\r\n      selector: '',\r\n      context: null,\r\n      length: 0,\r\n      init: function (selector, context) {\r\n        var self = this;\r\n        var match, node;\r\n        if (!selector) {\r\n          return self;\r\n        }\r\n        if (selector.nodeType) {\r\n          self.context = self[0] = selector;\r\n          self.length = 1;\r\n          return self;\r\n        }\r\n        if (context && context.nodeType) {\r\n          self.context = context;\r\n        } else {\r\n          if (context) {\r\n            return DomQuery(selector).attr(context);\r\n          }\r\n          self.context = context = document;\r\n        }\r\n        if (isString(selector)) {\r\n          self.selector = selector;\r\n          if (selector.charAt(0) === '<' && selector.charAt(selector.length - 1) === '>' && selector.length >= 3) {\r\n            match = [\r\n              null,\r\n              selector,\r\n              null\r\n            ];\r\n          } else {\r\n            match = rquickExpr.exec(selector);\r\n          }\r\n          if (match) {\r\n            if (match[1]) {\r\n              node = createFragment$1(selector, getElementDocument(context)).firstChild;\r\n              while (node) {\r\n                push.call(self, node);\r\n                node = node.nextSibling;\r\n              }\r\n            } else {\r\n              node = getElementDocument(context).getElementById(match[2]);\r\n              if (!node) {\r\n                return self;\r\n              }\r\n              if (node.id !== match[2]) {\r\n                return self.find(selector);\r\n              }\r\n              self.length = 1;\r\n              self[0] = node;\r\n            }\r\n          } else {\r\n            return DomQuery(context).find(selector);\r\n          }\r\n        } else {\r\n          this.add(selector, false);\r\n        }\r\n        return self;\r\n      },\r\n      toArray: function () {\r\n        return Tools.toArray(this);\r\n      },\r\n      add: function (items, sort) {\r\n        var self = this;\r\n        var nodes, i;\r\n        if (isString(items)) {\r\n          return self.add(DomQuery(items));\r\n        }\r\n        if (sort !== false) {\r\n          nodes = DomQuery.unique(self.toArray().concat(DomQuery.makeArray(items)));\r\n          self.length = nodes.length;\r\n          for (i = 0; i < nodes.length; i++) {\r\n            self[i] = nodes[i];\r\n          }\r\n        } else {\r\n          push.apply(self, DomQuery.makeArray(items));\r\n        }\r\n        return self;\r\n      },\r\n      attr: function (name, value) {\r\n        var self = this;\r\n        var hook;\r\n        if (typeof name === 'object') {\r\n          each$g(name, function (name, value) {\r\n            self.attr(name, value);\r\n          });\r\n        } else if (isDefined(value)) {\r\n          this.each(function () {\r\n            var hook;\r\n            if (this.nodeType === 1) {\r\n              hook = attrHooks[name];\r\n              if (hook && hook.set) {\r\n                hook.set(this, value);\r\n                return;\r\n              }\r\n              if (value === null) {\r\n                this.removeAttribute(name, 2);\r\n              } else {\r\n                this.setAttribute(name, value, 2);\r\n              }\r\n            }\r\n          });\r\n        } else {\r\n          if (self[0] && self[0].nodeType === 1) {\r\n            hook = attrHooks[name];\r\n            if (hook && hook.get) {\r\n              return hook.get(self[0], name);\r\n            }\r\n            if (booleanMap[name]) {\r\n              return self.prop(name) ? name : undefined;\r\n            }\r\n            value = self[0].getAttribute(name, 2);\r\n            if (value === null) {\r\n              value = undefined;\r\n            }\r\n          }\r\n          return value;\r\n        }\r\n        return self;\r\n      },\r\n      removeAttr: function (name) {\r\n        return this.attr(name, null);\r\n      },\r\n      prop: function (name, value) {\r\n        var self = this;\r\n        name = propFix[name] || name;\r\n        if (typeof name === 'object') {\r\n          each$g(name, function (name, value) {\r\n            self.prop(name, value);\r\n          });\r\n        } else if (isDefined(value)) {\r\n          this.each(function () {\r\n            if (this.nodeType === 1) {\r\n              this[name] = value;\r\n            }\r\n          });\r\n        } else {\r\n          if (self[0] && self[0].nodeType && name in self[0]) {\r\n            return self[0][name];\r\n          }\r\n          return value;\r\n        }\r\n        return self;\r\n      },\r\n      css: function (name, value) {\r\n        var self = this;\r\n        var elm, hook;\r\n        var camel = function (name) {\r\n          return name.replace(/-(\\D)/g, function (a, b) {\r\n            return b.toUpperCase();\r\n          });\r\n        };\r\n        var dashed = function (name) {\r\n          return name.replace(/[A-Z]/g, function (a) {\r\n            return '-' + a;\r\n          });\r\n        };\r\n        if (typeof name === 'object') {\r\n          each$g(name, function (name, value) {\r\n            self.css(name, value);\r\n          });\r\n        } else {\r\n          if (isDefined(value)) {\r\n            name = camel(name);\r\n            if (typeof value === 'number' && !numericCssMap[name]) {\r\n              value = value.toString() + 'px';\r\n            }\r\n            self.each(function () {\r\n              var style = this.style;\r\n              hook = cssHooks[name];\r\n              if (hook && hook.set) {\r\n                hook.set(this, value);\r\n                return;\r\n              }\r\n              try {\r\n                this.style[cssFix[name] || name] = value;\r\n              } catch (ex) {\r\n              }\r\n              if (value === null || value === '') {\r\n                if (style.removeProperty) {\r\n                  style.removeProperty(dashed(name));\r\n                } else {\r\n                  style.removeAttribute(name);\r\n                }\r\n              }\r\n            });\r\n          } else {\r\n            elm = self[0];\r\n            hook = cssHooks[name];\r\n            if (hook && hook.get) {\r\n              return hook.get(elm);\r\n            }\r\n            if (elm.ownerDocument.defaultView) {\r\n              try {\r\n                return elm.ownerDocument.defaultView.getComputedStyle(elm, null).getPropertyValue(dashed(name));\r\n              } catch (ex) {\r\n                return undefined;\r\n              }\r\n            } else if (elm.currentStyle) {\r\n              return elm.currentStyle[camel(name)];\r\n            } else {\r\n              return '';\r\n            }\r\n          }\r\n        }\r\n        return self;\r\n      },\r\n      remove: function () {\r\n        var self = this;\r\n        var node, i = this.length;\r\n        while (i--) {\r\n          node = self[i];\r\n          Event$1.clean(node);\r\n          if (node.parentNode) {\r\n            node.parentNode.removeChild(node);\r\n          }\r\n        }\r\n        return this;\r\n      },\r\n      empty: function () {\r\n        var self = this;\r\n        var node, i = this.length;\r\n        while (i--) {\r\n          node = self[i];\r\n          while (node.firstChild) {\r\n            node.removeChild(node.firstChild);\r\n          }\r\n        }\r\n        return this;\r\n      },\r\n      html: function (value) {\r\n        var self = this;\r\n        var i;\r\n        if (isDefined(value)) {\r\n          i = self.length;\r\n          try {\r\n            while (i--) {\r\n              self[i].innerHTML = value;\r\n            }\r\n          } catch (ex) {\r\n            DomQuery(self[i]).empty().append(value);\r\n          }\r\n          return self;\r\n        }\r\n        return self[0] ? self[0].innerHTML : '';\r\n      },\r\n      text: function (value) {\r\n        var self = this;\r\n        var i;\r\n        if (isDefined(value)) {\r\n          i = self.length;\r\n          while (i--) {\r\n            if ('innerText' in self[i]) {\r\n              self[i].innerText = value;\r\n            } else {\r\n              self[0].textContent = value;\r\n            }\r\n          }\r\n          return self;\r\n        }\r\n        return self[0] ? self[0].innerText || self[0].textContent : '';\r\n      },\r\n      append: function () {\r\n        return domManipulate(this, arguments, function (node) {\r\n          if (this.nodeType === 1 || this.host && this.host.nodeType === 1) {\r\n            this.appendChild(node);\r\n          }\r\n        });\r\n      },\r\n      prepend: function () {\r\n        return domManipulate(this, arguments, function (node) {\r\n          if (this.nodeType === 1 || this.host && this.host.nodeType === 1) {\r\n            this.insertBefore(node, this.firstChild);\r\n          }\r\n        }, true);\r\n      },\r\n      before: function () {\r\n        var self = this;\r\n        if (self[0] && self[0].parentNode) {\r\n          return domManipulate(self, arguments, function (node) {\r\n            this.parentNode.insertBefore(node, this);\r\n          });\r\n        }\r\n        return self;\r\n      },\r\n      after: function () {\r\n        var self = this;\r\n        if (self[0] && self[0].parentNode) {\r\n          return domManipulate(self, arguments, function (node) {\r\n            this.parentNode.insertBefore(node, this.nextSibling);\r\n          }, true);\r\n        }\r\n        return self;\r\n      },\r\n      appendTo: function (val) {\r\n        DomQuery(val).append(this);\r\n        return this;\r\n      },\r\n      prependTo: function (val) {\r\n        DomQuery(val).prepend(this);\r\n        return this;\r\n      },\r\n      replaceWith: function (content) {\r\n        return this.before(content).remove();\r\n      },\r\n      wrap: function (content) {\r\n        return wrap$2(this, content);\r\n      },\r\n      wrapAll: function (content) {\r\n        return wrap$2(this, content, true);\r\n      },\r\n      wrapInner: function (content) {\r\n        this.each(function () {\r\n          DomQuery(this).contents().wrapAll(content);\r\n        });\r\n        return this;\r\n      },\r\n      unwrap: function () {\r\n        return this.parent().each(function () {\r\n          DomQuery(this).replaceWith(this.childNodes);\r\n        });\r\n      },\r\n      clone: function () {\r\n        var result = [];\r\n        this.each(function () {\r\n          result.push(this.cloneNode(true));\r\n        });\r\n        return DomQuery(result);\r\n      },\r\n      addClass: function (className) {\r\n        return this.toggleClass(className, true);\r\n      },\r\n      removeClass: function (className) {\r\n        return this.toggleClass(className, false);\r\n      },\r\n      toggleClass: function (className, state) {\r\n        var self = this;\r\n        if (typeof className !== 'string') {\r\n          return self;\r\n        }\r\n        if (className.indexOf(' ') !== -1) {\r\n          each$g(className.split(' '), function () {\r\n            self.toggleClass(this, state);\r\n          });\r\n        } else {\r\n          self.each(function (index, node) {\r\n            var classState = hasClass(node, className);\r\n            if (classState !== state) {\r\n              var existingClassName = node.className;\r\n              if (classState) {\r\n                node.className = trim$1((' ' + existingClassName + ' ').replace(' ' + className + ' ', ' '));\r\n              } else {\r\n                node.className += existingClassName ? ' ' + className : className;\r\n              }\r\n            }\r\n          });\r\n        }\r\n        return self;\r\n      },\r\n      hasClass: function (className) {\r\n        return hasClass(this[0], className);\r\n      },\r\n      each: function (callback) {\r\n        return each$g(this, callback);\r\n      },\r\n      on: function (name, callback) {\r\n        return this.each(function () {\r\n          Event$1.bind(this, name, callback);\r\n        });\r\n      },\r\n      off: function (name, callback) {\r\n        return this.each(function () {\r\n          Event$1.unbind(this, name, callback);\r\n        });\r\n      },\r\n      trigger: function (name) {\r\n        return this.each(function () {\r\n          if (typeof name === 'object') {\r\n            Event$1.fire(this, name.type, name);\r\n          } else {\r\n            Event$1.fire(this, name);\r\n          }\r\n        });\r\n      },\r\n      show: function () {\r\n        return this.css('display', '');\r\n      },\r\n      hide: function () {\r\n        return this.css('display', 'none');\r\n      },\r\n      slice: function () {\r\n        return DomQuery(slice.apply(this, arguments));\r\n      },\r\n      eq: function (index) {\r\n        return index === -1 ? this.slice(index) : this.slice(index, +index + 1);\r\n      },\r\n      first: function () {\r\n        return this.eq(0);\r\n      },\r\n      last: function () {\r\n        return this.eq(-1);\r\n      },\r\n      find: function (selector) {\r\n        var i, l;\r\n        var ret = [];\r\n        for (i = 0, l = this.length; i < l; i++) {\r\n          DomQuery.find(selector, this[i], ret);\r\n        }\r\n        return DomQuery(ret);\r\n      },\r\n      filter: function (selector) {\r\n        if (typeof selector === 'function') {\r\n          return DomQuery(grep$2(this.toArray(), function (item, i) {\r\n            return selector(i, item);\r\n          }));\r\n        }\r\n        return DomQuery(DomQuery.filter(selector, this.toArray()));\r\n      },\r\n      closest: function (selector) {\r\n        var result = [];\r\n        if (selector instanceof DomQuery) {\r\n          selector = selector[0];\r\n        }\r\n        this.each(function (i, node) {\r\n          while (node) {\r\n            if (typeof selector === 'string' && DomQuery(node).is(selector)) {\r\n              result.push(node);\r\n              break;\r\n            } else if (node === selector) {\r\n              result.push(node);\r\n              break;\r\n            }\r\n            node = node.parentNode;\r\n          }\r\n        });\r\n        return DomQuery(result);\r\n      },\r\n      offset: function (offset) {\r\n        var elm, doc, docElm;\r\n        var x = 0, y = 0, pos;\r\n        if (!offset) {\r\n          elm = this[0];\r\n          if (elm) {\r\n            doc = elm.ownerDocument;\r\n            docElm = doc.documentElement;\r\n            if (elm.getBoundingClientRect) {\r\n              pos = elm.getBoundingClientRect();\r\n              x = pos.left + (docElm.scrollLeft || doc.body.scrollLeft) - docElm.clientLeft;\r\n              y = pos.top + (docElm.scrollTop || doc.body.scrollTop) - docElm.clientTop;\r\n            }\r\n          }\r\n          return {\r\n            left: x,\r\n            top: y\r\n          };\r\n        }\r\n        return this.css(offset);\r\n      },\r\n      push: push,\r\n      sort: Array.prototype.sort,\r\n      splice: Array.prototype.splice\r\n    };\r\n    Tools.extend(DomQueryConstructor, {\r\n      extend: Tools.extend,\r\n      makeArray: function (object) {\r\n        if (isWindow(object) || object.nodeType) {\r\n          return [object];\r\n        }\r\n        return Tools.toArray(object);\r\n      },\r\n      inArray: inArray$1,\r\n      isArray: Tools.isArray,\r\n      each: each$g,\r\n      trim: trim$1,\r\n      grep: grep$2,\r\n      find: Sizzle,\r\n      expr: Sizzle.selectors,\r\n      unique: Sizzle.uniqueSort,\r\n      text: Sizzle.getText,\r\n      contains: Sizzle.contains,\r\n      filter: function (expr, elems, not) {\r\n        var i = elems.length;\r\n        if (not) {\r\n          expr = ':not(' + expr + ')';\r\n        }\r\n        while (i--) {\r\n          if (elems[i].nodeType !== 1) {\r\n            elems.splice(i, 1);\r\n          }\r\n        }\r\n        if (elems.length === 1) {\r\n          elems = DomQuery.find.matchesSelector(elems[0], expr) ? [elems[0]] : [];\r\n        } else {\r\n          elems = DomQuery.find.matches(expr, elems);\r\n        }\r\n        return elems;\r\n      }\r\n    });\r\n    var dir = function (el, prop, until) {\r\n      var matched = [];\r\n      var cur = el[prop];\r\n      if (typeof until !== 'string' && until instanceof DomQuery) {\r\n        until = until[0];\r\n      }\r\n      while (cur && cur.nodeType !== 9) {\r\n        if (until !== undefined) {\r\n          if (cur === until) {\r\n            break;\r\n          }\r\n          if (typeof until === 'string' && DomQuery(cur).is(until)) {\r\n            break;\r\n          }\r\n        }\r\n        if (cur.nodeType === 1) {\r\n          matched.push(cur);\r\n        }\r\n        cur = cur[prop];\r\n      }\r\n      return matched;\r\n    };\r\n    var sibling$1 = function (node, siblingName, nodeType, until) {\r\n      var result = [];\r\n      if (until instanceof DomQuery) {\r\n        until = until[0];\r\n      }\r\n      for (; node; node = node[siblingName]) {\r\n        if (nodeType && node.nodeType !== nodeType) {\r\n          continue;\r\n        }\r\n        if (until !== undefined) {\r\n          if (node === until) {\r\n            break;\r\n          }\r\n          if (typeof until === 'string' && DomQuery(node).is(until)) {\r\n            break;\r\n          }\r\n        }\r\n        result.push(node);\r\n      }\r\n      return result;\r\n    };\r\n    var firstSibling = function (node, siblingName, nodeType) {\r\n      for (node = node[siblingName]; node; node = node[siblingName]) {\r\n        if (node.nodeType === nodeType) {\r\n          return node;\r\n        }\r\n      }\r\n      return null;\r\n    };\r\n    each$g({\r\n      parent: function (node) {\r\n        var parent = node.parentNode;\r\n        return parent && parent.nodeType !== 11 ? parent : null;\r\n      },\r\n      parents: function (node) {\r\n        return dir(node, 'parentNode');\r\n      },\r\n      next: function (node) {\r\n        return firstSibling(node, 'nextSibling', 1);\r\n      },\r\n      prev: function (node) {\r\n        return firstSibling(node, 'previousSibling', 1);\r\n      },\r\n      children: function (node) {\r\n        return sibling$1(node.firstChild, 'nextSibling', 1);\r\n      },\r\n      contents: function (node) {\r\n        return Tools.toArray((node.nodeName === 'iframe' ? node.contentDocument || node.contentWindow.document : node).childNodes);\r\n      }\r\n    }, function (name, fn) {\r\n      DomQueryConstructor.fn[name] = function (selector) {\r\n        var self = this;\r\n        var result = [];\r\n        self.each(function () {\r\n          var nodes = fn.call(result, this, selector, result);\r\n          if (nodes) {\r\n            if (DomQuery.isArray(nodes)) {\r\n              result.push.apply(result, nodes);\r\n            } else {\r\n              result.push(nodes);\r\n            }\r\n          }\r\n        });\r\n        if (this.length > 1) {\r\n          if (!skipUniques[name]) {\r\n            result = DomQuery.unique(result);\r\n          }\r\n          if (name.indexOf('parents') === 0) {\r\n            result = result.reverse();\r\n          }\r\n        }\r\n        var wrappedResult = DomQuery(result);\r\n        if (selector) {\r\n          return wrappedResult.filter(selector);\r\n        }\r\n        return wrappedResult;\r\n      };\r\n    });\r\n    each$g({\r\n      parentsUntil: function (node, until) {\r\n        return dir(node, 'parentNode', until);\r\n      },\r\n      nextUntil: function (node, until) {\r\n        return sibling$1(node, 'nextSibling', 1, until).slice(1);\r\n      },\r\n      prevUntil: function (node, until) {\r\n        return sibling$1(node, 'previousSibling', 1, until).slice(1);\r\n      }\r\n    }, function (name, fn) {\r\n      DomQueryConstructor.fn[name] = function (selector, filter) {\r\n        var self = this;\r\n        var result = [];\r\n        self.each(function () {\r\n          var nodes = fn.call(result, this, selector, result);\r\n          if (nodes) {\r\n            if (DomQuery.isArray(nodes)) {\r\n              result.push.apply(result, nodes);\r\n            } else {\r\n              result.push(nodes);\r\n            }\r\n          }\r\n        });\r\n        if (this.length > 1) {\r\n          result = DomQuery.unique(result);\r\n          if (name.indexOf('parents') === 0 || name === 'prevUntil') {\r\n            result = result.reverse();\r\n          }\r\n        }\r\n        var wrappedResult = DomQuery(result);\r\n        if (filter) {\r\n          return wrappedResult.filter(filter);\r\n        }\r\n        return wrappedResult;\r\n      };\r\n    });\r\n    DomQueryConstructor.fn.is = function (selector) {\r\n      return !!selector && this.filter(selector).length > 0;\r\n    };\r\n    DomQueryConstructor.fn.init.prototype = DomQueryConstructor.fn;\r\n    DomQueryConstructor.overrideDefaults = function (callback) {\r\n      var defaults;\r\n      var sub = function (selector, context) {\r\n        defaults = defaults || callback();\r\n        if (arguments.length === 0) {\r\n          selector = defaults.element;\r\n        }\r\n        if (!context) {\r\n          context = defaults.context;\r\n        }\r\n        return new sub.fn.init(selector, context);\r\n      };\r\n      DomQuery.extend(sub, this);\r\n      return sub;\r\n    };\r\n    DomQueryConstructor.attrHooks = attrHooks;\r\n    DomQueryConstructor.cssHooks = cssHooks;\r\n    var DomQuery = DomQueryConstructor;\r\n\r\n    var each$f = Tools.each;\r\n    var grep$1 = Tools.grep;\r\n    var isIE = Env.ie;\r\n    var simpleSelectorRe = /^([a-z0-9],?)+$/i;\r\n    var setupAttrHooks = function (styles, settings, getContext) {\r\n      var keepValues = settings.keep_values;\r\n      var keepUrlHook = {\r\n        set: function ($elm, value, name) {\r\n          if (settings.url_converter && value !== null) {\r\n            value = settings.url_converter.call(settings.url_converter_scope || getContext(), value, name, $elm[0]);\r\n          }\r\n          $elm.attr('data-mce-' + name, value).attr(name, value);\r\n        },\r\n        get: function ($elm, name) {\r\n          return $elm.attr('data-mce-' + name) || $elm.attr(name);\r\n        }\r\n      };\r\n      var attrHooks = {\r\n        style: {\r\n          set: function ($elm, value) {\r\n            if (value !== null && typeof value === 'object') {\r\n              $elm.css(value);\r\n              return;\r\n            }\r\n            if (keepValues) {\r\n              $elm.attr('data-mce-style', value);\r\n            }\r\n            if (value !== null && typeof value === 'string') {\r\n              $elm.removeAttr('style');\r\n              $elm.css(styles.parse(value));\r\n            } else {\r\n              $elm.attr('style', value);\r\n            }\r\n          },\r\n          get: function ($elm) {\r\n            var value = $elm.attr('data-mce-style') || $elm.attr('style');\r\n            value = styles.serialize(styles.parse(value), $elm[0].nodeName);\r\n            return value;\r\n          }\r\n        }\r\n      };\r\n      if (keepValues) {\r\n        attrHooks.href = attrHooks.src = keepUrlHook;\r\n      }\r\n      return attrHooks;\r\n    };\r\n    var updateInternalStyleAttr = function (styles, $elm) {\r\n      var rawValue = $elm.attr('style');\r\n      var value = styles.serialize(styles.parse(rawValue), $elm[0].nodeName);\r\n      if (!value) {\r\n        value = null;\r\n      }\r\n      $elm.attr('data-mce-style', value);\r\n    };\r\n    var findNodeIndex = function (node, normalized) {\r\n      var idx = 0, lastNodeType, nodeType;\r\n      if (node) {\r\n        for (lastNodeType = node.nodeType, node = node.previousSibling; node; node = node.previousSibling) {\r\n          nodeType = node.nodeType;\r\n          if (normalized && nodeType === 3) {\r\n            if (nodeType === lastNodeType || !node.nodeValue.length) {\r\n              continue;\r\n            }\r\n          }\r\n          idx++;\r\n          lastNodeType = nodeType;\r\n        }\r\n      }\r\n      return idx;\r\n    };\r\n    var DOMUtils = function (doc, settings) {\r\n      if (settings === void 0) {\r\n        settings = {};\r\n      }\r\n      var addedStyles = {};\r\n      var win = window;\r\n      var files = {};\r\n      var counter = 0;\r\n      var stdMode = true;\r\n      var boxModel = true;\r\n      var styleSheetLoader = instance.forElement(SugarElement.fromDom(doc), {\r\n        contentCssCors: settings.contentCssCors,\r\n        referrerPolicy: settings.referrerPolicy\r\n      });\r\n      var boundEvents = [];\r\n      var schema = settings.schema ? settings.schema : Schema({});\r\n      var styles = Styles({\r\n        url_converter: settings.url_converter,\r\n        url_converter_scope: settings.url_converter_scope\r\n      }, settings.schema);\r\n      var events = settings.ownEvents ? new EventUtils() : EventUtils.Event;\r\n      var blockElementsMap = schema.getBlockElements();\r\n      var $ = DomQuery.overrideDefaults(function () {\r\n        return {\r\n          context: doc,\r\n          element: self.getRoot()\r\n        };\r\n      });\r\n      var isBlock = function (node) {\r\n        if (typeof node === 'string') {\r\n          return !!blockElementsMap[node];\r\n        } else if (node) {\r\n          var type = node.nodeType;\r\n          if (type) {\r\n            return !!(type === 1 && blockElementsMap[node.nodeName]);\r\n          }\r\n        }\r\n        return false;\r\n      };\r\n      var get = function (elm) {\r\n        return elm && doc && isString$1(elm) ? doc.getElementById(elm) : elm;\r\n      };\r\n      var $$ = function (elm) {\r\n        return $(typeof elm === 'string' ? get(elm) : elm);\r\n      };\r\n      var getAttrib = function (elm, name, defaultVal) {\r\n        var hook, value;\r\n        var $elm = $$(elm);\r\n        if ($elm.length) {\r\n          hook = attrHooks[name];\r\n          if (hook && hook.get) {\r\n            value = hook.get($elm, name);\r\n          } else {\r\n            value = $elm.attr(name);\r\n          }\r\n        }\r\n        if (typeof value === 'undefined') {\r\n          value = defaultVal || '';\r\n        }\r\n        return value;\r\n      };\r\n      var getAttribs = function (elm) {\r\n        var node = get(elm);\r\n        if (!node) {\r\n          return [];\r\n        }\r\n        return node.attributes;\r\n      };\r\n      var setAttrib = function (elm, name, value) {\r\n        if (value === '') {\r\n          value = null;\r\n        }\r\n        var $elm = $$(elm);\r\n        var originalValue = $elm.attr(name);\r\n        if (!$elm.length) {\r\n          return;\r\n        }\r\n        var hook = attrHooks[name];\r\n        if (hook && hook.set) {\r\n          hook.set($elm, value, name);\r\n        } else {\r\n          $elm.attr(name, value);\r\n        }\r\n        if (originalValue !== value && settings.onSetAttrib) {\r\n          settings.onSetAttrib({\r\n            attrElm: $elm,\r\n            attrName: name,\r\n            attrValue: value\r\n          });\r\n        }\r\n      };\r\n      var clone = function (node, deep) {\r\n        if (!isIE || node.nodeType !== 1 || deep) {\r\n          return node.cloneNode(deep);\r\n        } else {\r\n          var clone_1 = doc.createElement(node.nodeName);\r\n          each$f(getAttribs(node), function (attr) {\r\n            setAttrib(clone_1, attr.nodeName, getAttrib(node, attr.nodeName));\r\n          });\r\n          return clone_1;\r\n        }\r\n      };\r\n      var getRoot = function () {\r\n        return settings.root_element || doc.body;\r\n      };\r\n      var getViewPort = function (argWin) {\r\n        var vp = getBounds(argWin);\r\n        return {\r\n          x: vp.x,\r\n          y: vp.y,\r\n          w: vp.width,\r\n          h: vp.height\r\n        };\r\n      };\r\n      var getPos$1 = function (elm, rootElm) {\r\n        return getPos(doc.body, get(elm), rootElm);\r\n      };\r\n      var setStyle = function (elm, name, value) {\r\n        var $elm = isString$1(name) ? $$(elm).css(name, value) : $$(elm).css(name);\r\n        if (settings.update_styles) {\r\n          updateInternalStyleAttr(styles, $elm);\r\n        }\r\n      };\r\n      var setStyles = function (elm, stylesArg) {\r\n        var $elm = $$(elm).css(stylesArg);\r\n        if (settings.update_styles) {\r\n          updateInternalStyleAttr(styles, $elm);\r\n        }\r\n      };\r\n      var getStyle = function (elm, name, computed) {\r\n        var $elm = $$(elm);\r\n        if (computed) {\r\n          return $elm.css(name);\r\n        }\r\n        name = name.replace(/-(\\D)/g, function (a, b) {\r\n          return b.toUpperCase();\r\n        });\r\n        if (name === 'float') {\r\n          name = Env.browser.isIE() ? 'styleFloat' : 'cssFloat';\r\n        }\r\n        return $elm[0] && $elm[0].style ? $elm[0].style[name] : undefined;\r\n      };\r\n      var getSize = function (elm) {\r\n        var w, h;\r\n        elm = get(elm);\r\n        w = getStyle(elm, 'width');\r\n        h = getStyle(elm, 'height');\r\n        if (w.indexOf('px') === -1) {\r\n          w = 0;\r\n        }\r\n        if (h.indexOf('px') === -1) {\r\n          h = 0;\r\n        }\r\n        return {\r\n          w: parseInt(w, 10) || elm.offsetWidth || elm.clientWidth,\r\n          h: parseInt(h, 10) || elm.offsetHeight || elm.clientHeight\r\n        };\r\n      };\r\n      var getRect = function (elm) {\r\n        elm = get(elm);\r\n        var pos = getPos$1(elm);\r\n        var size = getSize(elm);\r\n        return {\r\n          x: pos.x,\r\n          y: pos.y,\r\n          w: size.w,\r\n          h: size.h\r\n        };\r\n      };\r\n      var is = function (elm, selector) {\r\n        var i;\r\n        if (!elm) {\r\n          return false;\r\n        }\r\n        if (!Array.isArray(elm)) {\r\n          if (selector === '*') {\r\n            return elm.nodeType === 1;\r\n          }\r\n          if (simpleSelectorRe.test(selector)) {\r\n            var selectors = selector.toLowerCase().split(/,/);\r\n            var elmName = elm.nodeName.toLowerCase();\r\n            for (i = selectors.length - 1; i >= 0; i--) {\r\n              if (selectors[i] === elmName) {\r\n                return true;\r\n              }\r\n            }\r\n            return false;\r\n          }\r\n          if (elm.nodeType && elm.nodeType !== 1) {\r\n            return false;\r\n          }\r\n        }\r\n        var elms = !Array.isArray(elm) ? [elm] : elm;\r\n        return Sizzle(selector, elms[0].ownerDocument || elms[0], null, elms).length > 0;\r\n      };\r\n      var getParents = function (elm, selector, root, collect) {\r\n        var result = [];\r\n        var selectorVal;\r\n        var node = get(elm);\r\n        collect = collect === undefined;\r\n        root = root || (getRoot().nodeName !== 'BODY' ? getRoot().parentNode : null);\r\n        if (Tools.is(selector, 'string')) {\r\n          selectorVal = selector;\r\n          if (selector === '*') {\r\n            selector = function (node) {\r\n              return node.nodeType === 1;\r\n            };\r\n          } else {\r\n            selector = function (node) {\r\n              return is(node, selectorVal);\r\n            };\r\n          }\r\n        }\r\n        while (node) {\r\n          if (node === root || isNullable(node.nodeType) || isDocument$1(node) || isDocumentFragment(node)) {\r\n            break;\r\n          }\r\n          if (!selector || typeof selector === 'function' && selector(node)) {\r\n            if (collect) {\r\n              result.push(node);\r\n            } else {\r\n              return [node];\r\n            }\r\n          }\r\n          node = node.parentNode;\r\n        }\r\n        return collect ? result : null;\r\n      };\r\n      var getParent = function (node, selector, root) {\r\n        var parents = getParents(node, selector, root, false);\r\n        return parents && parents.length > 0 ? parents[0] : null;\r\n      };\r\n      var _findSib = function (node, selector, name) {\r\n        var func = selector;\r\n        if (node) {\r\n          if (typeof selector === 'string') {\r\n            func = function (node) {\r\n              return is(node, selector);\r\n            };\r\n          }\r\n          for (node = node[name]; node; node = node[name]) {\r\n            if (typeof func === 'function' && func(node)) {\r\n              return node;\r\n            }\r\n          }\r\n        }\r\n        return null;\r\n      };\r\n      var getNext = function (node, selector) {\r\n        return _findSib(node, selector, 'nextSibling');\r\n      };\r\n      var getPrev = function (node, selector) {\r\n        return _findSib(node, selector, 'previousSibling');\r\n      };\r\n      var select = function (selector, scope) {\r\n        return Sizzle(selector, get(scope) || settings.root_element || doc, []);\r\n      };\r\n      var run = function (elm, func, scope) {\r\n        var result;\r\n        var node = typeof elm === 'string' ? get(elm) : elm;\r\n        if (!node) {\r\n          return false;\r\n        }\r\n        if (Tools.isArray(node) && (node.length || node.length === 0)) {\r\n          result = [];\r\n          each$f(node, function (elm, i) {\r\n            if (elm) {\r\n              result.push(func.call(scope, typeof elm === 'string' ? get(elm) : elm, i));\r\n            }\r\n          });\r\n          return result;\r\n        }\r\n        var context = scope ? scope : this;\r\n        return func.call(context, node);\r\n      };\r\n      var setAttribs = function (elm, attrs) {\r\n        $$(elm).each(function (i, node) {\r\n          each$f(attrs, function (value, name) {\r\n            setAttrib(node, name, value);\r\n          });\r\n        });\r\n      };\r\n      var setHTML = function (elm, html) {\r\n        var $elm = $$(elm);\r\n        if (isIE) {\r\n          $elm.each(function (i, target) {\r\n            if (target.canHaveHTML === false) {\r\n              return;\r\n            }\r\n            while (target.firstChild) {\r\n              target.removeChild(target.firstChild);\r\n            }\r\n            try {\r\n              target.innerHTML = '<br>' + html;\r\n              target.removeChild(target.firstChild);\r\n            } catch (ex) {\r\n              DomQuery('<div></div>').html('<br>' + html).contents().slice(1).appendTo(target);\r\n            }\r\n            return html;\r\n          });\r\n        } else {\r\n          $elm.html(html);\r\n        }\r\n      };\r\n      var add = function (parentElm, name, attrs, html, create) {\r\n        return run(parentElm, function (parentElm) {\r\n          var newElm = typeof name === 'string' ? doc.createElement(name) : name;\r\n          setAttribs(newElm, attrs);\r\n          if (html) {\r\n            if (typeof html !== 'string' && html.nodeType) {\r\n              newElm.appendChild(html);\r\n            } else if (typeof html === 'string') {\r\n              setHTML(newElm, html);\r\n            }\r\n          }\r\n          return !create ? parentElm.appendChild(newElm) : newElm;\r\n        });\r\n      };\r\n      var create = function (name, attrs, html) {\r\n        return add(doc.createElement(name), name, attrs, html, true);\r\n      };\r\n      var decode = Entities.decode;\r\n      var encode = Entities.encodeAllRaw;\r\n      var createHTML = function (name, attrs, html) {\r\n        var outHtml = '', key;\r\n        outHtml += '<' + name;\r\n        for (key in attrs) {\r\n          if (hasNonNullableKey(attrs, key)) {\r\n            outHtml += ' ' + key + '=\"' + encode(attrs[key]) + '\"';\r\n          }\r\n        }\r\n        if (typeof html !== 'undefined') {\r\n          return outHtml + '>' + html + '</' + name + '>';\r\n        }\r\n        return outHtml + ' />';\r\n      };\r\n      var createFragment = function (html) {\r\n        var node;\r\n        var container = doc.createElement('div');\r\n        var frag = doc.createDocumentFragment();\r\n        frag.appendChild(container);\r\n        if (html) {\r\n          container.innerHTML = html;\r\n        }\r\n        while (node = container.firstChild) {\r\n          frag.appendChild(node);\r\n        }\r\n        frag.removeChild(container);\r\n        return frag;\r\n      };\r\n      var remove = function (node, keepChildren) {\r\n        var $node = $$(node);\r\n        if (keepChildren) {\r\n          $node.each(function () {\r\n            var child;\r\n            while (child = this.firstChild) {\r\n              if (child.nodeType === 3 && child.data.length === 0) {\r\n                this.removeChild(child);\r\n              } else {\r\n                this.parentNode.insertBefore(child, this);\r\n              }\r\n            }\r\n          }).remove();\r\n        } else {\r\n          $node.remove();\r\n        }\r\n        return $node.length > 1 ? $node.toArray() : $node[0];\r\n      };\r\n      var removeAllAttribs = function (e) {\r\n        return run(e, function (e) {\r\n          var i;\r\n          var attrs = e.attributes;\r\n          for (i = attrs.length - 1; i >= 0; i--) {\r\n            e.removeAttributeNode(attrs.item(i));\r\n          }\r\n        });\r\n      };\r\n      var parseStyle = function (cssText) {\r\n        return styles.parse(cssText);\r\n      };\r\n      var serializeStyle = function (stylesArg, name) {\r\n        return styles.serialize(stylesArg, name);\r\n      };\r\n      var addStyle = function (cssText) {\r\n        var head, styleElm;\r\n        if (self !== DOMUtils.DOM && doc === document) {\r\n          if (addedStyles[cssText]) {\r\n            return;\r\n          }\r\n          addedStyles[cssText] = true;\r\n        }\r\n        styleElm = doc.getElementById('mceDefaultStyles');\r\n        if (!styleElm) {\r\n          styleElm = doc.createElement('style');\r\n          styleElm.id = 'mceDefaultStyles';\r\n          styleElm.type = 'text/css';\r\n          head = doc.getElementsByTagName('head')[0];\r\n          if (head.firstChild) {\r\n            head.insertBefore(styleElm, head.firstChild);\r\n          } else {\r\n            head.appendChild(styleElm);\r\n          }\r\n        }\r\n        if (styleElm.styleSheet) {\r\n          styleElm.styleSheet.cssText += cssText;\r\n        } else {\r\n          styleElm.appendChild(doc.createTextNode(cssText));\r\n        }\r\n      };\r\n      var loadCSS = function (urls) {\r\n        if (!urls) {\r\n          urls = '';\r\n        }\r\n        each$k(urls.split(','), function (url) {\r\n          files[url] = true;\r\n          styleSheetLoader.load(url, noop);\r\n        });\r\n      };\r\n      var toggleClass = function (elm, cls, state) {\r\n        $$(elm).toggleClass(cls, state).each(function () {\r\n          if (this.className === '') {\r\n            DomQuery(this).attr('class', null);\r\n          }\r\n        });\r\n      };\r\n      var addClass = function (elm, cls) {\r\n        $$(elm).addClass(cls);\r\n      };\r\n      var removeClass = function (elm, cls) {\r\n        toggleClass(elm, cls, false);\r\n      };\r\n      var hasClass = function (elm, cls) {\r\n        return $$(elm).hasClass(cls);\r\n      };\r\n      var show = function (elm) {\r\n        $$(elm).show();\r\n      };\r\n      var hide = function (elm) {\r\n        $$(elm).hide();\r\n      };\r\n      var isHidden = function (elm) {\r\n        return $$(elm).css('display') === 'none';\r\n      };\r\n      var uniqueId = function (prefix) {\r\n        return (!prefix ? 'mce_' : prefix) + counter++;\r\n      };\r\n      var getOuterHTML = function (elm) {\r\n        var node = typeof elm === 'string' ? get(elm) : elm;\r\n        return isElement$5(node) ? node.outerHTML : DomQuery('<div></div>').append(DomQuery(node).clone()).html();\r\n      };\r\n      var setOuterHTML = function (elm, html) {\r\n        $$(elm).each(function () {\r\n          try {\r\n            if ('outerHTML' in this) {\r\n              this.outerHTML = html;\r\n              return;\r\n            }\r\n          } catch (ex) {\r\n          }\r\n          remove(DomQuery(this).html(html), true);\r\n        });\r\n      };\r\n      var insertAfter = function (node, reference) {\r\n        var referenceNode = get(reference);\r\n        return run(node, function (node) {\r\n          var parent = referenceNode.parentNode;\r\n          var nextSibling = referenceNode.nextSibling;\r\n          if (nextSibling) {\r\n            parent.insertBefore(node, nextSibling);\r\n          } else {\r\n            parent.appendChild(node);\r\n          }\r\n          return node;\r\n        });\r\n      };\r\n      var replace = function (newElm, oldElm, keepChildren) {\r\n        return run(oldElm, function (oldElm) {\r\n          if (Tools.is(oldElm, 'array')) {\r\n            newElm = newElm.cloneNode(true);\r\n          }\r\n          if (keepChildren) {\r\n            each$f(grep$1(oldElm.childNodes), function (node) {\r\n              newElm.appendChild(node);\r\n            });\r\n          }\r\n          return oldElm.parentNode.replaceChild(newElm, oldElm);\r\n        });\r\n      };\r\n      var rename = function (elm, name) {\r\n        var newElm;\r\n        if (elm.nodeName !== name.toUpperCase()) {\r\n          newElm = create(name);\r\n          each$f(getAttribs(elm), function (attrNode) {\r\n            setAttrib(newElm, attrNode.nodeName, getAttrib(elm, attrNode.nodeName));\r\n          });\r\n          replace(newElm, elm, true);\r\n        }\r\n        return newElm || elm;\r\n      };\r\n      var findCommonAncestor = function (a, b) {\r\n        var ps = a, pe;\r\n        while (ps) {\r\n          pe = b;\r\n          while (pe && ps !== pe) {\r\n            pe = pe.parentNode;\r\n          }\r\n          if (ps === pe) {\r\n            break;\r\n          }\r\n          ps = ps.parentNode;\r\n        }\r\n        if (!ps && a.ownerDocument) {\r\n          return a.ownerDocument.documentElement;\r\n        }\r\n        return ps;\r\n      };\r\n      var toHex = function (rgbVal) {\r\n        return styles.toHex(Tools.trim(rgbVal));\r\n      };\r\n      var isNonEmptyElement = function (node) {\r\n        if (isElement$5(node)) {\r\n          var isNamedAnchor = node.nodeName.toLowerCase() === 'a' && !getAttrib(node, 'href') && getAttrib(node, 'id');\r\n          if (getAttrib(node, 'name') || getAttrib(node, 'data-mce-bookmark') || isNamedAnchor) {\r\n            return true;\r\n          }\r\n        }\r\n        return false;\r\n      };\r\n      var isEmpty = function (node, elements) {\r\n        var type, name, brCount = 0;\r\n        if (isNonEmptyElement(node)) {\r\n          return false;\r\n        }\r\n        node = node.firstChild;\r\n        if (node) {\r\n          var walker = new DomTreeWalker(node, node.parentNode);\r\n          var whitespace = schema ? schema.getWhiteSpaceElements() : {};\r\n          elements = elements || (schema ? schema.getNonEmptyElements() : null);\r\n          do {\r\n            type = node.nodeType;\r\n            if (isElement$5(node)) {\r\n              var bogusVal = node.getAttribute('data-mce-bogus');\r\n              if (bogusVal) {\r\n                node = walker.next(bogusVal === 'all');\r\n                continue;\r\n              }\r\n              name = node.nodeName.toLowerCase();\r\n              if (elements && elements[name]) {\r\n                if (name === 'br') {\r\n                  brCount++;\r\n                  node = walker.next();\r\n                  continue;\r\n                }\r\n                return false;\r\n              }\r\n              if (isNonEmptyElement(node)) {\r\n                return false;\r\n              }\r\n            }\r\n            if (type === 8) {\r\n              return false;\r\n            }\r\n            if (type === 3 && !isWhitespaceText(node.nodeValue)) {\r\n              return false;\r\n            }\r\n            if (type === 3 && node.parentNode && whitespace[node.parentNode.nodeName] && isWhitespaceText(node.nodeValue)) {\r\n              return false;\r\n            }\r\n            node = walker.next();\r\n          } while (node);\r\n        }\r\n        return brCount <= 1;\r\n      };\r\n      var createRng = function () {\r\n        return doc.createRange();\r\n      };\r\n      var split = function (parentElm, splitElm, replacementElm) {\r\n        var range = createRng();\r\n        var beforeFragment;\r\n        var afterFragment;\r\n        var parentNode;\r\n        if (parentElm && splitElm) {\r\n          range.setStart(parentElm.parentNode, findNodeIndex(parentElm));\r\n          range.setEnd(splitElm.parentNode, findNodeIndex(splitElm));\r\n          beforeFragment = range.extractContents();\r\n          range = createRng();\r\n          range.setStart(splitElm.parentNode, findNodeIndex(splitElm) + 1);\r\n          range.setEnd(parentElm.parentNode, findNodeIndex(parentElm) + 1);\r\n          afterFragment = range.extractContents();\r\n          parentNode = parentElm.parentNode;\r\n          parentNode.insertBefore(trimNode(self, beforeFragment), parentElm);\r\n          if (replacementElm) {\r\n            parentNode.insertBefore(replacementElm, parentElm);\r\n          } else {\r\n            parentNode.insertBefore(splitElm, parentElm);\r\n          }\r\n          parentNode.insertBefore(trimNode(self, afterFragment), parentElm);\r\n          remove(parentElm);\r\n          return replacementElm || splitElm;\r\n        }\r\n      };\r\n      var bind = function (target, name, func, scope) {\r\n        if (Tools.isArray(target)) {\r\n          var i = target.length;\r\n          var rv = [];\r\n          while (i--) {\r\n            rv[i] = bind(target[i], name, func, scope);\r\n          }\r\n          return rv;\r\n        }\r\n        if (settings.collect && (target === doc || target === win)) {\r\n          boundEvents.push([\r\n            target,\r\n            name,\r\n            func,\r\n            scope\r\n          ]);\r\n        }\r\n        var output = events.bind(target, name, func, scope || self);\r\n        return output;\r\n      };\r\n      var unbind = function (target, name, func) {\r\n        if (Tools.isArray(target)) {\r\n          var i = target.length;\r\n          var rv = [];\r\n          while (i--) {\r\n            rv[i] = unbind(target[i], name, func);\r\n          }\r\n          return rv;\r\n        } else {\r\n          if (boundEvents.length > 0 && (target === doc || target === win)) {\r\n            var i = boundEvents.length;\r\n            while (i--) {\r\n              var item = boundEvents[i];\r\n              if (target === item[0] && (!name || name === item[1]) && (!func || func === item[2])) {\r\n                events.unbind(item[0], item[1], item[2]);\r\n              }\r\n            }\r\n          }\r\n          return events.unbind(target, name, func);\r\n        }\r\n      };\r\n      var fire = function (target, name, evt) {\r\n        return events.fire(target, name, evt);\r\n      };\r\n      var getContentEditable = function (node) {\r\n        if (node && isElement$5(node)) {\r\n          var contentEditable = node.getAttribute('data-mce-contenteditable');\r\n          if (contentEditable && contentEditable !== 'inherit') {\r\n            return contentEditable;\r\n          }\r\n          return node.contentEditable !== 'inherit' ? node.contentEditable : null;\r\n        } else {\r\n          return null;\r\n        }\r\n      };\r\n      var getContentEditableParent = function (node) {\r\n        var root = getRoot();\r\n        var state = null;\r\n        for (; node && node !== root; node = node.parentNode) {\r\n          state = getContentEditable(node);\r\n          if (state !== null) {\r\n            break;\r\n          }\r\n        }\r\n        return state;\r\n      };\r\n      var destroy = function () {\r\n        if (boundEvents.length > 0) {\r\n          var i = boundEvents.length;\r\n          while (i--) {\r\n            var item = boundEvents[i];\r\n            events.unbind(item[0], item[1], item[2]);\r\n          }\r\n        }\r\n        each$j(files, function (_, url) {\r\n          styleSheetLoader.unload(url);\r\n          delete files[url];\r\n        });\r\n        if (Sizzle.setDocument) {\r\n          Sizzle.setDocument();\r\n        }\r\n      };\r\n      var isChildOf = function (node, parent) {\r\n        if (!isIE) {\r\n          return node === parent || parent.contains(node);\r\n        } else {\r\n          while (node) {\r\n            if (parent === node) {\r\n              return true;\r\n            }\r\n            node = node.parentNode;\r\n          }\r\n          return false;\r\n        }\r\n      };\r\n      var dumpRng = function (r) {\r\n        return 'startContainer: ' + r.startContainer.nodeName + ', startOffset: ' + r.startOffset + ', endContainer: ' + r.endContainer.nodeName + ', endOffset: ' + r.endOffset;\r\n      };\r\n      var self = {\r\n        doc: doc,\r\n        settings: settings,\r\n        win: win,\r\n        files: files,\r\n        stdMode: stdMode,\r\n        boxModel: boxModel,\r\n        styleSheetLoader: styleSheetLoader,\r\n        boundEvents: boundEvents,\r\n        styles: styles,\r\n        schema: schema,\r\n        events: events,\r\n        isBlock: isBlock,\r\n        $: $,\r\n        $$: $$,\r\n        root: null,\r\n        clone: clone,\r\n        getRoot: getRoot,\r\n        getViewPort: getViewPort,\r\n        getRect: getRect,\r\n        getSize: getSize,\r\n        getParent: getParent,\r\n        getParents: getParents,\r\n        get: get,\r\n        getNext: getNext,\r\n        getPrev: getPrev,\r\n        select: select,\r\n        is: is,\r\n        add: add,\r\n        create: create,\r\n        createHTML: createHTML,\r\n        createFragment: createFragment,\r\n        remove: remove,\r\n        setStyle: setStyle,\r\n        getStyle: getStyle,\r\n        setStyles: setStyles,\r\n        removeAllAttribs: removeAllAttribs,\r\n        setAttrib: setAttrib,\r\n        setAttribs: setAttribs,\r\n        getAttrib: getAttrib,\r\n        getPos: getPos$1,\r\n        parseStyle: parseStyle,\r\n        serializeStyle: serializeStyle,\r\n        addStyle: addStyle,\r\n        loadCSS: loadCSS,\r\n        addClass: addClass,\r\n        removeClass: removeClass,\r\n        hasClass: hasClass,\r\n        toggleClass: toggleClass,\r\n        show: show,\r\n        hide: hide,\r\n        isHidden: isHidden,\r\n        uniqueId: uniqueId,\r\n        setHTML: setHTML,\r\n        getOuterHTML: getOuterHTML,\r\n        setOuterHTML: setOuterHTML,\r\n        decode: decode,\r\n        encode: encode,\r\n        insertAfter: insertAfter,\r\n        replace: replace,\r\n        rename: rename,\r\n        findCommonAncestor: findCommonAncestor,\r\n        toHex: toHex,\r\n        run: run,\r\n        getAttribs: getAttribs,\r\n        isEmpty: isEmpty,\r\n        createRng: createRng,\r\n        nodeIndex: findNodeIndex,\r\n        split: split,\r\n        bind: bind,\r\n        unbind: unbind,\r\n        fire: fire,\r\n        getContentEditable: getContentEditable,\r\n        getContentEditableParent: getContentEditableParent,\r\n        destroy: destroy,\r\n        isChildOf: isChildOf,\r\n        dumpRng: dumpRng\r\n      };\r\n      var attrHooks = setupAttrHooks(styles, settings, constant(self));\r\n      return self;\r\n    };\r\n    DOMUtils.DOM = DOMUtils(document);\r\n    DOMUtils.nodeIndex = findNodeIndex;\r\n\r\n    var DOM$a = DOMUtils.DOM;\r\n    var each$e = Tools.each, grep = Tools.grep;\r\n    var QUEUED = 0;\r\n    var LOADING = 1;\r\n    var LOADED = 2;\r\n    var FAILED = 3;\r\n    var ScriptLoader = function () {\r\n      function ScriptLoader(settings) {\r\n        if (settings === void 0) {\r\n          settings = {};\r\n        }\r\n        this.states = {};\r\n        this.queue = [];\r\n        this.scriptLoadedCallbacks = {};\r\n        this.queueLoadedCallbacks = [];\r\n        this.loading = 0;\r\n        this.settings = settings;\r\n      }\r\n      ScriptLoader.prototype._setReferrerPolicy = function (referrerPolicy) {\r\n        this.settings.referrerPolicy = referrerPolicy;\r\n      };\r\n      ScriptLoader.prototype.loadScript = function (url, success, failure) {\r\n        var dom = DOM$a;\r\n        var elm;\r\n        var cleanup = function () {\r\n          dom.remove(id);\r\n          if (elm) {\r\n            elm.onerror = elm.onload = elm = null;\r\n          }\r\n        };\r\n        var done = function () {\r\n          cleanup();\r\n          success();\r\n        };\r\n        var error = function () {\r\n          cleanup();\r\n          if (isFunction(failure)) {\r\n            failure();\r\n          } else {\r\n            if (typeof console !== 'undefined' && console.log) {\r\n              console.log('Failed to load script: ' + url);\r\n            }\r\n          }\r\n        };\r\n        var id = dom.uniqueId();\r\n        elm = document.createElement('script');\r\n        elm.id = id;\r\n        elm.type = 'text/javascript';\r\n        elm.src = Tools._addCacheSuffix(url);\r\n        if (this.settings.referrerPolicy) {\r\n          dom.setAttrib(elm, 'referrerpolicy', this.settings.referrerPolicy);\r\n        }\r\n        elm.onload = done;\r\n        elm.onerror = error;\r\n        (document.getElementsByTagName('head')[0] || document.body).appendChild(elm);\r\n      };\r\n      ScriptLoader.prototype.isDone = function (url) {\r\n        return this.states[url] === LOADED;\r\n      };\r\n      ScriptLoader.prototype.markDone = function (url) {\r\n        this.states[url] = LOADED;\r\n      };\r\n      ScriptLoader.prototype.add = function (url, success, scope, failure) {\r\n        var state = this.states[url];\r\n        this.queue.push(url);\r\n        if (state === undefined) {\r\n          this.states[url] = QUEUED;\r\n        }\r\n        if (success) {\r\n          if (!this.scriptLoadedCallbacks[url]) {\r\n            this.scriptLoadedCallbacks[url] = [];\r\n          }\r\n          this.scriptLoadedCallbacks[url].push({\r\n            success: success,\r\n            failure: failure,\r\n            scope: scope || this\r\n          });\r\n        }\r\n      };\r\n      ScriptLoader.prototype.load = function (url, success, scope, failure) {\r\n        return this.add(url, success, scope, failure);\r\n      };\r\n      ScriptLoader.prototype.remove = function (url) {\r\n        delete this.states[url];\r\n        delete this.scriptLoadedCallbacks[url];\r\n      };\r\n      ScriptLoader.prototype.loadQueue = function (success, scope, failure) {\r\n        this.loadScripts(this.queue, success, scope, failure);\r\n      };\r\n      ScriptLoader.prototype.loadScripts = function (scripts, success, scope, failure) {\r\n        var self = this;\r\n        var failures = [];\r\n        var execCallbacks = function (name, url) {\r\n          each$e(self.scriptLoadedCallbacks[url], function (callback) {\r\n            if (isFunction(callback[name])) {\r\n              callback[name].call(callback.scope);\r\n            }\r\n          });\r\n          self.scriptLoadedCallbacks[url] = undefined;\r\n        };\r\n        self.queueLoadedCallbacks.push({\r\n          success: success,\r\n          failure: failure,\r\n          scope: scope || this\r\n        });\r\n        var loadScripts = function () {\r\n          var loadingScripts = grep(scripts);\r\n          scripts.length = 0;\r\n          each$e(loadingScripts, function (url) {\r\n            if (self.states[url] === LOADED) {\r\n              execCallbacks('success', url);\r\n              return;\r\n            }\r\n            if (self.states[url] === FAILED) {\r\n              execCallbacks('failure', url);\r\n              return;\r\n            }\r\n            if (self.states[url] !== LOADING) {\r\n              self.states[url] = LOADING;\r\n              self.loading++;\r\n              self.loadScript(url, function () {\r\n                self.states[url] = LOADED;\r\n                self.loading--;\r\n                execCallbacks('success', url);\r\n                loadScripts();\r\n              }, function () {\r\n                self.states[url] = FAILED;\r\n                self.loading--;\r\n                failures.push(url);\r\n                execCallbacks('failure', url);\r\n                loadScripts();\r\n              });\r\n            }\r\n          });\r\n          if (!self.loading) {\r\n            var notifyCallbacks = self.queueLoadedCallbacks.slice(0);\r\n            self.queueLoadedCallbacks.length = 0;\r\n            each$e(notifyCallbacks, function (callback) {\r\n              if (failures.length === 0) {\r\n                if (isFunction(callback.success)) {\r\n                  callback.success.call(callback.scope);\r\n                }\r\n              } else {\r\n                if (isFunction(callback.failure)) {\r\n                  callback.failure.call(callback.scope, failures);\r\n                }\r\n              }\r\n            });\r\n          }\r\n        };\r\n        loadScripts();\r\n      };\r\n      ScriptLoader.ScriptLoader = new ScriptLoader();\r\n      return ScriptLoader;\r\n    }();\r\n\r\n    var Cell = function (initial) {\r\n      var value = initial;\r\n      var get = function () {\r\n        return value;\r\n      };\r\n      var set = function (v) {\r\n        value = v;\r\n      };\r\n      return {\r\n        get: get,\r\n        set: set\r\n      };\r\n    };\r\n\r\n    var isRaw = function (str) {\r\n      return isObject(str) && has$2(str, 'raw');\r\n    };\r\n    var isTokenised = function (str) {\r\n      return isArray$1(str) && str.length > 1;\r\n    };\r\n    var data = {};\r\n    var currentCode = Cell('en');\r\n    var getLanguageData = function () {\r\n      return get$9(data, currentCode.get());\r\n    };\r\n    var getData = function () {\r\n      return map$2(data, function (value) {\r\n        return __assign({}, value);\r\n      });\r\n    };\r\n    var setCode = function (newCode) {\r\n      if (newCode) {\r\n        currentCode.set(newCode);\r\n      }\r\n    };\r\n    var getCode = function () {\r\n      return currentCode.get();\r\n    };\r\n    var add$4 = function (code, items) {\r\n      var langData = data[code];\r\n      if (!langData) {\r\n        data[code] = langData = {};\r\n      }\r\n      each$j(items, function (translation, name) {\r\n        langData[name.toLowerCase()] = translation;\r\n      });\r\n    };\r\n    var translate = function (text) {\r\n      var langData = getLanguageData().getOr({});\r\n      var toString = function (obj) {\r\n        if (isFunction(obj)) {\r\n          return Object.prototype.toString.call(obj);\r\n        }\r\n        return !isEmpty(obj) ? '' + obj : '';\r\n      };\r\n      var isEmpty = function (text) {\r\n        return text === '' || text === null || text === undefined;\r\n      };\r\n      var getLangData = function (text) {\r\n        var textstr = toString(text);\r\n        return get$9(langData, textstr.toLowerCase()).map(toString).getOr(textstr);\r\n      };\r\n      var removeContext = function (str) {\r\n        return str.replace(/{context:\\w+}$/, '');\r\n      };\r\n      if (isEmpty(text)) {\r\n        return '';\r\n      }\r\n      if (isRaw(text)) {\r\n        return toString(text.raw);\r\n      }\r\n      if (isTokenised(text)) {\r\n        var values_1 = text.slice(1);\r\n        var substitued = getLangData(text[0]).replace(/\\{([0-9]+)\\}/g, function ($1, $2) {\r\n          return has$2(values_1, $2) ? toString(values_1[$2]) : $1;\r\n        });\r\n        return removeContext(substitued);\r\n      }\r\n      return removeContext(getLangData(text));\r\n    };\r\n    var isRtl$1 = function () {\r\n      return getLanguageData().bind(function (items) {\r\n        return get$9(items, '_dir');\r\n      }).exists(function (dir) {\r\n        return dir === 'rtl';\r\n      });\r\n    };\r\n    var hasCode = function (code) {\r\n      return has$2(data, code);\r\n    };\r\n    var I18n = {\r\n      getData: getData,\r\n      setCode: setCode,\r\n      getCode: getCode,\r\n      add: add$4,\r\n      translate: translate,\r\n      isRtl: isRtl$1,\r\n      hasCode: hasCode\r\n    };\r\n\r\n    var AddOnManager = function () {\r\n      var items = [];\r\n      var urls = {};\r\n      var lookup = {};\r\n      var _listeners = [];\r\n      var runListeners = function (name, state) {\r\n        var matchedListeners = filter$4(_listeners, function (listener) {\r\n          return listener.name === name && listener.state === state;\r\n        });\r\n        each$k(matchedListeners, function (listener) {\r\n          return listener.callback();\r\n        });\r\n      };\r\n      var get = function (name) {\r\n        if (lookup[name]) {\r\n          return lookup[name].instance;\r\n        }\r\n        return undefined;\r\n      };\r\n      var dependencies = function (name) {\r\n        var result;\r\n        if (lookup[name]) {\r\n          result = lookup[name].dependencies;\r\n        }\r\n        return result || [];\r\n      };\r\n      var requireLangPack = function (name, languages) {\r\n        if (AddOnManager.languageLoad !== false) {\r\n          waitFor(name, function () {\r\n            var language = I18n.getCode();\r\n            var wrappedLanguages = ',' + (languages || '') + ',';\r\n            if (!language || languages && wrappedLanguages.indexOf(',' + language + ',') === -1) {\r\n              return;\r\n            }\r\n            ScriptLoader.ScriptLoader.add(urls[name] + '/langs/' + language + '.js');\r\n          }, 'loaded');\r\n        }\r\n      };\r\n      var add = function (id, addOn, dependencies) {\r\n        var addOnConstructor = addOn;\r\n        items.push(addOnConstructor);\r\n        lookup[id] = {\r\n          instance: addOnConstructor,\r\n          dependencies: dependencies\r\n        };\r\n        runListeners(id, 'added');\r\n        return addOnConstructor;\r\n      };\r\n      var remove = function (name) {\r\n        delete urls[name];\r\n        delete lookup[name];\r\n      };\r\n      var createUrl = function (baseUrl, dep) {\r\n        if (typeof dep === 'object') {\r\n          return dep;\r\n        }\r\n        return typeof baseUrl === 'string' ? {\r\n          prefix: '',\r\n          resource: dep,\r\n          suffix: ''\r\n        } : {\r\n          prefix: baseUrl.prefix,\r\n          resource: dep,\r\n          suffix: baseUrl.suffix\r\n        };\r\n      };\r\n      var addComponents = function (pluginName, scripts) {\r\n        var pluginUrl = urls[pluginName];\r\n        each$k(scripts, function (script) {\r\n          ScriptLoader.ScriptLoader.add(pluginUrl + '/' + script);\r\n        });\r\n      };\r\n      var loadDependencies = function (name, addOnUrl, success, scope) {\r\n        var deps = dependencies(name);\r\n        each$k(deps, function (dep) {\r\n          var newUrl = createUrl(addOnUrl, dep);\r\n          load(newUrl.resource, newUrl, undefined, undefined);\r\n        });\r\n        if (success) {\r\n          if (scope) {\r\n            success.call(scope);\r\n          } else {\r\n            success.call(ScriptLoader);\r\n          }\r\n        }\r\n      };\r\n      var load = function (name, addOnUrl, success, scope, failure) {\r\n        if (urls[name]) {\r\n          return;\r\n        }\r\n        var urlString = typeof addOnUrl === 'string' ? addOnUrl : addOnUrl.prefix + addOnUrl.resource + addOnUrl.suffix;\r\n        if (urlString.indexOf('/') !== 0 && urlString.indexOf('://') === -1) {\r\n          urlString = AddOnManager.baseURL + '/' + urlString;\r\n        }\r\n        urls[name] = urlString.substring(0, urlString.lastIndexOf('/'));\r\n        var done = function () {\r\n          runListeners(name, 'loaded');\r\n          loadDependencies(name, addOnUrl, success, scope);\r\n        };\r\n        if (lookup[name]) {\r\n          done();\r\n        } else {\r\n          ScriptLoader.ScriptLoader.add(urlString, done, scope, failure);\r\n        }\r\n      };\r\n      var waitFor = function (name, callback, state) {\r\n        if (state === void 0) {\r\n          state = 'added';\r\n        }\r\n        if (has$2(lookup, name) && state === 'added') {\r\n          callback();\r\n        } else if (has$2(urls, name) && state === 'loaded') {\r\n          callback();\r\n        } else {\r\n          _listeners.push({\r\n            name: name,\r\n            state: state,\r\n            callback: callback\r\n          });\r\n        }\r\n      };\r\n      return {\r\n        items: items,\r\n        urls: urls,\r\n        lookup: lookup,\r\n        _listeners: _listeners,\r\n        get: get,\r\n        dependencies: dependencies,\r\n        requireLangPack: requireLangPack,\r\n        add: add,\r\n        remove: remove,\r\n        createUrl: createUrl,\r\n        addComponents: addComponents,\r\n        load: load,\r\n        waitFor: waitFor\r\n      };\r\n    };\r\n    AddOnManager.languageLoad = true;\r\n    AddOnManager.baseURL = '';\r\n    AddOnManager.PluginManager = AddOnManager();\r\n    AddOnManager.ThemeManager = AddOnManager();\r\n\r\n    var singleton = function (doRevoke) {\r\n      var subject = Cell(Optional.none());\r\n      var revoke = function () {\r\n        return subject.get().each(doRevoke);\r\n      };\r\n      var clear = function () {\r\n        revoke();\r\n        subject.set(Optional.none());\r\n      };\r\n      var isSet = function () {\r\n        return subject.get().isSome();\r\n      };\r\n      var get = function () {\r\n        return subject.get();\r\n      };\r\n      var set = function (s) {\r\n        revoke();\r\n        subject.set(Optional.some(s));\r\n      };\r\n      return {\r\n        clear: clear,\r\n        isSet: isSet,\r\n        get: get,\r\n        set: set\r\n      };\r\n    };\r\n    var value = function () {\r\n      var subject = singleton(noop);\r\n      var on = function (f) {\r\n        return subject.get().each(f);\r\n      };\r\n      return __assign(__assign({}, subject), { on: on });\r\n    };\r\n\r\n    var first = function (fn, rate) {\r\n      var timer = null;\r\n      var cancel = function () {\r\n        if (!isNull(timer)) {\r\n          clearTimeout(timer);\r\n          timer = null;\r\n        }\r\n      };\r\n      var throttle = function () {\r\n        var args = [];\r\n        for (var _i = 0; _i < arguments.length; _i++) {\r\n          args[_i] = arguments[_i];\r\n        }\r\n        if (isNull(timer)) {\r\n          timer = setTimeout(function () {\r\n            timer = null;\r\n            fn.apply(null, args);\r\n          }, rate);\r\n        }\r\n      };\r\n      return {\r\n        cancel: cancel,\r\n        throttle: throttle\r\n      };\r\n    };\r\n    var last = function (fn, rate) {\r\n      var timer = null;\r\n      var cancel = function () {\r\n        if (!isNull(timer)) {\r\n          clearTimeout(timer);\r\n          timer = null;\r\n        }\r\n      };\r\n      var throttle = function () {\r\n        var args = [];\r\n        for (var _i = 0; _i < arguments.length; _i++) {\r\n          args[_i] = arguments[_i];\r\n        }\r\n        cancel();\r\n        timer = setTimeout(function () {\r\n          timer = null;\r\n          fn.apply(null, args);\r\n        }, rate);\r\n      };\r\n      return {\r\n        cancel: cancel,\r\n        throttle: throttle\r\n      };\r\n    };\r\n\r\n    var read$4 = function (element, attr) {\r\n      var value = get$6(element, attr);\r\n      return value === undefined || value === '' ? [] : value.split(' ');\r\n    };\r\n    var add$3 = function (element, attr, id) {\r\n      var old = read$4(element, attr);\r\n      var nu = old.concat([id]);\r\n      set$1(element, attr, nu.join(' '));\r\n      return true;\r\n    };\r\n    var remove$5 = function (element, attr, id) {\r\n      var nu = filter$4(read$4(element, attr), function (v) {\r\n        return v !== id;\r\n      });\r\n      if (nu.length > 0) {\r\n        set$1(element, attr, nu.join(' '));\r\n      } else {\r\n        remove$6(element, attr);\r\n      }\r\n      return false;\r\n    };\r\n\r\n    var supports = function (element) {\r\n      return element.dom.classList !== undefined;\r\n    };\r\n    var get$4 = function (element) {\r\n      return read$4(element, 'class');\r\n    };\r\n    var add$2 = function (element, clazz) {\r\n      return add$3(element, 'class', clazz);\r\n    };\r\n    var remove$4 = function (element, clazz) {\r\n      return remove$5(element, 'class', clazz);\r\n    };\r\n\r\n    var add$1 = function (element, clazz) {\r\n      if (supports(element)) {\r\n        element.dom.classList.add(clazz);\r\n      } else {\r\n        add$2(element, clazz);\r\n      }\r\n    };\r\n    var cleanClass = function (element) {\r\n      var classList = supports(element) ? element.dom.classList : get$4(element);\r\n      if (classList.length === 0) {\r\n        remove$6(element, 'class');\r\n      }\r\n    };\r\n    var remove$3 = function (element, clazz) {\r\n      if (supports(element)) {\r\n        var classList = element.dom.classList;\r\n        classList.remove(clazz);\r\n      } else {\r\n        remove$4(element, clazz);\r\n      }\r\n      cleanClass(element);\r\n    };\r\n    var has = function (element, clazz) {\r\n      return supports(element) && element.dom.classList.contains(clazz);\r\n    };\r\n\r\n    var descendants$1 = function (scope, predicate) {\r\n      var result = [];\r\n      each$k(children(scope), function (x) {\r\n        if (predicate(x)) {\r\n          result = result.concat([x]);\r\n        }\r\n        result = result.concat(descendants$1(x, predicate));\r\n      });\r\n      return result;\r\n    };\r\n\r\n    var descendants = function (scope, selector) {\r\n      return all(selector, scope);\r\n    };\r\n\r\n    var annotation = constant('mce-annotation');\r\n    var dataAnnotation = constant('data-mce-annotation');\r\n    var dataAnnotationId = constant('data-mce-annotation-uid');\r\n\r\n    var identify = function (editor, annotationName) {\r\n      var rng = editor.selection.getRng();\r\n      var start = SugarElement.fromDom(rng.startContainer);\r\n      var root = SugarElement.fromDom(editor.getBody());\r\n      var selector = annotationName.fold(function () {\r\n        return '.' + annotation();\r\n      }, function (an) {\r\n        return '[' + dataAnnotation() + '=\"' + an + '\"]';\r\n      });\r\n      var newStart = child$1(start, rng.startOffset).getOr(start);\r\n      var closest = closest$2(newStart, selector, function (n) {\r\n        return eq(n, root);\r\n      });\r\n      var getAttr = function (c, property) {\r\n        if (has$1(c, property)) {\r\n          return Optional.some(get$6(c, property));\r\n        } else {\r\n          return Optional.none();\r\n        }\r\n      };\r\n      return closest.bind(function (c) {\r\n        return getAttr(c, '' + dataAnnotationId()).bind(function (uid) {\r\n          return getAttr(c, '' + dataAnnotation()).map(function (name) {\r\n            var elements = findMarkers(editor, uid);\r\n            return {\r\n              uid: uid,\r\n              name: name,\r\n              elements: elements\r\n            };\r\n          });\r\n        });\r\n      });\r\n    };\r\n    var isAnnotation = function (elem) {\r\n      return isElement$6(elem) && has(elem, annotation());\r\n    };\r\n    var findMarkers = function (editor, uid) {\r\n      var body = SugarElement.fromDom(editor.getBody());\r\n      return descendants(body, '[' + dataAnnotationId() + '=\"' + uid + '\"]');\r\n    };\r\n    var findAll = function (editor, name) {\r\n      var body = SugarElement.fromDom(editor.getBody());\r\n      var markers = descendants(body, '[' + dataAnnotation() + '=\"' + name + '\"]');\r\n      var directory = {};\r\n      each$k(markers, function (m) {\r\n        var uid = get$6(m, dataAnnotationId());\r\n        var nodesAlready = get$9(directory, uid).getOr([]);\r\n        directory[uid] = nodesAlready.concat([m]);\r\n      });\r\n      return directory;\r\n    };\r\n\r\n    var setup$n = function (editor, _registry) {\r\n      var changeCallbacks = Cell({});\r\n      var initData = function () {\r\n        return {\r\n          listeners: [],\r\n          previous: value()\r\n        };\r\n      };\r\n      var withCallbacks = function (name, f) {\r\n        updateCallbacks(name, function (data) {\r\n          f(data);\r\n          return data;\r\n        });\r\n      };\r\n      var updateCallbacks = function (name, f) {\r\n        var callbackMap = changeCallbacks.get();\r\n        var data = get$9(callbackMap, name).getOrThunk(initData);\r\n        var outputData = f(data);\r\n        callbackMap[name] = outputData;\r\n        changeCallbacks.set(callbackMap);\r\n      };\r\n      var fireCallbacks = function (name, uid, elements) {\r\n        withCallbacks(name, function (data) {\r\n          each$k(data.listeners, function (f) {\r\n            return f(true, name, {\r\n              uid: uid,\r\n              nodes: map$3(elements, function (elem) {\r\n                return elem.dom;\r\n              })\r\n            });\r\n          });\r\n        });\r\n      };\r\n      var fireNoAnnotation = function (name) {\r\n        withCallbacks(name, function (data) {\r\n          each$k(data.listeners, function (f) {\r\n            return f(false, name);\r\n          });\r\n        });\r\n      };\r\n      var onNodeChange = last(function () {\r\n        var callbackMap = changeCallbacks.get();\r\n        var annotations = sort(keys(callbackMap));\r\n        each$k(annotations, function (name) {\r\n          updateCallbacks(name, function (data) {\r\n            var prev = data.previous.get();\r\n            identify(editor, Optional.some(name)).fold(function () {\r\n              if (prev.isSome()) {\r\n                fireNoAnnotation(name);\r\n                data.previous.clear();\r\n              }\r\n            }, function (_a) {\r\n              var uid = _a.uid, name = _a.name, elements = _a.elements;\r\n              if (!is$1(prev, uid)) {\r\n                fireCallbacks(name, uid, elements);\r\n                data.previous.set(uid);\r\n              }\r\n            });\r\n            return {\r\n              previous: data.previous,\r\n              listeners: data.listeners\r\n            };\r\n          });\r\n        });\r\n      }, 30);\r\n      editor.on('remove', function () {\r\n        onNodeChange.cancel();\r\n      });\r\n      editor.on('NodeChange', function () {\r\n        onNodeChange.throttle();\r\n      });\r\n      var addListener = function (name, f) {\r\n        updateCallbacks(name, function (data) {\r\n          return {\r\n            previous: data.previous,\r\n            listeners: data.listeners.concat([f])\r\n          };\r\n        });\r\n      };\r\n      return { addListener: addListener };\r\n    };\r\n\r\n    var setup$m = function (editor, registry) {\r\n      var identifyParserNode = function (span) {\r\n        return Optional.from(span.attr(dataAnnotation())).bind(registry.lookup);\r\n      };\r\n      editor.on('init', function () {\r\n        editor.serializer.addNodeFilter('span', function (spans) {\r\n          each$k(spans, function (span) {\r\n            identifyParserNode(span).each(function (settings) {\r\n              if (settings.persistent === false) {\r\n                span.unwrap();\r\n              }\r\n            });\r\n          });\r\n        });\r\n      });\r\n    };\r\n\r\n    var create$7 = function () {\r\n      var annotations = {};\r\n      var register = function (name, settings) {\r\n        annotations[name] = {\r\n          name: name,\r\n          settings: settings\r\n        };\r\n      };\r\n      var lookup = function (name) {\r\n        return get$9(annotations, name).map(function (a) {\r\n          return a.settings;\r\n        });\r\n      };\r\n      return {\r\n        register: register,\r\n        lookup: lookup\r\n      };\r\n    };\r\n\r\n    var unique = 0;\r\n    var generate = function (prefix) {\r\n      var date = new Date();\r\n      var time = date.getTime();\r\n      var random = Math.floor(Math.random() * 1000000000);\r\n      unique++;\r\n      return prefix + '_' + random + unique + String(time);\r\n    };\r\n\r\n    var add = function (element, classes) {\r\n      each$k(classes, function (x) {\r\n        add$1(element, x);\r\n      });\r\n    };\r\n\r\n    var fromHtml = function (html, scope) {\r\n      var doc = scope || document;\r\n      var div = doc.createElement('div');\r\n      div.innerHTML = html;\r\n      return children(SugarElement.fromDom(div));\r\n    };\r\n    var fromDom$1 = function (nodes) {\r\n      return map$3(nodes, SugarElement.fromDom);\r\n    };\r\n\r\n    var get$3 = function (element) {\r\n      return element.dom.innerHTML;\r\n    };\r\n    var set = function (element, content) {\r\n      var owner = owner$1(element);\r\n      var docDom = owner.dom;\r\n      var fragment = SugarElement.fromDom(docDom.createDocumentFragment());\r\n      var contentElements = fromHtml(content, docDom);\r\n      append(fragment, contentElements);\r\n      empty(element);\r\n      append$1(element, fragment);\r\n    };\r\n\r\n    var clone$1 = function (original, isDeep) {\r\n      return SugarElement.fromDom(original.dom.cloneNode(isDeep));\r\n    };\r\n    var shallow = function (original) {\r\n      return clone$1(original, false);\r\n    };\r\n    var deep$1 = function (original) {\r\n      return clone$1(original, true);\r\n    };\r\n\r\n    var TextWalker = function (startNode, rootNode, isBoundary) {\r\n      if (isBoundary === void 0) {\r\n        isBoundary = never;\r\n      }\r\n      var walker = new DomTreeWalker(startNode, rootNode);\r\n      var walk = function (direction) {\r\n        var next;\r\n        do {\r\n          next = walker[direction]();\r\n        } while (next && !isText$7(next) && !isBoundary(next));\r\n        return Optional.from(next).filter(isText$7);\r\n      };\r\n      return {\r\n        current: function () {\r\n          return Optional.from(walker.current()).filter(isText$7);\r\n        },\r\n        next: function () {\r\n          return walk('next');\r\n        },\r\n        prev: function () {\r\n          return walk('prev');\r\n        },\r\n        prev2: function () {\r\n          return walk('prev2');\r\n        }\r\n      };\r\n    };\r\n\r\n    var TextSeeker = function (dom, isBoundary) {\r\n      var isBlockBoundary = isBoundary ? isBoundary : function (node) {\r\n        return dom.isBlock(node) || isBr$5(node) || isContentEditableFalse$b(node);\r\n      };\r\n      var walk = function (node, offset, walker, process) {\r\n        if (isText$7(node)) {\r\n          var newOffset = process(node, offset, node.data);\r\n          if (newOffset !== -1) {\r\n            return Optional.some({\r\n              container: node,\r\n              offset: newOffset\r\n            });\r\n          }\r\n        }\r\n        return walker().bind(function (next) {\r\n          return walk(next.container, next.offset, walker, process);\r\n        });\r\n      };\r\n      var backwards = function (node, offset, process, root) {\r\n        var walker = TextWalker(node, root, isBlockBoundary);\r\n        return walk(node, offset, function () {\r\n          return walker.prev().map(function (prev) {\r\n            return {\r\n              container: prev,\r\n              offset: prev.length\r\n            };\r\n          });\r\n        }, process).getOrNull();\r\n      };\r\n      var forwards = function (node, offset, process, root) {\r\n        var walker = TextWalker(node, root, isBlockBoundary);\r\n        return walk(node, offset, function () {\r\n          return walker.next().map(function (next) {\r\n            return {\r\n              container: next,\r\n              offset: 0\r\n            };\r\n          });\r\n        }, process).getOrNull();\r\n      };\r\n      return {\r\n        backwards: backwards,\r\n        forwards: forwards\r\n      };\r\n    };\r\n\r\n    var round$2 = Math.round;\r\n    var clone = function (rect) {\r\n      if (!rect) {\r\n        return {\r\n          left: 0,\r\n          top: 0,\r\n          bottom: 0,\r\n          right: 0,\r\n          width: 0,\r\n          height: 0\r\n        };\r\n      }\r\n      return {\r\n        left: round$2(rect.left),\r\n        top: round$2(rect.top),\r\n        bottom: round$2(rect.bottom),\r\n        right: round$2(rect.right),\r\n        width: round$2(rect.width),\r\n        height: round$2(rect.height)\r\n      };\r\n    };\r\n    var collapse = function (rect, toStart) {\r\n      rect = clone(rect);\r\n      if (toStart) {\r\n        rect.right = rect.left;\r\n      } else {\r\n        rect.left = rect.left + rect.width;\r\n        rect.right = rect.left;\r\n      }\r\n      rect.width = 0;\r\n      return rect;\r\n    };\r\n    var isEqual = function (rect1, rect2) {\r\n      return rect1.left === rect2.left && rect1.top === rect2.top && rect1.bottom === rect2.bottom && rect1.right === rect2.right;\r\n    };\r\n    var isValidOverflow = function (overflowY, rect1, rect2) {\r\n      return overflowY >= 0 && overflowY <= Math.min(rect1.height, rect2.height) / 2;\r\n    };\r\n    var isAbove$1 = function (rect1, rect2) {\r\n      var halfHeight = Math.min(rect2.height / 2, rect1.height / 2);\r\n      if (rect1.bottom - halfHeight < rect2.top) {\r\n        return true;\r\n      }\r\n      if (rect1.top > rect2.bottom) {\r\n        return false;\r\n      }\r\n      return isValidOverflow(rect2.top - rect1.bottom, rect1, rect2);\r\n    };\r\n    var isBelow$1 = function (rect1, rect2) {\r\n      if (rect1.top > rect2.bottom) {\r\n        return true;\r\n      }\r\n      if (rect1.bottom < rect2.top) {\r\n        return false;\r\n      }\r\n      return isValidOverflow(rect2.bottom - rect1.top, rect1, rect2);\r\n    };\r\n    var containsXY = function (rect, clientX, clientY) {\r\n      return clientX >= rect.left && clientX <= rect.right && clientY >= rect.top && clientY <= rect.bottom;\r\n    };\r\n\r\n    var clamp$2 = function (value, min, max) {\r\n      return Math.min(Math.max(value, min), max);\r\n    };\r\n\r\n    var getSelectedNode = function (range) {\r\n      var startContainer = range.startContainer, startOffset = range.startOffset;\r\n      if (startContainer.hasChildNodes() && range.endOffset === startOffset + 1) {\r\n        return startContainer.childNodes[startOffset];\r\n      }\r\n      return null;\r\n    };\r\n    var getNode$1 = function (container, offset) {\r\n      if (isElement$5(container) && container.hasChildNodes()) {\r\n        var childNodes = container.childNodes;\r\n        var safeOffset = clamp$2(offset, 0, childNodes.length - 1);\r\n        return childNodes[safeOffset];\r\n      } else {\r\n        return container;\r\n      }\r\n    };\r\n    var getNodeUnsafe = function (container, offset) {\r\n      if (offset < 0 && isElement$5(container) && container.hasChildNodes()) {\r\n        return undefined;\r\n      } else {\r\n        return getNode$1(container, offset);\r\n      }\r\n    };\r\n\r\n    var extendingChars = new RegExp('[\\u0300-\\u036f\\u0483-\\u0487\\u0488-\\u0489\\u0591-\\u05bd\\u05bf\\u05c1-\\u05c2\\u05c4-\\u05c5\\u05c7\\u0610-\\u061a' + '\\u064b-\\u065f\\u0670\\u06d6-\\u06dc\\u06df-\\u06e4\\u06e7-\\u06e8\\u06ea-\\u06ed\\u0711\\u0730-\\u074a\\u07a6-\\u07b0' + '\\u07eb-\\u07f3\\u0816-\\u0819\\u081b-\\u0823\\u0825-\\u0827\\u0829-\\u082d\\u0859-\\u085b\\u08e3-\\u0902\\u093a\\u093c' + '\\u0941-\\u0948\\u094d\\u0951-\\u0957\\u0962-\\u0963\\u0981\\u09bc\\u09be\\u09c1-\\u09c4\\u09cd\\u09d7\\u09e2-\\u09e3' + '\\u0a01-\\u0a02\\u0a3c\\u0a41-\\u0a42\\u0a47-\\u0a48\\u0a4b-\\u0a4d\\u0a51\\u0a70-\\u0a71\\u0a75\\u0a81-\\u0a82\\u0abc' + '\\u0ac1-\\u0ac5\\u0ac7-\\u0ac8\\u0acd\\u0ae2-\\u0ae3\\u0b01\\u0b3c\\u0b3e\\u0b3f\\u0b41-\\u0b44\\u0b4d\\u0b56\\u0b57' + '\\u0b62-\\u0b63\\u0b82\\u0bbe\\u0bc0\\u0bcd\\u0bd7\\u0c00\\u0c3e-\\u0c40\\u0c46-\\u0c48\\u0c4a-\\u0c4d\\u0c55-\\u0c56' + '\\u0c62-\\u0c63\\u0c81\\u0cbc\\u0cbf\\u0cc2\\u0cc6\\u0ccc-\\u0ccd\\u0cd5-\\u0cd6\\u0ce2-\\u0ce3\\u0d01\\u0d3e\\u0d41-\\u0d44' + '\\u0d4d\\u0d57\\u0d62-\\u0d63\\u0dca\\u0dcf\\u0dd2-\\u0dd4\\u0dd6\\u0ddf\\u0e31\\u0e34-\\u0e3a\\u0e47-\\u0e4e\\u0eb1\\u0eb4-\\u0eb9' + '\\u0ebb-\\u0ebc\\u0ec8-\\u0ecd\\u0f18-\\u0f19\\u0f35\\u0f37\\u0f39\\u0f71-\\u0f7e\\u0f80-\\u0f84\\u0f86-\\u0f87\\u0f8d-\\u0f97' + '\\u0f99-\\u0fbc\\u0fc6\\u102d-\\u1030\\u1032-\\u1037\\u1039-\\u103a\\u103d-\\u103e\\u1058-\\u1059\\u105e-\\u1060\\u1071-\\u1074' + '\\u1082\\u1085-\\u1086\\u108d\\u109d\\u135d-\\u135f\\u1712-\\u1714\\u1732-\\u1734\\u1752-\\u1753\\u1772-\\u1773\\u17b4-\\u17b5' + '\\u17b7-\\u17bd\\u17c6\\u17c9-\\u17d3\\u17dd\\u180b-\\u180d\\u18a9\\u1920-\\u1922\\u1927-\\u1928\\u1932\\u1939-\\u193b\\u1a17-\\u1a18' + '\\u1a1b\\u1a56\\u1a58-\\u1a5e\\u1a60\\u1a62\\u1a65-\\u1a6c\\u1a73-\\u1a7c\\u1a7f\\u1ab0-\\u1abd\\u1ABE\\u1b00-\\u1b03\\u1b34' + '\\u1b36-\\u1b3a\\u1b3c\\u1b42\\u1b6b-\\u1b73\\u1b80-\\u1b81\\u1ba2-\\u1ba5\\u1ba8-\\u1ba9\\u1bab-\\u1bad\\u1be6\\u1be8-\\u1be9' + '\\u1bed\\u1bef-\\u1bf1\\u1c2c-\\u1c33\\u1c36-\\u1c37\\u1cd0-\\u1cd2\\u1cd4-\\u1ce0\\u1ce2-\\u1ce8\\u1ced\\u1cf4\\u1cf8-\\u1cf9' + '\\u1dc0-\\u1df5\\u1dfc-\\u1dff\\u200c-\\u200d\\u20d0-\\u20dc\\u20DD-\\u20E0\\u20e1\\u20E2-\\u20E4\\u20e5-\\u20f0\\u2cef-\\u2cf1' + '\\u2d7f\\u2de0-\\u2dff\\u302a-\\u302d\\u302e-\\u302f\\u3099-\\u309a\\ua66f\\uA670-\\uA672\\ua674-\\ua67d\\ua69e-\\ua69f\\ua6f0-\\ua6f1' + '\\ua802\\ua806\\ua80b\\ua825-\\ua826\\ua8c4\\ua8e0-\\ua8f1\\ua926-\\ua92d\\ua947-\\ua951\\ua980-\\ua982\\ua9b3\\ua9b6-\\ua9b9\\ua9bc' + '\\ua9e5\\uaa29-\\uaa2e\\uaa31-\\uaa32\\uaa35-\\uaa36\\uaa43\\uaa4c\\uaa7c\\uaab0\\uaab2-\\uaab4\\uaab7-\\uaab8\\uaabe-\\uaabf\\uaac1' + '\\uaaec-\\uaaed\\uaaf6\\uabe5\\uabe8\\uabed\\ufb1e\\ufe00-\\ufe0f\\ufe20-\\ufe2f\\uff9e-\\uff9f]');\r\n    var isExtendingChar = function (ch) {\r\n      return typeof ch === 'string' && ch.charCodeAt(0) >= 768 && extendingChars.test(ch);\r\n    };\r\n\r\n    var or = function () {\r\n      var args = [];\r\n      for (var _i = 0; _i < arguments.length; _i++) {\r\n        args[_i] = arguments[_i];\r\n      }\r\n      return function (x) {\r\n        for (var i = 0; i < args.length; i++) {\r\n          if (args[i](x)) {\r\n            return true;\r\n          }\r\n        }\r\n        return false;\r\n      };\r\n    };\r\n    var and = function () {\r\n      var args = [];\r\n      for (var _i = 0; _i < arguments.length; _i++) {\r\n        args[_i] = arguments[_i];\r\n      }\r\n      return function (x) {\r\n        for (var i = 0; i < args.length; i++) {\r\n          if (!args[i](x)) {\r\n            return false;\r\n          }\r\n        }\r\n        return true;\r\n      };\r\n    };\r\n\r\n    var isElement$3 = isElement$5;\r\n    var isCaretCandidate$2 = isCaretCandidate$3;\r\n    var isBlock$1 = matchStyleValues('display', 'block table');\r\n    var isFloated = matchStyleValues('float', 'left right');\r\n    var isValidElementCaretCandidate = and(isElement$3, isCaretCandidate$2, not(isFloated));\r\n    var isNotPre = not(matchStyleValues('white-space', 'pre pre-line pre-wrap'));\r\n    var isText$4 = isText$7;\r\n    var isBr$2 = isBr$5;\r\n    var nodeIndex$1 = DOMUtils.nodeIndex;\r\n    var resolveIndex$1 = getNodeUnsafe;\r\n    var createRange$1 = function (doc) {\r\n      return 'createRange' in doc ? doc.createRange() : DOMUtils.DOM.createRng();\r\n    };\r\n    var isWhiteSpace$1 = function (chr) {\r\n      return chr && /[\\r\\n\\t ]/.test(chr);\r\n    };\r\n    var isRange = function (rng) {\r\n      return !!rng.setStart && !!rng.setEnd;\r\n    };\r\n    var isHiddenWhiteSpaceRange = function (range) {\r\n      var container = range.startContainer;\r\n      var offset = range.startOffset;\r\n      if (isWhiteSpace$1(range.toString()) && isNotPre(container.parentNode) && isText$7(container)) {\r\n        var text = container.data;\r\n        if (isWhiteSpace$1(text[offset - 1]) || isWhiteSpace$1(text[offset + 1])) {\r\n          return true;\r\n        }\r\n      }\r\n      return false;\r\n    };\r\n    var getBrClientRect = function (brNode) {\r\n      var doc = brNode.ownerDocument;\r\n      var rng = createRange$1(doc);\r\n      var nbsp$1 = doc.createTextNode(nbsp);\r\n      var parentNode = brNode.parentNode;\r\n      parentNode.insertBefore(nbsp$1, brNode);\r\n      rng.setStart(nbsp$1, 0);\r\n      rng.setEnd(nbsp$1, 1);\r\n      var clientRect = clone(rng.getBoundingClientRect());\r\n      parentNode.removeChild(nbsp$1);\r\n      return clientRect;\r\n    };\r\n    var getBoundingClientRectWebKitText = function (rng) {\r\n      var sc = rng.startContainer;\r\n      var ec = rng.endContainer;\r\n      var so = rng.startOffset;\r\n      var eo = rng.endOffset;\r\n      if (sc === ec && isText$7(ec) && so === 0 && eo === 1) {\r\n        var newRng = rng.cloneRange();\r\n        newRng.setEndAfter(ec);\r\n        return getBoundingClientRect$1(newRng);\r\n      } else {\r\n        return null;\r\n      }\r\n    };\r\n    var isZeroRect = function (r) {\r\n      return r.left === 0 && r.right === 0 && r.top === 0 && r.bottom === 0;\r\n    };\r\n    var getBoundingClientRect$1 = function (item) {\r\n      var clientRect;\r\n      var clientRects = item.getClientRects();\r\n      if (clientRects.length > 0) {\r\n        clientRect = clone(clientRects[0]);\r\n      } else {\r\n        clientRect = clone(item.getBoundingClientRect());\r\n      }\r\n      if (!isRange(item) && isBr$2(item) && isZeroRect(clientRect)) {\r\n        return getBrClientRect(item);\r\n      }\r\n      if (isZeroRect(clientRect) && isRange(item)) {\r\n        return getBoundingClientRectWebKitText(item);\r\n      }\r\n      return clientRect;\r\n    };\r\n    var collapseAndInflateWidth = function (clientRect, toStart) {\r\n      var newClientRect = collapse(clientRect, toStart);\r\n      newClientRect.width = 1;\r\n      newClientRect.right = newClientRect.left + 1;\r\n      return newClientRect;\r\n    };\r\n    var getCaretPositionClientRects = function (caretPosition) {\r\n      var clientRects = [];\r\n      var addUniqueAndValidRect = function (clientRect) {\r\n        if (clientRect.height === 0) {\r\n          return;\r\n        }\r\n        if (clientRects.length > 0) {\r\n          if (isEqual(clientRect, clientRects[clientRects.length - 1])) {\r\n            return;\r\n          }\r\n        }\r\n        clientRects.push(clientRect);\r\n      };\r\n      var addCharacterOffset = function (container, offset) {\r\n        var range = createRange$1(container.ownerDocument);\r\n        if (offset < container.data.length) {\r\n          if (isExtendingChar(container.data[offset])) {\r\n            return clientRects;\r\n          }\r\n          if (isExtendingChar(container.data[offset - 1])) {\r\n            range.setStart(container, offset);\r\n            range.setEnd(container, offset + 1);\r\n            if (!isHiddenWhiteSpaceRange(range)) {\r\n              addUniqueAndValidRect(collapseAndInflateWidth(getBoundingClientRect$1(range), false));\r\n              return clientRects;\r\n            }\r\n          }\r\n        }\r\n        if (offset > 0) {\r\n          range.setStart(container, offset - 1);\r\n          range.setEnd(container, offset);\r\n          if (!isHiddenWhiteSpaceRange(range)) {\r\n            addUniqueAndValidRect(collapseAndInflateWidth(getBoundingClientRect$1(range), false));\r\n          }\r\n        }\r\n        if (offset < container.data.length) {\r\n          range.setStart(container, offset);\r\n          range.setEnd(container, offset + 1);\r\n          if (!isHiddenWhiteSpaceRange(range)) {\r\n            addUniqueAndValidRect(collapseAndInflateWidth(getBoundingClientRect$1(range), true));\r\n          }\r\n        }\r\n      };\r\n      var container = caretPosition.container();\r\n      var offset = caretPosition.offset();\r\n      if (isText$4(container)) {\r\n        addCharacterOffset(container, offset);\r\n        return clientRects;\r\n      }\r\n      if (isElement$3(container)) {\r\n        if (caretPosition.isAtEnd()) {\r\n          var node = resolveIndex$1(container, offset);\r\n          if (isText$4(node)) {\r\n            addCharacterOffset(node, node.data.length);\r\n          }\r\n          if (isValidElementCaretCandidate(node) && !isBr$2(node)) {\r\n            addUniqueAndValidRect(collapseAndInflateWidth(getBoundingClientRect$1(node), false));\r\n          }\r\n        } else {\r\n          var node = resolveIndex$1(container, offset);\r\n          if (isText$4(node)) {\r\n            addCharacterOffset(node, 0);\r\n          }\r\n          if (isValidElementCaretCandidate(node) && caretPosition.isAtEnd()) {\r\n            addUniqueAndValidRect(collapseAndInflateWidth(getBoundingClientRect$1(node), false));\r\n            return clientRects;\r\n          }\r\n          var beforeNode = resolveIndex$1(caretPosition.container(), caretPosition.offset() - 1);\r\n          if (isValidElementCaretCandidate(beforeNode) && !isBr$2(beforeNode)) {\r\n            if (isBlock$1(beforeNode) || isBlock$1(node) || !isValidElementCaretCandidate(node)) {\r\n              addUniqueAndValidRect(collapseAndInflateWidth(getBoundingClientRect$1(beforeNode), false));\r\n            }\r\n          }\r\n          if (isValidElementCaretCandidate(node)) {\r\n            addUniqueAndValidRect(collapseAndInflateWidth(getBoundingClientRect$1(node), true));\r\n          }\r\n        }\r\n      }\r\n      return clientRects;\r\n    };\r\n    var CaretPosition = function (container, offset, clientRects) {\r\n      var isAtStart = function () {\r\n        if (isText$4(container)) {\r\n          return offset === 0;\r\n        }\r\n        return offset === 0;\r\n      };\r\n      var isAtEnd = function () {\r\n        if (isText$4(container)) {\r\n          return offset >= container.data.length;\r\n        }\r\n        return offset >= container.childNodes.length;\r\n      };\r\n      var toRange = function () {\r\n        var range = createRange$1(container.ownerDocument);\r\n        range.setStart(container, offset);\r\n        range.setEnd(container, offset);\r\n        return range;\r\n      };\r\n      var getClientRects = function () {\r\n        if (!clientRects) {\r\n          clientRects = getCaretPositionClientRects(CaretPosition(container, offset));\r\n        }\r\n        return clientRects;\r\n      };\r\n      var isVisible = function () {\r\n        return getClientRects().length > 0;\r\n      };\r\n      var isEqual = function (caretPosition) {\r\n        return caretPosition && container === caretPosition.container() && offset === caretPosition.offset();\r\n      };\r\n      var getNode = function (before) {\r\n        return resolveIndex$1(container, before ? offset - 1 : offset);\r\n      };\r\n      return {\r\n        container: constant(container),\r\n        offset: constant(offset),\r\n        toRange: toRange,\r\n        getClientRects: getClientRects,\r\n        isVisible: isVisible,\r\n        isAtStart: isAtStart,\r\n        isAtEnd: isAtEnd,\r\n        isEqual: isEqual,\r\n        getNode: getNode\r\n      };\r\n    };\r\n    CaretPosition.fromRangeStart = function (range) {\r\n      return CaretPosition(range.startContainer, range.startOffset);\r\n    };\r\n    CaretPosition.fromRangeEnd = function (range) {\r\n      return CaretPosition(range.endContainer, range.endOffset);\r\n    };\r\n    CaretPosition.after = function (node) {\r\n      return CaretPosition(node.parentNode, nodeIndex$1(node) + 1);\r\n    };\r\n    CaretPosition.before = function (node) {\r\n      return CaretPosition(node.parentNode, nodeIndex$1(node));\r\n    };\r\n    CaretPosition.isAbove = function (pos1, pos2) {\r\n      return lift2(head(pos2.getClientRects()), last$2(pos1.getClientRects()), isAbove$1).getOr(false);\r\n    };\r\n    CaretPosition.isBelow = function (pos1, pos2) {\r\n      return lift2(last$2(pos2.getClientRects()), head(pos1.getClientRects()), isBelow$1).getOr(false);\r\n    };\r\n    CaretPosition.isAtStart = function (pos) {\r\n      return pos ? pos.isAtStart() : false;\r\n    };\r\n    CaretPosition.isAtEnd = function (pos) {\r\n      return pos ? pos.isAtEnd() : false;\r\n    };\r\n    CaretPosition.isTextPosition = function (pos) {\r\n      return pos ? isText$7(pos.container()) : false;\r\n    };\r\n    CaretPosition.isElementPosition = function (pos) {\r\n      return CaretPosition.isTextPosition(pos) === false;\r\n    };\r\n\r\n    var trimEmptyTextNode$1 = function (dom, node) {\r\n      if (isText$7(node) && node.data.length === 0) {\r\n        dom.remove(node);\r\n      }\r\n    };\r\n    var insertNode = function (dom, rng, node) {\r\n      rng.insertNode(node);\r\n      trimEmptyTextNode$1(dom, node.previousSibling);\r\n      trimEmptyTextNode$1(dom, node.nextSibling);\r\n    };\r\n    var insertFragment = function (dom, rng, frag) {\r\n      var firstChild = Optional.from(frag.firstChild);\r\n      var lastChild = Optional.from(frag.lastChild);\r\n      rng.insertNode(frag);\r\n      firstChild.each(function (child) {\r\n        return trimEmptyTextNode$1(dom, child.previousSibling);\r\n      });\r\n      lastChild.each(function (child) {\r\n        return trimEmptyTextNode$1(dom, child.nextSibling);\r\n      });\r\n    };\r\n    var rangeInsertNode = function (dom, rng, node) {\r\n      if (isDocumentFragment(node)) {\r\n        insertFragment(dom, rng, node);\r\n      } else {\r\n        insertNode(dom, rng, node);\r\n      }\r\n    };\r\n\r\n    var isText$3 = isText$7;\r\n    var isBogus = isBogus$2;\r\n    var nodeIndex = DOMUtils.nodeIndex;\r\n    var normalizedParent = function (node) {\r\n      var parentNode = node.parentNode;\r\n      if (isBogus(parentNode)) {\r\n        return normalizedParent(parentNode);\r\n      }\r\n      return parentNode;\r\n    };\r\n    var getChildNodes = function (node) {\r\n      if (!node) {\r\n        return [];\r\n      }\r\n      return reduce(node.childNodes, function (result, node) {\r\n        if (isBogus(node) && node.nodeName !== 'BR') {\r\n          result = result.concat(getChildNodes(node));\r\n        } else {\r\n          result.push(node);\r\n        }\r\n        return result;\r\n      }, []);\r\n    };\r\n    var normalizedTextOffset = function (node, offset) {\r\n      while (node = node.previousSibling) {\r\n        if (!isText$3(node)) {\r\n          break;\r\n        }\r\n        offset += node.data.length;\r\n      }\r\n      return offset;\r\n    };\r\n    var equal = function (a) {\r\n      return function (b) {\r\n        return a === b;\r\n      };\r\n    };\r\n    var normalizedNodeIndex = function (node) {\r\n      var nodes, index;\r\n      nodes = getChildNodes(normalizedParent(node));\r\n      index = findIndex$1(nodes, equal(node), node);\r\n      nodes = nodes.slice(0, index + 1);\r\n      var numTextFragments = reduce(nodes, function (result, node, i) {\r\n        if (isText$3(node) && isText$3(nodes[i - 1])) {\r\n          result++;\r\n        }\r\n        return result;\r\n      }, 0);\r\n      nodes = filter$2(nodes, matchNodeNames([node.nodeName]));\r\n      index = findIndex$1(nodes, equal(node), node);\r\n      return index - numTextFragments;\r\n    };\r\n    var createPathItem = function (node) {\r\n      var name;\r\n      if (isText$3(node)) {\r\n        name = 'text()';\r\n      } else {\r\n        name = node.nodeName.toLowerCase();\r\n      }\r\n      return name + '[' + normalizedNodeIndex(node) + ']';\r\n    };\r\n    var parentsUntil$1 = function (root, node, predicate) {\r\n      var parents = [];\r\n      for (node = node.parentNode; node !== root; node = node.parentNode) {\r\n        if (predicate && predicate(node)) {\r\n          break;\r\n        }\r\n        parents.push(node);\r\n      }\r\n      return parents;\r\n    };\r\n    var create$6 = function (root, caretPosition) {\r\n      var container, offset, path = [], outputOffset, childNodes, parents;\r\n      container = caretPosition.container();\r\n      offset = caretPosition.offset();\r\n      if (isText$3(container)) {\r\n        outputOffset = normalizedTextOffset(container, offset);\r\n      } else {\r\n        childNodes = container.childNodes;\r\n        if (offset >= childNodes.length) {\r\n          outputOffset = 'after';\r\n          offset = childNodes.length - 1;\r\n        } else {\r\n          outputOffset = 'before';\r\n        }\r\n        container = childNodes[offset];\r\n      }\r\n      path.push(createPathItem(container));\r\n      parents = parentsUntil$1(root, container);\r\n      parents = filter$2(parents, not(isBogus$2));\r\n      path = path.concat(map$1(parents, function (node) {\r\n        return createPathItem(node);\r\n      }));\r\n      return path.reverse().join('/') + ',' + outputOffset;\r\n    };\r\n    var resolvePathItem = function (node, name, index) {\r\n      var nodes = getChildNodes(node);\r\n      nodes = filter$2(nodes, function (node, index) {\r\n        return !isText$3(node) || !isText$3(nodes[index - 1]);\r\n      });\r\n      nodes = filter$2(nodes, matchNodeNames([name]));\r\n      return nodes[index];\r\n    };\r\n    var findTextPosition = function (container, offset) {\r\n      var node = container, targetOffset = 0, dataLen;\r\n      while (isText$3(node)) {\r\n        dataLen = node.data.length;\r\n        if (offset >= targetOffset && offset <= targetOffset + dataLen) {\r\n          container = node;\r\n          offset = offset - targetOffset;\r\n          break;\r\n        }\r\n        if (!isText$3(node.nextSibling)) {\r\n          container = node;\r\n          offset = dataLen;\r\n          break;\r\n        }\r\n        targetOffset += dataLen;\r\n        node = node.nextSibling;\r\n      }\r\n      if (isText$3(container) && offset > container.data.length) {\r\n        offset = container.data.length;\r\n      }\r\n      return CaretPosition(container, offset);\r\n    };\r\n    var resolve$2 = function (root, path) {\r\n      var offset;\r\n      if (!path) {\r\n        return null;\r\n      }\r\n      var parts = path.split(',');\r\n      var paths = parts[0].split('/');\r\n      offset = parts.length > 1 ? parts[1] : 'before';\r\n      var container = reduce(paths, function (result, value) {\r\n        var match = /([\\w\\-\\(\\)]+)\\[([0-9]+)\\]/.exec(value);\r\n        if (!match) {\r\n          return null;\r\n        }\r\n        if (match[1] === 'text()') {\r\n          match[1] = '#text';\r\n        }\r\n        return resolvePathItem(result, match[1], parseInt(match[2], 10));\r\n      }, root);\r\n      if (!container) {\r\n        return null;\r\n      }\r\n      if (!isText$3(container)) {\r\n        if (offset === 'after') {\r\n          offset = nodeIndex(container) + 1;\r\n        } else {\r\n          offset = nodeIndex(container);\r\n        }\r\n        return CaretPosition(container.parentNode, offset);\r\n      }\r\n      return findTextPosition(container, parseInt(offset, 10));\r\n    };\r\n\r\n    var isContentEditableFalse$9 = isContentEditableFalse$b;\r\n    var getNormalizedTextOffset = function (trim, container, offset) {\r\n      var node, trimmedOffset;\r\n      trimmedOffset = trim(container.data.slice(0, offset)).length;\r\n      for (node = container.previousSibling; node && isText$7(node); node = node.previousSibling) {\r\n        trimmedOffset += trim(node.data).length;\r\n      }\r\n      return trimmedOffset;\r\n    };\r\n    var getPoint = function (dom, trim, normalized, rng, start) {\r\n      var container = rng[start ? 'startContainer' : 'endContainer'];\r\n      var offset = rng[start ? 'startOffset' : 'endOffset'];\r\n      var point = [];\r\n      var childNodes, after = 0;\r\n      var root = dom.getRoot();\r\n      if (isText$7(container)) {\r\n        point.push(normalized ? getNormalizedTextOffset(trim, container, offset) : offset);\r\n      } else {\r\n        childNodes = container.childNodes;\r\n        if (offset >= childNodes.length && childNodes.length) {\r\n          after = 1;\r\n          offset = Math.max(0, childNodes.length - 1);\r\n        }\r\n        point.push(dom.nodeIndex(childNodes[offset], normalized) + after);\r\n      }\r\n      for (; container && container !== root; container = container.parentNode) {\r\n        point.push(dom.nodeIndex(container, normalized));\r\n      }\r\n      return point;\r\n    };\r\n    var getLocation = function (trim, selection, normalized, rng) {\r\n      var dom = selection.dom, bookmark = {};\r\n      bookmark.start = getPoint(dom, trim, normalized, rng, true);\r\n      if (!selection.isCollapsed()) {\r\n        bookmark.end = getPoint(dom, trim, normalized, rng, false);\r\n      }\r\n      if (isRangeInCaretContainerBlock(rng)) {\r\n        bookmark.isFakeCaret = true;\r\n      }\r\n      return bookmark;\r\n    };\r\n    var findIndex = function (dom, name, element) {\r\n      var count = 0;\r\n      Tools.each(dom.select(name), function (node) {\r\n        if (node.getAttribute('data-mce-bogus') === 'all') {\r\n          return;\r\n        }\r\n        if (node === element) {\r\n          return false;\r\n        }\r\n        count++;\r\n      });\r\n      return count;\r\n    };\r\n    var moveEndPoint$1 = function (rng, start) {\r\n      var container, offset, childNodes;\r\n      var prefix = start ? 'start' : 'end';\r\n      container = rng[prefix + 'Container'];\r\n      offset = rng[prefix + 'Offset'];\r\n      if (isElement$5(container) && container.nodeName === 'TR') {\r\n        childNodes = container.childNodes;\r\n        container = childNodes[Math.min(start ? offset : offset - 1, childNodes.length - 1)];\r\n        if (container) {\r\n          offset = start ? 0 : container.childNodes.length;\r\n          rng['set' + (start ? 'Start' : 'End')](container, offset);\r\n        }\r\n      }\r\n    };\r\n    var normalizeTableCellSelection = function (rng) {\r\n      moveEndPoint$1(rng, true);\r\n      moveEndPoint$1(rng, false);\r\n      return rng;\r\n    };\r\n    var findSibling = function (node, offset) {\r\n      var sibling;\r\n      if (isElement$5(node)) {\r\n        node = getNode$1(node, offset);\r\n        if (isContentEditableFalse$9(node)) {\r\n          return node;\r\n        }\r\n      }\r\n      if (isCaretContainer$2(node)) {\r\n        if (isText$7(node) && isCaretContainerBlock$1(node)) {\r\n          node = node.parentNode;\r\n        }\r\n        sibling = node.previousSibling;\r\n        if (isContentEditableFalse$9(sibling)) {\r\n          return sibling;\r\n        }\r\n        sibling = node.nextSibling;\r\n        if (isContentEditableFalse$9(sibling)) {\r\n          return sibling;\r\n        }\r\n      }\r\n    };\r\n    var findAdjacentContentEditableFalseElm = function (rng) {\r\n      return findSibling(rng.startContainer, rng.startOffset) || findSibling(rng.endContainer, rng.endOffset);\r\n    };\r\n    var getOffsetBookmark = function (trim, normalized, selection) {\r\n      var element = selection.getNode();\r\n      var name = element ? element.nodeName : null;\r\n      var rng = selection.getRng();\r\n      if (isContentEditableFalse$9(element) || name === 'IMG') {\r\n        return {\r\n          name: name,\r\n          index: findIndex(selection.dom, name, element)\r\n        };\r\n      }\r\n      var sibling = findAdjacentContentEditableFalseElm(rng);\r\n      if (sibling) {\r\n        name = sibling.tagName;\r\n        return {\r\n          name: name,\r\n          index: findIndex(selection.dom, name, sibling)\r\n        };\r\n      }\r\n      return getLocation(trim, selection, normalized, rng);\r\n    };\r\n    var getCaretBookmark = function (selection) {\r\n      var rng = selection.getRng();\r\n      return {\r\n        start: create$6(selection.dom.getRoot(), CaretPosition.fromRangeStart(rng)),\r\n        end: create$6(selection.dom.getRoot(), CaretPosition.fromRangeEnd(rng))\r\n      };\r\n    };\r\n    var getRangeBookmark = function (selection) {\r\n      return { rng: selection.getRng() };\r\n    };\r\n    var createBookmarkSpan = function (dom, id, filled) {\r\n      var args = {\r\n        'data-mce-type': 'bookmark',\r\n        id: id,\r\n        'style': 'overflow:hidden;line-height:0px'\r\n      };\r\n      return filled ? dom.create('span', args, '&#xFEFF;') : dom.create('span', args);\r\n    };\r\n    var getPersistentBookmark = function (selection, filled) {\r\n      var dom = selection.dom;\r\n      var rng = selection.getRng();\r\n      var id = dom.uniqueId();\r\n      var collapsed = selection.isCollapsed();\r\n      var element = selection.getNode();\r\n      var name = element.nodeName;\r\n      if (name === 'IMG') {\r\n        return {\r\n          name: name,\r\n          index: findIndex(dom, name, element)\r\n        };\r\n      }\r\n      var rng2 = normalizeTableCellSelection(rng.cloneRange());\r\n      if (!collapsed) {\r\n        rng2.collapse(false);\r\n        var endBookmarkNode = createBookmarkSpan(dom, id + '_end', filled);\r\n        rangeInsertNode(dom, rng2, endBookmarkNode);\r\n      }\r\n      rng = normalizeTableCellSelection(rng);\r\n      rng.collapse(true);\r\n      var startBookmarkNode = createBookmarkSpan(dom, id + '_start', filled);\r\n      rangeInsertNode(dom, rng, startBookmarkNode);\r\n      selection.moveToBookmark({\r\n        id: id,\r\n        keep: true\r\n      });\r\n      return { id: id };\r\n    };\r\n    var getBookmark$2 = function (selection, type, normalized) {\r\n      if (type === 2) {\r\n        return getOffsetBookmark(trim$2, normalized, selection);\r\n      } else if (type === 3) {\r\n        return getCaretBookmark(selection);\r\n      } else if (type) {\r\n        return getRangeBookmark(selection);\r\n      } else {\r\n        return getPersistentBookmark(selection, false);\r\n      }\r\n    };\r\n    var getUndoBookmark = curry(getOffsetBookmark, identity, true);\r\n\r\n    var DOM$9 = DOMUtils.DOM;\r\n    var defaultPreviewStyles = 'font-family font-size font-weight font-style text-decoration text-transform color background-color border border-radius outline text-shadow';\r\n    var getBodySetting = function (editor, name, defaultValue) {\r\n      var value = editor.getParam(name, defaultValue);\r\n      if (value.indexOf('=') !== -1) {\r\n        var bodyObj = editor.getParam(name, '', 'hash');\r\n        return get$9(bodyObj, editor.id).getOr(defaultValue);\r\n      } else {\r\n        return value;\r\n      }\r\n    };\r\n    var getIframeAttrs = function (editor) {\r\n      return editor.getParam('iframe_attrs', {});\r\n    };\r\n    var getDocType = function (editor) {\r\n      return editor.getParam('doctype', '<!DOCTYPE html>');\r\n    };\r\n    var getDocumentBaseUrl = function (editor) {\r\n      return editor.getParam('document_base_url', '');\r\n    };\r\n    var getBodyId = function (editor) {\r\n      return getBodySetting(editor, 'body_id', 'tinymce');\r\n    };\r\n    var getBodyClass = function (editor) {\r\n      return getBodySetting(editor, 'body_class', '');\r\n    };\r\n    var getContentSecurityPolicy = function (editor) {\r\n      return editor.getParam('content_security_policy', '');\r\n    };\r\n    var shouldPutBrInPre$1 = function (editor) {\r\n      return editor.getParam('br_in_pre', true);\r\n    };\r\n    var getForcedRootBlock = function (editor) {\r\n      if (editor.getParam('force_p_newlines', false)) {\r\n        return 'p';\r\n      }\r\n      var block = editor.getParam('forced_root_block', 'p');\r\n      if (block === false) {\r\n        return '';\r\n      } else if (block === true) {\r\n        return 'p';\r\n      } else {\r\n        return block;\r\n      }\r\n    };\r\n    var getForcedRootBlockAttrs = function (editor) {\r\n      return editor.getParam('forced_root_block_attrs', {});\r\n    };\r\n    var getBrNewLineSelector = function (editor) {\r\n      return editor.getParam('br_newline_selector', '.mce-toc h2,figcaption,caption');\r\n    };\r\n    var getNoNewLineSelector = function (editor) {\r\n      return editor.getParam('no_newline_selector', '');\r\n    };\r\n    var shouldKeepStyles = function (editor) {\r\n      return editor.getParam('keep_styles', true);\r\n    };\r\n    var shouldEndContainerOnEmptyBlock = function (editor) {\r\n      return editor.getParam('end_container_on_empty_block', false);\r\n    };\r\n    var getFontStyleValues = function (editor) {\r\n      return Tools.explode(editor.getParam('font_size_style_values', 'xx-small,x-small,small,medium,large,x-large,xx-large'));\r\n    };\r\n    var getFontSizeClasses = function (editor) {\r\n      return Tools.explode(editor.getParam('font_size_classes', ''));\r\n    };\r\n    var getImagesDataImgFilter = function (editor) {\r\n      return editor.getParam('images_dataimg_filter', always, 'function');\r\n    };\r\n    var isAutomaticUploadsEnabled = function (editor) {\r\n      return editor.getParam('automatic_uploads', true, 'boolean');\r\n    };\r\n    var shouldReuseFileName = function (editor) {\r\n      return editor.getParam('images_reuse_filename', false, 'boolean');\r\n    };\r\n    var shouldReplaceBlobUris = function (editor) {\r\n      return editor.getParam('images_replace_blob_uris', true, 'boolean');\r\n    };\r\n    var getIconPackName = function (editor) {\r\n      return editor.getParam('icons', '', 'string');\r\n    };\r\n    var getIconsUrl = function (editor) {\r\n      return editor.getParam('icons_url', '', 'string');\r\n    };\r\n    var getImageUploadUrl = function (editor) {\r\n      return editor.getParam('images_upload_url', '', 'string');\r\n    };\r\n    var getImageUploadBasePath = function (editor) {\r\n      return editor.getParam('images_upload_base_path', '', 'string');\r\n    };\r\n    var getImagesUploadCredentials = function (editor) {\r\n      return editor.getParam('images_upload_credentials', false, 'boolean');\r\n    };\r\n    var getImagesUploadHandler = function (editor) {\r\n      return editor.getParam('images_upload_handler', null, 'function');\r\n    };\r\n    var shouldUseContentCssCors = function (editor) {\r\n      return editor.getParam('content_css_cors', false, 'boolean');\r\n    };\r\n    var getReferrerPolicy = function (editor) {\r\n      return editor.getParam('referrer_policy', '', 'string');\r\n    };\r\n    var getLanguageCode = function (editor) {\r\n      return editor.getParam('language', 'en', 'string');\r\n    };\r\n    var getLanguageUrl = function (editor) {\r\n      return editor.getParam('language_url', '', 'string');\r\n    };\r\n    var shouldIndentUseMargin = function (editor) {\r\n      return editor.getParam('indent_use_margin', false);\r\n    };\r\n    var getIndentation = function (editor) {\r\n      return editor.getParam('indentation', '40px', 'string');\r\n    };\r\n    var getContentCss = function (editor) {\r\n      var contentCss = editor.getParam('content_css');\r\n      if (isString$1(contentCss)) {\r\n        return map$3(contentCss.split(','), trim$4);\r\n      } else if (isArray$1(contentCss)) {\r\n        return contentCss;\r\n      } else if (contentCss === false || editor.inline) {\r\n        return [];\r\n      } else {\r\n        return ['default'];\r\n      }\r\n    };\r\n    var getFontCss = function (editor) {\r\n      var fontCss = editor.getParam('font_css', []);\r\n      return isArray$1(fontCss) ? fontCss : map$3(fontCss.split(','), trim$4);\r\n    };\r\n    var getDirectionality = function (editor) {\r\n      return editor.getParam('directionality', I18n.isRtl() ? 'rtl' : undefined);\r\n    };\r\n    var getInlineBoundarySelector = function (editor) {\r\n      return editor.getParam('inline_boundaries_selector', 'a[href],code,.mce-annotation', 'string');\r\n    };\r\n    var getObjectResizing = function (editor) {\r\n      var selector = editor.getParam('object_resizing');\r\n      if (selector === false || Env.iOS) {\r\n        return false;\r\n      } else {\r\n        return isString$1(selector) ? selector : 'table,img,figure.image,div,video,iframe';\r\n      }\r\n    };\r\n    var getResizeImgProportional = function (editor) {\r\n      return editor.getParam('resize_img_proportional', true, 'boolean');\r\n    };\r\n    var getPlaceholder = function (editor) {\r\n      return editor.getParam('placeholder', DOM$9.getAttrib(editor.getElement(), 'placeholder'), 'string');\r\n    };\r\n    var getEventRoot = function (editor) {\r\n      return editor.getParam('event_root');\r\n    };\r\n    var getServiceMessage = function (editor) {\r\n      return editor.getParam('service_message');\r\n    };\r\n    var getTheme = function (editor) {\r\n      return editor.getParam('theme');\r\n    };\r\n    var shouldValidate = function (editor) {\r\n      return editor.getParam('validate');\r\n    };\r\n    var isInlineBoundariesEnabled = function (editor) {\r\n      return editor.getParam('inline_boundaries') !== false;\r\n    };\r\n    var getFormats = function (editor) {\r\n      return editor.getParam('formats');\r\n    };\r\n    var getPreviewStyles = function (editor) {\r\n      var style = editor.getParam('preview_styles', defaultPreviewStyles);\r\n      if (isString$1(style)) {\r\n        return style;\r\n      } else {\r\n        return '';\r\n      }\r\n    };\r\n    var canFormatEmptyLines = function (editor) {\r\n      return editor.getParam('format_empty_lines', false, 'boolean');\r\n    };\r\n    var getCustomUiSelector = function (editor) {\r\n      return editor.getParam('custom_ui_selector', '', 'string');\r\n    };\r\n    var getThemeUrl = function (editor) {\r\n      return editor.getParam('theme_url');\r\n    };\r\n    var isInline = function (editor) {\r\n      return editor.getParam('inline');\r\n    };\r\n    var hasHiddenInput = function (editor) {\r\n      return editor.getParam('hidden_input');\r\n    };\r\n    var shouldPatchSubmit = function (editor) {\r\n      return editor.getParam('submit_patch');\r\n    };\r\n    var isEncodingXml = function (editor) {\r\n      return editor.getParam('encoding') === 'xml';\r\n    };\r\n    var shouldAddFormSubmitTrigger = function (editor) {\r\n      return editor.getParam('add_form_submit_trigger');\r\n    };\r\n    var shouldAddUnloadTrigger = function (editor) {\r\n      return editor.getParam('add_unload_trigger');\r\n    };\r\n    var hasForcedRootBlock = function (editor) {\r\n      return getForcedRootBlock(editor) !== '';\r\n    };\r\n    var getCustomUndoRedoLevels = function (editor) {\r\n      return editor.getParam('custom_undo_redo_levels', 0, 'number');\r\n    };\r\n    var shouldDisableNodeChange = function (editor) {\r\n      return editor.getParam('disable_nodechange');\r\n    };\r\n    var isReadOnly$1 = function (editor) {\r\n      return editor.getParam('readonly');\r\n    };\r\n    var hasContentCssCors = function (editor) {\r\n      return editor.getParam('content_css_cors');\r\n    };\r\n    var getPlugins = function (editor) {\r\n      return editor.getParam('plugins', '', 'string');\r\n    };\r\n    var getExternalPlugins$1 = function (editor) {\r\n      return editor.getParam('external_plugins');\r\n    };\r\n    var shouldBlockUnsupportedDrop = function (editor) {\r\n      return editor.getParam('block_unsupported_drop', true, 'boolean');\r\n    };\r\n    var isVisualAidsEnabled = function (editor) {\r\n      return editor.getParam('visual', true, 'boolean');\r\n    };\r\n    var getVisualAidsTableClass = function (editor) {\r\n      return editor.getParam('visual_table_class', 'mce-item-table', 'string');\r\n    };\r\n    var getVisualAidsAnchorClass = function (editor) {\r\n      return editor.getParam('visual_anchor_class', 'mce-item-anchor', 'string');\r\n    };\r\n    var getIframeAriaText = function (editor) {\r\n      return editor.getParam('iframe_aria_text', 'Rich Text Area. Press ALT-0 for help.', 'string');\r\n    };\r\n\r\n    var isElement$2 = isElement$5;\r\n    var isText$2 = isText$7;\r\n    var removeNode$1 = function (node) {\r\n      var parentNode = node.parentNode;\r\n      if (parentNode) {\r\n        parentNode.removeChild(node);\r\n      }\r\n    };\r\n    var trimCount = function (text) {\r\n      var trimmedText = trim$2(text);\r\n      return {\r\n        count: text.length - trimmedText.length,\r\n        text: trimmedText\r\n      };\r\n    };\r\n    var deleteZwspChars = function (caretContainer) {\r\n      var idx;\r\n      while ((idx = caretContainer.data.lastIndexOf(ZWSP$1)) !== -1) {\r\n        caretContainer.deleteData(idx, 1);\r\n      }\r\n    };\r\n    var removeUnchanged = function (caretContainer, pos) {\r\n      remove$2(caretContainer);\r\n      return pos;\r\n    };\r\n    var removeTextAndReposition = function (caretContainer, pos) {\r\n      var before = trimCount(caretContainer.data.substr(0, pos.offset()));\r\n      var after = trimCount(caretContainer.data.substr(pos.offset()));\r\n      var text = before.text + after.text;\r\n      if (text.length > 0) {\r\n        deleteZwspChars(caretContainer);\r\n        return CaretPosition(caretContainer, pos.offset() - before.count);\r\n      } else {\r\n        return pos;\r\n      }\r\n    };\r\n    var removeElementAndReposition = function (caretContainer, pos) {\r\n      var parentNode = pos.container();\r\n      var newPosition = indexOf$2(from(parentNode.childNodes), caretContainer).map(function (index) {\r\n        return index < pos.offset() ? CaretPosition(parentNode, pos.offset() - 1) : pos;\r\n      }).getOr(pos);\r\n      remove$2(caretContainer);\r\n      return newPosition;\r\n    };\r\n    var removeTextCaretContainer = function (caretContainer, pos) {\r\n      return isText$2(caretContainer) && pos.container() === caretContainer ? removeTextAndReposition(caretContainer, pos) : removeUnchanged(caretContainer, pos);\r\n    };\r\n    var removeElementCaretContainer = function (caretContainer, pos) {\r\n      return pos.container() === caretContainer.parentNode ? removeElementAndReposition(caretContainer, pos) : removeUnchanged(caretContainer, pos);\r\n    };\r\n    var removeAndReposition = function (container, pos) {\r\n      return CaretPosition.isTextPosition(pos) ? removeTextCaretContainer(container, pos) : removeElementCaretContainer(container, pos);\r\n    };\r\n    var remove$2 = function (caretContainerNode) {\r\n      if (isElement$2(caretContainerNode) && isCaretContainer$2(caretContainerNode)) {\r\n        if (hasContent(caretContainerNode)) {\r\n          caretContainerNode.removeAttribute('data-mce-caret');\r\n        } else {\r\n          removeNode$1(caretContainerNode);\r\n        }\r\n      }\r\n      if (isText$2(caretContainerNode)) {\r\n        deleteZwspChars(caretContainerNode);\r\n        if (caretContainerNode.data.length === 0) {\r\n          removeNode$1(caretContainerNode);\r\n        }\r\n      }\r\n    };\r\n\r\n    var browser$2 = detect().browser;\r\n    var isContentEditableFalse$8 = isContentEditableFalse$b;\r\n    var isMedia$1 = isMedia$2;\r\n    var isTableCell$3 = isTableCell$5;\r\n    var inlineFakeCaretSelector = '*[contentEditable=false],video,audio,embed,object';\r\n    var getAbsoluteClientRect = function (root, element, before) {\r\n      var clientRect = collapse(element.getBoundingClientRect(), before);\r\n      var scrollX;\r\n      var scrollY;\r\n      if (root.tagName === 'BODY') {\r\n        var docElm = root.ownerDocument.documentElement;\r\n        scrollX = root.scrollLeft || docElm.scrollLeft;\r\n        scrollY = root.scrollTop || docElm.scrollTop;\r\n      } else {\r\n        var rootRect = root.getBoundingClientRect();\r\n        scrollX = root.scrollLeft - rootRect.left;\r\n        scrollY = root.scrollTop - rootRect.top;\r\n      }\r\n      clientRect.left += scrollX;\r\n      clientRect.right += scrollX;\r\n      clientRect.top += scrollY;\r\n      clientRect.bottom += scrollY;\r\n      clientRect.width = 1;\r\n      var margin = element.offsetWidth - element.clientWidth;\r\n      if (margin > 0) {\r\n        if (before) {\r\n          margin *= -1;\r\n        }\r\n        clientRect.left += margin;\r\n        clientRect.right += margin;\r\n      }\r\n      return clientRect;\r\n    };\r\n    var trimInlineCaretContainers = function (root) {\r\n      var fakeCaretTargetNodes = descendants(SugarElement.fromDom(root), inlineFakeCaretSelector);\r\n      for (var i = 0; i < fakeCaretTargetNodes.length; i++) {\r\n        var node = fakeCaretTargetNodes[i].dom;\r\n        var sibling = node.previousSibling;\r\n        if (endsWithCaretContainer$1(sibling)) {\r\n          var data = sibling.data;\r\n          if (data.length === 1) {\r\n            sibling.parentNode.removeChild(sibling);\r\n          } else {\r\n            sibling.deleteData(data.length - 1, 1);\r\n          }\r\n        }\r\n        sibling = node.nextSibling;\r\n        if (startsWithCaretContainer$1(sibling)) {\r\n          var data = sibling.data;\r\n          if (data.length === 1) {\r\n            sibling.parentNode.removeChild(sibling);\r\n          } else {\r\n            sibling.deleteData(0, 1);\r\n          }\r\n        }\r\n      }\r\n    };\r\n    var FakeCaret = function (editor, root, isBlock, hasFocus) {\r\n      var lastVisualCaret = value();\r\n      var cursorInterval;\r\n      var caretContainerNode;\r\n      var rootBlock = getForcedRootBlock(editor);\r\n      var caretBlock = rootBlock.length > 0 ? rootBlock : 'p';\r\n      var show = function (before, element) {\r\n        var rng;\r\n        hide();\r\n        if (isTableCell$3(element)) {\r\n          return null;\r\n        }\r\n        if (isBlock(element)) {\r\n          caretContainerNode = insertBlock$1(caretBlock, element, before);\r\n          var clientRect = getAbsoluteClientRect(root, element, before);\r\n          DomQuery(caretContainerNode).css('top', clientRect.top);\r\n          var caret = DomQuery('<div class=\"mce-visual-caret\" data-mce-bogus=\"all\"></div>').css(__assign({}, clientRect)).appendTo(root)[0];\r\n          lastVisualCaret.set({\r\n            caret: caret,\r\n            element: element,\r\n            before: before\r\n          });\r\n          if (before) {\r\n            DomQuery(caret).addClass('mce-visual-caret-before');\r\n          }\r\n          startBlink();\r\n          rng = element.ownerDocument.createRange();\r\n          rng.setStart(caretContainerNode, 0);\r\n          rng.setEnd(caretContainerNode, 0);\r\n        } else {\r\n          caretContainerNode = insertInline$1(element, before);\r\n          rng = element.ownerDocument.createRange();\r\n          if (isInlineFakeCaretTarget(caretContainerNode.nextSibling)) {\r\n            rng.setStart(caretContainerNode, 0);\r\n            rng.setEnd(caretContainerNode, 0);\r\n          } else {\r\n            rng.setStart(caretContainerNode, 1);\r\n            rng.setEnd(caretContainerNode, 1);\r\n          }\r\n          return rng;\r\n        }\r\n        return rng;\r\n      };\r\n      var hide = function () {\r\n        trimInlineCaretContainers(root);\r\n        if (caretContainerNode) {\r\n          remove$2(caretContainerNode);\r\n          caretContainerNode = null;\r\n        }\r\n        lastVisualCaret.on(function (caretState) {\r\n          DomQuery(caretState.caret).remove();\r\n          lastVisualCaret.clear();\r\n        });\r\n        if (cursorInterval) {\r\n          Delay.clearInterval(cursorInterval);\r\n          cursorInterval = undefined;\r\n        }\r\n      };\r\n      var startBlink = function () {\r\n        cursorInterval = Delay.setInterval(function () {\r\n          if (hasFocus()) {\r\n            DomQuery('div.mce-visual-caret', root).toggleClass('mce-visual-caret-hidden');\r\n          } else {\r\n            DomQuery('div.mce-visual-caret', root).addClass('mce-visual-caret-hidden');\r\n          }\r\n        }, 500);\r\n      };\r\n      var reposition = function () {\r\n        lastVisualCaret.on(function (caretState) {\r\n          var clientRect = getAbsoluteClientRect(root, caretState.element, caretState.before);\r\n          DomQuery(caretState.caret).css(__assign({}, clientRect));\r\n        });\r\n      };\r\n      var destroy = function () {\r\n        return Delay.clearInterval(cursorInterval);\r\n      };\r\n      var getCss = function () {\r\n        return '.mce-visual-caret {' + 'position: absolute;' + 'background-color: black;' + 'background-color: currentcolor;' + '}' + '.mce-visual-caret-hidden {' + 'display: none;' + '}' + '*[data-mce-caret] {' + 'position: absolute;' + 'left: -1000px;' + 'right: auto;' + 'top: 0;' + 'margin: 0;' + 'padding: 0;' + '}';\r\n      };\r\n      return {\r\n        show: show,\r\n        hide: hide,\r\n        getCss: getCss,\r\n        reposition: reposition,\r\n        destroy: destroy\r\n      };\r\n    };\r\n    var isFakeCaretTableBrowser = function () {\r\n      return browser$2.isIE() || browser$2.isEdge() || browser$2.isFirefox();\r\n    };\r\n    var isInlineFakeCaretTarget = function (node) {\r\n      return isContentEditableFalse$8(node) || isMedia$1(node);\r\n    };\r\n    var isFakeCaretTarget = function (node) {\r\n      return isInlineFakeCaretTarget(node) || isTable$3(node) && isFakeCaretTableBrowser();\r\n    };\r\n\r\n    var isContentEditableFalse$7 = isContentEditableFalse$b;\r\n    var isMedia = isMedia$2;\r\n    var isBlockLike = matchStyleValues('display', 'block table table-cell table-caption list-item');\r\n    var isCaretContainer = isCaretContainer$2;\r\n    var isCaretContainerBlock = isCaretContainerBlock$1;\r\n    var isElement$1 = isElement$5;\r\n    var isCaretCandidate$1 = isCaretCandidate$3;\r\n    var isForwards = function (direction) {\r\n      return direction > 0;\r\n    };\r\n    var isBackwards = function (direction) {\r\n      return direction < 0;\r\n    };\r\n    var skipCaretContainers = function (walk, shallow) {\r\n      var node;\r\n      while (node = walk(shallow)) {\r\n        if (!isCaretContainerBlock(node)) {\r\n          return node;\r\n        }\r\n      }\r\n      return null;\r\n    };\r\n    var findNode$1 = function (node, direction, predicateFn, rootNode, shallow) {\r\n      var walker = new DomTreeWalker(node, rootNode);\r\n      var isCefOrCaretContainer = isContentEditableFalse$7(node) || isCaretContainerBlock(node);\r\n      if (isBackwards(direction)) {\r\n        if (isCefOrCaretContainer) {\r\n          node = skipCaretContainers(walker.prev.bind(walker), true);\r\n          if (predicateFn(node)) {\r\n            return node;\r\n          }\r\n        }\r\n        while (node = skipCaretContainers(walker.prev.bind(walker), shallow)) {\r\n          if (predicateFn(node)) {\r\n            return node;\r\n          }\r\n        }\r\n      }\r\n      if (isForwards(direction)) {\r\n        if (isCefOrCaretContainer) {\r\n          node = skipCaretContainers(walker.next.bind(walker), true);\r\n          if (predicateFn(node)) {\r\n            return node;\r\n          }\r\n        }\r\n        while (node = skipCaretContainers(walker.next.bind(walker), shallow)) {\r\n          if (predicateFn(node)) {\r\n            return node;\r\n          }\r\n        }\r\n      }\r\n      return null;\r\n    };\r\n    var getParentBlock$2 = function (node, rootNode) {\r\n      while (node && node !== rootNode) {\r\n        if (isBlockLike(node)) {\r\n          return node;\r\n        }\r\n        node = node.parentNode;\r\n      }\r\n      return null;\r\n    };\r\n    var isInSameBlock = function (caretPosition1, caretPosition2, rootNode) {\r\n      return getParentBlock$2(caretPosition1.container(), rootNode) === getParentBlock$2(caretPosition2.container(), rootNode);\r\n    };\r\n    var getChildNodeAtRelativeOffset = function (relativeOffset, caretPosition) {\r\n      if (!caretPosition) {\r\n        return null;\r\n      }\r\n      var container = caretPosition.container();\r\n      var offset = caretPosition.offset();\r\n      if (!isElement$1(container)) {\r\n        return null;\r\n      }\r\n      return container.childNodes[offset + relativeOffset];\r\n    };\r\n    var beforeAfter = function (before, node) {\r\n      var range = node.ownerDocument.createRange();\r\n      if (before) {\r\n        range.setStartBefore(node);\r\n        range.setEndBefore(node);\r\n      } else {\r\n        range.setStartAfter(node);\r\n        range.setEndAfter(node);\r\n      }\r\n      return range;\r\n    };\r\n    var isNodesInSameBlock = function (root, node1, node2) {\r\n      return getParentBlock$2(node1, root) === getParentBlock$2(node2, root);\r\n    };\r\n    var lean = function (left, root, node) {\r\n      var siblingName = left ? 'previousSibling' : 'nextSibling';\r\n      while (node && node !== root) {\r\n        var sibling = node[siblingName];\r\n        if (isCaretContainer(sibling)) {\r\n          sibling = sibling[siblingName];\r\n        }\r\n        if (isContentEditableFalse$7(sibling) || isMedia(sibling)) {\r\n          if (isNodesInSameBlock(root, sibling, node)) {\r\n            return sibling;\r\n          }\r\n          break;\r\n        }\r\n        if (isCaretCandidate$1(sibling)) {\r\n          break;\r\n        }\r\n        node = node.parentNode;\r\n      }\r\n      return null;\r\n    };\r\n    var before$2 = curry(beforeAfter, true);\r\n    var after$2 = curry(beforeAfter, false);\r\n    var normalizeRange = function (direction, root, range) {\r\n      var node;\r\n      var leanLeft = curry(lean, true, root);\r\n      var leanRight = curry(lean, false, root);\r\n      var container = range.startContainer;\r\n      var offset = range.startOffset;\r\n      if (isCaretContainerBlock$1(container)) {\r\n        if (!isElement$1(container)) {\r\n          container = container.parentNode;\r\n        }\r\n        var location_1 = container.getAttribute('data-mce-caret');\r\n        if (location_1 === 'before') {\r\n          node = container.nextSibling;\r\n          if (isFakeCaretTarget(node)) {\r\n            return before$2(node);\r\n          }\r\n        }\r\n        if (location_1 === 'after') {\r\n          node = container.previousSibling;\r\n          if (isFakeCaretTarget(node)) {\r\n            return after$2(node);\r\n          }\r\n        }\r\n      }\r\n      if (!range.collapsed) {\r\n        return range;\r\n      }\r\n      if (isText$7(container)) {\r\n        if (isCaretContainer(container)) {\r\n          if (direction === 1) {\r\n            node = leanRight(container);\r\n            if (node) {\r\n              return before$2(node);\r\n            }\r\n            node = leanLeft(container);\r\n            if (node) {\r\n              return after$2(node);\r\n            }\r\n          }\r\n          if (direction === -1) {\r\n            node = leanLeft(container);\r\n            if (node) {\r\n              return after$2(node);\r\n            }\r\n            node = leanRight(container);\r\n            if (node) {\r\n              return before$2(node);\r\n            }\r\n          }\r\n          return range;\r\n        }\r\n        if (endsWithCaretContainer$1(container) && offset >= container.data.length - 1) {\r\n          if (direction === 1) {\r\n            node = leanRight(container);\r\n            if (node) {\r\n              return before$2(node);\r\n            }\r\n          }\r\n          return range;\r\n        }\r\n        if (startsWithCaretContainer$1(container) && offset <= 1) {\r\n          if (direction === -1) {\r\n            node = leanLeft(container);\r\n            if (node) {\r\n              return after$2(node);\r\n            }\r\n          }\r\n          return range;\r\n        }\r\n        if (offset === container.data.length) {\r\n          node = leanRight(container);\r\n          if (node) {\r\n            return before$2(node);\r\n          }\r\n          return range;\r\n        }\r\n        if (offset === 0) {\r\n          node = leanLeft(container);\r\n          if (node) {\r\n            return after$2(node);\r\n          }\r\n          return range;\r\n        }\r\n      }\r\n      return range;\r\n    };\r\n    var getRelativeCefElm = function (forward, caretPosition) {\r\n      return Optional.from(getChildNodeAtRelativeOffset(forward ? 0 : -1, caretPosition)).filter(isContentEditableFalse$7);\r\n    };\r\n    var getNormalizedRangeEndPoint = function (direction, root, range) {\r\n      var normalizedRange = normalizeRange(direction, root, range);\r\n      if (direction === -1) {\r\n        return CaretPosition.fromRangeStart(normalizedRange);\r\n      }\r\n      return CaretPosition.fromRangeEnd(normalizedRange);\r\n    };\r\n    var getElementFromPosition = function (pos) {\r\n      return Optional.from(pos.getNode()).map(SugarElement.fromDom);\r\n    };\r\n    var getElementFromPrevPosition = function (pos) {\r\n      return Optional.from(pos.getNode(true)).map(SugarElement.fromDom);\r\n    };\r\n    var getVisualCaretPosition = function (walkFn, caretPosition) {\r\n      while (caretPosition = walkFn(caretPosition)) {\r\n        if (caretPosition.isVisible()) {\r\n          return caretPosition;\r\n        }\r\n      }\r\n      return caretPosition;\r\n    };\r\n    var isMoveInsideSameBlock = function (from, to) {\r\n      var inSameBlock = isInSameBlock(from, to);\r\n      if (!inSameBlock && isBr$5(from.getNode())) {\r\n        return true;\r\n      }\r\n      return inSameBlock;\r\n    };\r\n\r\n    var HDirection;\r\n    (function (HDirection) {\r\n      HDirection[HDirection['Backwards'] = -1] = 'Backwards';\r\n      HDirection[HDirection['Forwards'] = 1] = 'Forwards';\r\n    }(HDirection || (HDirection = {})));\r\n    var isContentEditableFalse$6 = isContentEditableFalse$b;\r\n    var isText$1 = isText$7;\r\n    var isElement = isElement$5;\r\n    var isBr$1 = isBr$5;\r\n    var isCaretCandidate = isCaretCandidate$3;\r\n    var isAtomic = isAtomic$1;\r\n    var isEditableCaretCandidate = isEditableCaretCandidate$1;\r\n    var getParents$3 = function (node, root) {\r\n      var parents = [];\r\n      while (node && node !== root) {\r\n        parents.push(node);\r\n        node = node.parentNode;\r\n      }\r\n      return parents;\r\n    };\r\n    var nodeAtIndex = function (container, offset) {\r\n      if (container.hasChildNodes() && offset < container.childNodes.length) {\r\n        return container.childNodes[offset];\r\n      }\r\n      return null;\r\n    };\r\n    var getCaretCandidatePosition = function (direction, node) {\r\n      if (isForwards(direction)) {\r\n        if (isCaretCandidate(node.previousSibling) && !isText$1(node.previousSibling)) {\r\n          return CaretPosition.before(node);\r\n        }\r\n        if (isText$1(node)) {\r\n          return CaretPosition(node, 0);\r\n        }\r\n      }\r\n      if (isBackwards(direction)) {\r\n        if (isCaretCandidate(node.nextSibling) && !isText$1(node.nextSibling)) {\r\n          return CaretPosition.after(node);\r\n        }\r\n        if (isText$1(node)) {\r\n          return CaretPosition(node, node.data.length);\r\n        }\r\n      }\r\n      if (isBackwards(direction)) {\r\n        if (isBr$1(node)) {\r\n          return CaretPosition.before(node);\r\n        }\r\n        return CaretPosition.after(node);\r\n      }\r\n      return CaretPosition.before(node);\r\n    };\r\n    var moveForwardFromBr = function (root, nextNode) {\r\n      var nextSibling = nextNode.nextSibling;\r\n      if (nextSibling && isCaretCandidate(nextSibling)) {\r\n        if (isText$1(nextSibling)) {\r\n          return CaretPosition(nextSibling, 0);\r\n        } else {\r\n          return CaretPosition.before(nextSibling);\r\n        }\r\n      } else {\r\n        return findCaretPosition$1(HDirection.Forwards, CaretPosition.after(nextNode), root);\r\n      }\r\n    };\r\n    var findCaretPosition$1 = function (direction, startPos, root) {\r\n      var node;\r\n      var nextNode;\r\n      var innerNode;\r\n      var caretPosition;\r\n      if (!isElement(root) || !startPos) {\r\n        return null;\r\n      }\r\n      if (startPos.isEqual(CaretPosition.after(root)) && root.lastChild) {\r\n        caretPosition = CaretPosition.after(root.lastChild);\r\n        if (isBackwards(direction) && isCaretCandidate(root.lastChild) && isElement(root.lastChild)) {\r\n          return isBr$1(root.lastChild) ? CaretPosition.before(root.lastChild) : caretPosition;\r\n        }\r\n      } else {\r\n        caretPosition = startPos;\r\n      }\r\n      var container = caretPosition.container();\r\n      var offset = caretPosition.offset();\r\n      if (isText$1(container)) {\r\n        if (isBackwards(direction) && offset > 0) {\r\n          return CaretPosition(container, --offset);\r\n        }\r\n        if (isForwards(direction) && offset < container.length) {\r\n          return CaretPosition(container, ++offset);\r\n        }\r\n        node = container;\r\n      } else {\r\n        if (isBackwards(direction) && offset > 0) {\r\n          nextNode = nodeAtIndex(container, offset - 1);\r\n          if (isCaretCandidate(nextNode)) {\r\n            if (!isAtomic(nextNode)) {\r\n              innerNode = findNode$1(nextNode, direction, isEditableCaretCandidate, nextNode);\r\n              if (innerNode) {\r\n                if (isText$1(innerNode)) {\r\n                  return CaretPosition(innerNode, innerNode.data.length);\r\n                }\r\n                return CaretPosition.after(innerNode);\r\n              }\r\n            }\r\n            if (isText$1(nextNode)) {\r\n              return CaretPosition(nextNode, nextNode.data.length);\r\n            }\r\n            return CaretPosition.before(nextNode);\r\n          }\r\n        }\r\n        if (isForwards(direction) && offset < container.childNodes.length) {\r\n          nextNode = nodeAtIndex(container, offset);\r\n          if (isCaretCandidate(nextNode)) {\r\n            if (isBr$1(nextNode)) {\r\n              return moveForwardFromBr(root, nextNode);\r\n            }\r\n            if (!isAtomic(nextNode)) {\r\n              innerNode = findNode$1(nextNode, direction, isEditableCaretCandidate, nextNode);\r\n              if (innerNode) {\r\n                if (isText$1(innerNode)) {\r\n                  return CaretPosition(innerNode, 0);\r\n                }\r\n                return CaretPosition.before(innerNode);\r\n              }\r\n            }\r\n            if (isText$1(nextNode)) {\r\n              return CaretPosition(nextNode, 0);\r\n            }\r\n            return CaretPosition.after(nextNode);\r\n          }\r\n        }\r\n        node = nextNode ? nextNode : caretPosition.getNode();\r\n      }\r\n      if (isForwards(direction) && caretPosition.isAtEnd() || isBackwards(direction) && caretPosition.isAtStart()) {\r\n        node = findNode$1(node, direction, always, root, true);\r\n        if (isEditableCaretCandidate(node, root)) {\r\n          return getCaretCandidatePosition(direction, node);\r\n        }\r\n      }\r\n      nextNode = findNode$1(node, direction, isEditableCaretCandidate, root);\r\n      var rootContentEditableFalseElm = last$1(filter$4(getParents$3(container, root), isContentEditableFalse$6));\r\n      if (rootContentEditableFalseElm && (!nextNode || !rootContentEditableFalseElm.contains(nextNode))) {\r\n        if (isForwards(direction)) {\r\n          caretPosition = CaretPosition.after(rootContentEditableFalseElm);\r\n        } else {\r\n          caretPosition = CaretPosition.before(rootContentEditableFalseElm);\r\n        }\r\n        return caretPosition;\r\n      }\r\n      if (nextNode) {\r\n        return getCaretCandidatePosition(direction, nextNode);\r\n      }\r\n      return null;\r\n    };\r\n    var CaretWalker = function (root) {\r\n      return {\r\n        next: function (caretPosition) {\r\n          return findCaretPosition$1(HDirection.Forwards, caretPosition, root);\r\n        },\r\n        prev: function (caretPosition) {\r\n          return findCaretPosition$1(HDirection.Backwards, caretPosition, root);\r\n        }\r\n      };\r\n    };\r\n\r\n    var walkToPositionIn = function (forward, root, start) {\r\n      var position = forward ? CaretPosition.before(start) : CaretPosition.after(start);\r\n      return fromPosition(forward, root, position);\r\n    };\r\n    var afterElement = function (node) {\r\n      return isBr$5(node) ? CaretPosition.before(node) : CaretPosition.after(node);\r\n    };\r\n    var isBeforeOrStart = function (position) {\r\n      if (CaretPosition.isTextPosition(position)) {\r\n        return position.offset() === 0;\r\n      } else {\r\n        return isCaretCandidate$3(position.getNode());\r\n      }\r\n    };\r\n    var isAfterOrEnd = function (position) {\r\n      if (CaretPosition.isTextPosition(position)) {\r\n        var container = position.container();\r\n        return position.offset() === container.data.length;\r\n      } else {\r\n        return isCaretCandidate$3(position.getNode(true));\r\n      }\r\n    };\r\n    var isBeforeAfterSameElement = function (from, to) {\r\n      return !CaretPosition.isTextPosition(from) && !CaretPosition.isTextPosition(to) && from.getNode() === to.getNode(true);\r\n    };\r\n    var isAtBr = function (position) {\r\n      return !CaretPosition.isTextPosition(position) && isBr$5(position.getNode());\r\n    };\r\n    var shouldSkipPosition = function (forward, from, to) {\r\n      if (forward) {\r\n        return !isBeforeAfterSameElement(from, to) && !isAtBr(from) && isAfterOrEnd(from) && isBeforeOrStart(to);\r\n      } else {\r\n        return !isBeforeAfterSameElement(to, from) && isBeforeOrStart(from) && isAfterOrEnd(to);\r\n      }\r\n    };\r\n    var fromPosition = function (forward, root, pos) {\r\n      var walker = CaretWalker(root);\r\n      return Optional.from(forward ? walker.next(pos) : walker.prev(pos));\r\n    };\r\n    var navigate = function (forward, root, from) {\r\n      return fromPosition(forward, root, from).bind(function (to) {\r\n        if (isInSameBlock(from, to, root) && shouldSkipPosition(forward, from, to)) {\r\n          return fromPosition(forward, root, to);\r\n        } else {\r\n          return Optional.some(to);\r\n        }\r\n      });\r\n    };\r\n    var navigateIgnore = function (forward, root, from, ignoreFilter) {\r\n      return navigate(forward, root, from).bind(function (pos) {\r\n        return ignoreFilter(pos) ? navigateIgnore(forward, root, pos, ignoreFilter) : Optional.some(pos);\r\n      });\r\n    };\r\n    var positionIn = function (forward, element) {\r\n      var startNode = forward ? element.firstChild : element.lastChild;\r\n      if (isText$7(startNode)) {\r\n        return Optional.some(CaretPosition(startNode, forward ? 0 : startNode.data.length));\r\n      } else if (startNode) {\r\n        if (isCaretCandidate$3(startNode)) {\r\n          return Optional.some(forward ? CaretPosition.before(startNode) : afterElement(startNode));\r\n        } else {\r\n          return walkToPositionIn(forward, element, startNode);\r\n        }\r\n      } else {\r\n        return Optional.none();\r\n      }\r\n    };\r\n    var nextPosition = curry(fromPosition, true);\r\n    var prevPosition = curry(fromPosition, false);\r\n    var firstPositionIn = curry(positionIn, true);\r\n    var lastPositionIn = curry(positionIn, false);\r\n\r\n    var CARET_ID$1 = '_mce_caret';\r\n    var isCaretNode = function (node) {\r\n      return isElement$5(node) && node.id === CARET_ID$1;\r\n    };\r\n    var getParentCaretContainer = function (body, node) {\r\n      while (node && node !== body) {\r\n        if (node.id === CARET_ID$1) {\r\n          return node;\r\n        }\r\n        node = node.parentNode;\r\n      }\r\n      return null;\r\n    };\r\n\r\n    var isStringPathBookmark = function (bookmark) {\r\n      return isString$1(bookmark.start);\r\n    };\r\n    var isRangeBookmark = function (bookmark) {\r\n      return has$2(bookmark, 'rng');\r\n    };\r\n    var isIdBookmark = function (bookmark) {\r\n      return has$2(bookmark, 'id');\r\n    };\r\n    var isIndexBookmark = function (bookmark) {\r\n      return has$2(bookmark, 'name');\r\n    };\r\n    var isPathBookmark = function (bookmark) {\r\n      return Tools.isArray(bookmark.start);\r\n    };\r\n\r\n    var addBogus = function (dom, node) {\r\n      if (isElement$5(node) && dom.isBlock(node) && !node.innerHTML && !Env.ie) {\r\n        node.innerHTML = '<br data-mce-bogus=\"1\" />';\r\n      }\r\n      return node;\r\n    };\r\n    var resolveCaretPositionBookmark = function (dom, bookmark) {\r\n      var pos;\r\n      var rng = dom.createRng();\r\n      pos = resolve$2(dom.getRoot(), bookmark.start);\r\n      rng.setStart(pos.container(), pos.offset());\r\n      pos = resolve$2(dom.getRoot(), bookmark.end);\r\n      rng.setEnd(pos.container(), pos.offset());\r\n      return rng;\r\n    };\r\n    var insertZwsp = function (node, rng) {\r\n      var textNode = node.ownerDocument.createTextNode(ZWSP$1);\r\n      node.appendChild(textNode);\r\n      rng.setStart(textNode, 0);\r\n      rng.setEnd(textNode, 0);\r\n    };\r\n    var isEmpty$1 = function (node) {\r\n      return node.hasChildNodes() === false;\r\n    };\r\n    var tryFindRangePosition = function (node, rng) {\r\n      return lastPositionIn(node).fold(never, function (pos) {\r\n        rng.setStart(pos.container(), pos.offset());\r\n        rng.setEnd(pos.container(), pos.offset());\r\n        return true;\r\n      });\r\n    };\r\n    var padEmptyCaretContainer = function (root, node, rng) {\r\n      if (isEmpty$1(node) && getParentCaretContainer(root, node)) {\r\n        insertZwsp(node, rng);\r\n        return true;\r\n      } else {\r\n        return false;\r\n      }\r\n    };\r\n    var setEndPoint = function (dom, start, bookmark, rng) {\r\n      var point = bookmark[start ? 'start' : 'end'];\r\n      var i, node, offset, children;\r\n      var root = dom.getRoot();\r\n      if (point) {\r\n        offset = point[0];\r\n        for (node = root, i = point.length - 1; i >= 1; i--) {\r\n          children = node.childNodes;\r\n          if (padEmptyCaretContainer(root, node, rng)) {\r\n            return true;\r\n          }\r\n          if (point[i] > children.length - 1) {\r\n            if (padEmptyCaretContainer(root, node, rng)) {\r\n              return true;\r\n            }\r\n            return tryFindRangePosition(node, rng);\r\n          }\r\n          node = children[point[i]];\r\n        }\r\n        if (node.nodeType === 3) {\r\n          offset = Math.min(point[0], node.nodeValue.length);\r\n        }\r\n        if (node.nodeType === 1) {\r\n          offset = Math.min(point[0], node.childNodes.length);\r\n        }\r\n        if (start) {\r\n          rng.setStart(node, offset);\r\n        } else {\r\n          rng.setEnd(node, offset);\r\n        }\r\n      }\r\n      return true;\r\n    };\r\n    var isValidTextNode = function (node) {\r\n      return isText$7(node) && node.data.length > 0;\r\n    };\r\n    var restoreEndPoint = function (dom, suffix, bookmark) {\r\n      var marker = dom.get(bookmark.id + '_' + suffix), node, idx, next, prev;\r\n      var keep = bookmark.keep;\r\n      var container, offset;\r\n      if (marker) {\r\n        node = marker.parentNode;\r\n        if (suffix === 'start') {\r\n          if (!keep) {\r\n            idx = dom.nodeIndex(marker);\r\n          } else {\r\n            if (marker.hasChildNodes()) {\r\n              node = marker.firstChild;\r\n              idx = 1;\r\n            } else if (isValidTextNode(marker.nextSibling)) {\r\n              node = marker.nextSibling;\r\n              idx = 0;\r\n            } else if (isValidTextNode(marker.previousSibling)) {\r\n              node = marker.previousSibling;\r\n              idx = marker.previousSibling.data.length;\r\n            } else {\r\n              node = marker.parentNode;\r\n              idx = dom.nodeIndex(marker) + 1;\r\n            }\r\n          }\r\n          container = node;\r\n          offset = idx;\r\n        } else {\r\n          if (!keep) {\r\n            idx = dom.nodeIndex(marker);\r\n          } else {\r\n            if (marker.hasChildNodes()) {\r\n              node = marker.firstChild;\r\n              idx = 1;\r\n            } else if (isValidTextNode(marker.previousSibling)) {\r\n              node = marker.previousSibling;\r\n              idx = marker.previousSibling.data.length;\r\n            } else {\r\n              node = marker.parentNode;\r\n              idx = dom.nodeIndex(marker);\r\n            }\r\n          }\r\n          container = node;\r\n          offset = idx;\r\n        }\r\n        if (!keep) {\r\n          prev = marker.previousSibling;\r\n          next = marker.nextSibling;\r\n          Tools.each(Tools.grep(marker.childNodes), function (node) {\r\n            if (isText$7(node)) {\r\n              node.nodeValue = node.nodeValue.replace(/\\uFEFF/g, '');\r\n            }\r\n          });\r\n          while (marker = dom.get(bookmark.id + '_' + suffix)) {\r\n            dom.remove(marker, true);\r\n          }\r\n          if (prev && next && prev.nodeType === next.nodeType && isText$7(prev) && !Env.opera) {\r\n            idx = prev.nodeValue.length;\r\n            prev.appendData(next.nodeValue);\r\n            dom.remove(next);\r\n            container = prev;\r\n            offset = idx;\r\n          }\r\n        }\r\n        return Optional.some(CaretPosition(container, offset));\r\n      } else {\r\n        return Optional.none();\r\n      }\r\n    };\r\n    var resolvePaths = function (dom, bookmark) {\r\n      var rng = dom.createRng();\r\n      if (setEndPoint(dom, true, bookmark, rng) && setEndPoint(dom, false, bookmark, rng)) {\r\n        return Optional.some(rng);\r\n      } else {\r\n        return Optional.none();\r\n      }\r\n    };\r\n    var resolveId = function (dom, bookmark) {\r\n      var startPos = restoreEndPoint(dom, 'start', bookmark);\r\n      var endPos = restoreEndPoint(dom, 'end', bookmark);\r\n      return lift2(startPos, endPos.or(startPos), function (spos, epos) {\r\n        var rng = dom.createRng();\r\n        rng.setStart(addBogus(dom, spos.container()), spos.offset());\r\n        rng.setEnd(addBogus(dom, epos.container()), epos.offset());\r\n        return rng;\r\n      });\r\n    };\r\n    var resolveIndex = function (dom, bookmark) {\r\n      return Optional.from(dom.select(bookmark.name)[bookmark.index]).map(function (elm) {\r\n        var rng = dom.createRng();\r\n        rng.selectNode(elm);\r\n        return rng;\r\n      });\r\n    };\r\n    var resolve$1 = function (selection, bookmark) {\r\n      var dom = selection.dom;\r\n      if (bookmark) {\r\n        if (isPathBookmark(bookmark)) {\r\n          return resolvePaths(dom, bookmark);\r\n        } else if (isStringPathBookmark(bookmark)) {\r\n          return Optional.some(resolveCaretPositionBookmark(dom, bookmark));\r\n        } else if (isIdBookmark(bookmark)) {\r\n          return resolveId(dom, bookmark);\r\n        } else if (isIndexBookmark(bookmark)) {\r\n          return resolveIndex(dom, bookmark);\r\n        } else if (isRangeBookmark(bookmark)) {\r\n          return Optional.some(bookmark.rng);\r\n        }\r\n      }\r\n      return Optional.none();\r\n    };\r\n\r\n    var getBookmark$1 = function (selection, type, normalized) {\r\n      return getBookmark$2(selection, type, normalized);\r\n    };\r\n    var moveToBookmark = function (selection, bookmark) {\r\n      resolve$1(selection, bookmark).each(function (rng) {\r\n        selection.setRng(rng);\r\n      });\r\n    };\r\n    var isBookmarkNode$1 = function (node) {\r\n      return isElement$5(node) && node.tagName === 'SPAN' && node.getAttribute('data-mce-type') === 'bookmark';\r\n    };\r\n\r\n    var is = function (expected) {\r\n      return function (actual) {\r\n        return expected === actual;\r\n      };\r\n    };\r\n    var isNbsp = is(nbsp);\r\n    var isWhiteSpace = function (chr) {\r\n      return chr !== '' && ' \\f\\n\\r\\t\\x0B'.indexOf(chr) !== -1;\r\n    };\r\n    var isContent = function (chr) {\r\n      return !isWhiteSpace(chr) && !isNbsp(chr);\r\n    };\r\n\r\n    var isNode = function (node) {\r\n      return !!node.nodeType;\r\n    };\r\n    var isInlineBlock = function (node) {\r\n      return node && /^(IMG)$/.test(node.nodeName);\r\n    };\r\n    var moveStart = function (dom, selection, rng) {\r\n      var offset = rng.startOffset;\r\n      var container = rng.startContainer;\r\n      if (container === rng.endContainer) {\r\n        if (isInlineBlock(container.childNodes[offset])) {\r\n          return;\r\n        }\r\n      }\r\n      if (isElement$5(container)) {\r\n        var nodes = container.childNodes;\r\n        var walker = void 0;\r\n        if (offset < nodes.length) {\r\n          container = nodes[offset];\r\n          walker = new DomTreeWalker(container, dom.getParent(container, dom.isBlock));\r\n        } else {\r\n          container = nodes[nodes.length - 1];\r\n          walker = new DomTreeWalker(container, dom.getParent(container, dom.isBlock));\r\n          walker.next(true);\r\n        }\r\n        for (var node = walker.current(); node; node = walker.next()) {\r\n          if (isText$7(node) && !isWhiteSpaceNode$1(node)) {\r\n            rng.setStart(node, 0);\r\n            selection.setRng(rng);\r\n            return;\r\n          }\r\n        }\r\n      }\r\n    };\r\n    var getNonWhiteSpaceSibling = function (node, next, inc) {\r\n      if (node) {\r\n        var nextName = next ? 'nextSibling' : 'previousSibling';\r\n        for (node = inc ? node : node[nextName]; node; node = node[nextName]) {\r\n          if (isElement$5(node) || !isWhiteSpaceNode$1(node)) {\r\n            return node;\r\n          }\r\n        }\r\n      }\r\n    };\r\n    var isTextBlock$1 = function (editor, name) {\r\n      if (isNode(name)) {\r\n        name = name.nodeName;\r\n      }\r\n      return !!editor.schema.getTextBlockElements()[name.toLowerCase()];\r\n    };\r\n    var isValid = function (ed, parent, child) {\r\n      return ed.schema.isValidChild(parent, child);\r\n    };\r\n    var isWhiteSpaceNode$1 = function (node, allowSpaces) {\r\n      if (allowSpaces === void 0) {\r\n        allowSpaces = false;\r\n      }\r\n      if (isNonNullable(node) && isText$7(node)) {\r\n        var data = allowSpaces ? node.data.replace(/ /g, '\\xA0') : node.data;\r\n        return isWhitespaceText(data);\r\n      } else {\r\n        return false;\r\n      }\r\n    };\r\n    var isEmptyTextNode$1 = function (node) {\r\n      return isNonNullable(node) && isText$7(node) && node.length === 0;\r\n    };\r\n    var replaceVars = function (value, vars) {\r\n      if (isFunction(value)) {\r\n        value = value(vars);\r\n      } else if (isNonNullable(vars)) {\r\n        value = value.replace(/%(\\w+)/g, function (str, name) {\r\n          return vars[name] || str;\r\n        });\r\n      }\r\n      return value;\r\n    };\r\n    var isEq$5 = function (str1, str2) {\r\n      str1 = str1 || '';\r\n      str2 = str2 || '';\r\n      str1 = '' + (str1.nodeName || str1);\r\n      str2 = '' + (str2.nodeName || str2);\r\n      return str1.toLowerCase() === str2.toLowerCase();\r\n    };\r\n    var normalizeStyleValue = function (dom, value, name) {\r\n      if (name === 'color' || name === 'backgroundColor') {\r\n        value = dom.toHex(value);\r\n      }\r\n      if (name === 'fontWeight' && value === 700) {\r\n        value = 'bold';\r\n      }\r\n      if (name === 'fontFamily') {\r\n        value = value.replace(/[\\'\\\"]/g, '').replace(/,\\s+/g, ',');\r\n      }\r\n      return '' + value;\r\n    };\r\n    var getStyle = function (dom, node, name) {\r\n      return normalizeStyleValue(dom, dom.getStyle(node, name), name);\r\n    };\r\n    var getTextDecoration = function (dom, node) {\r\n      var decoration;\r\n      dom.getParent(node, function (n) {\r\n        decoration = dom.getStyle(n, 'text-decoration');\r\n        return decoration && decoration !== 'none';\r\n      });\r\n      return decoration;\r\n    };\r\n    var getParents$2 = function (dom, node, selector) {\r\n      return dom.getParents(node, selector, dom.getRoot());\r\n    };\r\n    var isVariableFormatName = function (editor, formatName) {\r\n      var hasVariableValues = function (format) {\r\n        var isVariableValue = function (val) {\r\n          return val.length > 1 && val.charAt(0) === '%';\r\n        };\r\n        return exists([\r\n          'styles',\r\n          'attributes'\r\n        ], function (key) {\r\n          return get$9(format, key).exists(function (field) {\r\n            var fieldValues = isArray$1(field) ? field : values(field);\r\n            return exists(fieldValues, isVariableValue);\r\n          });\r\n        });\r\n      };\r\n      return exists(editor.formatter.get(formatName), hasVariableValues);\r\n    };\r\n    var areSimilarFormats = function (editor, formatName, otherFormatName) {\r\n      var validKeys = [\r\n        'inline',\r\n        'block',\r\n        'selector',\r\n        'attributes',\r\n        'styles',\r\n        'classes'\r\n      ];\r\n      var filterObj = function (format) {\r\n        return filter$3(format, function (_, key) {\r\n          return exists(validKeys, function (validKey) {\r\n            return validKey === key;\r\n          });\r\n        });\r\n      };\r\n      return exists(editor.formatter.get(formatName), function (fmt1) {\r\n        var filteredFmt1 = filterObj(fmt1);\r\n        return exists(editor.formatter.get(otherFormatName), function (fmt2) {\r\n          var filteredFmt2 = filterObj(fmt2);\r\n          return equal$1(filteredFmt1, filteredFmt2);\r\n        });\r\n      });\r\n    };\r\n    var isBlockFormat = function (format) {\r\n      return hasNonNullableKey(format, 'block');\r\n    };\r\n    var isSelectorFormat = function (format) {\r\n      return hasNonNullableKey(format, 'selector');\r\n    };\r\n    var isInlineFormat = function (format) {\r\n      return hasNonNullableKey(format, 'inline');\r\n    };\r\n    var isMixedFormat = function (format) {\r\n      return isSelectorFormat(format) && isInlineFormat(format) && is$1(get$9(format, 'mixed'), true);\r\n    };\r\n    var shouldExpandToSelector = function (format) {\r\n      return isSelectorFormat(format) && format.expand !== false && !isInlineFormat(format);\r\n    };\r\n\r\n    var isBookmarkNode = isBookmarkNode$1;\r\n    var getParents$1 = getParents$2;\r\n    var isWhiteSpaceNode = isWhiteSpaceNode$1;\r\n    var isTextBlock = isTextBlock$1;\r\n    var isBogusBr = function (node) {\r\n      return isBr$5(node) && node.getAttribute('data-mce-bogus') && !node.nextSibling;\r\n    };\r\n    var findParentContentEditable = function (dom, node) {\r\n      var parent = node;\r\n      while (parent) {\r\n        if (isElement$5(parent) && dom.getContentEditable(parent)) {\r\n          return dom.getContentEditable(parent) === 'false' ? parent : node;\r\n        }\r\n        parent = parent.parentNode;\r\n      }\r\n      return node;\r\n    };\r\n    var walkText = function (start, node, offset, predicate) {\r\n      var str = node.data;\r\n      for (var i = offset; start ? i >= 0 : i < str.length; start ? i-- : i++) {\r\n        if (predicate(str.charAt(i))) {\r\n          return start ? i + 1 : i;\r\n        }\r\n      }\r\n      return -1;\r\n    };\r\n    var findSpace = function (start, node, offset) {\r\n      return walkText(start, node, offset, function (c) {\r\n        return isNbsp(c) || isWhiteSpace(c);\r\n      });\r\n    };\r\n    var findContent = function (start, node, offset) {\r\n      return walkText(start, node, offset, isContent);\r\n    };\r\n    var findWordEndPoint = function (dom, body, container, offset, start, includeTrailingSpaces) {\r\n      var lastTextNode;\r\n      var rootNode = dom.getParent(container, dom.isBlock) || body;\r\n      var walk = function (container, offset, pred) {\r\n        var textSeeker = TextSeeker(dom);\r\n        var walker = start ? textSeeker.backwards : textSeeker.forwards;\r\n        return Optional.from(walker(container, offset, function (text, textOffset) {\r\n          if (isBookmarkNode(text.parentNode)) {\r\n            return -1;\r\n          } else {\r\n            lastTextNode = text;\r\n            return pred(start, text, textOffset);\r\n          }\r\n        }, rootNode));\r\n      };\r\n      var spaceResult = walk(container, offset, findSpace);\r\n      return spaceResult.bind(function (result) {\r\n        return includeTrailingSpaces ? walk(result.container, result.offset + (start ? -1 : 0), findContent) : Optional.some(result);\r\n      }).orThunk(function () {\r\n        return lastTextNode ? Optional.some({\r\n          container: lastTextNode,\r\n          offset: start ? 0 : lastTextNode.length\r\n        }) : Optional.none();\r\n      });\r\n    };\r\n    var findSelectorEndPoint = function (dom, formatList, rng, container, siblingName) {\r\n      if (isText$7(container) && isEmpty$3(container.data) && container[siblingName]) {\r\n        container = container[siblingName];\r\n      }\r\n      var parents = getParents$1(dom, container);\r\n      for (var i = 0; i < parents.length; i++) {\r\n        for (var y = 0; y < formatList.length; y++) {\r\n          var curFormat = formatList[y];\r\n          if (isNonNullable(curFormat.collapsed) && curFormat.collapsed !== rng.collapsed) {\r\n            continue;\r\n          }\r\n          if (isSelectorFormat(curFormat) && dom.is(parents[i], curFormat.selector)) {\r\n            return parents[i];\r\n          }\r\n        }\r\n      }\r\n      return container;\r\n    };\r\n    var findBlockEndPoint = function (editor, formatList, container, siblingName) {\r\n      var node = container;\r\n      var dom = editor.dom;\r\n      var root = dom.getRoot();\r\n      var format = formatList[0];\r\n      if (isBlockFormat(format)) {\r\n        node = format.wrapper ? null : dom.getParent(container, format.block, root);\r\n      }\r\n      if (!node) {\r\n        var scopeRoot = dom.getParent(container, 'LI,TD,TH');\r\n        node = dom.getParent(isText$7(container) ? container.parentNode : container, function (node) {\r\n          return node !== root && isTextBlock(editor, node);\r\n        }, scopeRoot);\r\n      }\r\n      if (node && isBlockFormat(format) && format.wrapper) {\r\n        node = getParents$1(dom, node, 'ul,ol').reverse()[0] || node;\r\n      }\r\n      if (!node) {\r\n        node = container;\r\n        while (node[siblingName] && !dom.isBlock(node[siblingName])) {\r\n          node = node[siblingName];\r\n          if (isEq$5(node, 'br')) {\r\n            break;\r\n          }\r\n        }\r\n      }\r\n      return node || container;\r\n    };\r\n    var isAtBlockBoundary$1 = function (dom, root, container, siblingName) {\r\n      var parent = container.parentNode;\r\n      if (isNonNullable(container[siblingName])) {\r\n        return false;\r\n      } else if (parent === root || isNullable(parent) || dom.isBlock(parent)) {\r\n        return true;\r\n      } else {\r\n        return isAtBlockBoundary$1(dom, root, parent, siblingName);\r\n      }\r\n    };\r\n    var findParentContainer = function (dom, formatList, container, offset, start) {\r\n      var parent = container;\r\n      var siblingName = start ? 'previousSibling' : 'nextSibling';\r\n      var root = dom.getRoot();\r\n      if (isText$7(container) && !isWhiteSpaceNode(container)) {\r\n        if (start ? offset > 0 : offset < container.data.length) {\r\n          return container;\r\n        }\r\n      }\r\n      while (true) {\r\n        if (!formatList[0].block_expand && dom.isBlock(parent)) {\r\n          return parent;\r\n        }\r\n        for (var sibling = parent[siblingName]; sibling; sibling = sibling[siblingName]) {\r\n          var allowSpaces = isText$7(sibling) && !isAtBlockBoundary$1(dom, root, sibling, siblingName);\r\n          if (!isBookmarkNode(sibling) && !isBogusBr(sibling) && !isWhiteSpaceNode(sibling, allowSpaces)) {\r\n            return parent;\r\n          }\r\n        }\r\n        if (parent === root || parent.parentNode === root) {\r\n          container = parent;\r\n          break;\r\n        }\r\n        parent = parent.parentNode;\r\n      }\r\n      return container;\r\n    };\r\n    var isSelfOrParentBookmark = function (container) {\r\n      return isBookmarkNode(container.parentNode) || isBookmarkNode(container);\r\n    };\r\n    var expandRng = function (editor, rng, formatList, includeTrailingSpace) {\r\n      if (includeTrailingSpace === void 0) {\r\n        includeTrailingSpace = false;\r\n      }\r\n      var startContainer = rng.startContainer, startOffset = rng.startOffset, endContainer = rng.endContainer, endOffset = rng.endOffset;\r\n      var dom = editor.dom;\r\n      var format = formatList[0];\r\n      if (isElement$5(startContainer) && startContainer.hasChildNodes()) {\r\n        startContainer = getNode$1(startContainer, startOffset);\r\n        if (isText$7(startContainer)) {\r\n          startOffset = 0;\r\n        }\r\n      }\r\n      if (isElement$5(endContainer) && endContainer.hasChildNodes()) {\r\n        endContainer = getNode$1(endContainer, rng.collapsed ? endOffset : endOffset - 1);\r\n        if (isText$7(endContainer)) {\r\n          endOffset = endContainer.nodeValue.length;\r\n        }\r\n      }\r\n      startContainer = findParentContentEditable(dom, startContainer);\r\n      endContainer = findParentContentEditable(dom, endContainer);\r\n      if (isSelfOrParentBookmark(startContainer)) {\r\n        startContainer = isBookmarkNode(startContainer) ? startContainer : startContainer.parentNode;\r\n        if (rng.collapsed) {\r\n          startContainer = startContainer.previousSibling || startContainer;\r\n        } else {\r\n          startContainer = startContainer.nextSibling || startContainer;\r\n        }\r\n        if (isText$7(startContainer)) {\r\n          startOffset = rng.collapsed ? startContainer.length : 0;\r\n        }\r\n      }\r\n      if (isSelfOrParentBookmark(endContainer)) {\r\n        endContainer = isBookmarkNode(endContainer) ? endContainer : endContainer.parentNode;\r\n        if (rng.collapsed) {\r\n          endContainer = endContainer.nextSibling || endContainer;\r\n        } else {\r\n          endContainer = endContainer.previousSibling || endContainer;\r\n        }\r\n        if (isText$7(endContainer)) {\r\n          endOffset = rng.collapsed ? 0 : endContainer.length;\r\n        }\r\n      }\r\n      if (rng.collapsed) {\r\n        var startPoint = findWordEndPoint(dom, editor.getBody(), startContainer, startOffset, true, includeTrailingSpace);\r\n        startPoint.each(function (_a) {\r\n          var container = _a.container, offset = _a.offset;\r\n          startContainer = container;\r\n          startOffset = offset;\r\n        });\r\n        var endPoint = findWordEndPoint(dom, editor.getBody(), endContainer, endOffset, false, includeTrailingSpace);\r\n        endPoint.each(function (_a) {\r\n          var container = _a.container, offset = _a.offset;\r\n          endContainer = container;\r\n          endOffset = offset;\r\n        });\r\n      }\r\n      if (isInlineFormat(format) || format.block_expand) {\r\n        if (!isInlineFormat(format) || (!isText$7(startContainer) || startOffset === 0)) {\r\n          startContainer = findParentContainer(dom, formatList, startContainer, startOffset, true);\r\n        }\r\n        if (!isInlineFormat(format) || (!isText$7(endContainer) || endOffset === endContainer.nodeValue.length)) {\r\n          endContainer = findParentContainer(dom, formatList, endContainer, endOffset, false);\r\n        }\r\n      }\r\n      if (shouldExpandToSelector(format)) {\r\n        startContainer = findSelectorEndPoint(dom, formatList, rng, startContainer, 'previousSibling');\r\n        endContainer = findSelectorEndPoint(dom, formatList, rng, endContainer, 'nextSibling');\r\n      }\r\n      if (isBlockFormat(format) || isSelectorFormat(format)) {\r\n        startContainer = findBlockEndPoint(editor, formatList, startContainer, 'previousSibling');\r\n        endContainer = findBlockEndPoint(editor, formatList, endContainer, 'nextSibling');\r\n        if (isBlockFormat(format)) {\r\n          if (!dom.isBlock(startContainer)) {\r\n            startContainer = findParentContainer(dom, formatList, startContainer, startOffset, true);\r\n          }\r\n          if (!dom.isBlock(endContainer)) {\r\n            endContainer = findParentContainer(dom, formatList, endContainer, endOffset, false);\r\n          }\r\n        }\r\n      }\r\n      if (isElement$5(startContainer)) {\r\n        startOffset = dom.nodeIndex(startContainer);\r\n        startContainer = startContainer.parentNode;\r\n      }\r\n      if (isElement$5(endContainer)) {\r\n        endOffset = dom.nodeIndex(endContainer) + 1;\r\n        endContainer = endContainer.parentNode;\r\n      }\r\n      return {\r\n        startContainer: startContainer,\r\n        startOffset: startOffset,\r\n        endContainer: endContainer,\r\n        endOffset: endOffset\r\n      };\r\n    };\r\n\r\n    var walk$2 = function (dom, rng, callback) {\r\n      var startOffset = rng.startOffset;\r\n      var startContainer = getNode$1(rng.startContainer, startOffset);\r\n      var endOffset = rng.endOffset;\r\n      var endContainer = getNode$1(rng.endContainer, endOffset - 1);\r\n      var exclude = function (nodes) {\r\n        var firstNode = nodes[0];\r\n        if (isText$7(firstNode) && firstNode === startContainer && startOffset >= firstNode.data.length) {\r\n          nodes.splice(0, 1);\r\n        }\r\n        var lastNode = nodes[nodes.length - 1];\r\n        if (endOffset === 0 && nodes.length > 0 && lastNode === endContainer && isText$7(lastNode)) {\r\n          nodes.splice(nodes.length - 1, 1);\r\n        }\r\n        return nodes;\r\n      };\r\n      var collectSiblings = function (node, name, endNode) {\r\n        var siblings = [];\r\n        for (; node && node !== endNode; node = node[name]) {\r\n          siblings.push(node);\r\n        }\r\n        return siblings;\r\n      };\r\n      var findEndPoint = function (node, root) {\r\n        return dom.getParent(node, function (node) {\r\n          return node.parentNode === root;\r\n        }, root);\r\n      };\r\n      var walkBoundary = function (startNode, endNode, next) {\r\n        var siblingName = next ? 'nextSibling' : 'previousSibling';\r\n        for (var node = startNode, parent_1 = node.parentNode; node && node !== endNode; node = parent_1) {\r\n          parent_1 = node.parentNode;\r\n          var siblings_1 = collectSiblings(node === startNode ? node : node[siblingName], siblingName);\r\n          if (siblings_1.length) {\r\n            if (!next) {\r\n              siblings_1.reverse();\r\n            }\r\n            callback(exclude(siblings_1));\r\n          }\r\n        }\r\n      };\r\n      if (startContainer === endContainer) {\r\n        return callback(exclude([startContainer]));\r\n      }\r\n      var ancestor = dom.findCommonAncestor(startContainer, endContainer);\r\n      if (dom.isChildOf(startContainer, endContainer)) {\r\n        return walkBoundary(startContainer, ancestor, true);\r\n      }\r\n      if (dom.isChildOf(endContainer, startContainer)) {\r\n        return walkBoundary(endContainer, ancestor);\r\n      }\r\n      var startPoint = findEndPoint(startContainer, ancestor) || startContainer;\r\n      var endPoint = findEndPoint(endContainer, ancestor) || endContainer;\r\n      walkBoundary(startContainer, startPoint, true);\r\n      var siblings = collectSiblings(startPoint === startContainer ? startPoint : startPoint.nextSibling, 'nextSibling', endPoint === endContainer ? endPoint.nextSibling : endPoint);\r\n      if (siblings.length) {\r\n        callback(exclude(siblings));\r\n      }\r\n      walkBoundary(endContainer, endPoint);\r\n    };\r\n\r\n    var getRanges = function (selection) {\r\n      var ranges = [];\r\n      if (selection) {\r\n        for (var i = 0; i < selection.rangeCount; i++) {\r\n          ranges.push(selection.getRangeAt(i));\r\n        }\r\n      }\r\n      return ranges;\r\n    };\r\n    var getSelectedNodes = function (ranges) {\r\n      return bind(ranges, function (range) {\r\n        var node = getSelectedNode(range);\r\n        return node ? [SugarElement.fromDom(node)] : [];\r\n      });\r\n    };\r\n    var hasMultipleRanges = function (selection) {\r\n      return getRanges(selection).length > 1;\r\n    };\r\n\r\n    var getCellsFromRanges = function (ranges) {\r\n      return filter$4(getSelectedNodes(ranges), isTableCell$4);\r\n    };\r\n    var getCellsFromElement = function (elm) {\r\n      return descendants(elm, 'td[data-mce-selected],th[data-mce-selected]');\r\n    };\r\n    var getCellsFromElementOrRanges = function (ranges, element) {\r\n      var selectedCells = getCellsFromElement(element);\r\n      return selectedCells.length > 0 ? selectedCells : getCellsFromRanges(ranges);\r\n    };\r\n    var getCellsFromEditor = function (editor) {\r\n      return getCellsFromElementOrRanges(getRanges(editor.selection.getSel()), SugarElement.fromDom(editor.getBody()));\r\n    };\r\n    var getClosestTable = function (cell, isRoot) {\r\n      return ancestor$2(cell, 'table', isRoot);\r\n    };\r\n\r\n    var getStartNode = function (rng) {\r\n      var sc = rng.startContainer, so = rng.startOffset;\r\n      if (isText$7(sc)) {\r\n        return so === 0 ? Optional.some(SugarElement.fromDom(sc)) : Optional.none();\r\n      } else {\r\n        return Optional.from(sc.childNodes[so]).map(SugarElement.fromDom);\r\n      }\r\n    };\r\n    var getEndNode = function (rng) {\r\n      var ec = rng.endContainer, eo = rng.endOffset;\r\n      if (isText$7(ec)) {\r\n        return eo === ec.data.length ? Optional.some(SugarElement.fromDom(ec)) : Optional.none();\r\n      } else {\r\n        return Optional.from(ec.childNodes[eo - 1]).map(SugarElement.fromDom);\r\n      }\r\n    };\r\n    var getFirstChildren = function (node) {\r\n      return firstChild(node).fold(constant([node]), function (child) {\r\n        return [node].concat(getFirstChildren(child));\r\n      });\r\n    };\r\n    var getLastChildren$1 = function (node) {\r\n      return lastChild(node).fold(constant([node]), function (child) {\r\n        if (name(child) === 'br') {\r\n          return prevSibling(child).map(function (sibling) {\r\n            return [node].concat(getLastChildren$1(sibling));\r\n          }).getOr([]);\r\n        } else {\r\n          return [node].concat(getLastChildren$1(child));\r\n        }\r\n      });\r\n    };\r\n    var hasAllContentsSelected = function (elm, rng) {\r\n      return lift2(getStartNode(rng), getEndNode(rng), function (startNode, endNode) {\r\n        var start = find$3(getFirstChildren(elm), curry(eq, startNode));\r\n        var end = find$3(getLastChildren$1(elm), curry(eq, endNode));\r\n        return start.isSome() && end.isSome();\r\n      }).getOr(false);\r\n    };\r\n    var moveEndPoint = function (dom, rng, node, start) {\r\n      var root = node, walker = new DomTreeWalker(node, root);\r\n      var moveCaretBeforeOnEnterElementsMap = filter$3(dom.schema.getMoveCaretBeforeOnEnterElements(), function (_, name) {\r\n        return !contains$3([\r\n          'td',\r\n          'th',\r\n          'table'\r\n        ], name.toLowerCase());\r\n      });\r\n      do {\r\n        if (isText$7(node) && Tools.trim(node.nodeValue).length !== 0) {\r\n          if (start) {\r\n            rng.setStart(node, 0);\r\n          } else {\r\n            rng.setEnd(node, node.nodeValue.length);\r\n          }\r\n          return;\r\n        }\r\n        if (moveCaretBeforeOnEnterElementsMap[node.nodeName]) {\r\n          if (start) {\r\n            rng.setStartBefore(node);\r\n          } else {\r\n            if (node.nodeName === 'BR') {\r\n              rng.setEndBefore(node);\r\n            } else {\r\n              rng.setEndAfter(node);\r\n            }\r\n          }\r\n          return;\r\n        }\r\n      } while (node = start ? walker.next() : walker.prev());\r\n      if (root.nodeName === 'BODY') {\r\n        if (start) {\r\n          rng.setStart(root, 0);\r\n        } else {\r\n          rng.setEnd(root, root.childNodes.length);\r\n        }\r\n      }\r\n    };\r\n    var hasAnyRanges = function (editor) {\r\n      var sel = editor.selection.getSel();\r\n      return sel && sel.rangeCount > 0;\r\n    };\r\n    var runOnRanges = function (editor, executor) {\r\n      var fakeSelectionNodes = getCellsFromEditor(editor);\r\n      if (fakeSelectionNodes.length > 0) {\r\n        each$k(fakeSelectionNodes, function (elem) {\r\n          var node = elem.dom;\r\n          var fakeNodeRng = editor.dom.createRng();\r\n          fakeNodeRng.setStartBefore(node);\r\n          fakeNodeRng.setEndAfter(node);\r\n          executor(fakeNodeRng, true);\r\n        });\r\n      } else {\r\n        executor(editor.selection.getRng(), false);\r\n      }\r\n    };\r\n    var preserve = function (selection, fillBookmark, executor) {\r\n      var bookmark = getPersistentBookmark(selection, fillBookmark);\r\n      executor(bookmark);\r\n      selection.moveToBookmark(bookmark);\r\n    };\r\n\r\n    var NodeValue = function (is, name) {\r\n      var get = function (element) {\r\n        if (!is(element)) {\r\n          throw new Error('Can only get ' + name + ' value of a ' + name + ' node');\r\n        }\r\n        return getOption(element).getOr('');\r\n      };\r\n      var getOption = function (element) {\r\n        return is(element) ? Optional.from(element.dom.nodeValue) : Optional.none();\r\n      };\r\n      var set = function (element, value) {\r\n        if (!is(element)) {\r\n          throw new Error('Can only set raw ' + name + ' value of a ' + name + ' node');\r\n        }\r\n        element.dom.nodeValue = value;\r\n      };\r\n      return {\r\n        get: get,\r\n        getOption: getOption,\r\n        set: set\r\n      };\r\n    };\r\n\r\n    var api$1 = NodeValue(isText$8, 'text');\r\n    var get$2 = function (element) {\r\n      return api$1.get(element);\r\n    };\r\n\r\n    var isZeroWidth = function (elem) {\r\n      return isText$8(elem) && get$2(elem) === ZWSP$1;\r\n    };\r\n    var context = function (editor, elem, wrapName, nodeName) {\r\n      return parent(elem).fold(function () {\r\n        return 'skipping';\r\n      }, function (parent) {\r\n        if (nodeName === 'br' || isZeroWidth(elem)) {\r\n          return 'valid';\r\n        } else if (isAnnotation(elem)) {\r\n          return 'existing';\r\n        } else if (isCaretNode(elem.dom)) {\r\n          return 'caret';\r\n        } else if (!isValid(editor, wrapName, nodeName) || !isValid(editor, name(parent), wrapName)) {\r\n          return 'invalid-child';\r\n        } else {\r\n          return 'valid';\r\n        }\r\n      });\r\n    };\r\n\r\n    var applyWordGrab = function (editor, rng) {\r\n      var r = expandRng(editor, rng, [{ inline: 'span' }]);\r\n      rng.setStart(r.startContainer, r.startOffset);\r\n      rng.setEnd(r.endContainer, r.endOffset);\r\n      editor.selection.setRng(rng);\r\n    };\r\n    var makeAnnotation = function (eDoc, _a, annotationName, decorate) {\r\n      var _b = _a.uid, uid = _b === void 0 ? generate('mce-annotation') : _b, data = __rest(_a, ['uid']);\r\n      var master = SugarElement.fromTag('span', eDoc);\r\n      add$1(master, annotation());\r\n      set$1(master, '' + dataAnnotationId(), uid);\r\n      set$1(master, '' + dataAnnotation(), annotationName);\r\n      var _c = decorate(uid, data), _d = _c.attributes, attributes = _d === void 0 ? {} : _d, _e = _c.classes, classes = _e === void 0 ? [] : _e;\r\n      setAll$1(master, attributes);\r\n      add(master, classes);\r\n      return master;\r\n    };\r\n    var annotate = function (editor, rng, annotationName, decorate, data) {\r\n      var newWrappers = [];\r\n      var master = makeAnnotation(editor.getDoc(), data, annotationName, decorate);\r\n      var wrapper = value();\r\n      var finishWrapper = function () {\r\n        wrapper.clear();\r\n      };\r\n      var getOrOpenWrapper = function () {\r\n        return wrapper.get().getOrThunk(function () {\r\n          var nu = shallow(master);\r\n          newWrappers.push(nu);\r\n          wrapper.set(nu);\r\n          return nu;\r\n        });\r\n      };\r\n      var processElements = function (elems) {\r\n        each$k(elems, processElement);\r\n      };\r\n      var processElement = function (elem) {\r\n        var ctx = context(editor, elem, 'span', name(elem));\r\n        switch (ctx) {\r\n        case 'invalid-child': {\r\n            finishWrapper();\r\n            var children$1 = children(elem);\r\n            processElements(children$1);\r\n            finishWrapper();\r\n            break;\r\n          }\r\n        case 'valid': {\r\n            var w = getOrOpenWrapper();\r\n            wrap$3(elem, w);\r\n            break;\r\n          }\r\n        }\r\n      };\r\n      var processNodes = function (nodes) {\r\n        var elems = map$3(nodes, SugarElement.fromDom);\r\n        processElements(elems);\r\n      };\r\n      walk$2(editor.dom, rng, function (nodes) {\r\n        finishWrapper();\r\n        processNodes(nodes);\r\n      });\r\n      return newWrappers;\r\n    };\r\n    var annotateWithBookmark = function (editor, name, settings, data) {\r\n      editor.undoManager.transact(function () {\r\n        var selection = editor.selection;\r\n        var initialRng = selection.getRng();\r\n        var hasFakeSelection = getCellsFromEditor(editor).length > 0;\r\n        if (initialRng.collapsed && !hasFakeSelection) {\r\n          applyWordGrab(editor, initialRng);\r\n        }\r\n        if (selection.getRng().collapsed && !hasFakeSelection) {\r\n          var wrapper = makeAnnotation(editor.getDoc(), data, name, settings.decorate);\r\n          set(wrapper, nbsp);\r\n          selection.getRng().insertNode(wrapper.dom);\r\n          selection.select(wrapper.dom);\r\n        } else {\r\n          preserve(selection, false, function () {\r\n            runOnRanges(editor, function (selectionRng) {\r\n              annotate(editor, selectionRng, name, settings.decorate, data);\r\n            });\r\n          });\r\n        }\r\n      });\r\n    };\r\n\r\n    var Annotator = function (editor) {\r\n      var registry = create$7();\r\n      setup$m(editor, registry);\r\n      var changes = setup$n(editor);\r\n      return {\r\n        register: function (name, settings) {\r\n          registry.register(name, settings);\r\n        },\r\n        annotate: function (name, data) {\r\n          registry.lookup(name).each(function (settings) {\r\n            annotateWithBookmark(editor, name, settings, data);\r\n          });\r\n        },\r\n        annotationChanged: function (name, callback) {\r\n          changes.addListener(name, callback);\r\n        },\r\n        remove: function (name) {\r\n          identify(editor, Optional.some(name)).each(function (_a) {\r\n            var elements = _a.elements;\r\n            each$k(elements, unwrap);\r\n          });\r\n        },\r\n        getAll: function (name) {\r\n          var directory = findAll(editor, name);\r\n          return map$2(directory, function (elems) {\r\n            return map$3(elems, function (elem) {\r\n              return elem.dom;\r\n            });\r\n          });\r\n        }\r\n      };\r\n    };\r\n\r\n    var BookmarkManager = function (selection) {\r\n      return {\r\n        getBookmark: curry(getBookmark$1, selection),\r\n        moveToBookmark: curry(moveToBookmark, selection)\r\n      };\r\n    };\r\n    BookmarkManager.isBookmarkNode = isBookmarkNode$1;\r\n\r\n    var getContentEditableRoot$1 = function (root, node) {\r\n      while (node && node !== root) {\r\n        if (isContentEditableTrue$4(node) || isContentEditableFalse$b(node)) {\r\n          return node;\r\n        }\r\n        node = node.parentNode;\r\n      }\r\n      return null;\r\n    };\r\n\r\n    var isXYWithinRange = function (clientX, clientY, range) {\r\n      if (range.collapsed) {\r\n        return false;\r\n      }\r\n      if (Env.browser.isIE() && range.startOffset === range.endOffset - 1 && range.startContainer === range.endContainer) {\r\n        var elm = range.startContainer.childNodes[range.startOffset];\r\n        if (isElement$5(elm)) {\r\n          return exists(elm.getClientRects(), function (rect) {\r\n            return containsXY(rect, clientX, clientY);\r\n          });\r\n        }\r\n      }\r\n      return exists(range.getClientRects(), function (rect) {\r\n        return containsXY(rect, clientX, clientY);\r\n      });\r\n    };\r\n\r\n    var firePreProcess = function (editor, args) {\r\n      return editor.fire('PreProcess', args);\r\n    };\r\n    var firePostProcess = function (editor, args) {\r\n      return editor.fire('PostProcess', args);\r\n    };\r\n    var fireRemove = function (editor) {\r\n      return editor.fire('remove');\r\n    };\r\n    var fireDetach = function (editor) {\r\n      return editor.fire('detach');\r\n    };\r\n    var fireSwitchMode = function (editor, mode) {\r\n      return editor.fire('SwitchMode', { mode: mode });\r\n    };\r\n    var fireObjectResizeStart = function (editor, target, width, height, origin) {\r\n      editor.fire('ObjectResizeStart', {\r\n        target: target,\r\n        width: width,\r\n        height: height,\r\n        origin: origin\r\n      });\r\n    };\r\n    var fireObjectResized = function (editor, target, width, height, origin) {\r\n      editor.fire('ObjectResized', {\r\n        target: target,\r\n        width: width,\r\n        height: height,\r\n        origin: origin\r\n      });\r\n    };\r\n    var firePreInit = function (editor) {\r\n      return editor.fire('PreInit');\r\n    };\r\n    var firePostRender = function (editor) {\r\n      return editor.fire('PostRender');\r\n    };\r\n    var fireInit = function (editor) {\r\n      return editor.fire('Init');\r\n    };\r\n    var firePlaceholderToggle = function (editor, state) {\r\n      return editor.fire('PlaceholderToggle', { state: state });\r\n    };\r\n    var fireError = function (editor, errorType, error) {\r\n      return editor.fire(errorType, error);\r\n    };\r\n    var fireFormatApply = function (editor, format, node, vars) {\r\n      return editor.fire('FormatApply', {\r\n        format: format,\r\n        node: node,\r\n        vars: vars\r\n      });\r\n    };\r\n    var fireFormatRemove = function (editor, format, node, vars) {\r\n      return editor.fire('FormatRemove', {\r\n        format: format,\r\n        node: node,\r\n        vars: vars\r\n      });\r\n    };\r\n\r\n    var VK = {\r\n      BACKSPACE: 8,\r\n      DELETE: 46,\r\n      DOWN: 40,\r\n      ENTER: 13,\r\n      ESC: 27,\r\n      LEFT: 37,\r\n      RIGHT: 39,\r\n      SPACEBAR: 32,\r\n      TAB: 9,\r\n      UP: 38,\r\n      PAGE_UP: 33,\r\n      PAGE_DOWN: 34,\r\n      END: 35,\r\n      HOME: 36,\r\n      modifierPressed: function (e) {\r\n        return e.shiftKey || e.ctrlKey || e.altKey || VK.metaKeyPressed(e);\r\n      },\r\n      metaKeyPressed: function (e) {\r\n        return Env.mac ? e.metaKey : e.ctrlKey && !e.altKey;\r\n      }\r\n    };\r\n\r\n    var isContentEditableFalse$5 = isContentEditableFalse$b;\r\n    var ControlSelection = function (selection, editor) {\r\n      var elementSelectionAttr = 'data-mce-selected';\r\n      var dom = editor.dom, each = Tools.each;\r\n      var selectedElm, selectedElmGhost, resizeHelper, selectedHandle, resizeBackdrop;\r\n      var startX, startY, selectedElmX, selectedElmY, startW, startH, ratio, resizeStarted;\r\n      var width, height;\r\n      var editableDoc = editor.getDoc(), rootDocument = document;\r\n      var abs = Math.abs, round = Math.round, rootElement = editor.getBody();\r\n      var startScrollWidth, startScrollHeight;\r\n      var resizeHandles = {\r\n        nw: [\r\n          0,\r\n          0,\r\n          -1,\r\n          -1\r\n        ],\r\n        ne: [\r\n          1,\r\n          0,\r\n          1,\r\n          -1\r\n        ],\r\n        se: [\r\n          1,\r\n          1,\r\n          1,\r\n          1\r\n        ],\r\n        sw: [\r\n          0,\r\n          1,\r\n          -1,\r\n          1\r\n        ]\r\n      };\r\n      var isImage = function (elm) {\r\n        return elm && (elm.nodeName === 'IMG' || editor.dom.is(elm, 'figure.image'));\r\n      };\r\n      var isMedia = function (elm) {\r\n        return isMedia$2(elm) || dom.hasClass(elm, 'mce-preview-object');\r\n      };\r\n      var isEventOnImageOutsideRange = function (evt, range) {\r\n        if (evt.type === 'longpress' || evt.type.indexOf('touch') === 0) {\r\n          var touch = evt.touches[0];\r\n          return isImage(evt.target) && !isXYWithinRange(touch.clientX, touch.clientY, range);\r\n        } else {\r\n          return isImage(evt.target) && !isXYWithinRange(evt.clientX, evt.clientY, range);\r\n        }\r\n      };\r\n      var contextMenuSelectImage = function (evt) {\r\n        var target = evt.target;\r\n        if (isEventOnImageOutsideRange(evt, editor.selection.getRng()) && !evt.isDefaultPrevented()) {\r\n          editor.selection.select(target);\r\n        }\r\n      };\r\n      var getResizeTargets = function (elm) {\r\n        if (dom.is(elm, 'figure.image')) {\r\n          return [elm.querySelector('img')];\r\n        } else if (dom.hasClass(elm, 'mce-preview-object') && isNonNullable(elm.firstElementChild)) {\r\n          return [\r\n            elm,\r\n            elm.firstElementChild\r\n          ];\r\n        } else {\r\n          return [elm];\r\n        }\r\n      };\r\n      var isResizable = function (elm) {\r\n        var selector = getObjectResizing(editor);\r\n        if (!selector) {\r\n          return false;\r\n        }\r\n        if (elm.getAttribute('data-mce-resize') === 'false') {\r\n          return false;\r\n        }\r\n        if (elm === editor.getBody()) {\r\n          return false;\r\n        }\r\n        if (dom.hasClass(elm, 'mce-preview-object')) {\r\n          return is$2(SugarElement.fromDom(elm.firstElementChild), selector);\r\n        } else {\r\n          return is$2(SugarElement.fromDom(elm), selector);\r\n        }\r\n      };\r\n      var createGhostElement = function (elm) {\r\n        if (isMedia(elm)) {\r\n          return dom.create('img', { src: Env.transparentSrc });\r\n        } else {\r\n          return elm.cloneNode(true);\r\n        }\r\n      };\r\n      var setSizeProp = function (element, name, value) {\r\n        if (isNonNullable(value)) {\r\n          var targets = getResizeTargets(element);\r\n          each$k(targets, function (target) {\r\n            if (target.style[name] || !editor.schema.isValid(target.nodeName.toLowerCase(), name)) {\r\n              dom.setStyle(target, name, value);\r\n            } else {\r\n              dom.setAttrib(target, name, '' + value);\r\n            }\r\n          });\r\n        }\r\n      };\r\n      var setGhostElmSize = function (ghostElm, width, height) {\r\n        setSizeProp(ghostElm, 'width', width);\r\n        setSizeProp(ghostElm, 'height', height);\r\n      };\r\n      var resizeGhostElement = function (e) {\r\n        var deltaX, deltaY, proportional;\r\n        var resizeHelperX, resizeHelperY;\r\n        deltaX = e.screenX - startX;\r\n        deltaY = e.screenY - startY;\r\n        width = deltaX * selectedHandle[2] + startW;\r\n        height = deltaY * selectedHandle[3] + startH;\r\n        width = width < 5 ? 5 : width;\r\n        height = height < 5 ? 5 : height;\r\n        if ((isImage(selectedElm) || isMedia(selectedElm)) && getResizeImgProportional(editor) !== false) {\r\n          proportional = !VK.modifierPressed(e);\r\n        } else {\r\n          proportional = VK.modifierPressed(e);\r\n        }\r\n        if (proportional) {\r\n          if (abs(deltaX) > abs(deltaY)) {\r\n            height = round(width * ratio);\r\n            width = round(height / ratio);\r\n          } else {\r\n            width = round(height / ratio);\r\n            height = round(width * ratio);\r\n          }\r\n        }\r\n        setGhostElmSize(selectedElmGhost, width, height);\r\n        resizeHelperX = selectedHandle.startPos.x + deltaX;\r\n        resizeHelperY = selectedHandle.startPos.y + deltaY;\r\n        resizeHelperX = resizeHelperX > 0 ? resizeHelperX : 0;\r\n        resizeHelperY = resizeHelperY > 0 ? resizeHelperY : 0;\r\n        dom.setStyles(resizeHelper, {\r\n          left: resizeHelperX,\r\n          top: resizeHelperY,\r\n          display: 'block'\r\n        });\r\n        resizeHelper.innerHTML = width + ' &times; ' + height;\r\n        if (selectedHandle[2] < 0 && selectedElmGhost.clientWidth <= width) {\r\n          dom.setStyle(selectedElmGhost, 'left', selectedElmX + (startW - width));\r\n        }\r\n        if (selectedHandle[3] < 0 && selectedElmGhost.clientHeight <= height) {\r\n          dom.setStyle(selectedElmGhost, 'top', selectedElmY + (startH - height));\r\n        }\r\n        deltaX = rootElement.scrollWidth - startScrollWidth;\r\n        deltaY = rootElement.scrollHeight - startScrollHeight;\r\n        if (deltaX + deltaY !== 0) {\r\n          dom.setStyles(resizeHelper, {\r\n            left: resizeHelperX - deltaX,\r\n            top: resizeHelperY - deltaY\r\n          });\r\n        }\r\n        if (!resizeStarted) {\r\n          fireObjectResizeStart(editor, selectedElm, startW, startH, 'corner-' + selectedHandle.name);\r\n          resizeStarted = true;\r\n        }\r\n      };\r\n      var endGhostResize = function () {\r\n        var wasResizeStarted = resizeStarted;\r\n        resizeStarted = false;\r\n        if (wasResizeStarted) {\r\n          setSizeProp(selectedElm, 'width', width);\r\n          setSizeProp(selectedElm, 'height', height);\r\n        }\r\n        dom.unbind(editableDoc, 'mousemove', resizeGhostElement);\r\n        dom.unbind(editableDoc, 'mouseup', endGhostResize);\r\n        if (rootDocument !== editableDoc) {\r\n          dom.unbind(rootDocument, 'mousemove', resizeGhostElement);\r\n          dom.unbind(rootDocument, 'mouseup', endGhostResize);\r\n        }\r\n        dom.remove(selectedElmGhost);\r\n        dom.remove(resizeHelper);\r\n        dom.remove(resizeBackdrop);\r\n        showResizeRect(selectedElm);\r\n        if (wasResizeStarted) {\r\n          fireObjectResized(editor, selectedElm, width, height, 'corner-' + selectedHandle.name);\r\n          dom.setAttrib(selectedElm, 'style', dom.getAttrib(selectedElm, 'style'));\r\n        }\r\n        editor.nodeChanged();\r\n      };\r\n      var showResizeRect = function (targetElm) {\r\n        unbindResizeHandleEvents();\r\n        var position = dom.getPos(targetElm, rootElement);\r\n        var selectedElmX = position.x;\r\n        var selectedElmY = position.y;\r\n        var rect = targetElm.getBoundingClientRect();\r\n        var targetWidth = rect.width || rect.right - rect.left;\r\n        var targetHeight = rect.height || rect.bottom - rect.top;\r\n        if (selectedElm !== targetElm) {\r\n          hideResizeRect();\r\n          selectedElm = targetElm;\r\n          width = height = 0;\r\n        }\r\n        var e = editor.fire('ObjectSelected', { target: targetElm });\r\n        var selectedValue = dom.getAttrib(selectedElm, elementSelectionAttr, '1');\r\n        if (isResizable(targetElm) && !e.isDefaultPrevented()) {\r\n          each(resizeHandles, function (handle, name) {\r\n            var handleElm;\r\n            var startDrag = function (e) {\r\n              var target = getResizeTargets(selectedElm)[0];\r\n              startX = e.screenX;\r\n              startY = e.screenY;\r\n              startW = target.clientWidth;\r\n              startH = target.clientHeight;\r\n              ratio = startH / startW;\r\n              selectedHandle = handle;\r\n              selectedHandle.name = name;\r\n              selectedHandle.startPos = {\r\n                x: targetWidth * handle[0] + selectedElmX,\r\n                y: targetHeight * handle[1] + selectedElmY\r\n              };\r\n              startScrollWidth = rootElement.scrollWidth;\r\n              startScrollHeight = rootElement.scrollHeight;\r\n              resizeBackdrop = dom.add(rootElement, 'div', {\r\n                'class': 'mce-resize-backdrop',\r\n                'data-mce-bogus': 'all'\r\n              });\r\n              dom.setStyles(resizeBackdrop, {\r\n                position: 'fixed',\r\n                left: '0',\r\n                top: '0',\r\n                width: '100%',\r\n                height: '100%'\r\n              });\r\n              selectedElmGhost = createGhostElement(selectedElm);\r\n              dom.addClass(selectedElmGhost, 'mce-clonedresizable');\r\n              dom.setAttrib(selectedElmGhost, 'data-mce-bogus', 'all');\r\n              selectedElmGhost.contentEditable = 'false';\r\n              dom.setStyles(selectedElmGhost, {\r\n                left: selectedElmX,\r\n                top: selectedElmY,\r\n                margin: 0\r\n              });\r\n              setGhostElmSize(selectedElmGhost, targetWidth, targetHeight);\r\n              selectedElmGhost.removeAttribute(elementSelectionAttr);\r\n              rootElement.appendChild(selectedElmGhost);\r\n              dom.bind(editableDoc, 'mousemove', resizeGhostElement);\r\n              dom.bind(editableDoc, 'mouseup', endGhostResize);\r\n              if (rootDocument !== editableDoc) {\r\n                dom.bind(rootDocument, 'mousemove', resizeGhostElement);\r\n                dom.bind(rootDocument, 'mouseup', endGhostResize);\r\n              }\r\n              resizeHelper = dom.add(rootElement, 'div', {\r\n                'class': 'mce-resize-helper',\r\n                'data-mce-bogus': 'all'\r\n              }, startW + ' &times; ' + startH);\r\n            };\r\n            handleElm = dom.get('mceResizeHandle' + name);\r\n            if (handleElm) {\r\n              dom.remove(handleElm);\r\n            }\r\n            handleElm = dom.add(rootElement, 'div', {\r\n              'id': 'mceResizeHandle' + name,\r\n              'data-mce-bogus': 'all',\r\n              'class': 'mce-resizehandle',\r\n              'unselectable': true,\r\n              'style': 'cursor:' + name + '-resize; margin:0; padding:0'\r\n            });\r\n            if (Env.ie === 11) {\r\n              handleElm.contentEditable = false;\r\n            }\r\n            dom.bind(handleElm, 'mousedown', function (e) {\r\n              e.stopImmediatePropagation();\r\n              e.preventDefault();\r\n              startDrag(e);\r\n            });\r\n            handle.elm = handleElm;\r\n            dom.setStyles(handleElm, {\r\n              left: targetWidth * handle[0] + selectedElmX - handleElm.offsetWidth / 2,\r\n              top: targetHeight * handle[1] + selectedElmY - handleElm.offsetHeight / 2\r\n            });\r\n          });\r\n        } else {\r\n          hideResizeRect();\r\n        }\r\n        if (!dom.getAttrib(selectedElm, elementSelectionAttr)) {\r\n          selectedElm.setAttribute(elementSelectionAttr, selectedValue);\r\n        }\r\n      };\r\n      var hideResizeRect = function () {\r\n        unbindResizeHandleEvents();\r\n        if (selectedElm) {\r\n          selectedElm.removeAttribute(elementSelectionAttr);\r\n        }\r\n        each$j(resizeHandles, function (value, name) {\r\n          var handleElm = dom.get('mceResizeHandle' + name);\r\n          if (handleElm) {\r\n            dom.unbind(handleElm);\r\n            dom.remove(handleElm);\r\n          }\r\n        });\r\n      };\r\n      var updateResizeRect = function (e) {\r\n        var startElm, controlElm;\r\n        var isChildOrEqual = function (node, parent) {\r\n          if (node) {\r\n            do {\r\n              if (node === parent) {\r\n                return true;\r\n              }\r\n            } while (node = node.parentNode);\r\n          }\r\n        };\r\n        if (resizeStarted || editor.removed) {\r\n          return;\r\n        }\r\n        each(dom.select('img[data-mce-selected],hr[data-mce-selected]'), function (img) {\r\n          img.removeAttribute(elementSelectionAttr);\r\n        });\r\n        controlElm = e.type === 'mousedown' ? e.target : selection.getNode();\r\n        controlElm = dom.$(controlElm).closest('table,img,figure.image,hr,video,span.mce-preview-object')[0];\r\n        if (isChildOrEqual(controlElm, rootElement)) {\r\n          disableGeckoResize();\r\n          startElm = selection.getStart(true);\r\n          if (isChildOrEqual(startElm, controlElm) && isChildOrEqual(selection.getEnd(true), controlElm)) {\r\n            showResizeRect(controlElm);\r\n            return;\r\n          }\r\n        }\r\n        hideResizeRect();\r\n      };\r\n      var isWithinContentEditableFalse = function (elm) {\r\n        return isContentEditableFalse$5(getContentEditableRoot$1(editor.getBody(), elm));\r\n      };\r\n      var unbindResizeHandleEvents = function () {\r\n        each$j(resizeHandles, function (handle) {\r\n          if (handle.elm) {\r\n            dom.unbind(handle.elm);\r\n            delete handle.elm;\r\n          }\r\n        });\r\n      };\r\n      var disableGeckoResize = function () {\r\n        try {\r\n          editor.getDoc().execCommand('enableObjectResizing', false, 'false');\r\n        } catch (ex) {\r\n        }\r\n      };\r\n      editor.on('init', function () {\r\n        disableGeckoResize();\r\n        if (Env.browser.isIE() || Env.browser.isEdge()) {\r\n          editor.on('mousedown click', function (e) {\r\n            var target = e.target, nodeName = target.nodeName;\r\n            if (!resizeStarted && /^(TABLE|IMG|HR)$/.test(nodeName) && !isWithinContentEditableFalse(target)) {\r\n              if (e.button !== 2) {\r\n                editor.selection.select(target, nodeName === 'TABLE');\r\n              }\r\n              if (e.type === 'mousedown') {\r\n                editor.nodeChanged();\r\n              }\r\n            }\r\n          });\r\n          var handleMSControlSelect_1 = function (e) {\r\n            var delayedSelect = function (node) {\r\n              Delay.setEditorTimeout(editor, function () {\r\n                return editor.selection.select(node);\r\n              });\r\n            };\r\n            if (isWithinContentEditableFalse(e.target) || isMedia$2(e.target)) {\r\n              e.preventDefault();\r\n              delayedSelect(e.target);\r\n              return;\r\n            }\r\n            if (/^(TABLE|IMG|HR)$/.test(e.target.nodeName)) {\r\n              e.preventDefault();\r\n              if (e.target.tagName === 'IMG') {\r\n                delayedSelect(e.target);\r\n              }\r\n            }\r\n          };\r\n          dom.bind(rootElement, 'mscontrolselect', handleMSControlSelect_1);\r\n          editor.on('remove', function () {\r\n            return dom.unbind(rootElement, 'mscontrolselect', handleMSControlSelect_1);\r\n          });\r\n        }\r\n        var throttledUpdateResizeRect = Delay.throttle(function (e) {\r\n          if (!editor.composing) {\r\n            updateResizeRect(e);\r\n          }\r\n        });\r\n        editor.on('NodeChange ResizeEditor ResizeWindow ResizeContent drop', throttledUpdateResizeRect);\r\n        editor.on('keyup compositionend', function (e) {\r\n          if (selectedElm && selectedElm.nodeName === 'TABLE') {\r\n            throttledUpdateResizeRect(e);\r\n          }\r\n        });\r\n        editor.on('hide blur', hideResizeRect);\r\n        editor.on('contextmenu longpress', contextMenuSelectImage, true);\r\n      });\r\n      editor.on('remove', unbindResizeHandleEvents);\r\n      var destroy = function () {\r\n        selectedElm = selectedElmGhost = resizeBackdrop = null;\r\n      };\r\n      return {\r\n        isResizable: isResizable,\r\n        showResizeRect: showResizeRect,\r\n        hideResizeRect: hideResizeRect,\r\n        updateResizeRect: updateResizeRect,\r\n        destroy: destroy\r\n      };\r\n    };\r\n\r\n    var hasCeProperty = function (node) {\r\n      return isContentEditableTrue$4(node) || isContentEditableFalse$b(node);\r\n    };\r\n    var findParent$1 = function (node, rootNode, predicate) {\r\n      while (node && node !== rootNode) {\r\n        if (predicate(node)) {\r\n          return node;\r\n        }\r\n        node = node.parentNode;\r\n      }\r\n      return null;\r\n    };\r\n    var findClosestIeRange = function (clientX, clientY, doc) {\r\n      var rects;\r\n      var element = doc.elementFromPoint(clientX, clientY);\r\n      var rng = doc.body.createTextRange();\r\n      if (!element || element.tagName === 'HTML') {\r\n        element = doc.body;\r\n      }\r\n      rng.moveToElementText(element);\r\n      rects = Tools.toArray(rng.getClientRects());\r\n      rects = rects.sort(function (a, b) {\r\n        a = Math.abs(Math.max(a.top - clientY, a.bottom - clientY));\r\n        b = Math.abs(Math.max(b.top - clientY, b.bottom - clientY));\r\n        return a - b;\r\n      });\r\n      if (rects.length > 0) {\r\n        clientY = (rects[0].bottom + rects[0].top) / 2;\r\n        try {\r\n          rng.moveToPoint(clientX, clientY);\r\n          rng.collapse(true);\r\n          return rng;\r\n        } catch (ex) {\r\n        }\r\n      }\r\n      return null;\r\n    };\r\n    var moveOutOfContentEditableFalse = function (rng, rootNode) {\r\n      var parentElement = rng && rng.parentElement ? rng.parentElement() : null;\r\n      return isContentEditableFalse$b(findParent$1(parentElement, rootNode, hasCeProperty)) ? null : rng;\r\n    };\r\n    var fromPoint = function (clientX, clientY, doc) {\r\n      var rng, point;\r\n      var pointDoc = doc;\r\n      if (pointDoc.caretPositionFromPoint) {\r\n        point = pointDoc.caretPositionFromPoint(clientX, clientY);\r\n        if (point) {\r\n          rng = doc.createRange();\r\n          rng.setStart(point.offsetNode, point.offset);\r\n          rng.collapse(true);\r\n        }\r\n      } else if (pointDoc.caretRangeFromPoint) {\r\n        rng = pointDoc.caretRangeFromPoint(clientX, clientY);\r\n      } else if (pointDoc.body.createTextRange) {\r\n        rng = pointDoc.body.createTextRange();\r\n        try {\r\n          rng.moveToPoint(clientX, clientY);\r\n          rng.collapse(true);\r\n        } catch (ex) {\r\n          rng = findClosestIeRange(clientX, clientY, doc);\r\n        }\r\n        return moveOutOfContentEditableFalse(rng, doc.body);\r\n      }\r\n      return rng;\r\n    };\r\n\r\n    var isEq$4 = function (rng1, rng2) {\r\n      return rng1 && rng2 && (rng1.startContainer === rng2.startContainer && rng1.startOffset === rng2.startOffset) && (rng1.endContainer === rng2.endContainer && rng1.endOffset === rng2.endOffset);\r\n    };\r\n\r\n    var findParent = function (node, rootNode, predicate) {\r\n      while (node && node !== rootNode) {\r\n        if (predicate(node)) {\r\n          return node;\r\n        }\r\n        node = node.parentNode;\r\n      }\r\n      return null;\r\n    };\r\n    var hasParent$1 = function (node, rootNode, predicate) {\r\n      return findParent(node, rootNode, predicate) !== null;\r\n    };\r\n    var hasParentWithName = function (node, rootNode, name) {\r\n      return hasParent$1(node, rootNode, function (node) {\r\n        return node.nodeName === name;\r\n      });\r\n    };\r\n    var isTable = function (node) {\r\n      return node && node.nodeName === 'TABLE';\r\n    };\r\n    var isTableCell$2 = function (node) {\r\n      return node && /^(TD|TH|CAPTION)$/.test(node.nodeName);\r\n    };\r\n    var isCeFalseCaretContainer = function (node, rootNode) {\r\n      return isCaretContainer$2(node) && hasParent$1(node, rootNode, isCaretNode) === false;\r\n    };\r\n    var hasBrBeforeAfter = function (dom, node, left) {\r\n      var walker = new DomTreeWalker(node, dom.getParent(node.parentNode, dom.isBlock) || dom.getRoot());\r\n      while (node = walker[left ? 'prev' : 'next']()) {\r\n        if (isBr$5(node)) {\r\n          return true;\r\n        }\r\n      }\r\n    };\r\n    var isPrevNode = function (node, name) {\r\n      return node.previousSibling && node.previousSibling.nodeName === name;\r\n    };\r\n    var hasContentEditableFalseParent = function (body, node) {\r\n      while (node && node !== body) {\r\n        if (isContentEditableFalse$b(node)) {\r\n          return true;\r\n        }\r\n        node = node.parentNode;\r\n      }\r\n      return false;\r\n    };\r\n    var findTextNodeRelative = function (dom, isAfterNode, collapsed, left, startNode) {\r\n      var lastInlineElement;\r\n      var body = dom.getRoot();\r\n      var node;\r\n      var nonEmptyElementsMap = dom.schema.getNonEmptyElements();\r\n      var parentBlockContainer = dom.getParent(startNode.parentNode, dom.isBlock) || body;\r\n      if (left && isBr$5(startNode) && isAfterNode && dom.isEmpty(parentBlockContainer)) {\r\n        return Optional.some(CaretPosition(startNode.parentNode, dom.nodeIndex(startNode)));\r\n      }\r\n      var walker = new DomTreeWalker(startNode, parentBlockContainer);\r\n      while (node = walker[left ? 'prev' : 'next']()) {\r\n        if (dom.getContentEditableParent(node) === 'false' || isCeFalseCaretContainer(node, body)) {\r\n          return Optional.none();\r\n        }\r\n        if (isText$7(node) && node.nodeValue.length > 0) {\r\n          if (hasParentWithName(node, body, 'A') === false) {\r\n            return Optional.some(CaretPosition(node, left ? node.nodeValue.length : 0));\r\n          }\r\n          return Optional.none();\r\n        }\r\n        if (dom.isBlock(node) || nonEmptyElementsMap[node.nodeName.toLowerCase()]) {\r\n          return Optional.none();\r\n        }\r\n        lastInlineElement = node;\r\n      }\r\n      if (collapsed && lastInlineElement) {\r\n        return Optional.some(CaretPosition(lastInlineElement, 0));\r\n      }\r\n      return Optional.none();\r\n    };\r\n    var normalizeEndPoint = function (dom, collapsed, start, rng) {\r\n      var container, offset;\r\n      var body = dom.getRoot();\r\n      var node;\r\n      var directionLeft, normalized = false;\r\n      container = rng[(start ? 'start' : 'end') + 'Container'];\r\n      offset = rng[(start ? 'start' : 'end') + 'Offset'];\r\n      var isAfterNode = isElement$5(container) && offset === container.childNodes.length;\r\n      var nonEmptyElementsMap = dom.schema.getNonEmptyElements();\r\n      directionLeft = start;\r\n      if (isCaretContainer$2(container)) {\r\n        return Optional.none();\r\n      }\r\n      if (isElement$5(container) && offset > container.childNodes.length - 1) {\r\n        directionLeft = false;\r\n      }\r\n      if (isDocument$1(container)) {\r\n        container = body;\r\n        offset = 0;\r\n      }\r\n      if (container === body) {\r\n        if (directionLeft) {\r\n          node = container.childNodes[offset > 0 ? offset - 1 : 0];\r\n          if (node) {\r\n            if (isCaretContainer$2(node)) {\r\n              return Optional.none();\r\n            }\r\n            if (nonEmptyElementsMap[node.nodeName] || isTable(node)) {\r\n              return Optional.none();\r\n            }\r\n          }\r\n        }\r\n        if (container.hasChildNodes()) {\r\n          offset = Math.min(!directionLeft && offset > 0 ? offset - 1 : offset, container.childNodes.length - 1);\r\n          container = container.childNodes[offset];\r\n          offset = isText$7(container) && isAfterNode ? container.data.length : 0;\r\n          if (!collapsed && container === body.lastChild && isTable(container)) {\r\n            return Optional.none();\r\n          }\r\n          if (hasContentEditableFalseParent(body, container) || isCaretContainer$2(container)) {\r\n            return Optional.none();\r\n          }\r\n          if (container.hasChildNodes() && isTable(container) === false) {\r\n            node = container;\r\n            var walker = new DomTreeWalker(container, body);\r\n            do {\r\n              if (isContentEditableFalse$b(node) || isCaretContainer$2(node)) {\r\n                normalized = false;\r\n                break;\r\n              }\r\n              if (isText$7(node) && node.nodeValue.length > 0) {\r\n                offset = directionLeft ? 0 : node.nodeValue.length;\r\n                container = node;\r\n                normalized = true;\r\n                break;\r\n              }\r\n              if (nonEmptyElementsMap[node.nodeName.toLowerCase()] && !isTableCell$2(node)) {\r\n                offset = dom.nodeIndex(node);\r\n                container = node.parentNode;\r\n                if (!directionLeft) {\r\n                  offset++;\r\n                }\r\n                normalized = true;\r\n                break;\r\n              }\r\n            } while (node = directionLeft ? walker.next() : walker.prev());\r\n          }\r\n        }\r\n      }\r\n      if (collapsed) {\r\n        if (isText$7(container) && offset === 0) {\r\n          findTextNodeRelative(dom, isAfterNode, collapsed, true, container).each(function (pos) {\r\n            container = pos.container();\r\n            offset = pos.offset();\r\n            normalized = true;\r\n          });\r\n        }\r\n        if (isElement$5(container)) {\r\n          node = container.childNodes[offset];\r\n          if (!node) {\r\n            node = container.childNodes[offset - 1];\r\n          }\r\n          if (node && isBr$5(node) && !isPrevNode(node, 'A') && !hasBrBeforeAfter(dom, node, false) && !hasBrBeforeAfter(dom, node, true)) {\r\n            findTextNodeRelative(dom, isAfterNode, collapsed, true, node).each(function (pos) {\r\n              container = pos.container();\r\n              offset = pos.offset();\r\n              normalized = true;\r\n            });\r\n          }\r\n        }\r\n      }\r\n      if (directionLeft && !collapsed && isText$7(container) && offset === container.nodeValue.length) {\r\n        findTextNodeRelative(dom, isAfterNode, collapsed, false, container).each(function (pos) {\r\n          container = pos.container();\r\n          offset = pos.offset();\r\n          normalized = true;\r\n        });\r\n      }\r\n      return normalized ? Optional.some(CaretPosition(container, offset)) : Optional.none();\r\n    };\r\n    var normalize$2 = function (dom, rng) {\r\n      var collapsed = rng.collapsed, normRng = rng.cloneRange();\r\n      var startPos = CaretPosition.fromRangeStart(rng);\r\n      normalizeEndPoint(dom, collapsed, true, normRng).each(function (pos) {\r\n        if (!collapsed || !CaretPosition.isAbove(startPos, pos)) {\r\n          normRng.setStart(pos.container(), pos.offset());\r\n        }\r\n      });\r\n      if (!collapsed) {\r\n        normalizeEndPoint(dom, collapsed, false, normRng).each(function (pos) {\r\n          normRng.setEnd(pos.container(), pos.offset());\r\n        });\r\n      }\r\n      if (collapsed) {\r\n        normRng.collapse(true);\r\n      }\r\n      return isEq$4(rng, normRng) ? Optional.none() : Optional.some(normRng);\r\n    };\r\n\r\n    var splitText = function (node, offset) {\r\n      return node.splitText(offset);\r\n    };\r\n    var split = function (rng) {\r\n      var startContainer = rng.startContainer, startOffset = rng.startOffset, endContainer = rng.endContainer, endOffset = rng.endOffset;\r\n      if (startContainer === endContainer && isText$7(startContainer)) {\r\n        if (startOffset > 0 && startOffset < startContainer.nodeValue.length) {\r\n          endContainer = splitText(startContainer, startOffset);\r\n          startContainer = endContainer.previousSibling;\r\n          if (endOffset > startOffset) {\r\n            endOffset = endOffset - startOffset;\r\n            startContainer = endContainer = splitText(endContainer, endOffset).previousSibling;\r\n            endOffset = endContainer.nodeValue.length;\r\n            startOffset = 0;\r\n          } else {\r\n            endOffset = 0;\r\n          }\r\n        }\r\n      } else {\r\n        if (isText$7(startContainer) && startOffset > 0 && startOffset < startContainer.nodeValue.length) {\r\n          startContainer = splitText(startContainer, startOffset);\r\n          startOffset = 0;\r\n        }\r\n        if (isText$7(endContainer) && endOffset > 0 && endOffset < endContainer.nodeValue.length) {\r\n          endContainer = splitText(endContainer, endOffset).previousSibling;\r\n          endOffset = endContainer.nodeValue.length;\r\n        }\r\n      }\r\n      return {\r\n        startContainer: startContainer,\r\n        startOffset: startOffset,\r\n        endContainer: endContainer,\r\n        endOffset: endOffset\r\n      };\r\n    };\r\n\r\n    var RangeUtils = function (dom) {\r\n      var walk = function (rng, callback) {\r\n        return walk$2(dom, rng, callback);\r\n      };\r\n      var split$1 = split;\r\n      var normalize = function (rng) {\r\n        return normalize$2(dom, rng).fold(never, function (normalizedRng) {\r\n          rng.setStart(normalizedRng.startContainer, normalizedRng.startOffset);\r\n          rng.setEnd(normalizedRng.endContainer, normalizedRng.endOffset);\r\n          return true;\r\n        });\r\n      };\r\n      return {\r\n        walk: walk,\r\n        split: split$1,\r\n        normalize: normalize\r\n      };\r\n    };\r\n    RangeUtils.compareRanges = isEq$4;\r\n    RangeUtils.getCaretRangeFromPoint = fromPoint;\r\n    RangeUtils.getSelectedNode = getSelectedNode;\r\n    RangeUtils.getNode = getNode$1;\r\n\r\n    var Dimension = function (name, getOffset) {\r\n      var set = function (element, h) {\r\n        if (!isNumber(h) && !h.match(/^[0-9]+$/)) {\r\n          throw new Error(name + '.set accepts only positive integer values. Value was ' + h);\r\n        }\r\n        var dom = element.dom;\r\n        if (isSupported(dom)) {\r\n          dom.style[name] = h + 'px';\r\n        }\r\n      };\r\n      var get = function (element) {\r\n        var r = getOffset(element);\r\n        if (r <= 0 || r === null) {\r\n          var css = get$5(element, name);\r\n          return parseFloat(css) || 0;\r\n        }\r\n        return r;\r\n      };\r\n      var getOuter = get;\r\n      var aggregate = function (element, properties) {\r\n        return foldl(properties, function (acc, property) {\r\n          var val = get$5(element, property);\r\n          var value = val === undefined ? 0 : parseInt(val, 10);\r\n          return isNaN(value) ? acc : acc + value;\r\n        }, 0);\r\n      };\r\n      var max = function (element, value, properties) {\r\n        var cumulativeInclusions = aggregate(element, properties);\r\n        var absoluteMax = value > cumulativeInclusions ? value - cumulativeInclusions : 0;\r\n        return absoluteMax;\r\n      };\r\n      return {\r\n        set: set,\r\n        get: get,\r\n        getOuter: getOuter,\r\n        aggregate: aggregate,\r\n        max: max\r\n      };\r\n    };\r\n\r\n    var api = Dimension('height', function (element) {\r\n      var dom = element.dom;\r\n      return inBody(element) ? dom.getBoundingClientRect().height : dom.offsetHeight;\r\n    });\r\n    var get$1 = function (element) {\r\n      return api.get(element);\r\n    };\r\n\r\n    var walkUp = function (navigation, doc) {\r\n      var frame = navigation.view(doc);\r\n      return frame.fold(constant([]), function (f) {\r\n        var parent = navigation.owner(f);\r\n        var rest = walkUp(navigation, parent);\r\n        return [f].concat(rest);\r\n      });\r\n    };\r\n    var pathTo = function (element, navigation) {\r\n      var d = navigation.owner(element);\r\n      return walkUp(navigation, d);\r\n    };\r\n\r\n    var view = function (doc) {\r\n      var _a;\r\n      var element = doc.dom === document ? Optional.none() : Optional.from((_a = doc.dom.defaultView) === null || _a === void 0 ? void 0 : _a.frameElement);\r\n      return element.map(SugarElement.fromDom);\r\n    };\r\n    var owner = function (element) {\r\n      return documentOrOwner(element);\r\n    };\r\n\r\n    var Navigation = /*#__PURE__*/Object.freeze({\r\n        __proto__: null,\r\n        view: view,\r\n        owner: owner\r\n    });\r\n\r\n    var find$1 = function (element) {\r\n      var doc = SugarElement.fromDom(document);\r\n      var scroll = get$8(doc);\r\n      var frames = pathTo(element, Navigation);\r\n      var offset = viewport(element);\r\n      var r = foldr(frames, function (b, a) {\r\n        var loc = viewport(a);\r\n        return {\r\n          left: b.left + loc.left,\r\n          top: b.top + loc.top\r\n        };\r\n      }, {\r\n        left: 0,\r\n        top: 0\r\n      });\r\n      return SugarPosition(r.left + offset.left + scroll.left, r.top + offset.top + scroll.top);\r\n    };\r\n\r\n    var excludeFromDescend = function (element) {\r\n      return name(element) === 'textarea';\r\n    };\r\n    var fireScrollIntoViewEvent = function (editor, data) {\r\n      var scrollEvent = editor.fire('ScrollIntoView', data);\r\n      return scrollEvent.isDefaultPrevented();\r\n    };\r\n    var fireAfterScrollIntoViewEvent = function (editor, data) {\r\n      editor.fire('AfterScrollIntoView', data);\r\n    };\r\n    var descend = function (element, offset) {\r\n      var children$1 = children(element);\r\n      if (children$1.length === 0 || excludeFromDescend(element)) {\r\n        return {\r\n          element: element,\r\n          offset: offset\r\n        };\r\n      } else if (offset < children$1.length && !excludeFromDescend(children$1[offset])) {\r\n        return {\r\n          element: children$1[offset],\r\n          offset: 0\r\n        };\r\n      } else {\r\n        var last = children$1[children$1.length - 1];\r\n        if (excludeFromDescend(last)) {\r\n          return {\r\n            element: element,\r\n            offset: offset\r\n          };\r\n        } else {\r\n          if (name(last) === 'img') {\r\n            return {\r\n              element: last,\r\n              offset: 1\r\n            };\r\n          } else if (isText$8(last)) {\r\n            return {\r\n              element: last,\r\n              offset: get$2(last).length\r\n            };\r\n          } else {\r\n            return {\r\n              element: last,\r\n              offset: children(last).length\r\n            };\r\n          }\r\n        }\r\n      }\r\n    };\r\n    var markerInfo = function (element, cleanupFun) {\r\n      var pos = absolute(element);\r\n      var height = get$1(element);\r\n      return {\r\n        element: element,\r\n        bottom: pos.top + height,\r\n        height: height,\r\n        pos: pos,\r\n        cleanup: cleanupFun\r\n      };\r\n    };\r\n    var createMarker = function (element, offset) {\r\n      var startPoint = descend(element, offset);\r\n      var span = SugarElement.fromHtml('<span data-mce-bogus=\"all\" style=\"display: inline-block;\">' + ZWSP$1 + '</span>');\r\n      before$4(startPoint.element, span);\r\n      return markerInfo(span, function () {\r\n        return remove$7(span);\r\n      });\r\n    };\r\n    var elementMarker = function (element) {\r\n      return markerInfo(SugarElement.fromDom(element), noop);\r\n    };\r\n    var withMarker = function (editor, f, rng, alignToTop) {\r\n      preserveWith(editor, function (_s, _e) {\r\n        return applyWithMarker(editor, f, rng, alignToTop);\r\n      }, rng);\r\n    };\r\n    var withScrollEvents = function (editor, doc, f, marker, alignToTop) {\r\n      var data = {\r\n        elm: marker.element.dom,\r\n        alignToTop: alignToTop\r\n      };\r\n      if (fireScrollIntoViewEvent(editor, data)) {\r\n        return;\r\n      }\r\n      var scrollTop = get$8(doc).top;\r\n      f(doc, scrollTop, marker, alignToTop);\r\n      fireAfterScrollIntoViewEvent(editor, data);\r\n    };\r\n    var applyWithMarker = function (editor, f, rng, alignToTop) {\r\n      var body = SugarElement.fromDom(editor.getBody());\r\n      var doc = SugarElement.fromDom(editor.getDoc());\r\n      reflow(body);\r\n      var marker = createMarker(SugarElement.fromDom(rng.startContainer), rng.startOffset);\r\n      withScrollEvents(editor, doc, f, marker, alignToTop);\r\n      marker.cleanup();\r\n    };\r\n    var withElement = function (editor, element, f, alignToTop) {\r\n      var doc = SugarElement.fromDom(editor.getDoc());\r\n      withScrollEvents(editor, doc, f, elementMarker(element), alignToTop);\r\n    };\r\n    var preserveWith = function (editor, f, rng) {\r\n      var startElement = rng.startContainer;\r\n      var startOffset = rng.startOffset;\r\n      var endElement = rng.endContainer;\r\n      var endOffset = rng.endOffset;\r\n      f(SugarElement.fromDom(startElement), SugarElement.fromDom(endElement));\r\n      var newRng = editor.dom.createRng();\r\n      newRng.setStart(startElement, startOffset);\r\n      newRng.setEnd(endElement, endOffset);\r\n      editor.selection.setRng(rng);\r\n    };\r\n    var scrollToMarker = function (marker, viewHeight, alignToTop, doc) {\r\n      var pos = marker.pos;\r\n      if (alignToTop) {\r\n        to(pos.left, pos.top, doc);\r\n      } else {\r\n        var y = pos.top - viewHeight + marker.height;\r\n        to(pos.left, y, doc);\r\n      }\r\n    };\r\n    var intoWindowIfNeeded = function (doc, scrollTop, viewHeight, marker, alignToTop) {\r\n      var viewportBottom = viewHeight + scrollTop;\r\n      var markerTop = marker.pos.top;\r\n      var markerBottom = marker.bottom;\r\n      var largerThanViewport = markerBottom - markerTop >= viewHeight;\r\n      if (markerTop < scrollTop) {\r\n        scrollToMarker(marker, viewHeight, alignToTop !== false, doc);\r\n      } else if (markerTop > viewportBottom) {\r\n        var align = largerThanViewport ? alignToTop !== false : alignToTop === true;\r\n        scrollToMarker(marker, viewHeight, align, doc);\r\n      } else if (markerBottom > viewportBottom && !largerThanViewport) {\r\n        scrollToMarker(marker, viewHeight, alignToTop === true, doc);\r\n      }\r\n    };\r\n    var intoWindow = function (doc, scrollTop, marker, alignToTop) {\r\n      var viewHeight = doc.dom.defaultView.innerHeight;\r\n      intoWindowIfNeeded(doc, scrollTop, viewHeight, marker, alignToTop);\r\n    };\r\n    var intoFrame = function (doc, scrollTop, marker, alignToTop) {\r\n      var frameViewHeight = doc.dom.defaultView.innerHeight;\r\n      intoWindowIfNeeded(doc, scrollTop, frameViewHeight, marker, alignToTop);\r\n      var op = find$1(marker.element);\r\n      var viewportBounds = getBounds(window);\r\n      if (op.top < viewportBounds.y) {\r\n        intoView(marker.element, alignToTop !== false);\r\n      } else if (op.top > viewportBounds.bottom) {\r\n        intoView(marker.element, alignToTop === true);\r\n      }\r\n    };\r\n    var rangeIntoWindow = function (editor, rng, alignToTop) {\r\n      return withMarker(editor, intoWindow, rng, alignToTop);\r\n    };\r\n    var elementIntoWindow = function (editor, element, alignToTop) {\r\n      return withElement(editor, element, intoWindow, alignToTop);\r\n    };\r\n    var rangeIntoFrame = function (editor, rng, alignToTop) {\r\n      return withMarker(editor, intoFrame, rng, alignToTop);\r\n    };\r\n    var elementIntoFrame = function (editor, element, alignToTop) {\r\n      return withElement(editor, element, intoFrame, alignToTop);\r\n    };\r\n    var scrollElementIntoView = function (editor, element, alignToTop) {\r\n      var scroller = editor.inline ? elementIntoWindow : elementIntoFrame;\r\n      scroller(editor, element, alignToTop);\r\n    };\r\n    var scrollRangeIntoView = function (editor, rng, alignToTop) {\r\n      var scroller = editor.inline ? rangeIntoWindow : rangeIntoFrame;\r\n      scroller(editor, rng, alignToTop);\r\n    };\r\n\r\n    var getDocument = function () {\r\n      return SugarElement.fromDom(document);\r\n    };\r\n\r\n    var focus$1 = function (element) {\r\n      return element.dom.focus();\r\n    };\r\n    var hasFocus$1 = function (element) {\r\n      var root = getRootNode(element).dom;\r\n      return element.dom === root.activeElement;\r\n    };\r\n    var active = function (root) {\r\n      if (root === void 0) {\r\n        root = getDocument();\r\n      }\r\n      return Optional.from(root.dom.activeElement).map(SugarElement.fromDom);\r\n    };\r\n    var search = function (element) {\r\n      return active(getRootNode(element)).filter(function (e) {\r\n        return element.dom.contains(e.dom);\r\n      });\r\n    };\r\n\r\n    var create$5 = function (start, soffset, finish, foffset) {\r\n      return {\r\n        start: start,\r\n        soffset: soffset,\r\n        finish: finish,\r\n        foffset: foffset\r\n      };\r\n    };\r\n    var SimRange = { create: create$5 };\r\n\r\n    var adt$1 = Adt.generate([\r\n      { before: ['element'] },\r\n      {\r\n        on: [\r\n          'element',\r\n          'offset'\r\n        ]\r\n      },\r\n      { after: ['element'] }\r\n    ]);\r\n    var cata = function (subject, onBefore, onOn, onAfter) {\r\n      return subject.fold(onBefore, onOn, onAfter);\r\n    };\r\n    var getStart$2 = function (situ) {\r\n      return situ.fold(identity, identity, identity);\r\n    };\r\n    var before$1 = adt$1.before;\r\n    var on = adt$1.on;\r\n    var after$1 = adt$1.after;\r\n    var Situ = {\r\n      before: before$1,\r\n      on: on,\r\n      after: after$1,\r\n      cata: cata,\r\n      getStart: getStart$2\r\n    };\r\n\r\n    var adt = Adt.generate([\r\n      { domRange: ['rng'] },\r\n      {\r\n        relative: [\r\n          'startSitu',\r\n          'finishSitu'\r\n        ]\r\n      },\r\n      {\r\n        exact: [\r\n          'start',\r\n          'soffset',\r\n          'finish',\r\n          'foffset'\r\n        ]\r\n      }\r\n    ]);\r\n    var exactFromRange = function (simRange) {\r\n      return adt.exact(simRange.start, simRange.soffset, simRange.finish, simRange.foffset);\r\n    };\r\n    var getStart$1 = function (selection) {\r\n      return selection.match({\r\n        domRange: function (rng) {\r\n          return SugarElement.fromDom(rng.startContainer);\r\n        },\r\n        relative: function (startSitu, _finishSitu) {\r\n          return Situ.getStart(startSitu);\r\n        },\r\n        exact: function (start, _soffset, _finish, _foffset) {\r\n          return start;\r\n        }\r\n      });\r\n    };\r\n    var domRange = adt.domRange;\r\n    var relative = adt.relative;\r\n    var exact = adt.exact;\r\n    var getWin = function (selection) {\r\n      var start = getStart$1(selection);\r\n      return defaultView(start);\r\n    };\r\n    var range = SimRange.create;\r\n    var SimSelection = {\r\n      domRange: domRange,\r\n      relative: relative,\r\n      exact: exact,\r\n      exactFromRange: exactFromRange,\r\n      getWin: getWin,\r\n      range: range\r\n    };\r\n\r\n    var browser$1 = detect().browser;\r\n    var clamp$1 = function (offset, element) {\r\n      var max = isText$8(element) ? get$2(element).length : children(element).length + 1;\r\n      if (offset > max) {\r\n        return max;\r\n      } else if (offset < 0) {\r\n        return 0;\r\n      }\r\n      return offset;\r\n    };\r\n    var normalizeRng = function (rng) {\r\n      return SimSelection.range(rng.start, clamp$1(rng.soffset, rng.start), rng.finish, clamp$1(rng.foffset, rng.finish));\r\n    };\r\n    var isOrContains = function (root, elm) {\r\n      return !isRestrictedNode(elm.dom) && (contains$1(root, elm) || eq(root, elm));\r\n    };\r\n    var isRngInRoot = function (root) {\r\n      return function (rng) {\r\n        return isOrContains(root, rng.start) && isOrContains(root, rng.finish);\r\n      };\r\n    };\r\n    var shouldStore = function (editor) {\r\n      return editor.inline === true || browser$1.isIE();\r\n    };\r\n    var nativeRangeToSelectionRange = function (r) {\r\n      return SimSelection.range(SugarElement.fromDom(r.startContainer), r.startOffset, SugarElement.fromDom(r.endContainer), r.endOffset);\r\n    };\r\n    var readRange = function (win) {\r\n      var selection = win.getSelection();\r\n      var rng = !selection || selection.rangeCount === 0 ? Optional.none() : Optional.from(selection.getRangeAt(0));\r\n      return rng.map(nativeRangeToSelectionRange);\r\n    };\r\n    var getBookmark = function (root) {\r\n      var win = defaultView(root);\r\n      return readRange(win.dom).filter(isRngInRoot(root));\r\n    };\r\n    var validate = function (root, bookmark) {\r\n      return Optional.from(bookmark).filter(isRngInRoot(root)).map(normalizeRng);\r\n    };\r\n    var bookmarkToNativeRng = function (bookmark) {\r\n      var rng = document.createRange();\r\n      try {\r\n        rng.setStart(bookmark.start.dom, bookmark.soffset);\r\n        rng.setEnd(bookmark.finish.dom, bookmark.foffset);\r\n        return Optional.some(rng);\r\n      } catch (_) {\r\n        return Optional.none();\r\n      }\r\n    };\r\n    var store = function (editor) {\r\n      var newBookmark = shouldStore(editor) ? getBookmark(SugarElement.fromDom(editor.getBody())) : Optional.none();\r\n      editor.bookmark = newBookmark.isSome() ? newBookmark : editor.bookmark;\r\n    };\r\n    var storeNative = function (editor, rng) {\r\n      var root = SugarElement.fromDom(editor.getBody());\r\n      var range = shouldStore(editor) ? Optional.from(rng) : Optional.none();\r\n      var newBookmark = range.map(nativeRangeToSelectionRange).filter(isRngInRoot(root));\r\n      editor.bookmark = newBookmark.isSome() ? newBookmark : editor.bookmark;\r\n    };\r\n    var getRng = function (editor) {\r\n      var bookmark = editor.bookmark ? editor.bookmark : Optional.none();\r\n      return bookmark.bind(function (x) {\r\n        return validate(SugarElement.fromDom(editor.getBody()), x);\r\n      }).bind(bookmarkToNativeRng);\r\n    };\r\n    var restore = function (editor) {\r\n      getRng(editor).each(function (rng) {\r\n        return editor.selection.setRng(rng);\r\n      });\r\n    };\r\n\r\n    var isEditorUIElement$1 = function (elm) {\r\n      var className = elm.className.toString();\r\n      return className.indexOf('tox-') !== -1 || className.indexOf('mce-') !== -1;\r\n    };\r\n    var FocusManager = { isEditorUIElement: isEditorUIElement$1 };\r\n\r\n    var isManualNodeChange = function (e) {\r\n      return e.type === 'nodechange' && e.selectionChange;\r\n    };\r\n    var registerPageMouseUp = function (editor, throttledStore) {\r\n      var mouseUpPage = function () {\r\n        throttledStore.throttle();\r\n      };\r\n      DOMUtils.DOM.bind(document, 'mouseup', mouseUpPage);\r\n      editor.on('remove', function () {\r\n        DOMUtils.DOM.unbind(document, 'mouseup', mouseUpPage);\r\n      });\r\n    };\r\n    var registerFocusOut = function (editor) {\r\n      editor.on('focusout', function () {\r\n        store(editor);\r\n      });\r\n    };\r\n    var registerMouseUp = function (editor, throttledStore) {\r\n      editor.on('mouseup touchend', function (_e) {\r\n        throttledStore.throttle();\r\n      });\r\n    };\r\n    var registerEditorEvents = function (editor, throttledStore) {\r\n      var browser = detect().browser;\r\n      if (browser.isIE()) {\r\n        registerFocusOut(editor);\r\n      } else {\r\n        registerMouseUp(editor, throttledStore);\r\n      }\r\n      editor.on('keyup NodeChange', function (e) {\r\n        if (!isManualNodeChange(e)) {\r\n          store(editor);\r\n        }\r\n      });\r\n    };\r\n    var register$3 = function (editor) {\r\n      var throttledStore = first(function () {\r\n        store(editor);\r\n      }, 0);\r\n      editor.on('init', function () {\r\n        if (editor.inline) {\r\n          registerPageMouseUp(editor, throttledStore);\r\n        }\r\n        registerEditorEvents(editor, throttledStore);\r\n      });\r\n      editor.on('remove', function () {\r\n        throttledStore.cancel();\r\n      });\r\n    };\r\n\r\n    var documentFocusInHandler;\r\n    var DOM$8 = DOMUtils.DOM;\r\n    var isEditorUIElement = function (elm) {\r\n      return FocusManager.isEditorUIElement(elm);\r\n    };\r\n    var isEditorContentAreaElement = function (elm) {\r\n      var classList = elm.classList;\r\n      if (classList !== undefined) {\r\n        return classList.contains('tox-edit-area') || classList.contains('tox-edit-area__iframe') || classList.contains('mce-content-body');\r\n      } else {\r\n        return false;\r\n      }\r\n    };\r\n    var isUIElement = function (editor, elm) {\r\n      var customSelector = getCustomUiSelector(editor);\r\n      var parent = DOM$8.getParent(elm, function (elm) {\r\n        return isEditorUIElement(elm) || (customSelector ? editor.dom.is(elm, customSelector) : false);\r\n      });\r\n      return parent !== null;\r\n    };\r\n    var getActiveElement = function (editor) {\r\n      try {\r\n        var root = getRootNode(SugarElement.fromDom(editor.getElement()));\r\n        return active(root).fold(function () {\r\n          return document.body;\r\n        }, function (x) {\r\n          return x.dom;\r\n        });\r\n      } catch (ex) {\r\n        return document.body;\r\n      }\r\n    };\r\n    var registerEvents$1 = function (editorManager, e) {\r\n      var editor = e.editor;\r\n      register$3(editor);\r\n      editor.on('focusin', function () {\r\n        var focusedEditor = editorManager.focusedEditor;\r\n        if (focusedEditor !== editor) {\r\n          if (focusedEditor) {\r\n            focusedEditor.fire('blur', { focusedEditor: editor });\r\n          }\r\n          editorManager.setActive(editor);\r\n          editorManager.focusedEditor = editor;\r\n          editor.fire('focus', { blurredEditor: focusedEditor });\r\n          editor.focus(true);\r\n        }\r\n      });\r\n      editor.on('focusout', function () {\r\n        Delay.setEditorTimeout(editor, function () {\r\n          var focusedEditor = editorManager.focusedEditor;\r\n          if (!isUIElement(editor, getActiveElement(editor)) && focusedEditor === editor) {\r\n            editor.fire('blur', { focusedEditor: null });\r\n            editorManager.focusedEditor = null;\r\n          }\r\n        });\r\n      });\r\n      if (!documentFocusInHandler) {\r\n        documentFocusInHandler = function (e) {\r\n          var activeEditor = editorManager.activeEditor;\r\n          if (activeEditor) {\r\n            getOriginalEventTarget(e).each(function (target) {\r\n              if (target.ownerDocument === document) {\r\n                if (target !== document.body && !isUIElement(activeEditor, target) && editorManager.focusedEditor === activeEditor) {\r\n                  activeEditor.fire('blur', { focusedEditor: null });\r\n                  editorManager.focusedEditor = null;\r\n                }\r\n              }\r\n            });\r\n          }\r\n        };\r\n        DOM$8.bind(document, 'focusin', documentFocusInHandler);\r\n      }\r\n    };\r\n    var unregisterDocumentEvents = function (editorManager, e) {\r\n      if (editorManager.focusedEditor === e.editor) {\r\n        editorManager.focusedEditor = null;\r\n      }\r\n      if (!editorManager.activeEditor) {\r\n        DOM$8.unbind(document, 'focusin', documentFocusInHandler);\r\n        documentFocusInHandler = null;\r\n      }\r\n    };\r\n    var setup$l = function (editorManager) {\r\n      editorManager.on('AddEditor', curry(registerEvents$1, editorManager));\r\n      editorManager.on('RemoveEditor', curry(unregisterDocumentEvents, editorManager));\r\n    };\r\n\r\n    var getContentEditableHost = function (editor, node) {\r\n      return editor.dom.getParent(node, function (node) {\r\n        return editor.dom.getContentEditable(node) === 'true';\r\n      });\r\n    };\r\n    var getCollapsedNode = function (rng) {\r\n      return rng.collapsed ? Optional.from(getNode$1(rng.startContainer, rng.startOffset)).map(SugarElement.fromDom) : Optional.none();\r\n    };\r\n    var getFocusInElement = function (root, rng) {\r\n      return getCollapsedNode(rng).bind(function (node) {\r\n        if (isTableSection(node)) {\r\n          return Optional.some(node);\r\n        } else if (contains$1(root, node) === false) {\r\n          return Optional.some(root);\r\n        } else {\r\n          return Optional.none();\r\n        }\r\n      });\r\n    };\r\n    var normalizeSelection$1 = function (editor, rng) {\r\n      getFocusInElement(SugarElement.fromDom(editor.getBody()), rng).bind(function (elm) {\r\n        return firstPositionIn(elm.dom);\r\n      }).fold(function () {\r\n        editor.selection.normalize();\r\n        return;\r\n      }, function (caretPos) {\r\n        return editor.selection.setRng(caretPos.toRange());\r\n      });\r\n    };\r\n    var focusBody = function (body) {\r\n      if (body.setActive) {\r\n        try {\r\n          body.setActive();\r\n        } catch (ex) {\r\n          body.focus();\r\n        }\r\n      } else {\r\n        body.focus();\r\n      }\r\n    };\r\n    var hasElementFocus = function (elm) {\r\n      return hasFocus$1(elm) || search(elm).isSome();\r\n    };\r\n    var hasIframeFocus = function (editor) {\r\n      return editor.iframeElement && hasFocus$1(SugarElement.fromDom(editor.iframeElement));\r\n    };\r\n    var hasInlineFocus = function (editor) {\r\n      var rawBody = editor.getBody();\r\n      return rawBody && hasElementFocus(SugarElement.fromDom(rawBody));\r\n    };\r\n    var hasUiFocus = function (editor) {\r\n      var dos = getRootNode(SugarElement.fromDom(editor.getElement()));\r\n      return active(dos).filter(function (elem) {\r\n        return !isEditorContentAreaElement(elem.dom) && isUIElement(editor, elem.dom);\r\n      }).isSome();\r\n    };\r\n    var hasFocus = function (editor) {\r\n      return editor.inline ? hasInlineFocus(editor) : hasIframeFocus(editor);\r\n    };\r\n    var hasEditorOrUiFocus = function (editor) {\r\n      return hasFocus(editor) || hasUiFocus(editor);\r\n    };\r\n    var focusEditor = function (editor) {\r\n      var selection = editor.selection;\r\n      var body = editor.getBody();\r\n      var rng = selection.getRng();\r\n      editor.quirks.refreshContentEditable();\r\n      if (editor.bookmark !== undefined && hasFocus(editor) === false) {\r\n        getRng(editor).each(function (bookmarkRng) {\r\n          editor.selection.setRng(bookmarkRng);\r\n          rng = bookmarkRng;\r\n        });\r\n      }\r\n      var contentEditableHost = getContentEditableHost(editor, selection.getNode());\r\n      if (editor.$.contains(body, contentEditableHost)) {\r\n        focusBody(contentEditableHost);\r\n        normalizeSelection$1(editor, rng);\r\n        activateEditor(editor);\r\n        return;\r\n      }\r\n      if (!editor.inline) {\r\n        if (!Env.opera) {\r\n          focusBody(body);\r\n        }\r\n        editor.getWin().focus();\r\n      }\r\n      if (Env.gecko || editor.inline) {\r\n        focusBody(body);\r\n        normalizeSelection$1(editor, rng);\r\n      }\r\n      activateEditor(editor);\r\n    };\r\n    var activateEditor = function (editor) {\r\n      return editor.editorManager.setActive(editor);\r\n    };\r\n    var focus = function (editor, skipFocus) {\r\n      if (editor.removed) {\r\n        return;\r\n      }\r\n      if (skipFocus) {\r\n        activateEditor(editor);\r\n      } else {\r\n        focusEditor(editor);\r\n      }\r\n    };\r\n\r\n    var getEndpointElement = function (root, rng, start, real, resolve) {\r\n      var container = start ? rng.startContainer : rng.endContainer;\r\n      var offset = start ? rng.startOffset : rng.endOffset;\r\n      return Optional.from(container).map(SugarElement.fromDom).map(function (elm) {\r\n        return !real || !rng.collapsed ? child$1(elm, resolve(elm, offset)).getOr(elm) : elm;\r\n      }).bind(function (elm) {\r\n        return isElement$6(elm) ? Optional.some(elm) : parent(elm).filter(isElement$6);\r\n      }).map(function (elm) {\r\n        return elm.dom;\r\n      }).getOr(root);\r\n    };\r\n    var getStart = function (root, rng, real) {\r\n      return getEndpointElement(root, rng, true, real, function (elm, offset) {\r\n        return Math.min(childNodesCount(elm), offset);\r\n      });\r\n    };\r\n    var getEnd = function (root, rng, real) {\r\n      return getEndpointElement(root, rng, false, real, function (elm, offset) {\r\n        return offset > 0 ? offset - 1 : offset;\r\n      });\r\n    };\r\n    var skipEmptyTextNodes = function (node, forwards) {\r\n      var orig = node;\r\n      while (node && isText$7(node) && node.length === 0) {\r\n        node = forwards ? node.nextSibling : node.previousSibling;\r\n      }\r\n      return node || orig;\r\n    };\r\n    var getNode = function (root, rng) {\r\n      var elm, startContainer, endContainer;\r\n      if (!rng) {\r\n        return root;\r\n      }\r\n      startContainer = rng.startContainer;\r\n      endContainer = rng.endContainer;\r\n      var startOffset = rng.startOffset;\r\n      var endOffset = rng.endOffset;\r\n      elm = rng.commonAncestorContainer;\r\n      if (!rng.collapsed) {\r\n        if (startContainer === endContainer) {\r\n          if (endOffset - startOffset < 2) {\r\n            if (startContainer.hasChildNodes()) {\r\n              elm = startContainer.childNodes[startOffset];\r\n            }\r\n          }\r\n        }\r\n        if (startContainer.nodeType === 3 && endContainer.nodeType === 3) {\r\n          if (startContainer.length === startOffset) {\r\n            startContainer = skipEmptyTextNodes(startContainer.nextSibling, true);\r\n          } else {\r\n            startContainer = startContainer.parentNode;\r\n          }\r\n          if (endOffset === 0) {\r\n            endContainer = skipEmptyTextNodes(endContainer.previousSibling, false);\r\n          } else {\r\n            endContainer = endContainer.parentNode;\r\n          }\r\n          if (startContainer && startContainer === endContainer) {\r\n            return startContainer;\r\n          }\r\n        }\r\n      }\r\n      if (elm && elm.nodeType === 3) {\r\n        return elm.parentNode;\r\n      }\r\n      return elm;\r\n    };\r\n    var getSelectedBlocks = function (dom, rng, startElm, endElm) {\r\n      var node;\r\n      var selectedBlocks = [];\r\n      var root = dom.getRoot();\r\n      startElm = dom.getParent(startElm || getStart(root, rng, rng.collapsed), dom.isBlock);\r\n      endElm = dom.getParent(endElm || getEnd(root, rng, rng.collapsed), dom.isBlock);\r\n      if (startElm && startElm !== root) {\r\n        selectedBlocks.push(startElm);\r\n      }\r\n      if (startElm && endElm && startElm !== endElm) {\r\n        node = startElm;\r\n        var walker = new DomTreeWalker(startElm, root);\r\n        while ((node = walker.next()) && node !== endElm) {\r\n          if (dom.isBlock(node)) {\r\n            selectedBlocks.push(node);\r\n          }\r\n        }\r\n      }\r\n      if (endElm && startElm !== endElm && endElm !== root) {\r\n        selectedBlocks.push(endElm);\r\n      }\r\n      return selectedBlocks;\r\n    };\r\n    var select = function (dom, node, content) {\r\n      return Optional.from(node).map(function (node) {\r\n        var idx = dom.nodeIndex(node);\r\n        var rng = dom.createRng();\r\n        rng.setStart(node.parentNode, idx);\r\n        rng.setEnd(node.parentNode, idx + 1);\r\n        if (content) {\r\n          moveEndPoint(dom, rng, node, true);\r\n          moveEndPoint(dom, rng, node, false);\r\n        }\r\n        return rng;\r\n      });\r\n    };\r\n\r\n    var processRanges = function (editor, ranges) {\r\n      return map$3(ranges, function (range) {\r\n        var evt = editor.fire('GetSelectionRange', { range: range });\r\n        return evt.range !== range ? evt.range : range;\r\n      });\r\n    };\r\n\r\n    var typeLookup = {\r\n      '#text': 3,\r\n      '#comment': 8,\r\n      '#cdata': 4,\r\n      '#pi': 7,\r\n      '#doctype': 10,\r\n      '#document-fragment': 11\r\n    };\r\n    var walk$1 = function (node, root, prev) {\r\n      var startName = prev ? 'lastChild' : 'firstChild';\r\n      var siblingName = prev ? 'prev' : 'next';\r\n      if (node[startName]) {\r\n        return node[startName];\r\n      }\r\n      if (node !== root) {\r\n        var sibling = node[siblingName];\r\n        if (sibling) {\r\n          return sibling;\r\n        }\r\n        for (var parent_1 = node.parent; parent_1 && parent_1 !== root; parent_1 = parent_1.parent) {\r\n          sibling = parent_1[siblingName];\r\n          if (sibling) {\r\n            return sibling;\r\n          }\r\n        }\r\n      }\r\n    };\r\n    var isEmptyTextNode = function (node) {\r\n      if (!isWhitespaceText(node.value)) {\r\n        return false;\r\n      }\r\n      var parentNode = node.parent;\r\n      if (parentNode && (parentNode.name !== 'span' || parentNode.attr('style')) && /^[ ]+$/.test(node.value)) {\r\n        return false;\r\n      }\r\n      return true;\r\n    };\r\n    var isNonEmptyElement = function (node) {\r\n      var isNamedAnchor = node.name === 'a' && !node.attr('href') && node.attr('id');\r\n      return node.attr('name') || node.attr('id') && !node.firstChild || node.attr('data-mce-bookmark') || isNamedAnchor;\r\n    };\r\n    var AstNode = function () {\r\n      function AstNode(name, type) {\r\n        this.name = name;\r\n        this.type = type;\r\n        if (type === 1) {\r\n          this.attributes = [];\r\n          this.attributes.map = {};\r\n        }\r\n      }\r\n      AstNode.create = function (name, attrs) {\r\n        var node = new AstNode(name, typeLookup[name] || 1);\r\n        if (attrs) {\r\n          each$j(attrs, function (value, attrName) {\r\n            node.attr(attrName, value);\r\n          });\r\n        }\r\n        return node;\r\n      };\r\n      AstNode.prototype.replace = function (node) {\r\n        var self = this;\r\n        if (node.parent) {\r\n          node.remove();\r\n        }\r\n        self.insert(node, self);\r\n        self.remove();\r\n        return self;\r\n      };\r\n      AstNode.prototype.attr = function (name, value) {\r\n        var self = this;\r\n        var attrs;\r\n        if (typeof name !== 'string') {\r\n          if (name !== undefined && name !== null) {\r\n            each$j(name, function (value, key) {\r\n              self.attr(key, value);\r\n            });\r\n          }\r\n          return self;\r\n        }\r\n        if (attrs = self.attributes) {\r\n          if (value !== undefined) {\r\n            if (value === null) {\r\n              if (name in attrs.map) {\r\n                delete attrs.map[name];\r\n                var i = attrs.length;\r\n                while (i--) {\r\n                  if (attrs[i].name === name) {\r\n                    attrs.splice(i, 1);\r\n                    return self;\r\n                  }\r\n                }\r\n              }\r\n              return self;\r\n            }\r\n            if (name in attrs.map) {\r\n              var i = attrs.length;\r\n              while (i--) {\r\n                if (attrs[i].name === name) {\r\n                  attrs[i].value = value;\r\n                  break;\r\n                }\r\n              }\r\n            } else {\r\n              attrs.push({\r\n                name: name,\r\n                value: value\r\n              });\r\n            }\r\n            attrs.map[name] = value;\r\n            return self;\r\n          }\r\n          return attrs.map[name];\r\n        }\r\n      };\r\n      AstNode.prototype.clone = function () {\r\n        var self = this;\r\n        var clone = new AstNode(self.name, self.type);\r\n        var selfAttrs;\r\n        if (selfAttrs = self.attributes) {\r\n          var cloneAttrs = [];\r\n          cloneAttrs.map = {};\r\n          for (var i = 0, l = selfAttrs.length; i < l; i++) {\r\n            var selfAttr = selfAttrs[i];\r\n            if (selfAttr.name !== 'id') {\r\n              cloneAttrs[cloneAttrs.length] = {\r\n                name: selfAttr.name,\r\n                value: selfAttr.value\r\n              };\r\n              cloneAttrs.map[selfAttr.name] = selfAttr.value;\r\n            }\r\n          }\r\n          clone.attributes = cloneAttrs;\r\n        }\r\n        clone.value = self.value;\r\n        clone.shortEnded = self.shortEnded;\r\n        return clone;\r\n      };\r\n      AstNode.prototype.wrap = function (wrapper) {\r\n        var self = this;\r\n        self.parent.insert(wrapper, self);\r\n        wrapper.append(self);\r\n        return self;\r\n      };\r\n      AstNode.prototype.unwrap = function () {\r\n        var self = this;\r\n        for (var node = self.firstChild; node;) {\r\n          var next = node.next;\r\n          self.insert(node, self, true);\r\n          node = next;\r\n        }\r\n        self.remove();\r\n      };\r\n      AstNode.prototype.remove = function () {\r\n        var self = this, parent = self.parent, next = self.next, prev = self.prev;\r\n        if (parent) {\r\n          if (parent.firstChild === self) {\r\n            parent.firstChild = next;\r\n            if (next) {\r\n              next.prev = null;\r\n            }\r\n          } else {\r\n            prev.next = next;\r\n          }\r\n          if (parent.lastChild === self) {\r\n            parent.lastChild = prev;\r\n            if (prev) {\r\n              prev.next = null;\r\n            }\r\n          } else {\r\n            next.prev = prev;\r\n          }\r\n          self.parent = self.next = self.prev = null;\r\n        }\r\n        return self;\r\n      };\r\n      AstNode.prototype.append = function (node) {\r\n        var self = this;\r\n        if (node.parent) {\r\n          node.remove();\r\n        }\r\n        var last = self.lastChild;\r\n        if (last) {\r\n          last.next = node;\r\n          node.prev = last;\r\n          self.lastChild = node;\r\n        } else {\r\n          self.lastChild = self.firstChild = node;\r\n        }\r\n        node.parent = self;\r\n        return node;\r\n      };\r\n      AstNode.prototype.insert = function (node, refNode, before) {\r\n        if (node.parent) {\r\n          node.remove();\r\n        }\r\n        var parent = refNode.parent || this;\r\n        if (before) {\r\n          if (refNode === parent.firstChild) {\r\n            parent.firstChild = node;\r\n          } else {\r\n            refNode.prev.next = node;\r\n          }\r\n          node.prev = refNode.prev;\r\n          node.next = refNode;\r\n          refNode.prev = node;\r\n        } else {\r\n          if (refNode === parent.lastChild) {\r\n            parent.lastChild = node;\r\n          } else {\r\n            refNode.next.prev = node;\r\n          }\r\n          node.next = refNode.next;\r\n          node.prev = refNode;\r\n          refNode.next = node;\r\n        }\r\n        node.parent = parent;\r\n        return node;\r\n      };\r\n      AstNode.prototype.getAll = function (name) {\r\n        var self = this;\r\n        var collection = [];\r\n        for (var node = self.firstChild; node; node = walk$1(node, self)) {\r\n          if (node.name === name) {\r\n            collection.push(node);\r\n          }\r\n        }\r\n        return collection;\r\n      };\r\n      AstNode.prototype.children = function () {\r\n        var self = this;\r\n        var collection = [];\r\n        for (var node = self.firstChild; node; node = node.next) {\r\n          collection.push(node);\r\n        }\r\n        return collection;\r\n      };\r\n      AstNode.prototype.empty = function () {\r\n        var self = this;\r\n        if (self.firstChild) {\r\n          var nodes = [];\r\n          for (var node = self.firstChild; node; node = walk$1(node, self)) {\r\n            nodes.push(node);\r\n          }\r\n          var i = nodes.length;\r\n          while (i--) {\r\n            var node = nodes[i];\r\n            node.parent = node.firstChild = node.lastChild = node.next = node.prev = null;\r\n          }\r\n        }\r\n        self.firstChild = self.lastChild = null;\r\n        return self;\r\n      };\r\n      AstNode.prototype.isEmpty = function (elements, whitespace, predicate) {\r\n        if (whitespace === void 0) {\r\n          whitespace = {};\r\n        }\r\n        var self = this;\r\n        var node = self.firstChild;\r\n        if (isNonEmptyElement(self)) {\r\n          return false;\r\n        }\r\n        if (node) {\r\n          do {\r\n            if (node.type === 1) {\r\n              if (node.attr('data-mce-bogus')) {\r\n                continue;\r\n              }\r\n              if (elements[node.name]) {\r\n                return false;\r\n              }\r\n              if (isNonEmptyElement(node)) {\r\n                return false;\r\n              }\r\n            }\r\n            if (node.type === 8) {\r\n              return false;\r\n            }\r\n            if (node.type === 3 && !isEmptyTextNode(node)) {\r\n              return false;\r\n            }\r\n            if (node.type === 3 && node.parent && whitespace[node.parent.name] && isWhitespaceText(node.value)) {\r\n              return false;\r\n            }\r\n            if (predicate && predicate(node)) {\r\n              return false;\r\n            }\r\n          } while (node = walk$1(node, self));\r\n        }\r\n        return true;\r\n      };\r\n      AstNode.prototype.walk = function (prev) {\r\n        return walk$1(this, null, prev);\r\n      };\r\n      return AstNode;\r\n    }();\r\n\r\n    var extractBase64DataUris = function (html) {\r\n      var dataImageUri = /data:[^;<\"'\\s]+;base64,([a-z0-9\\+\\/=\\s]+)/gi;\r\n      var chunks = [];\r\n      var uris = {};\r\n      var prefix = generate('img');\r\n      var matches;\r\n      var index = 0;\r\n      var count = 0;\r\n      while (matches = dataImageUri.exec(html)) {\r\n        var uri = matches[0];\r\n        var imageId = prefix + '_' + count++;\r\n        uris[imageId] = uri;\r\n        if (index < matches.index) {\r\n          chunks.push(html.substr(index, matches.index - index));\r\n        }\r\n        chunks.push(imageId);\r\n        index = matches.index + uri.length;\r\n      }\r\n      var re = new RegExp(prefix + '_[0-9]+', 'g');\r\n      if (index === 0) {\r\n        return {\r\n          prefix: prefix,\r\n          uris: uris,\r\n          html: html,\r\n          re: re\r\n        };\r\n      } else {\r\n        if (index < html.length) {\r\n          chunks.push(html.substr(index));\r\n        }\r\n        return {\r\n          prefix: prefix,\r\n          uris: uris,\r\n          html: chunks.join(''),\r\n          re: re\r\n        };\r\n      }\r\n    };\r\n    var restoreDataUris = function (html, result) {\r\n      return html.replace(result.re, function (imageId) {\r\n        return get$9(result.uris, imageId).getOr(imageId);\r\n      });\r\n    };\r\n    var parseDataUri$1 = function (uri) {\r\n      var matches = /data:([^;]+);base64,([a-z0-9\\+\\/=\\s]+)/i.exec(uri);\r\n      if (matches) {\r\n        return Optional.some({\r\n          type: matches[1],\r\n          data: decodeURIComponent(matches[2])\r\n        });\r\n      } else {\r\n        return Optional.none();\r\n      }\r\n    };\r\n\r\n    var each$d = Tools.each, trim = Tools.trim;\r\n    var queryParts = 'source protocol authority userInfo user password host port relative path directory file query anchor'.split(' ');\r\n    var DEFAULT_PORTS = {\r\n      ftp: 21,\r\n      http: 80,\r\n      https: 443,\r\n      mailto: 25\r\n    };\r\n    var safeSvgDataUrlElements = [\r\n      'img',\r\n      'video'\r\n    ];\r\n    var blockSvgDataUris = function (allowSvgDataUrls, tagName) {\r\n      if (isNonNullable(allowSvgDataUrls)) {\r\n        return !allowSvgDataUrls;\r\n      } else {\r\n        return isNonNullable(tagName) ? !contains$3(safeSvgDataUrlElements, tagName) : true;\r\n      }\r\n    };\r\n    var isInvalidUri = function (settings, uri, tagName) {\r\n      if (settings.allow_html_data_urls) {\r\n        return false;\r\n      } else if (/^data:image\\//i.test(uri)) {\r\n        return blockSvgDataUris(settings.allow_svg_data_urls, tagName) && /^data:image\\/svg\\+xml/i.test(uri);\r\n      } else {\r\n        return /^data:/i.test(uri);\r\n      }\r\n    };\r\n    var URI = function () {\r\n      function URI(url, settings) {\r\n        url = trim(url);\r\n        this.settings = settings || {};\r\n        var baseUri = this.settings.base_uri;\r\n        var self = this;\r\n        if (/^([\\w\\-]+):([^\\/]{2})/i.test(url) || /^\\s*#/.test(url)) {\r\n          self.source = url;\r\n          return;\r\n        }\r\n        var isProtocolRelative = url.indexOf('//') === 0;\r\n        if (url.indexOf('/') === 0 && !isProtocolRelative) {\r\n          url = (baseUri ? baseUri.protocol || 'http' : 'http') + '://mce_host' + url;\r\n        }\r\n        if (!/^[\\w\\-]*:?\\/\\//.test(url)) {\r\n          var baseUrl = this.settings.base_uri ? this.settings.base_uri.path : new URI(document.location.href).directory;\r\n          if (this.settings.base_uri && this.settings.base_uri.protocol == '') {\r\n            url = '//mce_host' + self.toAbsPath(baseUrl, url);\r\n          } else {\r\n            var match = /([^#?]*)([#?]?.*)/.exec(url);\r\n            url = (baseUri && baseUri.protocol || 'http') + '://mce_host' + self.toAbsPath(baseUrl, match[1]) + match[2];\r\n          }\r\n        }\r\n        url = url.replace(/@@/g, '(mce_at)');\r\n        var urlMatch = /^(?:(?![^:@]+:[^:@\\/]*@)([^:\\/?#.]+):)?(?:\\/\\/)?((?:(([^:@\\/]*):?([^:@\\/]*))?@)?(\\[[a-zA-Z0-9:.%]+\\]|[^:\\/?#]*)(?::(\\d*))?)(((\\/(?:[^?#](?![^?#\\/]*\\.[^?#\\/.]+(?:[?#]|$)))*\\/?)?([^?#\\/]*))(?:\\?([^#]*))?(?:#(.*))?)/.exec(url);\r\n        each$d(queryParts, function (v, i) {\r\n          var part = urlMatch[i];\r\n          if (part) {\r\n            part = part.replace(/\\(mce_at\\)/g, '@@');\r\n          }\r\n          self[v] = part;\r\n        });\r\n        if (baseUri) {\r\n          if (!self.protocol) {\r\n            self.protocol = baseUri.protocol;\r\n          }\r\n          if (!self.userInfo) {\r\n            self.userInfo = baseUri.userInfo;\r\n          }\r\n          if (!self.port && self.host === 'mce_host') {\r\n            self.port = baseUri.port;\r\n          }\r\n          if (!self.host || self.host === 'mce_host') {\r\n            self.host = baseUri.host;\r\n          }\r\n          self.source = '';\r\n        }\r\n        if (isProtocolRelative) {\r\n          self.protocol = '';\r\n        }\r\n      }\r\n      URI.parseDataUri = function (uri) {\r\n        var type;\r\n        var uriComponents = decodeURIComponent(uri).split(',');\r\n        var matches = /data:([^;]+)/.exec(uriComponents[0]);\r\n        if (matches) {\r\n          type = matches[1];\r\n        }\r\n        return {\r\n          type: type,\r\n          data: uriComponents[1]\r\n        };\r\n      };\r\n      URI.isDomSafe = function (uri, context, options) {\r\n        if (options === void 0) {\r\n          options = {};\r\n        }\r\n        if (options.allow_script_urls) {\r\n          return true;\r\n        } else {\r\n          var decodedUri = Entities.decode(uri).replace(/[\\s\\u0000-\\u001F]+/g, '');\r\n          try {\r\n            decodedUri = decodeURIComponent(decodedUri);\r\n          } catch (ex) {\r\n            decodedUri = unescape(decodedUri);\r\n          }\r\n          if (/((java|vb)script|mhtml):/i.test(decodedUri)) {\r\n            return false;\r\n          }\r\n          return !isInvalidUri(options, decodedUri, context);\r\n        }\r\n      };\r\n      URI.getDocumentBaseUrl = function (loc) {\r\n        var baseUrl;\r\n        if (loc.protocol.indexOf('http') !== 0 && loc.protocol !== 'file:') {\r\n          baseUrl = loc.href;\r\n        } else {\r\n          baseUrl = loc.protocol + '//' + loc.host + loc.pathname;\r\n        }\r\n        if (/^[^:]+:\\/\\/\\/?[^\\/]+\\//.test(baseUrl)) {\r\n          baseUrl = baseUrl.replace(/[\\?#].*$/, '').replace(/[\\/\\\\][^\\/]+$/, '');\r\n          if (!/[\\/\\\\]$/.test(baseUrl)) {\r\n            baseUrl += '/';\r\n          }\r\n        }\r\n        return baseUrl;\r\n      };\r\n      URI.prototype.setPath = function (path) {\r\n        var pathMatch = /^(.*?)\\/?(\\w+)?$/.exec(path);\r\n        this.path = pathMatch[0];\r\n        this.directory = pathMatch[1];\r\n        this.file = pathMatch[2];\r\n        this.source = '';\r\n        this.getURI();\r\n      };\r\n      URI.prototype.toRelative = function (uri) {\r\n        var output;\r\n        if (uri === './') {\r\n          return uri;\r\n        }\r\n        var relativeUri = new URI(uri, { base_uri: this });\r\n        if (relativeUri.host !== 'mce_host' && this.host !== relativeUri.host && relativeUri.host || this.port !== relativeUri.port || this.protocol !== relativeUri.protocol && relativeUri.protocol !== '') {\r\n          return relativeUri.getURI();\r\n        }\r\n        var tu = this.getURI(), uu = relativeUri.getURI();\r\n        if (tu === uu || tu.charAt(tu.length - 1) === '/' && tu.substr(0, tu.length - 1) === uu) {\r\n          return tu;\r\n        }\r\n        output = this.toRelPath(this.path, relativeUri.path);\r\n        if (relativeUri.query) {\r\n          output += '?' + relativeUri.query;\r\n        }\r\n        if (relativeUri.anchor) {\r\n          output += '#' + relativeUri.anchor;\r\n        }\r\n        return output;\r\n      };\r\n      URI.prototype.toAbsolute = function (uri, noHost) {\r\n        var absoluteUri = new URI(uri, { base_uri: this });\r\n        return absoluteUri.getURI(noHost && this.isSameOrigin(absoluteUri));\r\n      };\r\n      URI.prototype.isSameOrigin = function (uri) {\r\n        if (this.host == uri.host && this.protocol == uri.protocol) {\r\n          if (this.port == uri.port) {\r\n            return true;\r\n          }\r\n          var defaultPort = DEFAULT_PORTS[this.protocol];\r\n          if (defaultPort && (this.port || defaultPort) == (uri.port || defaultPort)) {\r\n            return true;\r\n          }\r\n        }\r\n        return false;\r\n      };\r\n      URI.prototype.toRelPath = function (base, path) {\r\n        var breakPoint = 0, out = '', i, l;\r\n        var normalizedBase = base.substring(0, base.lastIndexOf('/')).split('/');\r\n        var items = path.split('/');\r\n        if (normalizedBase.length >= items.length) {\r\n          for (i = 0, l = normalizedBase.length; i < l; i++) {\r\n            if (i >= items.length || normalizedBase[i] !== items[i]) {\r\n              breakPoint = i + 1;\r\n              break;\r\n            }\r\n          }\r\n        }\r\n        if (normalizedBase.length < items.length) {\r\n          for (i = 0, l = items.length; i < l; i++) {\r\n            if (i >= normalizedBase.length || normalizedBase[i] !== items[i]) {\r\n              breakPoint = i + 1;\r\n              break;\r\n            }\r\n          }\r\n        }\r\n        if (breakPoint === 1) {\r\n          return path;\r\n        }\r\n        for (i = 0, l = normalizedBase.length - (breakPoint - 1); i < l; i++) {\r\n          out += '../';\r\n        }\r\n        for (i = breakPoint - 1, l = items.length; i < l; i++) {\r\n          if (i !== breakPoint - 1) {\r\n            out += '/' + items[i];\r\n          } else {\r\n            out += items[i];\r\n          }\r\n        }\r\n        return out;\r\n      };\r\n      URI.prototype.toAbsPath = function (base, path) {\r\n        var i, nb = 0, o = [], outPath;\r\n        var tr = /\\/$/.test(path) ? '/' : '';\r\n        var normalizedBase = base.split('/');\r\n        var normalizedPath = path.split('/');\r\n        each$d(normalizedBase, function (k) {\r\n          if (k) {\r\n            o.push(k);\r\n          }\r\n        });\r\n        normalizedBase = o;\r\n        for (i = normalizedPath.length - 1, o = []; i >= 0; i--) {\r\n          if (normalizedPath[i].length === 0 || normalizedPath[i] === '.') {\r\n            continue;\r\n          }\r\n          if (normalizedPath[i] === '..') {\r\n            nb++;\r\n            continue;\r\n          }\r\n          if (nb > 0) {\r\n            nb--;\r\n            continue;\r\n          }\r\n          o.push(normalizedPath[i]);\r\n        }\r\n        i = normalizedBase.length - nb;\r\n        if (i <= 0) {\r\n          outPath = reverse(o).join('/');\r\n        } else {\r\n          outPath = normalizedBase.slice(0, i).join('/') + '/' + reverse(o).join('/');\r\n        }\r\n        if (outPath.indexOf('/') !== 0) {\r\n          outPath = '/' + outPath;\r\n        }\r\n        if (tr && outPath.lastIndexOf('/') !== outPath.length - 1) {\r\n          outPath += tr;\r\n        }\r\n        return outPath;\r\n      };\r\n      URI.prototype.getURI = function (noProtoHost) {\r\n        if (noProtoHost === void 0) {\r\n          noProtoHost = false;\r\n        }\r\n        var s;\r\n        if (!this.source || noProtoHost) {\r\n          s = '';\r\n          if (!noProtoHost) {\r\n            if (this.protocol) {\r\n              s += this.protocol + '://';\r\n            } else {\r\n              s += '//';\r\n            }\r\n            if (this.userInfo) {\r\n              s += this.userInfo + '@';\r\n            }\r\n            if (this.host) {\r\n              s += this.host;\r\n            }\r\n            if (this.port) {\r\n              s += ':' + this.port;\r\n            }\r\n          }\r\n          if (this.path) {\r\n            s += this.path;\r\n          }\r\n          if (this.query) {\r\n            s += '?' + this.query;\r\n          }\r\n          if (this.anchor) {\r\n            s += '#' + this.anchor;\r\n          }\r\n          this.source = s;\r\n        }\r\n        return this.source;\r\n      };\r\n      return URI;\r\n    }();\r\n\r\n    var filteredClobberElements = Tools.makeMap('button,fieldset,form,iframe,img,image,input,object,output,select,textarea');\r\n    var isValidPrefixAttrName = function (name) {\r\n      return name.indexOf('data-') === 0 || name.indexOf('aria-') === 0;\r\n    };\r\n    var lazyTempDocument$1 = cached(function () {\r\n      return document.implementation.createHTMLDocument('parser');\r\n    });\r\n    var findMatchingEndTagIndex = function (schema, html, startIndex) {\r\n      var startTagRegExp = /<([!?\\/])?([A-Za-z0-9\\-_:.]+)/g;\r\n      var endTagRegExp = /(?:\\s(?:[^'\">]+(?:\"[^\"]*\"|'[^']*'))*[^\"'>]*(?:\"[^\">]*|'[^'>]*)?|\\s*|\\/)>/g;\r\n      var shortEndedElements = schema.getShortEndedElements();\r\n      var count = 1, index = startIndex;\r\n      while (count !== 0) {\r\n        startTagRegExp.lastIndex = index;\r\n        while (true) {\r\n          var startMatch = startTagRegExp.exec(html);\r\n          if (startMatch === null) {\r\n            return index;\r\n          } else if (startMatch[1] === '!') {\r\n            if (startsWith(startMatch[2], '--')) {\r\n              index = findCommentEndIndex(html, false, startMatch.index + '!--'.length);\r\n            } else {\r\n              index = findCommentEndIndex(html, true, startMatch.index + 1);\r\n            }\r\n            break;\r\n          } else {\r\n            endTagRegExp.lastIndex = startTagRegExp.lastIndex;\r\n            var endMatch = endTagRegExp.exec(html);\r\n            if (isNull(endMatch) || endMatch.index !== startTagRegExp.lastIndex) {\r\n              continue;\r\n            }\r\n            if (startMatch[1] === '/') {\r\n              count -= 1;\r\n            } else if (!has$2(shortEndedElements, startMatch[2])) {\r\n              count += 1;\r\n            }\r\n            index = startTagRegExp.lastIndex + endMatch[0].length;\r\n            break;\r\n          }\r\n        }\r\n      }\r\n      return index;\r\n    };\r\n    var isConditionalComment = function (html, startIndex) {\r\n      return /^\\s*\\[if [\\w\\W]+\\]>.*<!\\[endif\\](--!?)?>/.test(html.substr(startIndex));\r\n    };\r\n    var findCommentEndIndex = function (html, isBogus, startIndex) {\r\n      if (startIndex === void 0) {\r\n        startIndex = 0;\r\n      }\r\n      var lcHtml = html.toLowerCase();\r\n      if (lcHtml.indexOf('[if ', startIndex) !== -1 && isConditionalComment(lcHtml, startIndex)) {\r\n        var endIfIndex = lcHtml.indexOf('[endif]', startIndex);\r\n        return lcHtml.indexOf('>', endIfIndex);\r\n      } else {\r\n        if (isBogus) {\r\n          var endIndex = lcHtml.indexOf('>', startIndex);\r\n          return endIndex !== -1 ? endIndex : lcHtml.length;\r\n        } else {\r\n          var endCommentRegexp = /--!?>/g;\r\n          endCommentRegexp.lastIndex = startIndex;\r\n          var match = endCommentRegexp.exec(html);\r\n          return match ? match.index + match[0].length : lcHtml.length;\r\n        }\r\n      }\r\n    };\r\n    var checkBogusAttribute = function (regExp, attrString) {\r\n      var matches = regExp.exec(attrString);\r\n      if (matches) {\r\n        var name_1 = matches[1];\r\n        var value = matches[2];\r\n        return typeof name_1 === 'string' && name_1.toLowerCase() === 'data-mce-bogus' ? value : null;\r\n      } else {\r\n        return null;\r\n      }\r\n    };\r\n    var SaxParser = function (settings, schema) {\r\n      if (schema === void 0) {\r\n        schema = Schema();\r\n      }\r\n      settings = settings || {};\r\n      var doc = lazyTempDocument$1();\r\n      var form = doc.createElement('form');\r\n      if (settings.fix_self_closing !== false) {\r\n        settings.fix_self_closing = true;\r\n      }\r\n      var comment = settings.comment ? settings.comment : noop;\r\n      var cdata = settings.cdata ? settings.cdata : noop;\r\n      var text = settings.text ? settings.text : noop;\r\n      var start = settings.start ? settings.start : noop;\r\n      var end = settings.end ? settings.end : noop;\r\n      var pi = settings.pi ? settings.pi : noop;\r\n      var doctype = settings.doctype ? settings.doctype : noop;\r\n      var parseInternal = function (base64Extract, format) {\r\n        if (format === void 0) {\r\n          format = 'html';\r\n        }\r\n        var html = base64Extract.html;\r\n        var matches, index = 0, value, endRegExp;\r\n        var stack = [];\r\n        var attrList, i, textData, name;\r\n        var isInternalElement, isShortEnded;\r\n        var elementRule, isValidElement, attr, attribsValue, validAttributesMap, validAttributePatterns;\r\n        var attributesRequired, attributesDefault, attributesForced;\r\n        var anyAttributesRequired, attrValue, idCount = 0;\r\n        var decode = Entities.decode;\r\n        var filteredUrlAttrs = Tools.makeMap('src,href,data,background,action,formaction,poster,xlink:href');\r\n        var parsingMode = format === 'html' ? 0 : 1;\r\n        var processEndTag = function (name) {\r\n          var pos, i;\r\n          pos = stack.length;\r\n          while (pos--) {\r\n            if (stack[pos].name === name) {\r\n              break;\r\n            }\r\n          }\r\n          if (pos >= 0) {\r\n            for (i = stack.length - 1; i >= pos; i--) {\r\n              name = stack[i];\r\n              if (name.valid) {\r\n                end(name.name);\r\n              }\r\n            }\r\n            stack.length = pos;\r\n          }\r\n        };\r\n        var processText = function (value, raw) {\r\n          return text(restoreDataUris(value, base64Extract), raw);\r\n        };\r\n        var processComment = function (value) {\r\n          if (value === '') {\r\n            return;\r\n          }\r\n          if (value.charAt(0) === '>') {\r\n            value = ' ' + value;\r\n          }\r\n          if (!settings.allow_conditional_comments && value.substr(0, 3).toLowerCase() === '[if') {\r\n            value = ' ' + value;\r\n          }\r\n          comment(restoreDataUris(value, base64Extract));\r\n        };\r\n        var processAttr = function (value) {\r\n          return restoreDataUris(value, base64Extract);\r\n        };\r\n        var processMalformedComment = function (value, startIndex) {\r\n          var startTag = value || '';\r\n          var isBogus = !startsWith(startTag, '--');\r\n          var endIndex = findCommentEndIndex(html, isBogus, startIndex);\r\n          value = html.substr(startIndex, endIndex - startIndex);\r\n          processComment(isBogus ? startTag + value : value);\r\n          return endIndex + 1;\r\n        };\r\n        var parseAttribute = function (tagName, name, value, val2, val3) {\r\n          name = name.toLowerCase();\r\n          value = processAttr(name in fillAttrsMap ? name : decode(value || val2 || val3 || ''));\r\n          if (validate && !isInternalElement && isValidPrefixAttrName(name) === false) {\r\n            var attrRule = validAttributesMap[name];\r\n            if (!attrRule && validAttributePatterns) {\r\n              var i_1 = validAttributePatterns.length;\r\n              while (i_1--) {\r\n                attrRule = validAttributePatterns[i_1];\r\n                if (attrRule.pattern.test(name)) {\r\n                  break;\r\n                }\r\n              }\r\n              if (i_1 === -1) {\r\n                attrRule = null;\r\n              }\r\n            }\r\n            if (!attrRule) {\r\n              return;\r\n            }\r\n            if (attrRule.validValues && !(value in attrRule.validValues)) {\r\n              return;\r\n            }\r\n          }\r\n          var isNameOrId = name === 'name' || name === 'id';\r\n          if (isNameOrId && tagName in filteredClobberElements && (value in doc || value in form)) {\r\n            return;\r\n          }\r\n          if (filteredUrlAttrs[name] && !URI.isDomSafe(value, tagName, settings)) {\r\n            return;\r\n          }\r\n          if (isInternalElement && (name in filteredUrlAttrs || name.indexOf('on') === 0)) {\r\n            return;\r\n          }\r\n          attrList.map[name] = value;\r\n          attrList.push({\r\n            name: name,\r\n            value: value\r\n          });\r\n        };\r\n        var tokenRegExp = new RegExp('<(?:' + '(?:!--([\\\\w\\\\W]*?)--!?>)|' + '(?:!\\\\[CDATA\\\\[([\\\\w\\\\W]*?)\\\\]\\\\]>)|' + '(?:![Dd][Oo][Cc][Tt][Yy][Pp][Ee]([\\\\w\\\\W]*?)>)|' + '(?:!(--)?)|' + '(?:\\\\?([^\\\\s\\\\/<>]+) ?([\\\\w\\\\W]*?)[?/]>)|' + '(?:\\\\/([A-Za-z][A-Za-z0-9\\\\-_\\\\:\\\\.]*)>)|' + '(?:([A-Za-z][A-Za-z0-9\\\\-_:.]*)(\\\\s(?:[^\\'\">]+(?:\"[^\"]*\"|\\'[^\\']*\\'))*[^\"\\'>]*(?:\"[^\">]*|\\'[^\\'>]*)?|\\\\s*|\\\\/)>)' + ')', 'g');\r\n        var attrRegExp = /([\\w:\\-]+)(?:\\s*=\\s*(?:(?:\\\"((?:[^\\\"])*)\\\")|(?:\\'((?:[^\\'])*)\\')|([^>\\s]+)))?/g;\r\n        var shortEndedElements = schema.getShortEndedElements();\r\n        var selfClosing = settings.self_closing_elements || schema.getSelfClosingElements();\r\n        var fillAttrsMap = schema.getBoolAttrs();\r\n        var validate = settings.validate;\r\n        var removeInternalElements = settings.remove_internals;\r\n        var fixSelfClosing = settings.fix_self_closing;\r\n        var specialElements = schema.getSpecialElements();\r\n        var processHtml = html + '>';\r\n        while (matches = tokenRegExp.exec(processHtml)) {\r\n          var matchText = matches[0];\r\n          if (index < matches.index) {\r\n            processText(decode(html.substr(index, matches.index - index)));\r\n          }\r\n          if (value = matches[7]) {\r\n            value = value.toLowerCase();\r\n            if (value.charAt(0) === ':') {\r\n              value = value.substr(1);\r\n            }\r\n            processEndTag(value);\r\n          } else if (value = matches[8]) {\r\n            if (matches.index + matchText.length > html.length) {\r\n              processText(decode(html.substr(matches.index)));\r\n              index = matches.index + matchText.length;\r\n              continue;\r\n            }\r\n            value = value.toLowerCase();\r\n            if (value.charAt(0) === ':') {\r\n              value = value.substr(1);\r\n            }\r\n            isShortEnded = value in shortEndedElements;\r\n            if (fixSelfClosing && selfClosing[value] && stack.length > 0 && stack[stack.length - 1].name === value) {\r\n              processEndTag(value);\r\n            }\r\n            var bogusValue = checkBogusAttribute(attrRegExp, matches[9]);\r\n            if (bogusValue !== null) {\r\n              if (bogusValue === 'all') {\r\n                index = findMatchingEndTagIndex(schema, html, tokenRegExp.lastIndex);\r\n                tokenRegExp.lastIndex = index;\r\n                continue;\r\n              }\r\n              isValidElement = false;\r\n            }\r\n            if (!validate || (elementRule = schema.getElementRule(value))) {\r\n              isValidElement = true;\r\n              if (validate) {\r\n                validAttributesMap = elementRule.attributes;\r\n                validAttributePatterns = elementRule.attributePatterns;\r\n              }\r\n              if (attribsValue = matches[9]) {\r\n                isInternalElement = attribsValue.indexOf('data-mce-type') !== -1;\r\n                if (isInternalElement && removeInternalElements) {\r\n                  isValidElement = false;\r\n                }\r\n                attrList = [];\r\n                attrList.map = {};\r\n                attribsValue.replace(attrRegExp, function (match, name, val, val2, val3) {\r\n                  parseAttribute(value, name, val, val2, val3);\r\n                  return '';\r\n                });\r\n              } else {\r\n                attrList = [];\r\n                attrList.map = {};\r\n              }\r\n              if (validate && !isInternalElement) {\r\n                attributesRequired = elementRule.attributesRequired;\r\n                attributesDefault = elementRule.attributesDefault;\r\n                attributesForced = elementRule.attributesForced;\r\n                anyAttributesRequired = elementRule.removeEmptyAttrs;\r\n                if (anyAttributesRequired && !attrList.length) {\r\n                  isValidElement = false;\r\n                }\r\n                if (attributesForced) {\r\n                  i = attributesForced.length;\r\n                  while (i--) {\r\n                    attr = attributesForced[i];\r\n                    name = attr.name;\r\n                    attrValue = attr.value;\r\n                    if (attrValue === '{$uid}') {\r\n                      attrValue = 'mce_' + idCount++;\r\n                    }\r\n                    attrList.map[name] = attrValue;\r\n                    attrList.push({\r\n                      name: name,\r\n                      value: attrValue\r\n                    });\r\n                  }\r\n                }\r\n                if (attributesDefault) {\r\n                  i = attributesDefault.length;\r\n                  while (i--) {\r\n                    attr = attributesDefault[i];\r\n                    name = attr.name;\r\n                    if (!(name in attrList.map)) {\r\n                      attrValue = attr.value;\r\n                      if (attrValue === '{$uid}') {\r\n                        attrValue = 'mce_' + idCount++;\r\n                      }\r\n                      attrList.map[name] = attrValue;\r\n                      attrList.push({\r\n                        name: name,\r\n                        value: attrValue\r\n                      });\r\n                    }\r\n                  }\r\n                }\r\n                if (attributesRequired) {\r\n                  i = attributesRequired.length;\r\n                  while (i--) {\r\n                    if (attributesRequired[i] in attrList.map) {\r\n                      break;\r\n                    }\r\n                  }\r\n                  if (i === -1) {\r\n                    isValidElement = false;\r\n                  }\r\n                }\r\n                if (attr = attrList.map['data-mce-bogus']) {\r\n                  if (attr === 'all') {\r\n                    index = findMatchingEndTagIndex(schema, html, tokenRegExp.lastIndex);\r\n                    tokenRegExp.lastIndex = index;\r\n                    continue;\r\n                  }\r\n                  isValidElement = false;\r\n                }\r\n              }\r\n              if (isValidElement) {\r\n                start(value, attrList, isShortEnded);\r\n              }\r\n            } else {\r\n              isValidElement = false;\r\n            }\r\n            if (endRegExp = specialElements[value]) {\r\n              endRegExp.lastIndex = index = matches.index + matchText.length;\r\n              if (matches = endRegExp.exec(html)) {\r\n                if (isValidElement) {\r\n                  textData = html.substr(index, matches.index - index);\r\n                }\r\n                index = matches.index + matches[0].length;\r\n              } else {\r\n                textData = html.substr(index);\r\n                index = html.length;\r\n              }\r\n              if (isValidElement) {\r\n                if (textData.length > 0) {\r\n                  processText(textData, true);\r\n                }\r\n                end(value);\r\n              }\r\n              tokenRegExp.lastIndex = index;\r\n              continue;\r\n            }\r\n            if (!isShortEnded) {\r\n              if (!attribsValue || attribsValue.indexOf('/') !== attribsValue.length - 1) {\r\n                stack.push({\r\n                  name: value,\r\n                  valid: isValidElement\r\n                });\r\n              } else if (isValidElement) {\r\n                end(value);\r\n              }\r\n            }\r\n          } else if (value = matches[1]) {\r\n            processComment(value);\r\n          } else if (value = matches[2]) {\r\n            var isValidCdataSection = parsingMode === 1 || settings.preserve_cdata || stack.length > 0 && schema.isValidChild(stack[stack.length - 1].name, '#cdata');\r\n            if (isValidCdataSection) {\r\n              cdata(value);\r\n            } else {\r\n              index = processMalformedComment('', matches.index + 2);\r\n              tokenRegExp.lastIndex = index;\r\n              continue;\r\n            }\r\n          } else if (value = matches[3]) {\r\n            doctype(value);\r\n          } else if ((value = matches[4]) || matchText === '<!') {\r\n            index = processMalformedComment(value, matches.index + matchText.length);\r\n            tokenRegExp.lastIndex = index;\r\n            continue;\r\n          } else if (value = matches[5]) {\r\n            if (parsingMode === 1) {\r\n              pi(value, matches[6]);\r\n            } else {\r\n              index = processMalformedComment('?', matches.index + 2);\r\n              tokenRegExp.lastIndex = index;\r\n              continue;\r\n            }\r\n          }\r\n          index = matches.index + matchText.length;\r\n        }\r\n        if (index < html.length) {\r\n          processText(decode(html.substr(index)));\r\n        }\r\n        for (i = stack.length - 1; i >= 0; i--) {\r\n          value = stack[i];\r\n          if (value.valid) {\r\n            end(value.name);\r\n          }\r\n        }\r\n      };\r\n      var parse = function (html, format) {\r\n        if (format === void 0) {\r\n          format = 'html';\r\n        }\r\n        parseInternal(extractBase64DataUris(html), format);\r\n      };\r\n      return { parse: parse };\r\n    };\r\n    SaxParser.findEndTag = findMatchingEndTagIndex;\r\n\r\n    var trimHtml = function (tempAttrs, html) {\r\n      var trimContentRegExp = new RegExp(['\\\\s?(' + tempAttrs.join('|') + ')=\"[^\"]+\"'].join('|'), 'gi');\r\n      return html.replace(trimContentRegExp, '');\r\n    };\r\n    var trimInternal = function (serializer, html) {\r\n      var bogusAllRegExp = /<(\\w+) [^>]*data-mce-bogus=\"all\"[^>]*>/g;\r\n      var schema = serializer.schema;\r\n      var content = trimHtml(serializer.getTempAttrs(), html);\r\n      var shortEndedElements = schema.getShortEndedElements();\r\n      var matches;\r\n      while (matches = bogusAllRegExp.exec(content)) {\r\n        var index = bogusAllRegExp.lastIndex;\r\n        var matchLength = matches[0].length;\r\n        var endTagIndex = void 0;\r\n        if (shortEndedElements[matches[1]]) {\r\n          endTagIndex = index;\r\n        } else {\r\n          endTagIndex = SaxParser.findEndTag(schema, content, index);\r\n        }\r\n        content = content.substring(0, index - matchLength) + content.substring(endTagIndex);\r\n        bogusAllRegExp.lastIndex = index - matchLength;\r\n      }\r\n      return trim$2(content);\r\n    };\r\n    var trimExternal = trimInternal;\r\n\r\n    var trimEmptyContents = function (editor, html) {\r\n      var blockName = getForcedRootBlock(editor);\r\n      var emptyRegExp = new RegExp('^(<' + blockName + '[^>]*>(&nbsp;|&#160;|\\\\s|\\xA0|<br \\\\/>|)<\\\\/' + blockName + '>[\\r\\n]*|<br \\\\/>[\\r\\n]*)$');\r\n      return html.replace(emptyRegExp, '');\r\n    };\r\n    var setupArgs$3 = function (args, format) {\r\n      return __assign(__assign({}, args), {\r\n        format: format,\r\n        get: true,\r\n        getInner: true\r\n      });\r\n    };\r\n    var getContentFromBody = function (editor, args, format, body) {\r\n      var defaultedArgs = setupArgs$3(args, format);\r\n      var updatedArgs = args.no_events ? defaultedArgs : editor.fire('BeforeGetContent', defaultedArgs);\r\n      var content;\r\n      if (updatedArgs.format === 'raw') {\r\n        content = Tools.trim(trimExternal(editor.serializer, body.innerHTML));\r\n      } else if (updatedArgs.format === 'text') {\r\n        content = editor.dom.isEmpty(body) ? '' : trim$2(body.innerText || body.textContent);\r\n      } else if (updatedArgs.format === 'tree') {\r\n        content = editor.serializer.serialize(body, updatedArgs);\r\n      } else {\r\n        content = trimEmptyContents(editor, editor.serializer.serialize(body, updatedArgs));\r\n      }\r\n      if (!contains$3([\r\n          'text',\r\n          'tree'\r\n        ], updatedArgs.format) && !isWsPreserveElement(SugarElement.fromDom(body))) {\r\n        updatedArgs.content = Tools.trim(content);\r\n      } else {\r\n        updatedArgs.content = content;\r\n      }\r\n      if (updatedArgs.no_events) {\r\n        return updatedArgs.content;\r\n      } else {\r\n        return editor.fire('GetContent', updatedArgs).content;\r\n      }\r\n    };\r\n    var getContentInternal = function (editor, args, format) {\r\n      return Optional.from(editor.getBody()).fold(constant(args.format === 'tree' ? new AstNode('body', 11) : ''), function (body) {\r\n        return getContentFromBody(editor, args, format, body);\r\n      });\r\n    };\r\n\r\n    var each$c = Tools.each;\r\n    var ElementUtils = function (dom) {\r\n      var compare = function (node1, node2) {\r\n        if (node1.nodeName !== node2.nodeName) {\r\n          return false;\r\n        }\r\n        var getAttribs = function (node) {\r\n          var attribs = {};\r\n          each$c(dom.getAttribs(node), function (attr) {\r\n            var name = attr.nodeName.toLowerCase();\r\n            if (name.indexOf('_') !== 0 && name !== 'style' && name.indexOf('data-') !== 0) {\r\n              attribs[name] = dom.getAttrib(node, name);\r\n            }\r\n          });\r\n          return attribs;\r\n        };\r\n        var compareObjects = function (obj1, obj2) {\r\n          var value, name;\r\n          for (name in obj1) {\r\n            if (has$2(obj1, name)) {\r\n              value = obj2[name];\r\n              if (typeof value === 'undefined') {\r\n                return false;\r\n              }\r\n              if (obj1[name] !== value) {\r\n                return false;\r\n              }\r\n              delete obj2[name];\r\n            }\r\n          }\r\n          for (name in obj2) {\r\n            if (has$2(obj2, name)) {\r\n              return false;\r\n            }\r\n          }\r\n          return true;\r\n        };\r\n        if (!compareObjects(getAttribs(node1), getAttribs(node2))) {\r\n          return false;\r\n        }\r\n        if (!compareObjects(dom.parseStyle(dom.getAttrib(node1, 'style')), dom.parseStyle(dom.getAttrib(node2, 'style')))) {\r\n          return false;\r\n        }\r\n        return !isBookmarkNode$1(node1) && !isBookmarkNode$1(node2);\r\n      };\r\n      return { compare: compare };\r\n    };\r\n\r\n    var makeMap$1 = Tools.makeMap;\r\n    var Writer = function (settings) {\r\n      var html = [];\r\n      settings = settings || {};\r\n      var indent = settings.indent;\r\n      var indentBefore = makeMap$1(settings.indent_before || '');\r\n      var indentAfter = makeMap$1(settings.indent_after || '');\r\n      var encode = Entities.getEncodeFunc(settings.entity_encoding || 'raw', settings.entities);\r\n      var htmlOutput = settings.element_format === 'html';\r\n      return {\r\n        start: function (name, attrs, empty) {\r\n          var i, l, attr, value;\r\n          if (indent && indentBefore[name] && html.length > 0) {\r\n            value = html[html.length - 1];\r\n            if (value.length > 0 && value !== '\\n') {\r\n              html.push('\\n');\r\n            }\r\n          }\r\n          html.push('<', name);\r\n          if (attrs) {\r\n            for (i = 0, l = attrs.length; i < l; i++) {\r\n              attr = attrs[i];\r\n              html.push(' ', attr.name, '=\"', encode(attr.value, true), '\"');\r\n            }\r\n          }\r\n          if (!empty || htmlOutput) {\r\n            html[html.length] = '>';\r\n          } else {\r\n            html[html.length] = ' />';\r\n          }\r\n          if (empty && indent && indentAfter[name] && html.length > 0) {\r\n            value = html[html.length - 1];\r\n            if (value.length > 0 && value !== '\\n') {\r\n              html.push('\\n');\r\n            }\r\n          }\r\n        },\r\n        end: function (name) {\r\n          var value;\r\n          html.push('</', name, '>');\r\n          if (indent && indentAfter[name] && html.length > 0) {\r\n            value = html[html.length - 1];\r\n            if (value.length > 0 && value !== '\\n') {\r\n              html.push('\\n');\r\n            }\r\n          }\r\n        },\r\n        text: function (text, raw) {\r\n          if (text.length > 0) {\r\n            html[html.length] = raw ? text : encode(text);\r\n          }\r\n        },\r\n        cdata: function (text) {\r\n          html.push('<![CDATA[', text, ']]>');\r\n        },\r\n        comment: function (text) {\r\n          html.push('<!--', text, '-->');\r\n        },\r\n        pi: function (name, text) {\r\n          if (text) {\r\n            html.push('<?', name, ' ', encode(text), '?>');\r\n          } else {\r\n            html.push('<?', name, '?>');\r\n          }\r\n          if (indent) {\r\n            html.push('\\n');\r\n          }\r\n        },\r\n        doctype: function (text) {\r\n          html.push('<!DOCTYPE', text, '>', indent ? '\\n' : '');\r\n        },\r\n        reset: function () {\r\n          html.length = 0;\r\n        },\r\n        getContent: function () {\r\n          return html.join('').replace(/\\n$/, '');\r\n        }\r\n      };\r\n    };\r\n\r\n    var HtmlSerializer = function (settings, schema) {\r\n      if (schema === void 0) {\r\n        schema = Schema();\r\n      }\r\n      var writer = Writer(settings);\r\n      settings = settings || {};\r\n      settings.validate = 'validate' in settings ? settings.validate : true;\r\n      var serialize = function (node) {\r\n        var validate = settings.validate;\r\n        var handlers = {\r\n          3: function (node) {\r\n            writer.text(node.value, node.raw);\r\n          },\r\n          8: function (node) {\r\n            writer.comment(node.value);\r\n          },\r\n          7: function (node) {\r\n            writer.pi(node.name, node.value);\r\n          },\r\n          10: function (node) {\r\n            writer.doctype(node.value);\r\n          },\r\n          4: function (node) {\r\n            writer.cdata(node.value);\r\n          },\r\n          11: function (node) {\r\n            if (node = node.firstChild) {\r\n              do {\r\n                walk(node);\r\n              } while (node = node.next);\r\n            }\r\n          }\r\n        };\r\n        writer.reset();\r\n        var walk = function (node) {\r\n          var handler = handlers[node.type];\r\n          if (!handler) {\r\n            var name_1 = node.name;\r\n            var isEmpty = node.shortEnded;\r\n            var attrs = node.attributes;\r\n            if (validate && attrs && attrs.length > 1) {\r\n              var sortedAttrs = [];\r\n              sortedAttrs.map = {};\r\n              var elementRule = schema.getElementRule(node.name);\r\n              if (elementRule) {\r\n                for (var i = 0, l = elementRule.attributesOrder.length; i < l; i++) {\r\n                  var attrName = elementRule.attributesOrder[i];\r\n                  if (attrName in attrs.map) {\r\n                    var attrValue = attrs.map[attrName];\r\n                    sortedAttrs.map[attrName] = attrValue;\r\n                    sortedAttrs.push({\r\n                      name: attrName,\r\n                      value: attrValue\r\n                    });\r\n                  }\r\n                }\r\n                for (var i = 0, l = attrs.length; i < l; i++) {\r\n                  var attrName = attrs[i].name;\r\n                  if (!(attrName in sortedAttrs.map)) {\r\n                    var attrValue = attrs.map[attrName];\r\n                    sortedAttrs.map[attrName] = attrValue;\r\n                    sortedAttrs.push({\r\n                      name: attrName,\r\n                      value: attrValue\r\n                    });\r\n                  }\r\n                }\r\n                attrs = sortedAttrs;\r\n              }\r\n            }\r\n            writer.start(node.name, attrs, isEmpty);\r\n            if (!isEmpty) {\r\n              if (node = node.firstChild) {\r\n                do {\r\n                  walk(node);\r\n                } while (node = node.next);\r\n              }\r\n              writer.end(name_1);\r\n            }\r\n          } else {\r\n            handler(node);\r\n          }\r\n        };\r\n        if (node.type === 1 && !settings.inner) {\r\n          walk(node);\r\n        } else {\r\n          handlers[11](node);\r\n        }\r\n        return writer.getContent();\r\n      };\r\n      return { serialize: serialize };\r\n    };\r\n\r\n    var nonInheritableStyles = new Set();\r\n    (function () {\r\n      var nonInheritableStylesArr = [\r\n        'margin',\r\n        'margin-left',\r\n        'margin-right',\r\n        'margin-top',\r\n        'margin-bottom',\r\n        'padding',\r\n        'padding-left',\r\n        'padding-right',\r\n        'padding-top',\r\n        'padding-bottom',\r\n        'border',\r\n        'border-width',\r\n        'border-style',\r\n        'border-color',\r\n        'background',\r\n        'background-attachment',\r\n        'background-clip',\r\n        'background-color',\r\n        'background-image',\r\n        'background-origin',\r\n        'background-position',\r\n        'background-repeat',\r\n        'background-size',\r\n        'float',\r\n        'position',\r\n        'left',\r\n        'right',\r\n        'top',\r\n        'bottom',\r\n        'z-index',\r\n        'display',\r\n        'transform',\r\n        'width',\r\n        'max-width',\r\n        'min-width',\r\n        'height',\r\n        'max-height',\r\n        'min-height',\r\n        'overflow',\r\n        'overflow-x',\r\n        'overflow-y',\r\n        'text-overflow',\r\n        'vertical-align',\r\n        'transition',\r\n        'transition-delay',\r\n        'transition-duration',\r\n        'transition-property',\r\n        'transition-timing-function'\r\n      ];\r\n      each$k(nonInheritableStylesArr, function (style) {\r\n        nonInheritableStyles.add(style);\r\n      });\r\n    }());\r\n    var shorthandStyleProps = [\r\n      'font',\r\n      'text-decoration',\r\n      'text-emphasis'\r\n    ];\r\n    var getStyleProps = function (dom, node) {\r\n      return keys(dom.parseStyle(dom.getAttrib(node, 'style')));\r\n    };\r\n    var isNonInheritableStyle = function (style) {\r\n      return nonInheritableStyles.has(style);\r\n    };\r\n    var hasInheritableStyles = function (dom, node) {\r\n      return forall(getStyleProps(dom, node), function (style) {\r\n        return !isNonInheritableStyle(style);\r\n      });\r\n    };\r\n    var getLonghandStyleProps = function (styles) {\r\n      return filter$4(styles, function (style) {\r\n        return exists(shorthandStyleProps, function (prop) {\r\n          return startsWith(style, prop);\r\n        });\r\n      });\r\n    };\r\n    var hasStyleConflict = function (dom, node, parentNode) {\r\n      var nodeStyleProps = getStyleProps(dom, node);\r\n      var parentNodeStyleProps = getStyleProps(dom, parentNode);\r\n      var valueMismatch = function (prop) {\r\n        var nodeValue = dom.getStyle(node, prop);\r\n        var parentValue = dom.getStyle(parentNode, prop);\r\n        return isNotEmpty(nodeValue) && isNotEmpty(parentValue) && nodeValue !== parentValue;\r\n      };\r\n      return exists(nodeStyleProps, function (nodeStyleProp) {\r\n        var propExists = function (props) {\r\n          return exists(props, function (prop) {\r\n            return prop === nodeStyleProp;\r\n          });\r\n        };\r\n        if (!propExists(parentNodeStyleProps) && propExists(shorthandStyleProps)) {\r\n          var longhandProps = getLonghandStyleProps(parentNodeStyleProps);\r\n          return exists(longhandProps, valueMismatch);\r\n        } else {\r\n          return valueMismatch(nodeStyleProp);\r\n        }\r\n      });\r\n    };\r\n\r\n    var isChar = function (forward, predicate, pos) {\r\n      return Optional.from(pos.container()).filter(isText$7).exists(function (text) {\r\n        var delta = forward ? 0 : -1;\r\n        return predicate(text.data.charAt(pos.offset() + delta));\r\n      });\r\n    };\r\n    var isBeforeSpace = curry(isChar, true, isWhiteSpace);\r\n    var isAfterSpace = curry(isChar, false, isWhiteSpace);\r\n    var isEmptyText = function (pos) {\r\n      var container = pos.container();\r\n      return isText$7(container) && (container.data.length === 0 || isZwsp(container.data) && BookmarkManager.isBookmarkNode(container.parentNode));\r\n    };\r\n    var matchesElementPosition = function (before, predicate) {\r\n      return function (pos) {\r\n        return Optional.from(getChildNodeAtRelativeOffset(before ? 0 : -1, pos)).filter(predicate).isSome();\r\n      };\r\n    };\r\n    var isImageBlock = function (node) {\r\n      return isImg(node) && get$5(SugarElement.fromDom(node), 'display') === 'block';\r\n    };\r\n    var isCefNode = function (node) {\r\n      return isContentEditableFalse$b(node) && !isBogusAll$1(node);\r\n    };\r\n    var isBeforeImageBlock = matchesElementPosition(true, isImageBlock);\r\n    var isAfterImageBlock = matchesElementPosition(false, isImageBlock);\r\n    var isBeforeMedia = matchesElementPosition(true, isMedia$2);\r\n    var isAfterMedia = matchesElementPosition(false, isMedia$2);\r\n    var isBeforeTable = matchesElementPosition(true, isTable$3);\r\n    var isAfterTable = matchesElementPosition(false, isTable$3);\r\n    var isBeforeContentEditableFalse = matchesElementPosition(true, isCefNode);\r\n    var isAfterContentEditableFalse = matchesElementPosition(false, isCefNode);\r\n\r\n    var getLastChildren = function (elm) {\r\n      var children = [];\r\n      var rawNode = elm.dom;\r\n      while (rawNode) {\r\n        children.push(SugarElement.fromDom(rawNode));\r\n        rawNode = rawNode.lastChild;\r\n      }\r\n      return children;\r\n    };\r\n    var removeTrailingBr = function (elm) {\r\n      var allBrs = descendants(elm, 'br');\r\n      var brs = filter$4(getLastChildren(elm).slice(-1), isBr$4);\r\n      if (allBrs.length === brs.length) {\r\n        each$k(brs, remove$7);\r\n      }\r\n    };\r\n    var fillWithPaddingBr = function (elm) {\r\n      empty(elm);\r\n      append$1(elm, SugarElement.fromHtml('<br data-mce-bogus=\"1\">'));\r\n    };\r\n    var trimBlockTrailingBr = function (elm) {\r\n      lastChild(elm).each(function (lastChild) {\r\n        prevSibling(lastChild).each(function (lastChildPrevSibling) {\r\n          if (isBlock$2(elm) && isBr$4(lastChild) && isBlock$2(lastChildPrevSibling)) {\r\n            remove$7(lastChild);\r\n          }\r\n        });\r\n      });\r\n    };\r\n\r\n    var dropLast = function (xs) {\r\n      return xs.slice(0, -1);\r\n    };\r\n    var parentsUntil = function (start, root, predicate) {\r\n      if (contains$1(root, start)) {\r\n        return dropLast(parents$1(start, function (elm) {\r\n          return predicate(elm) || eq(elm, root);\r\n        }));\r\n      } else {\r\n        return [];\r\n      }\r\n    };\r\n    var parents = function (start, root) {\r\n      return parentsUntil(start, root, never);\r\n    };\r\n    var parentsAndSelf = function (start, root) {\r\n      return [start].concat(parents(start, root));\r\n    };\r\n\r\n    var navigateIgnoreEmptyTextNodes = function (forward, root, from) {\r\n      return navigateIgnore(forward, root, from, isEmptyText);\r\n    };\r\n    var getClosestBlock$1 = function (root, pos) {\r\n      return find$3(parentsAndSelf(SugarElement.fromDom(pos.container()), root), isBlock$2);\r\n    };\r\n    var isAtBeforeAfterBlockBoundary = function (forward, root, pos) {\r\n      return navigateIgnoreEmptyTextNodes(forward, root.dom, pos).forall(function (newPos) {\r\n        return getClosestBlock$1(root, pos).fold(function () {\r\n          return isInSameBlock(newPos, pos, root.dom) === false;\r\n        }, function (fromBlock) {\r\n          return isInSameBlock(newPos, pos, root.dom) === false && contains$1(fromBlock, SugarElement.fromDom(newPos.container()));\r\n        });\r\n      });\r\n    };\r\n    var isAtBlockBoundary = function (forward, root, pos) {\r\n      return getClosestBlock$1(root, pos).fold(function () {\r\n        return navigateIgnoreEmptyTextNodes(forward, root.dom, pos).forall(function (newPos) {\r\n          return isInSameBlock(newPos, pos, root.dom) === false;\r\n        });\r\n      }, function (parent) {\r\n        return navigateIgnoreEmptyTextNodes(forward, parent.dom, pos).isNone();\r\n      });\r\n    };\r\n    var isAtStartOfBlock = curry(isAtBlockBoundary, false);\r\n    var isAtEndOfBlock = curry(isAtBlockBoundary, true);\r\n    var isBeforeBlock = curry(isAtBeforeAfterBlockBoundary, false);\r\n    var isAfterBlock = curry(isAtBeforeAfterBlockBoundary, true);\r\n\r\n    var isBr = function (pos) {\r\n      return getElementFromPosition(pos).exists(isBr$4);\r\n    };\r\n    var findBr = function (forward, root, pos) {\r\n      var parentBlocks = filter$4(parentsAndSelf(SugarElement.fromDom(pos.container()), root), isBlock$2);\r\n      var scope = head(parentBlocks).getOr(root);\r\n      return fromPosition(forward, scope.dom, pos).filter(isBr);\r\n    };\r\n    var isBeforeBr$1 = function (root, pos) {\r\n      return getElementFromPosition(pos).exists(isBr$4) || findBr(true, root, pos).isSome();\r\n    };\r\n    var isAfterBr = function (root, pos) {\r\n      return getElementFromPrevPosition(pos).exists(isBr$4) || findBr(false, root, pos).isSome();\r\n    };\r\n    var findPreviousBr = curry(findBr, false);\r\n    var findNextBr = curry(findBr, true);\r\n\r\n    var isInMiddleOfText = function (pos) {\r\n      return CaretPosition.isTextPosition(pos) && !pos.isAtStart() && !pos.isAtEnd();\r\n    };\r\n    var getClosestBlock = function (root, pos) {\r\n      var parentBlocks = filter$4(parentsAndSelf(SugarElement.fromDom(pos.container()), root), isBlock$2);\r\n      return head(parentBlocks).getOr(root);\r\n    };\r\n    var hasSpaceBefore = function (root, pos) {\r\n      if (isInMiddleOfText(pos)) {\r\n        return isAfterSpace(pos);\r\n      } else {\r\n        return isAfterSpace(pos) || prevPosition(getClosestBlock(root, pos).dom, pos).exists(isAfterSpace);\r\n      }\r\n    };\r\n    var hasSpaceAfter = function (root, pos) {\r\n      if (isInMiddleOfText(pos)) {\r\n        return isBeforeSpace(pos);\r\n      } else {\r\n        return isBeforeSpace(pos) || nextPosition(getClosestBlock(root, pos).dom, pos).exists(isBeforeSpace);\r\n      }\r\n    };\r\n    var isPreValue = function (value) {\r\n      return contains$3([\r\n        'pre',\r\n        'pre-wrap'\r\n      ], value);\r\n    };\r\n    var isInPre = function (pos) {\r\n      return getElementFromPosition(pos).bind(function (elm) {\r\n        return closest$3(elm, isElement$6);\r\n      }).exists(function (elm) {\r\n        return isPreValue(get$5(elm, 'white-space'));\r\n      });\r\n    };\r\n    var isAtBeginningOfBody = function (root, pos) {\r\n      return prevPosition(root.dom, pos).isNone();\r\n    };\r\n    var isAtEndOfBody = function (root, pos) {\r\n      return nextPosition(root.dom, pos).isNone();\r\n    };\r\n    var isAtLineBoundary = function (root, pos) {\r\n      return isAtBeginningOfBody(root, pos) || isAtEndOfBody(root, pos) || isAtStartOfBlock(root, pos) || isAtEndOfBlock(root, pos) || isAfterBr(root, pos) || isBeforeBr$1(root, pos);\r\n    };\r\n    var needsToHaveNbsp = function (root, pos) {\r\n      if (isInPre(pos)) {\r\n        return false;\r\n      } else {\r\n        return isAtLineBoundary(root, pos) || hasSpaceBefore(root, pos) || hasSpaceAfter(root, pos);\r\n      }\r\n    };\r\n    var needsToBeNbspLeft = function (root, pos) {\r\n      if (isInPre(pos)) {\r\n        return false;\r\n      } else {\r\n        return isAtStartOfBlock(root, pos) || isBeforeBlock(root, pos) || isAfterBr(root, pos) || hasSpaceBefore(root, pos);\r\n      }\r\n    };\r\n    var leanRight = function (pos) {\r\n      var container = pos.container();\r\n      var offset = pos.offset();\r\n      if (isText$7(container) && offset < container.data.length) {\r\n        return CaretPosition(container, offset + 1);\r\n      } else {\r\n        return pos;\r\n      }\r\n    };\r\n    var needsToBeNbspRight = function (root, pos) {\r\n      if (isInPre(pos)) {\r\n        return false;\r\n      } else {\r\n        return isAtEndOfBlock(root, pos) || isAfterBlock(root, pos) || isBeforeBr$1(root, pos) || hasSpaceAfter(root, pos);\r\n      }\r\n    };\r\n    var needsToBeNbsp = function (root, pos) {\r\n      return needsToBeNbspLeft(root, pos) || needsToBeNbspRight(root, leanRight(pos));\r\n    };\r\n    var isNbspAt = function (text, offset) {\r\n      return isNbsp(text.charAt(offset));\r\n    };\r\n    var hasNbsp = function (pos) {\r\n      var container = pos.container();\r\n      return isText$7(container) && contains$2(container.data, nbsp);\r\n    };\r\n    var normalizeNbspMiddle = function (text) {\r\n      var chars = text.split('');\r\n      return map$3(chars, function (chr, i) {\r\n        if (isNbsp(chr) && i > 0 && i < chars.length - 1 && isContent(chars[i - 1]) && isContent(chars[i + 1])) {\r\n          return ' ';\r\n        } else {\r\n          return chr;\r\n        }\r\n      }).join('');\r\n    };\r\n    var normalizeNbspAtStart = function (root, node) {\r\n      var text = node.data;\r\n      var firstPos = CaretPosition(node, 0);\r\n      if (isNbspAt(text, 0) && !needsToBeNbsp(root, firstPos)) {\r\n        node.data = ' ' + text.slice(1);\r\n        return true;\r\n      } else {\r\n        return false;\r\n      }\r\n    };\r\n    var normalizeNbspInMiddleOfTextNode = function (node) {\r\n      var text = node.data;\r\n      var newText = normalizeNbspMiddle(text);\r\n      if (newText !== text) {\r\n        node.data = newText;\r\n        return true;\r\n      } else {\r\n        return false;\r\n      }\r\n    };\r\n    var normalizeNbspAtEnd = function (root, node) {\r\n      var text = node.data;\r\n      var lastPos = CaretPosition(node, text.length - 1);\r\n      if (isNbspAt(text, text.length - 1) && !needsToBeNbsp(root, lastPos)) {\r\n        node.data = text.slice(0, -1) + ' ';\r\n        return true;\r\n      } else {\r\n        return false;\r\n      }\r\n    };\r\n    var normalizeNbsps = function (root, pos) {\r\n      return Optional.some(pos).filter(hasNbsp).bind(function (pos) {\r\n        var container = pos.container();\r\n        var normalized = normalizeNbspAtStart(root, container) || normalizeNbspInMiddleOfTextNode(container) || normalizeNbspAtEnd(root, container);\r\n        return normalized ? Optional.some(pos) : Optional.none();\r\n      });\r\n    };\r\n    var normalizeNbspsInEditor = function (editor) {\r\n      var root = SugarElement.fromDom(editor.getBody());\r\n      if (editor.selection.isCollapsed()) {\r\n        normalizeNbsps(root, CaretPosition.fromRangeStart(editor.selection.getRng())).each(function (pos) {\r\n          editor.selection.setRng(pos.toRange());\r\n        });\r\n      }\r\n    };\r\n\r\n    var normalizeContent = function (content, isStartOfContent, isEndOfContent) {\r\n      var result = foldl(content, function (acc, c) {\r\n        if (isWhiteSpace(c) || isNbsp(c)) {\r\n          if (acc.previousCharIsSpace || acc.str === '' && isStartOfContent || acc.str.length === content.length - 1 && isEndOfContent) {\r\n            return {\r\n              previousCharIsSpace: false,\r\n              str: acc.str + nbsp\r\n            };\r\n          } else {\r\n            return {\r\n              previousCharIsSpace: true,\r\n              str: acc.str + ' '\r\n            };\r\n          }\r\n        } else {\r\n          return {\r\n            previousCharIsSpace: false,\r\n            str: acc.str + c\r\n          };\r\n        }\r\n      }, {\r\n        previousCharIsSpace: false,\r\n        str: ''\r\n      });\r\n      return result.str;\r\n    };\r\n    var normalize$1 = function (node, offset, count) {\r\n      if (count === 0) {\r\n        return;\r\n      }\r\n      var elm = SugarElement.fromDom(node);\r\n      var root = ancestor$3(elm, isBlock$2).getOr(elm);\r\n      var whitespace = node.data.slice(offset, offset + count);\r\n      var isEndOfContent = offset + count >= node.data.length && needsToBeNbspRight(root, CaretPosition(node, node.data.length));\r\n      var isStartOfContent = offset === 0 && needsToBeNbspLeft(root, CaretPosition(node, 0));\r\n      node.replaceData(offset, count, normalizeContent(whitespace, isStartOfContent, isEndOfContent));\r\n    };\r\n    var normalizeWhitespaceAfter = function (node, offset) {\r\n      var content = node.data.slice(offset);\r\n      var whitespaceCount = content.length - lTrim(content).length;\r\n      normalize$1(node, offset, whitespaceCount);\r\n    };\r\n    var normalizeWhitespaceBefore = function (node, offset) {\r\n      var content = node.data.slice(0, offset);\r\n      var whitespaceCount = content.length - rTrim(content).length;\r\n      normalize$1(node, offset - whitespaceCount, whitespaceCount);\r\n    };\r\n    var mergeTextNodes = function (prevNode, nextNode, normalizeWhitespace, mergeToPrev) {\r\n      if (mergeToPrev === void 0) {\r\n        mergeToPrev = true;\r\n      }\r\n      var whitespaceOffset = rTrim(prevNode.data).length;\r\n      var newNode = mergeToPrev ? prevNode : nextNode;\r\n      var removeNode = mergeToPrev ? nextNode : prevNode;\r\n      if (mergeToPrev) {\r\n        newNode.appendData(removeNode.data);\r\n      } else {\r\n        newNode.insertData(0, removeNode.data);\r\n      }\r\n      remove$7(SugarElement.fromDom(removeNode));\r\n      if (normalizeWhitespace) {\r\n        normalizeWhitespaceAfter(newNode, whitespaceOffset);\r\n      }\r\n      return newNode;\r\n    };\r\n\r\n    var needsReposition = function (pos, elm) {\r\n      var container = pos.container();\r\n      var offset = pos.offset();\r\n      return CaretPosition.isTextPosition(pos) === false && container === elm.parentNode && offset > CaretPosition.before(elm).offset();\r\n    };\r\n    var reposition = function (elm, pos) {\r\n      return needsReposition(pos, elm) ? CaretPosition(pos.container(), pos.offset() - 1) : pos;\r\n    };\r\n    var beforeOrStartOf = function (node) {\r\n      return isText$7(node) ? CaretPosition(node, 0) : CaretPosition.before(node);\r\n    };\r\n    var afterOrEndOf = function (node) {\r\n      return isText$7(node) ? CaretPosition(node, node.data.length) : CaretPosition.after(node);\r\n    };\r\n    var getPreviousSiblingCaretPosition = function (elm) {\r\n      if (isCaretCandidate$3(elm.previousSibling)) {\r\n        return Optional.some(afterOrEndOf(elm.previousSibling));\r\n      } else {\r\n        return elm.previousSibling ? lastPositionIn(elm.previousSibling) : Optional.none();\r\n      }\r\n    };\r\n    var getNextSiblingCaretPosition = function (elm) {\r\n      if (isCaretCandidate$3(elm.nextSibling)) {\r\n        return Optional.some(beforeOrStartOf(elm.nextSibling));\r\n      } else {\r\n        return elm.nextSibling ? firstPositionIn(elm.nextSibling) : Optional.none();\r\n      }\r\n    };\r\n    var findCaretPositionBackwardsFromElm = function (rootElement, elm) {\r\n      var startPosition = CaretPosition.before(elm.previousSibling ? elm.previousSibling : elm.parentNode);\r\n      return prevPosition(rootElement, startPosition).fold(function () {\r\n        return nextPosition(rootElement, CaretPosition.after(elm));\r\n      }, Optional.some);\r\n    };\r\n    var findCaretPositionForwardsFromElm = function (rootElement, elm) {\r\n      return nextPosition(rootElement, CaretPosition.after(elm)).fold(function () {\r\n        return prevPosition(rootElement, CaretPosition.before(elm));\r\n      }, Optional.some);\r\n    };\r\n    var findCaretPositionBackwards = function (rootElement, elm) {\r\n      return getPreviousSiblingCaretPosition(elm).orThunk(function () {\r\n        return getNextSiblingCaretPosition(elm);\r\n      }).orThunk(function () {\r\n        return findCaretPositionBackwardsFromElm(rootElement, elm);\r\n      });\r\n    };\r\n    var findCaretPositionForward = function (rootElement, elm) {\r\n      return getNextSiblingCaretPosition(elm).orThunk(function () {\r\n        return getPreviousSiblingCaretPosition(elm);\r\n      }).orThunk(function () {\r\n        return findCaretPositionForwardsFromElm(rootElement, elm);\r\n      });\r\n    };\r\n    var findCaretPosition = function (forward, rootElement, elm) {\r\n      return forward ? findCaretPositionForward(rootElement, elm) : findCaretPositionBackwards(rootElement, elm);\r\n    };\r\n    var findCaretPosOutsideElmAfterDelete = function (forward, rootElement, elm) {\r\n      return findCaretPosition(forward, rootElement, elm).map(curry(reposition, elm));\r\n    };\r\n    var setSelection$1 = function (editor, forward, pos) {\r\n      pos.fold(function () {\r\n        editor.focus();\r\n      }, function (pos) {\r\n        editor.selection.setRng(pos.toRange(), forward);\r\n      });\r\n    };\r\n    var eqRawNode = function (rawNode) {\r\n      return function (elm) {\r\n        return elm.dom === rawNode;\r\n      };\r\n    };\r\n    var isBlock = function (editor, elm) {\r\n      return elm && has$2(editor.schema.getBlockElements(), name(elm));\r\n    };\r\n    var paddEmptyBlock = function (elm) {\r\n      if (isEmpty$2(elm)) {\r\n        var br = SugarElement.fromHtml('<br data-mce-bogus=\"1\">');\r\n        empty(elm);\r\n        append$1(elm, br);\r\n        return Optional.some(CaretPosition.before(br.dom));\r\n      } else {\r\n        return Optional.none();\r\n      }\r\n    };\r\n    var deleteNormalized = function (elm, afterDeletePosOpt, normalizeWhitespace) {\r\n      var prevTextOpt = prevSibling(elm).filter(isText$8);\r\n      var nextTextOpt = nextSibling(elm).filter(isText$8);\r\n      remove$7(elm);\r\n      return lift3(prevTextOpt, nextTextOpt, afterDeletePosOpt, function (prev, next, pos) {\r\n        var prevNode = prev.dom, nextNode = next.dom;\r\n        var offset = prevNode.data.length;\r\n        mergeTextNodes(prevNode, nextNode, normalizeWhitespace);\r\n        return pos.container() === nextNode ? CaretPosition(prevNode, offset) : pos;\r\n      }).orThunk(function () {\r\n        if (normalizeWhitespace) {\r\n          prevTextOpt.each(function (elm) {\r\n            return normalizeWhitespaceBefore(elm.dom, elm.dom.length);\r\n          });\r\n          nextTextOpt.each(function (elm) {\r\n            return normalizeWhitespaceAfter(elm.dom, 0);\r\n          });\r\n        }\r\n        return afterDeletePosOpt;\r\n      });\r\n    };\r\n    var isInlineElement = function (editor, element) {\r\n      return has$2(editor.schema.getTextInlineElements(), name(element));\r\n    };\r\n    var deleteElement$2 = function (editor, forward, elm, moveCaret) {\r\n      if (moveCaret === void 0) {\r\n        moveCaret = true;\r\n      }\r\n      var afterDeletePos = findCaretPosOutsideElmAfterDelete(forward, editor.getBody(), elm.dom);\r\n      var parentBlock = ancestor$3(elm, curry(isBlock, editor), eqRawNode(editor.getBody()));\r\n      var normalizedAfterDeletePos = deleteNormalized(elm, afterDeletePos, isInlineElement(editor, elm));\r\n      if (editor.dom.isEmpty(editor.getBody())) {\r\n        editor.setContent('');\r\n        editor.selection.setCursorLocation();\r\n      } else {\r\n        parentBlock.bind(paddEmptyBlock).fold(function () {\r\n          if (moveCaret) {\r\n            setSelection$1(editor, forward, normalizedAfterDeletePos);\r\n          }\r\n        }, function (paddPos) {\r\n          if (moveCaret) {\r\n            setSelection$1(editor, forward, Optional.some(paddPos));\r\n          }\r\n        });\r\n      }\r\n    };\r\n\r\n    var isRootFromElement = function (root) {\r\n      return function (cur) {\r\n        return eq(root, cur);\r\n      };\r\n    };\r\n    var getTableCells = function (table) {\r\n      return descendants(table, 'td,th');\r\n    };\r\n    var getTableDetailsFromRange = function (rng, isRoot) {\r\n      var getTable = function (node) {\r\n        return getClosestTable(SugarElement.fromDom(node), isRoot);\r\n      };\r\n      var startTable = getTable(rng.startContainer);\r\n      var endTable = getTable(rng.endContainer);\r\n      var isStartInTable = startTable.isSome();\r\n      var isEndInTable = endTable.isSome();\r\n      var isSameTable = lift2(startTable, endTable, eq).getOr(false);\r\n      var isMultiTable = !isSameTable && isStartInTable && isEndInTable;\r\n      return {\r\n        startTable: startTable,\r\n        endTable: endTable,\r\n        isStartInTable: isStartInTable,\r\n        isEndInTable: isEndInTable,\r\n        isSameTable: isSameTable,\r\n        isMultiTable: isMultiTable\r\n      };\r\n    };\r\n\r\n    var tableCellRng = function (start, end) {\r\n      return {\r\n        start: start,\r\n        end: end\r\n      };\r\n    };\r\n    var tableSelection = function (rng, table, cells) {\r\n      return {\r\n        rng: rng,\r\n        table: table,\r\n        cells: cells\r\n      };\r\n    };\r\n    var deleteAction = Adt.generate([\r\n      {\r\n        singleCellTable: [\r\n          'rng',\r\n          'cell'\r\n        ]\r\n      },\r\n      { fullTable: ['table'] },\r\n      {\r\n        partialTable: [\r\n          'cells',\r\n          'outsideDetails'\r\n        ]\r\n      },\r\n      {\r\n        multiTable: [\r\n          'startTableCells',\r\n          'endTableCells',\r\n          'betweenRng'\r\n        ]\r\n      }\r\n    ]);\r\n    var getClosestCell$1 = function (container, isRoot) {\r\n      return closest$2(SugarElement.fromDom(container), 'td,th', isRoot);\r\n    };\r\n    var isExpandedCellRng = function (cellRng) {\r\n      return !eq(cellRng.start, cellRng.end);\r\n    };\r\n    var getTableFromCellRng = function (cellRng, isRoot) {\r\n      return getClosestTable(cellRng.start, isRoot).bind(function (startParentTable) {\r\n        return getClosestTable(cellRng.end, isRoot).bind(function (endParentTable) {\r\n          return someIf(eq(startParentTable, endParentTable), startParentTable);\r\n        });\r\n      });\r\n    };\r\n    var isSingleCellTable = function (cellRng, isRoot) {\r\n      return !isExpandedCellRng(cellRng) && getTableFromCellRng(cellRng, isRoot).exists(function (table) {\r\n        var rows = table.dom.rows;\r\n        return rows.length === 1 && rows[0].cells.length === 1;\r\n      });\r\n    };\r\n    var getCellRng = function (rng, isRoot) {\r\n      var startCell = getClosestCell$1(rng.startContainer, isRoot);\r\n      var endCell = getClosestCell$1(rng.endContainer, isRoot);\r\n      return lift2(startCell, endCell, tableCellRng);\r\n    };\r\n    var getCellRangeFromStartTable = function (isRoot) {\r\n      return function (startCell) {\r\n        return getClosestTable(startCell, isRoot).bind(function (table) {\r\n          return last$2(getTableCells(table)).map(function (endCell) {\r\n            return tableCellRng(startCell, endCell);\r\n          });\r\n        });\r\n      };\r\n    };\r\n    var getCellRangeFromEndTable = function (isRoot) {\r\n      return function (endCell) {\r\n        return getClosestTable(endCell, isRoot).bind(function (table) {\r\n          return head(getTableCells(table)).map(function (startCell) {\r\n            return tableCellRng(startCell, endCell);\r\n          });\r\n        });\r\n      };\r\n    };\r\n    var getTableSelectionFromCellRng = function (isRoot) {\r\n      return function (cellRng) {\r\n        return getTableFromCellRng(cellRng, isRoot).map(function (table) {\r\n          return tableSelection(cellRng, table, getTableCells(table));\r\n        });\r\n      };\r\n    };\r\n    var getTableSelections = function (cellRng, selectionDetails, rng, isRoot) {\r\n      if (rng.collapsed || !cellRng.forall(isExpandedCellRng)) {\r\n        return Optional.none();\r\n      } else if (selectionDetails.isSameTable) {\r\n        var sameTableSelection = cellRng.bind(getTableSelectionFromCellRng(isRoot));\r\n        return Optional.some({\r\n          start: sameTableSelection,\r\n          end: sameTableSelection\r\n        });\r\n      } else {\r\n        var startCell = getClosestCell$1(rng.startContainer, isRoot);\r\n        var endCell = getClosestCell$1(rng.endContainer, isRoot);\r\n        var startTableSelection = startCell.bind(getCellRangeFromStartTable(isRoot)).bind(getTableSelectionFromCellRng(isRoot));\r\n        var endTableSelection = endCell.bind(getCellRangeFromEndTable(isRoot)).bind(getTableSelectionFromCellRng(isRoot));\r\n        return Optional.some({\r\n          start: startTableSelection,\r\n          end: endTableSelection\r\n        });\r\n      }\r\n    };\r\n    var getCellIndex = function (cells, cell) {\r\n      return findIndex$2(cells, function (x) {\r\n        return eq(x, cell);\r\n      });\r\n    };\r\n    var getSelectedCells = function (tableSelection) {\r\n      return lift2(getCellIndex(tableSelection.cells, tableSelection.rng.start), getCellIndex(tableSelection.cells, tableSelection.rng.end), function (startIndex, endIndex) {\r\n        return tableSelection.cells.slice(startIndex, endIndex + 1);\r\n      });\r\n    };\r\n    var isSingleCellTableContentSelected = function (optCellRng, rng, isRoot) {\r\n      return optCellRng.exists(function (cellRng) {\r\n        return isSingleCellTable(cellRng, isRoot) && hasAllContentsSelected(cellRng.start, rng);\r\n      });\r\n    };\r\n    var unselectCells = function (rng, selectionDetails) {\r\n      var startTable = selectionDetails.startTable, endTable = selectionDetails.endTable;\r\n      var otherContentRng = rng.cloneRange();\r\n      startTable.each(function (table) {\r\n        return otherContentRng.setStartAfter(table.dom);\r\n      });\r\n      endTable.each(function (table) {\r\n        return otherContentRng.setEndBefore(table.dom);\r\n      });\r\n      return otherContentRng;\r\n    };\r\n    var handleSingleTable = function (cellRng, selectionDetails, rng, isRoot) {\r\n      return getTableSelections(cellRng, selectionDetails, rng, isRoot).bind(function (_a) {\r\n        var start = _a.start, end = _a.end;\r\n        return start.or(end);\r\n      }).bind(function (tableSelection) {\r\n        var isSameTable = selectionDetails.isSameTable;\r\n        var selectedCells = getSelectedCells(tableSelection).getOr([]);\r\n        if (isSameTable && tableSelection.cells.length === selectedCells.length) {\r\n          return Optional.some(deleteAction.fullTable(tableSelection.table));\r\n        } else if (selectedCells.length > 0) {\r\n          if (isSameTable) {\r\n            return Optional.some(deleteAction.partialTable(selectedCells, Optional.none()));\r\n          } else {\r\n            var otherContentRng = unselectCells(rng, selectionDetails);\r\n            return Optional.some(deleteAction.partialTable(selectedCells, Optional.some(__assign(__assign({}, selectionDetails), { rng: otherContentRng }))));\r\n          }\r\n        } else {\r\n          return Optional.none();\r\n        }\r\n      });\r\n    };\r\n    var handleMultiTable = function (cellRng, selectionDetails, rng, isRoot) {\r\n      return getTableSelections(cellRng, selectionDetails, rng, isRoot).bind(function (_a) {\r\n        var start = _a.start, end = _a.end;\r\n        var startTableSelectedCells = start.bind(getSelectedCells).getOr([]);\r\n        var endTableSelectedCells = end.bind(getSelectedCells).getOr([]);\r\n        if (startTableSelectedCells.length > 0 && endTableSelectedCells.length > 0) {\r\n          var otherContentRng = unselectCells(rng, selectionDetails);\r\n          return Optional.some(deleteAction.multiTable(startTableSelectedCells, endTableSelectedCells, otherContentRng));\r\n        } else {\r\n          return Optional.none();\r\n        }\r\n      });\r\n    };\r\n    var getActionFromRange = function (root, rng) {\r\n      var isRoot = isRootFromElement(root);\r\n      var optCellRng = getCellRng(rng, isRoot);\r\n      var selectionDetails = getTableDetailsFromRange(rng, isRoot);\r\n      if (isSingleCellTableContentSelected(optCellRng, rng, isRoot)) {\r\n        return optCellRng.map(function (cellRng) {\r\n          return deleteAction.singleCellTable(rng, cellRng.start);\r\n        });\r\n      } else if (selectionDetails.isMultiTable) {\r\n        return handleMultiTable(optCellRng, selectionDetails, rng, isRoot);\r\n      } else {\r\n        return handleSingleTable(optCellRng, selectionDetails, rng, isRoot);\r\n      }\r\n    };\r\n\r\n    var freefallRtl = function (root) {\r\n      var child = isComment$1(root) ? prevSibling(root) : lastChild(root);\r\n      return child.bind(freefallRtl).orThunk(function () {\r\n        return Optional.some(root);\r\n      });\r\n    };\r\n    var cleanCells = function (cells) {\r\n      return each$k(cells, function (cell) {\r\n        remove$6(cell, 'contenteditable');\r\n        fillWithPaddingBr(cell);\r\n      });\r\n    };\r\n    var getOutsideBlock = function (editor, container) {\r\n      return Optional.from(editor.dom.getParent(container, editor.dom.isBlock)).map(SugarElement.fromDom);\r\n    };\r\n    var handleEmptyBlock = function (editor, startInTable, emptyBlock) {\r\n      emptyBlock.each(function (block) {\r\n        if (startInTable) {\r\n          remove$7(block);\r\n        } else {\r\n          fillWithPaddingBr(block);\r\n          editor.selection.setCursorLocation(block.dom, 0);\r\n        }\r\n      });\r\n    };\r\n    var deleteContentInsideCell = function (editor, cell, rng, isFirstCellInSelection) {\r\n      var insideTableRng = rng.cloneRange();\r\n      if (isFirstCellInSelection) {\r\n        insideTableRng.setStart(rng.startContainer, rng.startOffset);\r\n        insideTableRng.setEndAfter(cell.dom.lastChild);\r\n      } else {\r\n        insideTableRng.setStartBefore(cell.dom.firstChild);\r\n        insideTableRng.setEnd(rng.endContainer, rng.endOffset);\r\n      }\r\n      deleteCellContents(editor, insideTableRng, cell, false);\r\n    };\r\n    var collapseAndRestoreCellSelection = function (editor) {\r\n      var selectedCells = getCellsFromEditor(editor);\r\n      var selectedNode = SugarElement.fromDom(editor.selection.getNode());\r\n      if (isTableCell$5(selectedNode.dom) && isEmpty$2(selectedNode)) {\r\n        editor.selection.setCursorLocation(selectedNode.dom, 0);\r\n      } else {\r\n        editor.selection.collapse(true);\r\n      }\r\n      if (selectedCells.length > 1 && exists(selectedCells, function (cell) {\r\n          return eq(cell, selectedNode);\r\n        })) {\r\n        set$1(selectedNode, 'data-mce-selected', '1');\r\n      }\r\n    };\r\n    var emptySingleTableCells = function (editor, cells, outsideDetails) {\r\n      var editorRng = editor.selection.getRng();\r\n      var cellsToClean = outsideDetails.bind(function (_a) {\r\n        var rng = _a.rng, isStartInTable = _a.isStartInTable;\r\n        var outsideBlock = getOutsideBlock(editor, isStartInTable ? rng.endContainer : rng.startContainer);\r\n        rng.deleteContents();\r\n        handleEmptyBlock(editor, isStartInTable, outsideBlock.filter(isEmpty$2));\r\n        var endPointCell = isStartInTable ? cells[0] : cells[cells.length - 1];\r\n        deleteContentInsideCell(editor, endPointCell, editorRng, isStartInTable);\r\n        if (!isEmpty$2(endPointCell)) {\r\n          return Optional.some(isStartInTable ? cells.slice(1) : cells.slice(0, -1));\r\n        } else {\r\n          return Optional.none();\r\n        }\r\n      }).getOr(cells);\r\n      cleanCells(cellsToClean);\r\n      collapseAndRestoreCellSelection(editor);\r\n      return true;\r\n    };\r\n    var emptyMultiTableCells = function (editor, startTableCells, endTableCells, betweenRng) {\r\n      var rng = editor.selection.getRng();\r\n      var startCell = startTableCells[0];\r\n      var endCell = endTableCells[endTableCells.length - 1];\r\n      deleteContentInsideCell(editor, startCell, rng, true);\r\n      deleteContentInsideCell(editor, endCell, rng, false);\r\n      var startTableCellsToClean = isEmpty$2(startCell) ? startTableCells : startTableCells.slice(1);\r\n      var endTableCellsToClean = isEmpty$2(endCell) ? endTableCells : endTableCells.slice(0, -1);\r\n      cleanCells(startTableCellsToClean.concat(endTableCellsToClean));\r\n      betweenRng.deleteContents();\r\n      collapseAndRestoreCellSelection(editor);\r\n      return true;\r\n    };\r\n    var deleteCellContents = function (editor, rng, cell, moveSelection) {\r\n      if (moveSelection === void 0) {\r\n        moveSelection = true;\r\n      }\r\n      rng.deleteContents();\r\n      var lastNode = freefallRtl(cell).getOr(cell);\r\n      var lastBlock = SugarElement.fromDom(editor.dom.getParent(lastNode.dom, editor.dom.isBlock));\r\n      if (isEmpty$2(lastBlock)) {\r\n        fillWithPaddingBr(lastBlock);\r\n        if (moveSelection) {\r\n          editor.selection.setCursorLocation(lastBlock.dom, 0);\r\n        }\r\n      }\r\n      if (!eq(cell, lastBlock)) {\r\n        var additionalCleanupNodes = is$1(parent(lastBlock), cell) ? [] : siblings(lastBlock);\r\n        each$k(additionalCleanupNodes.concat(children(cell)), function (node) {\r\n          if (!eq(node, lastBlock) && !contains$1(node, lastBlock) && isEmpty$2(node)) {\r\n            remove$7(node);\r\n          }\r\n        });\r\n      }\r\n      return true;\r\n    };\r\n    var deleteTableElement = function (editor, table) {\r\n      deleteElement$2(editor, false, table);\r\n      return true;\r\n    };\r\n    var deleteCellRange = function (editor, rootElm, rng) {\r\n      return getActionFromRange(rootElm, rng).map(function (action) {\r\n        return action.fold(curry(deleteCellContents, editor), curry(deleteTableElement, editor), curry(emptySingleTableCells, editor), curry(emptyMultiTableCells, editor));\r\n      });\r\n    };\r\n    var deleteCaptionRange = function (editor, caption) {\r\n      return emptyElement(editor, caption);\r\n    };\r\n    var deleteTableRange = function (editor, rootElm, rng, startElm) {\r\n      return getParentCaption(rootElm, startElm).fold(function () {\r\n        return deleteCellRange(editor, rootElm, rng);\r\n      }, function (caption) {\r\n        return deleteCaptionRange(editor, caption);\r\n      }).getOr(false);\r\n    };\r\n    var deleteRange$2 = function (editor, startElm, selectedCells) {\r\n      var rootNode = SugarElement.fromDom(editor.getBody());\r\n      var rng = editor.selection.getRng();\r\n      return selectedCells.length !== 0 ? emptySingleTableCells(editor, selectedCells, Optional.none()) : deleteTableRange(editor, rootNode, rng, startElm);\r\n    };\r\n    var getParentCell = function (rootElm, elm) {\r\n      return find$3(parentsAndSelf(elm, rootElm), isTableCell$4);\r\n    };\r\n    var getParentCaption = function (rootElm, elm) {\r\n      return find$3(parentsAndSelf(elm, rootElm), isTag('caption'));\r\n    };\r\n    var deleteBetweenCells = function (editor, rootElm, forward, fromCell, from) {\r\n      return navigate(forward, editor.getBody(), from).bind(function (to) {\r\n        return getParentCell(rootElm, SugarElement.fromDom(to.getNode())).map(function (toCell) {\r\n          return eq(toCell, fromCell) === false;\r\n        });\r\n      });\r\n    };\r\n    var emptyElement = function (editor, elm) {\r\n      fillWithPaddingBr(elm);\r\n      editor.selection.setCursorLocation(elm.dom, 0);\r\n      return Optional.some(true);\r\n    };\r\n    var isDeleteOfLastCharPos = function (fromCaption, forward, from, to) {\r\n      return firstPositionIn(fromCaption.dom).bind(function (first) {\r\n        return lastPositionIn(fromCaption.dom).map(function (last) {\r\n          return forward ? from.isEqual(first) && to.isEqual(last) : from.isEqual(last) && to.isEqual(first);\r\n        });\r\n      }).getOr(true);\r\n    };\r\n    var emptyCaretCaption = function (editor, elm) {\r\n      return emptyElement(editor, elm);\r\n    };\r\n    var validateCaretCaption = function (rootElm, fromCaption, to) {\r\n      return getParentCaption(rootElm, SugarElement.fromDom(to.getNode())).map(function (toCaption) {\r\n        return eq(toCaption, fromCaption) === false;\r\n      });\r\n    };\r\n    var deleteCaretInsideCaption = function (editor, rootElm, forward, fromCaption, from) {\r\n      return navigate(forward, editor.getBody(), from).bind(function (to) {\r\n        return isDeleteOfLastCharPos(fromCaption, forward, from, to) ? emptyCaretCaption(editor, fromCaption) : validateCaretCaption(rootElm, fromCaption, to);\r\n      }).or(Optional.some(true));\r\n    };\r\n    var deleteCaretCells = function (editor, forward, rootElm, startElm) {\r\n      var from = CaretPosition.fromRangeStart(editor.selection.getRng());\r\n      return getParentCell(rootElm, startElm).bind(function (fromCell) {\r\n        return isEmpty$2(fromCell) ? emptyElement(editor, fromCell) : deleteBetweenCells(editor, rootElm, forward, fromCell, from);\r\n      }).getOr(false);\r\n    };\r\n    var deleteCaretCaption = function (editor, forward, rootElm, fromCaption) {\r\n      var from = CaretPosition.fromRangeStart(editor.selection.getRng());\r\n      return isEmpty$2(fromCaption) ? emptyElement(editor, fromCaption) : deleteCaretInsideCaption(editor, rootElm, forward, fromCaption, from);\r\n    };\r\n    var isNearTable = function (forward, pos) {\r\n      return forward ? isBeforeTable(pos) : isAfterTable(pos);\r\n    };\r\n    var isBeforeOrAfterTable = function (editor, forward) {\r\n      var fromPos = CaretPosition.fromRangeStart(editor.selection.getRng());\r\n      return isNearTable(forward, fromPos) || fromPosition(forward, editor.getBody(), fromPos).exists(function (pos) {\r\n        return isNearTable(forward, pos);\r\n      });\r\n    };\r\n    var deleteCaret$3 = function (editor, forward, startElm) {\r\n      var rootElm = SugarElement.fromDom(editor.getBody());\r\n      return getParentCaption(rootElm, startElm).fold(function () {\r\n        return deleteCaretCells(editor, forward, rootElm, startElm) || isBeforeOrAfterTable(editor, forward);\r\n      }, function (fromCaption) {\r\n        return deleteCaretCaption(editor, forward, rootElm, fromCaption).getOr(false);\r\n      });\r\n    };\r\n    var backspaceDelete$9 = function (editor, forward) {\r\n      var startElm = SugarElement.fromDom(editor.selection.getStart(true));\r\n      var cells = getCellsFromEditor(editor);\r\n      return editor.selection.isCollapsed() && cells.length === 0 ? deleteCaret$3(editor, forward, startElm) : deleteRange$2(editor, startElm, cells);\r\n    };\r\n\r\n    var createRange = function (sc, so, ec, eo) {\r\n      var rng = document.createRange();\r\n      rng.setStart(sc, so);\r\n      rng.setEnd(ec, eo);\r\n      return rng;\r\n    };\r\n    var normalizeBlockSelectionRange = function (rng) {\r\n      var startPos = CaretPosition.fromRangeStart(rng);\r\n      var endPos = CaretPosition.fromRangeEnd(rng);\r\n      var rootNode = rng.commonAncestorContainer;\r\n      return fromPosition(false, rootNode, endPos).map(function (newEndPos) {\r\n        if (!isInSameBlock(startPos, endPos, rootNode) && isInSameBlock(startPos, newEndPos, rootNode)) {\r\n          return createRange(startPos.container(), startPos.offset(), newEndPos.container(), newEndPos.offset());\r\n        } else {\r\n          return rng;\r\n        }\r\n      }).getOr(rng);\r\n    };\r\n    var normalize = function (rng) {\r\n      return rng.collapsed ? rng : normalizeBlockSelectionRange(rng);\r\n    };\r\n\r\n    var hasOnlyOneChild$1 = function (node) {\r\n      return node.firstChild && node.firstChild === node.lastChild;\r\n    };\r\n    var isPaddingNode = function (node) {\r\n      return node.name === 'br' || node.value === nbsp;\r\n    };\r\n    var isPaddedEmptyBlock = function (schema, node) {\r\n      var blockElements = schema.getBlockElements();\r\n      return blockElements[node.name] && hasOnlyOneChild$1(node) && isPaddingNode(node.firstChild);\r\n    };\r\n    var isEmptyFragmentElement = function (schema, node) {\r\n      var nonEmptyElements = schema.getNonEmptyElements();\r\n      return node && (node.isEmpty(nonEmptyElements) || isPaddedEmptyBlock(schema, node));\r\n    };\r\n    var isListFragment = function (schema, fragment) {\r\n      var firstChild = fragment.firstChild;\r\n      var lastChild = fragment.lastChild;\r\n      if (firstChild && firstChild.name === 'meta') {\r\n        firstChild = firstChild.next;\r\n      }\r\n      if (lastChild && lastChild.attr('id') === 'mce_marker') {\r\n        lastChild = lastChild.prev;\r\n      }\r\n      if (isEmptyFragmentElement(schema, lastChild)) {\r\n        lastChild = lastChild.prev;\r\n      }\r\n      if (!firstChild || firstChild !== lastChild) {\r\n        return false;\r\n      }\r\n      return firstChild.name === 'ul' || firstChild.name === 'ol';\r\n    };\r\n    var cleanupDomFragment = function (domFragment) {\r\n      var firstChild = domFragment.firstChild;\r\n      var lastChild = domFragment.lastChild;\r\n      if (firstChild && firstChild.nodeName === 'META') {\r\n        firstChild.parentNode.removeChild(firstChild);\r\n      }\r\n      if (lastChild && lastChild.id === 'mce_marker') {\r\n        lastChild.parentNode.removeChild(lastChild);\r\n      }\r\n      return domFragment;\r\n    };\r\n    var toDomFragment = function (dom, serializer, fragment) {\r\n      var html = serializer.serialize(fragment);\r\n      var domFragment = dom.createFragment(html);\r\n      return cleanupDomFragment(domFragment);\r\n    };\r\n    var listItems = function (elm) {\r\n      return filter$4(elm.childNodes, function (child) {\r\n        return child.nodeName === 'LI';\r\n      });\r\n    };\r\n    var isPadding = function (node) {\r\n      return node.data === nbsp || isBr$5(node);\r\n    };\r\n    var isListItemPadded = function (node) {\r\n      return node && node.firstChild && node.firstChild === node.lastChild && isPadding(node.firstChild);\r\n    };\r\n    var isEmptyOrPadded = function (elm) {\r\n      return !elm.firstChild || isListItemPadded(elm);\r\n    };\r\n    var trimListItems = function (elms) {\r\n      return elms.length > 0 && isEmptyOrPadded(elms[elms.length - 1]) ? elms.slice(0, -1) : elms;\r\n    };\r\n    var getParentLi = function (dom, node) {\r\n      var parentBlock = dom.getParent(node, dom.isBlock);\r\n      return parentBlock && parentBlock.nodeName === 'LI' ? parentBlock : null;\r\n    };\r\n    var isParentBlockLi = function (dom, node) {\r\n      return !!getParentLi(dom, node);\r\n    };\r\n    var getSplit = function (parentNode, rng) {\r\n      var beforeRng = rng.cloneRange();\r\n      var afterRng = rng.cloneRange();\r\n      beforeRng.setStartBefore(parentNode);\r\n      afterRng.setEndAfter(parentNode);\r\n      return [\r\n        beforeRng.cloneContents(),\r\n        afterRng.cloneContents()\r\n      ];\r\n    };\r\n    var findFirstIn = function (node, rootNode) {\r\n      var caretPos = CaretPosition.before(node);\r\n      var caretWalker = CaretWalker(rootNode);\r\n      var newCaretPos = caretWalker.next(caretPos);\r\n      return newCaretPos ? newCaretPos.toRange() : null;\r\n    };\r\n    var findLastOf = function (node, rootNode) {\r\n      var caretPos = CaretPosition.after(node);\r\n      var caretWalker = CaretWalker(rootNode);\r\n      var newCaretPos = caretWalker.prev(caretPos);\r\n      return newCaretPos ? newCaretPos.toRange() : null;\r\n    };\r\n    var insertMiddle = function (target, elms, rootNode, rng) {\r\n      var parts = getSplit(target, rng);\r\n      var parentElm = target.parentNode;\r\n      parentElm.insertBefore(parts[0], target);\r\n      Tools.each(elms, function (li) {\r\n        parentElm.insertBefore(li, target);\r\n      });\r\n      parentElm.insertBefore(parts[1], target);\r\n      parentElm.removeChild(target);\r\n      return findLastOf(elms[elms.length - 1], rootNode);\r\n    };\r\n    var insertBefore$1 = function (target, elms, rootNode) {\r\n      var parentElm = target.parentNode;\r\n      Tools.each(elms, function (elm) {\r\n        parentElm.insertBefore(elm, target);\r\n      });\r\n      return findFirstIn(target, rootNode);\r\n    };\r\n    var insertAfter$1 = function (target, elms, rootNode, dom) {\r\n      dom.insertAfter(elms.reverse(), target);\r\n      return findLastOf(elms[0], rootNode);\r\n    };\r\n    var insertAtCaret$1 = function (serializer, dom, rng, fragment) {\r\n      var domFragment = toDomFragment(dom, serializer, fragment);\r\n      var liTarget = getParentLi(dom, rng.startContainer);\r\n      var liElms = trimListItems(listItems(domFragment.firstChild));\r\n      var BEGINNING = 1, END = 2;\r\n      var rootNode = dom.getRoot();\r\n      var isAt = function (location) {\r\n        var caretPos = CaretPosition.fromRangeStart(rng);\r\n        var caretWalker = CaretWalker(dom.getRoot());\r\n        var newPos = location === BEGINNING ? caretWalker.prev(caretPos) : caretWalker.next(caretPos);\r\n        return newPos ? getParentLi(dom, newPos.getNode()) !== liTarget : true;\r\n      };\r\n      if (isAt(BEGINNING)) {\r\n        return insertBefore$1(liTarget, liElms, rootNode);\r\n      } else if (isAt(END)) {\r\n        return insertAfter$1(liTarget, liElms, rootNode, dom);\r\n      }\r\n      return insertMiddle(liTarget, liElms, rootNode, rng);\r\n    };\r\n\r\n    var trimOrPadLeftRight = function (dom, rng, html) {\r\n      var root = SugarElement.fromDom(dom.getRoot());\r\n      if (needsToBeNbspLeft(root, CaretPosition.fromRangeStart(rng))) {\r\n        html = html.replace(/^ /, '&nbsp;');\r\n      } else {\r\n        html = html.replace(/^&nbsp;/, ' ');\r\n      }\r\n      if (needsToBeNbspRight(root, CaretPosition.fromRangeEnd(rng))) {\r\n        html = html.replace(/(&nbsp;| )(<br( \\/)>)?$/, '&nbsp;');\r\n      } else {\r\n        html = html.replace(/&nbsp;(<br( \\/)?>)?$/, ' ');\r\n      }\r\n      return html;\r\n    };\r\n\r\n    var isTableCell$1 = isTableCell$5;\r\n    var isTableCellContentSelected = function (dom, rng, cell) {\r\n      if (cell !== null) {\r\n        var endCell = dom.getParent(rng.endContainer, isTableCell$1);\r\n        return cell === endCell && hasAllContentsSelected(SugarElement.fromDom(cell), rng);\r\n      } else {\r\n        return false;\r\n      }\r\n    };\r\n    var validInsertion = function (editor, value, parentNode) {\r\n      if (parentNode.getAttribute('data-mce-bogus') === 'all') {\r\n        parentNode.parentNode.insertBefore(editor.dom.createFragment(value), parentNode);\r\n      } else {\r\n        var node = parentNode.firstChild;\r\n        var node2 = parentNode.lastChild;\r\n        if (!node || node === node2 && node.nodeName === 'BR') {\r\n          editor.dom.setHTML(parentNode, value);\r\n        } else {\r\n          editor.selection.setContent(value);\r\n        }\r\n      }\r\n    };\r\n    var trimBrsFromTableCell = function (dom, elm) {\r\n      Optional.from(dom.getParent(elm, 'td,th')).map(SugarElement.fromDom).each(trimBlockTrailingBr);\r\n    };\r\n    var reduceInlineTextElements = function (editor, merge) {\r\n      var textInlineElements = editor.schema.getTextInlineElements();\r\n      var dom = editor.dom;\r\n      if (merge) {\r\n        var root_1 = editor.getBody();\r\n        var elementUtils_1 = ElementUtils(dom);\r\n        Tools.each(dom.select('*[data-mce-fragment]'), function (node) {\r\n          var isInline = isNonNullable(textInlineElements[node.nodeName.toLowerCase()]);\r\n          if (isInline && hasInheritableStyles(dom, node)) {\r\n            for (var parentNode = node.parentNode; isNonNullable(parentNode) && parentNode !== root_1; parentNode = parentNode.parentNode) {\r\n              var styleConflict = hasStyleConflict(dom, node, parentNode);\r\n              if (styleConflict) {\r\n                break;\r\n              }\r\n              if (elementUtils_1.compare(parentNode, node)) {\r\n                dom.remove(node, true);\r\n                break;\r\n              }\r\n            }\r\n          }\r\n        });\r\n      }\r\n    };\r\n    var markFragmentElements = function (fragment) {\r\n      var node = fragment;\r\n      while (node = node.walk()) {\r\n        if (node.type === 1) {\r\n          node.attr('data-mce-fragment', '1');\r\n        }\r\n      }\r\n    };\r\n    var unmarkFragmentElements = function (elm) {\r\n      Tools.each(elm.getElementsByTagName('*'), function (elm) {\r\n        elm.removeAttribute('data-mce-fragment');\r\n      });\r\n    };\r\n    var isPartOfFragment = function (node) {\r\n      return !!node.getAttribute('data-mce-fragment');\r\n    };\r\n    var canHaveChildren = function (editor, node) {\r\n      return node && !editor.schema.getShortEndedElements()[node.nodeName];\r\n    };\r\n    var moveSelectionToMarker = function (editor, marker) {\r\n      var nextRng;\r\n      var dom = editor.dom;\r\n      var selection = editor.selection;\r\n      if (!marker) {\r\n        return;\r\n      }\r\n      selection.scrollIntoView(marker);\r\n      var parentEditableElm = getContentEditableRoot$1(editor.getBody(), marker);\r\n      if (dom.getContentEditable(parentEditableElm) === 'false') {\r\n        dom.remove(marker);\r\n        selection.select(parentEditableElm);\r\n        return;\r\n      }\r\n      var rng = dom.createRng();\r\n      var node = marker.previousSibling;\r\n      if (isText$7(node)) {\r\n        rng.setStart(node, node.nodeValue.length);\r\n        if (!Env.ie) {\r\n          var node2 = marker.nextSibling;\r\n          if (isText$7(node2)) {\r\n            node.appendData(node2.data);\r\n            node2.parentNode.removeChild(node2);\r\n          }\r\n        }\r\n      } else {\r\n        rng.setStartBefore(marker);\r\n        rng.setEndBefore(marker);\r\n      }\r\n      var findNextCaretRng = function (rng) {\r\n        var caretPos = CaretPosition.fromRangeStart(rng);\r\n        var caretWalker = CaretWalker(editor.getBody());\r\n        caretPos = caretWalker.next(caretPos);\r\n        if (caretPos) {\r\n          return caretPos.toRange();\r\n        }\r\n      };\r\n      var parentBlock = dom.getParent(marker, dom.isBlock);\r\n      dom.remove(marker);\r\n      if (parentBlock && dom.isEmpty(parentBlock)) {\r\n        editor.$(parentBlock).empty();\r\n        rng.setStart(parentBlock, 0);\r\n        rng.setEnd(parentBlock, 0);\r\n        if (!isTableCell$1(parentBlock) && !isPartOfFragment(parentBlock) && (nextRng = findNextCaretRng(rng))) {\r\n          rng = nextRng;\r\n          dom.remove(parentBlock);\r\n        } else {\r\n          dom.add(parentBlock, dom.create('br', { 'data-mce-bogus': '1' }));\r\n        }\r\n      }\r\n      selection.setRng(rng);\r\n    };\r\n    var deleteSelectedContent = function (editor) {\r\n      var dom = editor.dom;\r\n      var rng = normalize(editor.selection.getRng());\r\n      editor.selection.setRng(rng);\r\n      var startCell = dom.getParent(rng.startContainer, isTableCell$1);\r\n      if (isTableCellContentSelected(dom, rng, startCell)) {\r\n        deleteCellContents(editor, rng, SugarElement.fromDom(startCell));\r\n      } else {\r\n        editor.getDoc().execCommand('Delete', false, null);\r\n      }\r\n    };\r\n    var insertHtmlAtCaret = function (editor, value, details) {\r\n      var parentNode;\r\n      var rng, node;\r\n      var selection = editor.selection;\r\n      var dom = editor.dom;\r\n      if (/^ | $/.test(value)) {\r\n        value = trimOrPadLeftRight(dom, selection.getRng(), value);\r\n      }\r\n      var parser = editor.parser;\r\n      var merge = details.merge;\r\n      var serializer = HtmlSerializer({ validate: shouldValidate(editor) }, editor.schema);\r\n      var bookmarkHtml = '<span id=\"mce_marker\" data-mce-type=\"bookmark\">&#xFEFF;</span>';\r\n      var args = editor.fire('BeforeSetContent', {\r\n        content: value,\r\n        format: 'html',\r\n        selection: true,\r\n        paste: details.paste\r\n      });\r\n      if (args.isDefaultPrevented()) {\r\n        editor.fire('SetContent', {\r\n          content: args.content,\r\n          format: 'html',\r\n          selection: true,\r\n          paste: details.paste\r\n        });\r\n        return;\r\n      }\r\n      value = args.content;\r\n      if (value.indexOf('{$caret}') === -1) {\r\n        value += '{$caret}';\r\n      }\r\n      value = value.replace(/\\{\\$caret\\}/, bookmarkHtml);\r\n      rng = selection.getRng();\r\n      var caretElement = rng.startContainer || (rng.parentElement ? rng.parentElement() : null);\r\n      var body = editor.getBody();\r\n      if (caretElement === body && selection.isCollapsed()) {\r\n        if (dom.isBlock(body.firstChild) && canHaveChildren(editor, body.firstChild) && dom.isEmpty(body.firstChild)) {\r\n          rng = dom.createRng();\r\n          rng.setStart(body.firstChild, 0);\r\n          rng.setEnd(body.firstChild, 0);\r\n          selection.setRng(rng);\r\n        }\r\n      }\r\n      if (!selection.isCollapsed()) {\r\n        deleteSelectedContent(editor);\r\n      }\r\n      parentNode = selection.getNode();\r\n      var parserArgs = {\r\n        context: parentNode.nodeName.toLowerCase(),\r\n        data: details.data,\r\n        insert: true\r\n      };\r\n      var fragment = parser.parse(value, parserArgs);\r\n      if (details.paste === true && isListFragment(editor.schema, fragment) && isParentBlockLi(dom, parentNode)) {\r\n        rng = insertAtCaret$1(serializer, dom, selection.getRng(), fragment);\r\n        selection.setRng(rng);\r\n        editor.fire('SetContent', args);\r\n        return;\r\n      }\r\n      markFragmentElements(fragment);\r\n      node = fragment.lastChild;\r\n      if (node.attr('id') === 'mce_marker') {\r\n        var marker = node;\r\n        for (node = node.prev; node; node = node.walk(true)) {\r\n          if (node.type === 3 || !dom.isBlock(node.name)) {\r\n            if (editor.schema.isValidChild(node.parent.name, 'span')) {\r\n              node.parent.insert(marker, node, node.name === 'br');\r\n            }\r\n            break;\r\n          }\r\n        }\r\n      }\r\n      editor._selectionOverrides.showBlockCaretContainer(parentNode);\r\n      if (!parserArgs.invalid) {\r\n        value = serializer.serialize(fragment);\r\n        validInsertion(editor, value, parentNode);\r\n      } else {\r\n        editor.selection.setContent(bookmarkHtml);\r\n        parentNode = selection.getNode();\r\n        var rootNode = editor.getBody();\r\n        if (parentNode.nodeType === 9) {\r\n          parentNode = node = rootNode;\r\n        } else {\r\n          node = parentNode;\r\n        }\r\n        while (node !== rootNode) {\r\n          parentNode = node;\r\n          node = node.parentNode;\r\n        }\r\n        value = parentNode === rootNode ? rootNode.innerHTML : dom.getOuterHTML(parentNode);\r\n        value = serializer.serialize(parser.parse(value.replace(/<span (id=\"mce_marker\"|id=mce_marker).+?<\\/span>/i, function () {\r\n          return serializer.serialize(fragment);\r\n        })));\r\n        if (parentNode === rootNode) {\r\n          dom.setHTML(rootNode, value);\r\n        } else {\r\n          dom.setOuterHTML(parentNode, value);\r\n        }\r\n      }\r\n      reduceInlineTextElements(editor, merge);\r\n      moveSelectionToMarker(editor, dom.get('mce_marker'));\r\n      unmarkFragmentElements(editor.getBody());\r\n      trimBrsFromTableCell(dom, selection.getStart());\r\n      editor.fire('SetContent', args);\r\n      editor.addVisual();\r\n    };\r\n\r\n    var traverse = function (node, fn) {\r\n      fn(node);\r\n      if (node.firstChild) {\r\n        traverse(node.firstChild, fn);\r\n      }\r\n      if (node.next) {\r\n        traverse(node.next, fn);\r\n      }\r\n    };\r\n    var findMatchingNodes = function (nodeFilters, attributeFilters, node) {\r\n      var nodeMatches = {};\r\n      var attrMatches = {};\r\n      var matches = [];\r\n      if (node.firstChild) {\r\n        traverse(node.firstChild, function (node) {\r\n          each$k(nodeFilters, function (filter) {\r\n            if (filter.name === node.name) {\r\n              if (nodeMatches[filter.name]) {\r\n                nodeMatches[filter.name].nodes.push(node);\r\n              } else {\r\n                nodeMatches[filter.name] = {\r\n                  filter: filter,\r\n                  nodes: [node]\r\n                };\r\n              }\r\n            }\r\n          });\r\n          each$k(attributeFilters, function (filter) {\r\n            if (typeof node.attr(filter.name) === 'string') {\r\n              if (attrMatches[filter.name]) {\r\n                attrMatches[filter.name].nodes.push(node);\r\n              } else {\r\n                attrMatches[filter.name] = {\r\n                  filter: filter,\r\n                  nodes: [node]\r\n                };\r\n              }\r\n            }\r\n          });\r\n        });\r\n      }\r\n      for (var name_1 in nodeMatches) {\r\n        if (has$2(nodeMatches, name_1)) {\r\n          matches.push(nodeMatches[name_1]);\r\n        }\r\n      }\r\n      for (var name_2 in attrMatches) {\r\n        if (has$2(attrMatches, name_2)) {\r\n          matches.push(attrMatches[name_2]);\r\n        }\r\n      }\r\n      return matches;\r\n    };\r\n    var filter$1 = function (nodeFilters, attributeFilters, node) {\r\n      var matches = findMatchingNodes(nodeFilters, attributeFilters, node);\r\n      each$k(matches, function (match) {\r\n        each$k(match.filter.callbacks, function (callback) {\r\n          callback(match.nodes, match.filter.name, {});\r\n        });\r\n      });\r\n    };\r\n\r\n    var defaultFormat$1 = 'html';\r\n    var isTreeNode = function (content) {\r\n      return content instanceof AstNode;\r\n    };\r\n    var moveSelection = function (editor) {\r\n      if (hasFocus(editor)) {\r\n        firstPositionIn(editor.getBody()).each(function (pos) {\r\n          var node = pos.getNode();\r\n          var caretPos = isTable$3(node) ? firstPositionIn(node).getOr(pos) : pos;\r\n          editor.selection.setRng(caretPos.toRange());\r\n        });\r\n      }\r\n    };\r\n    var setEditorHtml = function (editor, html, noSelection) {\r\n      editor.dom.setHTML(editor.getBody(), html);\r\n      if (noSelection !== true) {\r\n        moveSelection(editor);\r\n      }\r\n    };\r\n    var setContentString = function (editor, body, content, args) {\r\n      if (content.length === 0 || /^\\s+$/.test(content)) {\r\n        var padd = '<br data-mce-bogus=\"1\">';\r\n        if (body.nodeName === 'TABLE') {\r\n          content = '<tr><td>' + padd + '</td></tr>';\r\n        } else if (/^(UL|OL)$/.test(body.nodeName)) {\r\n          content = '<li>' + padd + '</li>';\r\n        }\r\n        var forcedRootBlockName = getForcedRootBlock(editor);\r\n        if (forcedRootBlockName && editor.schema.isValidChild(body.nodeName.toLowerCase(), forcedRootBlockName.toLowerCase())) {\r\n          content = padd;\r\n          content = editor.dom.createHTML(forcedRootBlockName, getForcedRootBlockAttrs(editor), content);\r\n        } else if (!content) {\r\n          content = '<br data-mce-bogus=\"1\">';\r\n        }\r\n        setEditorHtml(editor, content, args.no_selection);\r\n        editor.fire('SetContent', args);\r\n      } else {\r\n        if (args.format !== 'raw') {\r\n          content = HtmlSerializer({ validate: editor.validate }, editor.schema).serialize(editor.parser.parse(content, {\r\n            isRootContent: true,\r\n            insert: true\r\n          }));\r\n        }\r\n        args.content = isWsPreserveElement(SugarElement.fromDom(body)) ? content : Tools.trim(content);\r\n        setEditorHtml(editor, args.content, args.no_selection);\r\n        if (!args.no_events) {\r\n          editor.fire('SetContent', args);\r\n        }\r\n      }\r\n      return args.content;\r\n    };\r\n    var setContentTree = function (editor, body, content, args) {\r\n      filter$1(editor.parser.getNodeFilters(), editor.parser.getAttributeFilters(), content);\r\n      var html = HtmlSerializer({ validate: editor.validate }, editor.schema).serialize(content);\r\n      args.content = isWsPreserveElement(SugarElement.fromDom(body)) ? html : Tools.trim(html);\r\n      setEditorHtml(editor, args.content, args.no_selection);\r\n      if (!args.no_events) {\r\n        editor.fire('SetContent', args);\r\n      }\r\n      return content;\r\n    };\r\n    var setupArgs$2 = function (args, content) {\r\n      return __assign(__assign({ format: defaultFormat$1 }, args), {\r\n        set: true,\r\n        content: isTreeNode(content) ? '' : content\r\n      });\r\n    };\r\n    var setContentInternal = function (editor, content, args) {\r\n      var defaultedArgs = setupArgs$2(args, content);\r\n      var updatedArgs = args.no_events ? defaultedArgs : editor.fire('BeforeSetContent', defaultedArgs);\r\n      if (!isTreeNode(content)) {\r\n        content = updatedArgs.content;\r\n      }\r\n      return Optional.from(editor.getBody()).fold(constant(content), function (body) {\r\n        return isTreeNode(content) ? setContentTree(editor, body, content, updatedArgs) : setContentString(editor, body, content, updatedArgs);\r\n      });\r\n    };\r\n\r\n    var sibling = function (scope, predicate) {\r\n      return sibling$2(scope, predicate).isSome();\r\n    };\r\n\r\n    var ensureIsRoot = function (isRoot) {\r\n      return isFunction(isRoot) ? isRoot : never;\r\n    };\r\n    var ancestor = function (scope, transform, isRoot) {\r\n      var element = scope.dom;\r\n      var stop = ensureIsRoot(isRoot);\r\n      while (element.parentNode) {\r\n        element = element.parentNode;\r\n        var el = SugarElement.fromDom(element);\r\n        var transformed = transform(el);\r\n        if (transformed.isSome()) {\r\n          return transformed;\r\n        } else if (stop(el)) {\r\n          break;\r\n        }\r\n      }\r\n      return Optional.none();\r\n    };\r\n    var closest$1 = function (scope, transform, isRoot) {\r\n      var current = transform(scope);\r\n      var stop = ensureIsRoot(isRoot);\r\n      return current.orThunk(function () {\r\n        return stop(scope) ? Optional.none() : ancestor(scope, transform, stop);\r\n      });\r\n    };\r\n\r\n    var isEq$3 = isEq$5;\r\n    var matchesUnInheritedFormatSelector = function (ed, node, name) {\r\n      var formatList = ed.formatter.get(name);\r\n      if (formatList) {\r\n        for (var i = 0; i < formatList.length; i++) {\r\n          var format = formatList[i];\r\n          if (isSelectorFormat(format) && format.inherit === false && ed.dom.is(node, format.selector)) {\r\n            return true;\r\n          }\r\n        }\r\n      }\r\n      return false;\r\n    };\r\n    var matchParents = function (editor, node, name, vars, similar) {\r\n      var root = editor.dom.getRoot();\r\n      if (node === root) {\r\n        return false;\r\n      }\r\n      node = editor.dom.getParent(node, function (node) {\r\n        if (matchesUnInheritedFormatSelector(editor, node, name)) {\r\n          return true;\r\n        }\r\n        return node.parentNode === root || !!matchNode(editor, node, name, vars, true);\r\n      });\r\n      return !!matchNode(editor, node, name, vars, similar);\r\n    };\r\n    var matchName$1 = function (dom, node, format) {\r\n      if (isEq$3(node, format.inline)) {\r\n        return true;\r\n      }\r\n      if (isEq$3(node, format.block)) {\r\n        return true;\r\n      }\r\n      if (format.selector) {\r\n        return node.nodeType === 1 && dom.is(node, format.selector);\r\n      }\r\n    };\r\n    var matchItems = function (dom, node, format, itemName, similar, vars) {\r\n      var items = format[itemName];\r\n      if (isFunction(format.onmatch)) {\r\n        return format.onmatch(node, format, itemName);\r\n      }\r\n      if (items) {\r\n        if (isUndefined(items.length)) {\r\n          for (var key in items) {\r\n            if (has$2(items, key)) {\r\n              var value = itemName === 'attributes' ? dom.getAttrib(node, key) : getStyle(dom, node, key);\r\n              var expectedValue = replaceVars(items[key], vars);\r\n              var isEmptyValue = isNullable(value) || isEmpty$3(value);\r\n              if (isEmptyValue && isNullable(expectedValue)) {\r\n                continue;\r\n              }\r\n              if (similar && isEmptyValue && !format.exact) {\r\n                return false;\r\n              }\r\n              if ((!similar || format.exact) && !isEq$3(value, normalizeStyleValue(dom, expectedValue, key))) {\r\n                return false;\r\n              }\r\n            }\r\n          }\r\n        } else {\r\n          for (var i = 0; i < items.length; i++) {\r\n            if (itemName === 'attributes' ? dom.getAttrib(node, items[i]) : getStyle(dom, node, items[i])) {\r\n              return true;\r\n            }\r\n          }\r\n        }\r\n      }\r\n      return true;\r\n    };\r\n    var matchNode = function (ed, node, name, vars, similar) {\r\n      var formatList = ed.formatter.get(name);\r\n      var dom = ed.dom;\r\n      if (formatList && node) {\r\n        for (var i = 0; i < formatList.length; i++) {\r\n          var format = formatList[i];\r\n          if (matchName$1(ed.dom, node, format) && matchItems(dom, node, format, 'attributes', similar, vars) && matchItems(dom, node, format, 'styles', similar, vars)) {\r\n            var classes = format.classes;\r\n            if (classes) {\r\n              for (var x = 0; x < classes.length; x++) {\r\n                if (!ed.dom.hasClass(node, replaceVars(classes[x], vars))) {\r\n                  return;\r\n                }\r\n              }\r\n            }\r\n            return format;\r\n          }\r\n        }\r\n      }\r\n    };\r\n    var match$2 = function (editor, name, vars, node, similar) {\r\n      if (node) {\r\n        return matchParents(editor, node, name, vars, similar);\r\n      }\r\n      node = editor.selection.getNode();\r\n      if (matchParents(editor, node, name, vars, similar)) {\r\n        return true;\r\n      }\r\n      var startNode = editor.selection.getStart();\r\n      if (startNode !== node) {\r\n        if (matchParents(editor, startNode, name, vars, similar)) {\r\n          return true;\r\n        }\r\n      }\r\n      return false;\r\n    };\r\n    var matchAll = function (editor, names, vars) {\r\n      var matchedFormatNames = [];\r\n      var checkedMap = {};\r\n      var startElement = editor.selection.getStart();\r\n      editor.dom.getParent(startElement, function (node) {\r\n        for (var i = 0; i < names.length; i++) {\r\n          var name_1 = names[i];\r\n          if (!checkedMap[name_1] && matchNode(editor, node, name_1, vars)) {\r\n            checkedMap[name_1] = true;\r\n            matchedFormatNames.push(name_1);\r\n          }\r\n        }\r\n      }, editor.dom.getRoot());\r\n      return matchedFormatNames;\r\n    };\r\n    var closest = function (editor, names) {\r\n      var isRoot = function (elm) {\r\n        return eq(elm, SugarElement.fromDom(editor.getBody()));\r\n      };\r\n      var match = function (elm, name) {\r\n        return matchNode(editor, elm.dom, name) ? Optional.some(name) : Optional.none();\r\n      };\r\n      return Optional.from(editor.selection.getStart(true)).bind(function (rawElm) {\r\n        return closest$1(SugarElement.fromDom(rawElm), function (elm) {\r\n          return findMap(names, function (name) {\r\n            return match(elm, name);\r\n          });\r\n        }, isRoot);\r\n      }).getOrNull();\r\n    };\r\n    var canApply = function (editor, name) {\r\n      var formatList = editor.formatter.get(name);\r\n      var dom = editor.dom;\r\n      if (formatList) {\r\n        var startNode = editor.selection.getStart();\r\n        var parents = getParents$2(dom, startNode);\r\n        for (var x = formatList.length - 1; x >= 0; x--) {\r\n          var format = formatList[x];\r\n          if (!isSelectorFormat(format) || isNonNullable(format.defaultBlock)) {\r\n            return true;\r\n          }\r\n          for (var i = parents.length - 1; i >= 0; i--) {\r\n            if (dom.is(parents[i], format.selector)) {\r\n              return true;\r\n            }\r\n          }\r\n        }\r\n      }\r\n      return false;\r\n    };\r\n    var matchAllOnNode = function (editor, node, formatNames) {\r\n      return foldl(formatNames, function (acc, name) {\r\n        var matchSimilar = isVariableFormatName(editor, name);\r\n        if (editor.formatter.matchNode(node, name, {}, matchSimilar)) {\r\n          return acc.concat([name]);\r\n        } else {\r\n          return acc;\r\n        }\r\n      }, []);\r\n    };\r\n\r\n    var ZWSP = ZWSP$1, CARET_ID = '_mce_caret';\r\n    var importNode = function (ownerDocument, node) {\r\n      return ownerDocument.importNode(node, true);\r\n    };\r\n    var getEmptyCaretContainers = function (node) {\r\n      var nodes = [];\r\n      while (node) {\r\n        if (node.nodeType === 3 && node.nodeValue !== ZWSP || node.childNodes.length > 1) {\r\n          return [];\r\n        }\r\n        if (node.nodeType === 1) {\r\n          nodes.push(node);\r\n        }\r\n        node = node.firstChild;\r\n      }\r\n      return nodes;\r\n    };\r\n    var isCaretContainerEmpty = function (node) {\r\n      return getEmptyCaretContainers(node).length > 0;\r\n    };\r\n    var findFirstTextNode = function (node) {\r\n      if (node) {\r\n        var walker = new DomTreeWalker(node, node);\r\n        for (node = walker.current(); node; node = walker.next()) {\r\n          if (isText$7(node)) {\r\n            return node;\r\n          }\r\n        }\r\n      }\r\n      return null;\r\n    };\r\n    var createCaretContainer = function (fill) {\r\n      var caretContainer = SugarElement.fromTag('span');\r\n      setAll$1(caretContainer, {\r\n        'id': CARET_ID,\r\n        'data-mce-bogus': '1',\r\n        'data-mce-type': 'format-caret'\r\n      });\r\n      if (fill) {\r\n        append$1(caretContainer, SugarElement.fromText(ZWSP));\r\n      }\r\n      return caretContainer;\r\n    };\r\n    var trimZwspFromCaretContainer = function (caretContainerNode) {\r\n      var textNode = findFirstTextNode(caretContainerNode);\r\n      if (textNode && textNode.nodeValue.charAt(0) === ZWSP) {\r\n        textNode.deleteData(0, 1);\r\n      }\r\n      return textNode;\r\n    };\r\n    var removeCaretContainerNode = function (editor, node, moveCaret) {\r\n      if (moveCaret === void 0) {\r\n        moveCaret = true;\r\n      }\r\n      var dom = editor.dom, selection = editor.selection;\r\n      if (isCaretContainerEmpty(node)) {\r\n        deleteElement$2(editor, false, SugarElement.fromDom(node), moveCaret);\r\n      } else {\r\n        var rng = selection.getRng();\r\n        var block = dom.getParent(node, dom.isBlock);\r\n        var startContainer = rng.startContainer;\r\n        var startOffset = rng.startOffset;\r\n        var endContainer = rng.endContainer;\r\n        var endOffset = rng.endOffset;\r\n        var textNode = trimZwspFromCaretContainer(node);\r\n        dom.remove(node, true);\r\n        if (startContainer === textNode && startOffset > 0) {\r\n          rng.setStart(textNode, startOffset - 1);\r\n        }\r\n        if (endContainer === textNode && endOffset > 0) {\r\n          rng.setEnd(textNode, endOffset - 1);\r\n        }\r\n        if (block && dom.isEmpty(block)) {\r\n          fillWithPaddingBr(SugarElement.fromDom(block));\r\n        }\r\n        selection.setRng(rng);\r\n      }\r\n    };\r\n    var removeCaretContainer = function (editor, node, moveCaret) {\r\n      if (moveCaret === void 0) {\r\n        moveCaret = true;\r\n      }\r\n      var dom = editor.dom, selection = editor.selection;\r\n      if (!node) {\r\n        node = getParentCaretContainer(editor.getBody(), selection.getStart());\r\n        if (!node) {\r\n          while (node = dom.get(CARET_ID)) {\r\n            removeCaretContainerNode(editor, node, false);\r\n          }\r\n        }\r\n      } else {\r\n        removeCaretContainerNode(editor, node, moveCaret);\r\n      }\r\n    };\r\n    var insertCaretContainerNode = function (editor, caretContainer, formatNode) {\r\n      var dom = editor.dom, block = dom.getParent(formatNode, curry(isTextBlock$1, editor));\r\n      if (block && dom.isEmpty(block)) {\r\n        formatNode.parentNode.replaceChild(caretContainer, formatNode);\r\n      } else {\r\n        removeTrailingBr(SugarElement.fromDom(formatNode));\r\n        if (dom.isEmpty(formatNode)) {\r\n          formatNode.parentNode.replaceChild(caretContainer, formatNode);\r\n        } else {\r\n          dom.insertAfter(caretContainer, formatNode);\r\n        }\r\n      }\r\n    };\r\n    var appendNode = function (parentNode, node) {\r\n      parentNode.appendChild(node);\r\n      return node;\r\n    };\r\n    var insertFormatNodesIntoCaretContainer = function (formatNodes, caretContainer) {\r\n      var innerMostFormatNode = foldr(formatNodes, function (parentNode, formatNode) {\r\n        return appendNode(parentNode, formatNode.cloneNode(false));\r\n      }, caretContainer);\r\n      return appendNode(innerMostFormatNode, innerMostFormatNode.ownerDocument.createTextNode(ZWSP));\r\n    };\r\n    var cleanFormatNode = function (editor, caretContainer, formatNode, name, vars, similar) {\r\n      var formatter = editor.formatter;\r\n      var dom = editor.dom;\r\n      var validFormats = filter$4(keys(formatter.get()), function (formatName) {\r\n        return formatName !== name && !contains$2(formatName, 'removeformat');\r\n      });\r\n      var matchedFormats = matchAllOnNode(editor, formatNode, validFormats);\r\n      var uniqueFormats = filter$4(matchedFormats, function (fmtName) {\r\n        return !areSimilarFormats(editor, fmtName, name);\r\n      });\r\n      if (uniqueFormats.length > 0) {\r\n        var clonedFormatNode = formatNode.cloneNode(false);\r\n        dom.add(caretContainer, clonedFormatNode);\r\n        formatter.remove(name, vars, clonedFormatNode, similar);\r\n        dom.remove(clonedFormatNode);\r\n        return Optional.some(clonedFormatNode);\r\n      } else {\r\n        return Optional.none();\r\n      }\r\n    };\r\n    var applyCaretFormat = function (editor, name, vars) {\r\n      var caretContainer, textNode;\r\n      var selection = editor.selection;\r\n      var selectionRng = selection.getRng();\r\n      var offset = selectionRng.startOffset;\r\n      var container = selectionRng.startContainer;\r\n      var text = container.nodeValue;\r\n      caretContainer = getParentCaretContainer(editor.getBody(), selection.getStart());\r\n      if (caretContainer) {\r\n        textNode = findFirstTextNode(caretContainer);\r\n      }\r\n      var wordcharRegex = /[^\\s\\u00a0\\u00ad\\u200b\\ufeff]/;\r\n      if (text && offset > 0 && offset < text.length && wordcharRegex.test(text.charAt(offset)) && wordcharRegex.test(text.charAt(offset - 1))) {\r\n        var bookmark = selection.getBookmark();\r\n        selectionRng.collapse(true);\r\n        var rng = expandRng(editor, selectionRng, editor.formatter.get(name));\r\n        rng = split(rng);\r\n        editor.formatter.apply(name, vars, rng);\r\n        selection.moveToBookmark(bookmark);\r\n      } else {\r\n        if (!caretContainer || textNode.nodeValue !== ZWSP) {\r\n          caretContainer = importNode(editor.getDoc(), createCaretContainer(true).dom);\r\n          textNode = caretContainer.firstChild;\r\n          selectionRng.insertNode(caretContainer);\r\n          offset = 1;\r\n          editor.formatter.apply(name, vars, caretContainer);\r\n        } else {\r\n          editor.formatter.apply(name, vars, caretContainer);\r\n        }\r\n        selection.setCursorLocation(textNode, offset);\r\n      }\r\n    };\r\n    var removeCaretFormat = function (editor, name, vars, similar) {\r\n      var dom = editor.dom;\r\n      var selection = editor.selection;\r\n      var hasContentAfter, node, formatNode;\r\n      var parents = [];\r\n      var rng = selection.getRng();\r\n      var container = rng.startContainer;\r\n      var offset = rng.startOffset;\r\n      node = container;\r\n      if (container.nodeType === 3) {\r\n        if (offset !== container.nodeValue.length) {\r\n          hasContentAfter = true;\r\n        }\r\n        node = node.parentNode;\r\n      }\r\n      while (node) {\r\n        if (matchNode(editor, node, name, vars, similar)) {\r\n          formatNode = node;\r\n          break;\r\n        }\r\n        if (node.nextSibling) {\r\n          hasContentAfter = true;\r\n        }\r\n        parents.push(node);\r\n        node = node.parentNode;\r\n      }\r\n      if (!formatNode) {\r\n        return;\r\n      }\r\n      if (hasContentAfter) {\r\n        var bookmark = selection.getBookmark();\r\n        rng.collapse(true);\r\n        var expandedRng = expandRng(editor, rng, editor.formatter.get(name), true);\r\n        expandedRng = split(expandedRng);\r\n        editor.formatter.remove(name, vars, expandedRng, similar);\r\n        selection.moveToBookmark(bookmark);\r\n      } else {\r\n        var caretContainer = getParentCaretContainer(editor.getBody(), formatNode);\r\n        var newCaretContainer = createCaretContainer(false).dom;\r\n        insertCaretContainerNode(editor, newCaretContainer, caretContainer !== null ? caretContainer : formatNode);\r\n        var cleanedFormatNode = cleanFormatNode(editor, newCaretContainer, formatNode, name, vars, similar);\r\n        var caretTextNode = insertFormatNodesIntoCaretContainer(parents.concat(cleanedFormatNode.toArray()), newCaretContainer);\r\n        removeCaretContainerNode(editor, caretContainer, false);\r\n        selection.setCursorLocation(caretTextNode, 1);\r\n        if (dom.isEmpty(formatNode)) {\r\n          dom.remove(formatNode);\r\n        }\r\n      }\r\n    };\r\n    var disableCaretContainer = function (editor, keyCode) {\r\n      var selection = editor.selection, body = editor.getBody();\r\n      removeCaretContainer(editor, null, false);\r\n      if ((keyCode === 8 || keyCode === 46) && selection.isCollapsed() && selection.getStart().innerHTML === ZWSP) {\r\n        removeCaretContainer(editor, getParentCaretContainer(body, selection.getStart()));\r\n      }\r\n      if (keyCode === 37 || keyCode === 39) {\r\n        removeCaretContainer(editor, getParentCaretContainer(body, selection.getStart()));\r\n      }\r\n    };\r\n    var setup$k = function (editor) {\r\n      editor.on('mouseup keydown', function (e) {\r\n        disableCaretContainer(editor, e.keyCode);\r\n      });\r\n    };\r\n    var replaceWithCaretFormat = function (targetNode, formatNodes) {\r\n      var caretContainer = createCaretContainer(false);\r\n      var innerMost = insertFormatNodesIntoCaretContainer(formatNodes, caretContainer.dom);\r\n      before$4(SugarElement.fromDom(targetNode), caretContainer);\r\n      remove$7(SugarElement.fromDom(targetNode));\r\n      return CaretPosition(innerMost, 0);\r\n    };\r\n    var isFormatElement = function (editor, element) {\r\n      var inlineElements = editor.schema.getTextInlineElements();\r\n      return has$2(inlineElements, name(element)) && !isCaretNode(element.dom) && !isBogus$2(element.dom);\r\n    };\r\n    var isEmptyCaretFormatElement = function (element) {\r\n      return isCaretNode(element.dom) && isCaretContainerEmpty(element.dom);\r\n    };\r\n\r\n    var postProcessHooks = {};\r\n    var filter = filter$2;\r\n    var each$b = each$i;\r\n    var addPostProcessHook = function (name, hook) {\r\n      var hooks = postProcessHooks[name];\r\n      if (!hooks) {\r\n        postProcessHooks[name] = [];\r\n      }\r\n      postProcessHooks[name].push(hook);\r\n    };\r\n    var postProcess$1 = function (name, editor) {\r\n      each$b(postProcessHooks[name], function (hook) {\r\n        hook(editor);\r\n      });\r\n    };\r\n    addPostProcessHook('pre', function (editor) {\r\n      var rng = editor.selection.getRng();\r\n      var blocks;\r\n      var hasPreSibling = function (pre) {\r\n        return isPre(pre.previousSibling) && indexOf$1(blocks, pre.previousSibling) !== -1;\r\n      };\r\n      var joinPre = function (pre1, pre2) {\r\n        DomQuery(pre2).remove();\r\n        DomQuery(pre1).append('<br><br>').append(pre2.childNodes);\r\n      };\r\n      var isPre = matchNodeNames(['pre']);\r\n      if (!rng.collapsed) {\r\n        blocks = editor.selection.getSelectedBlocks();\r\n        each$b(filter(filter(blocks, isPre), hasPreSibling), function (pre) {\r\n          joinPre(pre.previousSibling, pre);\r\n        });\r\n      }\r\n    });\r\n\r\n    var each$a = Tools.each;\r\n    var isElementNode$1 = function (node) {\r\n      return isElement$5(node) && !isBookmarkNode$1(node) && !isCaretNode(node) && !isBogus$2(node);\r\n    };\r\n    var findElementSibling = function (node, siblingName) {\r\n      for (var sibling = node; sibling; sibling = sibling[siblingName]) {\r\n        if (isText$7(sibling) && isNotEmpty(sibling.data)) {\r\n          return node;\r\n        }\r\n        if (isElement$5(sibling) && !isBookmarkNode$1(sibling)) {\r\n          return sibling;\r\n        }\r\n      }\r\n      return node;\r\n    };\r\n    var mergeSiblingsNodes = function (dom, prev, next) {\r\n      var elementUtils = ElementUtils(dom);\r\n      if (prev && next) {\r\n        prev = findElementSibling(prev, 'previousSibling');\r\n        next = findElementSibling(next, 'nextSibling');\r\n        if (elementUtils.compare(prev, next)) {\r\n          for (var sibling = prev.nextSibling; sibling && sibling !== next;) {\r\n            var tmpSibling = sibling;\r\n            sibling = sibling.nextSibling;\r\n            prev.appendChild(tmpSibling);\r\n          }\r\n          dom.remove(next);\r\n          Tools.each(Tools.grep(next.childNodes), function (node) {\r\n            prev.appendChild(node);\r\n          });\r\n          return prev;\r\n        }\r\n      }\r\n      return next;\r\n    };\r\n    var mergeSiblings = function (dom, format, vars, node) {\r\n      if (node && format.merge_siblings !== false) {\r\n        var newNode = mergeSiblingsNodes(dom, getNonWhiteSpaceSibling(node), node);\r\n        mergeSiblingsNodes(dom, newNode, getNonWhiteSpaceSibling(newNode, true));\r\n      }\r\n    };\r\n    var clearChildStyles = function (dom, format, node) {\r\n      if (format.clear_child_styles) {\r\n        var selector = format.links ? '*:not(a)' : '*';\r\n        each$a(dom.select(selector, node), function (node) {\r\n          if (isElementNode$1(node)) {\r\n            each$a(format.styles, function (value, name) {\r\n              dom.setStyle(node, name, '');\r\n            });\r\n          }\r\n        });\r\n      }\r\n    };\r\n    var processChildElements = function (node, filter, process) {\r\n      each$a(node.childNodes, function (node) {\r\n        if (isElementNode$1(node)) {\r\n          if (filter(node)) {\r\n            process(node);\r\n          }\r\n          if (node.hasChildNodes()) {\r\n            processChildElements(node, filter, process);\r\n          }\r\n        }\r\n      });\r\n    };\r\n    var unwrapEmptySpan = function (dom, node) {\r\n      if (node.nodeName === 'SPAN' && dom.getAttribs(node).length === 0) {\r\n        dom.remove(node, true);\r\n      }\r\n    };\r\n    var hasStyle = function (dom, name) {\r\n      return function (node) {\r\n        return !!(node && getStyle(dom, node, name));\r\n      };\r\n    };\r\n    var applyStyle = function (dom, name, value) {\r\n      return function (node) {\r\n        dom.setStyle(node, name, value);\r\n        if (node.getAttribute('style') === '') {\r\n          node.removeAttribute('style');\r\n        }\r\n        unwrapEmptySpan(dom, node);\r\n      };\r\n    };\r\n\r\n    var removeResult = Adt.generate([\r\n      { keep: [] },\r\n      { rename: ['name'] },\r\n      { removed: [] }\r\n    ]);\r\n    var MCE_ATTR_RE = /^(src|href|style)$/;\r\n    var each$9 = Tools.each;\r\n    var isEq$2 = isEq$5;\r\n    var isTableCellOrRow = function (node) {\r\n      return /^(TR|TH|TD)$/.test(node.nodeName);\r\n    };\r\n    var isChildOfInlineParent = function (dom, node, parent) {\r\n      return dom.isChildOf(node, parent) && node !== parent && !dom.isBlock(parent);\r\n    };\r\n    var getContainer = function (ed, rng, start) {\r\n      var container = rng[start ? 'startContainer' : 'endContainer'];\r\n      var offset = rng[start ? 'startOffset' : 'endOffset'];\r\n      if (isElement$5(container)) {\r\n        var lastIdx = container.childNodes.length - 1;\r\n        if (!start && offset) {\r\n          offset--;\r\n        }\r\n        container = container.childNodes[offset > lastIdx ? lastIdx : offset];\r\n      }\r\n      if (isText$7(container) && start && offset >= container.nodeValue.length) {\r\n        container = new DomTreeWalker(container, ed.getBody()).next() || container;\r\n      }\r\n      if (isText$7(container) && !start && offset === 0) {\r\n        container = new DomTreeWalker(container, ed.getBody()).prev() || container;\r\n      }\r\n      return container;\r\n    };\r\n    var normalizeTableSelection = function (node, start) {\r\n      var prop = start ? 'firstChild' : 'lastChild';\r\n      if (isTableCellOrRow(node) && node[prop]) {\r\n        var childNode = node[prop];\r\n        if (node.nodeName === 'TR') {\r\n          return childNode[prop] || childNode;\r\n        } else {\r\n          return childNode;\r\n        }\r\n      }\r\n      return node;\r\n    };\r\n    var wrap$1 = function (dom, node, name, attrs) {\r\n      var wrapper = dom.create(name, attrs);\r\n      node.parentNode.insertBefore(wrapper, node);\r\n      wrapper.appendChild(node);\r\n      return wrapper;\r\n    };\r\n    var wrapWithSiblings = function (dom, node, next, name, attrs) {\r\n      var start = SugarElement.fromDom(node);\r\n      var wrapper = SugarElement.fromDom(dom.create(name, attrs));\r\n      var siblings = next ? nextSiblings(start) : prevSiblings(start);\r\n      append(wrapper, siblings);\r\n      if (next) {\r\n        before$4(start, wrapper);\r\n        prepend(wrapper, start);\r\n      } else {\r\n        after$3(start, wrapper);\r\n        append$1(wrapper, start);\r\n      }\r\n      return wrapper.dom;\r\n    };\r\n    var matchName = function (dom, node, format) {\r\n      if (isInlineFormat(format) && isEq$2(node, format.inline)) {\r\n        return true;\r\n      }\r\n      if (isBlockFormat(format) && isEq$2(node, format.block)) {\r\n        return true;\r\n      }\r\n      if (isSelectorFormat(format)) {\r\n        return isElement$5(node) && dom.is(node, format.selector);\r\n      }\r\n    };\r\n    var isColorFormatAndAnchor = function (node, format) {\r\n      return format.links && node.nodeName === 'A';\r\n    };\r\n    var find = function (dom, node, next, inc) {\r\n      var sibling = getNonWhiteSpaceSibling(node, next, inc);\r\n      return isNullable(sibling) || sibling.nodeName === 'BR' || dom.isBlock(sibling);\r\n    };\r\n    var removeNode = function (ed, node, format) {\r\n      var parentNode = node.parentNode;\r\n      var rootBlockElm;\r\n      var dom = ed.dom, forcedRootBlock = getForcedRootBlock(ed);\r\n      if (isBlockFormat(format)) {\r\n        if (!forcedRootBlock) {\r\n          if (dom.isBlock(node) && !dom.isBlock(parentNode)) {\r\n            if (!find(dom, node, false) && !find(dom, node.firstChild, true, true)) {\r\n              node.insertBefore(dom.create('br'), node.firstChild);\r\n            }\r\n            if (!find(dom, node, true) && !find(dom, node.lastChild, false, true)) {\r\n              node.appendChild(dom.create('br'));\r\n            }\r\n          }\r\n        } else {\r\n          if (parentNode === dom.getRoot()) {\r\n            if (!format.list_block || !isEq$2(node, format.list_block)) {\r\n              each$k(from(node.childNodes), function (node) {\r\n                if (isValid(ed, forcedRootBlock, node.nodeName.toLowerCase())) {\r\n                  if (!rootBlockElm) {\r\n                    rootBlockElm = wrap$1(dom, node, forcedRootBlock);\r\n                    dom.setAttribs(rootBlockElm, ed.settings.forced_root_block_attrs);\r\n                  } else {\r\n                    rootBlockElm.appendChild(node);\r\n                  }\r\n                } else {\r\n                  rootBlockElm = null;\r\n                }\r\n              });\r\n            }\r\n          }\r\n        }\r\n      }\r\n      if (isMixedFormat(format) && !isEq$2(format.inline, node)) {\r\n        return;\r\n      }\r\n      dom.remove(node, true);\r\n    };\r\n    var removeFormatInternal = function (ed, format, vars, node, compareNode) {\r\n      var stylesModified;\r\n      var dom = ed.dom;\r\n      if (!matchName(dom, node, format) && !isColorFormatAndAnchor(node, format)) {\r\n        return removeResult.keep();\r\n      }\r\n      var elm = node;\r\n      if (isInlineFormat(format) && format.remove === 'all' && isArray$1(format.preserve_attributes)) {\r\n        var attrsToPreserve = filter$4(dom.getAttribs(elm), function (attr) {\r\n          return contains$3(format.preserve_attributes, attr.name.toLowerCase());\r\n        });\r\n        dom.removeAllAttribs(elm);\r\n        each$k(attrsToPreserve, function (attr) {\r\n          return dom.setAttrib(elm, attr.name, attr.value);\r\n        });\r\n        if (attrsToPreserve.length > 0) {\r\n          return removeResult.rename('span');\r\n        }\r\n      }\r\n      if (format.remove !== 'all') {\r\n        each$9(format.styles, function (value, name) {\r\n          value = normalizeStyleValue(dom, replaceVars(value, vars), name + '');\r\n          if (isNumber(name)) {\r\n            name = value;\r\n            compareNode = null;\r\n          }\r\n          if (format.remove_similar || (!compareNode || isEq$2(getStyle(dom, compareNode, name), value))) {\r\n            dom.setStyle(elm, name, '');\r\n          }\r\n          stylesModified = true;\r\n        });\r\n        if (stylesModified && dom.getAttrib(elm, 'style') === '') {\r\n          elm.removeAttribute('style');\r\n          elm.removeAttribute('data-mce-style');\r\n        }\r\n        each$9(format.attributes, function (value, name) {\r\n          var valueOut;\r\n          value = replaceVars(value, vars);\r\n          if (isNumber(name)) {\r\n            name = value;\r\n            compareNode = null;\r\n          }\r\n          if (format.remove_similar || (!compareNode || isEq$2(dom.getAttrib(compareNode, name), value))) {\r\n            if (name === 'class') {\r\n              value = dom.getAttrib(elm, name);\r\n              if (value) {\r\n                valueOut = '';\r\n                each$k(value.split(/\\s+/), function (cls) {\r\n                  if (/mce\\-\\w+/.test(cls)) {\r\n                    valueOut += (valueOut ? ' ' : '') + cls;\r\n                  }\r\n                });\r\n                if (valueOut) {\r\n                  dom.setAttrib(elm, name, valueOut);\r\n                  return;\r\n                }\r\n              }\r\n            }\r\n            if (MCE_ATTR_RE.test(name)) {\r\n              elm.removeAttribute('data-mce-' + name);\r\n            }\r\n            if (name === 'style' && matchNodeNames(['li'])(elm) && dom.getStyle(elm, 'list-style-type') === 'none') {\r\n              elm.removeAttribute(name);\r\n              dom.setStyle(elm, 'list-style-type', 'none');\r\n              return;\r\n            }\r\n            if (name === 'class') {\r\n              elm.removeAttribute('className');\r\n            }\r\n            elm.removeAttribute(name);\r\n          }\r\n        });\r\n        each$9(format.classes, function (value) {\r\n          value = replaceVars(value, vars);\r\n          if (!compareNode || dom.hasClass(compareNode, value)) {\r\n            dom.removeClass(elm, value);\r\n          }\r\n        });\r\n        var attrs = dom.getAttribs(elm);\r\n        for (var i = 0; i < attrs.length; i++) {\r\n          var attrName = attrs[i].nodeName;\r\n          if (attrName.indexOf('_') !== 0 && attrName.indexOf('data-') !== 0) {\r\n            return removeResult.keep();\r\n          }\r\n        }\r\n      }\r\n      if (format.remove !== 'none') {\r\n        removeNode(ed, elm, format);\r\n        return removeResult.removed();\r\n      }\r\n      return removeResult.keep();\r\n    };\r\n    var removeFormat$1 = function (ed, format, vars, node, compareNode) {\r\n      return removeFormatInternal(ed, format, vars, node, compareNode).fold(never, function (newName) {\r\n        ed.dom.rename(node, newName);\r\n        return true;\r\n      }, always);\r\n    };\r\n    var findFormatRoot = function (editor, container, name, vars, similar) {\r\n      var formatRoot;\r\n      each$k(getParents$2(editor.dom, container.parentNode).reverse(), function (parent) {\r\n        if (!formatRoot && parent.id !== '_start' && parent.id !== '_end') {\r\n          var format = matchNode(editor, parent, name, vars, similar);\r\n          if (format && format.split !== false) {\r\n            formatRoot = parent;\r\n          }\r\n        }\r\n      });\r\n      return formatRoot;\r\n    };\r\n    var removeFormatFromClone = function (editor, format, vars, clone) {\r\n      return removeFormatInternal(editor, format, vars, clone, clone).fold(constant(clone), function (newName) {\r\n        var fragment = editor.dom.createFragment();\r\n        fragment.appendChild(clone);\r\n        return editor.dom.rename(clone, newName);\r\n      }, constant(null));\r\n    };\r\n    var wrapAndSplit = function (editor, formatList, formatRoot, container, target, split, format, vars) {\r\n      var clone, lastClone, firstClone;\r\n      var dom = editor.dom;\r\n      if (formatRoot) {\r\n        var formatRootParent = formatRoot.parentNode;\r\n        for (var parent_1 = container.parentNode; parent_1 && parent_1 !== formatRootParent; parent_1 = parent_1.parentNode) {\r\n          clone = dom.clone(parent_1, false);\r\n          for (var i = 0; i < formatList.length; i++) {\r\n            clone = removeFormatFromClone(editor, formatList[i], vars, clone);\r\n            if (clone === null) {\r\n              break;\r\n            }\r\n          }\r\n          if (clone) {\r\n            if (lastClone) {\r\n              clone.appendChild(lastClone);\r\n            }\r\n            if (!firstClone) {\r\n              firstClone = clone;\r\n            }\r\n            lastClone = clone;\r\n          }\r\n        }\r\n        if (split && (!format.mixed || !dom.isBlock(formatRoot))) {\r\n          container = dom.split(formatRoot, container);\r\n        }\r\n        if (lastClone) {\r\n          target.parentNode.insertBefore(lastClone, target);\r\n          firstClone.appendChild(target);\r\n          if (isInlineFormat(format)) {\r\n            mergeSiblings(dom, format, vars, lastClone);\r\n          }\r\n        }\r\n      }\r\n      return container;\r\n    };\r\n    var remove$1 = function (ed, name, vars, node, similar) {\r\n      var formatList = ed.formatter.get(name);\r\n      var format = formatList[0];\r\n      var contentEditable = true;\r\n      var dom = ed.dom;\r\n      var selection = ed.selection;\r\n      var splitToFormatRoot = function (container) {\r\n        var formatRoot = findFormatRoot(ed, container, name, vars, similar);\r\n        return wrapAndSplit(ed, formatList, formatRoot, container, container, true, format, vars);\r\n      };\r\n      var isRemoveBookmarkNode = function (node) {\r\n        return isBookmarkNode$1(node) && isElement$5(node) && (node.id === '_start' || node.id === '_end');\r\n      };\r\n      var removeNodeFormat = function (node) {\r\n        return exists(formatList, function (fmt) {\r\n          return removeFormat$1(ed, fmt, vars, node, node);\r\n        });\r\n      };\r\n      var process = function (node) {\r\n        var lastContentEditable = true;\r\n        var hasContentEditableState = false;\r\n        if (isElement$5(node) && dom.getContentEditable(node)) {\r\n          lastContentEditable = contentEditable;\r\n          contentEditable = dom.getContentEditable(node) === 'true';\r\n          hasContentEditableState = true;\r\n        }\r\n        var children = from(node.childNodes);\r\n        if (contentEditable && !hasContentEditableState) {\r\n          var removed = removeNodeFormat(node);\r\n          var currentNodeMatches = removed || exists(formatList, function (f) {\r\n            return matchName$1(dom, node, f);\r\n          });\r\n          var parentNode = node.parentNode;\r\n          if (!currentNodeMatches && isNonNullable(parentNode) && shouldExpandToSelector(format)) {\r\n            removeNodeFormat(parentNode);\r\n          }\r\n        }\r\n        if (format.deep) {\r\n          if (children.length) {\r\n            for (var i = 0; i < children.length; i++) {\r\n              process(children[i]);\r\n            }\r\n            if (hasContentEditableState) {\r\n              contentEditable = lastContentEditable;\r\n            }\r\n          }\r\n        }\r\n        var textDecorations = [\r\n          'underline',\r\n          'line-through',\r\n          'overline'\r\n        ];\r\n        each$k(textDecorations, function (decoration) {\r\n          if (isElement$5(node) && ed.dom.getStyle(node, 'text-decoration') === decoration && node.parentNode && getTextDecoration(dom, node.parentNode) === decoration) {\r\n            removeFormat$1(ed, {\r\n              deep: false,\r\n              exact: true,\r\n              inline: 'span',\r\n              styles: { textDecoration: decoration }\r\n            }, null, node);\r\n          }\r\n        });\r\n      };\r\n      var unwrap = function (start) {\r\n        var node = dom.get(start ? '_start' : '_end');\r\n        var out = node[start ? 'firstChild' : 'lastChild'];\r\n        if (isRemoveBookmarkNode(out)) {\r\n          out = out[start ? 'firstChild' : 'lastChild'];\r\n        }\r\n        if (isText$7(out) && out.data.length === 0) {\r\n          out = start ? node.previousSibling || node.nextSibling : node.nextSibling || node.previousSibling;\r\n        }\r\n        dom.remove(node, true);\r\n        return out;\r\n      };\r\n      var removeRngStyle = function (rng) {\r\n        var startContainer, endContainer;\r\n        var expandedRng = expandRng(ed, rng, formatList, rng.collapsed);\r\n        if (format.split) {\r\n          expandedRng = split(expandedRng);\r\n          startContainer = getContainer(ed, expandedRng, true);\r\n          endContainer = getContainer(ed, expandedRng);\r\n          if (startContainer !== endContainer) {\r\n            startContainer = normalizeTableSelection(startContainer, true);\r\n            endContainer = normalizeTableSelection(endContainer, false);\r\n            if (isChildOfInlineParent(dom, startContainer, endContainer)) {\r\n              var marker = Optional.from(startContainer.firstChild).getOr(startContainer);\r\n              splitToFormatRoot(wrapWithSiblings(dom, marker, true, 'span', {\r\n                'id': '_start',\r\n                'data-mce-type': 'bookmark'\r\n              }));\r\n              unwrap(true);\r\n              return;\r\n            }\r\n            if (isChildOfInlineParent(dom, endContainer, startContainer)) {\r\n              var marker = Optional.from(endContainer.lastChild).getOr(endContainer);\r\n              splitToFormatRoot(wrapWithSiblings(dom, marker, false, 'span', {\r\n                'id': '_end',\r\n                'data-mce-type': 'bookmark'\r\n              }));\r\n              unwrap(false);\r\n              return;\r\n            }\r\n            startContainer = wrap$1(dom, startContainer, 'span', {\r\n              'id': '_start',\r\n              'data-mce-type': 'bookmark'\r\n            });\r\n            endContainer = wrap$1(dom, endContainer, 'span', {\r\n              'id': '_end',\r\n              'data-mce-type': 'bookmark'\r\n            });\r\n            var newRng = dom.createRng();\r\n            newRng.setStartAfter(startContainer);\r\n            newRng.setEndBefore(endContainer);\r\n            walk$2(dom, newRng, function (nodes) {\r\n              each$k(nodes, function (n) {\r\n                if (!isBookmarkNode$1(n) && !isBookmarkNode$1(n.parentNode)) {\r\n                  splitToFormatRoot(n);\r\n                }\r\n              });\r\n            });\r\n            splitToFormatRoot(startContainer);\r\n            splitToFormatRoot(endContainer);\r\n            startContainer = unwrap(true);\r\n            endContainer = unwrap();\r\n          } else {\r\n            startContainer = endContainer = splitToFormatRoot(startContainer);\r\n          }\r\n          expandedRng.startContainer = startContainer.parentNode ? startContainer.parentNode : startContainer;\r\n          expandedRng.startOffset = dom.nodeIndex(startContainer);\r\n          expandedRng.endContainer = endContainer.parentNode ? endContainer.parentNode : endContainer;\r\n          expandedRng.endOffset = dom.nodeIndex(endContainer) + 1;\r\n        }\r\n        walk$2(dom, expandedRng, function (nodes) {\r\n          each$k(nodes, process);\r\n        });\r\n      };\r\n      if (node) {\r\n        if (isNode(node)) {\r\n          var rng = dom.createRng();\r\n          rng.setStartBefore(node);\r\n          rng.setEndAfter(node);\r\n          removeRngStyle(rng);\r\n        } else {\r\n          removeRngStyle(node);\r\n        }\r\n        fireFormatRemove(ed, name, node, vars);\r\n        return;\r\n      }\r\n      if (dom.getContentEditable(selection.getNode()) === 'false') {\r\n        node = selection.getNode();\r\n        for (var i = 0; i < formatList.length; i++) {\r\n          if (formatList[i].ceFalseOverride) {\r\n            if (removeFormat$1(ed, formatList[i], vars, node, node)) {\r\n              break;\r\n            }\r\n          }\r\n        }\r\n        fireFormatRemove(ed, name, node, vars);\r\n        return;\r\n      }\r\n      if (!selection.isCollapsed() || !isInlineFormat(format) || getCellsFromEditor(ed).length) {\r\n        preserve(selection, true, function () {\r\n          runOnRanges(ed, removeRngStyle);\r\n        });\r\n        if (isInlineFormat(format) && match$2(ed, name, vars, selection.getStart())) {\r\n          moveStart(dom, selection, selection.getRng());\r\n        }\r\n        ed.nodeChanged();\r\n      } else {\r\n        removeCaretFormat(ed, name, vars, similar);\r\n      }\r\n      fireFormatRemove(ed, name, node, vars);\r\n    };\r\n\r\n    var each$8 = Tools.each;\r\n    var mergeTextDecorationsAndColor = function (dom, format, vars, node) {\r\n      var processTextDecorationsAndColor = function (n) {\r\n        if (n.nodeType === 1 && n.parentNode && n.parentNode.nodeType === 1) {\r\n          var textDecoration = getTextDecoration(dom, n.parentNode);\r\n          if (dom.getStyle(n, 'color') && textDecoration) {\r\n            dom.setStyle(n, 'text-decoration', textDecoration);\r\n          } else if (dom.getStyle(n, 'text-decoration') === textDecoration) {\r\n            dom.setStyle(n, 'text-decoration', null);\r\n          }\r\n        }\r\n      };\r\n      if (format.styles && (format.styles.color || format.styles.textDecoration)) {\r\n        Tools.walk(node, processTextDecorationsAndColor, 'childNodes');\r\n        processTextDecorationsAndColor(node);\r\n      }\r\n    };\r\n    var mergeBackgroundColorAndFontSize = function (dom, format, vars, node) {\r\n      if (format.styles && format.styles.backgroundColor) {\r\n        processChildElements(node, hasStyle(dom, 'fontSize'), applyStyle(dom, 'backgroundColor', replaceVars(format.styles.backgroundColor, vars)));\r\n      }\r\n    };\r\n    var mergeSubSup = function (dom, format, vars, node) {\r\n      if (isInlineFormat(format) && (format.inline === 'sub' || format.inline === 'sup')) {\r\n        processChildElements(node, hasStyle(dom, 'fontSize'), applyStyle(dom, 'fontSize', ''));\r\n        dom.remove(dom.select(format.inline === 'sup' ? 'sub' : 'sup', node), true);\r\n      }\r\n    };\r\n    var mergeWithChildren = function (editor, formatList, vars, node) {\r\n      each$8(formatList, function (format) {\r\n        if (isInlineFormat(format)) {\r\n          each$8(editor.dom.select(format.inline, node), function (child) {\r\n            if (!isElementNode$1(child)) {\r\n              return;\r\n            }\r\n            removeFormat$1(editor, format, vars, child, format.exact ? child : null);\r\n          });\r\n        }\r\n        clearChildStyles(editor.dom, format, node);\r\n      });\r\n    };\r\n    var mergeWithParents = function (editor, format, name, vars, node) {\r\n      if (matchNode(editor, node.parentNode, name, vars)) {\r\n        if (removeFormat$1(editor, format, vars, node)) {\r\n          return;\r\n        }\r\n      }\r\n      if (format.merge_with_parents) {\r\n        editor.dom.getParent(node.parentNode, function (parent) {\r\n          if (matchNode(editor, parent, name, vars)) {\r\n            removeFormat$1(editor, format, vars, node);\r\n            return true;\r\n          }\r\n        });\r\n      }\r\n    };\r\n\r\n    var each$7 = Tools.each;\r\n    var isElementNode = function (node) {\r\n      return isElement$5(node) && !isBookmarkNode$1(node) && !isCaretNode(node) && !isBogus$2(node);\r\n    };\r\n    var canFormatBR = function (editor, format, node, parentName) {\r\n      if (canFormatEmptyLines(editor) && isInlineFormat(format)) {\r\n        var validBRParentElements = getTextRootBlockElements(editor.schema);\r\n        var hasCaretNodeSibling = sibling(SugarElement.fromDom(node), function (sibling) {\r\n          return isCaretNode(sibling.dom);\r\n        });\r\n        return hasNonNullableKey(validBRParentElements, parentName) && isEmpty$2(SugarElement.fromDom(node.parentNode), false) && !hasCaretNodeSibling;\r\n      } else {\r\n        return false;\r\n      }\r\n    };\r\n    var applyFormat$1 = function (ed, name, vars, node) {\r\n      var formatList = ed.formatter.get(name);\r\n      var format = formatList[0];\r\n      var isCollapsed = !node && ed.selection.isCollapsed();\r\n      var dom = ed.dom;\r\n      var selection = ed.selection;\r\n      var setElementFormat = function (elm, fmt) {\r\n        if (fmt === void 0) {\r\n          fmt = format;\r\n        }\r\n        if (isFunction(fmt.onformat)) {\r\n          fmt.onformat(elm, fmt, vars, node);\r\n        }\r\n        each$7(fmt.styles, function (value, name) {\r\n          dom.setStyle(elm, name, replaceVars(value, vars));\r\n        });\r\n        if (fmt.styles) {\r\n          var styleVal = dom.getAttrib(elm, 'style');\r\n          if (styleVal) {\r\n            dom.setAttrib(elm, 'data-mce-style', styleVal);\r\n          }\r\n        }\r\n        each$7(fmt.attributes, function (value, name) {\r\n          dom.setAttrib(elm, name, replaceVars(value, vars));\r\n        });\r\n        each$7(fmt.classes, function (value) {\r\n          value = replaceVars(value, vars);\r\n          if (!dom.hasClass(elm, value)) {\r\n            dom.addClass(elm, value);\r\n          }\r\n        });\r\n      };\r\n      var applyNodeStyle = function (formatList, node) {\r\n        var found = false;\r\n        each$7(formatList, function (format) {\r\n          if (!isSelectorFormat(format)) {\r\n            return false;\r\n          }\r\n          if (isNonNullable(format.collapsed) && format.collapsed !== isCollapsed) {\r\n            return;\r\n          }\r\n          if (dom.is(node, format.selector) && !isCaretNode(node)) {\r\n            setElementFormat(node, format);\r\n            found = true;\r\n            return false;\r\n          }\r\n        });\r\n        return found;\r\n      };\r\n      var createWrapElement = function (wrapName) {\r\n        if (isString$1(wrapName)) {\r\n          var wrapElm = dom.create(wrapName);\r\n          setElementFormat(wrapElm);\r\n          return wrapElm;\r\n        } else {\r\n          return null;\r\n        }\r\n      };\r\n      var applyRngStyle = function (dom, rng, nodeSpecific) {\r\n        var newWrappers = [];\r\n        var contentEditable = true;\r\n        var wrapName = format.inline || format.block;\r\n        var wrapElm = createWrapElement(wrapName);\r\n        walk$2(dom, rng, function (nodes) {\r\n          var currentWrapElm;\r\n          var process = function (node) {\r\n            var hasContentEditableState = false;\r\n            var lastContentEditable = contentEditable;\r\n            var nodeName = node.nodeName.toLowerCase();\r\n            var parentNode = node.parentNode;\r\n            var parentName = parentNode.nodeName.toLowerCase();\r\n            if (isElement$5(node) && dom.getContentEditable(node)) {\r\n              lastContentEditable = contentEditable;\r\n              contentEditable = dom.getContentEditable(node) === 'true';\r\n              hasContentEditableState = true;\r\n            }\r\n            if (isBr$5(node) && !canFormatBR(ed, format, node, parentName)) {\r\n              currentWrapElm = null;\r\n              if (isBlockFormat(format)) {\r\n                dom.remove(node);\r\n              }\r\n              return;\r\n            }\r\n            if (isBlockFormat(format) && format.wrapper && matchNode(ed, node, name, vars)) {\r\n              currentWrapElm = null;\r\n              return;\r\n            }\r\n            if (contentEditable && !hasContentEditableState && isBlockFormat(format) && !format.wrapper && isTextBlock$1(ed, nodeName) && isValid(ed, parentName, wrapName)) {\r\n              var elm = dom.rename(node, wrapName);\r\n              setElementFormat(elm);\r\n              newWrappers.push(elm);\r\n              currentWrapElm = null;\r\n              return;\r\n            }\r\n            if (isSelectorFormat(format)) {\r\n              var found = applyNodeStyle(formatList, node);\r\n              if (!found && isNonNullable(parentNode) && shouldExpandToSelector(format)) {\r\n                found = applyNodeStyle(formatList, parentNode);\r\n              }\r\n              if (!isInlineFormat(format) || found) {\r\n                currentWrapElm = null;\r\n                return;\r\n              }\r\n            }\r\n            if (contentEditable && !hasContentEditableState && isValid(ed, wrapName, nodeName) && isValid(ed, parentName, wrapName) && !(!nodeSpecific && isText$7(node) && isZwsp(node.data)) && !isCaretNode(node) && (!isInlineFormat(format) || !dom.isBlock(node))) {\r\n              if (!currentWrapElm) {\r\n                currentWrapElm = dom.clone(wrapElm, false);\r\n                node.parentNode.insertBefore(currentWrapElm, node);\r\n                newWrappers.push(currentWrapElm);\r\n              }\r\n              currentWrapElm.appendChild(node);\r\n            } else {\r\n              currentWrapElm = null;\r\n              each$k(from(node.childNodes), process);\r\n              if (hasContentEditableState) {\r\n                contentEditable = lastContentEditable;\r\n              }\r\n              currentWrapElm = null;\r\n            }\r\n          };\r\n          each$k(nodes, process);\r\n        });\r\n        if (format.links === true) {\r\n          each$k(newWrappers, function (node) {\r\n            var process = function (node) {\r\n              if (node.nodeName === 'A') {\r\n                setElementFormat(node, format);\r\n              }\r\n              each$k(from(node.childNodes), process);\r\n            };\r\n            process(node);\r\n          });\r\n        }\r\n        each$k(newWrappers, function (node) {\r\n          var getChildCount = function (node) {\r\n            var count = 0;\r\n            each$k(node.childNodes, function (node) {\r\n              if (!isEmptyTextNode$1(node) && !isBookmarkNode$1(node)) {\r\n                count++;\r\n              }\r\n            });\r\n            return count;\r\n          };\r\n          var mergeStyles = function (node) {\r\n            var childElement = find$3(node.childNodes, isElementNode).filter(function (child) {\r\n              return matchName$1(dom, child, format);\r\n            });\r\n            return childElement.map(function (child) {\r\n              var clone = dom.clone(child, false);\r\n              setElementFormat(clone);\r\n              dom.replace(clone, node, true);\r\n              dom.remove(child, true);\r\n              return clone;\r\n            }).getOr(node);\r\n          };\r\n          var childCount = getChildCount(node);\r\n          if ((newWrappers.length > 1 || !dom.isBlock(node)) && childCount === 0) {\r\n            dom.remove(node, true);\r\n            return;\r\n          }\r\n          if (isInlineFormat(format) || isBlockFormat(format) && format.wrapper) {\r\n            if (!format.exact && childCount === 1) {\r\n              node = mergeStyles(node);\r\n            }\r\n            mergeWithChildren(ed, formatList, vars, node);\r\n            mergeWithParents(ed, format, name, vars, node);\r\n            mergeBackgroundColorAndFontSize(dom, format, vars, node);\r\n            mergeTextDecorationsAndColor(dom, format, vars, node);\r\n            mergeSubSup(dom, format, vars, node);\r\n            mergeSiblings(dom, format, vars, node);\r\n          }\r\n        });\r\n      };\r\n      if (dom.getContentEditable(selection.getNode()) === 'false') {\r\n        node = selection.getNode();\r\n        for (var i = 0, l = formatList.length; i < l; i++) {\r\n          var formatItem = formatList[i];\r\n          if (formatItem.ceFalseOverride && isSelectorFormat(formatItem) && dom.is(node, formatItem.selector)) {\r\n            setElementFormat(node, formatItem);\r\n            break;\r\n          }\r\n        }\r\n        fireFormatApply(ed, name, node, vars);\r\n        return;\r\n      }\r\n      if (format) {\r\n        if (node) {\r\n          if (isNode(node)) {\r\n            if (!applyNodeStyle(formatList, node)) {\r\n              var rng = dom.createRng();\r\n              rng.setStartBefore(node);\r\n              rng.setEndAfter(node);\r\n              applyRngStyle(dom, expandRng(ed, rng, formatList), true);\r\n            }\r\n          } else {\r\n            applyRngStyle(dom, node, true);\r\n          }\r\n        } else {\r\n          if (!isCollapsed || !isInlineFormat(format) || getCellsFromEditor(ed).length) {\r\n            var curSelNode = selection.getNode();\r\n            var firstFormat = formatList[0];\r\n            if (!ed.settings.forced_root_block && firstFormat.defaultBlock && !dom.getParent(curSelNode, dom.isBlock)) {\r\n              applyFormat$1(ed, firstFormat.defaultBlock);\r\n            }\r\n            selection.setRng(normalize(selection.getRng()));\r\n            preserve(selection, true, function () {\r\n              runOnRanges(ed, function (selectionRng, fake) {\r\n                var expandedRng = fake ? selectionRng : expandRng(ed, selectionRng, formatList);\r\n                applyRngStyle(dom, expandedRng, false);\r\n              });\r\n            });\r\n            moveStart(dom, selection, selection.getRng());\r\n            ed.nodeChanged();\r\n          } else {\r\n            applyCaretFormat(ed, name, vars);\r\n          }\r\n        }\r\n        postProcess$1(name, ed);\r\n      }\r\n      fireFormatApply(ed, name, node, vars);\r\n    };\r\n\r\n    var hasVars = function (value) {\r\n      return has$2(value, 'vars');\r\n    };\r\n    var setup$j = function (registeredFormatListeners, editor) {\r\n      registeredFormatListeners.set({});\r\n      editor.on('NodeChange', function (e) {\r\n        updateAndFireChangeCallbacks(editor, e.element, registeredFormatListeners.get());\r\n      });\r\n      editor.on('FormatApply FormatRemove', function (e) {\r\n        var element = Optional.from(e.node).map(function (nodeOrRange) {\r\n          return isNode(nodeOrRange) ? nodeOrRange : nodeOrRange.startContainer;\r\n        }).bind(function (node) {\r\n          return isElement$5(node) ? Optional.some(node) : Optional.from(node.parentElement);\r\n        }).getOrThunk(function () {\r\n          return fallbackElement(editor);\r\n        });\r\n        updateAndFireChangeCallbacks(editor, element, registeredFormatListeners.get());\r\n      });\r\n    };\r\n    var fallbackElement = function (editor) {\r\n      return editor.selection.getStart();\r\n    };\r\n    var matchingNode = function (editor, parents, format, similar, vars) {\r\n      var isMatchingNode = function (node) {\r\n        var matchingFormat = editor.formatter.matchNode(node, format, vars !== null && vars !== void 0 ? vars : {}, similar);\r\n        return !isUndefined(matchingFormat);\r\n      };\r\n      var isUnableToMatch = function (node) {\r\n        if (matchesUnInheritedFormatSelector(editor, node, format)) {\r\n          return true;\r\n        } else {\r\n          if (!similar) {\r\n            return isNonNullable(editor.formatter.matchNode(node, format, vars, true));\r\n          } else {\r\n            return false;\r\n          }\r\n        }\r\n      };\r\n      return findUntil$1(parents, isMatchingNode, isUnableToMatch);\r\n    };\r\n    var getParents = function (editor, elm) {\r\n      var element = elm !== null && elm !== void 0 ? elm : fallbackElement(editor);\r\n      return filter$4(getParents$2(editor.dom, element), function (node) {\r\n        return isElement$5(node) && !isBogus$2(node);\r\n      });\r\n    };\r\n    var updateAndFireChangeCallbacks = function (editor, elm, registeredCallbacks) {\r\n      var parents = getParents(editor, elm);\r\n      each$j(registeredCallbacks, function (data, format) {\r\n        var runIfChanged = function (spec) {\r\n          var match = matchingNode(editor, parents, format, spec.similar, hasVars(spec) ? spec.vars : undefined);\r\n          var isSet = match.isSome();\r\n          if (spec.state.get() !== isSet) {\r\n            spec.state.set(isSet);\r\n            var node_1 = match.getOr(elm);\r\n            if (hasVars(spec)) {\r\n              spec.callback(isSet, {\r\n                node: node_1,\r\n                format: format,\r\n                parents: parents\r\n              });\r\n            } else {\r\n              each$k(spec.callbacks, function (callback) {\r\n                return callback(isSet, {\r\n                  node: node_1,\r\n                  format: format,\r\n                  parents: parents\r\n                });\r\n              });\r\n            }\r\n          }\r\n        };\r\n        each$k([\r\n          data.withSimilar,\r\n          data.withoutSimilar\r\n        ], runIfChanged);\r\n        each$k(data.withVars, runIfChanged);\r\n      });\r\n    };\r\n    var addListeners = function (editor, registeredFormatListeners, formats, callback, similar, vars) {\r\n      var formatChangeItems = registeredFormatListeners.get();\r\n      each$k(formats.split(','), function (format) {\r\n        var group = get$9(formatChangeItems, format).getOrThunk(function () {\r\n          var base = {\r\n            withSimilar: {\r\n              state: Cell(false),\r\n              similar: true,\r\n              callbacks: []\r\n            },\r\n            withoutSimilar: {\r\n              state: Cell(false),\r\n              similar: false,\r\n              callbacks: []\r\n            },\r\n            withVars: []\r\n          };\r\n          formatChangeItems[format] = base;\r\n          return base;\r\n        });\r\n        var getCurrent = function () {\r\n          var parents = getParents(editor);\r\n          return matchingNode(editor, parents, format, similar, vars).isSome();\r\n        };\r\n        if (isUndefined(vars)) {\r\n          var toAppendTo = similar ? group.withSimilar : group.withoutSimilar;\r\n          toAppendTo.callbacks.push(callback);\r\n          if (toAppendTo.callbacks.length === 1) {\r\n            toAppendTo.state.set(getCurrent());\r\n          }\r\n        } else {\r\n          group.withVars.push({\r\n            state: Cell(getCurrent()),\r\n            similar: similar,\r\n            vars: vars,\r\n            callback: callback\r\n          });\r\n        }\r\n      });\r\n      registeredFormatListeners.set(formatChangeItems);\r\n    };\r\n    var removeListeners = function (registeredFormatListeners, formats, callback) {\r\n      var formatChangeItems = registeredFormatListeners.get();\r\n      each$k(formats.split(','), function (format) {\r\n        return get$9(formatChangeItems, format).each(function (group) {\r\n          formatChangeItems[format] = {\r\n            withSimilar: __assign(__assign({}, group.withSimilar), {\r\n              callbacks: filter$4(group.withSimilar.callbacks, function (cb) {\r\n                return cb !== callback;\r\n              })\r\n            }),\r\n            withoutSimilar: __assign(__assign({}, group.withoutSimilar), {\r\n              callbacks: filter$4(group.withoutSimilar.callbacks, function (cb) {\r\n                return cb !== callback;\r\n              })\r\n            }),\r\n            withVars: filter$4(group.withVars, function (item) {\r\n              return item.callback !== callback;\r\n            })\r\n          };\r\n        });\r\n      });\r\n      registeredFormatListeners.set(formatChangeItems);\r\n    };\r\n    var formatChangedInternal = function (editor, registeredFormatListeners, formats, callback, similar, vars) {\r\n      if (registeredFormatListeners.get() === null) {\r\n        setup$j(registeredFormatListeners, editor);\r\n      }\r\n      addListeners(editor, registeredFormatListeners, formats, callback, similar, vars);\r\n      return {\r\n        unbind: function () {\r\n          return removeListeners(registeredFormatListeners, formats, callback);\r\n        }\r\n      };\r\n    };\r\n\r\n    var toggle = function (editor, name, vars, node) {\r\n      var fmt = editor.formatter.get(name);\r\n      if (match$2(editor, name, vars, node) && (!('toggle' in fmt[0]) || fmt[0].toggle)) {\r\n        remove$1(editor, name, vars, node);\r\n      } else {\r\n        applyFormat$1(editor, name, vars, node);\r\n      }\r\n    };\r\n\r\n    var fromElements = function (elements, scope) {\r\n      var doc = scope || document;\r\n      var fragment = doc.createDocumentFragment();\r\n      each$k(elements, function (element) {\r\n        fragment.appendChild(element.dom);\r\n      });\r\n      return SugarElement.fromDom(fragment);\r\n    };\r\n\r\n    var tableModel = function (element, width, rows) {\r\n      return {\r\n        element: element,\r\n        width: width,\r\n        rows: rows\r\n      };\r\n    };\r\n    var tableRow = function (element, cells) {\r\n      return {\r\n        element: element,\r\n        cells: cells\r\n      };\r\n    };\r\n    var cellPosition = function (x, y) {\r\n      return {\r\n        x: x,\r\n        y: y\r\n      };\r\n    };\r\n    var getSpan = function (td, key) {\r\n      var value = parseInt(get$6(td, key), 10);\r\n      return isNaN(value) ? 1 : value;\r\n    };\r\n    var fillout = function (table, x, y, tr, td) {\r\n      var rowspan = getSpan(td, 'rowspan');\r\n      var colspan = getSpan(td, 'colspan');\r\n      var rows = table.rows;\r\n      for (var y2 = y; y2 < y + rowspan; y2++) {\r\n        if (!rows[y2]) {\r\n          rows[y2] = tableRow(deep$1(tr), []);\r\n        }\r\n        for (var x2 = x; x2 < x + colspan; x2++) {\r\n          var cells = rows[y2].cells;\r\n          cells[x2] = y2 === y && x2 === x ? td : shallow(td);\r\n        }\r\n      }\r\n    };\r\n    var cellExists = function (table, x, y) {\r\n      var rows = table.rows;\r\n      var cells = rows[y] ? rows[y].cells : [];\r\n      return !!cells[x];\r\n    };\r\n    var skipCellsX = function (table, x, y) {\r\n      while (cellExists(table, x, y)) {\r\n        x++;\r\n      }\r\n      return x;\r\n    };\r\n    var getWidth = function (rows) {\r\n      return foldl(rows, function (acc, row) {\r\n        return row.cells.length > acc ? row.cells.length : acc;\r\n      }, 0);\r\n    };\r\n    var findElementPos = function (table, element) {\r\n      var rows = table.rows;\r\n      for (var y = 0; y < rows.length; y++) {\r\n        var cells = rows[y].cells;\r\n        for (var x = 0; x < cells.length; x++) {\r\n          if (eq(cells[x], element)) {\r\n            return Optional.some(cellPosition(x, y));\r\n          }\r\n        }\r\n      }\r\n      return Optional.none();\r\n    };\r\n    var extractRows = function (table, sx, sy, ex, ey) {\r\n      var newRows = [];\r\n      var rows = table.rows;\r\n      for (var y = sy; y <= ey; y++) {\r\n        var cells = rows[y].cells;\r\n        var slice = sx < ex ? cells.slice(sx, ex + 1) : cells.slice(ex, sx + 1);\r\n        newRows.push(tableRow(rows[y].element, slice));\r\n      }\r\n      return newRows;\r\n    };\r\n    var subTable = function (table, startPos, endPos) {\r\n      var sx = startPos.x, sy = startPos.y;\r\n      var ex = endPos.x, ey = endPos.y;\r\n      var newRows = sy < ey ? extractRows(table, sx, sy, ex, ey) : extractRows(table, sx, ey, ex, sy);\r\n      return tableModel(table.element, getWidth(newRows), newRows);\r\n    };\r\n    var createDomTable = function (table, rows) {\r\n      var tableElement = shallow(table.element);\r\n      var tableBody = SugarElement.fromTag('tbody');\r\n      append(tableBody, rows);\r\n      append$1(tableElement, tableBody);\r\n      return tableElement;\r\n    };\r\n    var modelRowsToDomRows = function (table) {\r\n      return map$3(table.rows, function (row) {\r\n        var cells = map$3(row.cells, function (cell) {\r\n          var td = deep$1(cell);\r\n          remove$6(td, 'colspan');\r\n          remove$6(td, 'rowspan');\r\n          return td;\r\n        });\r\n        var tr = shallow(row.element);\r\n        append(tr, cells);\r\n        return tr;\r\n      });\r\n    };\r\n    var fromDom = function (tableElm) {\r\n      var table = tableModel(shallow(tableElm), 0, []);\r\n      each$k(descendants(tableElm, 'tr'), function (tr, y) {\r\n        each$k(descendants(tr, 'td,th'), function (td, x) {\r\n          fillout(table, skipCellsX(table, x, y), y, tr, td);\r\n        });\r\n      });\r\n      return tableModel(table.element, getWidth(table.rows), table.rows);\r\n    };\r\n    var toDom = function (table) {\r\n      return createDomTable(table, modelRowsToDomRows(table));\r\n    };\r\n    var subsection = function (table, startElement, endElement) {\r\n      return findElementPos(table, startElement).bind(function (startPos) {\r\n        return findElementPos(table, endElement).map(function (endPos) {\r\n          return subTable(table, startPos, endPos);\r\n        });\r\n      });\r\n    };\r\n\r\n    var findParentListContainer = function (parents) {\r\n      return find$3(parents, function (elm) {\r\n        return name(elm) === 'ul' || name(elm) === 'ol';\r\n      });\r\n    };\r\n    var getFullySelectedListWrappers = function (parents, rng) {\r\n      return find$3(parents, function (elm) {\r\n        return name(elm) === 'li' && hasAllContentsSelected(elm, rng);\r\n      }).fold(constant([]), function (_li) {\r\n        return findParentListContainer(parents).map(function (listCont) {\r\n          var listElm = SugarElement.fromTag(name(listCont));\r\n          var listStyles = filter$3(getAllRaw(listCont), function (_style, name) {\r\n            return startsWith(name, 'list-style');\r\n          });\r\n          setAll(listElm, listStyles);\r\n          return [\r\n            SugarElement.fromTag('li'),\r\n            listElm\r\n          ];\r\n        }).getOr([]);\r\n      });\r\n    };\r\n    var wrap = function (innerElm, elms) {\r\n      var wrapped = foldl(elms, function (acc, elm) {\r\n        append$1(elm, acc);\r\n        return elm;\r\n      }, innerElm);\r\n      return elms.length > 0 ? fromElements([wrapped]) : wrapped;\r\n    };\r\n    var directListWrappers = function (commonAnchorContainer) {\r\n      if (isListItem(commonAnchorContainer)) {\r\n        return parent(commonAnchorContainer).filter(isList).fold(constant([]), function (listElm) {\r\n          return [\r\n            commonAnchorContainer,\r\n            listElm\r\n          ];\r\n        });\r\n      } else {\r\n        return isList(commonAnchorContainer) ? [commonAnchorContainer] : [];\r\n      }\r\n    };\r\n    var getWrapElements = function (rootNode, rng) {\r\n      var commonAnchorContainer = SugarElement.fromDom(rng.commonAncestorContainer);\r\n      var parents = parentsAndSelf(commonAnchorContainer, rootNode);\r\n      var wrapElements = filter$4(parents, function (elm) {\r\n        return isInline$1(elm) || isHeading(elm);\r\n      });\r\n      var listWrappers = getFullySelectedListWrappers(parents, rng);\r\n      var allWrappers = wrapElements.concat(listWrappers.length ? listWrappers : directListWrappers(commonAnchorContainer));\r\n      return map$3(allWrappers, shallow);\r\n    };\r\n    var emptyFragment = function () {\r\n      return fromElements([]);\r\n    };\r\n    var getFragmentFromRange = function (rootNode, rng) {\r\n      return wrap(SugarElement.fromDom(rng.cloneContents()), getWrapElements(rootNode, rng));\r\n    };\r\n    var getParentTable = function (rootElm, cell) {\r\n      return ancestor$2(cell, 'table', curry(eq, rootElm));\r\n    };\r\n    var getTableFragment = function (rootNode, selectedTableCells) {\r\n      return getParentTable(rootNode, selectedTableCells[0]).bind(function (tableElm) {\r\n        var firstCell = selectedTableCells[0];\r\n        var lastCell = selectedTableCells[selectedTableCells.length - 1];\r\n        var fullTableModel = fromDom(tableElm);\r\n        return subsection(fullTableModel, firstCell, lastCell).map(function (sectionedTableModel) {\r\n          return fromElements([toDom(sectionedTableModel)]);\r\n        });\r\n      }).getOrThunk(emptyFragment);\r\n    };\r\n    var getSelectionFragment = function (rootNode, ranges) {\r\n      return ranges.length > 0 && ranges[0].collapsed ? emptyFragment() : getFragmentFromRange(rootNode, ranges[0]);\r\n    };\r\n    var read$3 = function (rootNode, ranges) {\r\n      var selectedCells = getCellsFromElementOrRanges(ranges, rootNode);\r\n      return selectedCells.length > 0 ? getTableFragment(rootNode, selectedCells) : getSelectionFragment(rootNode, ranges);\r\n    };\r\n\r\n    var trimLeadingCollapsibleText = function (text) {\r\n      return text.replace(/^[ \\f\\n\\r\\t\\v]+/, '');\r\n    };\r\n    var isCollapsibleWhitespace = function (text, index) {\r\n      return index >= 0 && index < text.length && isWhiteSpace(text.charAt(index));\r\n    };\r\n    var getInnerText = function (bin, shouldTrim) {\r\n      var text = trim$2(bin.innerText);\r\n      return shouldTrim ? trimLeadingCollapsibleText(text) : text;\r\n    };\r\n    var getContextNodeName = function (parentBlockOpt) {\r\n      return parentBlockOpt.map(function (block) {\r\n        return block.nodeName;\r\n      }).getOr('div').toLowerCase();\r\n    };\r\n    var getTextContent = function (editor) {\r\n      return Optional.from(editor.selection.getRng()).map(function (rng) {\r\n        var parentBlockOpt = Optional.from(editor.dom.getParent(rng.commonAncestorContainer, editor.dom.isBlock));\r\n        var body = editor.getBody();\r\n        var contextNodeName = getContextNodeName(parentBlockOpt);\r\n        var shouldTrimSpaces = Env.browser.isIE() && contextNodeName !== 'pre';\r\n        var bin = editor.dom.add(body, contextNodeName, {\r\n          'data-mce-bogus': 'all',\r\n          'style': 'overflow: hidden; opacity: 0;'\r\n        }, rng.cloneContents());\r\n        var text = getInnerText(bin, shouldTrimSpaces);\r\n        var nonRenderedText = trim$2(bin.textContent);\r\n        editor.dom.remove(bin);\r\n        if (isCollapsibleWhitespace(nonRenderedText, 0) || isCollapsibleWhitespace(nonRenderedText, nonRenderedText.length - 1)) {\r\n          var parentBlock = parentBlockOpt.getOr(body);\r\n          var parentBlockText = getInnerText(parentBlock, shouldTrimSpaces);\r\n          var textIndex = parentBlockText.indexOf(text);\r\n          if (textIndex === -1) {\r\n            return text;\r\n          } else {\r\n            var hasProceedingSpace = isCollapsibleWhitespace(parentBlockText, textIndex - 1);\r\n            var hasTrailingSpace = isCollapsibleWhitespace(parentBlockText, textIndex + text.length);\r\n            return (hasProceedingSpace ? ' ' : '') + text + (hasTrailingSpace ? ' ' : '');\r\n          }\r\n        } else {\r\n          return text;\r\n        }\r\n      }).getOr('');\r\n    };\r\n    var getSerializedContent = function (editor, args) {\r\n      var rng = editor.selection.getRng(), tmpElm = editor.dom.create('body');\r\n      var sel = editor.selection.getSel();\r\n      var ranges = processRanges(editor, getRanges(sel));\r\n      var fragment = args.contextual ? read$3(SugarElement.fromDom(editor.getBody()), ranges).dom : rng.cloneContents();\r\n      if (fragment) {\r\n        tmpElm.appendChild(fragment);\r\n      }\r\n      return editor.selection.serializer.serialize(tmpElm, args);\r\n    };\r\n    var setupArgs$1 = function (args, format) {\r\n      return __assign(__assign({}, args), {\r\n        format: format,\r\n        get: true,\r\n        selection: true\r\n      });\r\n    };\r\n    var getSelectedContentInternal = function (editor, format, args) {\r\n      if (args === void 0) {\r\n        args = {};\r\n      }\r\n      var defaultedArgs = setupArgs$1(args, format);\r\n      var updatedArgs = editor.fire('BeforeGetContent', defaultedArgs);\r\n      if (updatedArgs.isDefaultPrevented()) {\r\n        editor.fire('GetContent', updatedArgs);\r\n        return updatedArgs.content;\r\n      }\r\n      if (updatedArgs.format === 'text') {\r\n        return getTextContent(editor);\r\n      } else {\r\n        updatedArgs.getInner = true;\r\n        var content = getSerializedContent(editor, updatedArgs);\r\n        if (updatedArgs.format === 'tree') {\r\n          return content;\r\n        } else {\r\n          updatedArgs.content = editor.selection.isCollapsed() ? '' : content;\r\n          editor.fire('GetContent', updatedArgs);\r\n          return updatedArgs.content;\r\n        }\r\n      }\r\n    };\r\n\r\n    var KEEP = 0, INSERT = 1, DELETE = 2;\r\n    var diff = function (left, right) {\r\n      var size = left.length + right.length + 2;\r\n      var vDown = new Array(size);\r\n      var vUp = new Array(size);\r\n      var snake = function (start, end, diag) {\r\n        return {\r\n          start: start,\r\n          end: end,\r\n          diag: diag\r\n        };\r\n      };\r\n      var buildScript = function (start1, end1, start2, end2, script) {\r\n        var middle = getMiddleSnake(start1, end1, start2, end2);\r\n        if (middle === null || middle.start === end1 && middle.diag === end1 - end2 || middle.end === start1 && middle.diag === start1 - start2) {\r\n          var i = start1;\r\n          var j = start2;\r\n          while (i < end1 || j < end2) {\r\n            if (i < end1 && j < end2 && left[i] === right[j]) {\r\n              script.push([\r\n                KEEP,\r\n                left[i]\r\n              ]);\r\n              ++i;\r\n              ++j;\r\n            } else {\r\n              if (end1 - start1 > end2 - start2) {\r\n                script.push([\r\n                  DELETE,\r\n                  left[i]\r\n                ]);\r\n                ++i;\r\n              } else {\r\n                script.push([\r\n                  INSERT,\r\n                  right[j]\r\n                ]);\r\n                ++j;\r\n              }\r\n            }\r\n          }\r\n        } else {\r\n          buildScript(start1, middle.start, start2, middle.start - middle.diag, script);\r\n          for (var i2 = middle.start; i2 < middle.end; ++i2) {\r\n            script.push([\r\n              KEEP,\r\n              left[i2]\r\n            ]);\r\n          }\r\n          buildScript(middle.end, end1, middle.end - middle.diag, end2, script);\r\n        }\r\n      };\r\n      var buildSnake = function (start, diag, end1, end2) {\r\n        var end = start;\r\n        while (end - diag < end2 && end < end1 && left[end] === right[end - diag]) {\r\n          ++end;\r\n        }\r\n        return snake(start, end, diag);\r\n      };\r\n      var getMiddleSnake = function (start1, end1, start2, end2) {\r\n        var m = end1 - start1;\r\n        var n = end2 - start2;\r\n        if (m === 0 || n === 0) {\r\n          return null;\r\n        }\r\n        var delta = m - n;\r\n        var sum = n + m;\r\n        var offset = (sum % 2 === 0 ? sum : sum + 1) / 2;\r\n        vDown[1 + offset] = start1;\r\n        vUp[1 + offset] = end1 + 1;\r\n        var d, k, i, x, y;\r\n        for (d = 0; d <= offset; ++d) {\r\n          for (k = -d; k <= d; k += 2) {\r\n            i = k + offset;\r\n            if (k === -d || k !== d && vDown[i - 1] < vDown[i + 1]) {\r\n              vDown[i] = vDown[i + 1];\r\n            } else {\r\n              vDown[i] = vDown[i - 1] + 1;\r\n            }\r\n            x = vDown[i];\r\n            y = x - start1 + start2 - k;\r\n            while (x < end1 && y < end2 && left[x] === right[y]) {\r\n              vDown[i] = ++x;\r\n              ++y;\r\n            }\r\n            if (delta % 2 !== 0 && delta - d <= k && k <= delta + d) {\r\n              if (vUp[i - delta] <= vDown[i]) {\r\n                return buildSnake(vUp[i - delta], k + start1 - start2, end1, end2);\r\n              }\r\n            }\r\n          }\r\n          for (k = delta - d; k <= delta + d; k += 2) {\r\n            i = k + offset - delta;\r\n            if (k === delta - d || k !== delta + d && vUp[i + 1] <= vUp[i - 1]) {\r\n              vUp[i] = vUp[i + 1] - 1;\r\n            } else {\r\n              vUp[i] = vUp[i - 1];\r\n            }\r\n            x = vUp[i] - 1;\r\n            y = x - start1 + start2 - k;\r\n            while (x >= start1 && y >= start2 && left[x] === right[y]) {\r\n              vUp[i] = x--;\r\n              y--;\r\n            }\r\n            if (delta % 2 === 0 && -d <= k && k <= d) {\r\n              if (vUp[i] <= vDown[i + delta]) {\r\n                return buildSnake(vUp[i], k + start1 - start2, end1, end2);\r\n              }\r\n            }\r\n          }\r\n        }\r\n      };\r\n      var script = [];\r\n      buildScript(0, left.length, 0, right.length, script);\r\n      return script;\r\n    };\r\n\r\n    var getOuterHtml = function (elm) {\r\n      if (isElement$5(elm)) {\r\n        return elm.outerHTML;\r\n      } else if (isText$7(elm)) {\r\n        return Entities.encodeRaw(elm.data, false);\r\n      } else if (isComment(elm)) {\r\n        return '<!--' + elm.data + '-->';\r\n      }\r\n      return '';\r\n    };\r\n    var createFragment = function (html) {\r\n      var node;\r\n      var container = document.createElement('div');\r\n      var frag = document.createDocumentFragment();\r\n      if (html) {\r\n        container.innerHTML = html;\r\n      }\r\n      while (node = container.firstChild) {\r\n        frag.appendChild(node);\r\n      }\r\n      return frag;\r\n    };\r\n    var insertAt = function (elm, html, index) {\r\n      var fragment = createFragment(html);\r\n      if (elm.hasChildNodes() && index < elm.childNodes.length) {\r\n        var target = elm.childNodes[index];\r\n        target.parentNode.insertBefore(fragment, target);\r\n      } else {\r\n        elm.appendChild(fragment);\r\n      }\r\n    };\r\n    var removeAt = function (elm, index) {\r\n      if (elm.hasChildNodes() && index < elm.childNodes.length) {\r\n        var target = elm.childNodes[index];\r\n        target.parentNode.removeChild(target);\r\n      }\r\n    };\r\n    var applyDiff = function (diff, elm) {\r\n      var index = 0;\r\n      each$k(diff, function (action) {\r\n        if (action[0] === KEEP) {\r\n          index++;\r\n        } else if (action[0] === INSERT) {\r\n          insertAt(elm, action[1], index);\r\n          index++;\r\n        } else if (action[0] === DELETE) {\r\n          removeAt(elm, index);\r\n        }\r\n      });\r\n    };\r\n    var read$2 = function (elm) {\r\n      return filter$4(map$3(from(elm.childNodes), getOuterHtml), function (item) {\r\n        return item.length > 0;\r\n      });\r\n    };\r\n    var write = function (fragments, elm) {\r\n      var currentFragments = map$3(from(elm.childNodes), getOuterHtml);\r\n      applyDiff(diff(currentFragments, fragments), elm);\r\n      return elm;\r\n    };\r\n\r\n    var lazyTempDocument = cached(function () {\r\n      return document.implementation.createHTMLDocument('undo');\r\n    });\r\n    var hasIframes = function (html) {\r\n      return html.indexOf('</iframe>') !== -1;\r\n    };\r\n    var createFragmentedLevel = function (fragments) {\r\n      return {\r\n        type: 'fragmented',\r\n        fragments: fragments,\r\n        content: '',\r\n        bookmark: null,\r\n        beforeBookmark: null\r\n      };\r\n    };\r\n    var createCompleteLevel = function (content) {\r\n      return {\r\n        type: 'complete',\r\n        fragments: null,\r\n        content: content,\r\n        bookmark: null,\r\n        beforeBookmark: null\r\n      };\r\n    };\r\n    var createFromEditor = function (editor) {\r\n      var fragments = read$2(editor.getBody());\r\n      var trimmedFragments = bind(fragments, function (html) {\r\n        var trimmed = trimInternal(editor.serializer, html);\r\n        return trimmed.length > 0 ? [trimmed] : [];\r\n      });\r\n      var content = trimmedFragments.join('');\r\n      return hasIframes(content) ? createFragmentedLevel(trimmedFragments) : createCompleteLevel(content);\r\n    };\r\n    var applyToEditor = function (editor, level, before) {\r\n      var bookmark = before ? level.beforeBookmark : level.bookmark;\r\n      if (level.type === 'fragmented') {\r\n        write(level.fragments, editor.getBody());\r\n      } else {\r\n        editor.setContent(level.content, {\r\n          format: 'raw',\r\n          no_selection: isNonNullable(bookmark) && isPathBookmark(bookmark) ? !bookmark.isFakeCaret : true\r\n        });\r\n      }\r\n      editor.selection.moveToBookmark(bookmark);\r\n    };\r\n    var getLevelContent = function (level) {\r\n      return level.type === 'fragmented' ? level.fragments.join('') : level.content;\r\n    };\r\n    var getCleanLevelContent = function (level) {\r\n      var elm = SugarElement.fromTag('body', lazyTempDocument());\r\n      set(elm, getLevelContent(level));\r\n      each$k(descendants(elm, '*[data-mce-bogus]'), unwrap);\r\n      return get$3(elm);\r\n    };\r\n    var hasEqualContent = function (level1, level2) {\r\n      return getLevelContent(level1) === getLevelContent(level2);\r\n    };\r\n    var hasEqualCleanedContent = function (level1, level2) {\r\n      return getCleanLevelContent(level1) === getCleanLevelContent(level2);\r\n    };\r\n    var isEq$1 = function (level1, level2) {\r\n      if (!level1 || !level2) {\r\n        return false;\r\n      } else if (hasEqualContent(level1, level2)) {\r\n        return true;\r\n      } else {\r\n        return hasEqualCleanedContent(level1, level2);\r\n      }\r\n    };\r\n\r\n    var isUnlocked = function (locks) {\r\n      return locks.get() === 0;\r\n    };\r\n\r\n    var setTyping = function (undoManager, typing, locks) {\r\n      if (isUnlocked(locks)) {\r\n        undoManager.typing = typing;\r\n      }\r\n    };\r\n    var endTyping = function (undoManager, locks) {\r\n      if (undoManager.typing) {\r\n        setTyping(undoManager, false, locks);\r\n        undoManager.add();\r\n      }\r\n    };\r\n    var endTypingLevelIgnoreLocks = function (undoManager) {\r\n      if (undoManager.typing) {\r\n        undoManager.typing = false;\r\n        undoManager.add();\r\n      }\r\n    };\r\n\r\n    var beforeChange$1 = function (editor, locks, beforeBookmark) {\r\n      if (isUnlocked(locks)) {\r\n        beforeBookmark.set(getUndoBookmark(editor.selection));\r\n      }\r\n    };\r\n    var addUndoLevel$1 = function (editor, undoManager, index, locks, beforeBookmark, level, event) {\r\n      var currentLevel = createFromEditor(editor);\r\n      level = level || {};\r\n      level = Tools.extend(level, currentLevel);\r\n      if (isUnlocked(locks) === false || editor.removed) {\r\n        return null;\r\n      }\r\n      var lastLevel = undoManager.data[index.get()];\r\n      if (editor.fire('BeforeAddUndo', {\r\n          level: level,\r\n          lastLevel: lastLevel,\r\n          originalEvent: event\r\n        }).isDefaultPrevented()) {\r\n        return null;\r\n      }\r\n      if (lastLevel && isEq$1(lastLevel, level)) {\r\n        return null;\r\n      }\r\n      if (undoManager.data[index.get()]) {\r\n        beforeBookmark.get().each(function (bm) {\r\n          undoManager.data[index.get()].beforeBookmark = bm;\r\n        });\r\n      }\r\n      var customUndoRedoLevels = getCustomUndoRedoLevels(editor);\r\n      if (customUndoRedoLevels) {\r\n        if (undoManager.data.length > customUndoRedoLevels) {\r\n          for (var i = 0; i < undoManager.data.length - 1; i++) {\r\n            undoManager.data[i] = undoManager.data[i + 1];\r\n          }\r\n          undoManager.data.length--;\r\n          index.set(undoManager.data.length);\r\n        }\r\n      }\r\n      level.bookmark = getUndoBookmark(editor.selection);\r\n      if (index.get() < undoManager.data.length - 1) {\r\n        undoManager.data.length = index.get() + 1;\r\n      }\r\n      undoManager.data.push(level);\r\n      index.set(undoManager.data.length - 1);\r\n      var args = {\r\n        level: level,\r\n        lastLevel: lastLevel,\r\n        originalEvent: event\r\n      };\r\n      if (index.get() > 0) {\r\n        editor.setDirty(true);\r\n        editor.fire('AddUndo', args);\r\n        editor.fire('change', args);\r\n      } else {\r\n        editor.fire('AddUndo', args);\r\n      }\r\n      return level;\r\n    };\r\n    var clear$1 = function (editor, undoManager, index) {\r\n      undoManager.data = [];\r\n      index.set(0);\r\n      undoManager.typing = false;\r\n      editor.fire('ClearUndos');\r\n    };\r\n    var extra$1 = function (editor, undoManager, index, callback1, callback2) {\r\n      if (undoManager.transact(callback1)) {\r\n        var bookmark = undoManager.data[index.get()].bookmark;\r\n        var lastLevel = undoManager.data[index.get() - 1];\r\n        applyToEditor(editor, lastLevel, true);\r\n        if (undoManager.transact(callback2)) {\r\n          undoManager.data[index.get() - 1].beforeBookmark = bookmark;\r\n        }\r\n      }\r\n    };\r\n    var redo$1 = function (editor, index, data) {\r\n      var level;\r\n      if (index.get() < data.length - 1) {\r\n        index.set(index.get() + 1);\r\n        level = data[index.get()];\r\n        applyToEditor(editor, level, false);\r\n        editor.setDirty(true);\r\n        editor.fire('Redo', { level: level });\r\n      }\r\n      return level;\r\n    };\r\n    var undo$1 = function (editor, undoManager, locks, index) {\r\n      var level;\r\n      if (undoManager.typing) {\r\n        undoManager.add();\r\n        undoManager.typing = false;\r\n        setTyping(undoManager, false, locks);\r\n      }\r\n      if (index.get() > 0) {\r\n        index.set(index.get() - 1);\r\n        level = undoManager.data[index.get()];\r\n        applyToEditor(editor, level, true);\r\n        editor.setDirty(true);\r\n        editor.fire('Undo', { level: level });\r\n      }\r\n      return level;\r\n    };\r\n    var reset$1 = function (undoManager) {\r\n      undoManager.clear();\r\n      undoManager.add();\r\n    };\r\n    var hasUndo$1 = function (editor, undoManager, index) {\r\n      return index.get() > 0 || undoManager.typing && undoManager.data[0] && !isEq$1(createFromEditor(editor), undoManager.data[0]);\r\n    };\r\n    var hasRedo$1 = function (undoManager, index) {\r\n      return index.get() < undoManager.data.length - 1 && !undoManager.typing;\r\n    };\r\n    var transact$1 = function (undoManager, locks, callback) {\r\n      endTyping(undoManager, locks);\r\n      undoManager.beforeChange();\r\n      undoManager.ignore(callback);\r\n      return undoManager.add();\r\n    };\r\n    var ignore$1 = function (locks, callback) {\r\n      try {\r\n        locks.set(locks.get() + 1);\r\n        callback();\r\n      } finally {\r\n        locks.set(locks.get() - 1);\r\n      }\r\n    };\r\n\r\n    var addVisualInternal = function (editor, elm) {\r\n      var dom = editor.dom;\r\n      var scope = isNonNullable(elm) ? elm : editor.getBody();\r\n      if (isUndefined(editor.hasVisual)) {\r\n        editor.hasVisual = isVisualAidsEnabled(editor);\r\n      }\r\n      each$k(dom.select('table,a', scope), function (matchedElm) {\r\n        switch (matchedElm.nodeName) {\r\n        case 'TABLE':\r\n          var cls = getVisualAidsTableClass(editor);\r\n          var value = dom.getAttrib(matchedElm, 'border');\r\n          if ((!value || value === '0') && editor.hasVisual) {\r\n            dom.addClass(matchedElm, cls);\r\n          } else {\r\n            dom.removeClass(matchedElm, cls);\r\n          }\r\n          break;\r\n        case 'A':\r\n          if (!dom.getAttrib(matchedElm, 'href')) {\r\n            var value_1 = dom.getAttrib(matchedElm, 'name') || matchedElm.id;\r\n            var cls_1 = getVisualAidsAnchorClass(editor);\r\n            if (value_1 && editor.hasVisual) {\r\n              dom.addClass(matchedElm, cls_1);\r\n            } else {\r\n              dom.removeClass(matchedElm, cls_1);\r\n            }\r\n          }\r\n          break;\r\n        }\r\n      });\r\n      editor.fire('VisualAid', {\r\n        element: elm,\r\n        hasVisual: editor.hasVisual\r\n      });\r\n    };\r\n\r\n    var makePlainAdaptor = function (editor) {\r\n      return {\r\n        undoManager: {\r\n          beforeChange: function (locks, beforeBookmark) {\r\n            return beforeChange$1(editor, locks, beforeBookmark);\r\n          },\r\n          add: function (undoManager, index, locks, beforeBookmark, level, event) {\r\n            return addUndoLevel$1(editor, undoManager, index, locks, beforeBookmark, level, event);\r\n          },\r\n          undo: function (undoManager, locks, index) {\r\n            return undo$1(editor, undoManager, locks, index);\r\n          },\r\n          redo: function (index, data) {\r\n            return redo$1(editor, index, data);\r\n          },\r\n          clear: function (undoManager, index) {\r\n            return clear$1(editor, undoManager, index);\r\n          },\r\n          reset: function (undoManager) {\r\n            return reset$1(undoManager);\r\n          },\r\n          hasUndo: function (undoManager, index) {\r\n            return hasUndo$1(editor, undoManager, index);\r\n          },\r\n          hasRedo: function (undoManager, index) {\r\n            return hasRedo$1(undoManager, index);\r\n          },\r\n          transact: function (undoManager, locks, callback) {\r\n            return transact$1(undoManager, locks, callback);\r\n          },\r\n          ignore: function (locks, callback) {\r\n            return ignore$1(locks, callback);\r\n          },\r\n          extra: function (undoManager, index, callback1, callback2) {\r\n            return extra$1(editor, undoManager, index, callback1, callback2);\r\n          }\r\n        },\r\n        formatter: {\r\n          match: function (name, vars, node, similar) {\r\n            return match$2(editor, name, vars, node, similar);\r\n          },\r\n          matchAll: function (names, vars) {\r\n            return matchAll(editor, names, vars);\r\n          },\r\n          matchNode: function (node, name, vars, similar) {\r\n            return matchNode(editor, node, name, vars, similar);\r\n          },\r\n          canApply: function (name) {\r\n            return canApply(editor, name);\r\n          },\r\n          closest: function (names) {\r\n            return closest(editor, names);\r\n          },\r\n          apply: function (name, vars, node) {\r\n            return applyFormat$1(editor, name, vars, node);\r\n          },\r\n          remove: function (name, vars, node, similar) {\r\n            return remove$1(editor, name, vars, node, similar);\r\n          },\r\n          toggle: function (name, vars, node) {\r\n            return toggle(editor, name, vars, node);\r\n          },\r\n          formatChanged: function (registeredFormatListeners, formats, callback, similar, vars) {\r\n            return formatChangedInternal(editor, registeredFormatListeners, formats, callback, similar, vars);\r\n          }\r\n        },\r\n        editor: {\r\n          getContent: function (args, format) {\r\n            return getContentInternal(editor, args, format);\r\n          },\r\n          setContent: function (content, args) {\r\n            return setContentInternal(editor, content, args);\r\n          },\r\n          insertContent: function (value, details) {\r\n            return insertHtmlAtCaret(editor, value, details);\r\n          },\r\n          addVisual: function (elm) {\r\n            return addVisualInternal(editor, elm);\r\n          }\r\n        },\r\n        selection: {\r\n          getContent: function (format, args) {\r\n            return getSelectedContentInternal(editor, format, args);\r\n          }\r\n        },\r\n        raw: {\r\n          getModel: function () {\r\n            return Optional.none();\r\n          }\r\n        }\r\n      };\r\n    };\r\n    var makeRtcAdaptor = function (rtcEditor) {\r\n      var defaultVars = function (vars) {\r\n        return isObject(vars) ? vars : {};\r\n      };\r\n      var undoManager = rtcEditor.undoManager, formatter = rtcEditor.formatter, editor = rtcEditor.editor, selection = rtcEditor.selection, raw = rtcEditor.raw;\r\n      return {\r\n        undoManager: {\r\n          beforeChange: undoManager.beforeChange,\r\n          add: undoManager.add,\r\n          undo: undoManager.undo,\r\n          redo: undoManager.redo,\r\n          clear: undoManager.clear,\r\n          reset: undoManager.reset,\r\n          hasUndo: undoManager.hasUndo,\r\n          hasRedo: undoManager.hasRedo,\r\n          transact: function (_undoManager, _locks, fn) {\r\n            return undoManager.transact(fn);\r\n          },\r\n          ignore: function (_locks, callback) {\r\n            return undoManager.ignore(callback);\r\n          },\r\n          extra: function (_undoManager, _index, callback1, callback2) {\r\n            return undoManager.extra(callback1, callback2);\r\n          }\r\n        },\r\n        formatter: {\r\n          match: function (name, vars, _node, similar) {\r\n            return formatter.match(name, defaultVars(vars), similar);\r\n          },\r\n          matchAll: formatter.matchAll,\r\n          matchNode: formatter.matchNode,\r\n          canApply: function (name) {\r\n            return formatter.canApply(name);\r\n          },\r\n          closest: function (names) {\r\n            return formatter.closest(names);\r\n          },\r\n          apply: function (name, vars, _node) {\r\n            return formatter.apply(name, defaultVars(vars));\r\n          },\r\n          remove: function (name, vars, _node, _similar) {\r\n            return formatter.remove(name, defaultVars(vars));\r\n          },\r\n          toggle: function (name, vars, _node) {\r\n            return formatter.toggle(name, defaultVars(vars));\r\n          },\r\n          formatChanged: function (_rfl, formats, callback, similar, vars) {\r\n            return formatter.formatChanged(formats, callback, similar, vars);\r\n          }\r\n        },\r\n        editor: {\r\n          getContent: function (args, _format) {\r\n            return editor.getContent(args);\r\n          },\r\n          setContent: function (content, args) {\r\n            return editor.setContent(content, args);\r\n          },\r\n          insertContent: function (content, _details) {\r\n            return editor.insertContent(content);\r\n          },\r\n          addVisual: editor.addVisual\r\n        },\r\n        selection: {\r\n          getContent: function (_format, args) {\r\n            return selection.getContent(args);\r\n          }\r\n        },\r\n        raw: {\r\n          getModel: function () {\r\n            return Optional.some(raw.getRawModel());\r\n          }\r\n        }\r\n      };\r\n    };\r\n    var makeNoopAdaptor = function () {\r\n      var nul = constant(null);\r\n      var empty = constant('');\r\n      return {\r\n        undoManager: {\r\n          beforeChange: noop,\r\n          add: nul,\r\n          undo: nul,\r\n          redo: nul,\r\n          clear: noop,\r\n          reset: noop,\r\n          hasUndo: never,\r\n          hasRedo: never,\r\n          transact: nul,\r\n          ignore: noop,\r\n          extra: noop\r\n        },\r\n        formatter: {\r\n          match: never,\r\n          matchAll: constant([]),\r\n          matchNode: constant(undefined),\r\n          canApply: never,\r\n          closest: empty,\r\n          apply: noop,\r\n          remove: noop,\r\n          toggle: noop,\r\n          formatChanged: constant({ unbind: noop })\r\n        },\r\n        editor: {\r\n          getContent: empty,\r\n          setContent: empty,\r\n          insertContent: noop,\r\n          addVisual: noop\r\n        },\r\n        selection: { getContent: empty },\r\n        raw: { getModel: constant(Optional.none()) }\r\n      };\r\n    };\r\n    var isRtc = function (editor) {\r\n      return has$2(editor.plugins, 'rtc');\r\n    };\r\n    var getRtcSetup = function (editor) {\r\n      return get$9(editor.plugins, 'rtc').bind(function (rtcPlugin) {\r\n        return Optional.from(rtcPlugin.setup);\r\n      });\r\n    };\r\n    var setup$i = function (editor) {\r\n      var editorCast = editor;\r\n      return getRtcSetup(editor).fold(function () {\r\n        editorCast.rtcInstance = makePlainAdaptor(editor);\r\n        return Optional.none();\r\n      }, function (setup) {\r\n        editorCast.rtcInstance = makeNoopAdaptor();\r\n        return Optional.some(function () {\r\n          return setup().then(function (rtcEditor) {\r\n            editorCast.rtcInstance = makeRtcAdaptor(rtcEditor);\r\n            return rtcEditor.rtc.isRemote;\r\n          });\r\n        });\r\n      });\r\n    };\r\n    var getRtcInstanceWithFallback = function (editor) {\r\n      return editor.rtcInstance ? editor.rtcInstance : makePlainAdaptor(editor);\r\n    };\r\n    var getRtcInstanceWithError = function (editor) {\r\n      var rtcInstance = editor.rtcInstance;\r\n      if (!rtcInstance) {\r\n        throw new Error('Failed to get RTC instance not yet initialized.');\r\n      } else {\r\n        return rtcInstance;\r\n      }\r\n    };\r\n    var beforeChange = function (editor, locks, beforeBookmark) {\r\n      getRtcInstanceWithError(editor).undoManager.beforeChange(locks, beforeBookmark);\r\n    };\r\n    var addUndoLevel = function (editor, undoManager, index, locks, beforeBookmark, level, event) {\r\n      return getRtcInstanceWithError(editor).undoManager.add(undoManager, index, locks, beforeBookmark, level, event);\r\n    };\r\n    var undo = function (editor, undoManager, locks, index) {\r\n      return getRtcInstanceWithError(editor).undoManager.undo(undoManager, locks, index);\r\n    };\r\n    var redo = function (editor, index, data) {\r\n      return getRtcInstanceWithError(editor).undoManager.redo(index, data);\r\n    };\r\n    var clear = function (editor, undoManager, index) {\r\n      getRtcInstanceWithError(editor).undoManager.clear(undoManager, index);\r\n    };\r\n    var reset = function (editor, undoManager) {\r\n      getRtcInstanceWithError(editor).undoManager.reset(undoManager);\r\n    };\r\n    var hasUndo = function (editor, undoManager, index) {\r\n      return getRtcInstanceWithError(editor).undoManager.hasUndo(undoManager, index);\r\n    };\r\n    var hasRedo = function (editor, undoManager, index) {\r\n      return getRtcInstanceWithError(editor).undoManager.hasRedo(undoManager, index);\r\n    };\r\n    var transact = function (editor, undoManager, locks, callback) {\r\n      return getRtcInstanceWithError(editor).undoManager.transact(undoManager, locks, callback);\r\n    };\r\n    var ignore = function (editor, locks, callback) {\r\n      getRtcInstanceWithError(editor).undoManager.ignore(locks, callback);\r\n    };\r\n    var extra = function (editor, undoManager, index, callback1, callback2) {\r\n      getRtcInstanceWithError(editor).undoManager.extra(undoManager, index, callback1, callback2);\r\n    };\r\n    var matchFormat = function (editor, name, vars, node, similar) {\r\n      return getRtcInstanceWithError(editor).formatter.match(name, vars, node, similar);\r\n    };\r\n    var matchAllFormats = function (editor, names, vars) {\r\n      return getRtcInstanceWithError(editor).formatter.matchAll(names, vars);\r\n    };\r\n    var matchNodeFormat = function (editor, node, name, vars, similar) {\r\n      return getRtcInstanceWithError(editor).formatter.matchNode(node, name, vars, similar);\r\n    };\r\n    var canApplyFormat = function (editor, name) {\r\n      return getRtcInstanceWithError(editor).formatter.canApply(name);\r\n    };\r\n    var closestFormat = function (editor, names) {\r\n      return getRtcInstanceWithError(editor).formatter.closest(names);\r\n    };\r\n    var applyFormat = function (editor, name, vars, node) {\r\n      getRtcInstanceWithError(editor).formatter.apply(name, vars, node);\r\n    };\r\n    var removeFormat = function (editor, name, vars, node, similar) {\r\n      getRtcInstanceWithError(editor).formatter.remove(name, vars, node, similar);\r\n    };\r\n    var toggleFormat = function (editor, name, vars, node) {\r\n      getRtcInstanceWithError(editor).formatter.toggle(name, vars, node);\r\n    };\r\n    var formatChanged = function (editor, registeredFormatListeners, formats, callback, similar, vars) {\r\n      return getRtcInstanceWithError(editor).formatter.formatChanged(registeredFormatListeners, formats, callback, similar, vars);\r\n    };\r\n    var getContent$2 = function (editor, args, format) {\r\n      return getRtcInstanceWithFallback(editor).editor.getContent(args, format);\r\n    };\r\n    var setContent$2 = function (editor, content, args) {\r\n      return getRtcInstanceWithFallback(editor).editor.setContent(content, args);\r\n    };\r\n    var insertContent = function (editor, value, details) {\r\n      return getRtcInstanceWithFallback(editor).editor.insertContent(value, details);\r\n    };\r\n    var getSelectedContent = function (editor, format, args) {\r\n      return getRtcInstanceWithError(editor).selection.getContent(format, args);\r\n    };\r\n    var addVisual$1 = function (editor, elm) {\r\n      return getRtcInstanceWithError(editor).editor.addVisual(elm);\r\n    };\r\n\r\n    var getContent$1 = function (editor, args) {\r\n      if (args === void 0) {\r\n        args = {};\r\n      }\r\n      var format = args.format ? args.format : 'html';\r\n      return getSelectedContent(editor, format, args);\r\n    };\r\n\r\n    var removeEmpty = function (text) {\r\n      if (text.dom.length === 0) {\r\n        remove$7(text);\r\n        return Optional.none();\r\n      } else {\r\n        return Optional.some(text);\r\n      }\r\n    };\r\n    var walkPastBookmark = function (node, start) {\r\n      return node.filter(function (elm) {\r\n        return BookmarkManager.isBookmarkNode(elm.dom);\r\n      }).bind(start ? nextSibling : prevSibling);\r\n    };\r\n    var merge = function (outer, inner, rng, start) {\r\n      var outerElm = outer.dom;\r\n      var innerElm = inner.dom;\r\n      var oldLength = start ? outerElm.length : innerElm.length;\r\n      if (start) {\r\n        mergeTextNodes(outerElm, innerElm, false, !start);\r\n        rng.setStart(innerElm, oldLength);\r\n      } else {\r\n        mergeTextNodes(innerElm, outerElm, false, !start);\r\n        rng.setEnd(innerElm, oldLength);\r\n      }\r\n    };\r\n    var normalizeTextIfRequired = function (inner, start) {\r\n      parent(inner).each(function (root) {\r\n        var text = inner.dom;\r\n        if (start && needsToBeNbspLeft(root, CaretPosition(text, 0))) {\r\n          normalizeWhitespaceAfter(text, 0);\r\n        } else if (!start && needsToBeNbspRight(root, CaretPosition(text, text.length))) {\r\n          normalizeWhitespaceBefore(text, text.length);\r\n        }\r\n      });\r\n    };\r\n    var mergeAndNormalizeText = function (outerNode, innerNode, rng, start) {\r\n      outerNode.bind(function (outer) {\r\n        var normalizer = start ? normalizeWhitespaceBefore : normalizeWhitespaceAfter;\r\n        normalizer(outer.dom, start ? outer.dom.length : 0);\r\n        return innerNode.filter(isText$8).map(function (inner) {\r\n          return merge(outer, inner, rng, start);\r\n        });\r\n      }).orThunk(function () {\r\n        var innerTextNode = walkPastBookmark(innerNode, start).or(innerNode).filter(isText$8);\r\n        return innerTextNode.map(function (inner) {\r\n          return normalizeTextIfRequired(inner, start);\r\n        });\r\n      });\r\n    };\r\n    var rngSetContent = function (rng, fragment) {\r\n      var firstChild = Optional.from(fragment.firstChild).map(SugarElement.fromDom);\r\n      var lastChild = Optional.from(fragment.lastChild).map(SugarElement.fromDom);\r\n      rng.deleteContents();\r\n      rng.insertNode(fragment);\r\n      var prevText = firstChild.bind(prevSibling).filter(isText$8).bind(removeEmpty);\r\n      var nextText = lastChild.bind(nextSibling).filter(isText$8).bind(removeEmpty);\r\n      mergeAndNormalizeText(prevText, firstChild, rng, true);\r\n      mergeAndNormalizeText(nextText, lastChild, rng, false);\r\n      rng.collapse(false);\r\n    };\r\n    var setupArgs = function (args, content) {\r\n      return __assign(__assign({ format: 'html' }, args), {\r\n        set: true,\r\n        selection: true,\r\n        content: content\r\n      });\r\n    };\r\n    var cleanContent = function (editor, args) {\r\n      if (args.format !== 'raw') {\r\n        var rng = editor.selection.getRng();\r\n        var contextBlock = editor.dom.getParent(rng.commonAncestorContainer, editor.dom.isBlock);\r\n        var contextArgs = contextBlock ? { context: contextBlock.nodeName.toLowerCase() } : {};\r\n        var node = editor.parser.parse(args.content, __assign(__assign({\r\n          isRootContent: true,\r\n          forced_root_block: false\r\n        }, contextArgs), args));\r\n        return HtmlSerializer({ validate: editor.validate }, editor.schema).serialize(node);\r\n      } else {\r\n        return args.content;\r\n      }\r\n    };\r\n    var setContent$1 = function (editor, content, args) {\r\n      if (args === void 0) {\r\n        args = {};\r\n      }\r\n      var defaultedArgs = setupArgs(args, content);\r\n      var updatedArgs = defaultedArgs;\r\n      if (!defaultedArgs.no_events) {\r\n        var eventArgs = editor.fire('BeforeSetContent', defaultedArgs);\r\n        if (eventArgs.isDefaultPrevented()) {\r\n          editor.fire('SetContent', eventArgs);\r\n          return;\r\n        } else {\r\n          updatedArgs = eventArgs;\r\n        }\r\n      }\r\n      updatedArgs.content = cleanContent(editor, updatedArgs);\r\n      var rng = editor.selection.getRng();\r\n      rngSetContent(rng, rng.createContextualFragment(updatedArgs.content));\r\n      editor.selection.setRng(rng);\r\n      scrollRangeIntoView(editor, rng);\r\n      if (!updatedArgs.no_events) {\r\n        editor.fire('SetContent', updatedArgs);\r\n      }\r\n    };\r\n\r\n    var deleteFromCallbackMap = function (callbackMap, selector, callback) {\r\n      if (callbackMap && has$2(callbackMap, selector)) {\r\n        var newCallbacks = filter$4(callbackMap[selector], function (cb) {\r\n          return cb !== callback;\r\n        });\r\n        if (newCallbacks.length === 0) {\r\n          delete callbackMap[selector];\r\n        } else {\r\n          callbackMap[selector] = newCallbacks;\r\n        }\r\n      }\r\n    };\r\n    function SelectorChanged (dom, editor) {\r\n      var selectorChangedData;\r\n      var currentSelectors;\r\n      var findMatchingNode = function (selector, nodes) {\r\n        return find$3(nodes, function (node) {\r\n          return dom.is(node, selector);\r\n        });\r\n      };\r\n      var getParents = function (elem) {\r\n        return dom.getParents(elem, null, dom.getRoot());\r\n      };\r\n      return {\r\n        selectorChangedWithUnbind: function (selector, callback) {\r\n          if (!selectorChangedData) {\r\n            selectorChangedData = {};\r\n            currentSelectors = {};\r\n            editor.on('NodeChange', function (e) {\r\n              var node = e.element;\r\n              var parents = getParents(node);\r\n              var matchedSelectors = {};\r\n              Tools.each(selectorChangedData, function (callbacks, selector) {\r\n                findMatchingNode(selector, parents).each(function (node) {\r\n                  if (!currentSelectors[selector]) {\r\n                    each$k(callbacks, function (callback) {\r\n                      callback(true, {\r\n                        node: node,\r\n                        selector: selector,\r\n                        parents: parents\r\n                      });\r\n                    });\r\n                    currentSelectors[selector] = callbacks;\r\n                  }\r\n                  matchedSelectors[selector] = callbacks;\r\n                });\r\n              });\r\n              Tools.each(currentSelectors, function (callbacks, selector) {\r\n                if (!matchedSelectors[selector]) {\r\n                  delete currentSelectors[selector];\r\n                  Tools.each(callbacks, function (callback) {\r\n                    callback(false, {\r\n                      node: node,\r\n                      selector: selector,\r\n                      parents: parents\r\n                    });\r\n                  });\r\n                }\r\n              });\r\n            });\r\n          }\r\n          if (!selectorChangedData[selector]) {\r\n            selectorChangedData[selector] = [];\r\n          }\r\n          selectorChangedData[selector].push(callback);\r\n          findMatchingNode(selector, getParents(editor.selection.getStart())).each(function () {\r\n            currentSelectors[selector] = selectorChangedData[selector];\r\n          });\r\n          return {\r\n            unbind: function () {\r\n              deleteFromCallbackMap(selectorChangedData, selector, callback);\r\n              deleteFromCallbackMap(currentSelectors, selector, callback);\r\n            }\r\n          };\r\n        }\r\n      };\r\n    }\r\n\r\n    var isNativeIeSelection = function (rng) {\r\n      return !!rng.select;\r\n    };\r\n    var isAttachedToDom = function (node) {\r\n      return !!(node && node.ownerDocument) && contains$1(SugarElement.fromDom(node.ownerDocument), SugarElement.fromDom(node));\r\n    };\r\n    var isValidRange = function (rng) {\r\n      if (!rng) {\r\n        return false;\r\n      } else if (isNativeIeSelection(rng)) {\r\n        return true;\r\n      } else {\r\n        return isAttachedToDom(rng.startContainer) && isAttachedToDom(rng.endContainer);\r\n      }\r\n    };\r\n    var EditorSelection = function (dom, win, serializer, editor) {\r\n      var selectedRange;\r\n      var explicitRange;\r\n      var selectorChangedWithUnbind = SelectorChanged(dom, editor).selectorChangedWithUnbind;\r\n      var setCursorLocation = function (node, offset) {\r\n        var rng = dom.createRng();\r\n        if (isNonNullable(node) && isNonNullable(offset)) {\r\n          rng.setStart(node, offset);\r\n          rng.setEnd(node, offset);\r\n          setRng(rng);\r\n          collapse(false);\r\n        } else {\r\n          moveEndPoint(dom, rng, editor.getBody(), true);\r\n          setRng(rng);\r\n        }\r\n      };\r\n      var getContent = function (args) {\r\n        return getContent$1(editor, args);\r\n      };\r\n      var setContent = function (content, args) {\r\n        return setContent$1(editor, content, args);\r\n      };\r\n      var getStart$1 = function (real) {\r\n        return getStart(editor.getBody(), getRng$1(), real);\r\n      };\r\n      var getEnd$1 = function (real) {\r\n        return getEnd(editor.getBody(), getRng$1(), real);\r\n      };\r\n      var getBookmark = function (type, normalized) {\r\n        return bookmarkManager.getBookmark(type, normalized);\r\n      };\r\n      var moveToBookmark = function (bookmark) {\r\n        return bookmarkManager.moveToBookmark(bookmark);\r\n      };\r\n      var select$1 = function (node, content) {\r\n        select(dom, node, content).each(setRng);\r\n        return node;\r\n      };\r\n      var isCollapsed = function () {\r\n        var rng = getRng$1(), sel = getSel();\r\n        if (!rng || rng.item) {\r\n          return false;\r\n        }\r\n        if (rng.compareEndPoints) {\r\n          return rng.compareEndPoints('StartToEnd', rng) === 0;\r\n        }\r\n        return !sel || rng.collapsed;\r\n      };\r\n      var collapse = function (toStart) {\r\n        var rng = getRng$1();\r\n        rng.collapse(!!toStart);\r\n        setRng(rng);\r\n      };\r\n      var getSel = function () {\r\n        return win.getSelection ? win.getSelection() : win.document.selection;\r\n      };\r\n      var getRng$1 = function () {\r\n        var selection, rng, elm;\r\n        var tryCompareBoundaryPoints = function (how, sourceRange, destinationRange) {\r\n          try {\r\n            return sourceRange.compareBoundaryPoints(how, destinationRange);\r\n          } catch (ex) {\r\n            return -1;\r\n          }\r\n        };\r\n        var doc = win.document;\r\n        if (editor.bookmark !== undefined && hasFocus(editor) === false) {\r\n          var bookmark = getRng(editor);\r\n          if (bookmark.isSome()) {\r\n            return bookmark.map(function (r) {\r\n              return processRanges(editor, [r])[0];\r\n            }).getOr(doc.createRange());\r\n          }\r\n        }\r\n        try {\r\n          if ((selection = getSel()) && !isRestrictedNode(selection.anchorNode)) {\r\n            if (selection.rangeCount > 0) {\r\n              rng = selection.getRangeAt(0);\r\n            } else {\r\n              rng = selection.createRange ? selection.createRange() : doc.createRange();\r\n            }\r\n            rng = processRanges(editor, [rng])[0];\r\n          }\r\n        } catch (ex) {\r\n        }\r\n        if (!rng) {\r\n          rng = doc.createRange ? doc.createRange() : doc.body.createTextRange();\r\n        }\r\n        if (rng.setStart && rng.startContainer.nodeType === 9 && rng.collapsed) {\r\n          elm = dom.getRoot();\r\n          rng.setStart(elm, 0);\r\n          rng.setEnd(elm, 0);\r\n        }\r\n        if (selectedRange && explicitRange) {\r\n          if (tryCompareBoundaryPoints(rng.START_TO_START, rng, selectedRange) === 0 && tryCompareBoundaryPoints(rng.END_TO_END, rng, selectedRange) === 0) {\r\n            rng = explicitRange;\r\n          } else {\r\n            selectedRange = null;\r\n            explicitRange = null;\r\n          }\r\n        }\r\n        return rng;\r\n      };\r\n      var setRng = function (rng, forward) {\r\n        var node;\r\n        if (!isValidRange(rng)) {\r\n          return;\r\n        }\r\n        var ieRange = isNativeIeSelection(rng) ? rng : null;\r\n        if (ieRange) {\r\n          explicitRange = null;\r\n          try {\r\n            ieRange.select();\r\n          } catch (ex) {\r\n          }\r\n          return;\r\n        }\r\n        var sel = getSel();\r\n        var evt = editor.fire('SetSelectionRange', {\r\n          range: rng,\r\n          forward: forward\r\n        });\r\n        rng = evt.range;\r\n        if (sel) {\r\n          explicitRange = rng;\r\n          try {\r\n            sel.removeAllRanges();\r\n            sel.addRange(rng);\r\n          } catch (ex) {\r\n          }\r\n          if (forward === false && sel.extend) {\r\n            sel.collapse(rng.endContainer, rng.endOffset);\r\n            sel.extend(rng.startContainer, rng.startOffset);\r\n          }\r\n          selectedRange = sel.rangeCount > 0 ? sel.getRangeAt(0) : null;\r\n        }\r\n        if (!rng.collapsed && rng.startContainer === rng.endContainer && sel.setBaseAndExtent && !Env.ie) {\r\n          if (rng.endOffset - rng.startOffset < 2) {\r\n            if (rng.startContainer.hasChildNodes()) {\r\n              node = rng.startContainer.childNodes[rng.startOffset];\r\n              if (node && node.tagName === 'IMG') {\r\n                sel.setBaseAndExtent(rng.startContainer, rng.startOffset, rng.endContainer, rng.endOffset);\r\n                if (sel.anchorNode !== rng.startContainer || sel.focusNode !== rng.endContainer) {\r\n                  sel.setBaseAndExtent(node, 0, node, 1);\r\n                }\r\n              }\r\n            }\r\n          }\r\n        }\r\n        editor.fire('AfterSetSelectionRange', {\r\n          range: rng,\r\n          forward: forward\r\n        });\r\n      };\r\n      var setNode = function (elm) {\r\n        setContent(dom.getOuterHTML(elm));\r\n        return elm;\r\n      };\r\n      var getNode$1 = function () {\r\n        return getNode(editor.getBody(), getRng$1());\r\n      };\r\n      var getSelectedBlocks$1 = function (startElm, endElm) {\r\n        return getSelectedBlocks(dom, getRng$1(), startElm, endElm);\r\n      };\r\n      var isForward = function () {\r\n        var sel = getSel();\r\n        var anchorNode = sel === null || sel === void 0 ? void 0 : sel.anchorNode;\r\n        var focusNode = sel === null || sel === void 0 ? void 0 : sel.focusNode;\r\n        if (!sel || !anchorNode || !focusNode || isRestrictedNode(anchorNode) || isRestrictedNode(focusNode)) {\r\n          return true;\r\n        }\r\n        var anchorRange = dom.createRng();\r\n        anchorRange.setStart(anchorNode, sel.anchorOffset);\r\n        anchorRange.collapse(true);\r\n        var focusRange = dom.createRng();\r\n        focusRange.setStart(focusNode, sel.focusOffset);\r\n        focusRange.collapse(true);\r\n        return anchorRange.compareBoundaryPoints(anchorRange.START_TO_START, focusRange) <= 0;\r\n      };\r\n      var normalize = function () {\r\n        var rng = getRng$1();\r\n        var sel = getSel();\r\n        if (!hasMultipleRanges(sel) && hasAnyRanges(editor)) {\r\n          var normRng = normalize$2(dom, rng);\r\n          normRng.each(function (normRng) {\r\n            setRng(normRng, isForward());\r\n          });\r\n          return normRng.getOr(rng);\r\n        }\r\n        return rng;\r\n      };\r\n      var selectorChanged = function (selector, callback) {\r\n        selectorChangedWithUnbind(selector, callback);\r\n        return exports;\r\n      };\r\n      var getScrollContainer = function () {\r\n        var scrollContainer;\r\n        var node = dom.getRoot();\r\n        while (node && node.nodeName !== 'BODY') {\r\n          if (node.scrollHeight > node.clientHeight) {\r\n            scrollContainer = node;\r\n            break;\r\n          }\r\n          node = node.parentNode;\r\n        }\r\n        return scrollContainer;\r\n      };\r\n      var scrollIntoView = function (elm, alignToTop) {\r\n        if (isNonNullable(elm)) {\r\n          scrollElementIntoView(editor, elm, alignToTop);\r\n        } else {\r\n          scrollRangeIntoView(editor, getRng$1(), alignToTop);\r\n        }\r\n      };\r\n      var placeCaretAt = function (clientX, clientY) {\r\n        return setRng(fromPoint(clientX, clientY, editor.getDoc()));\r\n      };\r\n      var getBoundingClientRect = function () {\r\n        var rng = getRng$1();\r\n        return rng.collapsed ? CaretPosition.fromRangeStart(rng).getClientRects()[0] : rng.getBoundingClientRect();\r\n      };\r\n      var destroy = function () {\r\n        win = selectedRange = explicitRange = null;\r\n        controlSelection.destroy();\r\n      };\r\n      var exports = {\r\n        bookmarkManager: null,\r\n        controlSelection: null,\r\n        dom: dom,\r\n        win: win,\r\n        serializer: serializer,\r\n        editor: editor,\r\n        collapse: collapse,\r\n        setCursorLocation: setCursorLocation,\r\n        getContent: getContent,\r\n        setContent: setContent,\r\n        getBookmark: getBookmark,\r\n        moveToBookmark: moveToBookmark,\r\n        select: select$1,\r\n        isCollapsed: isCollapsed,\r\n        isForward: isForward,\r\n        setNode: setNode,\r\n        getNode: getNode$1,\r\n        getSel: getSel,\r\n        setRng: setRng,\r\n        getRng: getRng$1,\r\n        getStart: getStart$1,\r\n        getEnd: getEnd$1,\r\n        getSelectedBlocks: getSelectedBlocks$1,\r\n        normalize: normalize,\r\n        selectorChanged: selectorChanged,\r\n        selectorChangedWithUnbind: selectorChangedWithUnbind,\r\n        getScrollContainer: getScrollContainer,\r\n        scrollIntoView: scrollIntoView,\r\n        placeCaretAt: placeCaretAt,\r\n        getBoundingClientRect: getBoundingClientRect,\r\n        destroy: destroy\r\n      };\r\n      var bookmarkManager = BookmarkManager(exports);\r\n      var controlSelection = ControlSelection(exports, editor);\r\n      exports.bookmarkManager = bookmarkManager;\r\n      exports.controlSelection = controlSelection;\r\n      return exports;\r\n    };\r\n\r\n    var removeAttrs = function (node, names) {\r\n      each$k(names, function (name) {\r\n        node.attr(name, null);\r\n      });\r\n    };\r\n    var addFontToSpansFilter = function (domParser, styles, fontSizes) {\r\n      domParser.addNodeFilter('font', function (nodes) {\r\n        each$k(nodes, function (node) {\r\n          var props = styles.parse(node.attr('style'));\r\n          var color = node.attr('color');\r\n          var face = node.attr('face');\r\n          var size = node.attr('size');\r\n          if (color) {\r\n            props.color = color;\r\n          }\r\n          if (face) {\r\n            props['font-family'] = face;\r\n          }\r\n          if (size) {\r\n            props['font-size'] = fontSizes[parseInt(node.attr('size'), 10) - 1];\r\n          }\r\n          node.name = 'span';\r\n          node.attr('style', styles.serialize(props));\r\n          removeAttrs(node, [\r\n            'color',\r\n            'face',\r\n            'size'\r\n          ]);\r\n        });\r\n      });\r\n    };\r\n    var addStrikeToSpanFilter = function (domParser, styles) {\r\n      domParser.addNodeFilter('strike', function (nodes) {\r\n        each$k(nodes, function (node) {\r\n          var props = styles.parse(node.attr('style'));\r\n          props['text-decoration'] = 'line-through';\r\n          node.name = 'span';\r\n          node.attr('style', styles.serialize(props));\r\n        });\r\n      });\r\n    };\r\n    var addFilters = function (domParser, settings) {\r\n      var styles = Styles();\r\n      if (settings.convert_fonts_to_spans) {\r\n        addFontToSpansFilter(domParser, styles, Tools.explode(settings.font_size_legacy_values));\r\n      }\r\n      addStrikeToSpanFilter(domParser, styles);\r\n    };\r\n    var register$2 = function (domParser, settings) {\r\n      if (settings.inline_styles) {\r\n        addFilters(domParser, settings);\r\n      }\r\n    };\r\n\r\n    var blobUriToBlob = function (url) {\r\n      return new promiseObj(function (resolve, reject) {\r\n        var rejectWithError = function () {\r\n          reject('Cannot convert ' + url + ' to Blob. Resource might not exist or is inaccessible.');\r\n        };\r\n        try {\r\n          var xhr_1 = new XMLHttpRequest();\r\n          xhr_1.open('GET', url, true);\r\n          xhr_1.responseType = 'blob';\r\n          xhr_1.onload = function () {\r\n            if (xhr_1.status === 200) {\r\n              resolve(xhr_1.response);\r\n            } else {\r\n              rejectWithError();\r\n            }\r\n          };\r\n          xhr_1.onerror = rejectWithError;\r\n          xhr_1.send();\r\n        } catch (ex) {\r\n          rejectWithError();\r\n        }\r\n      });\r\n    };\r\n    var parseDataUri = function (uri) {\r\n      var type;\r\n      var uriParts = decodeURIComponent(uri).split(',');\r\n      var matches = /data:([^;]+)/.exec(uriParts[0]);\r\n      if (matches) {\r\n        type = matches[1];\r\n      }\r\n      return {\r\n        type: type,\r\n        data: uriParts[1]\r\n      };\r\n    };\r\n    var buildBlob = function (type, data) {\r\n      var str;\r\n      try {\r\n        str = atob(data);\r\n      } catch (e) {\r\n        return Optional.none();\r\n      }\r\n      var arr = new Uint8Array(str.length);\r\n      for (var i = 0; i < arr.length; i++) {\r\n        arr[i] = str.charCodeAt(i);\r\n      }\r\n      return Optional.some(new Blob([arr], { type: type }));\r\n    };\r\n    var dataUriToBlob = function (uri) {\r\n      return new promiseObj(function (resolve) {\r\n        var _a = parseDataUri(uri), type = _a.type, data = _a.data;\r\n        buildBlob(type, data).fold(function () {\r\n          return resolve(new Blob([]));\r\n        }, resolve);\r\n      });\r\n    };\r\n    var uriToBlob = function (url) {\r\n      if (url.indexOf('blob:') === 0) {\r\n        return blobUriToBlob(url);\r\n      }\r\n      if (url.indexOf('data:') === 0) {\r\n        return dataUriToBlob(url);\r\n      }\r\n      return null;\r\n    };\r\n    var blobToDataUri = function (blob) {\r\n      return new promiseObj(function (resolve) {\r\n        var reader = new FileReader();\r\n        reader.onloadend = function () {\r\n          resolve(reader.result);\r\n        };\r\n        reader.readAsDataURL(blob);\r\n      });\r\n    };\r\n\r\n    var count$1 = 0;\r\n    var uniqueId = function (prefix) {\r\n      return (prefix || 'blobid') + count$1++;\r\n    };\r\n    var imageToBlobInfo = function (blobCache, img, resolve, reject) {\r\n      var base64, blobInfo;\r\n      if (img.src.indexOf('blob:') === 0) {\r\n        blobInfo = blobCache.getByUri(img.src);\r\n        if (blobInfo) {\r\n          resolve({\r\n            image: img,\r\n            blobInfo: blobInfo\r\n          });\r\n        } else {\r\n          uriToBlob(img.src).then(function (blob) {\r\n            blobToDataUri(blob).then(function (dataUri) {\r\n              base64 = parseDataUri(dataUri).data;\r\n              blobInfo = blobCache.create(uniqueId(), blob, base64);\r\n              blobCache.add(blobInfo);\r\n              resolve({\r\n                image: img,\r\n                blobInfo: blobInfo\r\n              });\r\n            });\r\n          }, function (err) {\r\n            reject(err);\r\n          });\r\n        }\r\n        return;\r\n      }\r\n      var _a = parseDataUri(img.src), data = _a.data, type = _a.type;\r\n      base64 = data;\r\n      blobInfo = blobCache.getByData(base64, type);\r\n      if (blobInfo) {\r\n        resolve({\r\n          image: img,\r\n          blobInfo: blobInfo\r\n        });\r\n      } else {\r\n        uriToBlob(img.src).then(function (blob) {\r\n          blobInfo = blobCache.create(uniqueId(), blob, base64);\r\n          blobCache.add(blobInfo);\r\n          resolve({\r\n            image: img,\r\n            blobInfo: blobInfo\r\n          });\r\n        }, function (err) {\r\n          reject(err);\r\n        });\r\n      }\r\n    };\r\n    var getAllImages = function (elm) {\r\n      return elm ? from(elm.getElementsByTagName('img')) : [];\r\n    };\r\n    var ImageScanner = function (uploadStatus, blobCache) {\r\n      var cachedPromises = {};\r\n      var findAll = function (elm, predicate) {\r\n        if (!predicate) {\r\n          predicate = always;\r\n        }\r\n        var images = filter$4(getAllImages(elm), function (img) {\r\n          var src = img.src;\r\n          if (!Env.fileApi) {\r\n            return false;\r\n          }\r\n          if (img.hasAttribute('data-mce-bogus')) {\r\n            return false;\r\n          }\r\n          if (img.hasAttribute('data-mce-placeholder')) {\r\n            return false;\r\n          }\r\n          if (!src || src === Env.transparentSrc) {\r\n            return false;\r\n          }\r\n          if (src.indexOf('blob:') === 0) {\r\n            return !uploadStatus.isUploaded(src) && predicate(img);\r\n          }\r\n          if (src.indexOf('data:') === 0) {\r\n            return predicate(img);\r\n          }\r\n          return false;\r\n        });\r\n        var promises = map$3(images, function (img) {\r\n          if (cachedPromises[img.src] !== undefined) {\r\n            return new promiseObj(function (resolve) {\r\n              cachedPromises[img.src].then(function (imageInfo) {\r\n                if (typeof imageInfo === 'string') {\r\n                  return imageInfo;\r\n                }\r\n                resolve({\r\n                  image: img,\r\n                  blobInfo: imageInfo.blobInfo\r\n                });\r\n              });\r\n            });\r\n          }\r\n          var newPromise = new promiseObj(function (resolve, reject) {\r\n            imageToBlobInfo(blobCache, img, resolve, reject);\r\n          }).then(function (result) {\r\n            delete cachedPromises[result.image.src];\r\n            return result;\r\n          }).catch(function (error) {\r\n            delete cachedPromises[img.src];\r\n            return error;\r\n          });\r\n          cachedPromises[img.src] = newPromise;\r\n          return newPromise;\r\n        });\r\n        return promiseObj.all(promises);\r\n      };\r\n      return { findAll: findAll };\r\n    };\r\n\r\n    var paddEmptyNode = function (settings, args, blockElements, node) {\r\n      var brPreferred = settings.padd_empty_with_br || args.insert;\r\n      if (brPreferred && blockElements[node.name]) {\r\n        node.empty().append(new AstNode('br', 1)).shortEnded = true;\r\n      } else {\r\n        node.empty().append(new AstNode('#text', 3)).value = nbsp;\r\n      }\r\n    };\r\n    var isPaddedWithNbsp = function (node) {\r\n      return hasOnlyChild(node, '#text') && node.firstChild.value === nbsp;\r\n    };\r\n    var hasOnlyChild = function (node, name) {\r\n      return node && node.firstChild && node.firstChild === node.lastChild && node.firstChild.name === name;\r\n    };\r\n    var isPadded = function (schema, node) {\r\n      var rule = schema.getElementRule(node.name);\r\n      return rule && rule.paddEmpty;\r\n    };\r\n    var isEmpty = function (schema, nonEmptyElements, whitespaceElements, node) {\r\n      return node.isEmpty(nonEmptyElements, whitespaceElements, function (node) {\r\n        return isPadded(schema, node);\r\n      });\r\n    };\r\n    var isLineBreakNode = function (node, blockElements) {\r\n      return node && (has$2(blockElements, node.name) || node.name === 'br');\r\n    };\r\n\r\n    var isBogusImage = function (img) {\r\n      return isNonNullable(img.attr('data-mce-bogus'));\r\n    };\r\n    var isInternalImageSource = function (img) {\r\n      return img.attr('src') === Env.transparentSrc || isNonNullable(img.attr('data-mce-placeholder'));\r\n    };\r\n    var isValidDataImg = function (img, settings) {\r\n      if (settings.images_dataimg_filter) {\r\n        var imgElem_1 = new Image();\r\n        imgElem_1.src = img.attr('src');\r\n        each$j(img.attributes.map, function (value, key) {\r\n          imgElem_1.setAttribute(key, value);\r\n        });\r\n        return settings.images_dataimg_filter(imgElem_1);\r\n      } else {\r\n        return true;\r\n      }\r\n    };\r\n    var registerBase64ImageFilter = function (parser, settings) {\r\n      var blobCache = settings.blob_cache;\r\n      var processImage = function (img) {\r\n        var inputSrc = img.attr('src');\r\n        if (isInternalImageSource(img) || isBogusImage(img)) {\r\n          return;\r\n        }\r\n        parseDataUri$1(inputSrc).filter(function () {\r\n          return isValidDataImg(img, settings);\r\n        }).bind(function (_a) {\r\n          var type = _a.type, data = _a.data;\r\n          return Optional.from(blobCache.getByData(data, type)).orThunk(function () {\r\n            return buildBlob(type, data).map(function (blob) {\r\n              var blobInfo = blobCache.create(uniqueId(), blob, data);\r\n              blobCache.add(blobInfo);\r\n              return blobInfo;\r\n            });\r\n          });\r\n        }).each(function (blobInfo) {\r\n          img.attr('src', blobInfo.blobUri());\r\n        });\r\n      };\r\n      if (blobCache) {\r\n        parser.addAttributeFilter('src', function (nodes) {\r\n          return each$k(nodes, processImage);\r\n        });\r\n      }\r\n    };\r\n    var register$1 = function (parser, settings) {\r\n      var schema = parser.schema;\r\n      if (settings.remove_trailing_brs) {\r\n        parser.addNodeFilter('br', function (nodes, _, args) {\r\n          var i;\r\n          var l = nodes.length;\r\n          var node;\r\n          var blockElements = Tools.extend({}, schema.getBlockElements());\r\n          var nonEmptyElements = schema.getNonEmptyElements();\r\n          var parent, lastParent, prev, prevName;\r\n          var whiteSpaceElements = schema.getWhiteSpaceElements();\r\n          var elementRule, textNode;\r\n          blockElements.body = 1;\r\n          for (i = 0; i < l; i++) {\r\n            node = nodes[i];\r\n            parent = node.parent;\r\n            if (blockElements[node.parent.name] && node === parent.lastChild) {\r\n              prev = node.prev;\r\n              while (prev) {\r\n                prevName = prev.name;\r\n                if (prevName !== 'span' || prev.attr('data-mce-type') !== 'bookmark') {\r\n                  if (prevName === 'br') {\r\n                    node = null;\r\n                  }\r\n                  break;\r\n                }\r\n                prev = prev.prev;\r\n              }\r\n              if (node) {\r\n                node.remove();\r\n                if (isEmpty(schema, nonEmptyElements, whiteSpaceElements, parent)) {\r\n                  elementRule = schema.getElementRule(parent.name);\r\n                  if (elementRule) {\r\n                    if (elementRule.removeEmpty) {\r\n                      parent.remove();\r\n                    } else if (elementRule.paddEmpty) {\r\n                      paddEmptyNode(settings, args, blockElements, parent);\r\n                    }\r\n                  }\r\n                }\r\n              }\r\n            } else {\r\n              lastParent = node;\r\n              while (parent && parent.firstChild === lastParent && parent.lastChild === lastParent) {\r\n                lastParent = parent;\r\n                if (blockElements[parent.name]) {\r\n                  break;\r\n                }\r\n                parent = parent.parent;\r\n              }\r\n              if (lastParent === parent && settings.padd_empty_with_br !== true) {\r\n                textNode = new AstNode('#text', 3);\r\n                textNode.value = nbsp;\r\n                node.replace(textNode);\r\n              }\r\n            }\r\n          }\r\n        });\r\n      }\r\n      parser.addAttributeFilter('href', function (nodes) {\r\n        var i = nodes.length;\r\n        var appendRel = function (rel) {\r\n          var parts = rel.split(' ').filter(function (p) {\r\n            return p.length > 0;\r\n          });\r\n          return parts.concat(['noopener']).sort().join(' ');\r\n        };\r\n        var addNoOpener = function (rel) {\r\n          var newRel = rel ? Tools.trim(rel) : '';\r\n          if (!/\\b(noopener)\\b/g.test(newRel)) {\r\n            return appendRel(newRel);\r\n          } else {\r\n            return newRel;\r\n          }\r\n        };\r\n        if (!settings.allow_unsafe_link_target) {\r\n          while (i--) {\r\n            var node = nodes[i];\r\n            if (node.name === 'a' && node.attr('target') === '_blank') {\r\n              node.attr('rel', addNoOpener(node.attr('rel')));\r\n            }\r\n          }\r\n        }\r\n      });\r\n      if (!settings.allow_html_in_named_anchor) {\r\n        parser.addAttributeFilter('id,name', function (nodes) {\r\n          var i = nodes.length, sibling, prevSibling, parent, node;\r\n          while (i--) {\r\n            node = nodes[i];\r\n            if (node.name === 'a' && node.firstChild && !node.attr('href')) {\r\n              parent = node.parent;\r\n              sibling = node.lastChild;\r\n              do {\r\n                prevSibling = sibling.prev;\r\n                parent.insert(sibling, node);\r\n                sibling = prevSibling;\r\n              } while (sibling);\r\n            }\r\n          }\r\n        });\r\n      }\r\n      if (settings.fix_list_elements) {\r\n        parser.addNodeFilter('ul,ol', function (nodes) {\r\n          var i = nodes.length, node, parentNode;\r\n          while (i--) {\r\n            node = nodes[i];\r\n            parentNode = node.parent;\r\n            if (parentNode.name === 'ul' || parentNode.name === 'ol') {\r\n              if (node.prev && node.prev.name === 'li') {\r\n                node.prev.append(node);\r\n              } else {\r\n                var li = new AstNode('li', 1);\r\n                li.attr('style', 'list-style-type: none');\r\n                node.wrap(li);\r\n              }\r\n            }\r\n          }\r\n        });\r\n      }\r\n      if (settings.validate && schema.getValidClasses()) {\r\n        parser.addAttributeFilter('class', function (nodes) {\r\n          var validClasses = schema.getValidClasses();\r\n          var i = nodes.length;\r\n          while (i--) {\r\n            var node = nodes[i];\r\n            var classList = node.attr('class').split(' ');\r\n            var classValue = '';\r\n            for (var ci = 0; ci < classList.length; ci++) {\r\n              var className = classList[ci];\r\n              var valid = false;\r\n              var validClassesMap = validClasses['*'];\r\n              if (validClassesMap && validClassesMap[className]) {\r\n                valid = true;\r\n              }\r\n              validClassesMap = validClasses[node.name];\r\n              if (!valid && validClassesMap && validClassesMap[className]) {\r\n                valid = true;\r\n              }\r\n              if (valid) {\r\n                if (classValue) {\r\n                  classValue += ' ';\r\n                }\r\n                classValue += className;\r\n              }\r\n            }\r\n            if (!classValue.length) {\r\n              classValue = null;\r\n            }\r\n            node.attr('class', classValue);\r\n          }\r\n        });\r\n      }\r\n      registerBase64ImageFilter(parser, settings);\r\n    };\r\n\r\n    var makeMap = Tools.makeMap, each$6 = Tools.each, explode$2 = Tools.explode, extend$4 = Tools.extend;\r\n    var DomParser = function (settings, schema) {\r\n      if (schema === void 0) {\r\n        schema = Schema();\r\n      }\r\n      var nodeFilters = {};\r\n      var attributeFilters = [];\r\n      var matchedNodes = {};\r\n      var matchedAttributes = {};\r\n      settings = settings || {};\r\n      settings.validate = 'validate' in settings ? settings.validate : true;\r\n      settings.root_name = settings.root_name || 'body';\r\n      var fixInvalidChildren = function (nodes) {\r\n        var nonSplitableElements = makeMap('tr,td,th,tbody,thead,tfoot,table');\r\n        var nonEmptyElements = schema.getNonEmptyElements();\r\n        var whitespaceElements = schema.getWhiteSpaceElements();\r\n        var textBlockElements = schema.getTextBlockElements();\r\n        var specialElements = schema.getSpecialElements();\r\n        var removeOrUnwrapInvalidNode = function (node, originalNodeParent) {\r\n          if (originalNodeParent === void 0) {\r\n            originalNodeParent = node.parent;\r\n          }\r\n          if (specialElements[node.name]) {\r\n            node.empty().remove();\r\n          } else {\r\n            var children = node.children();\r\n            for (var _i = 0, children_1 = children; _i < children_1.length; _i++) {\r\n              var childNode = children_1[_i];\r\n              if (!schema.isValidChild(originalNodeParent.name, childNode.name)) {\r\n                removeOrUnwrapInvalidNode(childNode, originalNodeParent);\r\n              }\r\n            }\r\n            node.unwrap();\r\n          }\r\n        };\r\n        for (var ni = 0; ni < nodes.length; ni++) {\r\n          var node = nodes[ni];\r\n          var parent_1 = void 0, newParent = void 0, tempNode = void 0;\r\n          if (!node.parent || node.fixed) {\r\n            continue;\r\n          }\r\n          if (textBlockElements[node.name] && node.parent.name === 'li') {\r\n            var sibling = node.next;\r\n            while (sibling) {\r\n              if (textBlockElements[sibling.name]) {\r\n                sibling.name = 'li';\r\n                sibling.fixed = true;\r\n                node.parent.insert(sibling, node.parent);\r\n              } else {\r\n                break;\r\n              }\r\n              sibling = sibling.next;\r\n            }\r\n            node.unwrap();\r\n            continue;\r\n          }\r\n          var parents = [node];\r\n          for (parent_1 = node.parent; parent_1 && !schema.isValidChild(parent_1.name, node.name) && !nonSplitableElements[parent_1.name]; parent_1 = parent_1.parent) {\r\n            parents.push(parent_1);\r\n          }\r\n          if (parent_1 && parents.length > 1) {\r\n            if (schema.isValidChild(parent_1.name, node.name)) {\r\n              parents.reverse();\r\n              newParent = filterNode(parents[0].clone());\r\n              var currentNode = newParent;\r\n              for (var i = 0; i < parents.length - 1; i++) {\r\n                if (schema.isValidChild(currentNode.name, parents[i].name)) {\r\n                  tempNode = filterNode(parents[i].clone());\r\n                  currentNode.append(tempNode);\r\n                } else {\r\n                  tempNode = currentNode;\r\n                }\r\n                for (var childNode = parents[i].firstChild; childNode && childNode !== parents[i + 1];) {\r\n                  var nextNode = childNode.next;\r\n                  tempNode.append(childNode);\r\n                  childNode = nextNode;\r\n                }\r\n                currentNode = tempNode;\r\n              }\r\n              if (!isEmpty(schema, nonEmptyElements, whitespaceElements, newParent)) {\r\n                parent_1.insert(newParent, parents[0], true);\r\n                parent_1.insert(node, newParent);\r\n              } else {\r\n                parent_1.insert(node, parents[0], true);\r\n              }\r\n              parent_1 = parents[0];\r\n              if (isEmpty(schema, nonEmptyElements, whitespaceElements, parent_1) || hasOnlyChild(parent_1, 'br')) {\r\n                parent_1.empty().remove();\r\n              }\r\n            } else {\r\n              removeOrUnwrapInvalidNode(node);\r\n            }\r\n          } else if (node.parent) {\r\n            if (node.name === 'li') {\r\n              var sibling = node.prev;\r\n              if (sibling && (sibling.name === 'ul' || sibling.name === 'ol')) {\r\n                sibling.append(node);\r\n                continue;\r\n              }\r\n              sibling = node.next;\r\n              if (sibling && (sibling.name === 'ul' || sibling.name === 'ol')) {\r\n                sibling.insert(node, sibling.firstChild, true);\r\n                continue;\r\n              }\r\n              node.wrap(filterNode(new AstNode('ul', 1)));\r\n              continue;\r\n            }\r\n            if (schema.isValidChild(node.parent.name, 'div') && schema.isValidChild('div', node.name)) {\r\n              node.wrap(filterNode(new AstNode('div', 1)));\r\n            } else {\r\n              removeOrUnwrapInvalidNode(node);\r\n            }\r\n          }\r\n        }\r\n      };\r\n      var filterNode = function (node) {\r\n        var name = node.name;\r\n        if (name in nodeFilters) {\r\n          var list = matchedNodes[name];\r\n          if (list) {\r\n            list.push(node);\r\n          } else {\r\n            matchedNodes[name] = [node];\r\n          }\r\n        }\r\n        var i = attributeFilters.length;\r\n        while (i--) {\r\n          var attrName = attributeFilters[i].name;\r\n          if (attrName in node.attributes.map) {\r\n            var list = matchedAttributes[attrName];\r\n            if (list) {\r\n              list.push(node);\r\n            } else {\r\n              matchedAttributes[attrName] = [node];\r\n            }\r\n          }\r\n        }\r\n        return node;\r\n      };\r\n      var addNodeFilter = function (name, callback) {\r\n        each$6(explode$2(name), function (name) {\r\n          var list = nodeFilters[name];\r\n          if (!list) {\r\n            nodeFilters[name] = list = [];\r\n          }\r\n          list.push(callback);\r\n        });\r\n      };\r\n      var getNodeFilters = function () {\r\n        var out = [];\r\n        for (var name_1 in nodeFilters) {\r\n          if (has$2(nodeFilters, name_1)) {\r\n            out.push({\r\n              name: name_1,\r\n              callbacks: nodeFilters[name_1]\r\n            });\r\n          }\r\n        }\r\n        return out;\r\n      };\r\n      var addAttributeFilter = function (name, callback) {\r\n        each$6(explode$2(name), function (name) {\r\n          var i;\r\n          for (i = 0; i < attributeFilters.length; i++) {\r\n            if (attributeFilters[i].name === name) {\r\n              attributeFilters[i].callbacks.push(callback);\r\n              return;\r\n            }\r\n          }\r\n          attributeFilters.push({\r\n            name: name,\r\n            callbacks: [callback]\r\n          });\r\n        });\r\n      };\r\n      var getAttributeFilters = function () {\r\n        return [].concat(attributeFilters);\r\n      };\r\n      var parse = function (html, args) {\r\n        var nodes, i, l, fi, fl, list, name;\r\n        var invalidChildren = [];\r\n        var node;\r\n        var getRootBlockName = function (name) {\r\n          if (name === false) {\r\n            return '';\r\n          } else if (name === true) {\r\n            return 'p';\r\n          } else {\r\n            return name;\r\n          }\r\n        };\r\n        args = args || {};\r\n        matchedNodes = {};\r\n        matchedAttributes = {};\r\n        var blockElements = extend$4(makeMap('script,style,head,html,body,title,meta,param'), schema.getBlockElements());\r\n        var textRootBlockElements = getTextRootBlockElements(schema);\r\n        var nonEmptyElements = schema.getNonEmptyElements();\r\n        var children = schema.children;\r\n        var validate = settings.validate;\r\n        var forcedRootBlockName = 'forced_root_block' in args ? args.forced_root_block : settings.forced_root_block;\r\n        var rootBlockName = getRootBlockName(forcedRootBlockName);\r\n        var whiteSpaceElements = schema.getWhiteSpaceElements();\r\n        var startWhiteSpaceRegExp = /^[ \\t\\r\\n]+/;\r\n        var endWhiteSpaceRegExp = /[ \\t\\r\\n]+$/;\r\n        var allWhiteSpaceRegExp = /[ \\t\\r\\n]+/g;\r\n        var isAllWhiteSpaceRegExp = /^[ \\t\\r\\n]+$/;\r\n        var isInWhiteSpacePreservedElement = has$2(whiteSpaceElements, args.context) || has$2(whiteSpaceElements, settings.root_name);\r\n        var addRootBlocks = function () {\r\n          var node = rootNode.firstChild, rootBlockNode = null;\r\n          var trim = function (rootBlock) {\r\n            if (rootBlock) {\r\n              node = rootBlock.firstChild;\r\n              if (node && node.type === 3) {\r\n                node.value = node.value.replace(startWhiteSpaceRegExp, '');\r\n              }\r\n              node = rootBlock.lastChild;\r\n              if (node && node.type === 3) {\r\n                node.value = node.value.replace(endWhiteSpaceRegExp, '');\r\n              }\r\n            }\r\n          };\r\n          if (!schema.isValidChild(rootNode.name, rootBlockName.toLowerCase())) {\r\n            return;\r\n          }\r\n          while (node) {\r\n            var next = node.next;\r\n            if (node.type === 3 || node.type === 1 && node.name !== 'p' && !blockElements[node.name] && !node.attr('data-mce-type')) {\r\n              if (!rootBlockNode) {\r\n                rootBlockNode = createNode(rootBlockName, 1);\r\n                rootBlockNode.attr(settings.forced_root_block_attrs);\r\n                rootNode.insert(rootBlockNode, node);\r\n                rootBlockNode.append(node);\r\n              } else {\r\n                rootBlockNode.append(node);\r\n              }\r\n            } else {\r\n              trim(rootBlockNode);\r\n              rootBlockNode = null;\r\n            }\r\n            node = next;\r\n          }\r\n          trim(rootBlockNode);\r\n        };\r\n        var createNode = function (name, type) {\r\n          var node = new AstNode(name, type);\r\n          var list;\r\n          if (name in nodeFilters) {\r\n            list = matchedNodes[name];\r\n            if (list) {\r\n              list.push(node);\r\n            } else {\r\n              matchedNodes[name] = [node];\r\n            }\r\n          }\r\n          return node;\r\n        };\r\n        var removeWhitespaceBefore = function (node) {\r\n          var blockElements = schema.getBlockElements();\r\n          for (var textNode = node.prev; textNode && textNode.type === 3;) {\r\n            var textVal = textNode.value.replace(endWhiteSpaceRegExp, '');\r\n            if (textVal.length > 0) {\r\n              textNode.value = textVal;\r\n              return;\r\n            }\r\n            var textNodeNext = textNode.next;\r\n            if (textNodeNext) {\r\n              if (textNodeNext.type === 3 && textNodeNext.value.length) {\r\n                textNode = textNode.prev;\r\n                continue;\r\n              }\r\n              if (!blockElements[textNodeNext.name] && textNodeNext.name !== 'script' && textNodeNext.name !== 'style') {\r\n                textNode = textNode.prev;\r\n                continue;\r\n              }\r\n            }\r\n            var sibling = textNode.prev;\r\n            textNode.remove();\r\n            textNode = sibling;\r\n          }\r\n        };\r\n        var cloneAndExcludeBlocks = function (input) {\r\n          var output = {};\r\n          for (var name_2 in input) {\r\n            if (name_2 !== 'li' && name_2 !== 'p') {\r\n              output[name_2] = input[name_2];\r\n            }\r\n          }\r\n          return output;\r\n        };\r\n        var isTextRootBlockEmpty = function (node) {\r\n          var tempNode = node;\r\n          while (isNonNullable(tempNode)) {\r\n            if (tempNode.name in textRootBlockElements) {\r\n              return isEmpty(schema, nonEmptyElements, whiteSpaceElements, tempNode);\r\n            } else {\r\n              tempNode = tempNode.parent;\r\n            }\r\n          }\r\n          return false;\r\n        };\r\n        var parser = SaxParser({\r\n          validate: validate,\r\n          document: settings.document,\r\n          allow_html_data_urls: settings.allow_html_data_urls,\r\n          allow_svg_data_urls: settings.allow_svg_data_urls,\r\n          allow_script_urls: settings.allow_script_urls,\r\n          allow_conditional_comments: settings.allow_conditional_comments,\r\n          preserve_cdata: settings.preserve_cdata,\r\n          self_closing_elements: cloneAndExcludeBlocks(schema.getSelfClosingElements()),\r\n          cdata: function (text) {\r\n            node.append(createNode('#cdata', 4)).value = text;\r\n          },\r\n          text: function (text, raw) {\r\n            var textNode;\r\n            if (!isInWhiteSpacePreservedElement) {\r\n              text = text.replace(allWhiteSpaceRegExp, ' ');\r\n              if (isLineBreakNode(node.lastChild, blockElements)) {\r\n                text = text.replace(startWhiteSpaceRegExp, '');\r\n              }\r\n            }\r\n            if (text.length !== 0) {\r\n              textNode = createNode('#text', 3);\r\n              textNode.raw = !!raw;\r\n              node.append(textNode).value = text;\r\n            }\r\n          },\r\n          comment: function (text) {\r\n            node.append(createNode('#comment', 8)).value = text;\r\n          },\r\n          pi: function (name, text) {\r\n            node.append(createNode(name, 7)).value = text;\r\n            removeWhitespaceBefore(node);\r\n          },\r\n          doctype: function (text) {\r\n            var newNode = node.append(createNode('#doctype', 10));\r\n            newNode.value = text;\r\n            removeWhitespaceBefore(node);\r\n          },\r\n          start: function (name, attrs, empty) {\r\n            var elementRule = validate ? schema.getElementRule(name) : {};\r\n            if (elementRule) {\r\n              var newNode = createNode(elementRule.outputName || name, 1);\r\n              newNode.attributes = attrs;\r\n              newNode.shortEnded = empty;\r\n              node.append(newNode);\r\n              var parent_2 = children[node.name];\r\n              if (parent_2 && children[newNode.name] && !parent_2[newNode.name]) {\r\n                invalidChildren.push(newNode);\r\n              }\r\n              var attrFiltersLen = attributeFilters.length;\r\n              while (attrFiltersLen--) {\r\n                var attrName = attributeFilters[attrFiltersLen].name;\r\n                if (attrName in attrs.map) {\r\n                  list = matchedAttributes[attrName];\r\n                  if (list) {\r\n                    list.push(newNode);\r\n                  } else {\r\n                    matchedAttributes[attrName] = [newNode];\r\n                  }\r\n                }\r\n              }\r\n              if (blockElements[name]) {\r\n                removeWhitespaceBefore(newNode);\r\n              }\r\n              if (!empty) {\r\n                node = newNode;\r\n              }\r\n              if (!isInWhiteSpacePreservedElement && whiteSpaceElements[name]) {\r\n                isInWhiteSpacePreservedElement = true;\r\n              }\r\n            }\r\n          },\r\n          end: function (name) {\r\n            var textNode, text, sibling;\r\n            var elementRule = validate ? schema.getElementRule(name) : {};\r\n            if (elementRule) {\r\n              if (blockElements[name]) {\r\n                if (!isInWhiteSpacePreservedElement) {\r\n                  textNode = node.firstChild;\r\n                  if (textNode && textNode.type === 3) {\r\n                    text = textNode.value.replace(startWhiteSpaceRegExp, '');\r\n                    if (text.length > 0) {\r\n                      textNode.value = text;\r\n                      textNode = textNode.next;\r\n                    } else {\r\n                      sibling = textNode.next;\r\n                      textNode.remove();\r\n                      textNode = sibling;\r\n                      while (textNode && textNode.type === 3) {\r\n                        text = textNode.value;\r\n                        sibling = textNode.next;\r\n                        if (text.length === 0 || isAllWhiteSpaceRegExp.test(text)) {\r\n                          textNode.remove();\r\n                          textNode = sibling;\r\n                        }\r\n                        textNode = sibling;\r\n                      }\r\n                    }\r\n                  }\r\n                  textNode = node.lastChild;\r\n                  if (textNode && textNode.type === 3) {\r\n                    text = textNode.value.replace(endWhiteSpaceRegExp, '');\r\n                    if (text.length > 0) {\r\n                      textNode.value = text;\r\n                      textNode = textNode.prev;\r\n                    } else {\r\n                      sibling = textNode.prev;\r\n                      textNode.remove();\r\n                      textNode = sibling;\r\n                      while (textNode && textNode.type === 3) {\r\n                        text = textNode.value;\r\n                        sibling = textNode.prev;\r\n                        if (text.length === 0 || isAllWhiteSpaceRegExp.test(text)) {\r\n                          textNode.remove();\r\n                          textNode = sibling;\r\n                        }\r\n                        textNode = sibling;\r\n                      }\r\n                    }\r\n                  }\r\n                }\r\n              }\r\n              if (isInWhiteSpacePreservedElement && whiteSpaceElements[name]) {\r\n                isInWhiteSpacePreservedElement = false;\r\n              }\r\n              var isNodeEmpty = isEmpty(schema, nonEmptyElements, whiteSpaceElements, node);\r\n              var parentNode = node.parent;\r\n              if (elementRule.paddInEmptyBlock && isNodeEmpty && isTextRootBlockEmpty(node)) {\r\n                paddEmptyNode(settings, args, blockElements, node);\r\n              } else if (elementRule.removeEmpty && isNodeEmpty) {\r\n                if (blockElements[node.name]) {\r\n                  node.empty().remove();\r\n                } else {\r\n                  node.unwrap();\r\n                }\r\n              } else if (elementRule.paddEmpty && (isPaddedWithNbsp(node) || isNodeEmpty)) {\r\n                paddEmptyNode(settings, args, blockElements, node);\r\n              }\r\n              node = parentNode;\r\n            }\r\n          }\r\n        }, schema);\r\n        var rootNode = node = new AstNode(args.context || settings.root_name, 11);\r\n        parser.parse(html, args.format);\r\n        if (validate && invalidChildren.length) {\r\n          if (!args.context) {\r\n            fixInvalidChildren(invalidChildren);\r\n          } else {\r\n            args.invalid = true;\r\n          }\r\n        }\r\n        if (rootBlockName && (rootNode.name === 'body' || args.isRootContent)) {\r\n          addRootBlocks();\r\n        }\r\n        if (!args.invalid) {\r\n          for (name in matchedNodes) {\r\n            if (!has$2(matchedNodes, name)) {\r\n              continue;\r\n            }\r\n            list = nodeFilters[name];\r\n            nodes = matchedNodes[name];\r\n            fi = nodes.length;\r\n            while (fi--) {\r\n              if (!nodes[fi].parent) {\r\n                nodes.splice(fi, 1);\r\n              }\r\n            }\r\n            for (i = 0, l = list.length; i < l; i++) {\r\n              list[i](nodes, name, args);\r\n            }\r\n          }\r\n          for (i = 0, l = attributeFilters.length; i < l; i++) {\r\n            list = attributeFilters[i];\r\n            if (list.name in matchedAttributes) {\r\n              nodes = matchedAttributes[list.name];\r\n              fi = nodes.length;\r\n              while (fi--) {\r\n                if (!nodes[fi].parent) {\r\n                  nodes.splice(fi, 1);\r\n                }\r\n              }\r\n              for (fi = 0, fl = list.callbacks.length; fi < fl; fi++) {\r\n                list.callbacks[fi](nodes, list.name, args);\r\n              }\r\n            }\r\n          }\r\n        }\r\n        return rootNode;\r\n      };\r\n      var exports = {\r\n        schema: schema,\r\n        addAttributeFilter: addAttributeFilter,\r\n        getAttributeFilters: getAttributeFilters,\r\n        addNodeFilter: addNodeFilter,\r\n        getNodeFilters: getNodeFilters,\r\n        filterNode: filterNode,\r\n        parse: parse\r\n      };\r\n      register$1(exports, settings);\r\n      register$2(exports, settings);\r\n      return exports;\r\n    };\r\n\r\n    var register = function (htmlParser, settings, dom) {\r\n      htmlParser.addAttributeFilter('data-mce-tabindex', function (nodes, name) {\r\n        var i = nodes.length;\r\n        while (i--) {\r\n          var node = nodes[i];\r\n          node.attr('tabindex', node.attr('data-mce-tabindex'));\r\n          node.attr(name, null);\r\n        }\r\n      });\r\n      htmlParser.addAttributeFilter('src,href,style', function (nodes, name) {\r\n        var internalName = 'data-mce-' + name;\r\n        var urlConverter = settings.url_converter;\r\n        var urlConverterScope = settings.url_converter_scope;\r\n        var i = nodes.length;\r\n        while (i--) {\r\n          var node = nodes[i];\r\n          var value = node.attr(internalName);\r\n          if (value !== undefined) {\r\n            node.attr(name, value.length > 0 ? value : null);\r\n            node.attr(internalName, null);\r\n          } else {\r\n            value = node.attr(name);\r\n            if (name === 'style') {\r\n              value = dom.serializeStyle(dom.parseStyle(value), node.name);\r\n            } else if (urlConverter) {\r\n              value = urlConverter.call(urlConverterScope, value, name, node.name);\r\n            }\r\n            node.attr(name, value.length > 0 ? value : null);\r\n          }\r\n        }\r\n      });\r\n      htmlParser.addAttributeFilter('class', function (nodes) {\r\n        var i = nodes.length;\r\n        while (i--) {\r\n          var node = nodes[i];\r\n          var value = node.attr('class');\r\n          if (value) {\r\n            value = node.attr('class').replace(/(?:^|\\s)mce-item-\\w+(?!\\S)/g, '');\r\n            node.attr('class', value.length > 0 ? value : null);\r\n          }\r\n        }\r\n      });\r\n      htmlParser.addAttributeFilter('data-mce-type', function (nodes, name, args) {\r\n        var i = nodes.length;\r\n        while (i--) {\r\n          var node = nodes[i];\r\n          if (node.attr('data-mce-type') === 'bookmark' && !args.cleanup) {\r\n            var hasChildren = Optional.from(node.firstChild).exists(function (firstChild) {\r\n              return !isZwsp(firstChild.value);\r\n            });\r\n            if (hasChildren) {\r\n              node.unwrap();\r\n            } else {\r\n              node.remove();\r\n            }\r\n          }\r\n        }\r\n      });\r\n      htmlParser.addNodeFilter('noscript', function (nodes) {\r\n        var i = nodes.length;\r\n        while (i--) {\r\n          var node = nodes[i].firstChild;\r\n          if (node) {\r\n            node.value = Entities.decode(node.value);\r\n          }\r\n        }\r\n      });\r\n      htmlParser.addNodeFilter('script,style', function (nodes, name) {\r\n        var trim = function (value) {\r\n          return value.replace(/(<!--\\[CDATA\\[|\\]\\]-->)/g, '\\n').replace(/^[\\r\\n]*|[\\r\\n]*$/g, '').replace(/^\\s*((<!--)?(\\s*\\/\\/)?\\s*<!\\[CDATA\\[|(<!--\\s*)?\\/\\*\\s*<!\\[CDATA\\[\\s*\\*\\/|(\\/\\/)?\\s*<!--|\\/\\*\\s*<!--\\s*\\*\\/)\\s*[\\r\\n]*/gi, '').replace(/\\s*(\\/\\*\\s*\\]\\]>\\s*\\*\\/(-->)?|\\s*\\/\\/\\s*\\]\\]>(-->)?|\\/\\/\\s*(-->)?|\\]\\]>|\\/\\*\\s*-->\\s*\\*\\/|\\s*-->\\s*)\\s*$/g, '');\r\n        };\r\n        var i = nodes.length;\r\n        while (i--) {\r\n          var node = nodes[i];\r\n          var value = node.firstChild ? node.firstChild.value : '';\r\n          if (name === 'script') {\r\n            var type = node.attr('type');\r\n            if (type) {\r\n              node.attr('type', type === 'mce-no/type' ? null : type.replace(/^mce\\-/, ''));\r\n            }\r\n            if (settings.element_format === 'xhtml' && value.length > 0) {\r\n              node.firstChild.value = '// <![CDATA[\\n' + trim(value) + '\\n// ]]>';\r\n            }\r\n          } else {\r\n            if (settings.element_format === 'xhtml' && value.length > 0) {\r\n              node.firstChild.value = '<!--\\n' + trim(value) + '\\n-->';\r\n            }\r\n          }\r\n        }\r\n      });\r\n      htmlParser.addNodeFilter('#comment', function (nodes) {\r\n        var i = nodes.length;\r\n        while (i--) {\r\n          var node = nodes[i];\r\n          if (settings.preserve_cdata && node.value.indexOf('[CDATA[') === 0) {\r\n            node.name = '#cdata';\r\n            node.type = 4;\r\n            node.value = dom.decode(node.value.replace(/^\\[CDATA\\[|\\]\\]$/g, ''));\r\n          } else if (node.value.indexOf('mce:protected ') === 0) {\r\n            node.name = '#text';\r\n            node.type = 3;\r\n            node.raw = true;\r\n            node.value = unescape(node.value).substr(14);\r\n          }\r\n        }\r\n      });\r\n      htmlParser.addNodeFilter('xml:namespace,input', function (nodes, name) {\r\n        var i = nodes.length;\r\n        while (i--) {\r\n          var node = nodes[i];\r\n          if (node.type === 7) {\r\n            node.remove();\r\n          } else if (node.type === 1) {\r\n            if (name === 'input' && !node.attr('type')) {\r\n              node.attr('type', 'text');\r\n            }\r\n          }\r\n        }\r\n      });\r\n      htmlParser.addAttributeFilter('data-mce-type', function (nodes) {\r\n        each$k(nodes, function (node) {\r\n          if (node.attr('data-mce-type') === 'format-caret') {\r\n            if (node.isEmpty(htmlParser.schema.getNonEmptyElements())) {\r\n              node.remove();\r\n            } else {\r\n              node.unwrap();\r\n            }\r\n          }\r\n        });\r\n      });\r\n      htmlParser.addAttributeFilter('data-mce-src,data-mce-href,data-mce-style,' + 'data-mce-selected,data-mce-expando,' + 'data-mce-type,data-mce-resize,data-mce-placeholder', function (nodes, name) {\r\n        var i = nodes.length;\r\n        while (i--) {\r\n          nodes[i].attr(name, null);\r\n        }\r\n      });\r\n    };\r\n    var trimTrailingBr = function (rootNode) {\r\n      var isBr = function (node) {\r\n        return node && node.name === 'br';\r\n      };\r\n      var brNode1 = rootNode.lastChild;\r\n      if (isBr(brNode1)) {\r\n        var brNode2 = brNode1.prev;\r\n        if (isBr(brNode2)) {\r\n          brNode1.remove();\r\n          brNode2.remove();\r\n        }\r\n      }\r\n    };\r\n\r\n    var preProcess = function (editor, node, args) {\r\n      var oldDoc;\r\n      var dom = editor.dom;\r\n      var clonedNode = node.cloneNode(true);\r\n      var impl = document.implementation;\r\n      if (impl.createHTMLDocument) {\r\n        var doc_1 = impl.createHTMLDocument('');\r\n        Tools.each(clonedNode.nodeName === 'BODY' ? clonedNode.childNodes : [clonedNode], function (node) {\r\n          doc_1.body.appendChild(doc_1.importNode(node, true));\r\n        });\r\n        if (clonedNode.nodeName !== 'BODY') {\r\n          clonedNode = doc_1.body.firstChild;\r\n        } else {\r\n          clonedNode = doc_1.body;\r\n        }\r\n        oldDoc = dom.doc;\r\n        dom.doc = doc_1;\r\n      }\r\n      firePreProcess(editor, __assign(__assign({}, args), { node: clonedNode }));\r\n      if (oldDoc) {\r\n        dom.doc = oldDoc;\r\n      }\r\n      return clonedNode;\r\n    };\r\n    var shouldFireEvent = function (editor, args) {\r\n      return editor && editor.hasEventListeners('PreProcess') && !args.no_events;\r\n    };\r\n    var process = function (editor, node, args) {\r\n      return shouldFireEvent(editor, args) ? preProcess(editor, node, args) : node;\r\n    };\r\n\r\n    var addTempAttr = function (htmlParser, tempAttrs, name) {\r\n      if (Tools.inArray(tempAttrs, name) === -1) {\r\n        htmlParser.addAttributeFilter(name, function (nodes, name) {\r\n          var i = nodes.length;\r\n          while (i--) {\r\n            nodes[i].attr(name, null);\r\n          }\r\n        });\r\n        tempAttrs.push(name);\r\n      }\r\n    };\r\n    var postProcess = function (editor, args, content) {\r\n      if (!args.no_events && editor) {\r\n        var outArgs = firePostProcess(editor, __assign(__assign({}, args), { content: content }));\r\n        return outArgs.content;\r\n      } else {\r\n        return content;\r\n      }\r\n    };\r\n    var getHtmlFromNode = function (dom, node, args) {\r\n      var html = trim$2(args.getInner ? node.innerHTML : dom.getOuterHTML(node));\r\n      return args.selection || isWsPreserveElement(SugarElement.fromDom(node)) ? html : Tools.trim(html);\r\n    };\r\n    var parseHtml = function (htmlParser, html, args) {\r\n      var parserArgs = args.selection ? __assign({ forced_root_block: false }, args) : args;\r\n      var rootNode = htmlParser.parse(html, parserArgs);\r\n      trimTrailingBr(rootNode);\r\n      return rootNode;\r\n    };\r\n    var serializeNode = function (settings, schema, node) {\r\n      var htmlSerializer = HtmlSerializer(settings, schema);\r\n      return htmlSerializer.serialize(node);\r\n    };\r\n    var toHtml = function (editor, settings, schema, rootNode, args) {\r\n      var content = serializeNode(settings, schema, rootNode);\r\n      return postProcess(editor, args, content);\r\n    };\r\n    var DomSerializerImpl = function (settings, editor) {\r\n      var tempAttrs = ['data-mce-selected'];\r\n      var dom = editor && editor.dom ? editor.dom : DOMUtils.DOM;\r\n      var schema = editor && editor.schema ? editor.schema : Schema(settings);\r\n      settings.entity_encoding = settings.entity_encoding || 'named';\r\n      settings.remove_trailing_brs = 'remove_trailing_brs' in settings ? settings.remove_trailing_brs : true;\r\n      var htmlParser = DomParser(settings, schema);\r\n      register(htmlParser, settings, dom);\r\n      var serialize = function (node, parserArgs) {\r\n        if (parserArgs === void 0) {\r\n          parserArgs = {};\r\n        }\r\n        var args = __assign({ format: 'html' }, parserArgs);\r\n        var targetNode = process(editor, node, args);\r\n        var html = getHtmlFromNode(dom, targetNode, args);\r\n        var rootNode = parseHtml(htmlParser, html, args);\r\n        return args.format === 'tree' ? rootNode : toHtml(editor, settings, schema, rootNode, args);\r\n      };\r\n      return {\r\n        schema: schema,\r\n        addNodeFilter: htmlParser.addNodeFilter,\r\n        addAttributeFilter: htmlParser.addAttributeFilter,\r\n        serialize: serialize,\r\n        addRules: schema.addValidElements,\r\n        setRules: schema.setValidElements,\r\n        addTempAttr: curry(addTempAttr, htmlParser, tempAttrs),\r\n        getTempAttrs: constant(tempAttrs),\r\n        getNodeFilters: htmlParser.getNodeFilters,\r\n        getAttributeFilters: htmlParser.getAttributeFilters\r\n      };\r\n    };\r\n\r\n    var DomSerializer = function (settings, editor) {\r\n      var domSerializer = DomSerializerImpl(settings, editor);\r\n      return {\r\n        schema: domSerializer.schema,\r\n        addNodeFilter: domSerializer.addNodeFilter,\r\n        addAttributeFilter: domSerializer.addAttributeFilter,\r\n        serialize: domSerializer.serialize,\r\n        addRules: domSerializer.addRules,\r\n        setRules: domSerializer.setRules,\r\n        addTempAttr: domSerializer.addTempAttr,\r\n        getTempAttrs: domSerializer.getTempAttrs,\r\n        getNodeFilters: domSerializer.getNodeFilters,\r\n        getAttributeFilters: domSerializer.getAttributeFilters\r\n      };\r\n    };\r\n\r\n    var defaultFormat = 'html';\r\n    var getContent = function (editor, args) {\r\n      if (args === void 0) {\r\n        args = {};\r\n      }\r\n      var format = args.format ? args.format : defaultFormat;\r\n      return getContent$2(editor, args, format);\r\n    };\r\n\r\n    var setContent = function (editor, content, args) {\r\n      if (args === void 0) {\r\n        args = {};\r\n      }\r\n      return setContent$2(editor, content, args);\r\n    };\r\n\r\n    var DOM$7 = DOMUtils.DOM;\r\n    var restoreOriginalStyles = function (editor) {\r\n      DOM$7.setStyle(editor.id, 'display', editor.orgDisplay);\r\n    };\r\n    var safeDestroy = function (x) {\r\n      return Optional.from(x).each(function (x) {\r\n        return x.destroy();\r\n      });\r\n    };\r\n    var clearDomReferences = function (editor) {\r\n      editor.contentAreaContainer = editor.formElement = editor.container = editor.editorContainer = null;\r\n      editor.bodyElement = editor.contentDocument = editor.contentWindow = null;\r\n      editor.iframeElement = editor.targetElm = null;\r\n      if (editor.selection) {\r\n        editor.selection = editor.selection.win = editor.selection.dom = editor.selection.dom.doc = null;\r\n      }\r\n    };\r\n    var restoreForm = function (editor) {\r\n      var form = editor.formElement;\r\n      if (form) {\r\n        if (form._mceOldSubmit) {\r\n          form.submit = form._mceOldSubmit;\r\n          form._mceOldSubmit = null;\r\n        }\r\n        DOM$7.unbind(form, 'submit reset', editor.formEventDelegate);\r\n      }\r\n    };\r\n    var remove = function (editor) {\r\n      if (!editor.removed) {\r\n        var _selectionOverrides = editor._selectionOverrides, editorUpload = editor.editorUpload;\r\n        var body = editor.getBody();\r\n        var element = editor.getElement();\r\n        if (body) {\r\n          editor.save({ is_removing: true });\r\n        }\r\n        editor.removed = true;\r\n        editor.unbindAllNativeEvents();\r\n        if (editor.hasHiddenInput && element) {\r\n          DOM$7.remove(element.nextSibling);\r\n        }\r\n        fireRemove(editor);\r\n        editor.editorManager.remove(editor);\r\n        if (!editor.inline && body) {\r\n          restoreOriginalStyles(editor);\r\n        }\r\n        fireDetach(editor);\r\n        DOM$7.remove(editor.getContainer());\r\n        safeDestroy(_selectionOverrides);\r\n        safeDestroy(editorUpload);\r\n        editor.destroy();\r\n      }\r\n    };\r\n    var destroy = function (editor, automatic) {\r\n      var selection = editor.selection, dom = editor.dom;\r\n      if (editor.destroyed) {\r\n        return;\r\n      }\r\n      if (!automatic && !editor.removed) {\r\n        editor.remove();\r\n        return;\r\n      }\r\n      if (!automatic) {\r\n        editor.editorManager.off('beforeunload', editor._beforeUnload);\r\n        if (editor.theme && editor.theme.destroy) {\r\n          editor.theme.destroy();\r\n        }\r\n        safeDestroy(selection);\r\n        safeDestroy(dom);\r\n      }\r\n      restoreForm(editor);\r\n      clearDomReferences(editor);\r\n      editor.destroyed = true;\r\n    };\r\n\r\n    var deep = function (old, nu) {\r\n      var bothObjects = isObject(old) && isObject(nu);\r\n      return bothObjects ? deepMerge(old, nu) : nu;\r\n    };\r\n    var baseMerge = function (merger) {\r\n      return function () {\r\n        var objects = [];\r\n        for (var _i = 0; _i < arguments.length; _i++) {\r\n          objects[_i] = arguments[_i];\r\n        }\r\n        if (objects.length === 0) {\r\n          throw new Error('Can\\'t merge zero objects');\r\n        }\r\n        var ret = {};\r\n        for (var j = 0; j < objects.length; j++) {\r\n          var curObject = objects[j];\r\n          for (var key in curObject) {\r\n            if (has$2(curObject, key)) {\r\n              ret[key] = merger(ret[key], curObject[key]);\r\n            }\r\n          }\r\n        }\r\n        return ret;\r\n      };\r\n    };\r\n    var deepMerge = baseMerge(deep);\r\n\r\n    var deprecatedSettings = ('autoresize_on_init,content_editable_state,convert_fonts_to_spans,inline_styles,padd_empty_with_br,block_elements,' + 'boolean_attributes,editor_deselector,editor_selector,elements,file_browser_callback_types,filepicker_validator_handler,' + 'force_hex_style_colors,force_p_newlines,gecko_spellcheck,images_dataimg_filter,media_scripts,mode,move_caret_before_on_enter_elements,' + 'non_empty_elements,self_closing_elements,short_ended_elements,special,spellchecker_select_languages,spellchecker_whitelist,' + 'tab_focus,table_responsive_width,text_block_elements,text_inline_elements,toolbar_drawer,types,validate,whitespace_elements,' + 'paste_word_valid_elements,paste_retain_style_properties,paste_convert_word_fake_lists').split(',');\r\n    var deprecatedPlugins = 'bbcode,colorpicker,contextmenu,fullpage,legacyoutput,spellchecker,textcolor'.split(',');\r\n    var movedToPremiumPlugins = 'imagetools,toc'.split(',');\r\n    var getDeprecatedSettings = function (settings) {\r\n      var settingNames = filter$4(deprecatedSettings, function (setting) {\r\n        return has$2(settings, setting);\r\n      });\r\n      var forcedRootBlock = settings.forced_root_block;\r\n      if (forcedRootBlock === false || forcedRootBlock === '') {\r\n        settingNames.push('forced_root_block (false only)');\r\n      }\r\n      return sort(settingNames);\r\n    };\r\n    var getDeprecatedPlugins = function (settings) {\r\n      var plugins = Tools.makeMap(settings.plugins, ' ');\r\n      var hasPlugin = function (plugin) {\r\n        return has$2(plugins, plugin);\r\n      };\r\n      var pluginNames = __spreadArray(__spreadArray([], filter$4(deprecatedPlugins, hasPlugin), true), bind(movedToPremiumPlugins, function (plugin) {\r\n        return hasPlugin(plugin) ? [plugin + ' (moving to premium)'] : [];\r\n      }), true);\r\n      return sort(pluginNames);\r\n    };\r\n    var logDeprecationsWarning = function (rawSettings, finalSettings) {\r\n      var deprecatedSettings = getDeprecatedSettings(rawSettings);\r\n      var deprecatedPlugins = getDeprecatedPlugins(finalSettings);\r\n      var hasDeprecatedPlugins = deprecatedPlugins.length > 0;\r\n      var hasDeprecatedSettings = deprecatedSettings.length > 0;\r\n      var isLegacyMobileTheme = finalSettings.theme === 'mobile';\r\n      if (hasDeprecatedPlugins || hasDeprecatedSettings || isLegacyMobileTheme) {\r\n        var listJoiner = '\\n- ';\r\n        var themesMessage = isLegacyMobileTheme ? '\\n\\nThemes:' + listJoiner + 'mobile' : '';\r\n        var pluginsMessage = hasDeprecatedPlugins ? '\\n\\nPlugins:' + listJoiner + deprecatedPlugins.join(listJoiner) : '';\r\n        var settingsMessage = hasDeprecatedSettings ? '\\n\\nSettings:' + listJoiner + deprecatedSettings.join(listJoiner) : '';\r\n        console.warn('The following deprecated features are currently enabled, these will be removed in TinyMCE 6.0. ' + 'See https://www.tiny.cloud/docs/release-notes/6.0-upcoming-changes/ for more information.' + themesMessage + pluginsMessage + settingsMessage);\r\n      }\r\n    };\r\n\r\n    var sectionResult = function (sections, settings) {\r\n      return {\r\n        sections: constant(sections),\r\n        settings: constant(settings)\r\n      };\r\n    };\r\n    var deviceDetection = detect().deviceType;\r\n    var isTouch = deviceDetection.isTouch();\r\n    var isPhone = deviceDetection.isPhone();\r\n    var isTablet = deviceDetection.isTablet();\r\n    var legacyMobilePlugins = [\r\n      'lists',\r\n      'autolink',\r\n      'autosave'\r\n    ];\r\n    var defaultTouchSettings = {\r\n      table_grid: false,\r\n      object_resizing: false,\r\n      resize: false\r\n    };\r\n    var normalizePlugins = function (plugins) {\r\n      var pluginNames = isArray$1(plugins) ? plugins.join(' ') : plugins;\r\n      var trimmedPlugins = map$3(isString$1(pluginNames) ? pluginNames.split(' ') : [], trim$4);\r\n      return filter$4(trimmedPlugins, function (item) {\r\n        return item.length > 0;\r\n      });\r\n    };\r\n    var filterLegacyMobilePlugins = function (plugins) {\r\n      return filter$4(plugins, curry(contains$3, legacyMobilePlugins));\r\n    };\r\n    var extractSections = function (keys, settings) {\r\n      var result = bifilter(settings, function (value, key) {\r\n        return contains$3(keys, key);\r\n      });\r\n      return sectionResult(result.t, result.f);\r\n    };\r\n    var getSection = function (sectionResult, name, defaults) {\r\n      if (defaults === void 0) {\r\n        defaults = {};\r\n      }\r\n      var sections = sectionResult.sections();\r\n      var sectionSettings = get$9(sections, name).getOr({});\r\n      return Tools.extend({}, defaults, sectionSettings);\r\n    };\r\n    var hasSection = function (sectionResult, name) {\r\n      return has$2(sectionResult.sections(), name);\r\n    };\r\n    var isSectionTheme = function (sectionResult, name, theme) {\r\n      var section = sectionResult.sections();\r\n      return hasSection(sectionResult, name) && section[name].theme === theme;\r\n    };\r\n    var getSectionConfig = function (sectionResult, name) {\r\n      return hasSection(sectionResult, name) ? sectionResult.sections()[name] : {};\r\n    };\r\n    var getToolbarMode = function (settings, defaultVal) {\r\n      return get$9(settings, 'toolbar_mode').orThunk(function () {\r\n        return get$9(settings, 'toolbar_drawer').map(function (val) {\r\n          return val === false ? 'wrap' : val;\r\n        });\r\n      }).getOr(defaultVal);\r\n    };\r\n    var getDefaultSettings = function (settings, id, documentBaseUrl, isTouch, editor) {\r\n      var baseDefaults = {\r\n        id: id,\r\n        theme: 'silver',\r\n        toolbar_mode: getToolbarMode(settings, 'floating'),\r\n        plugins: '',\r\n        document_base_url: documentBaseUrl,\r\n        add_form_submit_trigger: true,\r\n        submit_patch: true,\r\n        add_unload_trigger: true,\r\n        convert_urls: true,\r\n        relative_urls: true,\r\n        remove_script_host: true,\r\n        object_resizing: true,\r\n        doctype: '<!DOCTYPE html>',\r\n        visual: true,\r\n        font_size_legacy_values: 'xx-small,small,medium,large,x-large,xx-large,300%',\r\n        forced_root_block: 'p',\r\n        hidden_input: true,\r\n        inline_styles: true,\r\n        convert_fonts_to_spans: true,\r\n        indent: true,\r\n        indent_before: 'p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,th,ul,ol,li,dl,dt,dd,area,table,thead,' + 'tfoot,tbody,tr,section,summary,article,hgroup,aside,figure,figcaption,option,optgroup,datalist',\r\n        indent_after: 'p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,th,ul,ol,li,dl,dt,dd,area,table,thead,' + 'tfoot,tbody,tr,section,summary,article,hgroup,aside,figure,figcaption,option,optgroup,datalist',\r\n        entity_encoding: 'named',\r\n        url_converter: editor.convertURL,\r\n        url_converter_scope: editor\r\n      };\r\n      return __assign(__assign({}, baseDefaults), isTouch ? defaultTouchSettings : {});\r\n    };\r\n    var getDefaultMobileSettings = function (mobileSettings, isPhone) {\r\n      var defaultMobileSettings = {\r\n        resize: false,\r\n        toolbar_mode: getToolbarMode(mobileSettings, 'scrolling'),\r\n        toolbar_sticky: false\r\n      };\r\n      var defaultPhoneSettings = { menubar: false };\r\n      return __assign(__assign(__assign({}, defaultTouchSettings), defaultMobileSettings), isPhone ? defaultPhoneSettings : {});\r\n    };\r\n    var getExternalPlugins = function (overrideSettings, settings) {\r\n      var userDefinedExternalPlugins = settings.external_plugins ? settings.external_plugins : {};\r\n      if (overrideSettings && overrideSettings.external_plugins) {\r\n        return Tools.extend({}, overrideSettings.external_plugins, userDefinedExternalPlugins);\r\n      } else {\r\n        return userDefinedExternalPlugins;\r\n      }\r\n    };\r\n    var combinePlugins = function (forcedPlugins, plugins) {\r\n      return [].concat(normalizePlugins(forcedPlugins)).concat(normalizePlugins(plugins));\r\n    };\r\n    var getPlatformPlugins = function (isMobileDevice, sectionResult, desktopPlugins, mobilePlugins) {\r\n      if (isMobileDevice && isSectionTheme(sectionResult, 'mobile', 'mobile')) {\r\n        return filterLegacyMobilePlugins(mobilePlugins);\r\n      } else if (isMobileDevice && hasSection(sectionResult, 'mobile')) {\r\n        return mobilePlugins;\r\n      } else {\r\n        return desktopPlugins;\r\n      }\r\n    };\r\n    var processPlugins = function (isMobileDevice, sectionResult, defaultOverrideSettings, settings) {\r\n      var forcedPlugins = normalizePlugins(defaultOverrideSettings.forced_plugins);\r\n      var desktopPlugins = normalizePlugins(settings.plugins);\r\n      var mobileConfig = getSectionConfig(sectionResult, 'mobile');\r\n      var mobilePlugins = mobileConfig.plugins ? normalizePlugins(mobileConfig.plugins) : desktopPlugins;\r\n      var platformPlugins = getPlatformPlugins(isMobileDevice, sectionResult, desktopPlugins, mobilePlugins);\r\n      var combinedPlugins = combinePlugins(forcedPlugins, platformPlugins);\r\n      if (Env.browser.isIE() && contains$3(combinedPlugins, 'rtc')) {\r\n        throw new Error('RTC plugin is not supported on IE 11.');\r\n      }\r\n      return Tools.extend(settings, { plugins: combinedPlugins.join(' ') });\r\n    };\r\n    var isOnMobile = function (isMobileDevice, sectionResult) {\r\n      return isMobileDevice && hasSection(sectionResult, 'mobile');\r\n    };\r\n    var combineSettings = function (isMobileDevice, isPhone, defaultSettings, defaultOverrideSettings, settings) {\r\n      var defaultDeviceSettings = isMobileDevice ? { mobile: getDefaultMobileSettings(settings.mobile || {}, isPhone) } : {};\r\n      var sectionResult = extractSections(['mobile'], deepMerge(defaultDeviceSettings, settings));\r\n      var extendedSettings = Tools.extend(defaultSettings, defaultOverrideSettings, sectionResult.settings(), isOnMobile(isMobileDevice, sectionResult) ? getSection(sectionResult, 'mobile') : {}, {\r\n        validate: true,\r\n        external_plugins: getExternalPlugins(defaultOverrideSettings, sectionResult.settings())\r\n      });\r\n      return processPlugins(isMobileDevice, sectionResult, defaultOverrideSettings, extendedSettings);\r\n    };\r\n    var getEditorSettings = function (editor, id, documentBaseUrl, defaultOverrideSettings, settings) {\r\n      var defaultSettings = getDefaultSettings(settings, id, documentBaseUrl, isTouch, editor);\r\n      var finalSettings = combineSettings(isPhone || isTablet, isPhone, defaultSettings, defaultOverrideSettings, settings);\r\n      if (finalSettings.deprecation_warnings !== false) {\r\n        logDeprecationsWarning(settings, finalSettings);\r\n      }\r\n      return finalSettings;\r\n    };\r\n    var getFiltered = function (predicate, editor, name) {\r\n      return Optional.from(editor.settings[name]).filter(predicate);\r\n    };\r\n    var getParamObject = function (value) {\r\n      var output = {};\r\n      if (typeof value === 'string') {\r\n        each$k(value.indexOf('=') > 0 ? value.split(/[;,](?![^=;,]*(?:[;,]|$))/) : value.split(','), function (val) {\r\n          var arr = val.split('=');\r\n          if (arr.length > 1) {\r\n            output[Tools.trim(arr[0])] = Tools.trim(arr[1]);\r\n          } else {\r\n            output[Tools.trim(arr[0])] = Tools.trim(arr[0]);\r\n          }\r\n        });\r\n      } else {\r\n        output = value;\r\n      }\r\n      return output;\r\n    };\r\n    var isArrayOf = function (p) {\r\n      return function (a) {\r\n        return isArray$1(a) && forall(a, p);\r\n      };\r\n    };\r\n    var getParam = function (editor, name, defaultVal, type) {\r\n      var value = name in editor.settings ? editor.settings[name] : defaultVal;\r\n      if (type === 'hash') {\r\n        return getParamObject(value);\r\n      } else if (type === 'string') {\r\n        return getFiltered(isString$1, editor, name).getOr(defaultVal);\r\n      } else if (type === 'number') {\r\n        return getFiltered(isNumber, editor, name).getOr(defaultVal);\r\n      } else if (type === 'boolean') {\r\n        return getFiltered(isBoolean, editor, name).getOr(defaultVal);\r\n      } else if (type === 'object') {\r\n        return getFiltered(isObject, editor, name).getOr(defaultVal);\r\n      } else if (type === 'array') {\r\n        return getFiltered(isArray$1, editor, name).getOr(defaultVal);\r\n      } else if (type === 'string[]') {\r\n        return getFiltered(isArrayOf(isString$1), editor, name).getOr(defaultVal);\r\n      } else if (type === 'function') {\r\n        return getFiltered(isFunction, editor, name).getOr(defaultVal);\r\n      } else {\r\n        return value;\r\n      }\r\n    };\r\n\r\n    var CreateIconManager = function () {\r\n      var lookup = {};\r\n      var add = function (id, iconPack) {\r\n        lookup[id] = iconPack;\r\n      };\r\n      var get = function (id) {\r\n        if (lookup[id]) {\r\n          return lookup[id];\r\n        }\r\n        return { icons: {} };\r\n      };\r\n      var has = function (id) {\r\n        return has$2(lookup, id);\r\n      };\r\n      return {\r\n        add: add,\r\n        get: get,\r\n        has: has\r\n      };\r\n    };\r\n    var IconManager = CreateIconManager();\r\n\r\n    var getProp = function (propName, elm) {\r\n      var rawElm = elm.dom;\r\n      return rawElm[propName];\r\n    };\r\n    var getComputedSizeProp = function (propName, elm) {\r\n      return parseInt(get$5(elm, propName), 10);\r\n    };\r\n    var getClientWidth = curry(getProp, 'clientWidth');\r\n    var getClientHeight = curry(getProp, 'clientHeight');\r\n    var getMarginTop = curry(getComputedSizeProp, 'margin-top');\r\n    var getMarginLeft = curry(getComputedSizeProp, 'margin-left');\r\n    var getBoundingClientRect = function (elm) {\r\n      return elm.dom.getBoundingClientRect();\r\n    };\r\n    var isInsideElementContentArea = function (bodyElm, clientX, clientY) {\r\n      var clientWidth = getClientWidth(bodyElm);\r\n      var clientHeight = getClientHeight(bodyElm);\r\n      return clientX >= 0 && clientY >= 0 && clientX <= clientWidth && clientY <= clientHeight;\r\n    };\r\n    var transpose = function (inline, elm, clientX, clientY) {\r\n      var clientRect = getBoundingClientRect(elm);\r\n      var deltaX = inline ? clientRect.left + elm.dom.clientLeft + getMarginLeft(elm) : 0;\r\n      var deltaY = inline ? clientRect.top + elm.dom.clientTop + getMarginTop(elm) : 0;\r\n      var x = clientX - deltaX;\r\n      var y = clientY - deltaY;\r\n      return {\r\n        x: x,\r\n        y: y\r\n      };\r\n    };\r\n    var isXYInContentArea = function (editor, clientX, clientY) {\r\n      var bodyElm = SugarElement.fromDom(editor.getBody());\r\n      var targetElm = editor.inline ? bodyElm : documentElement(bodyElm);\r\n      var transposedPoint = transpose(editor.inline, targetElm, clientX, clientY);\r\n      return isInsideElementContentArea(targetElm, transposedPoint.x, transposedPoint.y);\r\n    };\r\n    var fromDomSafe = function (node) {\r\n      return Optional.from(node).map(SugarElement.fromDom);\r\n    };\r\n    var isEditorAttachedToDom = function (editor) {\r\n      var rawContainer = editor.inline ? editor.getBody() : editor.getContentAreaContainer();\r\n      return fromDomSafe(rawContainer).map(inBody).getOr(false);\r\n    };\r\n\r\n    var NotificationManagerImpl = function () {\r\n      var unimplemented = function () {\r\n        throw new Error('Theme did not provide a NotificationManager implementation.');\r\n      };\r\n      return {\r\n        open: unimplemented,\r\n        close: unimplemented,\r\n        reposition: unimplemented,\r\n        getArgs: unimplemented\r\n      };\r\n    };\r\n\r\n    var NotificationManager = function (editor) {\r\n      var notifications = [];\r\n      var getImplementation = function () {\r\n        var theme = editor.theme;\r\n        return theme && theme.getNotificationManagerImpl ? theme.getNotificationManagerImpl() : NotificationManagerImpl();\r\n      };\r\n      var getTopNotification = function () {\r\n        return Optional.from(notifications[0]);\r\n      };\r\n      var isEqual = function (a, b) {\r\n        return a.type === b.type && a.text === b.text && !a.progressBar && !a.timeout && !b.progressBar && !b.timeout;\r\n      };\r\n      var reposition = function () {\r\n        if (notifications.length > 0) {\r\n          getImplementation().reposition(notifications);\r\n        }\r\n      };\r\n      var addNotification = function (notification) {\r\n        notifications.push(notification);\r\n      };\r\n      var closeNotification = function (notification) {\r\n        findIndex$2(notifications, function (otherNotification) {\r\n          return otherNotification === notification;\r\n        }).each(function (index) {\r\n          notifications.splice(index, 1);\r\n        });\r\n      };\r\n      var open = function (spec, fireEvent) {\r\n        if (fireEvent === void 0) {\r\n          fireEvent = true;\r\n        }\r\n        if (editor.removed || !isEditorAttachedToDom(editor)) {\r\n          return;\r\n        }\r\n        if (fireEvent) {\r\n          editor.fire('BeforeOpenNotification', { notification: spec });\r\n        }\r\n        return find$3(notifications, function (notification) {\r\n          return isEqual(getImplementation().getArgs(notification), spec);\r\n        }).getOrThunk(function () {\r\n          editor.editorManager.setActive(editor);\r\n          var notification = getImplementation().open(spec, function () {\r\n            closeNotification(notification);\r\n            reposition();\r\n            getTopNotification().fold(function () {\r\n              return editor.focus();\r\n            }, function (top) {\r\n              return focus$1(SugarElement.fromDom(top.getEl()));\r\n            });\r\n          });\r\n          addNotification(notification);\r\n          reposition();\r\n          editor.fire('OpenNotification', { notification: __assign({}, notification) });\r\n          return notification;\r\n        });\r\n      };\r\n      var close = function () {\r\n        getTopNotification().each(function (notification) {\r\n          getImplementation().close(notification);\r\n          closeNotification(notification);\r\n          reposition();\r\n        });\r\n      };\r\n      var getNotifications = constant(notifications);\r\n      var registerEvents = function (editor) {\r\n        editor.on('SkinLoaded', function () {\r\n          var serviceMessage = getServiceMessage(editor);\r\n          if (serviceMessage) {\r\n            open({\r\n              text: serviceMessage,\r\n              type: 'warning',\r\n              timeout: 0\r\n            }, false);\r\n          }\r\n          reposition();\r\n        });\r\n        editor.on('show ResizeEditor ResizeWindow NodeChange', function () {\r\n          Delay.requestAnimationFrame(reposition);\r\n        });\r\n        editor.on('remove', function () {\r\n          each$k(notifications.slice(), function (notification) {\r\n            getImplementation().close(notification);\r\n          });\r\n        });\r\n      };\r\n      registerEvents(editor);\r\n      return {\r\n        open: open,\r\n        close: close,\r\n        getNotifications: getNotifications\r\n      };\r\n    };\r\n\r\n    var PluginManager = AddOnManager.PluginManager;\r\n\r\n    var ThemeManager = AddOnManager.ThemeManager;\r\n\r\n    function WindowManagerImpl () {\r\n      var unimplemented = function () {\r\n        throw new Error('Theme did not provide a WindowManager implementation.');\r\n      };\r\n      return {\r\n        open: unimplemented,\r\n        openUrl: unimplemented,\r\n        alert: unimplemented,\r\n        confirm: unimplemented,\r\n        close: unimplemented,\r\n        getParams: unimplemented,\r\n        setParams: unimplemented\r\n      };\r\n    }\r\n\r\n    var WindowManager = function (editor) {\r\n      var dialogs = [];\r\n      var getImplementation = function () {\r\n        var theme = editor.theme;\r\n        return theme && theme.getWindowManagerImpl ? theme.getWindowManagerImpl() : WindowManagerImpl();\r\n      };\r\n      var funcBind = function (scope, f) {\r\n        return function () {\r\n          var args = [];\r\n          for (var _i = 0; _i < arguments.length; _i++) {\r\n            args[_i] = arguments[_i];\r\n          }\r\n          return f ? f.apply(scope, args) : undefined;\r\n        };\r\n      };\r\n      var fireOpenEvent = function (dialog) {\r\n        editor.fire('OpenWindow', { dialog: dialog });\r\n      };\r\n      var fireCloseEvent = function (dialog) {\r\n        editor.fire('CloseWindow', { dialog: dialog });\r\n      };\r\n      var addDialog = function (dialog) {\r\n        dialogs.push(dialog);\r\n        fireOpenEvent(dialog);\r\n      };\r\n      var closeDialog = function (dialog) {\r\n        fireCloseEvent(dialog);\r\n        dialogs = filter$4(dialogs, function (otherDialog) {\r\n          return otherDialog !== dialog;\r\n        });\r\n        if (dialogs.length === 0) {\r\n          editor.focus();\r\n        }\r\n      };\r\n      var getTopDialog = function () {\r\n        return Optional.from(dialogs[dialogs.length - 1]);\r\n      };\r\n      var storeSelectionAndOpenDialog = function (openDialog) {\r\n        editor.editorManager.setActive(editor);\r\n        store(editor);\r\n        var dialog = openDialog();\r\n        addDialog(dialog);\r\n        return dialog;\r\n      };\r\n      var open = function (args, params) {\r\n        return storeSelectionAndOpenDialog(function () {\r\n          return getImplementation().open(args, params, closeDialog);\r\n        });\r\n      };\r\n      var openUrl = function (args) {\r\n        return storeSelectionAndOpenDialog(function () {\r\n          return getImplementation().openUrl(args, closeDialog);\r\n        });\r\n      };\r\n      var alert = function (message, callback, scope) {\r\n        var windowManagerImpl = getImplementation();\r\n        windowManagerImpl.alert(message, funcBind(scope ? scope : windowManagerImpl, callback));\r\n      };\r\n      var confirm = function (message, callback, scope) {\r\n        var windowManagerImpl = getImplementation();\r\n        windowManagerImpl.confirm(message, funcBind(scope ? scope : windowManagerImpl, callback));\r\n      };\r\n      var close = function () {\r\n        getTopDialog().each(function (dialog) {\r\n          getImplementation().close(dialog);\r\n          closeDialog(dialog);\r\n        });\r\n      };\r\n      editor.on('remove', function () {\r\n        each$k(dialogs, function (dialog) {\r\n          getImplementation().close(dialog);\r\n        });\r\n      });\r\n      return {\r\n        open: open,\r\n        openUrl: openUrl,\r\n        alert: alert,\r\n        confirm: confirm,\r\n        close: close\r\n      };\r\n    };\r\n\r\n    var displayNotification = function (editor, message) {\r\n      editor.notificationManager.open({\r\n        type: 'error',\r\n        text: message\r\n      });\r\n    };\r\n    var displayError = function (editor, message) {\r\n      if (editor._skinLoaded) {\r\n        displayNotification(editor, message);\r\n      } else {\r\n        editor.on('SkinLoaded', function () {\r\n          displayNotification(editor, message);\r\n        });\r\n      }\r\n    };\r\n    var uploadError = function (editor, message) {\r\n      displayError(editor, I18n.translate([\r\n        'Failed to upload image: {0}',\r\n        message\r\n      ]));\r\n    };\r\n    var logError = function (editor, errorType, msg) {\r\n      fireError(editor, errorType, { message: msg });\r\n      console.error(msg);\r\n    };\r\n    var createLoadError = function (type, url, name) {\r\n      return name ? 'Failed to load ' + type + ': ' + name + ' from url ' + url : 'Failed to load ' + type + ' url: ' + url;\r\n    };\r\n    var pluginLoadError = function (editor, url, name) {\r\n      logError(editor, 'PluginLoadError', createLoadError('plugin', url, name));\r\n    };\r\n    var iconsLoadError = function (editor, url, name) {\r\n      logError(editor, 'IconsLoadError', createLoadError('icons', url, name));\r\n    };\r\n    var languageLoadError = function (editor, url, name) {\r\n      logError(editor, 'LanguageLoadError', createLoadError('language', url, name));\r\n    };\r\n    var pluginInitError = function (editor, name, err) {\r\n      var message = I18n.translate([\r\n        'Failed to initialize plugin: {0}',\r\n        name\r\n      ]);\r\n      fireError(editor, 'PluginLoadError', { message: message });\r\n      initError(message, err);\r\n      displayError(editor, message);\r\n    };\r\n    var initError = function (message) {\r\n      var x = [];\r\n      for (var _i = 1; _i < arguments.length; _i++) {\r\n        x[_i - 1] = arguments[_i];\r\n      }\r\n      var console = window.console;\r\n      if (console) {\r\n        if (console.error) {\r\n          console.error.apply(console, __spreadArray([message], x, false));\r\n        } else {\r\n          console.log.apply(console, __spreadArray([message], x, false));\r\n        }\r\n      }\r\n    };\r\n\r\n    var isContentCssSkinName = function (url) {\r\n      return /^[a-z0-9\\-]+$/i.test(url);\r\n    };\r\n    var getContentCssUrls = function (editor) {\r\n      return transformToUrls(editor, getContentCss(editor));\r\n    };\r\n    var getFontCssUrls = function (editor) {\r\n      return transformToUrls(editor, getFontCss(editor));\r\n    };\r\n    var transformToUrls = function (editor, cssLinks) {\r\n      var skinUrl = editor.editorManager.baseURL + '/skins/content';\r\n      var suffix = editor.editorManager.suffix;\r\n      var contentCssFile = 'content' + suffix + '.css';\r\n      var inline = editor.inline === true;\r\n      return map$3(cssLinks, function (url) {\r\n        if (isContentCssSkinName(url) && !inline) {\r\n          return skinUrl + '/' + url + '/' + contentCssFile;\r\n        } else {\r\n          return editor.documentBaseURI.toAbsolute(url);\r\n        }\r\n      });\r\n    };\r\n    var appendContentCssFromSettings = function (editor) {\r\n      editor.contentCSS = editor.contentCSS.concat(getContentCssUrls(editor), getFontCssUrls(editor));\r\n    };\r\n\r\n    var UploadStatus = function () {\r\n      var PENDING = 1, UPLOADED = 2;\r\n      var blobUriStatuses = {};\r\n      var createStatus = function (status, resultUri) {\r\n        return {\r\n          status: status,\r\n          resultUri: resultUri\r\n        };\r\n      };\r\n      var hasBlobUri = function (blobUri) {\r\n        return blobUri in blobUriStatuses;\r\n      };\r\n      var getResultUri = function (blobUri) {\r\n        var result = blobUriStatuses[blobUri];\r\n        return result ? result.resultUri : null;\r\n      };\r\n      var isPending = function (blobUri) {\r\n        return hasBlobUri(blobUri) ? blobUriStatuses[blobUri].status === PENDING : false;\r\n      };\r\n      var isUploaded = function (blobUri) {\r\n        return hasBlobUri(blobUri) ? blobUriStatuses[blobUri].status === UPLOADED : false;\r\n      };\r\n      var markPending = function (blobUri) {\r\n        blobUriStatuses[blobUri] = createStatus(PENDING, null);\r\n      };\r\n      var markUploaded = function (blobUri, resultUri) {\r\n        blobUriStatuses[blobUri] = createStatus(UPLOADED, resultUri);\r\n      };\r\n      var removeFailed = function (blobUri) {\r\n        delete blobUriStatuses[blobUri];\r\n      };\r\n      var destroy = function () {\r\n        blobUriStatuses = {};\r\n      };\r\n      return {\r\n        hasBlobUri: hasBlobUri,\r\n        getResultUri: getResultUri,\r\n        isPending: isPending,\r\n        isUploaded: isUploaded,\r\n        markPending: markPending,\r\n        markUploaded: markUploaded,\r\n        removeFailed: removeFailed,\r\n        destroy: destroy\r\n      };\r\n    };\r\n\r\n    var count = 0;\r\n    var seed = function () {\r\n      var rnd = function () {\r\n        return Math.round(Math.random() * 4294967295).toString(36);\r\n      };\r\n      var now = new Date().getTime();\r\n      return 's' + now.toString(36) + rnd() + rnd() + rnd();\r\n    };\r\n    var uuid = function (prefix) {\r\n      return prefix + count++ + seed();\r\n    };\r\n\r\n    var BlobCache = function () {\r\n      var cache = [];\r\n      var mimeToExt = function (mime) {\r\n        var mimes = {\r\n          'image/jpeg': 'jpg',\r\n          'image/jpg': 'jpg',\r\n          'image/gif': 'gif',\r\n          'image/png': 'png',\r\n          'image/apng': 'apng',\r\n          'image/avif': 'avif',\r\n          'image/svg+xml': 'svg',\r\n          'image/webp': 'webp',\r\n          'image/bmp': 'bmp',\r\n          'image/tiff': 'tiff'\r\n        };\r\n        return mimes[mime.toLowerCase()] || 'dat';\r\n      };\r\n      var create = function (o, blob, base64, name, filename) {\r\n        if (isString$1(o)) {\r\n          var id = o;\r\n          return toBlobInfo({\r\n            id: id,\r\n            name: name,\r\n            filename: filename,\r\n            blob: blob,\r\n            base64: base64\r\n          });\r\n        } else if (isObject(o)) {\r\n          return toBlobInfo(o);\r\n        } else {\r\n          throw new Error('Unknown input type');\r\n        }\r\n      };\r\n      var toBlobInfo = function (o) {\r\n        if (!o.blob || !o.base64) {\r\n          throw new Error('blob and base64 representations of the image are required for BlobInfo to be created');\r\n        }\r\n        var id = o.id || uuid('blobid');\r\n        var name = o.name || id;\r\n        var blob = o.blob;\r\n        return {\r\n          id: constant(id),\r\n          name: constant(name),\r\n          filename: constant(o.filename || name + '.' + mimeToExt(blob.type)),\r\n          blob: constant(blob),\r\n          base64: constant(o.base64),\r\n          blobUri: constant(o.blobUri || URL.createObjectURL(blob)),\r\n          uri: constant(o.uri)\r\n        };\r\n      };\r\n      var add = function (blobInfo) {\r\n        if (!get(blobInfo.id())) {\r\n          cache.push(blobInfo);\r\n        }\r\n      };\r\n      var findFirst = function (predicate) {\r\n        return find$3(cache, predicate).getOrUndefined();\r\n      };\r\n      var get = function (id) {\r\n        return findFirst(function (cachedBlobInfo) {\r\n          return cachedBlobInfo.id() === id;\r\n        });\r\n      };\r\n      var getByUri = function (blobUri) {\r\n        return findFirst(function (blobInfo) {\r\n          return blobInfo.blobUri() === blobUri;\r\n        });\r\n      };\r\n      var getByData = function (base64, type) {\r\n        return findFirst(function (blobInfo) {\r\n          return blobInfo.base64() === base64 && blobInfo.blob().type === type;\r\n        });\r\n      };\r\n      var removeByUri = function (blobUri) {\r\n        cache = filter$4(cache, function (blobInfo) {\r\n          if (blobInfo.blobUri() === blobUri) {\r\n            URL.revokeObjectURL(blobInfo.blobUri());\r\n            return false;\r\n          }\r\n          return true;\r\n        });\r\n      };\r\n      var destroy = function () {\r\n        each$k(cache, function (cachedBlobInfo) {\r\n          URL.revokeObjectURL(cachedBlobInfo.blobUri());\r\n        });\r\n        cache = [];\r\n      };\r\n      return {\r\n        create: create,\r\n        add: add,\r\n        get: get,\r\n        getByUri: getByUri,\r\n        getByData: getByData,\r\n        findFirst: findFirst,\r\n        removeByUri: removeByUri,\r\n        destroy: destroy\r\n      };\r\n    };\r\n\r\n    var Uploader = function (uploadStatus, settings) {\r\n      var pendingPromises = {};\r\n      var pathJoin = function (path1, path2) {\r\n        if (path1) {\r\n          return path1.replace(/\\/$/, '') + '/' + path2.replace(/^\\//, '');\r\n        }\r\n        return path2;\r\n      };\r\n      var defaultHandler = function (blobInfo, success, failure, progress) {\r\n        var xhr = new XMLHttpRequest();\r\n        xhr.open('POST', settings.url);\r\n        xhr.withCredentials = settings.credentials;\r\n        xhr.upload.onprogress = function (e) {\r\n          progress(e.loaded / e.total * 100);\r\n        };\r\n        xhr.onerror = function () {\r\n          failure('Image upload failed due to a XHR Transport error. Code: ' + xhr.status);\r\n        };\r\n        xhr.onload = function () {\r\n          if (xhr.status < 200 || xhr.status >= 300) {\r\n            failure('HTTP Error: ' + xhr.status);\r\n            return;\r\n          }\r\n          var json = JSON.parse(xhr.responseText);\r\n          if (!json || typeof json.location !== 'string') {\r\n            failure('Invalid JSON: ' + xhr.responseText);\r\n            return;\r\n          }\r\n          success(pathJoin(settings.basePath, json.location));\r\n        };\r\n        var formData = new FormData();\r\n        formData.append('file', blobInfo.blob(), blobInfo.filename());\r\n        xhr.send(formData);\r\n      };\r\n      var noUpload = function () {\r\n        return new promiseObj(function (resolve) {\r\n          resolve([]);\r\n        });\r\n      };\r\n      var handlerSuccess = function (blobInfo, url) {\r\n        return {\r\n          url: url,\r\n          blobInfo: blobInfo,\r\n          status: true\r\n        };\r\n      };\r\n      var handlerFailure = function (blobInfo, message, options) {\r\n        return {\r\n          url: '',\r\n          blobInfo: blobInfo,\r\n          status: false,\r\n          error: {\r\n            message: message,\r\n            options: options\r\n          }\r\n        };\r\n      };\r\n      var resolvePending = function (blobUri, result) {\r\n        Tools.each(pendingPromises[blobUri], function (resolve) {\r\n          resolve(result);\r\n        });\r\n        delete pendingPromises[blobUri];\r\n      };\r\n      var uploadBlobInfo = function (blobInfo, handler, openNotification) {\r\n        uploadStatus.markPending(blobInfo.blobUri());\r\n        return new promiseObj(function (resolve) {\r\n          var notification, progress;\r\n          try {\r\n            var closeNotification_1 = function () {\r\n              if (notification) {\r\n                notification.close();\r\n                progress = noop;\r\n              }\r\n            };\r\n            var success = function (url) {\r\n              closeNotification_1();\r\n              uploadStatus.markUploaded(blobInfo.blobUri(), url);\r\n              resolvePending(blobInfo.blobUri(), handlerSuccess(blobInfo, url));\r\n              resolve(handlerSuccess(blobInfo, url));\r\n            };\r\n            var failure = function (error, options) {\r\n              var failureOptions = options ? options : {};\r\n              closeNotification_1();\r\n              uploadStatus.removeFailed(blobInfo.blobUri());\r\n              resolvePending(blobInfo.blobUri(), handlerFailure(blobInfo, error, failureOptions));\r\n              resolve(handlerFailure(blobInfo, error, failureOptions));\r\n            };\r\n            progress = function (percent) {\r\n              if (percent < 0 || percent > 100) {\r\n                return;\r\n              }\r\n              Optional.from(notification).orThunk(function () {\r\n                return Optional.from(openNotification).map(apply);\r\n              }).each(function (n) {\r\n                notification = n;\r\n                n.progressBar.value(percent);\r\n              });\r\n            };\r\n            handler(blobInfo, success, failure, progress);\r\n          } catch (ex) {\r\n            resolve(handlerFailure(blobInfo, ex.message, {}));\r\n          }\r\n        });\r\n      };\r\n      var isDefaultHandler = function (handler) {\r\n        return handler === defaultHandler;\r\n      };\r\n      var pendingUploadBlobInfo = function (blobInfo) {\r\n        var blobUri = blobInfo.blobUri();\r\n        return new promiseObj(function (resolve) {\r\n          pendingPromises[blobUri] = pendingPromises[blobUri] || [];\r\n          pendingPromises[blobUri].push(resolve);\r\n        });\r\n      };\r\n      var uploadBlobs = function (blobInfos, openNotification) {\r\n        blobInfos = Tools.grep(blobInfos, function (blobInfo) {\r\n          return !uploadStatus.isUploaded(blobInfo.blobUri());\r\n        });\r\n        return promiseObj.all(Tools.map(blobInfos, function (blobInfo) {\r\n          return uploadStatus.isPending(blobInfo.blobUri()) ? pendingUploadBlobInfo(blobInfo) : uploadBlobInfo(blobInfo, settings.handler, openNotification);\r\n        }));\r\n      };\r\n      var upload = function (blobInfos, openNotification) {\r\n        return !settings.url && isDefaultHandler(settings.handler) ? noUpload() : uploadBlobs(blobInfos, openNotification);\r\n      };\r\n      if (isFunction(settings.handler) === false) {\r\n        settings.handler = defaultHandler;\r\n      }\r\n      return { upload: upload };\r\n    };\r\n\r\n    var openNotification = function (editor) {\r\n      return function () {\r\n        return editor.notificationManager.open({\r\n          text: editor.translate('Image uploading...'),\r\n          type: 'info',\r\n          timeout: -1,\r\n          progressBar: true\r\n        });\r\n      };\r\n    };\r\n    var createUploader = function (editor, uploadStatus) {\r\n      return Uploader(uploadStatus, {\r\n        url: getImageUploadUrl(editor),\r\n        basePath: getImageUploadBasePath(editor),\r\n        credentials: getImagesUploadCredentials(editor),\r\n        handler: getImagesUploadHandler(editor)\r\n      });\r\n    };\r\n    var ImageUploader = function (editor) {\r\n      var uploadStatus = UploadStatus();\r\n      var uploader = createUploader(editor, uploadStatus);\r\n      return {\r\n        upload: function (blobInfos, showNotification) {\r\n          if (showNotification === void 0) {\r\n            showNotification = true;\r\n          }\r\n          return uploader.upload(blobInfos, showNotification ? openNotification(editor) : undefined);\r\n        }\r\n      };\r\n    };\r\n\r\n    var UploadChangeHandler = function (editor) {\r\n      var lastChangedLevel = Cell(null);\r\n      editor.on('change AddUndo', function (e) {\r\n        lastChangedLevel.set(__assign({}, e.level));\r\n      });\r\n      var fireIfChanged = function () {\r\n        var data = editor.undoManager.data;\r\n        last$2(data).filter(function (level) {\r\n          return !isEq$1(lastChangedLevel.get(), level);\r\n        }).each(function (level) {\r\n          editor.setDirty(true);\r\n          editor.fire('change', {\r\n            level: level,\r\n            lastLevel: get$a(data, data.length - 2).getOrNull()\r\n          });\r\n        });\r\n      };\r\n      return { fireIfChanged: fireIfChanged };\r\n    };\r\n    var EditorUpload = function (editor) {\r\n      var blobCache = BlobCache();\r\n      var uploader, imageScanner;\r\n      var uploadStatus = UploadStatus();\r\n      var urlFilters = [];\r\n      var changeHandler = UploadChangeHandler(editor);\r\n      var aliveGuard = function (callback) {\r\n        return function (result) {\r\n          if (editor.selection) {\r\n            return callback(result);\r\n          }\r\n          return [];\r\n        };\r\n      };\r\n      var cacheInvalidator = function (url) {\r\n        return url + (url.indexOf('?') === -1 ? '?' : '&') + new Date().getTime();\r\n      };\r\n      var replaceString = function (content, search, replace) {\r\n        var index = 0;\r\n        do {\r\n          index = content.indexOf(search, index);\r\n          if (index !== -1) {\r\n            content = content.substring(0, index) + replace + content.substr(index + search.length);\r\n            index += replace.length - search.length + 1;\r\n          }\r\n        } while (index !== -1);\r\n        return content;\r\n      };\r\n      var replaceImageUrl = function (content, targetUrl, replacementUrl) {\r\n        var replacementString = 'src=\"' + replacementUrl + '\"' + (replacementUrl === Env.transparentSrc ? ' data-mce-placeholder=\"1\"' : '');\r\n        content = replaceString(content, 'src=\"' + targetUrl + '\"', replacementString);\r\n        content = replaceString(content, 'data-mce-src=\"' + targetUrl + '\"', 'data-mce-src=\"' + replacementUrl + '\"');\r\n        return content;\r\n      };\r\n      var replaceUrlInUndoStack = function (targetUrl, replacementUrl) {\r\n        each$k(editor.undoManager.data, function (level) {\r\n          if (level.type === 'fragmented') {\r\n            level.fragments = map$3(level.fragments, function (fragment) {\r\n              return replaceImageUrl(fragment, targetUrl, replacementUrl);\r\n            });\r\n          } else {\r\n            level.content = replaceImageUrl(level.content, targetUrl, replacementUrl);\r\n          }\r\n        });\r\n      };\r\n      var replaceImageUriInView = function (image, resultUri) {\r\n        var src = editor.convertURL(resultUri, 'src');\r\n        replaceUrlInUndoStack(image.src, resultUri);\r\n        editor.$(image).attr({\r\n          'src': shouldReuseFileName(editor) ? cacheInvalidator(resultUri) : resultUri,\r\n          'data-mce-src': src\r\n        });\r\n      };\r\n      var uploadImages = function (callback) {\r\n        if (!uploader) {\r\n          uploader = createUploader(editor, uploadStatus);\r\n        }\r\n        return scanForImages().then(aliveGuard(function (imageInfos) {\r\n          var blobInfos = map$3(imageInfos, function (imageInfo) {\r\n            return imageInfo.blobInfo;\r\n          });\r\n          return uploader.upload(blobInfos, openNotification(editor)).then(aliveGuard(function (result) {\r\n            var imagesToRemove = [];\r\n            var filteredResult = map$3(result, function (uploadInfo, index) {\r\n              var blobInfo = imageInfos[index].blobInfo;\r\n              var image = imageInfos[index].image;\r\n              if (uploadInfo.status && shouldReplaceBlobUris(editor)) {\r\n                blobCache.removeByUri(image.src);\r\n                if (isRtc(editor)) ; else {\r\n                  replaceImageUriInView(image, uploadInfo.url);\r\n                }\r\n              } else if (uploadInfo.error) {\r\n                if (uploadInfo.error.options.remove) {\r\n                  replaceUrlInUndoStack(image.getAttribute('src'), Env.transparentSrc);\r\n                  imagesToRemove.push(image);\r\n                }\r\n                uploadError(editor, uploadInfo.error.message);\r\n              }\r\n              return {\r\n                element: image,\r\n                status: uploadInfo.status,\r\n                uploadUri: uploadInfo.url,\r\n                blobInfo: blobInfo\r\n              };\r\n            });\r\n            if (filteredResult.length > 0) {\r\n              changeHandler.fireIfChanged();\r\n            }\r\n            if (imagesToRemove.length > 0) {\r\n              if (isRtc(editor)) {\r\n                console.error('Removing images on failed uploads is currently unsupported for RTC');\r\n              } else {\r\n                editor.undoManager.transact(function () {\r\n                  each$k(imagesToRemove, function (element) {\r\n                    editor.dom.remove(element);\r\n                    blobCache.removeByUri(element.src);\r\n                  });\r\n                });\r\n              }\r\n            }\r\n            if (callback) {\r\n              callback(filteredResult);\r\n            }\r\n            return filteredResult;\r\n          }));\r\n        }));\r\n      };\r\n      var uploadImagesAuto = function (callback) {\r\n        if (isAutomaticUploadsEnabled(editor)) {\r\n          return uploadImages(callback);\r\n        }\r\n      };\r\n      var isValidDataUriImage = function (imgElm) {\r\n        if (forall(urlFilters, function (filter) {\r\n            return filter(imgElm);\r\n          }) === false) {\r\n          return false;\r\n        }\r\n        if (imgElm.getAttribute('src').indexOf('data:') === 0) {\r\n          var dataImgFilter = getImagesDataImgFilter(editor);\r\n          return dataImgFilter(imgElm);\r\n        }\r\n        return true;\r\n      };\r\n      var addFilter = function (filter) {\r\n        urlFilters.push(filter);\r\n      };\r\n      var scanForImages = function () {\r\n        if (!imageScanner) {\r\n          imageScanner = ImageScanner(uploadStatus, blobCache);\r\n        }\r\n        return imageScanner.findAll(editor.getBody(), isValidDataUriImage).then(aliveGuard(function (result) {\r\n          result = filter$4(result, function (resultItem) {\r\n            if (typeof resultItem === 'string') {\r\n              displayError(editor, resultItem);\r\n              return false;\r\n            }\r\n            return true;\r\n          });\r\n          if (isRtc(editor)) ; else {\r\n            each$k(result, function (resultItem) {\r\n              replaceUrlInUndoStack(resultItem.image.src, resultItem.blobInfo.blobUri());\r\n              resultItem.image.src = resultItem.blobInfo.blobUri();\r\n              resultItem.image.removeAttribute('data-mce-src');\r\n            });\r\n          }\r\n          return result;\r\n        }));\r\n      };\r\n      var destroy = function () {\r\n        blobCache.destroy();\r\n        uploadStatus.destroy();\r\n        imageScanner = uploader = null;\r\n      };\r\n      var replaceBlobUris = function (content) {\r\n        return content.replace(/src=\"(blob:[^\"]+)\"/g, function (match, blobUri) {\r\n          var resultUri = uploadStatus.getResultUri(blobUri);\r\n          if (resultUri) {\r\n            return 'src=\"' + resultUri + '\"';\r\n          }\r\n          var blobInfo = blobCache.getByUri(blobUri);\r\n          if (!blobInfo) {\r\n            blobInfo = foldl(editor.editorManager.get(), function (result, editor) {\r\n              return result || editor.editorUpload && editor.editorUpload.blobCache.getByUri(blobUri);\r\n            }, null);\r\n          }\r\n          if (blobInfo) {\r\n            var blob = blobInfo.blob();\r\n            return 'src=\"data:' + blob.type + ';base64,' + blobInfo.base64() + '\"';\r\n          }\r\n          return match;\r\n        });\r\n      };\r\n      editor.on('SetContent', function () {\r\n        if (isAutomaticUploadsEnabled(editor)) {\r\n          uploadImagesAuto();\r\n        } else {\r\n          scanForImages();\r\n        }\r\n      });\r\n      editor.on('RawSaveContent', function (e) {\r\n        e.content = replaceBlobUris(e.content);\r\n      });\r\n      editor.on('GetContent', function (e) {\r\n        if (e.source_view || e.format === 'raw' || e.format === 'tree') {\r\n          return;\r\n        }\r\n        e.content = replaceBlobUris(e.content);\r\n      });\r\n      editor.on('PostRender', function () {\r\n        editor.parser.addNodeFilter('img', function (images) {\r\n          each$k(images, function (img) {\r\n            var src = img.attr('src');\r\n            if (blobCache.getByUri(src)) {\r\n              return;\r\n            }\r\n            var resultUri = uploadStatus.getResultUri(src);\r\n            if (resultUri) {\r\n              img.attr('src', resultUri);\r\n            }\r\n          });\r\n        });\r\n      });\r\n      return {\r\n        blobCache: blobCache,\r\n        addFilter: addFilter,\r\n        uploadImages: uploadImages,\r\n        uploadImagesAuto: uploadImagesAuto,\r\n        scanForImages: scanForImages,\r\n        destroy: destroy\r\n      };\r\n    };\r\n\r\n    var get = function (dom) {\r\n      var formats = {\r\n        valigntop: [{\r\n            selector: 'td,th',\r\n            styles: { verticalAlign: 'top' }\r\n          }],\r\n        valignmiddle: [{\r\n            selector: 'td,th',\r\n            styles: { verticalAlign: 'middle' }\r\n          }],\r\n        valignbottom: [{\r\n            selector: 'td,th',\r\n            styles: { verticalAlign: 'bottom' }\r\n          }],\r\n        alignleft: [\r\n          {\r\n            selector: 'figure.image',\r\n            collapsed: false,\r\n            classes: 'align-left',\r\n            ceFalseOverride: true,\r\n            preview: 'font-family font-size'\r\n          },\r\n          {\r\n            selector: 'figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li',\r\n            styles: { textAlign: 'left' },\r\n            inherit: false,\r\n            preview: false,\r\n            defaultBlock: 'div'\r\n          },\r\n          {\r\n            selector: 'img,table,audio,video',\r\n            collapsed: false,\r\n            styles: { float: 'left' },\r\n            preview: 'font-family font-size'\r\n          }\r\n        ],\r\n        aligncenter: [\r\n          {\r\n            selector: 'figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li',\r\n            styles: { textAlign: 'center' },\r\n            inherit: false,\r\n            preview: 'font-family font-size',\r\n            defaultBlock: 'div'\r\n          },\r\n          {\r\n            selector: 'figure.image',\r\n            collapsed: false,\r\n            classes: 'align-center',\r\n            ceFalseOverride: true,\r\n            preview: 'font-family font-size'\r\n          },\r\n          {\r\n            selector: 'img,audio,video',\r\n            collapsed: false,\r\n            styles: {\r\n              display: 'block',\r\n              marginLeft: 'auto',\r\n              marginRight: 'auto'\r\n            },\r\n            preview: false\r\n          },\r\n          {\r\n            selector: 'table',\r\n            collapsed: false,\r\n            styles: {\r\n              marginLeft: 'auto',\r\n              marginRight: 'auto'\r\n            },\r\n            preview: 'font-family font-size'\r\n          }\r\n        ],\r\n        alignright: [\r\n          {\r\n            selector: 'figure.image',\r\n            collapsed: false,\r\n            classes: 'align-right',\r\n            ceFalseOverride: true,\r\n            preview: 'font-family font-size'\r\n          },\r\n          {\r\n            selector: 'figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li',\r\n            styles: { textAlign: 'right' },\r\n            inherit: false,\r\n            preview: 'font-family font-size',\r\n            defaultBlock: 'div'\r\n          },\r\n          {\r\n            selector: 'img,table,audio,video',\r\n            collapsed: false,\r\n            styles: { float: 'right' },\r\n            preview: 'font-family font-size'\r\n          }\r\n        ],\r\n        alignjustify: [{\r\n            selector: 'figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li',\r\n            styles: { textAlign: 'justify' },\r\n            inherit: false,\r\n            defaultBlock: 'div',\r\n            preview: 'font-family font-size'\r\n          }],\r\n        bold: [\r\n          {\r\n            inline: 'strong',\r\n            remove: 'all',\r\n            preserve_attributes: [\r\n              'class',\r\n              'style'\r\n            ]\r\n          },\r\n          {\r\n            inline: 'span',\r\n            styles: { fontWeight: 'bold' }\r\n          },\r\n          {\r\n            inline: 'b',\r\n            remove: 'all',\r\n            preserve_attributes: [\r\n              'class',\r\n              'style'\r\n            ]\r\n          }\r\n        ],\r\n        italic: [\r\n          {\r\n            inline: 'em',\r\n            remove: 'all',\r\n            preserve_attributes: [\r\n              'class',\r\n              'style'\r\n            ]\r\n          },\r\n          {\r\n            inline: 'span',\r\n            styles: { fontStyle: 'italic' }\r\n          },\r\n          {\r\n            inline: 'i',\r\n            remove: 'all',\r\n            preserve_attributes: [\r\n              'class',\r\n              'style'\r\n            ]\r\n          }\r\n        ],\r\n        underline: [\r\n          {\r\n            inline: 'span',\r\n            styles: { textDecoration: 'underline' },\r\n            exact: true\r\n          },\r\n          {\r\n            inline: 'u',\r\n            remove: 'all',\r\n            preserve_attributes: [\r\n              'class',\r\n              'style'\r\n            ]\r\n          }\r\n        ],\r\n        strikethrough: [\r\n          {\r\n            inline: 'span',\r\n            styles: { textDecoration: 'line-through' },\r\n            exact: true\r\n          },\r\n          {\r\n            inline: 'strike',\r\n            remove: 'all',\r\n            preserve_attributes: [\r\n              'class',\r\n              'style'\r\n            ]\r\n          },\r\n          {\r\n            inline: 's',\r\n            remove: 'all',\r\n            preserve_attributes: [\r\n              'class',\r\n              'style'\r\n            ]\r\n          }\r\n        ],\r\n        forecolor: {\r\n          inline: 'span',\r\n          styles: { color: '%value' },\r\n          links: true,\r\n          remove_similar: true,\r\n          clear_child_styles: true\r\n        },\r\n        hilitecolor: {\r\n          inline: 'span',\r\n          styles: { backgroundColor: '%value' },\r\n          links: true,\r\n          remove_similar: true,\r\n          clear_child_styles: true\r\n        },\r\n        fontname: {\r\n          inline: 'span',\r\n          toggle: false,\r\n          styles: { fontFamily: '%value' },\r\n          clear_child_styles: true\r\n        },\r\n        fontsize: {\r\n          inline: 'span',\r\n          toggle: false,\r\n          styles: { fontSize: '%value' },\r\n          clear_child_styles: true\r\n        },\r\n        lineheight: {\r\n          selector: 'h1,h2,h3,h4,h5,h6,p,li,td,th,div',\r\n          defaultBlock: 'p',\r\n          styles: { lineHeight: '%value' }\r\n        },\r\n        fontsize_class: {\r\n          inline: 'span',\r\n          attributes: { class: '%value' }\r\n        },\r\n        blockquote: {\r\n          block: 'blockquote',\r\n          wrapper: true,\r\n          remove: 'all'\r\n        },\r\n        subscript: { inline: 'sub' },\r\n        superscript: { inline: 'sup' },\r\n        code: { inline: 'code' },\r\n        link: {\r\n          inline: 'a',\r\n          selector: 'a',\r\n          remove: 'all',\r\n          split: true,\r\n          deep: true,\r\n          onmatch: function (node, _fmt, _itemName) {\r\n            return isElement$5(node) && node.hasAttribute('href');\r\n          },\r\n          onformat: function (elm, _fmt, vars) {\r\n            Tools.each(vars, function (value, key) {\r\n              dom.setAttrib(elm, key, value);\r\n            });\r\n          }\r\n        },\r\n        lang: {\r\n          inline: 'span',\r\n          clear_child_styles: true,\r\n          remove_similar: true,\r\n          attributes: {\r\n            'lang': '%value',\r\n            'data-mce-lang': function (vars) {\r\n              var _a;\r\n              return (_a = vars === null || vars === void 0 ? void 0 : vars.customValue) !== null && _a !== void 0 ? _a : null;\r\n            }\r\n          }\r\n        },\r\n        removeformat: [\r\n          {\r\n            selector: 'b,strong,em,i,font,u,strike,s,sub,sup,dfn,code,samp,kbd,var,cite,mark,q,del,ins,small',\r\n            remove: 'all',\r\n            split: true,\r\n            expand: false,\r\n            block_expand: true,\r\n            deep: true\r\n          },\r\n          {\r\n            selector: 'span',\r\n            attributes: [\r\n              'style',\r\n              'class'\r\n            ],\r\n            remove: 'empty',\r\n            split: true,\r\n            expand: false,\r\n            deep: true\r\n          },\r\n          {\r\n            selector: '*',\r\n            attributes: [\r\n              'style',\r\n              'class'\r\n            ],\r\n            split: false,\r\n            expand: false,\r\n            deep: true\r\n          }\r\n        ]\r\n      };\r\n      Tools.each('p h1 h2 h3 h4 h5 h6 div address pre dt dd samp'.split(/\\s/), function (name) {\r\n        formats[name] = {\r\n          block: name,\r\n          remove: 'all'\r\n        };\r\n      });\r\n      return formats;\r\n    };\r\n\r\n    var FormatRegistry = function (editor) {\r\n      var formats = {};\r\n      var get$1 = function (name) {\r\n        return isNonNullable(name) ? formats[name] : formats;\r\n      };\r\n      var has = function (name) {\r\n        return has$2(formats, name);\r\n      };\r\n      var register = function (name, format) {\r\n        if (name) {\r\n          if (!isString$1(name)) {\r\n            each$j(name, function (format, name) {\r\n              register(name, format);\r\n            });\r\n          } else {\r\n            if (!isArray$1(format)) {\r\n              format = [format];\r\n            }\r\n            each$k(format, function (format) {\r\n              if (isUndefined(format.deep)) {\r\n                format.deep = !isSelectorFormat(format);\r\n              }\r\n              if (isUndefined(format.split)) {\r\n                format.split = !isSelectorFormat(format) || isInlineFormat(format);\r\n              }\r\n              if (isUndefined(format.remove) && isSelectorFormat(format) && !isInlineFormat(format)) {\r\n                format.remove = 'none';\r\n              }\r\n              if (isSelectorFormat(format) && isInlineFormat(format)) {\r\n                format.mixed = true;\r\n                format.block_expand = true;\r\n              }\r\n              if (isString$1(format.classes)) {\r\n                format.classes = format.classes.split(/\\s+/);\r\n              }\r\n            });\r\n            formats[name] = format;\r\n          }\r\n        }\r\n      };\r\n      var unregister = function (name) {\r\n        if (name && formats[name]) {\r\n          delete formats[name];\r\n        }\r\n        return formats;\r\n      };\r\n      register(get(editor.dom));\r\n      register(getFormats(editor));\r\n      return {\r\n        get: get$1,\r\n        has: has,\r\n        register: register,\r\n        unregister: unregister\r\n      };\r\n    };\r\n\r\n    var each$5 = Tools.each;\r\n    var dom = DOMUtils.DOM;\r\n    var parsedSelectorToHtml = function (ancestry, editor) {\r\n      var elm, item, fragment;\r\n      var schema = editor && editor.schema || Schema({});\r\n      var decorate = function (elm, item) {\r\n        if (item.classes.length) {\r\n          dom.addClass(elm, item.classes.join(' '));\r\n        }\r\n        dom.setAttribs(elm, item.attrs);\r\n      };\r\n      var createElement = function (sItem) {\r\n        item = typeof sItem === 'string' ? {\r\n          name: sItem,\r\n          classes: [],\r\n          attrs: {}\r\n        } : sItem;\r\n        var elm = dom.create(item.name);\r\n        decorate(elm, item);\r\n        return elm;\r\n      };\r\n      var getRequiredParent = function (elm, candidate) {\r\n        var name = typeof elm !== 'string' ? elm.nodeName.toLowerCase() : elm;\r\n        var elmRule = schema.getElementRule(name);\r\n        var parentsRequired = elmRule && elmRule.parentsRequired;\r\n        if (parentsRequired && parentsRequired.length) {\r\n          return candidate && Tools.inArray(parentsRequired, candidate) !== -1 ? candidate : parentsRequired[0];\r\n        } else {\r\n          return false;\r\n        }\r\n      };\r\n      var wrapInHtml = function (elm, ancestry, siblings) {\r\n        var parent, parentCandidate;\r\n        var ancestor = ancestry.length > 0 && ancestry[0];\r\n        var ancestorName = ancestor && ancestor.name;\r\n        var parentRequired = getRequiredParent(elm, ancestorName);\r\n        if (parentRequired) {\r\n          if (ancestorName === parentRequired) {\r\n            parentCandidate = ancestry[0];\r\n            ancestry = ancestry.slice(1);\r\n          } else {\r\n            parentCandidate = parentRequired;\r\n          }\r\n        } else if (ancestor) {\r\n          parentCandidate = ancestry[0];\r\n          ancestry = ancestry.slice(1);\r\n        } else if (!siblings) {\r\n          return elm;\r\n        }\r\n        if (parentCandidate) {\r\n          parent = createElement(parentCandidate);\r\n          parent.appendChild(elm);\r\n        }\r\n        if (siblings) {\r\n          if (!parent) {\r\n            parent = dom.create('div');\r\n            parent.appendChild(elm);\r\n          }\r\n          Tools.each(siblings, function (sibling) {\r\n            var siblingElm = createElement(sibling);\r\n            parent.insertBefore(siblingElm, elm);\r\n          });\r\n        }\r\n        return wrapInHtml(parent, ancestry, parentCandidate && parentCandidate.siblings);\r\n      };\r\n      if (ancestry && ancestry.length) {\r\n        item = ancestry[0];\r\n        elm = createElement(item);\r\n        fragment = dom.create('div');\r\n        fragment.appendChild(wrapInHtml(elm, ancestry.slice(1), item.siblings));\r\n        return fragment;\r\n      } else {\r\n        return '';\r\n      }\r\n    };\r\n    var parseSelectorItem = function (item) {\r\n      var tagName;\r\n      var obj = {\r\n        classes: [],\r\n        attrs: {}\r\n      };\r\n      item = obj.selector = Tools.trim(item);\r\n      if (item !== '*') {\r\n        tagName = item.replace(/(?:([#\\.]|::?)([\\w\\-]+)|(\\[)([^\\]]+)\\]?)/g, function ($0, $1, $2, $3, $4) {\r\n          switch ($1) {\r\n          case '#':\r\n            obj.attrs.id = $2;\r\n            break;\r\n          case '.':\r\n            obj.classes.push($2);\r\n            break;\r\n          case ':':\r\n            if (Tools.inArray('checked disabled enabled read-only required'.split(' '), $2) !== -1) {\r\n              obj.attrs[$2] = $2;\r\n            }\r\n            break;\r\n          }\r\n          if ($3 === '[') {\r\n            var m = $4.match(/([\\w\\-]+)(?:\\=\\\"([^\\\"]+))?/);\r\n            if (m) {\r\n              obj.attrs[m[1]] = m[2];\r\n            }\r\n          }\r\n          return '';\r\n        });\r\n      }\r\n      obj.name = tagName || 'div';\r\n      return obj;\r\n    };\r\n    var parseSelector = function (selector) {\r\n      if (!selector || typeof selector !== 'string') {\r\n        return [];\r\n      }\r\n      selector = selector.split(/\\s*,\\s*/)[0];\r\n      selector = selector.replace(/\\s*(~\\+|~|\\+|>)\\s*/g, '$1');\r\n      return Tools.map(selector.split(/(?:>|\\s+(?![^\\[\\]]+\\]))/), function (item) {\r\n        var siblings = Tools.map(item.split(/(?:~\\+|~|\\+)/), parseSelectorItem);\r\n        var obj = siblings.pop();\r\n        if (siblings.length) {\r\n          obj.siblings = siblings;\r\n        }\r\n        return obj;\r\n      }).reverse();\r\n    };\r\n    var getCssText = function (editor, format) {\r\n      var name, previewFrag;\r\n      var previewCss = '', parentFontSize;\r\n      var previewStyles = getPreviewStyles(editor);\r\n      if (previewStyles === '') {\r\n        return '';\r\n      }\r\n      var removeVars = function (val) {\r\n        return val.replace(/%(\\w+)/g, '');\r\n      };\r\n      if (typeof format === 'string') {\r\n        format = editor.formatter.get(format);\r\n        if (!format) {\r\n          return;\r\n        }\r\n        format = format[0];\r\n      }\r\n      if ('preview' in format) {\r\n        var previewOpt = get$9(format, 'preview');\r\n        if (is$1(previewOpt, false)) {\r\n          return '';\r\n        } else {\r\n          previewStyles = previewOpt.getOr(previewStyles);\r\n        }\r\n      }\r\n      name = format.block || format.inline || 'span';\r\n      var items = parseSelector(format.selector);\r\n      if (items.length) {\r\n        if (!items[0].name) {\r\n          items[0].name = name;\r\n        }\r\n        name = format.selector;\r\n        previewFrag = parsedSelectorToHtml(items, editor);\r\n      } else {\r\n        previewFrag = parsedSelectorToHtml([name], editor);\r\n      }\r\n      var previewElm = dom.select(name, previewFrag)[0] || previewFrag.firstChild;\r\n      each$5(format.styles, function (value, name) {\r\n        var newValue = removeVars(value);\r\n        if (newValue) {\r\n          dom.setStyle(previewElm, name, newValue);\r\n        }\r\n      });\r\n      each$5(format.attributes, function (value, name) {\r\n        var newValue = removeVars(value);\r\n        if (newValue) {\r\n          dom.setAttrib(previewElm, name, newValue);\r\n        }\r\n      });\r\n      each$5(format.classes, function (value) {\r\n        var newValue = removeVars(value);\r\n        if (!dom.hasClass(previewElm, newValue)) {\r\n          dom.addClass(previewElm, newValue);\r\n        }\r\n      });\r\n      editor.fire('PreviewFormats');\r\n      dom.setStyles(previewFrag, {\r\n        position: 'absolute',\r\n        left: -65535\r\n      });\r\n      editor.getBody().appendChild(previewFrag);\r\n      parentFontSize = dom.getStyle(editor.getBody(), 'fontSize', true);\r\n      parentFontSize = /px$/.test(parentFontSize) ? parseInt(parentFontSize, 10) : 0;\r\n      each$5(previewStyles.split(' '), function (name) {\r\n        var value = dom.getStyle(previewElm, name, true);\r\n        if (name === 'background-color' && /transparent|rgba\\s*\\([^)]+,\\s*0\\)/.test(value)) {\r\n          value = dom.getStyle(editor.getBody(), name, true);\r\n          if (dom.toHex(value).toLowerCase() === '#ffffff') {\r\n            return;\r\n          }\r\n        }\r\n        if (name === 'color') {\r\n          if (dom.toHex(value).toLowerCase() === '#000000') {\r\n            return;\r\n          }\r\n        }\r\n        if (name === 'font-size') {\r\n          if (/em|%$/.test(value)) {\r\n            if (parentFontSize === 0) {\r\n              return;\r\n            }\r\n            var numValue = parseFloat(value) / (/%$/.test(value) ? 100 : 1);\r\n            value = numValue * parentFontSize + 'px';\r\n          }\r\n        }\r\n        if (name === 'border' && value) {\r\n          previewCss += 'padding:0 2px;';\r\n        }\r\n        previewCss += name + ':' + value + ';';\r\n      });\r\n      editor.fire('AfterPreviewFormats');\r\n      dom.remove(previewFrag);\r\n      return previewCss;\r\n    };\r\n\r\n    var setup$h = function (editor) {\r\n      editor.addShortcut('meta+b', '', 'Bold');\r\n      editor.addShortcut('meta+i', '', 'Italic');\r\n      editor.addShortcut('meta+u', '', 'Underline');\r\n      for (var i = 1; i <= 6; i++) {\r\n        editor.addShortcut('access+' + i, '', [\r\n          'FormatBlock',\r\n          false,\r\n          'h' + i\r\n        ]);\r\n      }\r\n      editor.addShortcut('access+7', '', [\r\n        'FormatBlock',\r\n        false,\r\n        'p'\r\n      ]);\r\n      editor.addShortcut('access+8', '', [\r\n        'FormatBlock',\r\n        false,\r\n        'div'\r\n      ]);\r\n      editor.addShortcut('access+9', '', [\r\n        'FormatBlock',\r\n        false,\r\n        'address'\r\n      ]);\r\n    };\r\n\r\n    var Formatter = function (editor) {\r\n      var formats = FormatRegistry(editor);\r\n      var formatChangeState = Cell(null);\r\n      setup$h(editor);\r\n      setup$k(editor);\r\n      return {\r\n        get: formats.get,\r\n        has: formats.has,\r\n        register: formats.register,\r\n        unregister: formats.unregister,\r\n        apply: function (name, vars, node) {\r\n          applyFormat(editor, name, vars, node);\r\n        },\r\n        remove: function (name, vars, node, similar) {\r\n          removeFormat(editor, name, vars, node, similar);\r\n        },\r\n        toggle: function (name, vars, node) {\r\n          toggleFormat(editor, name, vars, node);\r\n        },\r\n        match: function (name, vars, node, similar) {\r\n          return matchFormat(editor, name, vars, node, similar);\r\n        },\r\n        closest: function (names) {\r\n          return closestFormat(editor, names);\r\n        },\r\n        matchAll: function (names, vars) {\r\n          return matchAllFormats(editor, names, vars);\r\n        },\r\n        matchNode: function (node, name, vars, similar) {\r\n          return matchNodeFormat(editor, node, name, vars, similar);\r\n        },\r\n        canApply: function (name) {\r\n          return canApplyFormat(editor, name);\r\n        },\r\n        formatChanged: function (formats, callback, similar, vars) {\r\n          return formatChanged(editor, formatChangeState, formats, callback, similar, vars);\r\n        },\r\n        getCssText: curry(getCssText, editor)\r\n      };\r\n    };\r\n\r\n    var shouldIgnoreCommand = function (cmd) {\r\n      switch (cmd.toLowerCase()) {\r\n      case 'undo':\r\n      case 'redo':\r\n      case 'mcerepaint':\r\n      case 'mcefocus':\r\n        return true;\r\n      default:\r\n        return false;\r\n      }\r\n    };\r\n    var registerEvents = function (editor, undoManager, locks) {\r\n      var isFirstTypedCharacter = Cell(false);\r\n      var addNonTypingUndoLevel = function (e) {\r\n        setTyping(undoManager, false, locks);\r\n        undoManager.add({}, e);\r\n      };\r\n      editor.on('init', function () {\r\n        undoManager.add();\r\n      });\r\n      editor.on('BeforeExecCommand', function (e) {\r\n        var cmd = e.command;\r\n        if (!shouldIgnoreCommand(cmd)) {\r\n          endTyping(undoManager, locks);\r\n          undoManager.beforeChange();\r\n        }\r\n      });\r\n      editor.on('ExecCommand', function (e) {\r\n        var cmd = e.command;\r\n        if (!shouldIgnoreCommand(cmd)) {\r\n          addNonTypingUndoLevel(e);\r\n        }\r\n      });\r\n      editor.on('ObjectResizeStart cut', function () {\r\n        undoManager.beforeChange();\r\n      });\r\n      editor.on('SaveContent ObjectResized blur', addNonTypingUndoLevel);\r\n      editor.on('dragend', addNonTypingUndoLevel);\r\n      editor.on('keyup', function (e) {\r\n        var keyCode = e.keyCode;\r\n        if (e.isDefaultPrevented()) {\r\n          return;\r\n        }\r\n        if (keyCode >= 33 && keyCode <= 36 || keyCode >= 37 && keyCode <= 40 || keyCode === 45 || e.ctrlKey) {\r\n          addNonTypingUndoLevel();\r\n          editor.nodeChanged();\r\n        }\r\n        if (keyCode === 46 || keyCode === 8) {\r\n          editor.nodeChanged();\r\n        }\r\n        if (isFirstTypedCharacter.get() && undoManager.typing && isEq$1(createFromEditor(editor), undoManager.data[0]) === false) {\r\n          if (editor.isDirty() === false) {\r\n            editor.setDirty(true);\r\n            editor.fire('change', {\r\n              level: undoManager.data[0],\r\n              lastLevel: null\r\n            });\r\n          }\r\n          editor.fire('TypingUndo');\r\n          isFirstTypedCharacter.set(false);\r\n          editor.nodeChanged();\r\n        }\r\n      });\r\n      editor.on('keydown', function (e) {\r\n        var keyCode = e.keyCode;\r\n        if (e.isDefaultPrevented()) {\r\n          return;\r\n        }\r\n        if (keyCode >= 33 && keyCode <= 36 || keyCode >= 37 && keyCode <= 40 || keyCode === 45) {\r\n          if (undoManager.typing) {\r\n            addNonTypingUndoLevel(e);\r\n          }\r\n          return;\r\n        }\r\n        var modKey = e.ctrlKey && !e.altKey || e.metaKey;\r\n        if ((keyCode < 16 || keyCode > 20) && keyCode !== 224 && keyCode !== 91 && !undoManager.typing && !modKey) {\r\n          undoManager.beforeChange();\r\n          setTyping(undoManager, true, locks);\r\n          undoManager.add({}, e);\r\n          isFirstTypedCharacter.set(true);\r\n        }\r\n      });\r\n      editor.on('mousedown', function (e) {\r\n        if (undoManager.typing) {\r\n          addNonTypingUndoLevel(e);\r\n        }\r\n      });\r\n      var isInsertReplacementText = function (event) {\r\n        return event.inputType === 'insertReplacementText';\r\n      };\r\n      var isInsertTextDataNull = function (event) {\r\n        return event.inputType === 'insertText' && event.data === null;\r\n      };\r\n      var isInsertFromPasteOrDrop = function (event) {\r\n        return event.inputType === 'insertFromPaste' || event.inputType === 'insertFromDrop';\r\n      };\r\n      editor.on('input', function (e) {\r\n        if (e.inputType && (isInsertReplacementText(e) || isInsertTextDataNull(e) || isInsertFromPasteOrDrop(e))) {\r\n          addNonTypingUndoLevel(e);\r\n        }\r\n      });\r\n      editor.on('AddUndo Undo Redo ClearUndos', function (e) {\r\n        if (!e.isDefaultPrevented()) {\r\n          editor.nodeChanged();\r\n        }\r\n      });\r\n    };\r\n    var addKeyboardShortcuts = function (editor) {\r\n      editor.addShortcut('meta+z', '', 'Undo');\r\n      editor.addShortcut('meta+y,meta+shift+z', '', 'Redo');\r\n    };\r\n\r\n    var UndoManager = function (editor) {\r\n      var beforeBookmark = value();\r\n      var locks = Cell(0);\r\n      var index = Cell(0);\r\n      var undoManager = {\r\n        data: [],\r\n        typing: false,\r\n        beforeChange: function () {\r\n          beforeChange(editor, locks, beforeBookmark);\r\n        },\r\n        add: function (level, event) {\r\n          return addUndoLevel(editor, undoManager, index, locks, beforeBookmark, level, event);\r\n        },\r\n        undo: function () {\r\n          return undo(editor, undoManager, locks, index);\r\n        },\r\n        redo: function () {\r\n          return redo(editor, index, undoManager.data);\r\n        },\r\n        clear: function () {\r\n          clear(editor, undoManager, index);\r\n        },\r\n        reset: function () {\r\n          reset(editor, undoManager);\r\n        },\r\n        hasUndo: function () {\r\n          return hasUndo(editor, undoManager, index);\r\n        },\r\n        hasRedo: function () {\r\n          return hasRedo(editor, undoManager, index);\r\n        },\r\n        transact: function (callback) {\r\n          return transact(editor, undoManager, locks, callback);\r\n        },\r\n        ignore: function (callback) {\r\n          ignore(editor, locks, callback);\r\n        },\r\n        extra: function (callback1, callback2) {\r\n          extra(editor, undoManager, index, callback1, callback2);\r\n        }\r\n      };\r\n      if (!isRtc(editor)) {\r\n        registerEvents(editor, undoManager, locks);\r\n      }\r\n      addKeyboardShortcuts(editor);\r\n      return undoManager;\r\n    };\r\n\r\n    var nonTypingKeycodes = [\r\n      9,\r\n      27,\r\n      VK.HOME,\r\n      VK.END,\r\n      19,\r\n      20,\r\n      44,\r\n      144,\r\n      145,\r\n      33,\r\n      34,\r\n      45,\r\n      16,\r\n      17,\r\n      18,\r\n      91,\r\n      92,\r\n      93,\r\n      VK.DOWN,\r\n      VK.UP,\r\n      VK.LEFT,\r\n      VK.RIGHT\r\n    ].concat(Env.browser.isFirefox() ? [224] : []);\r\n    var placeholderAttr = 'data-mce-placeholder';\r\n    var isKeyboardEvent = function (e) {\r\n      return e.type === 'keydown' || e.type === 'keyup';\r\n    };\r\n    var isDeleteEvent = function (e) {\r\n      var keyCode = e.keyCode;\r\n      return keyCode === VK.BACKSPACE || keyCode === VK.DELETE;\r\n    };\r\n    var isNonTypingKeyboardEvent = function (e) {\r\n      if (isKeyboardEvent(e)) {\r\n        var keyCode = e.keyCode;\r\n        return !isDeleteEvent(e) && (VK.metaKeyPressed(e) || e.altKey || keyCode >= 112 && keyCode <= 123 || contains$3(nonTypingKeycodes, keyCode));\r\n      } else {\r\n        return false;\r\n      }\r\n    };\r\n    var isTypingKeyboardEvent = function (e) {\r\n      return isKeyboardEvent(e) && !(isDeleteEvent(e) || e.type === 'keyup' && e.keyCode === 229);\r\n    };\r\n    var isVisuallyEmpty = function (dom, rootElm, forcedRootBlock) {\r\n      if (isEmpty$2(SugarElement.fromDom(rootElm), false)) {\r\n        var isForcedRootBlockFalse = forcedRootBlock === '';\r\n        var firstElement = rootElm.firstElementChild;\r\n        if (!firstElement) {\r\n          return true;\r\n        } else if (dom.getStyle(rootElm.firstElementChild, 'padding-left') || dom.getStyle(rootElm.firstElementChild, 'padding-right')) {\r\n          return false;\r\n        } else {\r\n          return isForcedRootBlockFalse ? !dom.isBlock(firstElement) : forcedRootBlock === firstElement.nodeName.toLowerCase();\r\n        }\r\n      } else {\r\n        return false;\r\n      }\r\n    };\r\n    var setup$g = function (editor) {\r\n      var dom = editor.dom;\r\n      var rootBlock = getForcedRootBlock(editor);\r\n      var placeholder = getPlaceholder(editor);\r\n      var updatePlaceholder = function (e, initial) {\r\n        if (isNonTypingKeyboardEvent(e)) {\r\n          return;\r\n        }\r\n        var body = editor.getBody();\r\n        var showPlaceholder = isTypingKeyboardEvent(e) ? false : isVisuallyEmpty(dom, body, rootBlock);\r\n        var isPlaceholderShown = dom.getAttrib(body, placeholderAttr) !== '';\r\n        if (isPlaceholderShown !== showPlaceholder || initial) {\r\n          dom.setAttrib(body, placeholderAttr, showPlaceholder ? placeholder : null);\r\n          dom.setAttrib(body, 'aria-placeholder', showPlaceholder ? placeholder : null);\r\n          firePlaceholderToggle(editor, showPlaceholder);\r\n          editor.on(showPlaceholder ? 'keydown' : 'keyup', updatePlaceholder);\r\n          editor.off(showPlaceholder ? 'keyup' : 'keydown', updatePlaceholder);\r\n        }\r\n      };\r\n      if (placeholder) {\r\n        editor.on('init', function (e) {\r\n          updatePlaceholder(e, true);\r\n          editor.on('change SetContent ExecCommand', updatePlaceholder);\r\n          editor.on('paste', function (e) {\r\n            return Delay.setEditorTimeout(editor, function () {\r\n              return updatePlaceholder(e);\r\n            });\r\n          });\r\n        });\r\n      }\r\n    };\r\n\r\n    var strongRtl = /[\\u0591-\\u07FF\\uFB1D-\\uFDFF\\uFE70-\\uFEFC]/;\r\n    var hasStrongRtl = function (text) {\r\n      return strongRtl.test(text);\r\n    };\r\n\r\n    var isInlineTarget = function (editor, elm) {\r\n      return is$2(SugarElement.fromDom(elm), getInlineBoundarySelector(editor));\r\n    };\r\n    var isRtl = function (element) {\r\n      return DOMUtils.DOM.getStyle(element, 'direction', true) === 'rtl' || hasStrongRtl(element.textContent);\r\n    };\r\n    var findInlineParents = function (isInlineTarget, rootNode, pos) {\r\n      return filter$4(DOMUtils.DOM.getParents(pos.container(), '*', rootNode), isInlineTarget);\r\n    };\r\n    var findRootInline = function (isInlineTarget, rootNode, pos) {\r\n      var parents = findInlineParents(isInlineTarget, rootNode, pos);\r\n      return Optional.from(parents[parents.length - 1]);\r\n    };\r\n    var hasSameParentBlock = function (rootNode, node1, node2) {\r\n      var block1 = getParentBlock$2(node1, rootNode);\r\n      var block2 = getParentBlock$2(node2, rootNode);\r\n      return block1 && block1 === block2;\r\n    };\r\n    var isAtZwsp = function (pos) {\r\n      return isBeforeInline(pos) || isAfterInline(pos);\r\n    };\r\n    var normalizePosition = function (forward, pos) {\r\n      if (!pos) {\r\n        return pos;\r\n      }\r\n      var container = pos.container(), offset = pos.offset();\r\n      if (forward) {\r\n        if (isCaretContainerInline(container)) {\r\n          if (isText$7(container.nextSibling)) {\r\n            return CaretPosition(container.nextSibling, 0);\r\n          } else {\r\n            return CaretPosition.after(container);\r\n          }\r\n        } else {\r\n          return isBeforeInline(pos) ? CaretPosition(container, offset + 1) : pos;\r\n        }\r\n      } else {\r\n        if (isCaretContainerInline(container)) {\r\n          if (isText$7(container.previousSibling)) {\r\n            return CaretPosition(container.previousSibling, container.previousSibling.data.length);\r\n          } else {\r\n            return CaretPosition.before(container);\r\n          }\r\n        } else {\r\n          return isAfterInline(pos) ? CaretPosition(container, offset - 1) : pos;\r\n        }\r\n      }\r\n    };\r\n    var normalizeForwards = curry(normalizePosition, true);\r\n    var normalizeBackwards = curry(normalizePosition, false);\r\n\r\n    var isBeforeRoot = function (rootNode) {\r\n      return function (elm) {\r\n        return eq(rootNode, SugarElement.fromDom(elm.dom.parentNode));\r\n      };\r\n    };\r\n    var isTextBlockOrListItem = function (element) {\r\n      return isTextBlock$2(element) || isListItem(element);\r\n    };\r\n    var getParentBlock$1 = function (rootNode, elm) {\r\n      if (contains$1(rootNode, elm)) {\r\n        return closest$3(elm, isTextBlockOrListItem, isBeforeRoot(rootNode));\r\n      } else {\r\n        return Optional.none();\r\n      }\r\n    };\r\n    var placeCaretInEmptyBody = function (editor) {\r\n      var body = editor.getBody();\r\n      var node = body.firstChild && editor.dom.isBlock(body.firstChild) ? body.firstChild : body;\r\n      editor.selection.setCursorLocation(node, 0);\r\n    };\r\n    var paddEmptyBody = function (editor) {\r\n      if (editor.dom.isEmpty(editor.getBody())) {\r\n        editor.setContent('');\r\n        placeCaretInEmptyBody(editor);\r\n      }\r\n    };\r\n    var willDeleteLastPositionInElement = function (forward, fromPos, elm) {\r\n      return lift2(firstPositionIn(elm), lastPositionIn(elm), function (firstPos, lastPos) {\r\n        var normalizedFirstPos = normalizePosition(true, firstPos);\r\n        var normalizedLastPos = normalizePosition(false, lastPos);\r\n        var normalizedFromPos = normalizePosition(false, fromPos);\r\n        if (forward) {\r\n          return nextPosition(elm, normalizedFromPos).exists(function (nextPos) {\r\n            return nextPos.isEqual(normalizedLastPos) && fromPos.isEqual(normalizedFirstPos);\r\n          });\r\n        } else {\r\n          return prevPosition(elm, normalizedFromPos).exists(function (prevPos) {\r\n            return prevPos.isEqual(normalizedFirstPos) && fromPos.isEqual(normalizedLastPos);\r\n          });\r\n        }\r\n      }).getOr(true);\r\n    };\r\n\r\n    var blockPosition = function (block, position) {\r\n      return {\r\n        block: block,\r\n        position: position\r\n      };\r\n    };\r\n    var blockBoundary = function (from, to) {\r\n      return {\r\n        from: from,\r\n        to: to\r\n      };\r\n    };\r\n    var getBlockPosition = function (rootNode, pos) {\r\n      var rootElm = SugarElement.fromDom(rootNode);\r\n      var containerElm = SugarElement.fromDom(pos.container());\r\n      return getParentBlock$1(rootElm, containerElm).map(function (block) {\r\n        return blockPosition(block, pos);\r\n      });\r\n    };\r\n    var isDifferentBlocks = function (blockBoundary) {\r\n      return eq(blockBoundary.from.block, blockBoundary.to.block) === false;\r\n    };\r\n    var hasSameParent = function (blockBoundary) {\r\n      return parent(blockBoundary.from.block).bind(function (parent1) {\r\n        return parent(blockBoundary.to.block).filter(function (parent2) {\r\n          return eq(parent1, parent2);\r\n        });\r\n      }).isSome();\r\n    };\r\n    var isEditable$1 = function (blockBoundary) {\r\n      return isContentEditableFalse$b(blockBoundary.from.block.dom) === false && isContentEditableFalse$b(blockBoundary.to.block.dom) === false;\r\n    };\r\n    var skipLastBr = function (rootNode, forward, blockPosition) {\r\n      if (isBr$5(blockPosition.position.getNode()) && isEmpty$2(blockPosition.block) === false) {\r\n        return positionIn(false, blockPosition.block.dom).bind(function (lastPositionInBlock) {\r\n          if (lastPositionInBlock.isEqual(blockPosition.position)) {\r\n            return fromPosition(forward, rootNode, lastPositionInBlock).bind(function (to) {\r\n              return getBlockPosition(rootNode, to);\r\n            });\r\n          } else {\r\n            return Optional.some(blockPosition);\r\n          }\r\n        }).getOr(blockPosition);\r\n      } else {\r\n        return blockPosition;\r\n      }\r\n    };\r\n    var readFromRange = function (rootNode, forward, rng) {\r\n      var fromBlockPos = getBlockPosition(rootNode, CaretPosition.fromRangeStart(rng));\r\n      var toBlockPos = fromBlockPos.bind(function (blockPos) {\r\n        return fromPosition(forward, rootNode, blockPos.position).bind(function (to) {\r\n          return getBlockPosition(rootNode, to).map(function (blockPos) {\r\n            return skipLastBr(rootNode, forward, blockPos);\r\n          });\r\n        });\r\n      });\r\n      return lift2(fromBlockPos, toBlockPos, blockBoundary).filter(function (blockBoundary) {\r\n        return isDifferentBlocks(blockBoundary) && hasSameParent(blockBoundary) && isEditable$1(blockBoundary);\r\n      });\r\n    };\r\n    var read$1 = function (rootNode, forward, rng) {\r\n      return rng.collapsed ? readFromRange(rootNode, forward, rng) : Optional.none();\r\n    };\r\n\r\n    var getChildrenUntilBlockBoundary = function (block) {\r\n      var children$1 = children(block);\r\n      return findIndex$2(children$1, isBlock$2).fold(constant(children$1), function (index) {\r\n        return children$1.slice(0, index);\r\n      });\r\n    };\r\n    var extractChildren = function (block) {\r\n      var children = getChildrenUntilBlockBoundary(block);\r\n      each$k(children, remove$7);\r\n      return children;\r\n    };\r\n    var removeEmptyRoot = function (rootNode, block) {\r\n      var parents = parentsAndSelf(block, rootNode);\r\n      return find$3(parents.reverse(), function (element) {\r\n        return isEmpty$2(element);\r\n      }).each(remove$7);\r\n    };\r\n    var isEmptyBefore = function (el) {\r\n      return filter$4(prevSiblings(el), function (el) {\r\n        return !isEmpty$2(el);\r\n      }).length === 0;\r\n    };\r\n    var nestedBlockMerge = function (rootNode, fromBlock, toBlock, insertionPoint) {\r\n      if (isEmpty$2(toBlock)) {\r\n        fillWithPaddingBr(toBlock);\r\n        return firstPositionIn(toBlock.dom);\r\n      }\r\n      if (isEmptyBefore(insertionPoint) && isEmpty$2(fromBlock)) {\r\n        before$4(insertionPoint, SugarElement.fromTag('br'));\r\n      }\r\n      var position = prevPosition(toBlock.dom, CaretPosition.before(insertionPoint.dom));\r\n      each$k(extractChildren(fromBlock), function (child) {\r\n        before$4(insertionPoint, child);\r\n      });\r\n      removeEmptyRoot(rootNode, fromBlock);\r\n      return position;\r\n    };\r\n    var sidelongBlockMerge = function (rootNode, fromBlock, toBlock) {\r\n      if (isEmpty$2(toBlock)) {\r\n        remove$7(toBlock);\r\n        if (isEmpty$2(fromBlock)) {\r\n          fillWithPaddingBr(fromBlock);\r\n        }\r\n        return firstPositionIn(fromBlock.dom);\r\n      }\r\n      var position = lastPositionIn(toBlock.dom);\r\n      each$k(extractChildren(fromBlock), function (child) {\r\n        append$1(toBlock, child);\r\n      });\r\n      removeEmptyRoot(rootNode, fromBlock);\r\n      return position;\r\n    };\r\n    var findInsertionPoint = function (toBlock, block) {\r\n      var parentsAndSelf$1 = parentsAndSelf(block, toBlock);\r\n      return Optional.from(parentsAndSelf$1[parentsAndSelf$1.length - 1]);\r\n    };\r\n    var getInsertionPoint = function (fromBlock, toBlock) {\r\n      return contains$1(toBlock, fromBlock) ? findInsertionPoint(toBlock, fromBlock) : Optional.none();\r\n    };\r\n    var trimBr = function (first, block) {\r\n      positionIn(first, block.dom).map(function (position) {\r\n        return position.getNode();\r\n      }).map(SugarElement.fromDom).filter(isBr$4).each(remove$7);\r\n    };\r\n    var mergeBlockInto = function (rootNode, fromBlock, toBlock) {\r\n      trimBr(true, fromBlock);\r\n      trimBr(false, toBlock);\r\n      return getInsertionPoint(fromBlock, toBlock).fold(curry(sidelongBlockMerge, rootNode, fromBlock, toBlock), curry(nestedBlockMerge, rootNode, fromBlock, toBlock));\r\n    };\r\n    var mergeBlocks = function (rootNode, forward, block1, block2) {\r\n      return forward ? mergeBlockInto(rootNode, block2, block1) : mergeBlockInto(rootNode, block1, block2);\r\n    };\r\n\r\n    var backspaceDelete$8 = function (editor, forward) {\r\n      var rootNode = SugarElement.fromDom(editor.getBody());\r\n      var position = read$1(rootNode.dom, forward, editor.selection.getRng()).bind(function (blockBoundary) {\r\n        return mergeBlocks(rootNode, forward, blockBoundary.from.block, blockBoundary.to.block);\r\n      });\r\n      position.each(function (pos) {\r\n        editor.selection.setRng(pos.toRange());\r\n      });\r\n      return position.isSome();\r\n    };\r\n\r\n    var deleteRangeMergeBlocks = function (rootNode, selection) {\r\n      var rng = selection.getRng();\r\n      return lift2(getParentBlock$1(rootNode, SugarElement.fromDom(rng.startContainer)), getParentBlock$1(rootNode, SugarElement.fromDom(rng.endContainer)), function (block1, block2) {\r\n        if (eq(block1, block2) === false) {\r\n          rng.deleteContents();\r\n          mergeBlocks(rootNode, true, block1, block2).each(function (pos) {\r\n            selection.setRng(pos.toRange());\r\n          });\r\n          return true;\r\n        } else {\r\n          return false;\r\n        }\r\n      }).getOr(false);\r\n    };\r\n    var isRawNodeInTable = function (root, rawNode) {\r\n      var node = SugarElement.fromDom(rawNode);\r\n      var isRoot = curry(eq, root);\r\n      return ancestor$3(node, isTableCell$4, isRoot).isSome();\r\n    };\r\n    var isSelectionInTable = function (root, rng) {\r\n      return isRawNodeInTable(root, rng.startContainer) || isRawNodeInTable(root, rng.endContainer);\r\n    };\r\n    var isEverythingSelected = function (root, rng) {\r\n      var noPrevious = prevPosition(root.dom, CaretPosition.fromRangeStart(rng)).isNone();\r\n      var noNext = nextPosition(root.dom, CaretPosition.fromRangeEnd(rng)).isNone();\r\n      return !isSelectionInTable(root, rng) && noPrevious && noNext;\r\n    };\r\n    var emptyEditor = function (editor) {\r\n      editor.setContent('');\r\n      editor.selection.setCursorLocation();\r\n      return true;\r\n    };\r\n    var deleteRange$1 = function (editor) {\r\n      var rootNode = SugarElement.fromDom(editor.getBody());\r\n      var rng = editor.selection.getRng();\r\n      return isEverythingSelected(rootNode, rng) ? emptyEditor(editor) : deleteRangeMergeBlocks(rootNode, editor.selection);\r\n    };\r\n    var backspaceDelete$7 = function (editor, _forward) {\r\n      return editor.selection.isCollapsed() ? false : deleteRange$1(editor);\r\n    };\r\n\r\n    var isContentEditableTrue$2 = isContentEditableTrue$4;\r\n    var isContentEditableFalse$4 = isContentEditableFalse$b;\r\n    var showCaret = function (direction, editor, node, before, scrollIntoView) {\r\n      return Optional.from(editor._selectionOverrides.showCaret(direction, node, before, scrollIntoView));\r\n    };\r\n    var getNodeRange = function (node) {\r\n      var rng = node.ownerDocument.createRange();\r\n      rng.selectNode(node);\r\n      return rng;\r\n    };\r\n    var selectNode = function (editor, node) {\r\n      var e = editor.fire('BeforeObjectSelected', { target: node });\r\n      if (e.isDefaultPrevented()) {\r\n        return Optional.none();\r\n      }\r\n      return Optional.some(getNodeRange(node));\r\n    };\r\n    var renderCaretAtRange = function (editor, range, scrollIntoView) {\r\n      var normalizedRange = normalizeRange(1, editor.getBody(), range);\r\n      var caretPosition = CaretPosition.fromRangeStart(normalizedRange);\r\n      var caretPositionNode = caretPosition.getNode();\r\n      if (isInlineFakeCaretTarget(caretPositionNode)) {\r\n        return showCaret(1, editor, caretPositionNode, !caretPosition.isAtEnd(), false);\r\n      }\r\n      var caretPositionBeforeNode = caretPosition.getNode(true);\r\n      if (isInlineFakeCaretTarget(caretPositionBeforeNode)) {\r\n        return showCaret(1, editor, caretPositionBeforeNode, false, false);\r\n      }\r\n      var ceRoot = editor.dom.getParent(caretPosition.getNode(), function (node) {\r\n        return isContentEditableFalse$4(node) || isContentEditableTrue$2(node);\r\n      });\r\n      if (isInlineFakeCaretTarget(ceRoot)) {\r\n        return showCaret(1, editor, ceRoot, false, scrollIntoView);\r\n      }\r\n      return Optional.none();\r\n    };\r\n    var renderRangeCaret = function (editor, range, scrollIntoView) {\r\n      return range.collapsed ? renderCaretAtRange(editor, range, scrollIntoView).getOr(range) : range;\r\n    };\r\n\r\n    var isBeforeBoundary = function (pos) {\r\n      return isBeforeContentEditableFalse(pos) || isBeforeMedia(pos);\r\n    };\r\n    var isAfterBoundary = function (pos) {\r\n      return isAfterContentEditableFalse(pos) || isAfterMedia(pos);\r\n    };\r\n    var trimEmptyTextNode = function (dom, node) {\r\n      if (isText$7(node) && node.data.length === 0) {\r\n        dom.remove(node);\r\n      }\r\n    };\r\n    var deleteContentAndShowCaret = function (editor, range, node, direction, forward, peekCaretPosition) {\r\n      showCaret(direction, editor, peekCaretPosition.getNode(!forward), forward, true).each(function (caretRange) {\r\n        if (range.collapsed) {\r\n          var deleteRange = range.cloneRange();\r\n          if (forward) {\r\n            deleteRange.setEnd(caretRange.startContainer, caretRange.startOffset);\r\n          } else {\r\n            deleteRange.setStart(caretRange.endContainer, caretRange.endOffset);\r\n          }\r\n          deleteRange.deleteContents();\r\n        } else {\r\n          range.deleteContents();\r\n        }\r\n        editor.selection.setRng(caretRange);\r\n      });\r\n      trimEmptyTextNode(editor.dom, node);\r\n      return true;\r\n    };\r\n    var deleteBoundaryText = function (editor, forward) {\r\n      var range = editor.selection.getRng();\r\n      if (!isText$7(range.commonAncestorContainer)) {\r\n        return false;\r\n      }\r\n      var direction = forward ? HDirection.Forwards : HDirection.Backwards;\r\n      var caretWalker = CaretWalker(editor.getBody());\r\n      var getNextPosFn = curry(getVisualCaretPosition, forward ? caretWalker.next : caretWalker.prev);\r\n      var isBeforeFn = forward ? isBeforeBoundary : isAfterBoundary;\r\n      var caretPosition = getNormalizedRangeEndPoint(direction, editor.getBody(), range);\r\n      var nextCaretPosition = normalizePosition(forward, getNextPosFn(caretPosition));\r\n      if (!nextCaretPosition || !isMoveInsideSameBlock(caretPosition, nextCaretPosition)) {\r\n        return false;\r\n      } else if (isBeforeFn(nextCaretPosition)) {\r\n        return deleteContentAndShowCaret(editor, range, caretPosition.getNode(), direction, forward, nextCaretPosition);\r\n      }\r\n      var peekCaretPosition = getNextPosFn(nextCaretPosition);\r\n      if (peekCaretPosition && isBeforeFn(peekCaretPosition)) {\r\n        if (isMoveInsideSameBlock(nextCaretPosition, peekCaretPosition)) {\r\n          return deleteContentAndShowCaret(editor, range, caretPosition.getNode(), direction, forward, peekCaretPosition);\r\n        }\r\n      }\r\n      return false;\r\n    };\r\n    var backspaceDelete$6 = function (editor, forward) {\r\n      return deleteBoundaryText(editor, forward);\r\n    };\r\n\r\n    var isCompoundElement = function (node) {\r\n      return isTableCell$4(SugarElement.fromDom(node)) || isListItem(SugarElement.fromDom(node));\r\n    };\r\n    var DeleteAction = Adt.generate([\r\n      { remove: ['element'] },\r\n      { moveToElement: ['element'] },\r\n      { moveToPosition: ['position'] }\r\n    ]);\r\n    var isAtContentEditableBlockCaret = function (forward, from) {\r\n      var elm = from.getNode(forward === false);\r\n      var caretLocation = forward ? 'after' : 'before';\r\n      return isElement$5(elm) && elm.getAttribute('data-mce-caret') === caretLocation;\r\n    };\r\n    var isDeleteFromCefDifferentBlocks = function (root, forward, from, to) {\r\n      var inSameBlock = function (elm) {\r\n        return isInline$1(SugarElement.fromDom(elm)) && !isInSameBlock(from, to, root);\r\n      };\r\n      return getRelativeCefElm(!forward, from).fold(function () {\r\n        return getRelativeCefElm(forward, to).fold(never, inSameBlock);\r\n      }, inSameBlock);\r\n    };\r\n    var deleteEmptyBlockOrMoveToCef = function (root, forward, from, to) {\r\n      var toCefElm = to.getNode(forward === false);\r\n      return getParentBlock$1(SugarElement.fromDom(root), SugarElement.fromDom(from.getNode())).map(function (blockElm) {\r\n        return isEmpty$2(blockElm) ? DeleteAction.remove(blockElm.dom) : DeleteAction.moveToElement(toCefElm);\r\n      }).orThunk(function () {\r\n        return Optional.some(DeleteAction.moveToElement(toCefElm));\r\n      });\r\n    };\r\n    var findCefPosition = function (root, forward, from) {\r\n      return fromPosition(forward, root, from).bind(function (to) {\r\n        if (isCompoundElement(to.getNode())) {\r\n          return Optional.none();\r\n        } else if (isDeleteFromCefDifferentBlocks(root, forward, from, to)) {\r\n          return Optional.none();\r\n        } else if (forward && isContentEditableFalse$b(to.getNode())) {\r\n          return deleteEmptyBlockOrMoveToCef(root, forward, from, to);\r\n        } else if (forward === false && isContentEditableFalse$b(to.getNode(true))) {\r\n          return deleteEmptyBlockOrMoveToCef(root, forward, from, to);\r\n        } else if (forward && isAfterContentEditableFalse(from)) {\r\n          return Optional.some(DeleteAction.moveToPosition(to));\r\n        } else if (forward === false && isBeforeContentEditableFalse(from)) {\r\n          return Optional.some(DeleteAction.moveToPosition(to));\r\n        } else {\r\n          return Optional.none();\r\n        }\r\n      });\r\n    };\r\n    var getContentEditableBlockAction = function (forward, elm) {\r\n      if (forward && isContentEditableFalse$b(elm.nextSibling)) {\r\n        return Optional.some(DeleteAction.moveToElement(elm.nextSibling));\r\n      } else if (forward === false && isContentEditableFalse$b(elm.previousSibling)) {\r\n        return Optional.some(DeleteAction.moveToElement(elm.previousSibling));\r\n      } else {\r\n        return Optional.none();\r\n      }\r\n    };\r\n    var skipMoveToActionFromInlineCefToContent = function (root, from, deleteAction) {\r\n      return deleteAction.fold(function (elm) {\r\n        return Optional.some(DeleteAction.remove(elm));\r\n      }, function (elm) {\r\n        return Optional.some(DeleteAction.moveToElement(elm));\r\n      }, function (to) {\r\n        if (isInSameBlock(from, to, root)) {\r\n          return Optional.none();\r\n        } else {\r\n          return Optional.some(DeleteAction.moveToPosition(to));\r\n        }\r\n      });\r\n    };\r\n    var getContentEditableAction = function (root, forward, from) {\r\n      if (isAtContentEditableBlockCaret(forward, from)) {\r\n        return getContentEditableBlockAction(forward, from.getNode(forward === false)).fold(function () {\r\n          return findCefPosition(root, forward, from);\r\n        }, Optional.some);\r\n      } else {\r\n        return findCefPosition(root, forward, from).bind(function (deleteAction) {\r\n          return skipMoveToActionFromInlineCefToContent(root, from, deleteAction);\r\n        });\r\n      }\r\n    };\r\n    var read = function (root, forward, rng) {\r\n      var normalizedRange = normalizeRange(forward ? 1 : -1, root, rng);\r\n      var from = CaretPosition.fromRangeStart(normalizedRange);\r\n      var rootElement = SugarElement.fromDom(root);\r\n      if (forward === false && isAfterContentEditableFalse(from)) {\r\n        return Optional.some(DeleteAction.remove(from.getNode(true)));\r\n      } else if (forward && isBeforeContentEditableFalse(from)) {\r\n        return Optional.some(DeleteAction.remove(from.getNode()));\r\n      } else if (forward === false && isBeforeContentEditableFalse(from) && isAfterBr(rootElement, from)) {\r\n        return findPreviousBr(rootElement, from).map(function (br) {\r\n          return DeleteAction.remove(br.getNode());\r\n        });\r\n      } else if (forward && isAfterContentEditableFalse(from) && isBeforeBr$1(rootElement, from)) {\r\n        return findNextBr(rootElement, from).map(function (br) {\r\n          return DeleteAction.remove(br.getNode());\r\n        });\r\n      } else {\r\n        return getContentEditableAction(root, forward, from);\r\n      }\r\n    };\r\n\r\n    var deleteElement$1 = function (editor, forward) {\r\n      return function (element) {\r\n        editor._selectionOverrides.hideFakeCaret();\r\n        deleteElement$2(editor, forward, SugarElement.fromDom(element));\r\n        return true;\r\n      };\r\n    };\r\n    var moveToElement = function (editor, forward) {\r\n      return function (element) {\r\n        var pos = forward ? CaretPosition.before(element) : CaretPosition.after(element);\r\n        editor.selection.setRng(pos.toRange());\r\n        return true;\r\n      };\r\n    };\r\n    var moveToPosition = function (editor) {\r\n      return function (pos) {\r\n        editor.selection.setRng(pos.toRange());\r\n        return true;\r\n      };\r\n    };\r\n    var getAncestorCe = function (editor, node) {\r\n      return Optional.from(getContentEditableRoot$1(editor.getBody(), node));\r\n    };\r\n    var backspaceDeleteCaret = function (editor, forward) {\r\n      var selectedNode = editor.selection.getNode();\r\n      return getAncestorCe(editor, selectedNode).filter(isContentEditableFalse$b).fold(function () {\r\n        return read(editor.getBody(), forward, editor.selection.getRng()).exists(function (deleteAction) {\r\n          return deleteAction.fold(deleteElement$1(editor, forward), moveToElement(editor, forward), moveToPosition(editor));\r\n        });\r\n      }, always);\r\n    };\r\n    var deleteOffscreenSelection = function (rootElement) {\r\n      each$k(descendants(rootElement, '.mce-offscreen-selection'), remove$7);\r\n    };\r\n    var backspaceDeleteRange = function (editor, forward) {\r\n      var selectedNode = editor.selection.getNode();\r\n      if (isContentEditableFalse$b(selectedNode) && !isTableCell$5(selectedNode)) {\r\n        var hasCefAncestor = getAncestorCe(editor, selectedNode.parentNode).filter(isContentEditableFalse$b);\r\n        return hasCefAncestor.fold(function () {\r\n          deleteOffscreenSelection(SugarElement.fromDom(editor.getBody()));\r\n          deleteElement$2(editor, forward, SugarElement.fromDom(editor.selection.getNode()));\r\n          paddEmptyBody(editor);\r\n          return true;\r\n        }, always);\r\n      }\r\n      return false;\r\n    };\r\n    var paddEmptyElement = function (editor) {\r\n      var dom = editor.dom, selection = editor.selection;\r\n      var ceRoot = getContentEditableRoot$1(editor.getBody(), selection.getNode());\r\n      if (isContentEditableTrue$4(ceRoot) && dom.isBlock(ceRoot) && dom.isEmpty(ceRoot)) {\r\n        var br = dom.create('br', { 'data-mce-bogus': '1' });\r\n        dom.setHTML(ceRoot, '');\r\n        ceRoot.appendChild(br);\r\n        selection.setRng(CaretPosition.before(br).toRange());\r\n      }\r\n      return true;\r\n    };\r\n    var backspaceDelete$5 = function (editor, forward) {\r\n      if (editor.selection.isCollapsed()) {\r\n        return backspaceDeleteCaret(editor, forward);\r\n      } else {\r\n        return backspaceDeleteRange(editor, forward);\r\n      }\r\n    };\r\n\r\n    var deleteCaret$2 = function (editor, forward) {\r\n      var fromPos = CaretPosition.fromRangeStart(editor.selection.getRng());\r\n      return fromPosition(forward, editor.getBody(), fromPos).filter(function (pos) {\r\n        return forward ? isBeforeImageBlock(pos) : isAfterImageBlock(pos);\r\n      }).bind(function (pos) {\r\n        return Optional.from(getChildNodeAtRelativeOffset(forward ? 0 : -1, pos));\r\n      }).exists(function (elm) {\r\n        editor.selection.select(elm);\r\n        return true;\r\n      });\r\n    };\r\n    var backspaceDelete$4 = function (editor, forward) {\r\n      return editor.selection.isCollapsed() ? deleteCaret$2(editor, forward) : false;\r\n    };\r\n\r\n    var isText = isText$7;\r\n    var startsWithCaretContainer = function (node) {\r\n      return isText(node) && node.data[0] === ZWSP$1;\r\n    };\r\n    var endsWithCaretContainer = function (node) {\r\n      return isText(node) && node.data[node.data.length - 1] === ZWSP$1;\r\n    };\r\n    var createZwsp = function (node) {\r\n      return node.ownerDocument.createTextNode(ZWSP$1);\r\n    };\r\n    var insertBefore = function (node) {\r\n      if (isText(node.previousSibling)) {\r\n        if (endsWithCaretContainer(node.previousSibling)) {\r\n          return node.previousSibling;\r\n        } else {\r\n          node.previousSibling.appendData(ZWSP$1);\r\n          return node.previousSibling;\r\n        }\r\n      } else if (isText(node)) {\r\n        if (startsWithCaretContainer(node)) {\r\n          return node;\r\n        } else {\r\n          node.insertData(0, ZWSP$1);\r\n          return node;\r\n        }\r\n      } else {\r\n        var newNode = createZwsp(node);\r\n        node.parentNode.insertBefore(newNode, node);\r\n        return newNode;\r\n      }\r\n    };\r\n    var insertAfter = function (node) {\r\n      if (isText(node.nextSibling)) {\r\n        if (startsWithCaretContainer(node.nextSibling)) {\r\n          return node.nextSibling;\r\n        } else {\r\n          node.nextSibling.insertData(0, ZWSP$1);\r\n          return node.nextSibling;\r\n        }\r\n      } else if (isText(node)) {\r\n        if (endsWithCaretContainer(node)) {\r\n          return node;\r\n        } else {\r\n          node.appendData(ZWSP$1);\r\n          return node;\r\n        }\r\n      } else {\r\n        var newNode = createZwsp(node);\r\n        if (node.nextSibling) {\r\n          node.parentNode.insertBefore(newNode, node.nextSibling);\r\n        } else {\r\n          node.parentNode.appendChild(newNode);\r\n        }\r\n        return newNode;\r\n      }\r\n    };\r\n    var insertInline = function (before, node) {\r\n      return before ? insertBefore(node) : insertAfter(node);\r\n    };\r\n    var insertInlineBefore = curry(insertInline, true);\r\n    var insertInlineAfter = curry(insertInline, false);\r\n\r\n    var insertInlinePos = function (pos, before) {\r\n      if (isText$7(pos.container())) {\r\n        return insertInline(before, pos.container());\r\n      } else {\r\n        return insertInline(before, pos.getNode());\r\n      }\r\n    };\r\n    var isPosCaretContainer = function (pos, caret) {\r\n      var caretNode = caret.get();\r\n      return caretNode && pos.container() === caretNode && isCaretContainerInline(caretNode);\r\n    };\r\n    var renderCaret = function (caret, location) {\r\n      return location.fold(function (element) {\r\n        remove$2(caret.get());\r\n        var text = insertInlineBefore(element);\r\n        caret.set(text);\r\n        return Optional.some(CaretPosition(text, text.length - 1));\r\n      }, function (element) {\r\n        return firstPositionIn(element).map(function (pos) {\r\n          if (!isPosCaretContainer(pos, caret)) {\r\n            remove$2(caret.get());\r\n            var text = insertInlinePos(pos, true);\r\n            caret.set(text);\r\n            return CaretPosition(text, 1);\r\n          } else {\r\n            return CaretPosition(caret.get(), 1);\r\n          }\r\n        });\r\n      }, function (element) {\r\n        return lastPositionIn(element).map(function (pos) {\r\n          if (!isPosCaretContainer(pos, caret)) {\r\n            remove$2(caret.get());\r\n            var text = insertInlinePos(pos, false);\r\n            caret.set(text);\r\n            return CaretPosition(text, text.length - 1);\r\n          } else {\r\n            return CaretPosition(caret.get(), caret.get().length - 1);\r\n          }\r\n        });\r\n      }, function (element) {\r\n        remove$2(caret.get());\r\n        var text = insertInlineAfter(element);\r\n        caret.set(text);\r\n        return Optional.some(CaretPosition(text, 1));\r\n      });\r\n    };\r\n\r\n    var evaluateUntil = function (fns, args) {\r\n      for (var i = 0; i < fns.length; i++) {\r\n        var result = fns[i].apply(null, args);\r\n        if (result.isSome()) {\r\n          return result;\r\n        }\r\n      }\r\n      return Optional.none();\r\n    };\r\n\r\n    var Location = Adt.generate([\r\n      { before: ['element'] },\r\n      { start: ['element'] },\r\n      { end: ['element'] },\r\n      { after: ['element'] }\r\n    ]);\r\n    var rescope$1 = function (rootNode, node) {\r\n      var parentBlock = getParentBlock$2(node, rootNode);\r\n      return parentBlock ? parentBlock : rootNode;\r\n    };\r\n    var before = function (isInlineTarget, rootNode, pos) {\r\n      var nPos = normalizeForwards(pos);\r\n      var scope = rescope$1(rootNode, nPos.container());\r\n      return findRootInline(isInlineTarget, scope, nPos).fold(function () {\r\n        return nextPosition(scope, nPos).bind(curry(findRootInline, isInlineTarget, scope)).map(function (inline) {\r\n          return Location.before(inline);\r\n        });\r\n      }, Optional.none);\r\n    };\r\n    var isNotInsideFormatCaretContainer = function (rootNode, elm) {\r\n      return getParentCaretContainer(rootNode, elm) === null;\r\n    };\r\n    var findInsideRootInline = function (isInlineTarget, rootNode, pos) {\r\n      return findRootInline(isInlineTarget, rootNode, pos).filter(curry(isNotInsideFormatCaretContainer, rootNode));\r\n    };\r\n    var start$1 = function (isInlineTarget, rootNode, pos) {\r\n      var nPos = normalizeBackwards(pos);\r\n      return findInsideRootInline(isInlineTarget, rootNode, nPos).bind(function (inline) {\r\n        var prevPos = prevPosition(inline, nPos);\r\n        return prevPos.isNone() ? Optional.some(Location.start(inline)) : Optional.none();\r\n      });\r\n    };\r\n    var end = function (isInlineTarget, rootNode, pos) {\r\n      var nPos = normalizeForwards(pos);\r\n      return findInsideRootInline(isInlineTarget, rootNode, nPos).bind(function (inline) {\r\n        var nextPos = nextPosition(inline, nPos);\r\n        return nextPos.isNone() ? Optional.some(Location.end(inline)) : Optional.none();\r\n      });\r\n    };\r\n    var after = function (isInlineTarget, rootNode, pos) {\r\n      var nPos = normalizeBackwards(pos);\r\n      var scope = rescope$1(rootNode, nPos.container());\r\n      return findRootInline(isInlineTarget, scope, nPos).fold(function () {\r\n        return prevPosition(scope, nPos).bind(curry(findRootInline, isInlineTarget, scope)).map(function (inline) {\r\n          return Location.after(inline);\r\n        });\r\n      }, Optional.none);\r\n    };\r\n    var isValidLocation = function (location) {\r\n      return isRtl(getElement(location)) === false;\r\n    };\r\n    var readLocation = function (isInlineTarget, rootNode, pos) {\r\n      var location = evaluateUntil([\r\n        before,\r\n        start$1,\r\n        end,\r\n        after\r\n      ], [\r\n        isInlineTarget,\r\n        rootNode,\r\n        pos\r\n      ]);\r\n      return location.filter(isValidLocation);\r\n    };\r\n    var getElement = function (location) {\r\n      return location.fold(identity, identity, identity, identity);\r\n    };\r\n    var getName = function (location) {\r\n      return location.fold(constant('before'), constant('start'), constant('end'), constant('after'));\r\n    };\r\n    var outside = function (location) {\r\n      return location.fold(Location.before, Location.before, Location.after, Location.after);\r\n    };\r\n    var inside = function (location) {\r\n      return location.fold(Location.start, Location.start, Location.end, Location.end);\r\n    };\r\n    var isEq = function (location1, location2) {\r\n      return getName(location1) === getName(location2) && getElement(location1) === getElement(location2);\r\n    };\r\n    var betweenInlines = function (forward, isInlineTarget, rootNode, from, to, location) {\r\n      return lift2(findRootInline(isInlineTarget, rootNode, from), findRootInline(isInlineTarget, rootNode, to), function (fromInline, toInline) {\r\n        if (fromInline !== toInline && hasSameParentBlock(rootNode, fromInline, toInline)) {\r\n          return Location.after(forward ? fromInline : toInline);\r\n        } else {\r\n          return location;\r\n        }\r\n      }).getOr(location);\r\n    };\r\n    var skipNoMovement = function (fromLocation, toLocation) {\r\n      return fromLocation.fold(always, function (fromLocation) {\r\n        return !isEq(fromLocation, toLocation);\r\n      });\r\n    };\r\n    var findLocationTraverse = function (forward, isInlineTarget, rootNode, fromLocation, pos) {\r\n      var from = normalizePosition(forward, pos);\r\n      var to = fromPosition(forward, rootNode, from).map(curry(normalizePosition, forward));\r\n      var location = to.fold(function () {\r\n        return fromLocation.map(outside);\r\n      }, function (to) {\r\n        return readLocation(isInlineTarget, rootNode, to).map(curry(betweenInlines, forward, isInlineTarget, rootNode, from, to)).filter(curry(skipNoMovement, fromLocation));\r\n      });\r\n      return location.filter(isValidLocation);\r\n    };\r\n    var findLocationSimple = function (forward, location) {\r\n      if (forward) {\r\n        return location.fold(compose(Optional.some, Location.start), Optional.none, compose(Optional.some, Location.after), Optional.none);\r\n      } else {\r\n        return location.fold(Optional.none, compose(Optional.some, Location.before), Optional.none, compose(Optional.some, Location.end));\r\n      }\r\n    };\r\n    var findLocation$1 = function (forward, isInlineTarget, rootNode, pos) {\r\n      var from = normalizePosition(forward, pos);\r\n      var fromLocation = readLocation(isInlineTarget, rootNode, from);\r\n      return readLocation(isInlineTarget, rootNode, from).bind(curry(findLocationSimple, forward)).orThunk(function () {\r\n        return findLocationTraverse(forward, isInlineTarget, rootNode, fromLocation, pos);\r\n      });\r\n    };\r\n    curry(findLocation$1, false);\r\n    curry(findLocation$1, true);\r\n\r\n    var hasSelectionModifyApi = function (editor) {\r\n      return isFunction(editor.selection.getSel().modify);\r\n    };\r\n    var moveRel = function (forward, selection, pos) {\r\n      var delta = forward ? 1 : -1;\r\n      selection.setRng(CaretPosition(pos.container(), pos.offset() + delta).toRange());\r\n      selection.getSel().modify('move', forward ? 'forward' : 'backward', 'word');\r\n      return true;\r\n    };\r\n    var moveByWord = function (forward, editor) {\r\n      var rng = editor.selection.getRng();\r\n      var pos = forward ? CaretPosition.fromRangeEnd(rng) : CaretPosition.fromRangeStart(rng);\r\n      if (!hasSelectionModifyApi(editor)) {\r\n        return false;\r\n      } else if (forward && isBeforeInline(pos)) {\r\n        return moveRel(true, editor.selection, pos);\r\n      } else if (!forward && isAfterInline(pos)) {\r\n        return moveRel(false, editor.selection, pos);\r\n      } else {\r\n        return false;\r\n      }\r\n    };\r\n\r\n    var BreakType;\r\n    (function (BreakType) {\r\n      BreakType[BreakType['Br'] = 0] = 'Br';\r\n      BreakType[BreakType['Block'] = 1] = 'Block';\r\n      BreakType[BreakType['Wrap'] = 2] = 'Wrap';\r\n      BreakType[BreakType['Eol'] = 3] = 'Eol';\r\n    }(BreakType || (BreakType = {})));\r\n    var flip = function (direction, positions) {\r\n      return direction === HDirection.Backwards ? reverse(positions) : positions;\r\n    };\r\n    var walk = function (direction, caretWalker, pos) {\r\n      return direction === HDirection.Forwards ? caretWalker.next(pos) : caretWalker.prev(pos);\r\n    };\r\n    var getBreakType = function (scope, direction, currentPos, nextPos) {\r\n      if (isBr$5(nextPos.getNode(direction === HDirection.Forwards))) {\r\n        return BreakType.Br;\r\n      } else if (isInSameBlock(currentPos, nextPos) === false) {\r\n        return BreakType.Block;\r\n      } else {\r\n        return BreakType.Wrap;\r\n      }\r\n    };\r\n    var getPositionsUntil = function (predicate, direction, scope, start) {\r\n      var caretWalker = CaretWalker(scope);\r\n      var currentPos = start;\r\n      var positions = [];\r\n      while (currentPos) {\r\n        var nextPos = walk(direction, caretWalker, currentPos);\r\n        if (!nextPos) {\r\n          break;\r\n        }\r\n        if (isBr$5(nextPos.getNode(false))) {\r\n          if (direction === HDirection.Forwards) {\r\n            return {\r\n              positions: flip(direction, positions).concat([nextPos]),\r\n              breakType: BreakType.Br,\r\n              breakAt: Optional.some(nextPos)\r\n            };\r\n          } else {\r\n            return {\r\n              positions: flip(direction, positions),\r\n              breakType: BreakType.Br,\r\n              breakAt: Optional.some(nextPos)\r\n            };\r\n          }\r\n        }\r\n        if (!nextPos.isVisible()) {\r\n          currentPos = nextPos;\r\n          continue;\r\n        }\r\n        if (predicate(currentPos, nextPos)) {\r\n          var breakType = getBreakType(scope, direction, currentPos, nextPos);\r\n          return {\r\n            positions: flip(direction, positions),\r\n            breakType: breakType,\r\n            breakAt: Optional.some(nextPos)\r\n          };\r\n        }\r\n        positions.push(nextPos);\r\n        currentPos = nextPos;\r\n      }\r\n      return {\r\n        positions: flip(direction, positions),\r\n        breakType: BreakType.Eol,\r\n        breakAt: Optional.none()\r\n      };\r\n    };\r\n    var getAdjacentLinePositions = function (direction, getPositionsUntilBreak, scope, start) {\r\n      return getPositionsUntilBreak(scope, start).breakAt.map(function (pos) {\r\n        var positions = getPositionsUntilBreak(scope, pos).positions;\r\n        return direction === HDirection.Backwards ? positions.concat(pos) : [pos].concat(positions);\r\n      }).getOr([]);\r\n    };\r\n    var findClosestHorizontalPositionFromPoint = function (positions, x) {\r\n      return foldl(positions, function (acc, newPos) {\r\n        return acc.fold(function () {\r\n          return Optional.some(newPos);\r\n        }, function (lastPos) {\r\n          return lift2(head(lastPos.getClientRects()), head(newPos.getClientRects()), function (lastRect, newRect) {\r\n            var lastDist = Math.abs(x - lastRect.left);\r\n            var newDist = Math.abs(x - newRect.left);\r\n            return newDist <= lastDist ? newPos : lastPos;\r\n          }).or(acc);\r\n        });\r\n      }, Optional.none());\r\n    };\r\n    var findClosestHorizontalPosition = function (positions, pos) {\r\n      return head(pos.getClientRects()).bind(function (targetRect) {\r\n        return findClosestHorizontalPositionFromPoint(positions, targetRect.left);\r\n      });\r\n    };\r\n    var getPositionsUntilPreviousLine = curry(getPositionsUntil, CaretPosition.isAbove, -1);\r\n    var getPositionsUntilNextLine = curry(getPositionsUntil, CaretPosition.isBelow, 1);\r\n    var getPositionsAbove = curry(getAdjacentLinePositions, -1, getPositionsUntilPreviousLine);\r\n    var getPositionsBelow = curry(getAdjacentLinePositions, 1, getPositionsUntilNextLine);\r\n    var isAtFirstLine = function (scope, pos) {\r\n      return getPositionsUntilPreviousLine(scope, pos).breakAt.isNone();\r\n    };\r\n    var isAtLastLine = function (scope, pos) {\r\n      return getPositionsUntilNextLine(scope, pos).breakAt.isNone();\r\n    };\r\n    var getFirstLinePositions = function (scope) {\r\n      return firstPositionIn(scope).map(function (pos) {\r\n        return [pos].concat(getPositionsUntilNextLine(scope, pos).positions);\r\n      }).getOr([]);\r\n    };\r\n    var getLastLinePositions = function (scope) {\r\n      return lastPositionIn(scope).map(function (pos) {\r\n        return getPositionsUntilPreviousLine(scope, pos).positions.concat(pos);\r\n      }).getOr([]);\r\n    };\r\n\r\n    var getNodeClientRects = function (node) {\r\n      var toArrayWithNode = function (clientRects) {\r\n        return map$3(clientRects, function (rect) {\r\n          var clientRect = clone(rect);\r\n          clientRect.node = node;\r\n          return clientRect;\r\n        });\r\n      };\r\n      if (isElement$5(node)) {\r\n        return toArrayWithNode(node.getClientRects());\r\n      }\r\n      if (isText$7(node)) {\r\n        var rng = node.ownerDocument.createRange();\r\n        rng.setStart(node, 0);\r\n        rng.setEnd(node, node.data.length);\r\n        return toArrayWithNode(rng.getClientRects());\r\n      }\r\n    };\r\n    var getClientRects = function (nodes) {\r\n      return bind(nodes, getNodeClientRects);\r\n    };\r\n\r\n    var VDirection;\r\n    (function (VDirection) {\r\n      VDirection[VDirection['Up'] = -1] = 'Up';\r\n      VDirection[VDirection['Down'] = 1] = 'Down';\r\n    }(VDirection || (VDirection = {})));\r\n    var findUntil = function (direction, root, predicateFn, node) {\r\n      while (node = findNode$1(node, direction, isEditableCaretCandidate$1, root)) {\r\n        if (predicateFn(node)) {\r\n          return;\r\n        }\r\n      }\r\n    };\r\n    var walkUntil$1 = function (direction, isAboveFn, isBeflowFn, root, predicateFn, caretPosition) {\r\n      var line = 0;\r\n      var result = [];\r\n      var add = function (node) {\r\n        var clientRects = getClientRects([node]);\r\n        if (direction === -1) {\r\n          clientRects = clientRects.reverse();\r\n        }\r\n        for (var i = 0; i < clientRects.length; i++) {\r\n          var clientRect = clientRects[i];\r\n          if (isBeflowFn(clientRect, targetClientRect)) {\r\n            continue;\r\n          }\r\n          if (result.length > 0 && isAboveFn(clientRect, last$1(result))) {\r\n            line++;\r\n          }\r\n          clientRect.line = line;\r\n          if (predicateFn(clientRect)) {\r\n            return true;\r\n          }\r\n          result.push(clientRect);\r\n        }\r\n      };\r\n      var targetClientRect = last$1(caretPosition.getClientRects());\r\n      if (!targetClientRect) {\r\n        return result;\r\n      }\r\n      var node = caretPosition.getNode();\r\n      add(node);\r\n      findUntil(direction, root, add, node);\r\n      return result;\r\n    };\r\n    var aboveLineNumber = function (lineNumber, clientRect) {\r\n      return clientRect.line > lineNumber;\r\n    };\r\n    var isLineNumber = function (lineNumber, clientRect) {\r\n      return clientRect.line === lineNumber;\r\n    };\r\n    var upUntil = curry(walkUntil$1, VDirection.Up, isAbove$1, isBelow$1);\r\n    var downUntil = curry(walkUntil$1, VDirection.Down, isBelow$1, isAbove$1);\r\n    var positionsUntil = function (direction, root, predicateFn, node) {\r\n      var caretWalker = CaretWalker(root);\r\n      var walkFn;\r\n      var isBelowFn;\r\n      var isAboveFn;\r\n      var caretPosition;\r\n      var result = [];\r\n      var line = 0;\r\n      var getClientRect = function (caretPosition) {\r\n        if (direction === 1) {\r\n          return last$1(caretPosition.getClientRects());\r\n        }\r\n        return last$1(caretPosition.getClientRects());\r\n      };\r\n      if (direction === 1) {\r\n        walkFn = caretWalker.next;\r\n        isBelowFn = isBelow$1;\r\n        isAboveFn = isAbove$1;\r\n        caretPosition = CaretPosition.after(node);\r\n      } else {\r\n        walkFn = caretWalker.prev;\r\n        isBelowFn = isAbove$1;\r\n        isAboveFn = isBelow$1;\r\n        caretPosition = CaretPosition.before(node);\r\n      }\r\n      var targetClientRect = getClientRect(caretPosition);\r\n      do {\r\n        if (!caretPosition.isVisible()) {\r\n          continue;\r\n        }\r\n        var rect = getClientRect(caretPosition);\r\n        if (isAboveFn(rect, targetClientRect)) {\r\n          continue;\r\n        }\r\n        if (result.length > 0 && isBelowFn(rect, last$1(result))) {\r\n          line++;\r\n        }\r\n        var clientRect = clone(rect);\r\n        clientRect.position = caretPosition;\r\n        clientRect.line = line;\r\n        if (predicateFn(clientRect)) {\r\n          return result;\r\n        }\r\n        result.push(clientRect);\r\n      } while (caretPosition = walkFn(caretPosition));\r\n      return result;\r\n    };\r\n    var isAboveLine = function (lineNumber) {\r\n      return function (clientRect) {\r\n        return aboveLineNumber(lineNumber, clientRect);\r\n      };\r\n    };\r\n    var isLine = function (lineNumber) {\r\n      return function (clientRect) {\r\n        return isLineNumber(lineNumber, clientRect);\r\n      };\r\n    };\r\n\r\n    var isContentEditableFalse$3 = isContentEditableFalse$b;\r\n    var findNode = findNode$1;\r\n    var distanceToRectLeft = function (clientRect, clientX) {\r\n      return Math.abs(clientRect.left - clientX);\r\n    };\r\n    var distanceToRectRight = function (clientRect, clientX) {\r\n      return Math.abs(clientRect.right - clientX);\r\n    };\r\n    var isInsideX = function (clientX, clientRect) {\r\n      return clientX >= clientRect.left && clientX <= clientRect.right;\r\n    };\r\n    var isInsideY = function (clientY, clientRect) {\r\n      return clientY >= clientRect.top && clientY <= clientRect.bottom;\r\n    };\r\n    var isNodeClientRect = function (rect) {\r\n      return hasNonNullableKey(rect, 'node');\r\n    };\r\n    var findClosestClientRect = function (clientRects, clientX, allowInside) {\r\n      if (allowInside === void 0) {\r\n        allowInside = always;\r\n      }\r\n      return reduce(clientRects, function (oldClientRect, clientRect) {\r\n        if (isInsideX(clientX, clientRect)) {\r\n          return allowInside(clientRect) ? clientRect : oldClientRect;\r\n        }\r\n        if (isInsideX(clientX, oldClientRect)) {\r\n          return allowInside(oldClientRect) ? oldClientRect : clientRect;\r\n        }\r\n        var oldDistance = Math.min(distanceToRectLeft(oldClientRect, clientX), distanceToRectRight(oldClientRect, clientX));\r\n        var newDistance = Math.min(distanceToRectLeft(clientRect, clientX), distanceToRectRight(clientRect, clientX));\r\n        if (newDistance === oldDistance && isNodeClientRect(clientRect) && isContentEditableFalse$3(clientRect.node)) {\r\n          return clientRect;\r\n        }\r\n        if (newDistance < oldDistance) {\r\n          return clientRect;\r\n        }\r\n        return oldClientRect;\r\n      });\r\n    };\r\n    var walkUntil = function (direction, root, predicateFn, startNode, includeChildren) {\r\n      var node = findNode(startNode, direction, isEditableCaretCandidate$1, root, !includeChildren);\r\n      do {\r\n        if (!node || predicateFn(node)) {\r\n          return;\r\n        }\r\n      } while (node = findNode(node, direction, isEditableCaretCandidate$1, root));\r\n    };\r\n    var findLineNodeRects = function (root, targetNodeRect, includeChildren) {\r\n      if (includeChildren === void 0) {\r\n        includeChildren = true;\r\n      }\r\n      var clientRects = [];\r\n      var collect = function (checkPosFn, node) {\r\n        var lineRects = filter$4(getClientRects([node]), function (clientRect) {\r\n          return !checkPosFn(clientRect, targetNodeRect);\r\n        });\r\n        clientRects = clientRects.concat(lineRects);\r\n        return lineRects.length === 0;\r\n      };\r\n      clientRects.push(targetNodeRect);\r\n      walkUntil(VDirection.Up, root, curry(collect, isAbove$1), targetNodeRect.node, includeChildren);\r\n      walkUntil(VDirection.Down, root, curry(collect, isBelow$1), targetNodeRect.node, includeChildren);\r\n      return clientRects;\r\n    };\r\n    var getFakeCaretTargets = function (root) {\r\n      return filter$4(from(root.getElementsByTagName('*')), isFakeCaretTarget);\r\n    };\r\n    var caretInfo = function (clientRect, clientX) {\r\n      return {\r\n        node: clientRect.node,\r\n        before: distanceToRectLeft(clientRect, clientX) < distanceToRectRight(clientRect, clientX)\r\n      };\r\n    };\r\n    var closestFakeCaret = function (root, clientX, clientY) {\r\n      var fakeTargetNodeRects = getClientRects(getFakeCaretTargets(root));\r\n      var targetNodeRects = filter$4(fakeTargetNodeRects, curry(isInsideY, clientY));\r\n      var checkInside = function (clientRect) {\r\n        return !isTable$3(clientRect.node) && !isMedia$2(clientRect.node);\r\n      };\r\n      var closestNodeRect = findClosestClientRect(targetNodeRects, clientX, checkInside);\r\n      if (closestNodeRect) {\r\n        var includeChildren = checkInside(closestNodeRect);\r\n        closestNodeRect = findClosestClientRect(findLineNodeRects(root, closestNodeRect, includeChildren), clientX, checkInside);\r\n        if (closestNodeRect && isFakeCaretTarget(closestNodeRect.node)) {\r\n          return caretInfo(closestNodeRect, clientX);\r\n        }\r\n      }\r\n      return null;\r\n    };\r\n\r\n    var moveToRange = function (editor, rng) {\r\n      editor.selection.setRng(rng);\r\n      scrollRangeIntoView(editor, editor.selection.getRng());\r\n    };\r\n    var renderRangeCaretOpt = function (editor, range, scrollIntoView) {\r\n      return Optional.some(renderRangeCaret(editor, range, scrollIntoView));\r\n    };\r\n    var moveHorizontally = function (editor, direction, range, isBefore, isAfter, isElement) {\r\n      var forwards = direction === HDirection.Forwards;\r\n      var caretWalker = CaretWalker(editor.getBody());\r\n      var getNextPosFn = curry(getVisualCaretPosition, forwards ? caretWalker.next : caretWalker.prev);\r\n      var isBeforeFn = forwards ? isBefore : isAfter;\r\n      if (!range.collapsed) {\r\n        var node = getSelectedNode(range);\r\n        if (isElement(node)) {\r\n          return showCaret(direction, editor, node, direction === HDirection.Backwards, false);\r\n        }\r\n      }\r\n      var caretPosition = getNormalizedRangeEndPoint(direction, editor.getBody(), range);\r\n      if (isBeforeFn(caretPosition)) {\r\n        return selectNode(editor, caretPosition.getNode(!forwards));\r\n      }\r\n      var nextCaretPosition = normalizePosition(forwards, getNextPosFn(caretPosition));\r\n      var rangeIsInContainerBlock = isRangeInCaretContainerBlock(range);\r\n      if (!nextCaretPosition) {\r\n        return rangeIsInContainerBlock ? Optional.some(range) : Optional.none();\r\n      }\r\n      if (isBeforeFn(nextCaretPosition)) {\r\n        return showCaret(direction, editor, nextCaretPosition.getNode(!forwards), forwards, false);\r\n      }\r\n      var peekCaretPosition = getNextPosFn(nextCaretPosition);\r\n      if (peekCaretPosition && isBeforeFn(peekCaretPosition)) {\r\n        if (isMoveInsideSameBlock(nextCaretPosition, peekCaretPosition)) {\r\n          return showCaret(direction, editor, peekCaretPosition.getNode(!forwards), forwards, false);\r\n        }\r\n      }\r\n      if (rangeIsInContainerBlock) {\r\n        return renderRangeCaretOpt(editor, nextCaretPosition.toRange(), false);\r\n      }\r\n      return Optional.none();\r\n    };\r\n    var moveVertically = function (editor, direction, range, isBefore, isAfter, isElement) {\r\n      var caretPosition = getNormalizedRangeEndPoint(direction, editor.getBody(), range);\r\n      var caretClientRect = last$1(caretPosition.getClientRects());\r\n      var forwards = direction === VDirection.Down;\r\n      if (!caretClientRect) {\r\n        return Optional.none();\r\n      }\r\n      var walkerFn = forwards ? downUntil : upUntil;\r\n      var linePositions = walkerFn(editor.getBody(), isAboveLine(1), caretPosition);\r\n      var nextLinePositions = filter$4(linePositions, isLine(1));\r\n      var clientX = caretClientRect.left;\r\n      var nextLineRect = findClosestClientRect(nextLinePositions, clientX);\r\n      if (nextLineRect && isElement(nextLineRect.node)) {\r\n        var dist1 = Math.abs(clientX - nextLineRect.left);\r\n        var dist2 = Math.abs(clientX - nextLineRect.right);\r\n        return showCaret(direction, editor, nextLineRect.node, dist1 < dist2, false);\r\n      }\r\n      var currentNode;\r\n      if (isBefore(caretPosition)) {\r\n        currentNode = caretPosition.getNode();\r\n      } else if (isAfter(caretPosition)) {\r\n        currentNode = caretPosition.getNode(true);\r\n      } else {\r\n        currentNode = getSelectedNode(range);\r\n      }\r\n      if (currentNode) {\r\n        var caretPositions = positionsUntil(direction, editor.getBody(), isAboveLine(1), currentNode);\r\n        var closestNextLineRect = findClosestClientRect(filter$4(caretPositions, isLine(1)), clientX);\r\n        if (closestNextLineRect) {\r\n          return renderRangeCaretOpt(editor, closestNextLineRect.position.toRange(), false);\r\n        }\r\n        closestNextLineRect = last$1(filter$4(caretPositions, isLine(0)));\r\n        if (closestNextLineRect) {\r\n          return renderRangeCaretOpt(editor, closestNextLineRect.position.toRange(), false);\r\n        }\r\n      }\r\n      if (nextLinePositions.length === 0) {\r\n        return getLineEndPoint(editor, forwards).filter(forwards ? isAfter : isBefore).map(function (pos) {\r\n          return renderRangeCaret(editor, pos.toRange(), false);\r\n        });\r\n      }\r\n      return Optional.none();\r\n    };\r\n    var getLineEndPoint = function (editor, forward) {\r\n      var rng = editor.selection.getRng();\r\n      var body = editor.getBody();\r\n      if (forward) {\r\n        var from = CaretPosition.fromRangeEnd(rng);\r\n        var result = getPositionsUntilNextLine(body, from);\r\n        return last$2(result.positions);\r\n      } else {\r\n        var from = CaretPosition.fromRangeStart(rng);\r\n        var result = getPositionsUntilPreviousLine(body, from);\r\n        return head(result.positions);\r\n      }\r\n    };\r\n    var moveToLineEndPoint$3 = function (editor, forward, isElementPosition) {\r\n      return getLineEndPoint(editor, forward).filter(isElementPosition).exists(function (pos) {\r\n        editor.selection.setRng(pos.toRange());\r\n        return true;\r\n      });\r\n    };\r\n\r\n    var setCaretPosition = function (editor, pos) {\r\n      var rng = editor.dom.createRng();\r\n      rng.setStart(pos.container(), pos.offset());\r\n      rng.setEnd(pos.container(), pos.offset());\r\n      editor.selection.setRng(rng);\r\n    };\r\n    var setSelected = function (state, elm) {\r\n      if (state) {\r\n        elm.setAttribute('data-mce-selected', 'inline-boundary');\r\n      } else {\r\n        elm.removeAttribute('data-mce-selected');\r\n      }\r\n    };\r\n    var renderCaretLocation = function (editor, caret, location) {\r\n      return renderCaret(caret, location).map(function (pos) {\r\n        setCaretPosition(editor, pos);\r\n        return location;\r\n      });\r\n    };\r\n    var findLocation = function (editor, caret, forward) {\r\n      var rootNode = editor.getBody();\r\n      var from = CaretPosition.fromRangeStart(editor.selection.getRng());\r\n      var isInlineTarget$1 = curry(isInlineTarget, editor);\r\n      var location = findLocation$1(forward, isInlineTarget$1, rootNode, from);\r\n      return location.bind(function (location) {\r\n        return renderCaretLocation(editor, caret, location);\r\n      });\r\n    };\r\n    var toggleInlines = function (isInlineTarget, dom, elms) {\r\n      var inlineBoundaries = map$3(descendants(SugarElement.fromDom(dom.getRoot()), '*[data-mce-selected=\"inline-boundary\"]'), function (e) {\r\n        return e.dom;\r\n      });\r\n      var selectedInlines = filter$4(inlineBoundaries, isInlineTarget);\r\n      var targetInlines = filter$4(elms, isInlineTarget);\r\n      each$k(difference(selectedInlines, targetInlines), curry(setSelected, false));\r\n      each$k(difference(targetInlines, selectedInlines), curry(setSelected, true));\r\n    };\r\n    var safeRemoveCaretContainer = function (editor, caret) {\r\n      if (editor.selection.isCollapsed() && editor.composing !== true && caret.get()) {\r\n        var pos = CaretPosition.fromRangeStart(editor.selection.getRng());\r\n        if (CaretPosition.isTextPosition(pos) && isAtZwsp(pos) === false) {\r\n          setCaretPosition(editor, removeAndReposition(caret.get(), pos));\r\n          caret.set(null);\r\n        }\r\n      }\r\n    };\r\n    var renderInsideInlineCaret = function (isInlineTarget, editor, caret, elms) {\r\n      if (editor.selection.isCollapsed()) {\r\n        var inlines = filter$4(elms, isInlineTarget);\r\n        each$k(inlines, function (_inline) {\r\n          var pos = CaretPosition.fromRangeStart(editor.selection.getRng());\r\n          readLocation(isInlineTarget, editor.getBody(), pos).bind(function (location) {\r\n            return renderCaretLocation(editor, caret, location);\r\n          });\r\n        });\r\n      }\r\n    };\r\n    var move$2 = function (editor, caret, forward) {\r\n      return isInlineBoundariesEnabled(editor) ? findLocation(editor, caret, forward).isSome() : false;\r\n    };\r\n    var moveWord = function (forward, editor, _caret) {\r\n      return isInlineBoundariesEnabled(editor) ? moveByWord(forward, editor) : false;\r\n    };\r\n    var setupSelectedState = function (editor) {\r\n      var caret = Cell(null);\r\n      var isInlineTarget$1 = curry(isInlineTarget, editor);\r\n      editor.on('NodeChange', function (e) {\r\n        if (isInlineBoundariesEnabled(editor) && !(Env.browser.isIE() && e.initial)) {\r\n          toggleInlines(isInlineTarget$1, editor.dom, e.parents);\r\n          safeRemoveCaretContainer(editor, caret);\r\n          renderInsideInlineCaret(isInlineTarget$1, editor, caret, e.parents);\r\n        }\r\n      });\r\n      return caret;\r\n    };\r\n    var moveNextWord = curry(moveWord, true);\r\n    var movePrevWord = curry(moveWord, false);\r\n    var moveToLineEndPoint$2 = function (editor, forward, caret) {\r\n      if (isInlineBoundariesEnabled(editor)) {\r\n        var linePoint = getLineEndPoint(editor, forward).getOrThunk(function () {\r\n          var rng = editor.selection.getRng();\r\n          return forward ? CaretPosition.fromRangeEnd(rng) : CaretPosition.fromRangeStart(rng);\r\n        });\r\n        return readLocation(curry(isInlineTarget, editor), editor.getBody(), linePoint).exists(function (loc) {\r\n          var outsideLoc = outside(loc);\r\n          return renderCaret(caret, outsideLoc).exists(function (pos) {\r\n            setCaretPosition(editor, pos);\r\n            return true;\r\n          });\r\n        });\r\n      } else {\r\n        return false;\r\n      }\r\n    };\r\n\r\n    var rangeFromPositions = function (from, to) {\r\n      var range = document.createRange();\r\n      range.setStart(from.container(), from.offset());\r\n      range.setEnd(to.container(), to.offset());\r\n      return range;\r\n    };\r\n    var hasOnlyTwoOrLessPositionsLeft = function (elm) {\r\n      return lift2(firstPositionIn(elm), lastPositionIn(elm), function (firstPos, lastPos) {\r\n        var normalizedFirstPos = normalizePosition(true, firstPos);\r\n        var normalizedLastPos = normalizePosition(false, lastPos);\r\n        return nextPosition(elm, normalizedFirstPos).forall(function (pos) {\r\n          return pos.isEqual(normalizedLastPos);\r\n        });\r\n      }).getOr(true);\r\n    };\r\n    var setCaretLocation = function (editor, caret) {\r\n      return function (location) {\r\n        return renderCaret(caret, location).exists(function (pos) {\r\n          setCaretPosition(editor, pos);\r\n          return true;\r\n        });\r\n      };\r\n    };\r\n    var deleteFromTo = function (editor, caret, from, to) {\r\n      var rootNode = editor.getBody();\r\n      var isInlineTarget$1 = curry(isInlineTarget, editor);\r\n      editor.undoManager.ignore(function () {\r\n        editor.selection.setRng(rangeFromPositions(from, to));\r\n        editor.execCommand('Delete');\r\n        readLocation(isInlineTarget$1, rootNode, CaretPosition.fromRangeStart(editor.selection.getRng())).map(inside).map(setCaretLocation(editor, caret));\r\n      });\r\n      editor.nodeChanged();\r\n    };\r\n    var rescope = function (rootNode, node) {\r\n      var parentBlock = getParentBlock$2(node, rootNode);\r\n      return parentBlock ? parentBlock : rootNode;\r\n    };\r\n    var backspaceDeleteCollapsed = function (editor, caret, forward, from) {\r\n      var rootNode = rescope(editor.getBody(), from.container());\r\n      var isInlineTarget$1 = curry(isInlineTarget, editor);\r\n      var fromLocation = readLocation(isInlineTarget$1, rootNode, from);\r\n      return fromLocation.bind(function (location) {\r\n        if (forward) {\r\n          return location.fold(constant(Optional.some(inside(location))), Optional.none, constant(Optional.some(outside(location))), Optional.none);\r\n        } else {\r\n          return location.fold(Optional.none, constant(Optional.some(outside(location))), Optional.none, constant(Optional.some(inside(location))));\r\n        }\r\n      }).map(setCaretLocation(editor, caret)).getOrThunk(function () {\r\n        var toPosition = navigate(forward, rootNode, from);\r\n        var toLocation = toPosition.bind(function (pos) {\r\n          return readLocation(isInlineTarget$1, rootNode, pos);\r\n        });\r\n        return lift2(fromLocation, toLocation, function () {\r\n          return findRootInline(isInlineTarget$1, rootNode, from).exists(function (elm) {\r\n            if (hasOnlyTwoOrLessPositionsLeft(elm)) {\r\n              deleteElement$2(editor, forward, SugarElement.fromDom(elm));\r\n              return true;\r\n            } else {\r\n              return false;\r\n            }\r\n          });\r\n        }).orThunk(function () {\r\n          return toLocation.bind(function (_) {\r\n            return toPosition.map(function (to) {\r\n              if (forward) {\r\n                deleteFromTo(editor, caret, from, to);\r\n              } else {\r\n                deleteFromTo(editor, caret, to, from);\r\n              }\r\n              return true;\r\n            });\r\n          });\r\n        }).getOr(false);\r\n      });\r\n    };\r\n    var backspaceDelete$3 = function (editor, caret, forward) {\r\n      if (editor.selection.isCollapsed() && isInlineBoundariesEnabled(editor)) {\r\n        var from = CaretPosition.fromRangeStart(editor.selection.getRng());\r\n        return backspaceDeleteCollapsed(editor, caret, forward, from);\r\n      }\r\n      return false;\r\n    };\r\n\r\n    var getParentInlines = function (rootElm, startElm) {\r\n      var parents = parentsAndSelf(startElm, rootElm);\r\n      return findIndex$2(parents, isBlock$2).fold(constant(parents), function (index) {\r\n        return parents.slice(0, index);\r\n      });\r\n    };\r\n    var hasOnlyOneChild = function (elm) {\r\n      return childNodesCount(elm) === 1;\r\n    };\r\n    var deleteLastPosition = function (forward, editor, target, parentInlines) {\r\n      var isFormatElement$1 = curry(isFormatElement, editor);\r\n      var formatNodes = map$3(filter$4(parentInlines, isFormatElement$1), function (elm) {\r\n        return elm.dom;\r\n      });\r\n      if (formatNodes.length === 0) {\r\n        deleteElement$2(editor, forward, target);\r\n      } else {\r\n        var pos = replaceWithCaretFormat(target.dom, formatNodes);\r\n        editor.selection.setRng(pos.toRange());\r\n      }\r\n    };\r\n    var deleteCaret$1 = function (editor, forward) {\r\n      var rootElm = SugarElement.fromDom(editor.getBody());\r\n      var startElm = SugarElement.fromDom(editor.selection.getStart());\r\n      var parentInlines = filter$4(getParentInlines(rootElm, startElm), hasOnlyOneChild);\r\n      return last$2(parentInlines).exists(function (target) {\r\n        var fromPos = CaretPosition.fromRangeStart(editor.selection.getRng());\r\n        if (willDeleteLastPositionInElement(forward, fromPos, target.dom) && !isEmptyCaretFormatElement(target)) {\r\n          deleteLastPosition(forward, editor, target, parentInlines);\r\n          return true;\r\n        } else {\r\n          return false;\r\n        }\r\n      });\r\n    };\r\n    var backspaceDelete$2 = function (editor, forward) {\r\n      return editor.selection.isCollapsed() ? deleteCaret$1(editor, forward) : false;\r\n    };\r\n\r\n    var deleteElement = function (editor, forward, element) {\r\n      editor._selectionOverrides.hideFakeCaret();\r\n      deleteElement$2(editor, forward, SugarElement.fromDom(element));\r\n      return true;\r\n    };\r\n    var deleteCaret = function (editor, forward) {\r\n      var isNearMedia = forward ? isBeforeMedia : isAfterMedia;\r\n      var direction = forward ? HDirection.Forwards : HDirection.Backwards;\r\n      var fromPos = getNormalizedRangeEndPoint(direction, editor.getBody(), editor.selection.getRng());\r\n      if (isNearMedia(fromPos)) {\r\n        return deleteElement(editor, forward, fromPos.getNode(!forward));\r\n      } else {\r\n        return Optional.from(normalizePosition(forward, fromPos)).filter(function (pos) {\r\n          return isNearMedia(pos) && isMoveInsideSameBlock(fromPos, pos);\r\n        }).exists(function (pos) {\r\n          return deleteElement(editor, forward, pos.getNode(!forward));\r\n        });\r\n      }\r\n    };\r\n    var deleteRange = function (editor, forward) {\r\n      var selectedNode = editor.selection.getNode();\r\n      return isMedia$2(selectedNode) ? deleteElement(editor, forward, selectedNode) : false;\r\n    };\r\n    var backspaceDelete$1 = function (editor, forward) {\r\n      return editor.selection.isCollapsed() ? deleteCaret(editor, forward) : deleteRange(editor, forward);\r\n    };\r\n\r\n    var isEditable = function (target) {\r\n      return closest$3(target, function (elm) {\r\n        return isContentEditableTrue$4(elm.dom) || isContentEditableFalse$b(elm.dom);\r\n      }).exists(function (elm) {\r\n        return isContentEditableTrue$4(elm.dom);\r\n      });\r\n    };\r\n    var parseIndentValue = function (value) {\r\n      var number = parseInt(value, 10);\r\n      return isNaN(number) ? 0 : number;\r\n    };\r\n    var getIndentStyleName = function (useMargin, element) {\r\n      var indentStyleName = useMargin || isTable$2(element) ? 'margin' : 'padding';\r\n      var suffix = get$5(element, 'direction') === 'rtl' ? '-right' : '-left';\r\n      return indentStyleName + suffix;\r\n    };\r\n    var indentElement = function (dom, command, useMargin, value, unit, element) {\r\n      var indentStyleName = getIndentStyleName(useMargin, SugarElement.fromDom(element));\r\n      if (command === 'outdent') {\r\n        var styleValue = Math.max(0, parseIndentValue(element.style[indentStyleName]) - value);\r\n        dom.setStyle(element, indentStyleName, styleValue ? styleValue + unit : '');\r\n      } else {\r\n        var styleValue = parseIndentValue(element.style[indentStyleName]) + value + unit;\r\n        dom.setStyle(element, indentStyleName, styleValue);\r\n      }\r\n    };\r\n    var validateBlocks = function (editor, blocks) {\r\n      return forall(blocks, function (block) {\r\n        var indentStyleName = getIndentStyleName(shouldIndentUseMargin(editor), block);\r\n        var intentValue = getRaw(block, indentStyleName).map(parseIndentValue).getOr(0);\r\n        var contentEditable = editor.dom.getContentEditable(block.dom);\r\n        return contentEditable !== 'false' && intentValue > 0;\r\n      });\r\n    };\r\n    var canOutdent = function (editor) {\r\n      var blocks = getBlocksToIndent(editor);\r\n      return !editor.mode.isReadOnly() && (blocks.length > 1 || validateBlocks(editor, blocks));\r\n    };\r\n    var isListComponent = function (el) {\r\n      return isList(el) || isListItem(el);\r\n    };\r\n    var parentIsListComponent = function (el) {\r\n      return parent(el).exists(isListComponent);\r\n    };\r\n    var getBlocksToIndent = function (editor) {\r\n      return filter$4(fromDom$1(editor.selection.getSelectedBlocks()), function (el) {\r\n        return !isListComponent(el) && !parentIsListComponent(el) && isEditable(el);\r\n      });\r\n    };\r\n    var handle = function (editor, command) {\r\n      var dom = editor.dom, selection = editor.selection, formatter = editor.formatter;\r\n      var indentation = getIndentation(editor);\r\n      var indentUnit = /[a-z%]+$/i.exec(indentation)[0];\r\n      var indentValue = parseInt(indentation, 10);\r\n      var useMargin = shouldIndentUseMargin(editor);\r\n      var forcedRootBlock = getForcedRootBlock(editor);\r\n      if (!editor.queryCommandState('InsertUnorderedList') && !editor.queryCommandState('InsertOrderedList')) {\r\n        if (forcedRootBlock === '' && !dom.getParent(selection.getNode(), dom.isBlock)) {\r\n          formatter.apply('div');\r\n        }\r\n      }\r\n      each$k(getBlocksToIndent(editor), function (block) {\r\n        indentElement(dom, command, useMargin, indentValue, indentUnit, block.dom);\r\n      });\r\n    };\r\n\r\n    var backspaceDelete = function (editor, _forward) {\r\n      if (editor.selection.isCollapsed() && canOutdent(editor)) {\r\n        var dom = editor.dom;\r\n        var rng = editor.selection.getRng();\r\n        var pos = CaretPosition.fromRangeStart(rng);\r\n        var block = dom.getParent(rng.startContainer, dom.isBlock);\r\n        if (block !== null && isAtStartOfBlock(SugarElement.fromDom(block), pos)) {\r\n          handle(editor, 'outdent');\r\n          return true;\r\n        }\r\n      }\r\n      return false;\r\n    };\r\n\r\n    var nativeCommand = function (editor, command) {\r\n      editor.getDoc().execCommand(command, false, null);\r\n    };\r\n    var deleteCommand = function (editor, caret) {\r\n      if (backspaceDelete(editor)) {\r\n        return;\r\n      } else if (backspaceDelete$5(editor, false)) {\r\n        return;\r\n      } else if (backspaceDelete$6(editor, false)) {\r\n        return;\r\n      } else if (backspaceDelete$3(editor, caret, false)) {\r\n        return;\r\n      } else if (backspaceDelete$8(editor, false)) {\r\n        return;\r\n      } else if (backspaceDelete$9(editor)) {\r\n        return;\r\n      } else if (backspaceDelete$4(editor, false)) {\r\n        return;\r\n      } else if (backspaceDelete$1(editor, false)) {\r\n        return;\r\n      } else if (backspaceDelete$7(editor)) {\r\n        return;\r\n      } else if (backspaceDelete$2(editor, false)) {\r\n        return;\r\n      } else {\r\n        nativeCommand(editor, 'Delete');\r\n        paddEmptyBody(editor);\r\n      }\r\n    };\r\n    var forwardDeleteCommand = function (editor, caret) {\r\n      if (backspaceDelete$5(editor, true)) {\r\n        return;\r\n      } else if (backspaceDelete$6(editor, true)) {\r\n        return;\r\n      } else if (backspaceDelete$3(editor, caret, true)) {\r\n        return;\r\n      } else if (backspaceDelete$8(editor, true)) {\r\n        return;\r\n      } else if (backspaceDelete$9(editor)) {\r\n        return;\r\n      } else if (backspaceDelete$4(editor, true)) {\r\n        return;\r\n      } else if (backspaceDelete$1(editor, true)) {\r\n        return;\r\n      } else if (backspaceDelete$7(editor)) {\r\n        return;\r\n      } else if (backspaceDelete$2(editor, true)) {\r\n        return;\r\n      } else {\r\n        nativeCommand(editor, 'ForwardDelete');\r\n      }\r\n    };\r\n    var setup$f = function (editor, caret) {\r\n      editor.addCommand('delete', function () {\r\n        deleteCommand(editor, caret);\r\n      });\r\n      editor.addCommand('forwardDelete', function () {\r\n        forwardDeleteCommand(editor, caret);\r\n      });\r\n    };\r\n\r\n    var SIGNIFICANT_MOVE = 5;\r\n    var LONGPRESS_DELAY = 400;\r\n    var getTouch = function (event) {\r\n      if (event.touches === undefined || event.touches.length !== 1) {\r\n        return Optional.none();\r\n      }\r\n      return Optional.some(event.touches[0]);\r\n    };\r\n    var isFarEnough = function (touch, data) {\r\n      var distX = Math.abs(touch.clientX - data.x);\r\n      var distY = Math.abs(touch.clientY - data.y);\r\n      return distX > SIGNIFICANT_MOVE || distY > SIGNIFICANT_MOVE;\r\n    };\r\n    var setup$e = function (editor) {\r\n      var startData = value();\r\n      var longpressFired = Cell(false);\r\n      var debounceLongpress = last(function (e) {\r\n        editor.fire('longpress', __assign(__assign({}, e), { type: 'longpress' }));\r\n        longpressFired.set(true);\r\n      }, LONGPRESS_DELAY);\r\n      editor.on('touchstart', function (e) {\r\n        getTouch(e).each(function (touch) {\r\n          debounceLongpress.cancel();\r\n          var data = {\r\n            x: touch.clientX,\r\n            y: touch.clientY,\r\n            target: e.target\r\n          };\r\n          debounceLongpress.throttle(e);\r\n          longpressFired.set(false);\r\n          startData.set(data);\r\n        });\r\n      }, true);\r\n      editor.on('touchmove', function (e) {\r\n        debounceLongpress.cancel();\r\n        getTouch(e).each(function (touch) {\r\n          startData.on(function (data) {\r\n            if (isFarEnough(touch, data)) {\r\n              startData.clear();\r\n              longpressFired.set(false);\r\n              editor.fire('longpresscancel');\r\n            }\r\n          });\r\n        });\r\n      }, true);\r\n      editor.on('touchend touchcancel', function (e) {\r\n        debounceLongpress.cancel();\r\n        if (e.type === 'touchcancel') {\r\n          return;\r\n        }\r\n        startData.get().filter(function (data) {\r\n          return data.target.isEqualNode(e.target);\r\n        }).each(function () {\r\n          if (longpressFired.get()) {\r\n            e.preventDefault();\r\n          } else {\r\n            editor.fire('tap', __assign(__assign({}, e), { type: 'tap' }));\r\n          }\r\n        });\r\n      }, true);\r\n    };\r\n\r\n    var isBlockElement = function (blockElements, node) {\r\n      return has$2(blockElements, node.nodeName);\r\n    };\r\n    var isValidTarget = function (blockElements, node) {\r\n      if (isText$7(node)) {\r\n        return true;\r\n      } else if (isElement$5(node)) {\r\n        return !isBlockElement(blockElements, node) && !isBookmarkNode$1(node);\r\n      } else {\r\n        return false;\r\n      }\r\n    };\r\n    var hasBlockParent = function (blockElements, root, node) {\r\n      return exists(parents(SugarElement.fromDom(node), SugarElement.fromDom(root)), function (elm) {\r\n        return isBlockElement(blockElements, elm.dom);\r\n      });\r\n    };\r\n    var shouldRemoveTextNode = function (blockElements, node) {\r\n      if (isText$7(node)) {\r\n        if (node.nodeValue.length === 0) {\r\n          return true;\r\n        } else if (/^\\s+$/.test(node.nodeValue) && (!node.nextSibling || isBlockElement(blockElements, node.nextSibling))) {\r\n          return true;\r\n        }\r\n      }\r\n      return false;\r\n    };\r\n    var addRootBlocks = function (editor) {\r\n      var dom = editor.dom, selection = editor.selection;\r\n      var schema = editor.schema, blockElements = schema.getBlockElements();\r\n      var node = selection.getStart();\r\n      var rootNode = editor.getBody();\r\n      var rootBlockNode, tempNode, wrapped;\r\n      var forcedRootBlock = getForcedRootBlock(editor);\r\n      if (!node || !isElement$5(node) || !forcedRootBlock) {\r\n        return;\r\n      }\r\n      var rootNodeName = rootNode.nodeName.toLowerCase();\r\n      if (!schema.isValidChild(rootNodeName, forcedRootBlock.toLowerCase()) || hasBlockParent(blockElements, rootNode, node)) {\r\n        return;\r\n      }\r\n      var rng = selection.getRng();\r\n      var startContainer = rng.startContainer;\r\n      var startOffset = rng.startOffset;\r\n      var endContainer = rng.endContainer;\r\n      var endOffset = rng.endOffset;\r\n      var restoreSelection = hasFocus(editor);\r\n      node = rootNode.firstChild;\r\n      while (node) {\r\n        if (isValidTarget(blockElements, node)) {\r\n          if (shouldRemoveTextNode(blockElements, node)) {\r\n            tempNode = node;\r\n            node = node.nextSibling;\r\n            dom.remove(tempNode);\r\n            continue;\r\n          }\r\n          if (!rootBlockNode) {\r\n            rootBlockNode = dom.create(forcedRootBlock, getForcedRootBlockAttrs(editor));\r\n            node.parentNode.insertBefore(rootBlockNode, node);\r\n            wrapped = true;\r\n          }\r\n          tempNode = node;\r\n          node = node.nextSibling;\r\n          rootBlockNode.appendChild(tempNode);\r\n        } else {\r\n          rootBlockNode = null;\r\n          node = node.nextSibling;\r\n        }\r\n      }\r\n      if (wrapped && restoreSelection) {\r\n        rng.setStart(startContainer, startOffset);\r\n        rng.setEnd(endContainer, endOffset);\r\n        selection.setRng(rng);\r\n        editor.nodeChanged();\r\n      }\r\n    };\r\n    var setup$d = function (editor) {\r\n      if (getForcedRootBlock(editor)) {\r\n        editor.on('NodeChange', curry(addRootBlocks, editor));\r\n      }\r\n    };\r\n\r\n    var findBlockCaretContainer = function (editor) {\r\n      return descendant(SugarElement.fromDom(editor.getBody()), '*[data-mce-caret]').map(function (elm) {\r\n        return elm.dom;\r\n      }).getOrNull();\r\n    };\r\n    var removeIeControlRect = function (editor) {\r\n      editor.selection.setRng(editor.selection.getRng());\r\n    };\r\n    var showBlockCaretContainer = function (editor, blockCaretContainer) {\r\n      if (blockCaretContainer.hasAttribute('data-mce-caret')) {\r\n        showCaretContainerBlock(blockCaretContainer);\r\n        removeIeControlRect(editor);\r\n        editor.selection.scrollIntoView(blockCaretContainer);\r\n      }\r\n    };\r\n    var handleBlockContainer = function (editor, e) {\r\n      var blockCaretContainer = findBlockCaretContainer(editor);\r\n      if (!blockCaretContainer) {\r\n        return;\r\n      }\r\n      if (e.type === 'compositionstart') {\r\n        e.preventDefault();\r\n        e.stopPropagation();\r\n        showBlockCaretContainer(editor, blockCaretContainer);\r\n        return;\r\n      }\r\n      if (hasContent(blockCaretContainer)) {\r\n        showBlockCaretContainer(editor, blockCaretContainer);\r\n        editor.undoManager.add();\r\n      }\r\n    };\r\n    var setup$c = function (editor) {\r\n      editor.on('keyup compositionstart', curry(handleBlockContainer, editor));\r\n    };\r\n\r\n    var isContentEditableFalse$2 = isContentEditableFalse$b;\r\n    var moveToCeFalseHorizontally = function (direction, editor, range) {\r\n      return moveHorizontally(editor, direction, range, isBeforeContentEditableFalse, isAfterContentEditableFalse, isContentEditableFalse$2);\r\n    };\r\n    var moveToCeFalseVertically = function (direction, editor, range) {\r\n      var isBefore = function (caretPosition) {\r\n        return isBeforeContentEditableFalse(caretPosition) || isBeforeTable(caretPosition);\r\n      };\r\n      var isAfter = function (caretPosition) {\r\n        return isAfterContentEditableFalse(caretPosition) || isAfterTable(caretPosition);\r\n      };\r\n      return moveVertically(editor, direction, range, isBefore, isAfter, isContentEditableFalse$2);\r\n    };\r\n    var createTextBlock = function (editor) {\r\n      var textBlock = editor.dom.create(getForcedRootBlock(editor));\r\n      if (!Env.ie || Env.ie >= 11) {\r\n        textBlock.innerHTML = '<br data-mce-bogus=\"1\">';\r\n      }\r\n      return textBlock;\r\n    };\r\n    var exitPreBlock = function (editor, direction, range) {\r\n      var caretWalker = CaretWalker(editor.getBody());\r\n      var getVisualCaretPosition$1 = curry(getVisualCaretPosition, direction === 1 ? caretWalker.next : caretWalker.prev);\r\n      if (range.collapsed && hasForcedRootBlock(editor)) {\r\n        var pre = editor.dom.getParent(range.startContainer, 'PRE');\r\n        if (!pre) {\r\n          return;\r\n        }\r\n        var caretPos = getVisualCaretPosition$1(CaretPosition.fromRangeStart(range));\r\n        if (!caretPos) {\r\n          var newBlock = createTextBlock(editor);\r\n          if (direction === 1) {\r\n            editor.$(pre).after(newBlock);\r\n          } else {\r\n            editor.$(pre).before(newBlock);\r\n          }\r\n          editor.selection.select(newBlock, true);\r\n          editor.selection.collapse();\r\n        }\r\n      }\r\n    };\r\n    var getHorizontalRange = function (editor, forward) {\r\n      var direction = forward ? HDirection.Forwards : HDirection.Backwards;\r\n      var range = editor.selection.getRng();\r\n      return moveToCeFalseHorizontally(direction, editor, range).orThunk(function () {\r\n        exitPreBlock(editor, direction, range);\r\n        return Optional.none();\r\n      });\r\n    };\r\n    var getVerticalRange = function (editor, down) {\r\n      var direction = down ? 1 : -1;\r\n      var range = editor.selection.getRng();\r\n      return moveToCeFalseVertically(direction, editor, range).orThunk(function () {\r\n        exitPreBlock(editor, direction, range);\r\n        return Optional.none();\r\n      });\r\n    };\r\n    var moveH$2 = function (editor, forward) {\r\n      return getHorizontalRange(editor, forward).exists(function (newRange) {\r\n        moveToRange(editor, newRange);\r\n        return true;\r\n      });\r\n    };\r\n    var moveV$3 = function (editor, down) {\r\n      return getVerticalRange(editor, down).exists(function (newRange) {\r\n        moveToRange(editor, newRange);\r\n        return true;\r\n      });\r\n    };\r\n    var moveToLineEndPoint$1 = function (editor, forward) {\r\n      var isCefPosition = forward ? isAfterContentEditableFalse : isBeforeContentEditableFalse;\r\n      return moveToLineEndPoint$3(editor, forward, isCefPosition);\r\n    };\r\n\r\n    var isTarget = function (node) {\r\n      return contains$3(['figcaption'], name(node));\r\n    };\r\n    var rangeBefore = function (target) {\r\n      var rng = document.createRange();\r\n      rng.setStartBefore(target.dom);\r\n      rng.setEndBefore(target.dom);\r\n      return rng;\r\n    };\r\n    var insertElement = function (root, elm, forward) {\r\n      if (forward) {\r\n        append$1(root, elm);\r\n      } else {\r\n        prepend(root, elm);\r\n      }\r\n    };\r\n    var insertBr = function (root, forward) {\r\n      var br = SugarElement.fromTag('br');\r\n      insertElement(root, br, forward);\r\n      return rangeBefore(br);\r\n    };\r\n    var insertBlock = function (root, forward, blockName, attrs) {\r\n      var block = SugarElement.fromTag(blockName);\r\n      var br = SugarElement.fromTag('br');\r\n      setAll$1(block, attrs);\r\n      append$1(block, br);\r\n      insertElement(root, block, forward);\r\n      return rangeBefore(br);\r\n    };\r\n    var insertEmptyLine = function (root, rootBlockName, attrs, forward) {\r\n      if (rootBlockName === '') {\r\n        return insertBr(root, forward);\r\n      } else {\r\n        return insertBlock(root, forward, rootBlockName, attrs);\r\n      }\r\n    };\r\n    var getClosestTargetBlock = function (pos, root) {\r\n      var isRoot = curry(eq, root);\r\n      return closest$3(SugarElement.fromDom(pos.container()), isBlock$2, isRoot).filter(isTarget);\r\n    };\r\n    var isAtFirstOrLastLine = function (root, forward, pos) {\r\n      return forward ? isAtLastLine(root.dom, pos) : isAtFirstLine(root.dom, pos);\r\n    };\r\n    var moveCaretToNewEmptyLine = function (editor, forward) {\r\n      var root = SugarElement.fromDom(editor.getBody());\r\n      var pos = CaretPosition.fromRangeStart(editor.selection.getRng());\r\n      var rootBlock = getForcedRootBlock(editor);\r\n      var rootBlockAttrs = getForcedRootBlockAttrs(editor);\r\n      return getClosestTargetBlock(pos, root).exists(function () {\r\n        if (isAtFirstOrLastLine(root, forward, pos)) {\r\n          var rng = insertEmptyLine(root, rootBlock, rootBlockAttrs, forward);\r\n          editor.selection.setRng(rng);\r\n          return true;\r\n        } else {\r\n          return false;\r\n        }\r\n      });\r\n    };\r\n    var moveV$2 = function (editor, forward) {\r\n      if (editor.selection.isCollapsed()) {\r\n        return moveCaretToNewEmptyLine(editor, forward);\r\n      } else {\r\n        return false;\r\n      }\r\n    };\r\n\r\n    var defaultPatterns = function (patterns) {\r\n      return map$3(patterns, function (pattern) {\r\n        return __assign({\r\n          shiftKey: false,\r\n          altKey: false,\r\n          ctrlKey: false,\r\n          metaKey: false,\r\n          keyCode: 0,\r\n          action: noop\r\n        }, pattern);\r\n      });\r\n    };\r\n    var matchesEvent = function (pattern, evt) {\r\n      return evt.keyCode === pattern.keyCode && evt.shiftKey === pattern.shiftKey && evt.altKey === pattern.altKey && evt.ctrlKey === pattern.ctrlKey && evt.metaKey === pattern.metaKey;\r\n    };\r\n    var match$1 = function (patterns, evt) {\r\n      return bind(defaultPatterns(patterns), function (pattern) {\r\n        return matchesEvent(pattern, evt) ? [pattern] : [];\r\n      });\r\n    };\r\n    var action = function (f) {\r\n      var x = [];\r\n      for (var _i = 1; _i < arguments.length; _i++) {\r\n        x[_i - 1] = arguments[_i];\r\n      }\r\n      return function () {\r\n        return f.apply(null, x);\r\n      };\r\n    };\r\n    var execute = function (patterns, evt) {\r\n      return find$3(match$1(patterns, evt), function (pattern) {\r\n        return pattern.action();\r\n      });\r\n    };\r\n\r\n    var moveH$1 = function (editor, forward) {\r\n      var direction = forward ? HDirection.Forwards : HDirection.Backwards;\r\n      var range = editor.selection.getRng();\r\n      return moveHorizontally(editor, direction, range, isBeforeMedia, isAfterMedia, isMedia$2).exists(function (newRange) {\r\n        moveToRange(editor, newRange);\r\n        return true;\r\n      });\r\n    };\r\n    var moveV$1 = function (editor, down) {\r\n      var direction = down ? 1 : -1;\r\n      var range = editor.selection.getRng();\r\n      return moveVertically(editor, direction, range, isBeforeMedia, isAfterMedia, isMedia$2).exists(function (newRange) {\r\n        moveToRange(editor, newRange);\r\n        return true;\r\n      });\r\n    };\r\n    var moveToLineEndPoint = function (editor, forward) {\r\n      var isNearMedia = forward ? isAfterMedia : isBeforeMedia;\r\n      return moveToLineEndPoint$3(editor, forward, isNearMedia);\r\n    };\r\n\r\n    var deflate = function (rect, delta) {\r\n      return {\r\n        left: rect.left - delta,\r\n        top: rect.top - delta,\r\n        right: rect.right + delta * 2,\r\n        bottom: rect.bottom + delta * 2,\r\n        width: rect.width + delta,\r\n        height: rect.height + delta\r\n      };\r\n    };\r\n    var getCorners = function (getYAxisValue, tds) {\r\n      return bind(tds, function (td) {\r\n        var rect = deflate(clone(td.getBoundingClientRect()), -1);\r\n        return [\r\n          {\r\n            x: rect.left,\r\n            y: getYAxisValue(rect),\r\n            cell: td\r\n          },\r\n          {\r\n            x: rect.right,\r\n            y: getYAxisValue(rect),\r\n            cell: td\r\n          }\r\n        ];\r\n      });\r\n    };\r\n    var findClosestCorner = function (corners, x, y) {\r\n      return foldl(corners, function (acc, newCorner) {\r\n        return acc.fold(function () {\r\n          return Optional.some(newCorner);\r\n        }, function (oldCorner) {\r\n          var oldDist = Math.sqrt(Math.abs(oldCorner.x - x) + Math.abs(oldCorner.y - y));\r\n          var newDist = Math.sqrt(Math.abs(newCorner.x - x) + Math.abs(newCorner.y - y));\r\n          return Optional.some(newDist < oldDist ? newCorner : oldCorner);\r\n        });\r\n      }, Optional.none());\r\n    };\r\n    var getClosestCell = function (getYAxisValue, isTargetCorner, table, x, y) {\r\n      var cells = descendants(SugarElement.fromDom(table), 'td,th,caption').map(function (e) {\r\n        return e.dom;\r\n      });\r\n      var corners = filter$4(getCorners(getYAxisValue, cells), function (corner) {\r\n        return isTargetCorner(corner, y);\r\n      });\r\n      return findClosestCorner(corners, x, y).map(function (corner) {\r\n        return corner.cell;\r\n      });\r\n    };\r\n    var getBottomValue = function (rect) {\r\n      return rect.bottom;\r\n    };\r\n    var getTopValue = function (rect) {\r\n      return rect.top;\r\n    };\r\n    var isAbove = function (corner, y) {\r\n      return corner.y < y;\r\n    };\r\n    var isBelow = function (corner, y) {\r\n      return corner.y > y;\r\n    };\r\n    var getClosestCellAbove = curry(getClosestCell, getBottomValue, isAbove);\r\n    var getClosestCellBelow = curry(getClosestCell, getTopValue, isBelow);\r\n    var findClosestPositionInAboveCell = function (table, pos) {\r\n      return head(pos.getClientRects()).bind(function (rect) {\r\n        return getClosestCellAbove(table, rect.left, rect.top);\r\n      }).bind(function (cell) {\r\n        return findClosestHorizontalPosition(getLastLinePositions(cell), pos);\r\n      });\r\n    };\r\n    var findClosestPositionInBelowCell = function (table, pos) {\r\n      return last$2(pos.getClientRects()).bind(function (rect) {\r\n        return getClosestCellBelow(table, rect.left, rect.top);\r\n      }).bind(function (cell) {\r\n        return findClosestHorizontalPosition(getFirstLinePositions(cell), pos);\r\n      });\r\n    };\r\n\r\n    var hasNextBreak = function (getPositionsUntil, scope, lineInfo) {\r\n      return lineInfo.breakAt.exists(function (breakPos) {\r\n        return getPositionsUntil(scope, breakPos).breakAt.isSome();\r\n      });\r\n    };\r\n    var startsWithWrapBreak = function (lineInfo) {\r\n      return lineInfo.breakType === BreakType.Wrap && lineInfo.positions.length === 0;\r\n    };\r\n    var startsWithBrBreak = function (lineInfo) {\r\n      return lineInfo.breakType === BreakType.Br && lineInfo.positions.length === 1;\r\n    };\r\n    var isAtTableCellLine = function (getPositionsUntil, scope, pos) {\r\n      var lineInfo = getPositionsUntil(scope, pos);\r\n      if (startsWithWrapBreak(lineInfo) || !isBr$5(pos.getNode()) && startsWithBrBreak(lineInfo)) {\r\n        return !hasNextBreak(getPositionsUntil, scope, lineInfo);\r\n      } else {\r\n        return lineInfo.breakAt.isNone();\r\n      }\r\n    };\r\n    var isAtFirstTableCellLine = curry(isAtTableCellLine, getPositionsUntilPreviousLine);\r\n    var isAtLastTableCellLine = curry(isAtTableCellLine, getPositionsUntilNextLine);\r\n    var isCaretAtStartOrEndOfTable = function (forward, rng, table) {\r\n      var caretPos = CaretPosition.fromRangeStart(rng);\r\n      return positionIn(!forward, table).exists(function (pos) {\r\n        return pos.isEqual(caretPos);\r\n      });\r\n    };\r\n    var navigateHorizontally = function (editor, forward, table, _td) {\r\n      var rng = editor.selection.getRng();\r\n      var direction = forward ? 1 : -1;\r\n      if (isFakeCaretTableBrowser() && isCaretAtStartOrEndOfTable(forward, rng, table)) {\r\n        showCaret(direction, editor, table, !forward, false).each(function (newRng) {\r\n          moveToRange(editor, newRng);\r\n        });\r\n        return true;\r\n      }\r\n      return false;\r\n    };\r\n    var getClosestAbovePosition = function (root, table, start) {\r\n      return findClosestPositionInAboveCell(table, start).orThunk(function () {\r\n        return head(start.getClientRects()).bind(function (rect) {\r\n          return findClosestHorizontalPositionFromPoint(getPositionsAbove(root, CaretPosition.before(table)), rect.left);\r\n        });\r\n      }).getOr(CaretPosition.before(table));\r\n    };\r\n    var getClosestBelowPosition = function (root, table, start) {\r\n      return findClosestPositionInBelowCell(table, start).orThunk(function () {\r\n        return head(start.getClientRects()).bind(function (rect) {\r\n          return findClosestHorizontalPositionFromPoint(getPositionsBelow(root, CaretPosition.after(table)), rect.left);\r\n        });\r\n      }).getOr(CaretPosition.after(table));\r\n    };\r\n    var getTable = function (previous, pos) {\r\n      var node = pos.getNode(previous);\r\n      return isElement$5(node) && node.nodeName === 'TABLE' ? Optional.some(node) : Optional.none();\r\n    };\r\n    var renderBlock = function (down, editor, table, pos) {\r\n      var forcedRootBlock = getForcedRootBlock(editor);\r\n      if (forcedRootBlock) {\r\n        editor.undoManager.transact(function () {\r\n          var element = SugarElement.fromTag(forcedRootBlock);\r\n          setAll$1(element, getForcedRootBlockAttrs(editor));\r\n          append$1(element, SugarElement.fromTag('br'));\r\n          if (down) {\r\n            after$3(SugarElement.fromDom(table), element);\r\n          } else {\r\n            before$4(SugarElement.fromDom(table), element);\r\n          }\r\n          var rng = editor.dom.createRng();\r\n          rng.setStart(element.dom, 0);\r\n          rng.setEnd(element.dom, 0);\r\n          moveToRange(editor, rng);\r\n        });\r\n      } else {\r\n        moveToRange(editor, pos.toRange());\r\n      }\r\n    };\r\n    var moveCaret = function (editor, down, pos) {\r\n      var table = down ? getTable(true, pos) : getTable(false, pos);\r\n      var last = down === false;\r\n      table.fold(function () {\r\n        return moveToRange(editor, pos.toRange());\r\n      }, function (table) {\r\n        return positionIn(last, editor.getBody()).filter(function (lastPos) {\r\n          return lastPos.isEqual(pos);\r\n        }).fold(function () {\r\n          return moveToRange(editor, pos.toRange());\r\n        }, function (_) {\r\n          return renderBlock(down, editor, table, pos);\r\n        });\r\n      });\r\n    };\r\n    var navigateVertically = function (editor, down, table, td) {\r\n      var rng = editor.selection.getRng();\r\n      var pos = CaretPosition.fromRangeStart(rng);\r\n      var root = editor.getBody();\r\n      if (!down && isAtFirstTableCellLine(td, pos)) {\r\n        var newPos = getClosestAbovePosition(root, table, pos);\r\n        moveCaret(editor, down, newPos);\r\n        return true;\r\n      } else if (down && isAtLastTableCellLine(td, pos)) {\r\n        var newPos = getClosestBelowPosition(root, table, pos);\r\n        moveCaret(editor, down, newPos);\r\n        return true;\r\n      } else {\r\n        return false;\r\n      }\r\n    };\r\n    var move$1 = function (editor, forward, mover) {\r\n      return Optional.from(editor.dom.getParent(editor.selection.getNode(), 'td,th')).bind(function (td) {\r\n        return Optional.from(editor.dom.getParent(td, 'table')).map(function (table) {\r\n          return mover(editor, forward, table, td);\r\n        });\r\n      }).getOr(false);\r\n    };\r\n    var moveH = function (editor, forward) {\r\n      return move$1(editor, forward, navigateHorizontally);\r\n    };\r\n    var moveV = function (editor, forward) {\r\n      return move$1(editor, forward, navigateVertically);\r\n    };\r\n\r\n    var executeKeydownOverride$3 = function (editor, caret, evt) {\r\n      var os = detect().os;\r\n      execute([\r\n        {\r\n          keyCode: VK.RIGHT,\r\n          action: action(moveH$2, editor, true)\r\n        },\r\n        {\r\n          keyCode: VK.LEFT,\r\n          action: action(moveH$2, editor, false)\r\n        },\r\n        {\r\n          keyCode: VK.UP,\r\n          action: action(moveV$3, editor, false)\r\n        },\r\n        {\r\n          keyCode: VK.DOWN,\r\n          action: action(moveV$3, editor, true)\r\n        },\r\n        {\r\n          keyCode: VK.RIGHT,\r\n          action: action(moveH, editor, true)\r\n        },\r\n        {\r\n          keyCode: VK.LEFT,\r\n          action: action(moveH, editor, false)\r\n        },\r\n        {\r\n          keyCode: VK.UP,\r\n          action: action(moveV, editor, false)\r\n        },\r\n        {\r\n          keyCode: VK.DOWN,\r\n          action: action(moveV, editor, true)\r\n        },\r\n        {\r\n          keyCode: VK.RIGHT,\r\n          action: action(moveH$1, editor, true)\r\n        },\r\n        {\r\n          keyCode: VK.LEFT,\r\n          action: action(moveH$1, editor, false)\r\n        },\r\n        {\r\n          keyCode: VK.UP,\r\n          action: action(moveV$1, editor, false)\r\n        },\r\n        {\r\n          keyCode: VK.DOWN,\r\n          action: action(moveV$1, editor, true)\r\n        },\r\n        {\r\n          keyCode: VK.RIGHT,\r\n          action: action(move$2, editor, caret, true)\r\n        },\r\n        {\r\n          keyCode: VK.LEFT,\r\n          action: action(move$2, editor, caret, false)\r\n        },\r\n        {\r\n          keyCode: VK.RIGHT,\r\n          ctrlKey: !os.isOSX(),\r\n          altKey: os.isOSX(),\r\n          action: action(moveNextWord, editor, caret)\r\n        },\r\n        {\r\n          keyCode: VK.LEFT,\r\n          ctrlKey: !os.isOSX(),\r\n          altKey: os.isOSX(),\r\n          action: action(movePrevWord, editor, caret)\r\n        },\r\n        {\r\n          keyCode: VK.UP,\r\n          action: action(moveV$2, editor, false)\r\n        },\r\n        {\r\n          keyCode: VK.DOWN,\r\n          action: action(moveV$2, editor, true)\r\n        }\r\n      ], evt).each(function (_) {\r\n        evt.preventDefault();\r\n      });\r\n    };\r\n    var setup$b = function (editor, caret) {\r\n      editor.on('keydown', function (evt) {\r\n        if (evt.isDefaultPrevented() === false) {\r\n          executeKeydownOverride$3(editor, caret, evt);\r\n        }\r\n      });\r\n    };\r\n\r\n    var executeKeydownOverride$2 = function (editor, caret, evt) {\r\n      execute([\r\n        {\r\n          keyCode: VK.BACKSPACE,\r\n          action: action(backspaceDelete, editor, false)\r\n        },\r\n        {\r\n          keyCode: VK.BACKSPACE,\r\n          action: action(backspaceDelete$5, editor, false)\r\n        },\r\n        {\r\n          keyCode: VK.DELETE,\r\n          action: action(backspaceDelete$5, editor, true)\r\n        },\r\n        {\r\n          keyCode: VK.BACKSPACE,\r\n          action: action(backspaceDelete$6, editor, false)\r\n        },\r\n        {\r\n          keyCode: VK.DELETE,\r\n          action: action(backspaceDelete$6, editor, true)\r\n        },\r\n        {\r\n          keyCode: VK.BACKSPACE,\r\n          action: action(backspaceDelete$3, editor, caret, false)\r\n        },\r\n        {\r\n          keyCode: VK.DELETE,\r\n          action: action(backspaceDelete$3, editor, caret, true)\r\n        },\r\n        {\r\n          keyCode: VK.BACKSPACE,\r\n          action: action(backspaceDelete$9, editor, false)\r\n        },\r\n        {\r\n          keyCode: VK.DELETE,\r\n          action: action(backspaceDelete$9, editor, true)\r\n        },\r\n        {\r\n          keyCode: VK.BACKSPACE,\r\n          action: action(backspaceDelete$4, editor, false)\r\n        },\r\n        {\r\n          keyCode: VK.DELETE,\r\n          action: action(backspaceDelete$4, editor, true)\r\n        },\r\n        {\r\n          keyCode: VK.BACKSPACE,\r\n          action: action(backspaceDelete$1, editor, false)\r\n        },\r\n        {\r\n          keyCode: VK.DELETE,\r\n          action: action(backspaceDelete$1, editor, true)\r\n        },\r\n        {\r\n          keyCode: VK.BACKSPACE,\r\n          action: action(backspaceDelete$7, editor, false)\r\n        },\r\n        {\r\n          keyCode: VK.DELETE,\r\n          action: action(backspaceDelete$7, editor, true)\r\n        },\r\n        {\r\n          keyCode: VK.BACKSPACE,\r\n          action: action(backspaceDelete$8, editor, false)\r\n        },\r\n        {\r\n          keyCode: VK.DELETE,\r\n          action: action(backspaceDelete$8, editor, true)\r\n        },\r\n        {\r\n          keyCode: VK.BACKSPACE,\r\n          action: action(backspaceDelete$2, editor, false)\r\n        },\r\n        {\r\n          keyCode: VK.DELETE,\r\n          action: action(backspaceDelete$2, editor, true)\r\n        }\r\n      ], evt).each(function (_) {\r\n        evt.preventDefault();\r\n      });\r\n    };\r\n    var executeKeyupOverride = function (editor, evt) {\r\n      execute([\r\n        {\r\n          keyCode: VK.BACKSPACE,\r\n          action: action(paddEmptyElement, editor)\r\n        },\r\n        {\r\n          keyCode: VK.DELETE,\r\n          action: action(paddEmptyElement, editor)\r\n        }\r\n      ], evt);\r\n    };\r\n    var setup$a = function (editor, caret) {\r\n      editor.on('keydown', function (evt) {\r\n        if (evt.isDefaultPrevented() === false) {\r\n          executeKeydownOverride$2(editor, caret, evt);\r\n        }\r\n      });\r\n      editor.on('keyup', function (evt) {\r\n        if (evt.isDefaultPrevented() === false) {\r\n          executeKeyupOverride(editor, evt);\r\n        }\r\n      });\r\n    };\r\n\r\n    var firstNonWhiteSpaceNodeSibling = function (node) {\r\n      while (node) {\r\n        if (node.nodeType === 1 || node.nodeType === 3 && node.data && /[\\r\\n\\s]/.test(node.data)) {\r\n          return node;\r\n        }\r\n        node = node.nextSibling;\r\n      }\r\n    };\r\n    var moveToCaretPosition = function (editor, root) {\r\n      var node, lastNode = root;\r\n      var dom = editor.dom;\r\n      var moveCaretBeforeOnEnterElementsMap = editor.schema.getMoveCaretBeforeOnEnterElements();\r\n      if (!root) {\r\n        return;\r\n      }\r\n      if (/^(LI|DT|DD)$/.test(root.nodeName)) {\r\n        var firstChild = firstNonWhiteSpaceNodeSibling(root.firstChild);\r\n        if (firstChild && /^(UL|OL|DL)$/.test(firstChild.nodeName)) {\r\n          root.insertBefore(dom.doc.createTextNode(nbsp), root.firstChild);\r\n        }\r\n      }\r\n      var rng = dom.createRng();\r\n      root.normalize();\r\n      if (root.hasChildNodes()) {\r\n        var walker = new DomTreeWalker(root, root);\r\n        while (node = walker.current()) {\r\n          if (isText$7(node)) {\r\n            rng.setStart(node, 0);\r\n            rng.setEnd(node, 0);\r\n            break;\r\n          }\r\n          if (moveCaretBeforeOnEnterElementsMap[node.nodeName.toLowerCase()]) {\r\n            rng.setStartBefore(node);\r\n            rng.setEndBefore(node);\r\n            break;\r\n          }\r\n          lastNode = node;\r\n          node = walker.next();\r\n        }\r\n        if (!node) {\r\n          rng.setStart(lastNode, 0);\r\n          rng.setEnd(lastNode, 0);\r\n        }\r\n      } else {\r\n        if (isBr$5(root)) {\r\n          if (root.nextSibling && dom.isBlock(root.nextSibling)) {\r\n            rng.setStartBefore(root);\r\n            rng.setEndBefore(root);\r\n          } else {\r\n            rng.setStartAfter(root);\r\n            rng.setEndAfter(root);\r\n          }\r\n        } else {\r\n          rng.setStart(root, 0);\r\n          rng.setEnd(root, 0);\r\n        }\r\n      }\r\n      editor.selection.setRng(rng);\r\n      scrollRangeIntoView(editor, rng);\r\n    };\r\n    var getEditableRoot$1 = function (dom, node) {\r\n      var root = dom.getRoot();\r\n      var parent, editableRoot;\r\n      parent = node;\r\n      while (parent !== root && dom.getContentEditable(parent) !== 'false') {\r\n        if (dom.getContentEditable(parent) === 'true') {\r\n          editableRoot = parent;\r\n        }\r\n        parent = parent.parentNode;\r\n      }\r\n      return parent !== root ? editableRoot : root;\r\n    };\r\n    var getParentBlock = function (editor) {\r\n      return Optional.from(editor.dom.getParent(editor.selection.getStart(true), editor.dom.isBlock));\r\n    };\r\n    var getParentBlockName = function (editor) {\r\n      return getParentBlock(editor).fold(constant(''), function (parentBlock) {\r\n        return parentBlock.nodeName.toUpperCase();\r\n      });\r\n    };\r\n    var isListItemParentBlock = function (editor) {\r\n      return getParentBlock(editor).filter(function (elm) {\r\n        return isListItem(SugarElement.fromDom(elm));\r\n      }).isSome();\r\n    };\r\n\r\n    var hasFirstChild = function (elm, name) {\r\n      return elm.firstChild && elm.firstChild.nodeName === name;\r\n    };\r\n    var isFirstChild = function (elm) {\r\n      var _a;\r\n      return ((_a = elm.parentNode) === null || _a === void 0 ? void 0 : _a.firstChild) === elm;\r\n    };\r\n    var hasParent = function (elm, parentName) {\r\n      return elm && elm.parentNode && elm.parentNode.nodeName === parentName;\r\n    };\r\n    var isListBlock = function (elm) {\r\n      return elm && /^(OL|UL|LI)$/.test(elm.nodeName);\r\n    };\r\n    var isNestedList = function (elm) {\r\n      return isListBlock(elm) && isListBlock(elm.parentNode);\r\n    };\r\n    var getContainerBlock = function (containerBlock) {\r\n      var containerBlockParent = containerBlock.parentNode;\r\n      if (/^(LI|DT|DD)$/.test(containerBlockParent.nodeName)) {\r\n        return containerBlockParent;\r\n      }\r\n      return containerBlock;\r\n    };\r\n    var isFirstOrLastLi = function (containerBlock, parentBlock, first) {\r\n      var node = containerBlock[first ? 'firstChild' : 'lastChild'];\r\n      while (node) {\r\n        if (isElement$5(node)) {\r\n          break;\r\n        }\r\n        node = node[first ? 'nextSibling' : 'previousSibling'];\r\n      }\r\n      return node === parentBlock;\r\n    };\r\n    var insert$3 = function (editor, createNewBlock, containerBlock, parentBlock, newBlockName) {\r\n      var dom = editor.dom;\r\n      var rng = editor.selection.getRng();\r\n      if (containerBlock === editor.getBody()) {\r\n        return;\r\n      }\r\n      if (isNestedList(containerBlock)) {\r\n        newBlockName = 'LI';\r\n      }\r\n      var newBlock = newBlockName ? createNewBlock(newBlockName) : dom.create('BR');\r\n      if (isFirstOrLastLi(containerBlock, parentBlock, true) && isFirstOrLastLi(containerBlock, parentBlock, false)) {\r\n        if (hasParent(containerBlock, 'LI')) {\r\n          var containerBlockParent = getContainerBlock(containerBlock);\r\n          dom.insertAfter(newBlock, containerBlockParent);\r\n          if (isFirstChild(containerBlock)) {\r\n            dom.remove(containerBlockParent);\r\n          } else {\r\n            dom.remove(containerBlock);\r\n          }\r\n        } else {\r\n          dom.replace(newBlock, containerBlock);\r\n        }\r\n      } else if (isFirstOrLastLi(containerBlock, parentBlock, true)) {\r\n        if (hasParent(containerBlock, 'LI')) {\r\n          dom.insertAfter(newBlock, getContainerBlock(containerBlock));\r\n          newBlock.appendChild(dom.doc.createTextNode(' '));\r\n          newBlock.appendChild(containerBlock);\r\n        } else {\r\n          containerBlock.parentNode.insertBefore(newBlock, containerBlock);\r\n        }\r\n        dom.remove(parentBlock);\r\n      } else if (isFirstOrLastLi(containerBlock, parentBlock, false)) {\r\n        dom.insertAfter(newBlock, getContainerBlock(containerBlock));\r\n        dom.remove(parentBlock);\r\n      } else {\r\n        containerBlock = getContainerBlock(containerBlock);\r\n        var tmpRng = rng.cloneRange();\r\n        tmpRng.setStartAfter(parentBlock);\r\n        tmpRng.setEndAfter(containerBlock);\r\n        var fragment = tmpRng.extractContents();\r\n        if (newBlockName === 'LI' && hasFirstChild(fragment, 'LI')) {\r\n          newBlock = fragment.firstChild;\r\n          dom.insertAfter(fragment, containerBlock);\r\n        } else {\r\n          dom.insertAfter(fragment, containerBlock);\r\n          dom.insertAfter(newBlock, containerBlock);\r\n        }\r\n        dom.remove(parentBlock);\r\n      }\r\n      moveToCaretPosition(editor, newBlock);\r\n    };\r\n\r\n    var trimZwsp = function (fragment) {\r\n      each$k(descendants$1(SugarElement.fromDom(fragment), isText$8), function (text) {\r\n        var rawNode = text.dom;\r\n        rawNode.nodeValue = trim$2(rawNode.nodeValue);\r\n      });\r\n    };\r\n    var isEmptyAnchor = function (dom, elm) {\r\n      return elm && elm.nodeName === 'A' && dom.isEmpty(elm);\r\n    };\r\n    var isTableCell = function (node) {\r\n      return node && /^(TD|TH|CAPTION)$/.test(node.nodeName);\r\n    };\r\n    var emptyBlock = function (elm) {\r\n      elm.innerHTML = '<br data-mce-bogus=\"1\">';\r\n    };\r\n    var containerAndSiblingName = function (container, nodeName) {\r\n      return container.nodeName === nodeName || container.previousSibling && container.previousSibling.nodeName === nodeName;\r\n    };\r\n    var canSplitBlock = function (dom, node) {\r\n      return node && dom.isBlock(node) && !/^(TD|TH|CAPTION|FORM)$/.test(node.nodeName) && !/^(fixed|absolute)/i.test(node.style.position) && dom.getContentEditable(node) !== 'true';\r\n    };\r\n    var trimInlineElementsOnLeftSideOfBlock = function (dom, nonEmptyElementsMap, block) {\r\n      var node = block;\r\n      var firstChilds = [];\r\n      var i;\r\n      if (!node) {\r\n        return;\r\n      }\r\n      while (node = node.firstChild) {\r\n        if (dom.isBlock(node)) {\r\n          return;\r\n        }\r\n        if (isElement$5(node) && !nonEmptyElementsMap[node.nodeName.toLowerCase()]) {\r\n          firstChilds.push(node);\r\n        }\r\n      }\r\n      i = firstChilds.length;\r\n      while (i--) {\r\n        node = firstChilds[i];\r\n        if (!node.hasChildNodes() || node.firstChild === node.lastChild && node.firstChild.nodeValue === '') {\r\n          dom.remove(node);\r\n        } else {\r\n          if (isEmptyAnchor(dom, node)) {\r\n            dom.remove(node);\r\n          }\r\n        }\r\n      }\r\n    };\r\n    var normalizeZwspOffset = function (start, container, offset) {\r\n      if (isText$7(container) === false) {\r\n        return offset;\r\n      } else if (start) {\r\n        return offset === 1 && container.data.charAt(offset - 1) === ZWSP$1 ? 0 : offset;\r\n      } else {\r\n        return offset === container.data.length - 1 && container.data.charAt(offset) === ZWSP$1 ? container.data.length : offset;\r\n      }\r\n    };\r\n    var includeZwspInRange = function (rng) {\r\n      var newRng = rng.cloneRange();\r\n      newRng.setStart(rng.startContainer, normalizeZwspOffset(true, rng.startContainer, rng.startOffset));\r\n      newRng.setEnd(rng.endContainer, normalizeZwspOffset(false, rng.endContainer, rng.endOffset));\r\n      return newRng;\r\n    };\r\n    var trimLeadingLineBreaks = function (node) {\r\n      do {\r\n        if (isText$7(node)) {\r\n          node.nodeValue = node.nodeValue.replace(/^[\\r\\n]+/, '');\r\n        }\r\n        node = node.firstChild;\r\n      } while (node);\r\n    };\r\n    var getEditableRoot = function (dom, node) {\r\n      var root = dom.getRoot();\r\n      var parent, editableRoot;\r\n      parent = node;\r\n      while (parent !== root && dom.getContentEditable(parent) !== 'false') {\r\n        if (dom.getContentEditable(parent) === 'true') {\r\n          editableRoot = parent;\r\n        }\r\n        parent = parent.parentNode;\r\n      }\r\n      return parent !== root ? editableRoot : root;\r\n    };\r\n    var applyAttributes = function (editor, node, forcedRootBlockAttrs) {\r\n      var dom = editor.dom;\r\n      Optional.from(forcedRootBlockAttrs.style).map(dom.parseStyle).each(function (attrStyles) {\r\n        var currentStyles = getAllRaw(SugarElement.fromDom(node));\r\n        var newStyles = __assign(__assign({}, currentStyles), attrStyles);\r\n        dom.setStyles(node, newStyles);\r\n      });\r\n      var attrClassesOpt = Optional.from(forcedRootBlockAttrs.class).map(function (attrClasses) {\r\n        return attrClasses.split(/\\s+/);\r\n      });\r\n      var currentClassesOpt = Optional.from(node.className).map(function (currentClasses) {\r\n        return filter$4(currentClasses.split(/\\s+/), function (clazz) {\r\n          return clazz !== '';\r\n        });\r\n      });\r\n      lift2(attrClassesOpt, currentClassesOpt, function (attrClasses, currentClasses) {\r\n        var filteredClasses = filter$4(currentClasses, function (clazz) {\r\n          return !contains$3(attrClasses, clazz);\r\n        });\r\n        var newClasses = __spreadArray(__spreadArray([], attrClasses, true), filteredClasses, true);\r\n        dom.setAttrib(node, 'class', newClasses.join(' '));\r\n      });\r\n      var appliedAttrs = [\r\n        'style',\r\n        'class'\r\n      ];\r\n      var remainingAttrs = filter$3(forcedRootBlockAttrs, function (_, attrs) {\r\n        return !contains$3(appliedAttrs, attrs);\r\n      });\r\n      dom.setAttribs(node, remainingAttrs);\r\n    };\r\n    var setForcedBlockAttrs = function (editor, node) {\r\n      var forcedRootBlockName = getForcedRootBlock(editor);\r\n      if (forcedRootBlockName && forcedRootBlockName.toLowerCase() === node.tagName.toLowerCase()) {\r\n        var forcedRootBlockAttrs = getForcedRootBlockAttrs(editor);\r\n        applyAttributes(editor, node, forcedRootBlockAttrs);\r\n      }\r\n    };\r\n    var wrapSelfAndSiblingsInDefaultBlock = function (editor, newBlockName, rng, container, offset) {\r\n      var newBlock, parentBlock, startNode, node, next, rootBlockName;\r\n      var blockName = newBlockName || 'P';\r\n      var dom = editor.dom, editableRoot = getEditableRoot(dom, container);\r\n      parentBlock = dom.getParent(container, dom.isBlock);\r\n      if (!parentBlock || !canSplitBlock(dom, parentBlock)) {\r\n        parentBlock = parentBlock || editableRoot;\r\n        if (parentBlock === editor.getBody() || isTableCell(parentBlock)) {\r\n          rootBlockName = parentBlock.nodeName.toLowerCase();\r\n        } else {\r\n          rootBlockName = parentBlock.parentNode.nodeName.toLowerCase();\r\n        }\r\n        if (!parentBlock.hasChildNodes()) {\r\n          newBlock = dom.create(blockName);\r\n          setForcedBlockAttrs(editor, newBlock);\r\n          parentBlock.appendChild(newBlock);\r\n          rng.setStart(newBlock, 0);\r\n          rng.setEnd(newBlock, 0);\r\n          return newBlock;\r\n        }\r\n        node = container;\r\n        while (node.parentNode !== parentBlock) {\r\n          node = node.parentNode;\r\n        }\r\n        while (node && !dom.isBlock(node)) {\r\n          startNode = node;\r\n          node = node.previousSibling;\r\n        }\r\n        if (startNode && editor.schema.isValidChild(rootBlockName, blockName.toLowerCase())) {\r\n          newBlock = dom.create(blockName);\r\n          setForcedBlockAttrs(editor, newBlock);\r\n          startNode.parentNode.insertBefore(newBlock, startNode);\r\n          node = startNode;\r\n          while (node && !dom.isBlock(node)) {\r\n            next = node.nextSibling;\r\n            newBlock.appendChild(node);\r\n            node = next;\r\n          }\r\n          rng.setStart(container, offset);\r\n          rng.setEnd(container, offset);\r\n        }\r\n      }\r\n      return container;\r\n    };\r\n    var addBrToBlockIfNeeded = function (dom, block) {\r\n      block.normalize();\r\n      var lastChild = block.lastChild;\r\n      if (!lastChild || /^(left|right)$/gi.test(dom.getStyle(lastChild, 'float', true))) {\r\n        dom.add(block, 'br');\r\n      }\r\n    };\r\n    var insert$2 = function (editor, evt) {\r\n      var tmpRng, container, offset, parentBlock;\r\n      var newBlock, fragment, containerBlock, parentBlockName, newBlockName, isAfterLastNodeInContainer;\r\n      var dom = editor.dom;\r\n      var schema = editor.schema, nonEmptyElementsMap = schema.getNonEmptyElements();\r\n      var rng = editor.selection.getRng();\r\n      var createNewBlock = function (name) {\r\n        var node = container, block, clonedNode, caretNode;\r\n        var textInlineElements = schema.getTextInlineElements();\r\n        if (name || parentBlockName === 'TABLE' || parentBlockName === 'HR') {\r\n          block = dom.create(name || newBlockName);\r\n        } else {\r\n          block = parentBlock.cloneNode(false);\r\n        }\r\n        caretNode = block;\r\n        if (shouldKeepStyles(editor) === false) {\r\n          dom.setAttrib(block, 'style', null);\r\n          dom.setAttrib(block, 'class', null);\r\n        } else {\r\n          do {\r\n            if (textInlineElements[node.nodeName]) {\r\n              if (isCaretNode(node) || isBookmarkNode$1(node)) {\r\n                continue;\r\n              }\r\n              clonedNode = node.cloneNode(false);\r\n              dom.setAttrib(clonedNode, 'id', '');\r\n              if (block.hasChildNodes()) {\r\n                clonedNode.appendChild(block.firstChild);\r\n                block.appendChild(clonedNode);\r\n              } else {\r\n                caretNode = clonedNode;\r\n                block.appendChild(clonedNode);\r\n              }\r\n            }\r\n          } while ((node = node.parentNode) && node !== editableRoot);\r\n        }\r\n        setForcedBlockAttrs(editor, block);\r\n        emptyBlock(caretNode);\r\n        return block;\r\n      };\r\n      var isCaretAtStartOrEndOfBlock = function (start) {\r\n        var node, name;\r\n        var normalizedOffset = normalizeZwspOffset(start, container, offset);\r\n        if (isText$7(container) && (start ? normalizedOffset > 0 : normalizedOffset < container.nodeValue.length)) {\r\n          return false;\r\n        }\r\n        if (container.parentNode === parentBlock && isAfterLastNodeInContainer && !start) {\r\n          return true;\r\n        }\r\n        if (start && isElement$5(container) && container === parentBlock.firstChild) {\r\n          return true;\r\n        }\r\n        if (containerAndSiblingName(container, 'TABLE') || containerAndSiblingName(container, 'HR')) {\r\n          return isAfterLastNodeInContainer && !start || !isAfterLastNodeInContainer && start;\r\n        }\r\n        var walker = new DomTreeWalker(container, parentBlock);\r\n        if (isText$7(container)) {\r\n          if (start && normalizedOffset === 0) {\r\n            walker.prev();\r\n          } else if (!start && normalizedOffset === container.nodeValue.length) {\r\n            walker.next();\r\n          }\r\n        }\r\n        while (node = walker.current()) {\r\n          if (isElement$5(node)) {\r\n            if (!node.getAttribute('data-mce-bogus')) {\r\n              name = node.nodeName.toLowerCase();\r\n              if (nonEmptyElementsMap[name] && name !== 'br') {\r\n                return false;\r\n              }\r\n            }\r\n          } else if (isText$7(node) && !isWhitespaceText(node.nodeValue)) {\r\n            return false;\r\n          }\r\n          if (start) {\r\n            walker.prev();\r\n          } else {\r\n            walker.next();\r\n          }\r\n        }\r\n        return true;\r\n      };\r\n      var insertNewBlockAfter = function () {\r\n        if (/^(H[1-6]|PRE|FIGURE)$/.test(parentBlockName) && containerBlockName !== 'HGROUP') {\r\n          newBlock = createNewBlock(newBlockName);\r\n        } else {\r\n          newBlock = createNewBlock();\r\n        }\r\n        if (shouldEndContainerOnEmptyBlock(editor) && canSplitBlock(dom, containerBlock) && dom.isEmpty(parentBlock)) {\r\n          newBlock = dom.split(containerBlock, parentBlock);\r\n        } else {\r\n          dom.insertAfter(newBlock, parentBlock);\r\n        }\r\n        moveToCaretPosition(editor, newBlock);\r\n      };\r\n      normalize$2(dom, rng).each(function (normRng) {\r\n        rng.setStart(normRng.startContainer, normRng.startOffset);\r\n        rng.setEnd(normRng.endContainer, normRng.endOffset);\r\n      });\r\n      container = rng.startContainer;\r\n      offset = rng.startOffset;\r\n      newBlockName = getForcedRootBlock(editor);\r\n      var shiftKey = !!(evt && evt.shiftKey);\r\n      var ctrlKey = !!(evt && evt.ctrlKey);\r\n      if (isElement$5(container) && container.hasChildNodes()) {\r\n        isAfterLastNodeInContainer = offset > container.childNodes.length - 1;\r\n        container = container.childNodes[Math.min(offset, container.childNodes.length - 1)] || container;\r\n        if (isAfterLastNodeInContainer && isText$7(container)) {\r\n          offset = container.nodeValue.length;\r\n        } else {\r\n          offset = 0;\r\n        }\r\n      }\r\n      var editableRoot = getEditableRoot(dom, container);\r\n      if (!editableRoot) {\r\n        return;\r\n      }\r\n      if (newBlockName && !shiftKey || !newBlockName && shiftKey) {\r\n        container = wrapSelfAndSiblingsInDefaultBlock(editor, newBlockName, rng, container, offset);\r\n      }\r\n      parentBlock = dom.getParent(container, dom.isBlock);\r\n      containerBlock = parentBlock ? dom.getParent(parentBlock.parentNode, dom.isBlock) : null;\r\n      parentBlockName = parentBlock ? parentBlock.nodeName.toUpperCase() : '';\r\n      var containerBlockName = containerBlock ? containerBlock.nodeName.toUpperCase() : '';\r\n      if (containerBlockName === 'LI' && !ctrlKey) {\r\n        parentBlock = containerBlock;\r\n        containerBlock = containerBlock.parentNode;\r\n        parentBlockName = containerBlockName;\r\n      }\r\n      if (/^(LI|DT|DD)$/.test(parentBlockName)) {\r\n        if (dom.isEmpty(parentBlock)) {\r\n          insert$3(editor, createNewBlock, containerBlock, parentBlock, newBlockName);\r\n          return;\r\n        }\r\n      }\r\n      if (newBlockName && parentBlock === editor.getBody()) {\r\n        return;\r\n      }\r\n      newBlockName = newBlockName || 'P';\r\n      if (isCaretContainerBlock$1(parentBlock)) {\r\n        newBlock = showCaretContainerBlock(parentBlock);\r\n        if (dom.isEmpty(parentBlock)) {\r\n          emptyBlock(parentBlock);\r\n        }\r\n        setForcedBlockAttrs(editor, newBlock);\r\n        moveToCaretPosition(editor, newBlock);\r\n      } else if (isCaretAtStartOrEndOfBlock()) {\r\n        insertNewBlockAfter();\r\n      } else if (isCaretAtStartOrEndOfBlock(true)) {\r\n        newBlock = parentBlock.parentNode.insertBefore(createNewBlock(), parentBlock);\r\n        moveToCaretPosition(editor, containerAndSiblingName(parentBlock, 'HR') ? newBlock : parentBlock);\r\n      } else {\r\n        tmpRng = includeZwspInRange(rng).cloneRange();\r\n        tmpRng.setEndAfter(parentBlock);\r\n        fragment = tmpRng.extractContents();\r\n        trimZwsp(fragment);\r\n        trimLeadingLineBreaks(fragment);\r\n        newBlock = fragment.firstChild;\r\n        dom.insertAfter(fragment, parentBlock);\r\n        trimInlineElementsOnLeftSideOfBlock(dom, nonEmptyElementsMap, newBlock);\r\n        addBrToBlockIfNeeded(dom, parentBlock);\r\n        if (dom.isEmpty(parentBlock)) {\r\n          emptyBlock(parentBlock);\r\n        }\r\n        newBlock.normalize();\r\n        if (dom.isEmpty(newBlock)) {\r\n          dom.remove(newBlock);\r\n          insertNewBlockAfter();\r\n        } else {\r\n          setForcedBlockAttrs(editor, newBlock);\r\n          moveToCaretPosition(editor, newBlock);\r\n        }\r\n      }\r\n      dom.setAttrib(newBlock, 'id', '');\r\n      editor.fire('NewBlock', { newBlock: newBlock });\r\n    };\r\n\r\n    var hasRightSideContent = function (schema, container, parentBlock) {\r\n      var walker = new DomTreeWalker(container, parentBlock);\r\n      var node;\r\n      var nonEmptyElementsMap = schema.getNonEmptyElements();\r\n      while (node = walker.next()) {\r\n        if (nonEmptyElementsMap[node.nodeName.toLowerCase()] || node.length > 0) {\r\n          return true;\r\n        }\r\n      }\r\n    };\r\n    var moveSelectionToBr = function (editor, brElm, extraBr) {\r\n      var rng = editor.dom.createRng();\r\n      if (!extraBr) {\r\n        rng.setStartAfter(brElm);\r\n        rng.setEndAfter(brElm);\r\n      } else {\r\n        rng.setStartBefore(brElm);\r\n        rng.setEndBefore(brElm);\r\n      }\r\n      editor.selection.setRng(rng);\r\n      scrollRangeIntoView(editor, rng);\r\n    };\r\n    var insertBrAtCaret = function (editor, evt) {\r\n      var selection = editor.selection;\r\n      var dom = editor.dom;\r\n      var rng = selection.getRng();\r\n      var brElm;\r\n      var extraBr;\r\n      normalize$2(dom, rng).each(function (normRng) {\r\n        rng.setStart(normRng.startContainer, normRng.startOffset);\r\n        rng.setEnd(normRng.endContainer, normRng.endOffset);\r\n      });\r\n      var offset = rng.startOffset;\r\n      var container = rng.startContainer;\r\n      if (container.nodeType === 1 && container.hasChildNodes()) {\r\n        var isAfterLastNodeInContainer = offset > container.childNodes.length - 1;\r\n        container = container.childNodes[Math.min(offset, container.childNodes.length - 1)] || container;\r\n        if (isAfterLastNodeInContainer && container.nodeType === 3) {\r\n          offset = container.nodeValue.length;\r\n        } else {\r\n          offset = 0;\r\n        }\r\n      }\r\n      var parentBlock = dom.getParent(container, dom.isBlock);\r\n      var containerBlock = parentBlock ? dom.getParent(parentBlock.parentNode, dom.isBlock) : null;\r\n      var containerBlockName = containerBlock ? containerBlock.nodeName.toUpperCase() : '';\r\n      var isControlKey = !!(evt && evt.ctrlKey);\r\n      if (containerBlockName === 'LI' && !isControlKey) {\r\n        parentBlock = containerBlock;\r\n      }\r\n      if (container && container.nodeType === 3 && offset >= container.nodeValue.length) {\r\n        if (!hasRightSideContent(editor.schema, container, parentBlock)) {\r\n          brElm = dom.create('br');\r\n          rng.insertNode(brElm);\r\n          rng.setStartAfter(brElm);\r\n          rng.setEndAfter(brElm);\r\n          extraBr = true;\r\n        }\r\n      }\r\n      brElm = dom.create('br');\r\n      rangeInsertNode(dom, rng, brElm);\r\n      moveSelectionToBr(editor, brElm, extraBr);\r\n      editor.undoManager.add();\r\n    };\r\n    var insertBrBefore = function (editor, inline) {\r\n      var br = SugarElement.fromTag('br');\r\n      before$4(SugarElement.fromDom(inline), br);\r\n      editor.undoManager.add();\r\n    };\r\n    var insertBrAfter = function (editor, inline) {\r\n      if (!hasBrAfter(editor.getBody(), inline)) {\r\n        after$3(SugarElement.fromDom(inline), SugarElement.fromTag('br'));\r\n      }\r\n      var br = SugarElement.fromTag('br');\r\n      after$3(SugarElement.fromDom(inline), br);\r\n      moveSelectionToBr(editor, br.dom, false);\r\n      editor.undoManager.add();\r\n    };\r\n    var isBeforeBr = function (pos) {\r\n      return isBr$5(pos.getNode());\r\n    };\r\n    var hasBrAfter = function (rootNode, startNode) {\r\n      if (isBeforeBr(CaretPosition.after(startNode))) {\r\n        return true;\r\n      } else {\r\n        return nextPosition(rootNode, CaretPosition.after(startNode)).map(function (pos) {\r\n          return isBr$5(pos.getNode());\r\n        }).getOr(false);\r\n      }\r\n    };\r\n    var isAnchorLink = function (elm) {\r\n      return elm && elm.nodeName === 'A' && 'href' in elm;\r\n    };\r\n    var isInsideAnchor = function (location) {\r\n      return location.fold(never, isAnchorLink, isAnchorLink, never);\r\n    };\r\n    var readInlineAnchorLocation = function (editor) {\r\n      var isInlineTarget$1 = curry(isInlineTarget, editor);\r\n      var position = CaretPosition.fromRangeStart(editor.selection.getRng());\r\n      return readLocation(isInlineTarget$1, editor.getBody(), position).filter(isInsideAnchor);\r\n    };\r\n    var insertBrOutsideAnchor = function (editor, location) {\r\n      location.fold(noop, curry(insertBrBefore, editor), curry(insertBrAfter, editor), noop);\r\n    };\r\n    var insert$1 = function (editor, evt) {\r\n      var anchorLocation = readInlineAnchorLocation(editor);\r\n      if (anchorLocation.isSome()) {\r\n        anchorLocation.each(curry(insertBrOutsideAnchor, editor));\r\n      } else {\r\n        insertBrAtCaret(editor, evt);\r\n      }\r\n    };\r\n\r\n    var matchesSelector = function (editor, selector) {\r\n      return getParentBlock(editor).filter(function (parentBlock) {\r\n        return selector.length > 0 && is$2(SugarElement.fromDom(parentBlock), selector);\r\n      }).isSome();\r\n    };\r\n    var shouldInsertBr = function (editor) {\r\n      return matchesSelector(editor, getBrNewLineSelector(editor));\r\n    };\r\n    var shouldBlockNewLine$1 = function (editor) {\r\n      return matchesSelector(editor, getNoNewLineSelector(editor));\r\n    };\r\n\r\n    var newLineAction = Adt.generate([\r\n      { br: [] },\r\n      { block: [] },\r\n      { none: [] }\r\n    ]);\r\n    var shouldBlockNewLine = function (editor, _shiftKey) {\r\n      return shouldBlockNewLine$1(editor);\r\n    };\r\n    var isBrMode = function (requiredState) {\r\n      return function (editor, _shiftKey) {\r\n        var brMode = getForcedRootBlock(editor) === '';\r\n        return brMode === requiredState;\r\n      };\r\n    };\r\n    var inListBlock = function (requiredState) {\r\n      return function (editor, _shiftKey) {\r\n        return isListItemParentBlock(editor) === requiredState;\r\n      };\r\n    };\r\n    var inBlock = function (blockName, requiredState) {\r\n      return function (editor, _shiftKey) {\r\n        var state = getParentBlockName(editor) === blockName.toUpperCase();\r\n        return state === requiredState;\r\n      };\r\n    };\r\n    var inPreBlock = function (requiredState) {\r\n      return inBlock('pre', requiredState);\r\n    };\r\n    var inSummaryBlock = function () {\r\n      return inBlock('summary', true);\r\n    };\r\n    var shouldPutBrInPre = function (requiredState) {\r\n      return function (editor, _shiftKey) {\r\n        return shouldPutBrInPre$1(editor) === requiredState;\r\n      };\r\n    };\r\n    var inBrContext = function (editor, _shiftKey) {\r\n      return shouldInsertBr(editor);\r\n    };\r\n    var hasShiftKey = function (_editor, shiftKey) {\r\n      return shiftKey;\r\n    };\r\n    var canInsertIntoEditableRoot = function (editor) {\r\n      var forcedRootBlock = getForcedRootBlock(editor);\r\n      var rootEditable = getEditableRoot$1(editor.dom, editor.selection.getStart());\r\n      return rootEditable && editor.schema.isValidChild(rootEditable.nodeName, forcedRootBlock ? forcedRootBlock : 'P');\r\n    };\r\n    var match = function (predicates, action) {\r\n      return function (editor, shiftKey) {\r\n        var isMatch = foldl(predicates, function (res, p) {\r\n          return res && p(editor, shiftKey);\r\n        }, true);\r\n        return isMatch ? Optional.some(action) : Optional.none();\r\n      };\r\n    };\r\n    var getAction = function (editor, evt) {\r\n      return evaluateUntil([\r\n        match([shouldBlockNewLine], newLineAction.none()),\r\n        match([inSummaryBlock()], newLineAction.br()),\r\n        match([\r\n          inPreBlock(true),\r\n          shouldPutBrInPre(false),\r\n          hasShiftKey\r\n        ], newLineAction.br()),\r\n        match([\r\n          inPreBlock(true),\r\n          shouldPutBrInPre(false)\r\n        ], newLineAction.block()),\r\n        match([\r\n          inPreBlock(true),\r\n          shouldPutBrInPre(true),\r\n          hasShiftKey\r\n        ], newLineAction.block()),\r\n        match([\r\n          inPreBlock(true),\r\n          shouldPutBrInPre(true)\r\n        ], newLineAction.br()),\r\n        match([\r\n          inListBlock(true),\r\n          hasShiftKey\r\n        ], newLineAction.br()),\r\n        match([inListBlock(true)], newLineAction.block()),\r\n        match([\r\n          isBrMode(true),\r\n          hasShiftKey,\r\n          canInsertIntoEditableRoot\r\n        ], newLineAction.block()),\r\n        match([isBrMode(true)], newLineAction.br()),\r\n        match([inBrContext], newLineAction.br()),\r\n        match([\r\n          isBrMode(false),\r\n          hasShiftKey\r\n        ], newLineAction.br()),\r\n        match([canInsertIntoEditableRoot], newLineAction.block())\r\n      ], [\r\n        editor,\r\n        !!(evt && evt.shiftKey)\r\n      ]).getOr(newLineAction.none());\r\n    };\r\n\r\n    var insert = function (editor, evt) {\r\n      getAction(editor, evt).fold(function () {\r\n        insert$1(editor, evt);\r\n      }, function () {\r\n        insert$2(editor, evt);\r\n      }, noop);\r\n    };\r\n\r\n    var handleEnterKeyEvent = function (editor, event) {\r\n      if (event.isDefaultPrevented()) {\r\n        return;\r\n      }\r\n      event.preventDefault();\r\n      endTypingLevelIgnoreLocks(editor.undoManager);\r\n      editor.undoManager.transact(function () {\r\n        if (editor.selection.isCollapsed() === false) {\r\n          editor.execCommand('Delete');\r\n        }\r\n        insert(editor, event);\r\n      });\r\n    };\r\n    var setup$9 = function (editor) {\r\n      editor.on('keydown', function (event) {\r\n        if (event.keyCode === VK.ENTER) {\r\n          handleEnterKeyEvent(editor, event);\r\n        }\r\n      });\r\n    };\r\n\r\n    var executeKeydownOverride$1 = function (editor, caret, evt) {\r\n      execute([\r\n        {\r\n          keyCode: VK.END,\r\n          action: action(moveToLineEndPoint$1, editor, true)\r\n        },\r\n        {\r\n          keyCode: VK.HOME,\r\n          action: action(moveToLineEndPoint$1, editor, false)\r\n        },\r\n        {\r\n          keyCode: VK.END,\r\n          action: action(moveToLineEndPoint, editor, true)\r\n        },\r\n        {\r\n          keyCode: VK.HOME,\r\n          action: action(moveToLineEndPoint, editor, false)\r\n        },\r\n        {\r\n          keyCode: VK.END,\r\n          action: action(moveToLineEndPoint$2, editor, true, caret)\r\n        },\r\n        {\r\n          keyCode: VK.HOME,\r\n          action: action(moveToLineEndPoint$2, editor, false, caret)\r\n        }\r\n      ], evt).each(function (_) {\r\n        evt.preventDefault();\r\n      });\r\n    };\r\n    var setup$8 = function (editor, caret) {\r\n      editor.on('keydown', function (evt) {\r\n        if (evt.isDefaultPrevented() === false) {\r\n          executeKeydownOverride$1(editor, caret, evt);\r\n        }\r\n      });\r\n    };\r\n\r\n    var browser = detect().browser;\r\n    var setupIeInput = function (editor) {\r\n      var keypressThrotter = first(function () {\r\n        if (!editor.composing) {\r\n          normalizeNbspsInEditor(editor);\r\n        }\r\n      }, 0);\r\n      if (browser.isIE()) {\r\n        editor.on('keypress', function (_e) {\r\n          keypressThrotter.throttle();\r\n        });\r\n        editor.on('remove', function (_e) {\r\n          keypressThrotter.cancel();\r\n        });\r\n      }\r\n    };\r\n    var setup$7 = function (editor) {\r\n      setupIeInput(editor);\r\n      editor.on('input', function (e) {\r\n        if (e.isComposing === false) {\r\n          normalizeNbspsInEditor(editor);\r\n        }\r\n      });\r\n    };\r\n\r\n    var platform = detect();\r\n    var executeKeyupAction = function (editor, caret, evt) {\r\n      execute([\r\n        {\r\n          keyCode: VK.PAGE_UP,\r\n          action: action(moveToLineEndPoint$2, editor, false, caret)\r\n        },\r\n        {\r\n          keyCode: VK.PAGE_DOWN,\r\n          action: action(moveToLineEndPoint$2, editor, true, caret)\r\n        }\r\n      ], evt);\r\n    };\r\n    var stopImmediatePropagation = function (e) {\r\n      return e.stopImmediatePropagation();\r\n    };\r\n    var isPageUpDown = function (evt) {\r\n      return evt.keyCode === VK.PAGE_UP || evt.keyCode === VK.PAGE_DOWN;\r\n    };\r\n    var setNodeChangeBlocker = function (blocked, editor, block) {\r\n      if (block && !blocked.get()) {\r\n        editor.on('NodeChange', stopImmediatePropagation, true);\r\n      } else if (!block && blocked.get()) {\r\n        editor.off('NodeChange', stopImmediatePropagation);\r\n      }\r\n      blocked.set(block);\r\n    };\r\n    var setup$6 = function (editor, caret) {\r\n      if (platform.os.isOSX()) {\r\n        return;\r\n      }\r\n      var blocked = Cell(false);\r\n      editor.on('keydown', function (evt) {\r\n        if (isPageUpDown(evt)) {\r\n          setNodeChangeBlocker(blocked, editor, true);\r\n        }\r\n      });\r\n      editor.on('keyup', function (evt) {\r\n        if (evt.isDefaultPrevented() === false) {\r\n          executeKeyupAction(editor, caret, evt);\r\n        }\r\n        if (isPageUpDown(evt) && blocked.get()) {\r\n          setNodeChangeBlocker(blocked, editor, false);\r\n          editor.nodeChanged();\r\n        }\r\n      });\r\n    };\r\n\r\n    var insertTextAtPosition = function (text, pos) {\r\n      var container = pos.container();\r\n      var offset = pos.offset();\r\n      if (isText$7(container)) {\r\n        container.insertData(offset, text);\r\n        return Optional.some(CaretPosition(container, offset + text.length));\r\n      } else {\r\n        return getElementFromPosition(pos).map(function (elm) {\r\n          var textNode = SugarElement.fromText(text);\r\n          if (pos.isAtEnd()) {\r\n            after$3(elm, textNode);\r\n          } else {\r\n            before$4(elm, textNode);\r\n          }\r\n          return CaretPosition(textNode.dom, text.length);\r\n        });\r\n      }\r\n    };\r\n    var insertNbspAtPosition = curry(insertTextAtPosition, nbsp);\r\n    var insertSpaceAtPosition = curry(insertTextAtPosition, ' ');\r\n\r\n    var locationToCaretPosition = function (root) {\r\n      return function (location) {\r\n        return location.fold(function (element) {\r\n          return prevPosition(root.dom, CaretPosition.before(element));\r\n        }, function (element) {\r\n          return firstPositionIn(element);\r\n        }, function (element) {\r\n          return lastPositionIn(element);\r\n        }, function (element) {\r\n          return nextPosition(root.dom, CaretPosition.after(element));\r\n        });\r\n      };\r\n    };\r\n    var insertInlineBoundarySpaceOrNbsp = function (root, pos) {\r\n      return function (checkPos) {\r\n        return needsToHaveNbsp(root, checkPos) ? insertNbspAtPosition(pos) : insertSpaceAtPosition(pos);\r\n      };\r\n    };\r\n    var setSelection = function (editor) {\r\n      return function (pos) {\r\n        editor.selection.setRng(pos.toRange());\r\n        editor.nodeChanged();\r\n        return true;\r\n      };\r\n    };\r\n    var insertSpaceOrNbspAtSelection = function (editor) {\r\n      var pos = CaretPosition.fromRangeStart(editor.selection.getRng());\r\n      var root = SugarElement.fromDom(editor.getBody());\r\n      if (editor.selection.isCollapsed()) {\r\n        var isInlineTarget$1 = curry(isInlineTarget, editor);\r\n        var caretPosition = CaretPosition.fromRangeStart(editor.selection.getRng());\r\n        return readLocation(isInlineTarget$1, editor.getBody(), caretPosition).bind(locationToCaretPosition(root)).bind(insertInlineBoundarySpaceOrNbsp(root, pos)).exists(setSelection(editor));\r\n      } else {\r\n        return false;\r\n      }\r\n    };\r\n\r\n    var executeKeydownOverride = function (editor, evt) {\r\n      execute([{\r\n          keyCode: VK.SPACEBAR,\r\n          action: action(insertSpaceOrNbspAtSelection, editor)\r\n        }], evt).each(function (_) {\r\n        evt.preventDefault();\r\n      });\r\n    };\r\n    var setup$5 = function (editor) {\r\n      editor.on('keydown', function (evt) {\r\n        if (evt.isDefaultPrevented() === false) {\r\n          executeKeydownOverride(editor, evt);\r\n        }\r\n      });\r\n    };\r\n\r\n    var registerKeyboardOverrides = function (editor) {\r\n      var caret = setupSelectedState(editor);\r\n      setup$c(editor);\r\n      setup$b(editor, caret);\r\n      setup$a(editor, caret);\r\n      setup$9(editor);\r\n      setup$5(editor);\r\n      setup$7(editor);\r\n      setup$8(editor, caret);\r\n      setup$6(editor, caret);\r\n      return caret;\r\n    };\r\n    var setup$4 = function (editor) {\r\n      if (!isRtc(editor)) {\r\n        return registerKeyboardOverrides(editor);\r\n      } else {\r\n        return Cell(null);\r\n      }\r\n    };\r\n\r\n    var NodeChange = function () {\r\n      function NodeChange(editor) {\r\n        this.lastPath = [];\r\n        this.editor = editor;\r\n        var lastRng;\r\n        var self = this;\r\n        if (!('onselectionchange' in editor.getDoc())) {\r\n          editor.on('NodeChange click mouseup keyup focus', function (e) {\r\n            var nativeRng = editor.selection.getRng();\r\n            var fakeRng = {\r\n              startContainer: nativeRng.startContainer,\r\n              startOffset: nativeRng.startOffset,\r\n              endContainer: nativeRng.endContainer,\r\n              endOffset: nativeRng.endOffset\r\n            };\r\n            if (e.type === 'nodechange' || !isEq$4(fakeRng, lastRng)) {\r\n              editor.fire('SelectionChange');\r\n            }\r\n            lastRng = fakeRng;\r\n          });\r\n        }\r\n        editor.on('contextmenu', function () {\r\n          editor.fire('SelectionChange');\r\n        });\r\n        editor.on('SelectionChange', function () {\r\n          var startElm = editor.selection.getStart(true);\r\n          if (!startElm || !Env.range && editor.selection.isCollapsed()) {\r\n            return;\r\n          }\r\n          if (hasAnyRanges(editor) && !self.isSameElementPath(startElm) && editor.dom.isChildOf(startElm, editor.getBody())) {\r\n            editor.nodeChanged({ selectionChange: true });\r\n          }\r\n        });\r\n        editor.on('mouseup', function (e) {\r\n          if (!e.isDefaultPrevented() && hasAnyRanges(editor)) {\r\n            if (editor.selection.getNode().nodeName === 'IMG') {\r\n              Delay.setEditorTimeout(editor, function () {\r\n                editor.nodeChanged();\r\n              });\r\n            } else {\r\n              editor.nodeChanged();\r\n            }\r\n          }\r\n        });\r\n      }\r\n      NodeChange.prototype.nodeChanged = function (args) {\r\n        var selection = this.editor.selection;\r\n        var node, parents, root;\r\n        if (this.editor.initialized && selection && !shouldDisableNodeChange(this.editor) && !this.editor.mode.isReadOnly()) {\r\n          root = this.editor.getBody();\r\n          node = selection.getStart(true) || root;\r\n          if (node.ownerDocument !== this.editor.getDoc() || !this.editor.dom.isChildOf(node, root)) {\r\n            node = root;\r\n          }\r\n          parents = [];\r\n          this.editor.dom.getParent(node, function (node) {\r\n            if (node === root) {\r\n              return true;\r\n            }\r\n            parents.push(node);\r\n          });\r\n          args = args || {};\r\n          args.element = node;\r\n          args.parents = parents;\r\n          this.editor.fire('NodeChange', args);\r\n        }\r\n      };\r\n      NodeChange.prototype.isSameElementPath = function (startElm) {\r\n        var i;\r\n        var currentPath = this.editor.$(startElm).parentsUntil(this.editor.getBody()).add(startElm);\r\n        if (currentPath.length === this.lastPath.length) {\r\n          for (i = currentPath.length; i >= 0; i--) {\r\n            if (currentPath[i] !== this.lastPath[i]) {\r\n              break;\r\n            }\r\n          }\r\n          if (i === -1) {\r\n            this.lastPath = currentPath;\r\n            return true;\r\n          }\r\n        }\r\n        this.lastPath = currentPath;\r\n        return false;\r\n      };\r\n      return NodeChange;\r\n    }();\r\n\r\n    var preventSummaryToggle = function (editor) {\r\n      editor.on('click', function (e) {\r\n        if (editor.dom.getParent(e.target, 'details')) {\r\n          e.preventDefault();\r\n        }\r\n      });\r\n    };\r\n    var filterDetails = function (editor) {\r\n      editor.parser.addNodeFilter('details', function (elms) {\r\n        each$k(elms, function (details) {\r\n          details.attr('data-mce-open', details.attr('open'));\r\n          details.attr('open', 'open');\r\n        });\r\n      });\r\n      editor.serializer.addNodeFilter('details', function (elms) {\r\n        each$k(elms, function (details) {\r\n          var open = details.attr('data-mce-open');\r\n          details.attr('open', isString$1(open) ? open : null);\r\n          details.attr('data-mce-open', null);\r\n        });\r\n      });\r\n    };\r\n    var setup$3 = function (editor) {\r\n      preventSummaryToggle(editor);\r\n      filterDetails(editor);\r\n    };\r\n\r\n    var isTextBlockNode = function (node) {\r\n      return isElement$5(node) && isTextBlock$2(SugarElement.fromDom(node));\r\n    };\r\n    var normalizeSelection = function (editor) {\r\n      var rng = editor.selection.getRng();\r\n      var startPos = CaretPosition.fromRangeStart(rng);\r\n      var endPos = CaretPosition.fromRangeEnd(rng);\r\n      if (CaretPosition.isElementPosition(startPos)) {\r\n        var container = startPos.container();\r\n        if (isTextBlockNode(container)) {\r\n          firstPositionIn(container).each(function (pos) {\r\n            return rng.setStart(pos.container(), pos.offset());\r\n          });\r\n        }\r\n      }\r\n      if (CaretPosition.isElementPosition(endPos)) {\r\n        var container = startPos.container();\r\n        if (isTextBlockNode(container)) {\r\n          lastPositionIn(container).each(function (pos) {\r\n            return rng.setEnd(pos.container(), pos.offset());\r\n          });\r\n        }\r\n      }\r\n      editor.selection.setRng(normalize(rng));\r\n    };\r\n    var setup$2 = function (editor) {\r\n      editor.on('click', function (e) {\r\n        if (e.detail >= 3) {\r\n          normalizeSelection(editor);\r\n        }\r\n      });\r\n    };\r\n\r\n    var getAbsolutePosition = function (elm) {\r\n      var clientRect = elm.getBoundingClientRect();\r\n      var doc = elm.ownerDocument;\r\n      var docElem = doc.documentElement;\r\n      var win = doc.defaultView;\r\n      return {\r\n        top: clientRect.top + win.pageYOffset - docElem.clientTop,\r\n        left: clientRect.left + win.pageXOffset - docElem.clientLeft\r\n      };\r\n    };\r\n    var getBodyPosition = function (editor) {\r\n      return editor.inline ? getAbsolutePosition(editor.getBody()) : {\r\n        left: 0,\r\n        top: 0\r\n      };\r\n    };\r\n    var getScrollPosition = function (editor) {\r\n      var body = editor.getBody();\r\n      return editor.inline ? {\r\n        left: body.scrollLeft,\r\n        top: body.scrollTop\r\n      } : {\r\n        left: 0,\r\n        top: 0\r\n      };\r\n    };\r\n    var getBodyScroll = function (editor) {\r\n      var body = editor.getBody(), docElm = editor.getDoc().documentElement;\r\n      var inlineScroll = {\r\n        left: body.scrollLeft,\r\n        top: body.scrollTop\r\n      };\r\n      var iframeScroll = {\r\n        left: body.scrollLeft || docElm.scrollLeft,\r\n        top: body.scrollTop || docElm.scrollTop\r\n      };\r\n      return editor.inline ? inlineScroll : iframeScroll;\r\n    };\r\n    var getMousePosition = function (editor, event) {\r\n      if (event.target.ownerDocument !== editor.getDoc()) {\r\n        var iframePosition = getAbsolutePosition(editor.getContentAreaContainer());\r\n        var scrollPosition = getBodyScroll(editor);\r\n        return {\r\n          left: event.pageX - iframePosition.left + scrollPosition.left,\r\n          top: event.pageY - iframePosition.top + scrollPosition.top\r\n        };\r\n      }\r\n      return {\r\n        left: event.pageX,\r\n        top: event.pageY\r\n      };\r\n    };\r\n    var calculatePosition = function (bodyPosition, scrollPosition, mousePosition) {\r\n      return {\r\n        pageX: mousePosition.left - bodyPosition.left + scrollPosition.left,\r\n        pageY: mousePosition.top - bodyPosition.top + scrollPosition.top\r\n      };\r\n    };\r\n    var calc = function (editor, event) {\r\n      return calculatePosition(getBodyPosition(editor), getScrollPosition(editor), getMousePosition(editor, event));\r\n    };\r\n\r\n    var isContentEditableFalse$1 = isContentEditableFalse$b, isContentEditableTrue$1 = isContentEditableTrue$4;\r\n    var isDraggable = function (rootElm, elm) {\r\n      return isContentEditableFalse$1(elm) && elm !== rootElm;\r\n    };\r\n    var isValidDropTarget = function (editor, targetElement, dragElement) {\r\n      if (targetElement === dragElement || editor.dom.isChildOf(targetElement, dragElement)) {\r\n        return false;\r\n      }\r\n      return !isContentEditableFalse$1(targetElement);\r\n    };\r\n    var cloneElement = function (elm) {\r\n      var cloneElm = elm.cloneNode(true);\r\n      cloneElm.removeAttribute('data-mce-selected');\r\n      return cloneElm;\r\n    };\r\n    var createGhost = function (editor, elm, width, height) {\r\n      var dom = editor.dom;\r\n      var clonedElm = elm.cloneNode(true);\r\n      dom.setStyles(clonedElm, {\r\n        width: width,\r\n        height: height\r\n      });\r\n      dom.setAttrib(clonedElm, 'data-mce-selected', null);\r\n      var ghostElm = dom.create('div', {\r\n        'class': 'mce-drag-container',\r\n        'data-mce-bogus': 'all',\r\n        'unselectable': 'on',\r\n        'contenteditable': 'false'\r\n      });\r\n      dom.setStyles(ghostElm, {\r\n        position: 'absolute',\r\n        opacity: 0.5,\r\n        overflow: 'hidden',\r\n        border: 0,\r\n        padding: 0,\r\n        margin: 0,\r\n        width: width,\r\n        height: height\r\n      });\r\n      dom.setStyles(clonedElm, {\r\n        margin: 0,\r\n        boxSizing: 'border-box'\r\n      });\r\n      ghostElm.appendChild(clonedElm);\r\n      return ghostElm;\r\n    };\r\n    var appendGhostToBody = function (ghostElm, bodyElm) {\r\n      if (ghostElm.parentNode !== bodyElm) {\r\n        bodyElm.appendChild(ghostElm);\r\n      }\r\n    };\r\n    var moveGhost = function (ghostElm, position, width, height, maxX, maxY) {\r\n      var overflowX = 0, overflowY = 0;\r\n      ghostElm.style.left = position.pageX + 'px';\r\n      ghostElm.style.top = position.pageY + 'px';\r\n      if (position.pageX + width > maxX) {\r\n        overflowX = position.pageX + width - maxX;\r\n      }\r\n      if (position.pageY + height > maxY) {\r\n        overflowY = position.pageY + height - maxY;\r\n      }\r\n      ghostElm.style.width = width - overflowX + 'px';\r\n      ghostElm.style.height = height - overflowY + 'px';\r\n    };\r\n    var removeElement = function (elm) {\r\n      if (elm && elm.parentNode) {\r\n        elm.parentNode.removeChild(elm);\r\n      }\r\n    };\r\n    var isLeftMouseButtonPressed = function (e) {\r\n      return e.button === 0;\r\n    };\r\n    var applyRelPos = function (state, position) {\r\n      return {\r\n        pageX: position.pageX - state.relX,\r\n        pageY: position.pageY + 5\r\n      };\r\n    };\r\n    var start = function (state, editor) {\r\n      return function (e) {\r\n        if (isLeftMouseButtonPressed(e)) {\r\n          var ceElm = find$3(editor.dom.getParents(e.target), or(isContentEditableFalse$1, isContentEditableTrue$1)).getOr(null);\r\n          if (isDraggable(editor.getBody(), ceElm)) {\r\n            var elmPos = editor.dom.getPos(ceElm);\r\n            var bodyElm = editor.getBody();\r\n            var docElm = editor.getDoc().documentElement;\r\n            state.set({\r\n              element: ceElm,\r\n              dragging: false,\r\n              screenX: e.screenX,\r\n              screenY: e.screenY,\r\n              maxX: (editor.inline ? bodyElm.scrollWidth : docElm.offsetWidth) - 2,\r\n              maxY: (editor.inline ? bodyElm.scrollHeight : docElm.offsetHeight) - 2,\r\n              relX: e.pageX - elmPos.x,\r\n              relY: e.pageY - elmPos.y,\r\n              width: ceElm.offsetWidth,\r\n              height: ceElm.offsetHeight,\r\n              ghost: createGhost(editor, ceElm, ceElm.offsetWidth, ceElm.offsetHeight)\r\n            });\r\n          }\r\n        }\r\n      };\r\n    };\r\n    var move = function (state, editor) {\r\n      var throttledPlaceCaretAt = Delay.throttle(function (clientX, clientY) {\r\n        editor._selectionOverrides.hideFakeCaret();\r\n        editor.selection.placeCaretAt(clientX, clientY);\r\n      }, 0);\r\n      editor.on('remove', throttledPlaceCaretAt.stop);\r\n      return function (e) {\r\n        return state.on(function (state) {\r\n          var movement = Math.max(Math.abs(e.screenX - state.screenX), Math.abs(e.screenY - state.screenY));\r\n          if (!state.dragging && movement > 10) {\r\n            var args = editor.fire('dragstart', { target: state.element });\r\n            if (args.isDefaultPrevented()) {\r\n              return;\r\n            }\r\n            state.dragging = true;\r\n            editor.focus();\r\n          }\r\n          if (state.dragging) {\r\n            var targetPos = applyRelPos(state, calc(editor, e));\r\n            appendGhostToBody(state.ghost, editor.getBody());\r\n            moveGhost(state.ghost, targetPos, state.width, state.height, state.maxX, state.maxY);\r\n            throttledPlaceCaretAt(e.clientX, e.clientY);\r\n          }\r\n        });\r\n      };\r\n    };\r\n    var getRawTarget = function (selection) {\r\n      var rng = selection.getSel().getRangeAt(0);\r\n      var startContainer = rng.startContainer;\r\n      return startContainer.nodeType === 3 ? startContainer.parentNode : startContainer;\r\n    };\r\n    var drop = function (state, editor) {\r\n      return function (e) {\r\n        state.on(function (state) {\r\n          if (state.dragging) {\r\n            if (isValidDropTarget(editor, getRawTarget(editor.selection), state.element)) {\r\n              var targetClone_1 = cloneElement(state.element);\r\n              var args = editor.fire('drop', {\r\n                clientX: e.clientX,\r\n                clientY: e.clientY\r\n              });\r\n              if (!args.isDefaultPrevented()) {\r\n                editor.undoManager.transact(function () {\r\n                  removeElement(state.element);\r\n                  editor.insertContent(editor.dom.getOuterHTML(targetClone_1));\r\n                  editor._selectionOverrides.hideFakeCaret();\r\n                });\r\n              }\r\n            }\r\n            editor.fire('dragend');\r\n          }\r\n        });\r\n        removeDragState(state);\r\n      };\r\n    };\r\n    var stop = function (state, editor) {\r\n      return function () {\r\n        state.on(function (state) {\r\n          if (state.dragging) {\r\n            editor.fire('dragend');\r\n          }\r\n        });\r\n        removeDragState(state);\r\n      };\r\n    };\r\n    var removeDragState = function (state) {\r\n      state.on(function (state) {\r\n        removeElement(state.ghost);\r\n      });\r\n      state.clear();\r\n    };\r\n    var bindFakeDragEvents = function (editor) {\r\n      var state = value();\r\n      var pageDom = DOMUtils.DOM;\r\n      var rootDocument = document;\r\n      var dragStartHandler = start(state, editor);\r\n      var dragHandler = move(state, editor);\r\n      var dropHandler = drop(state, editor);\r\n      var dragEndHandler = stop(state, editor);\r\n      editor.on('mousedown', dragStartHandler);\r\n      editor.on('mousemove', dragHandler);\r\n      editor.on('mouseup', dropHandler);\r\n      pageDom.bind(rootDocument, 'mousemove', dragHandler);\r\n      pageDom.bind(rootDocument, 'mouseup', dragEndHandler);\r\n      editor.on('remove', function () {\r\n        pageDom.unbind(rootDocument, 'mousemove', dragHandler);\r\n        pageDom.unbind(rootDocument, 'mouseup', dragEndHandler);\r\n      });\r\n      editor.on('keydown', function (e) {\r\n        if (e.keyCode === VK.ESC) {\r\n          dragEndHandler();\r\n        }\r\n      });\r\n    };\r\n    var blockIeDrop = function (editor) {\r\n      editor.on('drop', function (e) {\r\n        var realTarget = typeof e.clientX !== 'undefined' ? editor.getDoc().elementFromPoint(e.clientX, e.clientY) : null;\r\n        if (isContentEditableFalse$1(realTarget) || editor.dom.getContentEditableParent(realTarget) === 'false') {\r\n          e.preventDefault();\r\n        }\r\n      });\r\n    };\r\n    var blockUnsupportedFileDrop = function (editor) {\r\n      var preventFileDrop = function (e) {\r\n        if (!e.isDefaultPrevented()) {\r\n          var dataTransfer = e.dataTransfer;\r\n          if (dataTransfer && (contains$3(dataTransfer.types, 'Files') || dataTransfer.files.length > 0)) {\r\n            e.preventDefault();\r\n            if (e.type === 'drop') {\r\n              displayError(editor, 'Dropped file type is not supported');\r\n            }\r\n          }\r\n        }\r\n      };\r\n      var preventFileDropIfUIElement = function (e) {\r\n        if (isUIElement(editor, e.target)) {\r\n          preventFileDrop(e);\r\n        }\r\n      };\r\n      var setup = function () {\r\n        var pageDom = DOMUtils.DOM;\r\n        var dom = editor.dom;\r\n        var doc = document;\r\n        var editorRoot = editor.inline ? editor.getBody() : editor.getDoc();\r\n        var eventNames = [\r\n          'drop',\r\n          'dragover'\r\n        ];\r\n        each$k(eventNames, function (name) {\r\n          pageDom.bind(doc, name, preventFileDropIfUIElement);\r\n          dom.bind(editorRoot, name, preventFileDrop);\r\n        });\r\n        editor.on('remove', function () {\r\n          each$k(eventNames, function (name) {\r\n            pageDom.unbind(doc, name, preventFileDropIfUIElement);\r\n            dom.unbind(editorRoot, name, preventFileDrop);\r\n          });\r\n        });\r\n      };\r\n      editor.on('init', function () {\r\n        Delay.setEditorTimeout(editor, setup, 0);\r\n      });\r\n    };\r\n    var init$2 = function (editor) {\r\n      bindFakeDragEvents(editor);\r\n      blockIeDrop(editor);\r\n      if (shouldBlockUnsupportedDrop(editor)) {\r\n        blockUnsupportedFileDrop(editor);\r\n      }\r\n    };\r\n\r\n    var setup$1 = function (editor) {\r\n      var renderFocusCaret = first(function () {\r\n        if (!editor.removed && editor.getBody().contains(document.activeElement)) {\r\n          var rng = editor.selection.getRng();\r\n          if (rng.collapsed) {\r\n            var caretRange = renderRangeCaret(editor, rng, false);\r\n            editor.selection.setRng(caretRange);\r\n          }\r\n        }\r\n      }, 0);\r\n      editor.on('focus', function () {\r\n        renderFocusCaret.throttle();\r\n      });\r\n      editor.on('blur', function () {\r\n        renderFocusCaret.cancel();\r\n      });\r\n    };\r\n\r\n    var setup = function (editor) {\r\n      editor.on('init', function () {\r\n        editor.on('focusin', function (e) {\r\n          var target = e.target;\r\n          if (isMedia$2(target)) {\r\n            var ceRoot = getContentEditableRoot$1(editor.getBody(), target);\r\n            var node = isContentEditableFalse$b(ceRoot) ? ceRoot : target;\r\n            if (editor.selection.getNode() !== node) {\r\n              selectNode(editor, node).each(function (rng) {\r\n                return editor.selection.setRng(rng);\r\n              });\r\n            }\r\n          }\r\n        });\r\n      });\r\n    };\r\n\r\n    var isContentEditableTrue = isContentEditableTrue$4;\r\n    var isContentEditableFalse = isContentEditableFalse$b;\r\n    var getContentEditableRoot = function (editor, node) {\r\n      return getContentEditableRoot$1(editor.getBody(), node);\r\n    };\r\n    var SelectionOverrides = function (editor) {\r\n      var selection = editor.selection, dom = editor.dom;\r\n      var isBlock = dom.isBlock;\r\n      var rootNode = editor.getBody();\r\n      var fakeCaret = FakeCaret(editor, rootNode, isBlock, function () {\r\n        return hasFocus(editor);\r\n      });\r\n      var realSelectionId = 'sel-' + dom.uniqueId();\r\n      var elementSelectionAttr = 'data-mce-selected';\r\n      var selectedElement;\r\n      var isFakeSelectionElement = function (node) {\r\n        return dom.hasClass(node, 'mce-offscreen-selection');\r\n      };\r\n      var isFakeSelectionTargetElement = function (node) {\r\n        return node !== rootNode && (isContentEditableFalse(node) || isMedia$2(node)) && dom.isChildOf(node, rootNode);\r\n      };\r\n      var isNearFakeSelectionElement = function (pos) {\r\n        return isBeforeContentEditableFalse(pos) || isAfterContentEditableFalse(pos) || isBeforeMedia(pos) || isAfterMedia(pos);\r\n      };\r\n      var getRealSelectionElement = function () {\r\n        var container = dom.get(realSelectionId);\r\n        return container ? container.getElementsByTagName('*')[0] : container;\r\n      };\r\n      var setRange = function (range) {\r\n        if (range) {\r\n          selection.setRng(range);\r\n        }\r\n      };\r\n      var getRange = selection.getRng;\r\n      var showCaret = function (direction, node, before, scrollIntoView) {\r\n        if (scrollIntoView === void 0) {\r\n          scrollIntoView = true;\r\n        }\r\n        var e = editor.fire('ShowCaret', {\r\n          target: node,\r\n          direction: direction,\r\n          before: before\r\n        });\r\n        if (e.isDefaultPrevented()) {\r\n          return null;\r\n        }\r\n        if (scrollIntoView) {\r\n          selection.scrollIntoView(node, direction === -1);\r\n        }\r\n        return fakeCaret.show(before, node);\r\n      };\r\n      var showBlockCaretContainer = function (blockCaretContainer) {\r\n        if (blockCaretContainer.hasAttribute('data-mce-caret')) {\r\n          showCaretContainerBlock(blockCaretContainer);\r\n          setRange(getRange());\r\n          selection.scrollIntoView(blockCaretContainer);\r\n        }\r\n      };\r\n      var registerEvents = function () {\r\n        editor.on('mouseup', function (e) {\r\n          var range = getRange();\r\n          if (range.collapsed && isXYInContentArea(editor, e.clientX, e.clientY)) {\r\n            renderCaretAtRange(editor, range, false).each(setRange);\r\n          }\r\n        });\r\n        editor.on('click', function (e) {\r\n          var contentEditableRoot = getContentEditableRoot(editor, e.target);\r\n          if (contentEditableRoot) {\r\n            if (isContentEditableFalse(contentEditableRoot)) {\r\n              e.preventDefault();\r\n              editor.focus();\r\n            }\r\n            if (isContentEditableTrue(contentEditableRoot)) {\r\n              if (dom.isChildOf(contentEditableRoot, selection.getNode())) {\r\n                removeElementSelection();\r\n              }\r\n            }\r\n          }\r\n        });\r\n        editor.on('blur NewBlock', removeElementSelection);\r\n        editor.on('ResizeWindow FullscreenStateChanged', fakeCaret.reposition);\r\n        var hasNormalCaretPosition = function (elm) {\r\n          var start = elm.firstChild;\r\n          if (isNullable(start)) {\r\n            return false;\r\n          }\r\n          var startPos = CaretPosition.before(start);\r\n          if (isBr$5(startPos.getNode()) && elm.childNodes.length === 1) {\r\n            return !isNearFakeSelectionElement(startPos);\r\n          } else {\r\n            var caretWalker = CaretWalker(elm);\r\n            var newPos = caretWalker.next(startPos);\r\n            return newPos && !isNearFakeSelectionElement(newPos);\r\n          }\r\n        };\r\n        var isInSameBlock = function (node1, node2) {\r\n          var block1 = dom.getParent(node1, isBlock);\r\n          var block2 = dom.getParent(node2, isBlock);\r\n          return block1 === block2;\r\n        };\r\n        var hasBetterMouseTarget = function (targetNode, caretNode) {\r\n          var targetBlock = dom.getParent(targetNode, isBlock);\r\n          var caretBlock = dom.getParent(caretNode, isBlock);\r\n          if (isNullable(targetBlock)) {\r\n            return false;\r\n          }\r\n          if (targetNode !== caretBlock && dom.isChildOf(targetBlock, caretBlock) && isContentEditableFalse(getContentEditableRoot(editor, targetBlock)) === false) {\r\n            return true;\r\n          }\r\n          return !dom.isChildOf(caretBlock, targetBlock) && !isInSameBlock(targetBlock, caretBlock) && hasNormalCaretPosition(targetBlock);\r\n        };\r\n        editor.on('tap', function (e) {\r\n          var targetElm = e.target;\r\n          var contentEditableRoot = getContentEditableRoot(editor, targetElm);\r\n          if (isContentEditableFalse(contentEditableRoot)) {\r\n            e.preventDefault();\r\n            selectNode(editor, contentEditableRoot).each(setElementSelection);\r\n          } else if (isFakeSelectionTargetElement(targetElm)) {\r\n            selectNode(editor, targetElm).each(setElementSelection);\r\n          }\r\n        }, true);\r\n        editor.on('mousedown', function (e) {\r\n          var targetElm = e.target;\r\n          if (targetElm !== rootNode && targetElm.nodeName !== 'HTML' && !dom.isChildOf(targetElm, rootNode)) {\r\n            return;\r\n          }\r\n          if (isXYInContentArea(editor, e.clientX, e.clientY) === false) {\r\n            return;\r\n          }\r\n          var contentEditableRoot = getContentEditableRoot(editor, targetElm);\r\n          if (contentEditableRoot) {\r\n            if (isContentEditableFalse(contentEditableRoot)) {\r\n              e.preventDefault();\r\n              selectNode(editor, contentEditableRoot).each(setElementSelection);\r\n            } else {\r\n              removeElementSelection();\r\n              if (!(isContentEditableTrue(contentEditableRoot) && e.shiftKey) && !isXYWithinRange(e.clientX, e.clientY, selection.getRng())) {\r\n                hideFakeCaret();\r\n                selection.placeCaretAt(e.clientX, e.clientY);\r\n              }\r\n            }\r\n          } else if (isFakeSelectionTargetElement(targetElm)) {\r\n            selectNode(editor, targetElm).each(setElementSelection);\r\n          } else if (isFakeCaretTarget(targetElm) === false) {\r\n            removeElementSelection();\r\n            hideFakeCaret();\r\n            var fakeCaretInfo = closestFakeCaret(rootNode, e.clientX, e.clientY);\r\n            if (fakeCaretInfo) {\r\n              if (!hasBetterMouseTarget(targetElm, fakeCaretInfo.node)) {\r\n                e.preventDefault();\r\n                var range = showCaret(1, fakeCaretInfo.node, fakeCaretInfo.before, false);\r\n                setRange(range);\r\n                editor.getBody().focus();\r\n              }\r\n            }\r\n          }\r\n        });\r\n        editor.on('keypress', function (e) {\r\n          if (VK.modifierPressed(e)) {\r\n            return;\r\n          }\r\n          if (isContentEditableFalse(selection.getNode())) {\r\n            e.preventDefault();\r\n          }\r\n        });\r\n        editor.on('GetSelectionRange', function (e) {\r\n          var rng = e.range;\r\n          if (selectedElement) {\r\n            if (!selectedElement.parentNode) {\r\n              selectedElement = null;\r\n              return;\r\n            }\r\n            rng = rng.cloneRange();\r\n            rng.selectNode(selectedElement);\r\n            e.range = rng;\r\n          }\r\n        });\r\n        editor.on('SetSelectionRange', function (e) {\r\n          e.range = normalizeShortEndedElementSelection(e.range);\r\n          var rng = setElementSelection(e.range, e.forward);\r\n          if (rng) {\r\n            e.range = rng;\r\n          }\r\n        });\r\n        var isPasteBin = function (node) {\r\n          return node.id === 'mcepastebin';\r\n        };\r\n        editor.on('AfterSetSelectionRange', function (e) {\r\n          var rng = e.range;\r\n          var parentNode = rng.startContainer.parentNode;\r\n          if (!isRangeInCaretContainer(rng) && !isPasteBin(parentNode)) {\r\n            hideFakeCaret();\r\n          }\r\n          if (!isFakeSelectionElement(parentNode)) {\r\n            removeElementSelection();\r\n          }\r\n        });\r\n        editor.on('copy', function (e) {\r\n          var clipboardData = e.clipboardData;\r\n          if (!e.isDefaultPrevented() && e.clipboardData && !Env.ie) {\r\n            var realSelectionElement = getRealSelectionElement();\r\n            if (realSelectionElement) {\r\n              e.preventDefault();\r\n              clipboardData.clearData();\r\n              clipboardData.setData('text/html', realSelectionElement.outerHTML);\r\n              clipboardData.setData('text/plain', realSelectionElement.outerText || realSelectionElement.innerText);\r\n            }\r\n          }\r\n        });\r\n        init$2(editor);\r\n        setup$1(editor);\r\n        setup(editor);\r\n      };\r\n      var isWithinCaretContainer = function (node) {\r\n        return isCaretContainer$2(node) || startsWithCaretContainer$1(node) || endsWithCaretContainer$1(node);\r\n      };\r\n      var isRangeInCaretContainer = function (rng) {\r\n        return isWithinCaretContainer(rng.startContainer) || isWithinCaretContainer(rng.endContainer);\r\n      };\r\n      var normalizeShortEndedElementSelection = function (rng) {\r\n        var shortEndedElements = editor.schema.getShortEndedElements();\r\n        var newRng = dom.createRng();\r\n        var startContainer = rng.startContainer;\r\n        var startOffset = rng.startOffset;\r\n        var endContainer = rng.endContainer;\r\n        var endOffset = rng.endOffset;\r\n        if (has$2(shortEndedElements, startContainer.nodeName.toLowerCase())) {\r\n          if (startOffset === 0) {\r\n            newRng.setStartBefore(startContainer);\r\n          } else {\r\n            newRng.setStartAfter(startContainer);\r\n          }\r\n        } else {\r\n          newRng.setStart(startContainer, startOffset);\r\n        }\r\n        if (has$2(shortEndedElements, endContainer.nodeName.toLowerCase())) {\r\n          if (endOffset === 0) {\r\n            newRng.setEndBefore(endContainer);\r\n          } else {\r\n            newRng.setEndAfter(endContainer);\r\n          }\r\n        } else {\r\n          newRng.setEnd(endContainer, endOffset);\r\n        }\r\n        return newRng;\r\n      };\r\n      var setupOffscreenSelection = function (node, targetClone, origTargetClone) {\r\n        var $ = editor.$;\r\n        var $realSelectionContainer = descendant(SugarElement.fromDom(editor.getBody()), '#' + realSelectionId).fold(function () {\r\n          return $([]);\r\n        }, function (elm) {\r\n          return $([elm.dom]);\r\n        });\r\n        if ($realSelectionContainer.length === 0) {\r\n          $realSelectionContainer = $('<div data-mce-bogus=\"all\" class=\"mce-offscreen-selection\"></div>').attr('id', realSelectionId);\r\n          $realSelectionContainer.appendTo(editor.getBody());\r\n        }\r\n        var newRange = dom.createRng();\r\n        if (targetClone === origTargetClone && Env.ie) {\r\n          $realSelectionContainer.empty().append('<p style=\"font-size: 0\" data-mce-bogus=\"all\">\\xA0</p>').append(targetClone);\r\n          newRange.setStartAfter($realSelectionContainer[0].firstChild.firstChild);\r\n          newRange.setEndAfter(targetClone);\r\n        } else {\r\n          $realSelectionContainer.empty().append(nbsp).append(targetClone).append(nbsp);\r\n          newRange.setStart($realSelectionContainer[0].firstChild, 1);\r\n          newRange.setEnd($realSelectionContainer[0].lastChild, 0);\r\n        }\r\n        $realSelectionContainer.css({ top: dom.getPos(node, editor.getBody()).y });\r\n        $realSelectionContainer[0].focus();\r\n        var sel = selection.getSel();\r\n        sel.removeAllRanges();\r\n        sel.addRange(newRange);\r\n        return newRange;\r\n      };\r\n      var selectElement = function (elm) {\r\n        var targetClone = elm.cloneNode(true);\r\n        var e = editor.fire('ObjectSelected', {\r\n          target: elm,\r\n          targetClone: targetClone\r\n        });\r\n        if (e.isDefaultPrevented()) {\r\n          return null;\r\n        }\r\n        var range = setupOffscreenSelection(elm, e.targetClone, targetClone);\r\n        var nodeElm = SugarElement.fromDom(elm);\r\n        each$k(descendants(SugarElement.fromDom(editor.getBody()), '*[data-mce-selected]'), function (elm) {\r\n          if (!eq(nodeElm, elm)) {\r\n            remove$6(elm, elementSelectionAttr);\r\n          }\r\n        });\r\n        if (!dom.getAttrib(elm, elementSelectionAttr)) {\r\n          elm.setAttribute(elementSelectionAttr, '1');\r\n        }\r\n        selectedElement = elm;\r\n        hideFakeCaret();\r\n        return range;\r\n      };\r\n      var setElementSelection = function (range, forward) {\r\n        if (!range) {\r\n          return null;\r\n        }\r\n        if (range.collapsed) {\r\n          if (!isRangeInCaretContainer(range)) {\r\n            var dir = forward ? 1 : -1;\r\n            var caretPosition = getNormalizedRangeEndPoint(dir, rootNode, range);\r\n            var beforeNode = caretPosition.getNode(!forward);\r\n            if (isFakeCaretTarget(beforeNode)) {\r\n              return showCaret(dir, beforeNode, forward ? !caretPosition.isAtEnd() : false, false);\r\n            }\r\n            var afterNode = caretPosition.getNode(forward);\r\n            if (isFakeCaretTarget(afterNode)) {\r\n              return showCaret(dir, afterNode, forward ? false : !caretPosition.isAtEnd(), false);\r\n            }\r\n          }\r\n          return null;\r\n        }\r\n        var startContainer = range.startContainer;\r\n        var startOffset = range.startOffset;\r\n        var endOffset = range.endOffset;\r\n        if (startContainer.nodeType === 3 && startOffset === 0 && isContentEditableFalse(startContainer.parentNode)) {\r\n          startContainer = startContainer.parentNode;\r\n          startOffset = dom.nodeIndex(startContainer);\r\n          startContainer = startContainer.parentNode;\r\n        }\r\n        if (startContainer.nodeType !== 1) {\r\n          return null;\r\n        }\r\n        if (endOffset === startOffset + 1 && startContainer === range.endContainer) {\r\n          var node = startContainer.childNodes[startOffset];\r\n          if (isFakeSelectionTargetElement(node)) {\r\n            return selectElement(node);\r\n          }\r\n        }\r\n        return null;\r\n      };\r\n      var removeElementSelection = function () {\r\n        if (selectedElement) {\r\n          selectedElement.removeAttribute(elementSelectionAttr);\r\n        }\r\n        descendant(SugarElement.fromDom(editor.getBody()), '#' + realSelectionId).each(remove$7);\r\n        selectedElement = null;\r\n      };\r\n      var destroy = function () {\r\n        fakeCaret.destroy();\r\n        selectedElement = null;\r\n      };\r\n      var hideFakeCaret = function () {\r\n        fakeCaret.hide();\r\n      };\r\n      if (Env.ceFalse && !isRtc(editor)) {\r\n        registerEvents();\r\n      }\r\n      return {\r\n        showCaret: showCaret,\r\n        showBlockCaretContainer: showBlockCaretContainer,\r\n        hideFakeCaret: hideFakeCaret,\r\n        destroy: destroy\r\n      };\r\n    };\r\n\r\n    var Quirks = function (editor) {\r\n      var each = Tools.each;\r\n      var BACKSPACE = VK.BACKSPACE, DELETE = VK.DELETE, dom = editor.dom, selection = editor.selection, parser = editor.parser;\r\n      var isGecko = Env.gecko, isIE = Env.ie, isWebKit = Env.webkit;\r\n      var mceInternalUrlPrefix = 'data:text/mce-internal,';\r\n      var mceInternalDataType = isIE ? 'Text' : 'URL';\r\n      var setEditorCommandState = function (cmd, state) {\r\n        try {\r\n          editor.getDoc().execCommand(cmd, false, state);\r\n        } catch (ex) {\r\n        }\r\n      };\r\n      var isDefaultPrevented = function (e) {\r\n        return e.isDefaultPrevented();\r\n      };\r\n      var setMceInternalContent = function (e) {\r\n        var selectionHtml, internalContent;\r\n        if (e.dataTransfer) {\r\n          if (editor.selection.isCollapsed() && e.target.tagName === 'IMG') {\r\n            selection.select(e.target);\r\n          }\r\n          selectionHtml = editor.selection.getContent();\r\n          if (selectionHtml.length > 0) {\r\n            internalContent = mceInternalUrlPrefix + escape(editor.id) + ',' + escape(selectionHtml);\r\n            e.dataTransfer.setData(mceInternalDataType, internalContent);\r\n          }\r\n        }\r\n      };\r\n      var getMceInternalContent = function (e) {\r\n        var internalContent;\r\n        if (e.dataTransfer) {\r\n          internalContent = e.dataTransfer.getData(mceInternalDataType);\r\n          if (internalContent && internalContent.indexOf(mceInternalUrlPrefix) >= 0) {\r\n            internalContent = internalContent.substr(mceInternalUrlPrefix.length).split(',');\r\n            return {\r\n              id: unescape(internalContent[0]),\r\n              html: unescape(internalContent[1])\r\n            };\r\n          }\r\n        }\r\n        return null;\r\n      };\r\n      var insertClipboardContents = function (content, internal) {\r\n        if (editor.queryCommandSupported('mceInsertClipboardContent')) {\r\n          editor.execCommand('mceInsertClipboardContent', false, {\r\n            content: content,\r\n            internal: internal\r\n          });\r\n        } else {\r\n          editor.execCommand('mceInsertContent', false, content);\r\n        }\r\n      };\r\n      var emptyEditorWhenDeleting = function () {\r\n        var serializeRng = function (rng) {\r\n          var body = dom.create('body');\r\n          var contents = rng.cloneContents();\r\n          body.appendChild(contents);\r\n          return selection.serializer.serialize(body, { format: 'html' });\r\n        };\r\n        var allContentsSelected = function (rng) {\r\n          var selection = serializeRng(rng);\r\n          var allRng = dom.createRng();\r\n          allRng.selectNode(editor.getBody());\r\n          var allSelection = serializeRng(allRng);\r\n          return selection === allSelection;\r\n        };\r\n        editor.on('keydown', function (e) {\r\n          var keyCode = e.keyCode;\r\n          var isCollapsed, body;\r\n          if (!isDefaultPrevented(e) && (keyCode === DELETE || keyCode === BACKSPACE)) {\r\n            isCollapsed = editor.selection.isCollapsed();\r\n            body = editor.getBody();\r\n            if (isCollapsed && !dom.isEmpty(body)) {\r\n              return;\r\n            }\r\n            if (!isCollapsed && !allContentsSelected(editor.selection.getRng())) {\r\n              return;\r\n            }\r\n            e.preventDefault();\r\n            editor.setContent('');\r\n            if (body.firstChild && dom.isBlock(body.firstChild)) {\r\n              editor.selection.setCursorLocation(body.firstChild, 0);\r\n            } else {\r\n              editor.selection.setCursorLocation(body, 0);\r\n            }\r\n            editor.nodeChanged();\r\n          }\r\n        });\r\n      };\r\n      var selectAll = function () {\r\n        editor.shortcuts.add('meta+a', null, 'SelectAll');\r\n      };\r\n      var documentElementEditingFocus = function () {\r\n        if (!editor.inline) {\r\n          dom.bind(editor.getDoc(), 'mousedown mouseup', function (e) {\r\n            var rng;\r\n            if (e.target === editor.getDoc().documentElement) {\r\n              rng = selection.getRng();\r\n              editor.getBody().focus();\r\n              if (e.type === 'mousedown') {\r\n                if (isCaretContainer$2(rng.startContainer)) {\r\n                  return;\r\n                }\r\n                selection.placeCaretAt(e.clientX, e.clientY);\r\n              } else {\r\n                selection.setRng(rng);\r\n              }\r\n            }\r\n          });\r\n        }\r\n      };\r\n      var removeHrOnBackspace = function () {\r\n        editor.on('keydown', function (e) {\r\n          if (!isDefaultPrevented(e) && e.keyCode === BACKSPACE) {\r\n            if (!editor.getBody().getElementsByTagName('hr').length) {\r\n              return;\r\n            }\r\n            if (selection.isCollapsed() && selection.getRng().startOffset === 0) {\r\n              var node = selection.getNode();\r\n              var previousSibling = node.previousSibling;\r\n              if (node.nodeName === 'HR') {\r\n                dom.remove(node);\r\n                e.preventDefault();\r\n                return;\r\n              }\r\n              if (previousSibling && previousSibling.nodeName && previousSibling.nodeName.toLowerCase() === 'hr') {\r\n                dom.remove(previousSibling);\r\n                e.preventDefault();\r\n              }\r\n            }\r\n          }\r\n        });\r\n      };\r\n      var focusBody = function () {\r\n        if (!Range.prototype.getClientRects) {\r\n          editor.on('mousedown', function (e) {\r\n            if (!isDefaultPrevented(e) && e.target.nodeName === 'HTML') {\r\n              var body_1 = editor.getBody();\r\n              body_1.blur();\r\n              Delay.setEditorTimeout(editor, function () {\r\n                body_1.focus();\r\n              });\r\n            }\r\n          });\r\n        }\r\n      };\r\n      var selectControlElements = function () {\r\n        editor.on('click', function (e) {\r\n          var target = e.target;\r\n          if (/^(IMG|HR)$/.test(target.nodeName) && dom.getContentEditableParent(target) !== 'false') {\r\n            e.preventDefault();\r\n            editor.selection.select(target);\r\n            editor.nodeChanged();\r\n          }\r\n          if (target.nodeName === 'A' && dom.hasClass(target, 'mce-item-anchor')) {\r\n            e.preventDefault();\r\n            selection.select(target);\r\n          }\r\n        });\r\n      };\r\n      var removeStylesWhenDeletingAcrossBlockElements = function () {\r\n        var getAttributeApplyFunction = function () {\r\n          var template = dom.getAttribs(selection.getStart().cloneNode(false));\r\n          return function () {\r\n            var target = selection.getStart();\r\n            if (target !== editor.getBody()) {\r\n              dom.setAttrib(target, 'style', null);\r\n              each(template, function (attr) {\r\n                target.setAttributeNode(attr.cloneNode(true));\r\n              });\r\n            }\r\n          };\r\n        };\r\n        var isSelectionAcrossElements = function () {\r\n          return !selection.isCollapsed() && dom.getParent(selection.getStart(), dom.isBlock) !== dom.getParent(selection.getEnd(), dom.isBlock);\r\n        };\r\n        editor.on('keypress', function (e) {\r\n          var applyAttributes;\r\n          if (!isDefaultPrevented(e) && (e.keyCode === 8 || e.keyCode === 46) && isSelectionAcrossElements()) {\r\n            applyAttributes = getAttributeApplyFunction();\r\n            editor.getDoc().execCommand('delete', false, null);\r\n            applyAttributes();\r\n            e.preventDefault();\r\n            return false;\r\n          }\r\n        });\r\n        dom.bind(editor.getDoc(), 'cut', function (e) {\r\n          var applyAttributes;\r\n          if (!isDefaultPrevented(e) && isSelectionAcrossElements()) {\r\n            applyAttributes = getAttributeApplyFunction();\r\n            Delay.setEditorTimeout(editor, function () {\r\n              applyAttributes();\r\n            });\r\n          }\r\n        });\r\n      };\r\n      var disableBackspaceIntoATable = function () {\r\n        editor.on('keydown', function (e) {\r\n          if (!isDefaultPrevented(e) && e.keyCode === BACKSPACE) {\r\n            if (selection.isCollapsed() && selection.getRng().startOffset === 0) {\r\n              var previousSibling = selection.getNode().previousSibling;\r\n              if (previousSibling && previousSibling.nodeName && previousSibling.nodeName.toLowerCase() === 'table') {\r\n                e.preventDefault();\r\n                return false;\r\n              }\r\n            }\r\n          }\r\n        });\r\n      };\r\n      var removeBlockQuoteOnBackSpace = function () {\r\n        editor.on('keydown', function (e) {\r\n          var rng, parent;\r\n          if (isDefaultPrevented(e) || e.keyCode !== VK.BACKSPACE) {\r\n            return;\r\n          }\r\n          rng = selection.getRng();\r\n          var container = rng.startContainer;\r\n          var offset = rng.startOffset;\r\n          var root = dom.getRoot();\r\n          parent = container;\r\n          if (!rng.collapsed || offset !== 0) {\r\n            return;\r\n          }\r\n          while (parent && parent.parentNode && parent.parentNode.firstChild === parent && parent.parentNode !== root) {\r\n            parent = parent.parentNode;\r\n          }\r\n          if (parent.tagName === 'BLOCKQUOTE') {\r\n            editor.formatter.toggle('blockquote', null, parent);\r\n            rng = dom.createRng();\r\n            rng.setStart(container, 0);\r\n            rng.setEnd(container, 0);\r\n            selection.setRng(rng);\r\n          }\r\n        });\r\n      };\r\n      var setGeckoEditingOptions = function () {\r\n        var setOpts = function () {\r\n          setEditorCommandState('StyleWithCSS', false);\r\n          setEditorCommandState('enableInlineTableEditing', false);\r\n          if (!getObjectResizing(editor)) {\r\n            setEditorCommandState('enableObjectResizing', false);\r\n          }\r\n        };\r\n        if (!isReadOnly$1(editor)) {\r\n          editor.on('BeforeExecCommand mousedown', setOpts);\r\n        }\r\n      };\r\n      var addBrAfterLastLinks = function () {\r\n        var fixLinks = function () {\r\n          each(dom.select('a'), function (node) {\r\n            var parentNode = node.parentNode;\r\n            var root = dom.getRoot();\r\n            if (parentNode.lastChild === node) {\r\n              while (parentNode && !dom.isBlock(parentNode)) {\r\n                if (parentNode.parentNode.lastChild !== parentNode || parentNode === root) {\r\n                  return;\r\n                }\r\n                parentNode = parentNode.parentNode;\r\n              }\r\n              dom.add(parentNode, 'br', { 'data-mce-bogus': 1 });\r\n            }\r\n          });\r\n        };\r\n        editor.on('SetContent ExecCommand', function (e) {\r\n          if (e.type === 'setcontent' || e.command === 'mceInsertLink') {\r\n            fixLinks();\r\n          }\r\n        });\r\n      };\r\n      var setDefaultBlockType = function () {\r\n        if (getForcedRootBlock(editor)) {\r\n          editor.on('init', function () {\r\n            setEditorCommandState('DefaultParagraphSeparator', getForcedRootBlock(editor));\r\n          });\r\n        }\r\n      };\r\n      var normalizeSelection = function () {\r\n        editor.on('keyup focusin mouseup', function (e) {\r\n          if (!VK.modifierPressed(e)) {\r\n            selection.normalize();\r\n          }\r\n        }, true);\r\n      };\r\n      var showBrokenImageIcon = function () {\r\n        editor.contentStyles.push('img:-moz-broken {' + '-moz-force-broken-image-icon:1;' + 'min-width:24px;' + 'min-height:24px' + '}');\r\n      };\r\n      var restoreFocusOnKeyDown = function () {\r\n        if (!editor.inline) {\r\n          editor.on('keydown', function () {\r\n            if (document.activeElement === document.body) {\r\n              editor.getWin().focus();\r\n            }\r\n          });\r\n        }\r\n      };\r\n      var bodyHeight = function () {\r\n        if (!editor.inline) {\r\n          editor.contentStyles.push('body {min-height: 150px}');\r\n          editor.on('click', function (e) {\r\n            var rng;\r\n            if (e.target.nodeName === 'HTML') {\r\n              if (Env.ie > 11) {\r\n                editor.getBody().focus();\r\n                return;\r\n              }\r\n              rng = editor.selection.getRng();\r\n              editor.getBody().focus();\r\n              editor.selection.setRng(rng);\r\n              editor.selection.normalize();\r\n              editor.nodeChanged();\r\n            }\r\n          });\r\n        }\r\n      };\r\n      var blockCmdArrowNavigation = function () {\r\n        if (Env.mac) {\r\n          editor.on('keydown', function (e) {\r\n            if (VK.metaKeyPressed(e) && !e.shiftKey && (e.keyCode === 37 || e.keyCode === 39)) {\r\n              e.preventDefault();\r\n              var selection_1 = editor.selection.getSel();\r\n              selection_1.modify('move', e.keyCode === 37 ? 'backward' : 'forward', 'lineboundary');\r\n            }\r\n          });\r\n        }\r\n      };\r\n      var disableAutoUrlDetect = function () {\r\n        setEditorCommandState('AutoUrlDetect', false);\r\n      };\r\n      var tapLinksAndImages = function () {\r\n        editor.on('click', function (e) {\r\n          var elm = e.target;\r\n          do {\r\n            if (elm.tagName === 'A') {\r\n              e.preventDefault();\r\n              return;\r\n            }\r\n          } while (elm = elm.parentNode);\r\n        });\r\n        editor.contentStyles.push('.mce-content-body {-webkit-touch-callout: none}');\r\n      };\r\n      var blockFormSubmitInsideEditor = function () {\r\n        editor.on('init', function () {\r\n          editor.dom.bind(editor.getBody(), 'submit', function (e) {\r\n            e.preventDefault();\r\n          });\r\n        });\r\n      };\r\n      var removeAppleInterchangeBrs = function () {\r\n        parser.addNodeFilter('br', function (nodes) {\r\n          var i = nodes.length;\r\n          while (i--) {\r\n            if (nodes[i].attr('class') === 'Apple-interchange-newline') {\r\n              nodes[i].remove();\r\n            }\r\n          }\r\n        });\r\n      };\r\n      var ieInternalDragAndDrop = function () {\r\n        editor.on('dragstart', function (e) {\r\n          setMceInternalContent(e);\r\n        });\r\n        editor.on('drop', function (e) {\r\n          if (!isDefaultPrevented(e)) {\r\n            var internalContent = getMceInternalContent(e);\r\n            if (internalContent && internalContent.id !== editor.id) {\r\n              e.preventDefault();\r\n              var rng = fromPoint(e.x, e.y, editor.getDoc());\r\n              selection.setRng(rng);\r\n              insertClipboardContents(internalContent.html, true);\r\n            }\r\n          }\r\n        });\r\n      };\r\n      var refreshContentEditable = noop;\r\n      var isHidden = function () {\r\n        if (!isGecko || editor.removed) {\r\n          return false;\r\n        }\r\n        var sel = editor.selection.getSel();\r\n        return !sel || !sel.rangeCount || sel.rangeCount === 0;\r\n      };\r\n      var setupRtc = function () {\r\n        if (isWebKit) {\r\n          documentElementEditingFocus();\r\n          selectControlElements();\r\n          blockFormSubmitInsideEditor();\r\n          selectAll();\r\n          if (Env.iOS) {\r\n            restoreFocusOnKeyDown();\r\n            bodyHeight();\r\n            tapLinksAndImages();\r\n          }\r\n        }\r\n        if (isGecko) {\r\n          focusBody();\r\n          setGeckoEditingOptions();\r\n          showBrokenImageIcon();\r\n          blockCmdArrowNavigation();\r\n        }\r\n      };\r\n      var setup = function () {\r\n        removeBlockQuoteOnBackSpace();\r\n        emptyEditorWhenDeleting();\r\n        if (!Env.windowsPhone) {\r\n          normalizeSelection();\r\n        }\r\n        if (isWebKit) {\r\n          documentElementEditingFocus();\r\n          selectControlElements();\r\n          setDefaultBlockType();\r\n          blockFormSubmitInsideEditor();\r\n          disableBackspaceIntoATable();\r\n          removeAppleInterchangeBrs();\r\n          if (Env.iOS) {\r\n            restoreFocusOnKeyDown();\r\n            bodyHeight();\r\n            tapLinksAndImages();\r\n          } else {\r\n            selectAll();\r\n          }\r\n        }\r\n        if (Env.ie >= 11) {\r\n          bodyHeight();\r\n          disableBackspaceIntoATable();\r\n        }\r\n        if (Env.ie) {\r\n          selectAll();\r\n          disableAutoUrlDetect();\r\n          ieInternalDragAndDrop();\r\n        }\r\n        if (isGecko) {\r\n          removeHrOnBackspace();\r\n          focusBody();\r\n          removeStylesWhenDeletingAcrossBlockElements();\r\n          setGeckoEditingOptions();\r\n          addBrAfterLastLinks();\r\n          showBrokenImageIcon();\r\n          blockCmdArrowNavigation();\r\n          disableBackspaceIntoATable();\r\n        }\r\n      };\r\n      if (isRtc(editor)) {\r\n        setupRtc();\r\n      } else {\r\n        setup();\r\n      }\r\n      return {\r\n        refreshContentEditable: refreshContentEditable,\r\n        isHidden: isHidden\r\n      };\r\n    };\r\n\r\n    var DOM$6 = DOMUtils.DOM;\r\n    var appendStyle = function (editor, text) {\r\n      var body = SugarElement.fromDom(editor.getBody());\r\n      var container = getStyleContainer(getRootNode(body));\r\n      var style = SugarElement.fromTag('style');\r\n      set$1(style, 'type', 'text/css');\r\n      append$1(style, SugarElement.fromText(text));\r\n      append$1(container, style);\r\n      editor.on('remove', function () {\r\n        remove$7(style);\r\n      });\r\n    };\r\n    var getRootName = function (editor) {\r\n      return editor.inline ? editor.getElement().nodeName.toLowerCase() : undefined;\r\n    };\r\n    var removeUndefined = function (obj) {\r\n      return filter$3(obj, function (v) {\r\n        return isUndefined(v) === false;\r\n      });\r\n    };\r\n    var mkSchemaSettings = function (editor) {\r\n      var settings = editor.settings;\r\n      return removeUndefined({\r\n        block_elements: settings.block_elements,\r\n        boolean_attributes: settings.boolean_attributes,\r\n        custom_elements: settings.custom_elements,\r\n        extended_valid_elements: settings.extended_valid_elements,\r\n        invalid_elements: settings.invalid_elements,\r\n        invalid_styles: settings.invalid_styles,\r\n        move_caret_before_on_enter_elements: settings.move_caret_before_on_enter_elements,\r\n        non_empty_elements: settings.non_empty_elements,\r\n        schema: settings.schema,\r\n        self_closing_elements: settings.self_closing_elements,\r\n        short_ended_elements: settings.short_ended_elements,\r\n        special: settings.special,\r\n        text_block_elements: settings.text_block_elements,\r\n        text_inline_elements: settings.text_inline_elements,\r\n        valid_children: settings.valid_children,\r\n        valid_classes: settings.valid_classes,\r\n        valid_elements: settings.valid_elements,\r\n        valid_styles: settings.valid_styles,\r\n        verify_html: settings.verify_html,\r\n        whitespace_elements: settings.whitespace_elements,\r\n        padd_empty_block_inline_children: settings.format_empty_lines\r\n      });\r\n    };\r\n    var mkParserSettings = function (editor) {\r\n      var settings = editor.settings;\r\n      var blobCache = editor.editorUpload.blobCache;\r\n      return removeUndefined({\r\n        allow_conditional_comments: settings.allow_conditional_comments,\r\n        allow_html_data_urls: settings.allow_html_data_urls,\r\n        allow_svg_data_urls: settings.allow_svg_data_urls,\r\n        allow_html_in_named_anchor: settings.allow_html_in_named_anchor,\r\n        allow_script_urls: settings.allow_script_urls,\r\n        allow_unsafe_link_target: settings.allow_unsafe_link_target,\r\n        convert_fonts_to_spans: settings.convert_fonts_to_spans,\r\n        fix_list_elements: settings.fix_list_elements,\r\n        font_size_legacy_values: settings.font_size_legacy_values,\r\n        forced_root_block: settings.forced_root_block,\r\n        forced_root_block_attrs: settings.forced_root_block_attrs,\r\n        padd_empty_with_br: settings.padd_empty_with_br,\r\n        preserve_cdata: settings.preserve_cdata,\r\n        remove_trailing_brs: settings.remove_trailing_brs,\r\n        inline_styles: settings.inline_styles,\r\n        root_name: getRootName(editor),\r\n        validate: true,\r\n        blob_cache: blobCache,\r\n        document: editor.getDoc(),\r\n        images_dataimg_filter: settings.images_dataimg_filter\r\n      });\r\n    };\r\n    var mkSerializerSettings = function (editor) {\r\n      var settings = editor.settings;\r\n      return __assign(__assign(__assign({}, mkParserSettings(editor)), mkSchemaSettings(editor)), removeUndefined({\r\n        url_converter: settings.url_converter,\r\n        url_converter_scope: settings.url_converter_scope,\r\n        element_format: settings.element_format,\r\n        entities: settings.entities,\r\n        entity_encoding: settings.entity_encoding,\r\n        indent: settings.indent,\r\n        indent_after: settings.indent_after,\r\n        indent_before: settings.indent_before\r\n      }));\r\n    };\r\n    var createParser = function (editor) {\r\n      var parser = DomParser(mkParserSettings(editor), editor.schema);\r\n      parser.addAttributeFilter('src,href,style,tabindex', function (nodes, name) {\r\n        var i = nodes.length, node, value;\r\n        var dom = editor.dom;\r\n        var internalName = 'data-mce-' + name;\r\n        while (i--) {\r\n          node = nodes[i];\r\n          value = node.attr(name);\r\n          if (value && !node.attr(internalName)) {\r\n            if (value.indexOf('data:') === 0 || value.indexOf('blob:') === 0) {\r\n              continue;\r\n            }\r\n            if (name === 'style') {\r\n              value = dom.serializeStyle(dom.parseStyle(value), node.name);\r\n              if (!value.length) {\r\n                value = null;\r\n              }\r\n              node.attr(internalName, value);\r\n              node.attr(name, value);\r\n            } else if (name === 'tabindex') {\r\n              node.attr(internalName, value);\r\n              node.attr(name, null);\r\n            } else {\r\n              node.attr(internalName, editor.convertURL(value, name, node.name));\r\n            }\r\n          }\r\n        }\r\n      });\r\n      parser.addNodeFilter('script', function (nodes) {\r\n        var i = nodes.length;\r\n        while (i--) {\r\n          var node = nodes[i];\r\n          var type = node.attr('type') || 'no/type';\r\n          if (type.indexOf('mce-') !== 0) {\r\n            node.attr('type', 'mce-' + type);\r\n          }\r\n        }\r\n      });\r\n      if (editor.settings.preserve_cdata) {\r\n        parser.addNodeFilter('#cdata', function (nodes) {\r\n          var i = nodes.length;\r\n          while (i--) {\r\n            var node = nodes[i];\r\n            node.type = 8;\r\n            node.name = '#comment';\r\n            node.value = '[CDATA[' + editor.dom.encode(node.value) + ']]';\r\n          }\r\n        });\r\n      }\r\n      parser.addNodeFilter('p,h1,h2,h3,h4,h5,h6,div', function (nodes) {\r\n        var i = nodes.length;\r\n        var nonEmptyElements = editor.schema.getNonEmptyElements();\r\n        while (i--) {\r\n          var node = nodes[i];\r\n          if (node.isEmpty(nonEmptyElements) && node.getAll('br').length === 0) {\r\n            node.append(new AstNode('br', 1)).shortEnded = true;\r\n          }\r\n        }\r\n      });\r\n      return parser;\r\n    };\r\n    var autoFocus = function (editor) {\r\n      if (editor.settings.auto_focus) {\r\n        Delay.setEditorTimeout(editor, function () {\r\n          var focusEditor;\r\n          if (editor.settings.auto_focus === true) {\r\n            focusEditor = editor;\r\n          } else {\r\n            focusEditor = editor.editorManager.get(editor.settings.auto_focus);\r\n          }\r\n          if (!focusEditor.destroyed) {\r\n            focusEditor.focus();\r\n          }\r\n        }, 100);\r\n      }\r\n    };\r\n    var moveSelectionToFirstCaretPosition = function (editor) {\r\n      var root = editor.dom.getRoot();\r\n      if (!editor.inline && (!hasAnyRanges(editor) || editor.selection.getStart(true) === root)) {\r\n        firstPositionIn(root).each(function (pos) {\r\n          var node = pos.getNode();\r\n          var caretPos = isTable$3(node) ? firstPositionIn(node).getOr(pos) : pos;\r\n          if (Env.browser.isIE()) {\r\n            storeNative(editor, caretPos.toRange());\r\n          } else {\r\n            editor.selection.setRng(caretPos.toRange());\r\n          }\r\n        });\r\n      }\r\n    };\r\n    var initEditor = function (editor) {\r\n      editor.bindPendingEventDelegates();\r\n      editor.initialized = true;\r\n      fireInit(editor);\r\n      editor.focus(true);\r\n      moveSelectionToFirstCaretPosition(editor);\r\n      editor.nodeChanged({ initial: true });\r\n      editor.execCallback('init_instance_callback', editor);\r\n      autoFocus(editor);\r\n    };\r\n    var getStyleSheetLoader$1 = function (editor) {\r\n      return editor.inline ? editor.ui.styleSheetLoader : editor.dom.styleSheetLoader;\r\n    };\r\n    var makeStylesheetLoadingPromises = function (editor, css, framedFonts) {\r\n      var promises = [new promiseObj(function (resolve, reject) {\r\n          return getStyleSheetLoader$1(editor).loadAll(css, resolve, reject);\r\n        })];\r\n      if (editor.inline) {\r\n        return promises;\r\n      } else {\r\n        return promises.concat([new promiseObj(function (resolve, reject) {\r\n            return editor.ui.styleSheetLoader.loadAll(framedFonts, resolve, reject);\r\n          })]);\r\n      }\r\n    };\r\n    var loadContentCss = function (editor) {\r\n      var styleSheetLoader = getStyleSheetLoader$1(editor);\r\n      var fontCss = getFontCss(editor);\r\n      var css = editor.contentCSS;\r\n      var removeCss = function () {\r\n        styleSheetLoader.unloadAll(css);\r\n        if (!editor.inline) {\r\n          editor.ui.styleSheetLoader.unloadAll(fontCss);\r\n        }\r\n      };\r\n      var loaded = function () {\r\n        if (editor.removed) {\r\n          removeCss();\r\n        } else {\r\n          editor.on('remove', removeCss);\r\n        }\r\n      };\r\n      if (editor.contentStyles.length > 0) {\r\n        var contentCssText_1 = '';\r\n        Tools.each(editor.contentStyles, function (style) {\r\n          contentCssText_1 += style + '\\r\\n';\r\n        });\r\n        editor.dom.addStyle(contentCssText_1);\r\n      }\r\n      var allStylesheets = promiseObj.all(makeStylesheetLoadingPromises(editor, css, fontCss)).then(loaded).catch(loaded);\r\n      if (editor.settings.content_style) {\r\n        appendStyle(editor, editor.settings.content_style);\r\n      }\r\n      return allStylesheets;\r\n    };\r\n    var preInit = function (editor) {\r\n      var settings = editor.settings, doc = editor.getDoc(), body = editor.getBody();\r\n      firePreInit(editor);\r\n      if (!settings.browser_spellcheck && !settings.gecko_spellcheck) {\r\n        doc.body.spellcheck = false;\r\n        DOM$6.setAttrib(body, 'spellcheck', 'false');\r\n      }\r\n      editor.quirks = Quirks(editor);\r\n      firePostRender(editor);\r\n      var directionality = getDirectionality(editor);\r\n      if (directionality !== undefined) {\r\n        body.dir = directionality;\r\n      }\r\n      if (settings.protect) {\r\n        editor.on('BeforeSetContent', function (e) {\r\n          Tools.each(settings.protect, function (pattern) {\r\n            e.content = e.content.replace(pattern, function (str) {\r\n              return '<!--mce:protected ' + escape(str) + '-->';\r\n            });\r\n          });\r\n        });\r\n      }\r\n      editor.on('SetContent', function () {\r\n        editor.addVisual(editor.getBody());\r\n      });\r\n      editor.on('compositionstart compositionend', function (e) {\r\n        editor.composing = e.type === 'compositionstart';\r\n      });\r\n    };\r\n    var loadInitialContent = function (editor) {\r\n      if (!isRtc(editor)) {\r\n        editor.load({\r\n          initial: true,\r\n          format: 'html'\r\n        });\r\n      }\r\n      editor.startContent = editor.getContent({ format: 'raw' });\r\n    };\r\n    var initEditorWithInitialContent = function (editor) {\r\n      if (editor.removed !== true) {\r\n        loadInitialContent(editor);\r\n        initEditor(editor);\r\n      }\r\n    };\r\n    var initContentBody = function (editor, skipWrite) {\r\n      var settings = editor.settings;\r\n      var targetElm = editor.getElement();\r\n      var doc = editor.getDoc();\r\n      if (!settings.inline) {\r\n        editor.getElement().style.visibility = editor.orgVisibility;\r\n      }\r\n      if (!skipWrite && !editor.inline) {\r\n        doc.open();\r\n        doc.write(editor.iframeHTML);\r\n        doc.close();\r\n      }\r\n      if (editor.inline) {\r\n        DOM$6.addClass(targetElm, 'mce-content-body');\r\n        editor.contentDocument = doc = document;\r\n        editor.contentWindow = window;\r\n        editor.bodyElement = targetElm;\r\n        editor.contentAreaContainer = targetElm;\r\n      }\r\n      var body = editor.getBody();\r\n      body.disabled = true;\r\n      editor.readonly = !!settings.readonly;\r\n      if (!editor.readonly) {\r\n        if (editor.inline && DOM$6.getStyle(body, 'position', true) === 'static') {\r\n          body.style.position = 'relative';\r\n        }\r\n        body.contentEditable = editor.getParam('content_editable_state', true);\r\n      }\r\n      body.disabled = false;\r\n      editor.editorUpload = EditorUpload(editor);\r\n      editor.schema = Schema(mkSchemaSettings(editor));\r\n      editor.dom = DOMUtils(doc, {\r\n        keep_values: true,\r\n        url_converter: editor.convertURL,\r\n        url_converter_scope: editor,\r\n        hex_colors: settings.force_hex_style_colors,\r\n        update_styles: true,\r\n        root_element: editor.inline ? editor.getBody() : null,\r\n        collect: function () {\r\n          return editor.inline;\r\n        },\r\n        schema: editor.schema,\r\n        contentCssCors: shouldUseContentCssCors(editor),\r\n        referrerPolicy: getReferrerPolicy(editor),\r\n        onSetAttrib: function (e) {\r\n          editor.fire('SetAttrib', e);\r\n        }\r\n      });\r\n      editor.parser = createParser(editor);\r\n      editor.serializer = DomSerializer(mkSerializerSettings(editor), editor);\r\n      editor.selection = EditorSelection(editor.dom, editor.getWin(), editor.serializer, editor);\r\n      editor.annotator = Annotator(editor);\r\n      editor.formatter = Formatter(editor);\r\n      editor.undoManager = UndoManager(editor);\r\n      editor._nodeChangeDispatcher = new NodeChange(editor);\r\n      editor._selectionOverrides = SelectionOverrides(editor);\r\n      setup$e(editor);\r\n      setup$3(editor);\r\n      if (!isRtc(editor)) {\r\n        setup$2(editor);\r\n      }\r\n      var caret = setup$4(editor);\r\n      setup$f(editor, caret);\r\n      setup$d(editor);\r\n      setup$g(editor);\r\n      var setupRtcThunk = setup$i(editor);\r\n      preInit(editor);\r\n      setupRtcThunk.fold(function () {\r\n        loadContentCss(editor).then(function () {\r\n          return initEditorWithInitialContent(editor);\r\n        });\r\n      }, function (setupRtc) {\r\n        editor.setProgressState(true);\r\n        loadContentCss(editor).then(function () {\r\n          setupRtc().then(function (_rtcMode) {\r\n            editor.setProgressState(false);\r\n            initEditorWithInitialContent(editor);\r\n          }, function (err) {\r\n            editor.notificationManager.open({\r\n              type: 'error',\r\n              text: String(err)\r\n            });\r\n            initEditorWithInitialContent(editor);\r\n          });\r\n        });\r\n      });\r\n    };\r\n\r\n    var DOM$5 = DOMUtils.DOM;\r\n    var relaxDomain = function (editor, ifr) {\r\n      if (document.domain !== window.location.hostname && Env.browser.isIE()) {\r\n        var bodyUuid = uuid('mce');\r\n        editor[bodyUuid] = function () {\r\n          initContentBody(editor);\r\n        };\r\n        var domainRelaxUrl = 'javascript:(function(){' + 'document.open();document.domain=\"' + document.domain + '\";' + 'var ed = window.parent.tinymce.get(\"' + editor.id + '\");document.write(ed.iframeHTML);' + 'document.close();ed.' + bodyUuid + '(true);})()';\r\n        DOM$5.setAttrib(ifr, 'src', domainRelaxUrl);\r\n        return true;\r\n      }\r\n      return false;\r\n    };\r\n    var createIframeElement = function (id, title, height, customAttrs) {\r\n      var iframe = SugarElement.fromTag('iframe');\r\n      setAll$1(iframe, customAttrs);\r\n      setAll$1(iframe, {\r\n        id: id + '_ifr',\r\n        frameBorder: '0',\r\n        allowTransparency: 'true',\r\n        title: title\r\n      });\r\n      add$1(iframe, 'tox-edit-area__iframe');\r\n      return iframe;\r\n    };\r\n    var getIframeHtml = function (editor) {\r\n      var iframeHTML = getDocType(editor) + '<html><head>';\r\n      if (getDocumentBaseUrl(editor) !== editor.documentBaseUrl) {\r\n        iframeHTML += '<base href=\"' + editor.documentBaseURI.getURI() + '\" />';\r\n      }\r\n      iframeHTML += '<meta http-equiv=\"Content-Type\" content=\"text/html; charset=UTF-8\" />';\r\n      var bodyId = getBodyId(editor);\r\n      var bodyClass = getBodyClass(editor);\r\n      var translatedAriaText = editor.translate(getIframeAriaText(editor));\r\n      if (getContentSecurityPolicy(editor)) {\r\n        iframeHTML += '<meta http-equiv=\"Content-Security-Policy\" content=\"' + getContentSecurityPolicy(editor) + '\" />';\r\n      }\r\n      iframeHTML += '</head>' + ('<body id=\"' + bodyId + '\" class=\"mce-content-body ' + bodyClass + '\" data-id=\"' + editor.id + '\" aria-label=\"' + translatedAriaText + '\">') + '<br>' + '</body></html>';\r\n      return iframeHTML;\r\n    };\r\n    var createIframe = function (editor, o) {\r\n      var iframeTitle = editor.translate('Rich Text Area');\r\n      var ifr = createIframeElement(editor.id, iframeTitle, o.height, getIframeAttrs(editor)).dom;\r\n      ifr.onload = function () {\r\n        ifr.onload = null;\r\n        editor.fire('load');\r\n      };\r\n      var isDomainRelaxed = relaxDomain(editor, ifr);\r\n      editor.contentAreaContainer = o.iframeContainer;\r\n      editor.iframeElement = ifr;\r\n      editor.iframeHTML = getIframeHtml(editor);\r\n      DOM$5.add(o.iframeContainer, ifr);\r\n      return isDomainRelaxed;\r\n    };\r\n    var init$1 = function (editor, boxInfo) {\r\n      var isDomainRelaxed = createIframe(editor, boxInfo);\r\n      if (boxInfo.editorContainer) {\r\n        DOM$5.get(boxInfo.editorContainer).style.display = editor.orgDisplay;\r\n        editor.hidden = DOM$5.isHidden(boxInfo.editorContainer);\r\n      }\r\n      editor.getElement().style.display = 'none';\r\n      DOM$5.setAttrib(editor.id, 'aria-hidden', 'true');\r\n      if (!isDomainRelaxed) {\r\n        initContentBody(editor);\r\n      }\r\n    };\r\n\r\n    var DOM$4 = DOMUtils.DOM;\r\n    var initPlugin = function (editor, initializedPlugins, plugin) {\r\n      var Plugin = PluginManager.get(plugin);\r\n      var pluginUrl = PluginManager.urls[plugin] || editor.documentBaseUrl.replace(/\\/$/, '');\r\n      plugin = Tools.trim(plugin);\r\n      if (Plugin && Tools.inArray(initializedPlugins, plugin) === -1) {\r\n        Tools.each(PluginManager.dependencies(plugin), function (dep) {\r\n          initPlugin(editor, initializedPlugins, dep);\r\n        });\r\n        if (editor.plugins[plugin]) {\r\n          return;\r\n        }\r\n        try {\r\n          var pluginInstance = new Plugin(editor, pluginUrl, editor.$);\r\n          editor.plugins[plugin] = pluginInstance;\r\n          if (pluginInstance.init) {\r\n            pluginInstance.init(editor, pluginUrl);\r\n            initializedPlugins.push(plugin);\r\n          }\r\n        } catch (e) {\r\n          pluginInitError(editor, plugin, e);\r\n        }\r\n      }\r\n    };\r\n    var trimLegacyPrefix = function (name) {\r\n      return name.replace(/^\\-/, '');\r\n    };\r\n    var initPlugins = function (editor) {\r\n      var initializedPlugins = [];\r\n      Tools.each(getPlugins(editor).split(/[ ,]/), function (name) {\r\n        initPlugin(editor, initializedPlugins, trimLegacyPrefix(name));\r\n      });\r\n    };\r\n    var initIcons = function (editor) {\r\n      var iconPackName = Tools.trim(getIconPackName(editor));\r\n      var currentIcons = editor.ui.registry.getAll().icons;\r\n      var loadIcons = __assign(__assign({}, IconManager.get('default').icons), IconManager.get(iconPackName).icons);\r\n      each$j(loadIcons, function (svgData, icon) {\r\n        if (!has$2(currentIcons, icon)) {\r\n          editor.ui.registry.addIcon(icon, svgData);\r\n        }\r\n      });\r\n    };\r\n    var initTheme = function (editor) {\r\n      var theme = getTheme(editor);\r\n      if (isString$1(theme)) {\r\n        editor.settings.theme = trimLegacyPrefix(theme);\r\n        var Theme = ThemeManager.get(theme);\r\n        editor.theme = new Theme(editor, ThemeManager.urls[theme]);\r\n        if (editor.theme.init) {\r\n          editor.theme.init(editor, ThemeManager.urls[theme] || editor.documentBaseUrl.replace(/\\/$/, ''), editor.$);\r\n        }\r\n      } else {\r\n        editor.theme = {};\r\n      }\r\n    };\r\n    var renderFromLoadedTheme = function (editor) {\r\n      return editor.theme.renderUI();\r\n    };\r\n    var renderFromThemeFunc = function (editor) {\r\n      var elm = editor.getElement();\r\n      var theme = getTheme(editor);\r\n      var info = theme(editor, elm);\r\n      if (info.editorContainer.nodeType) {\r\n        info.editorContainer.id = info.editorContainer.id || editor.id + '_parent';\r\n      }\r\n      if (info.iframeContainer && info.iframeContainer.nodeType) {\r\n        info.iframeContainer.id = info.iframeContainer.id || editor.id + '_iframecontainer';\r\n      }\r\n      info.height = info.iframeHeight ? info.iframeHeight : elm.offsetHeight;\r\n      return info;\r\n    };\r\n    var createThemeFalseResult = function (element) {\r\n      return {\r\n        editorContainer: element,\r\n        iframeContainer: element,\r\n        api: {}\r\n      };\r\n    };\r\n    var renderThemeFalseIframe = function (targetElement) {\r\n      var iframeContainer = DOM$4.create('div');\r\n      DOM$4.insertAfter(iframeContainer, targetElement);\r\n      return createThemeFalseResult(iframeContainer);\r\n    };\r\n    var renderThemeFalse = function (editor) {\r\n      var targetElement = editor.getElement();\r\n      return editor.inline ? createThemeFalseResult(null) : renderThemeFalseIframe(targetElement);\r\n    };\r\n    var renderThemeUi = function (editor) {\r\n      var elm = editor.getElement();\r\n      editor.orgDisplay = elm.style.display;\r\n      if (isString$1(getTheme(editor))) {\r\n        return renderFromLoadedTheme(editor);\r\n      } else if (isFunction(getTheme(editor))) {\r\n        return renderFromThemeFunc(editor);\r\n      } else {\r\n        return renderThemeFalse(editor);\r\n      }\r\n    };\r\n    var augmentEditorUiApi = function (editor, api) {\r\n      var uiApiFacade = {\r\n        show: Optional.from(api.show).getOr(noop),\r\n        hide: Optional.from(api.hide).getOr(noop),\r\n        disable: Optional.from(api.disable).getOr(noop),\r\n        isDisabled: Optional.from(api.isDisabled).getOr(never),\r\n        enable: function () {\r\n          if (!editor.mode.isReadOnly()) {\r\n            Optional.from(api.enable).map(call);\r\n          }\r\n        }\r\n      };\r\n      editor.ui = __assign(__assign({}, editor.ui), uiApiFacade);\r\n    };\r\n    var init = function (editor) {\r\n      editor.fire('ScriptsLoaded');\r\n      initIcons(editor);\r\n      initTheme(editor);\r\n      initPlugins(editor);\r\n      var renderInfo = renderThemeUi(editor);\r\n      augmentEditorUiApi(editor, Optional.from(renderInfo.api).getOr({}));\r\n      var boxInfo = {\r\n        editorContainer: renderInfo.editorContainer,\r\n        iframeContainer: renderInfo.iframeContainer\r\n      };\r\n      editor.editorContainer = boxInfo.editorContainer ? boxInfo.editorContainer : null;\r\n      appendContentCssFromSettings(editor);\r\n      if (editor.inline) {\r\n        return initContentBody(editor);\r\n      } else {\r\n        return init$1(editor, boxInfo);\r\n      }\r\n    };\r\n\r\n    var DOM$3 = DOMUtils.DOM;\r\n    var hasSkipLoadPrefix = function (name) {\r\n      return name.charAt(0) === '-';\r\n    };\r\n    var loadLanguage = function (scriptLoader, editor) {\r\n      var languageCode = getLanguageCode(editor);\r\n      var languageUrl = getLanguageUrl(editor);\r\n      if (I18n.hasCode(languageCode) === false && languageCode !== 'en') {\r\n        var url_1 = languageUrl !== '' ? languageUrl : editor.editorManager.baseURL + '/langs/' + languageCode + '.js';\r\n        scriptLoader.add(url_1, noop, undefined, function () {\r\n          languageLoadError(editor, url_1, languageCode);\r\n        });\r\n      }\r\n    };\r\n    var loadTheme = function (scriptLoader, editor, suffix, callback) {\r\n      var theme = getTheme(editor);\r\n      if (isString$1(theme)) {\r\n        if (!hasSkipLoadPrefix(theme) && !has$2(ThemeManager.urls, theme)) {\r\n          var themeUrl = getThemeUrl(editor);\r\n          if (themeUrl) {\r\n            ThemeManager.load(theme, editor.documentBaseURI.toAbsolute(themeUrl));\r\n          } else {\r\n            ThemeManager.load(theme, 'themes/' + theme + '/theme' + suffix + '.js');\r\n          }\r\n        }\r\n        scriptLoader.loadQueue(function () {\r\n          ThemeManager.waitFor(theme, callback);\r\n        });\r\n      } else {\r\n        callback();\r\n      }\r\n    };\r\n    var getIconsUrlMetaFromUrl = function (editor) {\r\n      return Optional.from(getIconsUrl(editor)).filter(function (url) {\r\n        return url.length > 0;\r\n      }).map(function (url) {\r\n        return {\r\n          url: url,\r\n          name: Optional.none()\r\n        };\r\n      });\r\n    };\r\n    var getIconsUrlMetaFromName = function (editor, name, suffix) {\r\n      return Optional.from(name).filter(function (name) {\r\n        return name.length > 0 && !IconManager.has(name);\r\n      }).map(function (name) {\r\n        return {\r\n          url: editor.editorManager.baseURL + '/icons/' + name + '/icons' + suffix + '.js',\r\n          name: Optional.some(name)\r\n        };\r\n      });\r\n    };\r\n    var loadIcons = function (scriptLoader, editor, suffix) {\r\n      var defaultIconsUrl = getIconsUrlMetaFromName(editor, 'default', suffix);\r\n      var customIconsUrl = getIconsUrlMetaFromUrl(editor).orThunk(function () {\r\n        return getIconsUrlMetaFromName(editor, getIconPackName(editor), '');\r\n      });\r\n      each$k(cat([\r\n        defaultIconsUrl,\r\n        customIconsUrl\r\n      ]), function (urlMeta) {\r\n        scriptLoader.add(urlMeta.url, noop, undefined, function () {\r\n          iconsLoadError(editor, urlMeta.url, urlMeta.name.getOrUndefined());\r\n        });\r\n      });\r\n    };\r\n    var loadPlugins = function (editor, suffix) {\r\n      Tools.each(getExternalPlugins$1(editor), function (url, name) {\r\n        PluginManager.load(name, url, noop, undefined, function () {\r\n          pluginLoadError(editor, url, name);\r\n        });\r\n        editor.settings.plugins += ' ' + name;\r\n      });\r\n      Tools.each(getPlugins(editor).split(/[ ,]/), function (plugin) {\r\n        plugin = Tools.trim(plugin);\r\n        if (plugin && !PluginManager.urls[plugin]) {\r\n          if (hasSkipLoadPrefix(plugin)) {\r\n            plugin = plugin.substr(1, plugin.length);\r\n            var dependencies = PluginManager.dependencies(plugin);\r\n            Tools.each(dependencies, function (depPlugin) {\r\n              var defaultSettings = {\r\n                prefix: 'plugins/',\r\n                resource: depPlugin,\r\n                suffix: '/plugin' + suffix + '.js'\r\n              };\r\n              var dep = PluginManager.createUrl(defaultSettings, depPlugin);\r\n              PluginManager.load(dep.resource, dep, noop, undefined, function () {\r\n                pluginLoadError(editor, dep.prefix + dep.resource + dep.suffix, dep.resource);\r\n              });\r\n            });\r\n          } else {\r\n            var url_2 = {\r\n              prefix: 'plugins/',\r\n              resource: plugin,\r\n              suffix: '/plugin' + suffix + '.js'\r\n            };\r\n            PluginManager.load(plugin, url_2, noop, undefined, function () {\r\n              pluginLoadError(editor, url_2.prefix + url_2.resource + url_2.suffix, plugin);\r\n            });\r\n          }\r\n        }\r\n      });\r\n    };\r\n    var loadScripts = function (editor, suffix) {\r\n      var scriptLoader = ScriptLoader.ScriptLoader;\r\n      loadTheme(scriptLoader, editor, suffix, function () {\r\n        loadLanguage(scriptLoader, editor);\r\n        loadIcons(scriptLoader, editor, suffix);\r\n        loadPlugins(editor, suffix);\r\n        scriptLoader.loadQueue(function () {\r\n          if (!editor.removed) {\r\n            init(editor);\r\n          }\r\n        }, editor, function () {\r\n          if (!editor.removed) {\r\n            init(editor);\r\n          }\r\n        });\r\n      });\r\n    };\r\n    var getStyleSheetLoader = function (element, editor) {\r\n      return instance.forElement(element, {\r\n        contentCssCors: hasContentCssCors(editor),\r\n        referrerPolicy: getReferrerPolicy(editor)\r\n      });\r\n    };\r\n    var render = function (editor) {\r\n      var id = editor.id;\r\n      I18n.setCode(getLanguageCode(editor));\r\n      var readyHandler = function () {\r\n        DOM$3.unbind(window, 'ready', readyHandler);\r\n        editor.render();\r\n      };\r\n      if (!EventUtils.Event.domLoaded) {\r\n        DOM$3.bind(window, 'ready', readyHandler);\r\n        return;\r\n      }\r\n      if (!editor.getElement()) {\r\n        return;\r\n      }\r\n      if (!Env.contentEditable) {\r\n        return;\r\n      }\r\n      var element = SugarElement.fromDom(editor.getElement());\r\n      var snapshot = clone$3(element);\r\n      editor.on('remove', function () {\r\n        eachr(element.dom.attributes, function (attr) {\r\n          return remove$6(element, attr.name);\r\n        });\r\n        setAll$1(element, snapshot);\r\n      });\r\n      editor.ui.styleSheetLoader = getStyleSheetLoader(element, editor);\r\n      if (!isInline(editor)) {\r\n        editor.orgVisibility = editor.getElement().style.visibility;\r\n        editor.getElement().style.visibility = 'hidden';\r\n      } else {\r\n        editor.inline = true;\r\n      }\r\n      var form = editor.getElement().form || DOM$3.getParent(id, 'form');\r\n      if (form) {\r\n        editor.formElement = form;\r\n        if (hasHiddenInput(editor) && !isTextareaOrInput(editor.getElement())) {\r\n          DOM$3.insertAfter(DOM$3.create('input', {\r\n            type: 'hidden',\r\n            name: id\r\n          }), id);\r\n          editor.hasHiddenInput = true;\r\n        }\r\n        editor.formEventDelegate = function (e) {\r\n          editor.fire(e.type, e);\r\n        };\r\n        DOM$3.bind(form, 'submit reset', editor.formEventDelegate);\r\n        editor.on('reset', function () {\r\n          editor.resetContent();\r\n        });\r\n        if (shouldPatchSubmit(editor) && !form.submit.nodeType && !form.submit.length && !form._mceOldSubmit) {\r\n          form._mceOldSubmit = form.submit;\r\n          form.submit = function () {\r\n            editor.editorManager.triggerSave();\r\n            editor.setDirty(false);\r\n            return form._mceOldSubmit(form);\r\n          };\r\n        }\r\n      }\r\n      editor.windowManager = WindowManager(editor);\r\n      editor.notificationManager = NotificationManager(editor);\r\n      if (isEncodingXml(editor)) {\r\n        editor.on('GetContent', function (e) {\r\n          if (e.save) {\r\n            e.content = DOM$3.encode(e.content);\r\n          }\r\n        });\r\n      }\r\n      if (shouldAddFormSubmitTrigger(editor)) {\r\n        editor.on('submit', function () {\r\n          if (editor.initialized) {\r\n            editor.save();\r\n          }\r\n        });\r\n      }\r\n      if (shouldAddUnloadTrigger(editor)) {\r\n        editor._beforeUnload = function () {\r\n          if (editor.initialized && !editor.destroyed && !editor.isHidden()) {\r\n            editor.save({\r\n              format: 'raw',\r\n              no_events: true,\r\n              set_dirty: false\r\n            });\r\n          }\r\n        };\r\n        editor.editorManager.on('BeforeUnload', editor._beforeUnload);\r\n      }\r\n      editor.editorManager.add(editor);\r\n      loadScripts(editor, editor.suffix);\r\n    };\r\n\r\n    var addVisual = function (editor, elm) {\r\n      return addVisual$1(editor, elm);\r\n    };\r\n\r\n    var legacyPropNames = {\r\n      'font-size': 'size',\r\n      'font-family': 'face'\r\n    };\r\n    var getSpecifiedFontProp = function (propName, rootElm, elm) {\r\n      var getProperty = function (elm) {\r\n        return getRaw(elm, propName).orThunk(function () {\r\n          if (name(elm) === 'font') {\r\n            return get$9(legacyPropNames, propName).bind(function (legacyPropName) {\r\n              return getOpt(elm, legacyPropName);\r\n            });\r\n          } else {\r\n            return Optional.none();\r\n          }\r\n        });\r\n      };\r\n      var isRoot = function (elm) {\r\n        return eq(SugarElement.fromDom(rootElm), elm);\r\n      };\r\n      return closest$1(SugarElement.fromDom(elm), function (elm) {\r\n        return getProperty(elm);\r\n      }, isRoot);\r\n    };\r\n    var normalizeFontFamily = function (fontFamily) {\r\n      return fontFamily.replace(/[\\'\\\"\\\\]/g, '').replace(/,\\s+/g, ',');\r\n    };\r\n    var getComputedFontProp = function (propName, elm) {\r\n      return Optional.from(DOMUtils.DOM.getStyle(elm, propName, true));\r\n    };\r\n    var getFontProp = function (propName) {\r\n      return function (rootElm, elm) {\r\n        return Optional.from(elm).map(SugarElement.fromDom).filter(isElement$6).bind(function (element) {\r\n          return getSpecifiedFontProp(propName, rootElm, element.dom).or(getComputedFontProp(propName, element.dom));\r\n        }).getOr('');\r\n      };\r\n    };\r\n    var getFontSize = getFontProp('font-size');\r\n    var getFontFamily = compose(normalizeFontFamily, getFontProp('font-family'));\r\n\r\n    var findFirstCaretElement = function (editor) {\r\n      return firstPositionIn(editor.getBody()).map(function (caret) {\r\n        var container = caret.container();\r\n        return isText$7(container) ? container.parentNode : container;\r\n      });\r\n    };\r\n    var getCaretElement = function (editor) {\r\n      return Optional.from(editor.selection.getRng()).bind(function (rng) {\r\n        var root = editor.getBody();\r\n        var atStartOfNode = rng.startContainer === root && rng.startOffset === 0;\r\n        return atStartOfNode ? Optional.none() : Optional.from(editor.selection.getStart(true));\r\n      });\r\n    };\r\n    var bindRange = function (editor, binder) {\r\n      return getCaretElement(editor).orThunk(curry(findFirstCaretElement, editor)).map(SugarElement.fromDom).filter(isElement$6).bind(binder);\r\n    };\r\n    var mapRange = function (editor, mapper) {\r\n      return bindRange(editor, compose1(Optional.some, mapper));\r\n    };\r\n\r\n    var fromFontSizeNumber = function (editor, value) {\r\n      if (/^[0-9.]+$/.test(value)) {\r\n        var fontSizeNumber = parseInt(value, 10);\r\n        if (fontSizeNumber >= 1 && fontSizeNumber <= 7) {\r\n          var fontSizes = getFontStyleValues(editor);\r\n          var fontClasses = getFontSizeClasses(editor);\r\n          if (fontClasses) {\r\n            return fontClasses[fontSizeNumber - 1] || value;\r\n          } else {\r\n            return fontSizes[fontSizeNumber - 1] || value;\r\n          }\r\n        } else {\r\n          return value;\r\n        }\r\n      } else {\r\n        return value;\r\n      }\r\n    };\r\n    var normalizeFontNames = function (font) {\r\n      var fonts = font.split(/\\s*,\\s*/);\r\n      return map$3(fonts, function (font) {\r\n        if (font.indexOf(' ') !== -1 && !(startsWith(font, '\"') || startsWith(font, '\\''))) {\r\n          return '\\'' + font + '\\'';\r\n        } else {\r\n          return font;\r\n        }\r\n      }).join(',');\r\n    };\r\n    var fontNameAction = function (editor, value) {\r\n      var font = fromFontSizeNumber(editor, value);\r\n      editor.formatter.toggle('fontname', { value: normalizeFontNames(font) });\r\n      editor.nodeChanged();\r\n    };\r\n    var fontNameQuery = function (editor) {\r\n      return mapRange(editor, function (elm) {\r\n        return getFontFamily(editor.getBody(), elm.dom);\r\n      }).getOr('');\r\n    };\r\n    var fontSizeAction = function (editor, value) {\r\n      editor.formatter.toggle('fontsize', { value: fromFontSizeNumber(editor, value) });\r\n      editor.nodeChanged();\r\n    };\r\n    var fontSizeQuery = function (editor) {\r\n      return mapRange(editor, function (elm) {\r\n        return getFontSize(editor.getBody(), elm.dom);\r\n      }).getOr('');\r\n    };\r\n\r\n    var lineHeightQuery = function (editor) {\r\n      return mapRange(editor, function (elm) {\r\n        var root = SugarElement.fromDom(editor.getBody());\r\n        var specifiedStyle = closest$1(elm, function (elm) {\r\n          return getRaw(elm, 'line-height');\r\n        }, curry(eq, root));\r\n        var computedStyle = function () {\r\n          var lineHeight = parseFloat(get$5(elm, 'line-height'));\r\n          var fontSize = parseFloat(get$5(elm, 'font-size'));\r\n          return String(lineHeight / fontSize);\r\n        };\r\n        return specifiedStyle.getOrThunk(computedStyle);\r\n      }).getOr('');\r\n    };\r\n    var lineHeightAction = function (editor, lineHeight) {\r\n      editor.formatter.toggle('lineheight', { value: String(lineHeight) });\r\n      editor.nodeChanged();\r\n    };\r\n\r\n    var processValue = function (value) {\r\n      if (typeof value !== 'string') {\r\n        var details = Tools.extend({\r\n          paste: value.paste,\r\n          data: { paste: value.paste }\r\n        }, value);\r\n        return {\r\n          content: value.content,\r\n          details: details\r\n        };\r\n      }\r\n      return {\r\n        content: value,\r\n        details: {}\r\n      };\r\n    };\r\n    var insertAtCaret = function (editor, value) {\r\n      var result = processValue(value);\r\n      insertContent(editor, result.content, result.details);\r\n    };\r\n\r\n    var each$4 = Tools.each;\r\n    var map = Tools.map, inArray = Tools.inArray;\r\n    var EditorCommands = function () {\r\n      function EditorCommands(editor) {\r\n        this.commands = {\r\n          state: {},\r\n          exec: {},\r\n          value: {}\r\n        };\r\n        this.editor = editor;\r\n        this.setupCommands(editor);\r\n      }\r\n      EditorCommands.prototype.execCommand = function (command, ui, value, args) {\r\n        var func, state = false;\r\n        var self = this;\r\n        if (self.editor.removed) {\r\n          return;\r\n        }\r\n        if (command.toLowerCase() !== 'mcefocus') {\r\n          if (!/^(mceAddUndoLevel|mceEndUndoLevel|mceBeginUndoLevel|mceRepaint)$/.test(command) && (!args || !args.skip_focus)) {\r\n            self.editor.focus();\r\n          } else {\r\n            restore(self.editor);\r\n          }\r\n        }\r\n        args = self.editor.fire('BeforeExecCommand', {\r\n          command: command,\r\n          ui: ui,\r\n          value: value\r\n        });\r\n        if (args.isDefaultPrevented()) {\r\n          return false;\r\n        }\r\n        var customCommand = command.toLowerCase();\r\n        if (func = self.commands.exec[customCommand]) {\r\n          func(customCommand, ui, value);\r\n          self.editor.fire('ExecCommand', {\r\n            command: command,\r\n            ui: ui,\r\n            value: value\r\n          });\r\n          return true;\r\n        }\r\n        each$4(this.editor.plugins, function (p) {\r\n          if (p.execCommand && p.execCommand(command, ui, value)) {\r\n            self.editor.fire('ExecCommand', {\r\n              command: command,\r\n              ui: ui,\r\n              value: value\r\n            });\r\n            state = true;\r\n            return false;\r\n          }\r\n        });\r\n        if (state) {\r\n          return state;\r\n        }\r\n        if (self.editor.theme && self.editor.theme.execCommand && self.editor.theme.execCommand(command, ui, value)) {\r\n          self.editor.fire('ExecCommand', {\r\n            command: command,\r\n            ui: ui,\r\n            value: value\r\n          });\r\n          return true;\r\n        }\r\n        try {\r\n          state = self.editor.getDoc().execCommand(command, ui, value);\r\n        } catch (ex) {\r\n        }\r\n        if (state) {\r\n          self.editor.fire('ExecCommand', {\r\n            command: command,\r\n            ui: ui,\r\n            value: value\r\n          });\r\n          return true;\r\n        }\r\n        return false;\r\n      };\r\n      EditorCommands.prototype.queryCommandState = function (command) {\r\n        var func;\r\n        if (this.editor.quirks.isHidden() || this.editor.removed) {\r\n          return;\r\n        }\r\n        command = command.toLowerCase();\r\n        if (func = this.commands.state[command]) {\r\n          return func(command);\r\n        }\r\n        try {\r\n          return this.editor.getDoc().queryCommandState(command);\r\n        } catch (ex) {\r\n        }\r\n        return false;\r\n      };\r\n      EditorCommands.prototype.queryCommandValue = function (command) {\r\n        var func;\r\n        if (this.editor.quirks.isHidden() || this.editor.removed) {\r\n          return;\r\n        }\r\n        command = command.toLowerCase();\r\n        if (func = this.commands.value[command]) {\r\n          return func(command);\r\n        }\r\n        try {\r\n          return this.editor.getDoc().queryCommandValue(command);\r\n        } catch (ex) {\r\n        }\r\n      };\r\n      EditorCommands.prototype.addCommands = function (commandList, type) {\r\n        if (type === void 0) {\r\n          type = 'exec';\r\n        }\r\n        var self = this;\r\n        each$4(commandList, function (callback, command) {\r\n          each$4(command.toLowerCase().split(','), function (command) {\r\n            self.commands[type][command] = callback;\r\n          });\r\n        });\r\n      };\r\n      EditorCommands.prototype.addCommand = function (command, callback, scope) {\r\n        var _this = this;\r\n        command = command.toLowerCase();\r\n        this.commands.exec[command] = function (command, ui, value, args) {\r\n          return callback.call(scope || _this.editor, ui, value, args);\r\n        };\r\n      };\r\n      EditorCommands.prototype.queryCommandSupported = function (command) {\r\n        command = command.toLowerCase();\r\n        if (this.commands.exec[command]) {\r\n          return true;\r\n        }\r\n        try {\r\n          return this.editor.getDoc().queryCommandSupported(command);\r\n        } catch (ex) {\r\n        }\r\n        return false;\r\n      };\r\n      EditorCommands.prototype.addQueryStateHandler = function (command, callback, scope) {\r\n        var _this = this;\r\n        command = command.toLowerCase();\r\n        this.commands.state[command] = function () {\r\n          return callback.call(scope || _this.editor);\r\n        };\r\n      };\r\n      EditorCommands.prototype.addQueryValueHandler = function (command, callback, scope) {\r\n        var _this = this;\r\n        command = command.toLowerCase();\r\n        this.commands.value[command] = function () {\r\n          return callback.call(scope || _this.editor);\r\n        };\r\n      };\r\n      EditorCommands.prototype.hasCustomCommand = function (command) {\r\n        command = command.toLowerCase();\r\n        return !!this.commands.exec[command];\r\n      };\r\n      EditorCommands.prototype.execNativeCommand = function (command, ui, value) {\r\n        if (ui === undefined) {\r\n          ui = false;\r\n        }\r\n        if (value === undefined) {\r\n          value = null;\r\n        }\r\n        return this.editor.getDoc().execCommand(command, ui, value);\r\n      };\r\n      EditorCommands.prototype.isFormatMatch = function (name) {\r\n        return this.editor.formatter.match(name);\r\n      };\r\n      EditorCommands.prototype.toggleFormat = function (name, value) {\r\n        this.editor.formatter.toggle(name, value);\r\n        this.editor.nodeChanged();\r\n      };\r\n      EditorCommands.prototype.storeSelection = function (type) {\r\n        this.selectionBookmark = this.editor.selection.getBookmark(type);\r\n      };\r\n      EditorCommands.prototype.restoreSelection = function () {\r\n        this.editor.selection.moveToBookmark(this.selectionBookmark);\r\n      };\r\n      EditorCommands.prototype.setupCommands = function (editor) {\r\n        var self = this;\r\n        this.addCommands({\r\n          'mceResetDesignMode,mceBeginUndoLevel': noop,\r\n          'mceEndUndoLevel,mceAddUndoLevel': function () {\r\n            editor.undoManager.add();\r\n          },\r\n          'mceFocus': function (_command, _ui, value) {\r\n            focus(editor, value);\r\n          },\r\n          'Cut,Copy,Paste': function (command) {\r\n            var doc = editor.getDoc();\r\n            var failed;\r\n            try {\r\n              self.execNativeCommand(command);\r\n            } catch (ex) {\r\n              failed = true;\r\n            }\r\n            if (command === 'paste' && !doc.queryCommandEnabled(command)) {\r\n              failed = true;\r\n            }\r\n            if (failed || !doc.queryCommandSupported(command)) {\r\n              var msg = editor.translate('Your browser doesn\\'t support direct access to the clipboard. ' + 'Please use the Ctrl+X/C/V keyboard shortcuts instead.');\r\n              if (Env.mac) {\r\n                msg = msg.replace(/Ctrl\\+/g, '\\u2318+');\r\n              }\r\n              editor.notificationManager.open({\r\n                text: msg,\r\n                type: 'error'\r\n              });\r\n            }\r\n          },\r\n          'unlink': function () {\r\n            if (editor.selection.isCollapsed()) {\r\n              var elm = editor.dom.getParent(editor.selection.getStart(), 'a');\r\n              if (elm) {\r\n                editor.dom.remove(elm, true);\r\n              }\r\n              return;\r\n            }\r\n            editor.formatter.remove('link');\r\n          },\r\n          'JustifyLeft,JustifyCenter,JustifyRight,JustifyFull,JustifyNone': function (command) {\r\n            var align = command.substring(7);\r\n            if (align === 'full') {\r\n              align = 'justify';\r\n            }\r\n            each$4('left,center,right,justify'.split(','), function (name) {\r\n              if (align !== name) {\r\n                editor.formatter.remove('align' + name);\r\n              }\r\n            });\r\n            if (align !== 'none') {\r\n              self.toggleFormat('align' + align);\r\n            }\r\n          },\r\n          'InsertUnorderedList,InsertOrderedList': function (command) {\r\n            var listParent;\r\n            self.execNativeCommand(command);\r\n            var listElm = editor.dom.getParent(editor.selection.getNode(), 'ol,ul');\r\n            if (listElm) {\r\n              listParent = listElm.parentNode;\r\n              if (/^(H[1-6]|P|ADDRESS|PRE)$/.test(listParent.nodeName)) {\r\n                self.storeSelection();\r\n                editor.dom.split(listParent, listElm);\r\n                self.restoreSelection();\r\n              }\r\n            }\r\n          },\r\n          'Bold,Italic,Underline,Strikethrough,Superscript,Subscript': function (command) {\r\n            self.toggleFormat(command);\r\n          },\r\n          'ForeColor,HiliteColor': function (command, ui, value) {\r\n            self.toggleFormat(command, { value: value });\r\n          },\r\n          'FontName': function (command, ui, value) {\r\n            fontNameAction(editor, value);\r\n          },\r\n          'FontSize': function (command, ui, value) {\r\n            fontSizeAction(editor, value);\r\n          },\r\n          'LineHeight': function (command, ui, value) {\r\n            lineHeightAction(editor, value);\r\n          },\r\n          'Lang': function (command, ui, lang) {\r\n            self.toggleFormat(command, {\r\n              value: lang.code,\r\n              customValue: lang.customCode\r\n            });\r\n          },\r\n          'RemoveFormat': function (command) {\r\n            editor.formatter.remove(command);\r\n          },\r\n          'mceBlockQuote': function () {\r\n            self.toggleFormat('blockquote');\r\n          },\r\n          'FormatBlock': function (command, ui, value) {\r\n            return self.toggleFormat(value || 'p');\r\n          },\r\n          'mceCleanup': function () {\r\n            var bookmark = editor.selection.getBookmark();\r\n            editor.setContent(editor.getContent());\r\n            editor.selection.moveToBookmark(bookmark);\r\n          },\r\n          'mceRemoveNode': function (command, ui, value) {\r\n            var node = value || editor.selection.getNode();\r\n            if (node !== editor.getBody()) {\r\n              self.storeSelection();\r\n              editor.dom.remove(node, true);\r\n              self.restoreSelection();\r\n            }\r\n          },\r\n          'mceSelectNodeDepth': function (command, ui, value) {\r\n            var counter = 0;\r\n            editor.dom.getParent(editor.selection.getNode(), function (node) {\r\n              if (node.nodeType === 1 && counter++ === value) {\r\n                editor.selection.select(node);\r\n                return false;\r\n              }\r\n            }, editor.getBody());\r\n          },\r\n          'mceSelectNode': function (command, ui, value) {\r\n            editor.selection.select(value);\r\n          },\r\n          'mceInsertContent': function (command, ui, value) {\r\n            insertAtCaret(editor, value);\r\n          },\r\n          'mceInsertRawHTML': function (command, ui, value) {\r\n            editor.selection.setContent('tiny_mce_marker');\r\n            var content = editor.getContent();\r\n            editor.setContent(content.replace(/tiny_mce_marker/g, function () {\r\n              return value;\r\n            }));\r\n          },\r\n          'mceInsertNewLine': function (command, ui, value) {\r\n            insert(editor, value);\r\n          },\r\n          'mceToggleFormat': function (command, ui, value) {\r\n            self.toggleFormat(value);\r\n          },\r\n          'mceSetContent': function (command, ui, value) {\r\n            editor.setContent(value);\r\n          },\r\n          'Indent,Outdent': function (command) {\r\n            handle(editor, command);\r\n          },\r\n          'mceRepaint': noop,\r\n          'InsertHorizontalRule': function () {\r\n            editor.execCommand('mceInsertContent', false, '<hr />');\r\n          },\r\n          'mceToggleVisualAid': function () {\r\n            editor.hasVisual = !editor.hasVisual;\r\n            editor.addVisual();\r\n          },\r\n          'mceReplaceContent': function (command, ui, value) {\r\n            editor.execCommand('mceInsertContent', false, value.replace(/\\{\\$selection\\}/g, editor.selection.getContent({ format: 'text' })));\r\n          },\r\n          'mceInsertLink': function (command, ui, value) {\r\n            if (typeof value === 'string') {\r\n              value = { href: value };\r\n            }\r\n            var anchor = editor.dom.getParent(editor.selection.getNode(), 'a');\r\n            value.href = value.href.replace(/ /g, '%20');\r\n            if (!anchor || !value.href) {\r\n              editor.formatter.remove('link');\r\n            }\r\n            if (value.href) {\r\n              editor.formatter.apply('link', value, anchor);\r\n            }\r\n          },\r\n          'selectAll': function () {\r\n            var editingHost = editor.dom.getParent(editor.selection.getStart(), isContentEditableTrue$4);\r\n            if (editingHost) {\r\n              var rng = editor.dom.createRng();\r\n              rng.selectNodeContents(editingHost);\r\n              editor.selection.setRng(rng);\r\n            }\r\n          },\r\n          'mceNewDocument': function () {\r\n            editor.setContent('');\r\n          },\r\n          'InsertLineBreak': function (command, ui, value) {\r\n            insert$1(editor, value);\r\n            return true;\r\n          }\r\n        });\r\n        var alignStates = function (name) {\r\n          return function () {\r\n            var selection = editor.selection;\r\n            var nodes = selection.isCollapsed() ? [editor.dom.getParent(selection.getNode(), editor.dom.isBlock)] : selection.getSelectedBlocks();\r\n            var matches = map(nodes, function (node) {\r\n              return !!editor.formatter.matchNode(node, name);\r\n            });\r\n            return inArray(matches, true) !== -1;\r\n          };\r\n        };\r\n        self.addCommands({\r\n          'JustifyLeft': alignStates('alignleft'),\r\n          'JustifyCenter': alignStates('aligncenter'),\r\n          'JustifyRight': alignStates('alignright'),\r\n          'JustifyFull': alignStates('alignjustify'),\r\n          'Bold,Italic,Underline,Strikethrough,Superscript,Subscript': function (command) {\r\n            return self.isFormatMatch(command);\r\n          },\r\n          'mceBlockQuote': function () {\r\n            return self.isFormatMatch('blockquote');\r\n          },\r\n          'Outdent': function () {\r\n            return canOutdent(editor);\r\n          },\r\n          'InsertUnorderedList,InsertOrderedList': function (command) {\r\n            var list = editor.dom.getParent(editor.selection.getNode(), 'ul,ol');\r\n            return list && (command === 'insertunorderedlist' && list.tagName === 'UL' || command === 'insertorderedlist' && list.tagName === 'OL');\r\n          }\r\n        }, 'state');\r\n        self.addCommands({\r\n          Undo: function () {\r\n            editor.undoManager.undo();\r\n          },\r\n          Redo: function () {\r\n            editor.undoManager.redo();\r\n          }\r\n        });\r\n        self.addQueryValueHandler('FontName', function () {\r\n          return fontNameQuery(editor);\r\n        }, this);\r\n        self.addQueryValueHandler('FontSize', function () {\r\n          return fontSizeQuery(editor);\r\n        }, this);\r\n        self.addQueryValueHandler('LineHeight', function () {\r\n          return lineHeightQuery(editor);\r\n        }, this);\r\n      };\r\n      return EditorCommands;\r\n    }();\r\n\r\n    var internalContentEditableAttr = 'data-mce-contenteditable';\r\n    var toggleClass = function (elm, cls, state) {\r\n      if (has(elm, cls) && state === false) {\r\n        remove$3(elm, cls);\r\n      } else if (state) {\r\n        add$1(elm, cls);\r\n      }\r\n    };\r\n    var setEditorCommandState = function (editor, cmd, state) {\r\n      try {\r\n        editor.getDoc().execCommand(cmd, false, String(state));\r\n      } catch (ex) {\r\n      }\r\n    };\r\n    var setContentEditable = function (elm, state) {\r\n      elm.dom.contentEditable = state ? 'true' : 'false';\r\n    };\r\n    var switchOffContentEditableTrue = function (elm) {\r\n      each$k(descendants(elm, '*[contenteditable=\"true\"]'), function (elm) {\r\n        set$1(elm, internalContentEditableAttr, 'true');\r\n        setContentEditable(elm, false);\r\n      });\r\n    };\r\n    var switchOnContentEditableTrue = function (elm) {\r\n      each$k(descendants(elm, '*[' + internalContentEditableAttr + '=\"true\"]'), function (elm) {\r\n        remove$6(elm, internalContentEditableAttr);\r\n        setContentEditable(elm, true);\r\n      });\r\n    };\r\n    var removeFakeSelection = function (editor) {\r\n      Optional.from(editor.selection.getNode()).each(function (elm) {\r\n        elm.removeAttribute('data-mce-selected');\r\n      });\r\n    };\r\n    var restoreFakeSelection = function (editor) {\r\n      editor.selection.setRng(editor.selection.getRng());\r\n    };\r\n    var toggleReadOnly = function (editor, state) {\r\n      var body = SugarElement.fromDom(editor.getBody());\r\n      toggleClass(body, 'mce-content-readonly', state);\r\n      if (state) {\r\n        editor.selection.controlSelection.hideResizeRect();\r\n        editor._selectionOverrides.hideFakeCaret();\r\n        removeFakeSelection(editor);\r\n        editor.readonly = true;\r\n        setContentEditable(body, false);\r\n        switchOffContentEditableTrue(body);\r\n      } else {\r\n        editor.readonly = false;\r\n        setContentEditable(body, true);\r\n        switchOnContentEditableTrue(body);\r\n        setEditorCommandState(editor, 'StyleWithCSS', false);\r\n        setEditorCommandState(editor, 'enableInlineTableEditing', false);\r\n        setEditorCommandState(editor, 'enableObjectResizing', false);\r\n        if (hasEditorOrUiFocus(editor)) {\r\n          editor.focus();\r\n        }\r\n        restoreFakeSelection(editor);\r\n        editor.nodeChanged();\r\n      }\r\n    };\r\n    var isReadOnly = function (editor) {\r\n      return editor.readonly;\r\n    };\r\n    var registerFilters = function (editor) {\r\n      editor.parser.addAttributeFilter('contenteditable', function (nodes) {\r\n        if (isReadOnly(editor)) {\r\n          each$k(nodes, function (node) {\r\n            node.attr(internalContentEditableAttr, node.attr('contenteditable'));\r\n            node.attr('contenteditable', 'false');\r\n          });\r\n        }\r\n      });\r\n      editor.serializer.addAttributeFilter(internalContentEditableAttr, function (nodes) {\r\n        if (isReadOnly(editor)) {\r\n          each$k(nodes, function (node) {\r\n            node.attr('contenteditable', node.attr(internalContentEditableAttr));\r\n          });\r\n        }\r\n      });\r\n      editor.serializer.addTempAttr(internalContentEditableAttr);\r\n    };\r\n    var registerReadOnlyContentFilters = function (editor) {\r\n      if (editor.serializer) {\r\n        registerFilters(editor);\r\n      } else {\r\n        editor.on('PreInit', function () {\r\n          registerFilters(editor);\r\n        });\r\n      }\r\n    };\r\n    var isClickEvent = function (e) {\r\n      return e.type === 'click';\r\n    };\r\n    var getAnchorHrefOpt = function (editor, elm) {\r\n      var isRoot = function (elm) {\r\n        return eq(elm, SugarElement.fromDom(editor.getBody()));\r\n      };\r\n      return closest$2(elm, 'a', isRoot).bind(function (a) {\r\n        return getOpt(a, 'href');\r\n      });\r\n    };\r\n    var processReadonlyEvents = function (editor, e) {\r\n      if (isClickEvent(e) && !VK.metaKeyPressed(e)) {\r\n        var elm = SugarElement.fromDom(e.target);\r\n        getAnchorHrefOpt(editor, elm).each(function (href) {\r\n          e.preventDefault();\r\n          if (/^#/.test(href)) {\r\n            var targetEl = editor.dom.select(href + ',[name=\"' + removeLeading(href, '#') + '\"]');\r\n            if (targetEl.length) {\r\n              editor.selection.scrollIntoView(targetEl[0], true);\r\n            }\r\n          } else {\r\n            window.open(href, '_blank', 'rel=noopener noreferrer,menubar=yes,toolbar=yes,location=yes,status=yes,resizable=yes,scrollbars=yes');\r\n          }\r\n        });\r\n      }\r\n    };\r\n    var registerReadOnlySelectionBlockers = function (editor) {\r\n      editor.on('ShowCaret', function (e) {\r\n        if (isReadOnly(editor)) {\r\n          e.preventDefault();\r\n        }\r\n      });\r\n      editor.on('ObjectSelected', function (e) {\r\n        if (isReadOnly(editor)) {\r\n          e.preventDefault();\r\n        }\r\n      });\r\n    };\r\n\r\n    var nativeEvents = Tools.makeMap('focus blur focusin focusout click dblclick mousedown mouseup mousemove mouseover beforepaste paste cut copy selectionchange ' + 'mouseout mouseenter mouseleave wheel keydown keypress keyup input beforeinput contextmenu dragstart dragend dragover ' + 'draggesture dragdrop drop drag submit ' + 'compositionstart compositionend compositionupdate touchstart touchmove touchend touchcancel', ' ');\r\n    var EventDispatcher = function () {\r\n      function EventDispatcher(settings) {\r\n        this.bindings = {};\r\n        this.settings = settings || {};\r\n        this.scope = this.settings.scope || this;\r\n        this.toggleEvent = this.settings.toggleEvent || never;\r\n      }\r\n      EventDispatcher.isNative = function (name) {\r\n        return !!nativeEvents[name.toLowerCase()];\r\n      };\r\n      EventDispatcher.prototype.fire = function (name, args) {\r\n        var lcName = name.toLowerCase();\r\n        var event = normalize$3(lcName, args || {}, this.scope);\r\n        if (this.settings.beforeFire) {\r\n          this.settings.beforeFire(event);\r\n        }\r\n        var handlers = this.bindings[lcName];\r\n        if (handlers) {\r\n          for (var i = 0, l = handlers.length; i < l; i++) {\r\n            var callback = handlers[i];\r\n            if (callback.removed) {\r\n              continue;\r\n            }\r\n            if (callback.once) {\r\n              this.off(lcName, callback.func);\r\n            }\r\n            if (event.isImmediatePropagationStopped()) {\r\n              return event;\r\n            }\r\n            if (callback.func.call(this.scope, event) === false) {\r\n              event.preventDefault();\r\n              return event;\r\n            }\r\n          }\r\n        }\r\n        return event;\r\n      };\r\n      EventDispatcher.prototype.on = function (name, callback, prepend, extra) {\r\n        if (callback === false) {\r\n          callback = never;\r\n        }\r\n        if (callback) {\r\n          var wrappedCallback = {\r\n            func: callback,\r\n            removed: false\r\n          };\r\n          if (extra) {\r\n            Tools.extend(wrappedCallback, extra);\r\n          }\r\n          var names = name.toLowerCase().split(' ');\r\n          var i = names.length;\r\n          while (i--) {\r\n            var currentName = names[i];\r\n            var handlers = this.bindings[currentName];\r\n            if (!handlers) {\r\n              handlers = [];\r\n              this.toggleEvent(currentName, true);\r\n            }\r\n            if (prepend) {\r\n              handlers = __spreadArray([wrappedCallback], handlers, true);\r\n            } else {\r\n              handlers = __spreadArray(__spreadArray([], handlers, true), [wrappedCallback], false);\r\n            }\r\n            this.bindings[currentName] = handlers;\r\n          }\r\n        }\r\n        return this;\r\n      };\r\n      EventDispatcher.prototype.off = function (name, callback) {\r\n        var _this = this;\r\n        if (name) {\r\n          var names = name.toLowerCase().split(' ');\r\n          var i = names.length;\r\n          while (i--) {\r\n            var currentName = names[i];\r\n            var handlers = this.bindings[currentName];\r\n            if (!currentName) {\r\n              each$j(this.bindings, function (_value, bindingName) {\r\n                _this.toggleEvent(bindingName, false);\r\n                delete _this.bindings[bindingName];\r\n              });\r\n              return this;\r\n            }\r\n            if (handlers) {\r\n              if (!callback) {\r\n                handlers.length = 0;\r\n              } else {\r\n                var filteredHandlers = partition(handlers, function (handler) {\r\n                  return handler.func === callback;\r\n                });\r\n                handlers = filteredHandlers.fail;\r\n                this.bindings[currentName] = handlers;\r\n                each$k(filteredHandlers.pass, function (handler) {\r\n                  handler.removed = true;\r\n                });\r\n              }\r\n              if (!handlers.length) {\r\n                this.toggleEvent(name, false);\r\n                delete this.bindings[currentName];\r\n              }\r\n            }\r\n          }\r\n        } else {\r\n          each$j(this.bindings, function (_value, name) {\r\n            _this.toggleEvent(name, false);\r\n          });\r\n          this.bindings = {};\r\n        }\r\n        return this;\r\n      };\r\n      EventDispatcher.prototype.once = function (name, callback, prepend) {\r\n        return this.on(name, callback, prepend, { once: true });\r\n      };\r\n      EventDispatcher.prototype.has = function (name) {\r\n        name = name.toLowerCase();\r\n        return !(!this.bindings[name] || this.bindings[name].length === 0);\r\n      };\r\n      return EventDispatcher;\r\n    }();\r\n\r\n    var getEventDispatcher = function (obj) {\r\n      if (!obj._eventDispatcher) {\r\n        obj._eventDispatcher = new EventDispatcher({\r\n          scope: obj,\r\n          toggleEvent: function (name, state) {\r\n            if (EventDispatcher.isNative(name) && obj.toggleNativeEvent) {\r\n              obj.toggleNativeEvent(name, state);\r\n            }\r\n          }\r\n        });\r\n      }\r\n      return obj._eventDispatcher;\r\n    };\r\n    var Observable = {\r\n      fire: function (name, args, bubble) {\r\n        var self = this;\r\n        if (self.removed && name !== 'remove' && name !== 'detach') {\r\n          return args;\r\n        }\r\n        var dispatcherArgs = getEventDispatcher(self).fire(name, args);\r\n        if (bubble !== false && self.parent) {\r\n          var parent_1 = self.parent();\r\n          while (parent_1 && !dispatcherArgs.isPropagationStopped()) {\r\n            parent_1.fire(name, dispatcherArgs, false);\r\n            parent_1 = parent_1.parent();\r\n          }\r\n        }\r\n        return dispatcherArgs;\r\n      },\r\n      on: function (name, callback, prepend) {\r\n        return getEventDispatcher(this).on(name, callback, prepend);\r\n      },\r\n      off: function (name, callback) {\r\n        return getEventDispatcher(this).off(name, callback);\r\n      },\r\n      once: function (name, callback) {\r\n        return getEventDispatcher(this).once(name, callback);\r\n      },\r\n      hasEventListeners: function (name) {\r\n        return getEventDispatcher(this).has(name);\r\n      }\r\n    };\r\n\r\n    var DOM$2 = DOMUtils.DOM;\r\n    var customEventRootDelegates;\r\n    var getEventTarget = function (editor, eventName) {\r\n      if (eventName === 'selectionchange') {\r\n        return editor.getDoc();\r\n      }\r\n      if (!editor.inline && /^mouse|touch|click|contextmenu|drop|dragover|dragend/.test(eventName)) {\r\n        return editor.getDoc().documentElement;\r\n      }\r\n      var eventRoot = getEventRoot(editor);\r\n      if (eventRoot) {\r\n        if (!editor.eventRoot) {\r\n          editor.eventRoot = DOM$2.select(eventRoot)[0];\r\n        }\r\n        return editor.eventRoot;\r\n      }\r\n      return editor.getBody();\r\n    };\r\n    var isListening = function (editor) {\r\n      return !editor.hidden && !isReadOnly(editor);\r\n    };\r\n    var fireEvent = function (editor, eventName, e) {\r\n      if (isListening(editor)) {\r\n        editor.fire(eventName, e);\r\n      } else if (isReadOnly(editor)) {\r\n        processReadonlyEvents(editor, e);\r\n      }\r\n    };\r\n    var bindEventDelegate = function (editor, eventName) {\r\n      var delegate;\r\n      if (!editor.delegates) {\r\n        editor.delegates = {};\r\n      }\r\n      if (editor.delegates[eventName] || editor.removed) {\r\n        return;\r\n      }\r\n      var eventRootElm = getEventTarget(editor, eventName);\r\n      if (getEventRoot(editor)) {\r\n        if (!customEventRootDelegates) {\r\n          customEventRootDelegates = {};\r\n          editor.editorManager.on('removeEditor', function () {\r\n            if (!editor.editorManager.activeEditor) {\r\n              if (customEventRootDelegates) {\r\n                each$j(customEventRootDelegates, function (_value, name) {\r\n                  editor.dom.unbind(getEventTarget(editor, name));\r\n                });\r\n                customEventRootDelegates = null;\r\n              }\r\n            }\r\n          });\r\n        }\r\n        if (customEventRootDelegates[eventName]) {\r\n          return;\r\n        }\r\n        delegate = function (e) {\r\n          var target = e.target;\r\n          var editors = editor.editorManager.get();\r\n          var i = editors.length;\r\n          while (i--) {\r\n            var body = editors[i].getBody();\r\n            if (body === target || DOM$2.isChildOf(target, body)) {\r\n              fireEvent(editors[i], eventName, e);\r\n            }\r\n          }\r\n        };\r\n        customEventRootDelegates[eventName] = delegate;\r\n        DOM$2.bind(eventRootElm, eventName, delegate);\r\n      } else {\r\n        delegate = function (e) {\r\n          fireEvent(editor, eventName, e);\r\n        };\r\n        DOM$2.bind(eventRootElm, eventName, delegate);\r\n        editor.delegates[eventName] = delegate;\r\n      }\r\n    };\r\n    var EditorObservable = __assign(__assign({}, Observable), {\r\n      bindPendingEventDelegates: function () {\r\n        var self = this;\r\n        Tools.each(self._pendingNativeEvents, function (name) {\r\n          bindEventDelegate(self, name);\r\n        });\r\n      },\r\n      toggleNativeEvent: function (name, state) {\r\n        var self = this;\r\n        if (name === 'focus' || name === 'blur') {\r\n          return;\r\n        }\r\n        if (self.removed) {\r\n          return;\r\n        }\r\n        if (state) {\r\n          if (self.initialized) {\r\n            bindEventDelegate(self, name);\r\n          } else {\r\n            if (!self._pendingNativeEvents) {\r\n              self._pendingNativeEvents = [name];\r\n            } else {\r\n              self._pendingNativeEvents.push(name);\r\n            }\r\n          }\r\n        } else if (self.initialized) {\r\n          self.dom.unbind(getEventTarget(self, name), name, self.delegates[name]);\r\n          delete self.delegates[name];\r\n        }\r\n      },\r\n      unbindAllNativeEvents: function () {\r\n        var self = this;\r\n        var body = self.getBody();\r\n        var dom = self.dom;\r\n        if (self.delegates) {\r\n          each$j(self.delegates, function (value, name) {\r\n            self.dom.unbind(getEventTarget(self, name), name, value);\r\n          });\r\n          delete self.delegates;\r\n        }\r\n        if (!self.inline && body && dom) {\r\n          body.onload = null;\r\n          dom.unbind(self.getWin());\r\n          dom.unbind(self.getDoc());\r\n        }\r\n        if (dom) {\r\n          dom.unbind(body);\r\n          dom.unbind(self.getContainer());\r\n        }\r\n      }\r\n    });\r\n\r\n    var defaultModes = [\r\n      'design',\r\n      'readonly'\r\n    ];\r\n    var switchToMode = function (editor, activeMode, availableModes, mode) {\r\n      var oldMode = availableModes[activeMode.get()];\r\n      var newMode = availableModes[mode];\r\n      try {\r\n        newMode.activate();\r\n      } catch (e) {\r\n        console.error('problem while activating editor mode ' + mode + ':', e);\r\n        return;\r\n      }\r\n      oldMode.deactivate();\r\n      if (oldMode.editorReadOnly !== newMode.editorReadOnly) {\r\n        toggleReadOnly(editor, newMode.editorReadOnly);\r\n      }\r\n      activeMode.set(mode);\r\n      fireSwitchMode(editor, mode);\r\n    };\r\n    var setMode = function (editor, availableModes, activeMode, mode) {\r\n      if (mode === activeMode.get()) {\r\n        return;\r\n      } else if (!has$2(availableModes, mode)) {\r\n        throw new Error('Editor mode \\'' + mode + '\\' is invalid');\r\n      }\r\n      if (editor.initialized) {\r\n        switchToMode(editor, activeMode, availableModes, mode);\r\n      } else {\r\n        editor.on('init', function () {\r\n          return switchToMode(editor, activeMode, availableModes, mode);\r\n        });\r\n      }\r\n    };\r\n    var registerMode = function (availableModes, mode, api) {\r\n      var _a;\r\n      if (contains$3(defaultModes, mode)) {\r\n        throw new Error('Cannot override default mode ' + mode);\r\n      }\r\n      return __assign(__assign({}, availableModes), (_a = {}, _a[mode] = __assign(__assign({}, api), {\r\n        deactivate: function () {\r\n          try {\r\n            api.deactivate();\r\n          } catch (e) {\r\n            console.error('problem while deactivating editor mode ' + mode + ':', e);\r\n          }\r\n        }\r\n      }), _a));\r\n    };\r\n\r\n    var create$4 = function (editor) {\r\n      var activeMode = Cell('design');\r\n      var availableModes = Cell({\r\n        design: {\r\n          activate: noop,\r\n          deactivate: noop,\r\n          editorReadOnly: false\r\n        },\r\n        readonly: {\r\n          activate: noop,\r\n          deactivate: noop,\r\n          editorReadOnly: true\r\n        }\r\n      });\r\n      registerReadOnlyContentFilters(editor);\r\n      registerReadOnlySelectionBlockers(editor);\r\n      return {\r\n        isReadOnly: function () {\r\n          return isReadOnly(editor);\r\n        },\r\n        set: function (mode) {\r\n          return setMode(editor, availableModes.get(), activeMode, mode);\r\n        },\r\n        get: function () {\r\n          return activeMode.get();\r\n        },\r\n        register: function (mode, api) {\r\n          availableModes.set(registerMode(availableModes.get(), mode, api));\r\n        }\r\n      };\r\n    };\r\n\r\n    var each$3 = Tools.each, explode$1 = Tools.explode;\r\n    var keyCodeLookup = {\r\n      f1: 112,\r\n      f2: 113,\r\n      f3: 114,\r\n      f4: 115,\r\n      f5: 116,\r\n      f6: 117,\r\n      f7: 118,\r\n      f8: 119,\r\n      f9: 120,\r\n      f10: 121,\r\n      f11: 122,\r\n      f12: 123\r\n    };\r\n    var modifierNames = Tools.makeMap('alt,ctrl,shift,meta,access');\r\n    var parseShortcut = function (pattern) {\r\n      var key;\r\n      var shortcut = {};\r\n      each$3(explode$1(pattern.toLowerCase(), '+'), function (value) {\r\n        if (value in modifierNames) {\r\n          shortcut[value] = true;\r\n        } else {\r\n          if (/^[0-9]{2,}$/.test(value)) {\r\n            shortcut.keyCode = parseInt(value, 10);\r\n          } else {\r\n            shortcut.charCode = value.charCodeAt(0);\r\n            shortcut.keyCode = keyCodeLookup[value] || value.toUpperCase().charCodeAt(0);\r\n          }\r\n        }\r\n      });\r\n      var id = [shortcut.keyCode];\r\n      for (key in modifierNames) {\r\n        if (shortcut[key]) {\r\n          id.push(key);\r\n        } else {\r\n          shortcut[key] = false;\r\n        }\r\n      }\r\n      shortcut.id = id.join(',');\r\n      if (shortcut.access) {\r\n        shortcut.alt = true;\r\n        if (Env.mac) {\r\n          shortcut.ctrl = true;\r\n        } else {\r\n          shortcut.shift = true;\r\n        }\r\n      }\r\n      if (shortcut.meta) {\r\n        if (Env.mac) {\r\n          shortcut.meta = true;\r\n        } else {\r\n          shortcut.ctrl = true;\r\n          shortcut.meta = false;\r\n        }\r\n      }\r\n      return shortcut;\r\n    };\r\n    var Shortcuts = function () {\r\n      function Shortcuts(editor) {\r\n        this.shortcuts = {};\r\n        this.pendingPatterns = [];\r\n        this.editor = editor;\r\n        var self = this;\r\n        editor.on('keyup keypress keydown', function (e) {\r\n          if ((self.hasModifier(e) || self.isFunctionKey(e)) && !e.isDefaultPrevented()) {\r\n            each$3(self.shortcuts, function (shortcut) {\r\n              if (self.matchShortcut(e, shortcut)) {\r\n                self.pendingPatterns = shortcut.subpatterns.slice(0);\r\n                if (e.type === 'keydown') {\r\n                  self.executeShortcutAction(shortcut);\r\n                }\r\n                return true;\r\n              }\r\n            });\r\n            if (self.matchShortcut(e, self.pendingPatterns[0])) {\r\n              if (self.pendingPatterns.length === 1) {\r\n                if (e.type === 'keydown') {\r\n                  self.executeShortcutAction(self.pendingPatterns[0]);\r\n                }\r\n              }\r\n              self.pendingPatterns.shift();\r\n            }\r\n          }\r\n        });\r\n      }\r\n      Shortcuts.prototype.add = function (pattern, desc, cmdFunc, scope) {\r\n        var self = this;\r\n        var func = self.normalizeCommandFunc(cmdFunc);\r\n        each$3(explode$1(Tools.trim(pattern)), function (pattern) {\r\n          var shortcut = self.createShortcut(pattern, desc, func, scope);\r\n          self.shortcuts[shortcut.id] = shortcut;\r\n        });\r\n        return true;\r\n      };\r\n      Shortcuts.prototype.remove = function (pattern) {\r\n        var shortcut = this.createShortcut(pattern);\r\n        if (this.shortcuts[shortcut.id]) {\r\n          delete this.shortcuts[shortcut.id];\r\n          return true;\r\n        }\r\n        return false;\r\n      };\r\n      Shortcuts.prototype.normalizeCommandFunc = function (cmdFunc) {\r\n        var self = this;\r\n        var cmd = cmdFunc;\r\n        if (typeof cmd === 'string') {\r\n          return function () {\r\n            self.editor.execCommand(cmd, false, null);\r\n          };\r\n        } else if (Tools.isArray(cmd)) {\r\n          return function () {\r\n            self.editor.execCommand(cmd[0], cmd[1], cmd[2]);\r\n          };\r\n        } else {\r\n          return cmd;\r\n        }\r\n      };\r\n      Shortcuts.prototype.createShortcut = function (pattern, desc, cmdFunc, scope) {\r\n        var shortcuts = Tools.map(explode$1(pattern, '>'), parseShortcut);\r\n        shortcuts[shortcuts.length - 1] = Tools.extend(shortcuts[shortcuts.length - 1], {\r\n          func: cmdFunc,\r\n          scope: scope || this.editor\r\n        });\r\n        return Tools.extend(shortcuts[0], {\r\n          desc: this.editor.translate(desc),\r\n          subpatterns: shortcuts.slice(1)\r\n        });\r\n      };\r\n      Shortcuts.prototype.hasModifier = function (e) {\r\n        return e.altKey || e.ctrlKey || e.metaKey;\r\n      };\r\n      Shortcuts.prototype.isFunctionKey = function (e) {\r\n        return e.type === 'keydown' && e.keyCode >= 112 && e.keyCode <= 123;\r\n      };\r\n      Shortcuts.prototype.matchShortcut = function (e, shortcut) {\r\n        if (!shortcut) {\r\n          return false;\r\n        }\r\n        if (shortcut.ctrl !== e.ctrlKey || shortcut.meta !== e.metaKey) {\r\n          return false;\r\n        }\r\n        if (shortcut.alt !== e.altKey || shortcut.shift !== e.shiftKey) {\r\n          return false;\r\n        }\r\n        if (e.keyCode === shortcut.keyCode || e.charCode && e.charCode === shortcut.charCode) {\r\n          e.preventDefault();\r\n          return true;\r\n        }\r\n        return false;\r\n      };\r\n      Shortcuts.prototype.executeShortcutAction = function (shortcut) {\r\n        return shortcut.func ? shortcut.func.call(shortcut.scope) : null;\r\n      };\r\n      return Shortcuts;\r\n    }();\r\n\r\n    var create$3 = function () {\r\n      var buttons = {};\r\n      var menuItems = {};\r\n      var popups = {};\r\n      var icons = {};\r\n      var contextMenus = {};\r\n      var contextToolbars = {};\r\n      var sidebars = {};\r\n      var add = function (collection, type) {\r\n        return function (name, spec) {\r\n          return collection[name.toLowerCase()] = __assign(__assign({}, spec), { type: type });\r\n        };\r\n      };\r\n      var addIcon = function (name, svgData) {\r\n        return icons[name.toLowerCase()] = svgData;\r\n      };\r\n      return {\r\n        addButton: add(buttons, 'button'),\r\n        addGroupToolbarButton: add(buttons, 'grouptoolbarbutton'),\r\n        addToggleButton: add(buttons, 'togglebutton'),\r\n        addMenuButton: add(buttons, 'menubutton'),\r\n        addSplitButton: add(buttons, 'splitbutton'),\r\n        addMenuItem: add(menuItems, 'menuitem'),\r\n        addNestedMenuItem: add(menuItems, 'nestedmenuitem'),\r\n        addToggleMenuItem: add(menuItems, 'togglemenuitem'),\r\n        addAutocompleter: add(popups, 'autocompleter'),\r\n        addContextMenu: add(contextMenus, 'contextmenu'),\r\n        addContextToolbar: add(contextToolbars, 'contexttoolbar'),\r\n        addContextForm: add(contextToolbars, 'contextform'),\r\n        addSidebar: add(sidebars, 'sidebar'),\r\n        addIcon: addIcon,\r\n        getAll: function () {\r\n          return {\r\n            buttons: buttons,\r\n            menuItems: menuItems,\r\n            icons: icons,\r\n            popups: popups,\r\n            contextMenus: contextMenus,\r\n            contextToolbars: contextToolbars,\r\n            sidebars: sidebars\r\n          };\r\n        }\r\n      };\r\n    };\r\n\r\n    var registry = function () {\r\n      var bridge = create$3();\r\n      return {\r\n        addAutocompleter: bridge.addAutocompleter,\r\n        addButton: bridge.addButton,\r\n        addContextForm: bridge.addContextForm,\r\n        addContextMenu: bridge.addContextMenu,\r\n        addContextToolbar: bridge.addContextToolbar,\r\n        addIcon: bridge.addIcon,\r\n        addMenuButton: bridge.addMenuButton,\r\n        addMenuItem: bridge.addMenuItem,\r\n        addNestedMenuItem: bridge.addNestedMenuItem,\r\n        addSidebar: bridge.addSidebar,\r\n        addSplitButton: bridge.addSplitButton,\r\n        addToggleButton: bridge.addToggleButton,\r\n        addGroupToolbarButton: bridge.addGroupToolbarButton,\r\n        addToggleMenuItem: bridge.addToggleMenuItem,\r\n        getAll: bridge.getAll\r\n      };\r\n    };\r\n\r\n    var DOM$1 = DOMUtils.DOM;\r\n    var extend$3 = Tools.extend, each$2 = Tools.each;\r\n    var resolve = Tools.resolve;\r\n    var ie = Env.ie;\r\n    var Editor = function () {\r\n      function Editor(id, settings, editorManager) {\r\n        var _this = this;\r\n        this.plugins = {};\r\n        this.contentCSS = [];\r\n        this.contentStyles = [];\r\n        this.loadedCSS = {};\r\n        this.isNotDirty = false;\r\n        this.editorManager = editorManager;\r\n        this.documentBaseUrl = editorManager.documentBaseURL;\r\n        extend$3(this, EditorObservable);\r\n        this.settings = getEditorSettings(this, id, this.documentBaseUrl, editorManager.defaultSettings, settings);\r\n        if (this.settings.suffix) {\r\n          editorManager.suffix = this.settings.suffix;\r\n        }\r\n        this.suffix = editorManager.suffix;\r\n        if (this.settings.base_url) {\r\n          editorManager._setBaseUrl(this.settings.base_url);\r\n        }\r\n        this.baseUri = editorManager.baseURI;\r\n        if (this.settings.referrer_policy) {\r\n          ScriptLoader.ScriptLoader._setReferrerPolicy(this.settings.referrer_policy);\r\n          DOMUtils.DOM.styleSheetLoader._setReferrerPolicy(this.settings.referrer_policy);\r\n        }\r\n        AddOnManager.languageLoad = this.settings.language_load;\r\n        AddOnManager.baseURL = editorManager.baseURL;\r\n        this.id = id;\r\n        this.setDirty(false);\r\n        this.documentBaseURI = new URI(this.settings.document_base_url, { base_uri: this.baseUri });\r\n        this.baseURI = this.baseUri;\r\n        this.inline = !!this.settings.inline;\r\n        this.shortcuts = new Shortcuts(this);\r\n        this.editorCommands = new EditorCommands(this);\r\n        if (this.settings.cache_suffix) {\r\n          Env.cacheSuffix = this.settings.cache_suffix.replace(/^[\\?\\&]+/, '');\r\n        }\r\n        this.ui = {\r\n          registry: registry(),\r\n          styleSheetLoader: undefined,\r\n          show: noop,\r\n          hide: noop,\r\n          enable: noop,\r\n          disable: noop,\r\n          isDisabled: never\r\n        };\r\n        var self = this;\r\n        var modeInstance = create$4(self);\r\n        this.mode = modeInstance;\r\n        this.setMode = modeInstance.set;\r\n        editorManager.fire('SetupEditor', { editor: this });\r\n        this.execCallback('setup', this);\r\n        this.$ = DomQuery.overrideDefaults(function () {\r\n          return {\r\n            context: _this.inline ? _this.getBody() : _this.getDoc(),\r\n            element: _this.getBody()\r\n          };\r\n        });\r\n      }\r\n      Editor.prototype.render = function () {\r\n        render(this);\r\n      };\r\n      Editor.prototype.focus = function (skipFocus) {\r\n        this.execCommand('mceFocus', false, skipFocus);\r\n      };\r\n      Editor.prototype.hasFocus = function () {\r\n        return hasFocus(this);\r\n      };\r\n      Editor.prototype.execCallback = function (name) {\r\n        var x = [];\r\n        for (var _i = 1; _i < arguments.length; _i++) {\r\n          x[_i - 1] = arguments[_i];\r\n        }\r\n        var self = this;\r\n        var callback = self.settings[name], scope;\r\n        if (!callback) {\r\n          return;\r\n        }\r\n        if (self.callbackLookup && (scope = self.callbackLookup[name])) {\r\n          callback = scope.func;\r\n          scope = scope.scope;\r\n        }\r\n        if (typeof callback === 'string') {\r\n          scope = callback.replace(/\\.\\w+$/, '');\r\n          scope = scope ? resolve(scope) : 0;\r\n          callback = resolve(callback);\r\n          self.callbackLookup = self.callbackLookup || {};\r\n          self.callbackLookup[name] = {\r\n            func: callback,\r\n            scope: scope\r\n          };\r\n        }\r\n        return callback.apply(scope || self, x);\r\n      };\r\n      Editor.prototype.translate = function (text) {\r\n        return I18n.translate(text);\r\n      };\r\n      Editor.prototype.getParam = function (name, defaultVal, type) {\r\n        return getParam(this, name, defaultVal, type);\r\n      };\r\n      Editor.prototype.hasPlugin = function (name, loaded) {\r\n        var hasPlugin = contains$3(getPlugins(this).split(/[ ,]/), name);\r\n        if (hasPlugin) {\r\n          return loaded ? PluginManager.get(name) !== undefined : true;\r\n        } else {\r\n          return false;\r\n        }\r\n      };\r\n      Editor.prototype.nodeChanged = function (args) {\r\n        this._nodeChangeDispatcher.nodeChanged(args);\r\n      };\r\n      Editor.prototype.addCommand = function (name, callback, scope) {\r\n        this.editorCommands.addCommand(name, callback, scope);\r\n      };\r\n      Editor.prototype.addQueryStateHandler = function (name, callback, scope) {\r\n        this.editorCommands.addQueryStateHandler(name, callback, scope);\r\n      };\r\n      Editor.prototype.addQueryValueHandler = function (name, callback, scope) {\r\n        this.editorCommands.addQueryValueHandler(name, callback, scope);\r\n      };\r\n      Editor.prototype.addShortcut = function (pattern, desc, cmdFunc, scope) {\r\n        this.shortcuts.add(pattern, desc, cmdFunc, scope);\r\n      };\r\n      Editor.prototype.execCommand = function (cmd, ui, value, args) {\r\n        return this.editorCommands.execCommand(cmd, ui, value, args);\r\n      };\r\n      Editor.prototype.queryCommandState = function (cmd) {\r\n        return this.editorCommands.queryCommandState(cmd);\r\n      };\r\n      Editor.prototype.queryCommandValue = function (cmd) {\r\n        return this.editorCommands.queryCommandValue(cmd);\r\n      };\r\n      Editor.prototype.queryCommandSupported = function (cmd) {\r\n        return this.editorCommands.queryCommandSupported(cmd);\r\n      };\r\n      Editor.prototype.show = function () {\r\n        var self = this;\r\n        if (self.hidden) {\r\n          self.hidden = false;\r\n          if (self.inline) {\r\n            self.getBody().contentEditable = 'true';\r\n          } else {\r\n            DOM$1.show(self.getContainer());\r\n            DOM$1.hide(self.id);\r\n          }\r\n          self.load();\r\n          self.fire('show');\r\n        }\r\n      };\r\n      Editor.prototype.hide = function () {\r\n        var self = this, doc = self.getDoc();\r\n        if (!self.hidden) {\r\n          if (ie && doc && !self.inline) {\r\n            doc.execCommand('SelectAll');\r\n          }\r\n          self.save();\r\n          if (self.inline) {\r\n            self.getBody().contentEditable = 'false';\r\n            if (self === self.editorManager.focusedEditor) {\r\n              self.editorManager.focusedEditor = null;\r\n            }\r\n          } else {\r\n            DOM$1.hide(self.getContainer());\r\n            DOM$1.setStyle(self.id, 'display', self.orgDisplay);\r\n          }\r\n          self.hidden = true;\r\n          self.fire('hide');\r\n        }\r\n      };\r\n      Editor.prototype.isHidden = function () {\r\n        return !!this.hidden;\r\n      };\r\n      Editor.prototype.setProgressState = function (state, time) {\r\n        this.fire('ProgressState', {\r\n          state: state,\r\n          time: time\r\n        });\r\n      };\r\n      Editor.prototype.load = function (args) {\r\n        var self = this;\r\n        var elm = self.getElement(), html;\r\n        if (self.removed) {\r\n          return '';\r\n        }\r\n        if (elm) {\r\n          args = args || {};\r\n          args.load = true;\r\n          var value = isTextareaOrInput(elm) ? elm.value : elm.innerHTML;\r\n          html = self.setContent(value, args);\r\n          args.element = elm;\r\n          if (!args.no_events) {\r\n            self.fire('LoadContent', args);\r\n          }\r\n          args.element = elm = null;\r\n          return html;\r\n        }\r\n      };\r\n      Editor.prototype.save = function (args) {\r\n        var self = this;\r\n        var elm = self.getElement(), html, form;\r\n        if (!elm || !self.initialized || self.removed) {\r\n          return;\r\n        }\r\n        args = args || {};\r\n        args.save = true;\r\n        args.element = elm;\r\n        html = args.content = self.getContent(args);\r\n        if (!args.no_events) {\r\n          self.fire('SaveContent', args);\r\n        }\r\n        if (args.format === 'raw') {\r\n          self.fire('RawSaveContent', args);\r\n        }\r\n        html = args.content;\r\n        if (!isTextareaOrInput(elm)) {\r\n          if (args.is_removing || !self.inline) {\r\n            elm.innerHTML = html;\r\n          }\r\n          if (form = DOM$1.getParent(self.id, 'form')) {\r\n            each$2(form.elements, function (elm) {\r\n              if (elm.name === self.id) {\r\n                elm.value = html;\r\n                return false;\r\n              }\r\n            });\r\n          }\r\n        } else {\r\n          elm.value = html;\r\n        }\r\n        args.element = elm = null;\r\n        if (args.set_dirty !== false) {\r\n          self.setDirty(false);\r\n        }\r\n        return html;\r\n      };\r\n      Editor.prototype.setContent = function (content, args) {\r\n        return setContent(this, content, args);\r\n      };\r\n      Editor.prototype.getContent = function (args) {\r\n        return getContent(this, args);\r\n      };\r\n      Editor.prototype.insertContent = function (content, args) {\r\n        if (args) {\r\n          content = extend$3({ content: content }, args);\r\n        }\r\n        this.execCommand('mceInsertContent', false, content);\r\n      };\r\n      Editor.prototype.resetContent = function (initialContent) {\r\n        if (initialContent === undefined) {\r\n          setContent(this, this.startContent, { format: 'raw' });\r\n        } else {\r\n          setContent(this, initialContent);\r\n        }\r\n        this.undoManager.reset();\r\n        this.setDirty(false);\r\n        this.nodeChanged();\r\n      };\r\n      Editor.prototype.isDirty = function () {\r\n        return !this.isNotDirty;\r\n      };\r\n      Editor.prototype.setDirty = function (state) {\r\n        var oldState = !this.isNotDirty;\r\n        this.isNotDirty = !state;\r\n        if (state && state !== oldState) {\r\n          this.fire('dirty');\r\n        }\r\n      };\r\n      Editor.prototype.getContainer = function () {\r\n        var self = this;\r\n        if (!self.container) {\r\n          self.container = DOM$1.get(self.editorContainer || self.id + '_parent');\r\n        }\r\n        return self.container;\r\n      };\r\n      Editor.prototype.getContentAreaContainer = function () {\r\n        return this.contentAreaContainer;\r\n      };\r\n      Editor.prototype.getElement = function () {\r\n        if (!this.targetElm) {\r\n          this.targetElm = DOM$1.get(this.id);\r\n        }\r\n        return this.targetElm;\r\n      };\r\n      Editor.prototype.getWin = function () {\r\n        var self = this;\r\n        var elm;\r\n        if (!self.contentWindow) {\r\n          elm = self.iframeElement;\r\n          if (elm) {\r\n            self.contentWindow = elm.contentWindow;\r\n          }\r\n        }\r\n        return self.contentWindow;\r\n      };\r\n      Editor.prototype.getDoc = function () {\r\n        var self = this;\r\n        var win;\r\n        if (!self.contentDocument) {\r\n          win = self.getWin();\r\n          if (win) {\r\n            self.contentDocument = win.document;\r\n          }\r\n        }\r\n        return self.contentDocument;\r\n      };\r\n      Editor.prototype.getBody = function () {\r\n        var doc = this.getDoc();\r\n        return this.bodyElement || (doc ? doc.body : null);\r\n      };\r\n      Editor.prototype.convertURL = function (url, name, elm) {\r\n        var self = this, settings = self.settings;\r\n        if (settings.urlconverter_callback) {\r\n          return self.execCallback('urlconverter_callback', url, elm, true, name);\r\n        }\r\n        if (!settings.convert_urls || elm && elm.nodeName === 'LINK' || url.indexOf('file:') === 0 || url.length === 0) {\r\n          return url;\r\n        }\r\n        if (settings.relative_urls) {\r\n          return self.documentBaseURI.toRelative(url);\r\n        }\r\n        url = self.documentBaseURI.toAbsolute(url, settings.remove_script_host);\r\n        return url;\r\n      };\r\n      Editor.prototype.addVisual = function (elm) {\r\n        addVisual(this, elm);\r\n      };\r\n      Editor.prototype.remove = function () {\r\n        remove(this);\r\n      };\r\n      Editor.prototype.destroy = function (automatic) {\r\n        destroy(this, automatic);\r\n      };\r\n      Editor.prototype.uploadImages = function (callback) {\r\n        return this.editorUpload.uploadImages(callback);\r\n      };\r\n      Editor.prototype._scanForImages = function () {\r\n        return this.editorUpload.scanForImages();\r\n      };\r\n      Editor.prototype.addButton = function () {\r\n        throw new Error('editor.addButton has been removed in tinymce 5x, use editor.ui.registry.addButton or editor.ui.registry.addToggleButton or editor.ui.registry.addSplitButton instead');\r\n      };\r\n      Editor.prototype.addSidebar = function () {\r\n        throw new Error('editor.addSidebar has been removed in tinymce 5x, use editor.ui.registry.addSidebar instead');\r\n      };\r\n      Editor.prototype.addMenuItem = function () {\r\n        throw new Error('editor.addMenuItem has been removed in tinymce 5x, use editor.ui.registry.addMenuItem instead');\r\n      };\r\n      Editor.prototype.addContextToolbar = function () {\r\n        throw new Error('editor.addContextToolbar has been removed in tinymce 5x, use editor.ui.registry.addContextToolbar instead');\r\n      };\r\n      return Editor;\r\n    }();\r\n\r\n    var DOM = DOMUtils.DOM;\r\n    var explode = Tools.explode, each$1 = Tools.each, extend$2 = Tools.extend;\r\n    var instanceCounter = 0, boundGlobalEvents = false;\r\n    var beforeUnloadDelegate;\r\n    var legacyEditors = [];\r\n    var editors = [];\r\n    var isValidLegacyKey = function (id) {\r\n      return id !== 'length';\r\n    };\r\n    var globalEventDelegate = function (e) {\r\n      var type = e.type;\r\n      each$1(EditorManager.get(), function (editor) {\r\n        switch (type) {\r\n        case 'scroll':\r\n          editor.fire('ScrollWindow', e);\r\n          break;\r\n        case 'resize':\r\n          editor.fire('ResizeWindow', e);\r\n          break;\r\n        }\r\n      });\r\n    };\r\n    var toggleGlobalEvents = function (state) {\r\n      if (state !== boundGlobalEvents) {\r\n        if (state) {\r\n          DomQuery(window).on('resize scroll', globalEventDelegate);\r\n        } else {\r\n          DomQuery(window).off('resize scroll', globalEventDelegate);\r\n        }\r\n        boundGlobalEvents = state;\r\n      }\r\n    };\r\n    var removeEditorFromList = function (targetEditor) {\r\n      var oldEditors = editors;\r\n      delete legacyEditors[targetEditor.id];\r\n      for (var i = 0; i < legacyEditors.length; i++) {\r\n        if (legacyEditors[i] === targetEditor) {\r\n          legacyEditors.splice(i, 1);\r\n          break;\r\n        }\r\n      }\r\n      editors = filter$4(editors, function (editor) {\r\n        return targetEditor !== editor;\r\n      });\r\n      if (EditorManager.activeEditor === targetEditor) {\r\n        EditorManager.activeEditor = editors.length > 0 ? editors[0] : null;\r\n      }\r\n      if (EditorManager.focusedEditor === targetEditor) {\r\n        EditorManager.focusedEditor = null;\r\n      }\r\n      return oldEditors.length !== editors.length;\r\n    };\r\n    var purgeDestroyedEditor = function (editor) {\r\n      if (editor && editor.initialized && !(editor.getContainer() || editor.getBody()).parentNode) {\r\n        removeEditorFromList(editor);\r\n        editor.unbindAllNativeEvents();\r\n        editor.destroy(true);\r\n        editor.removed = true;\r\n        editor = null;\r\n      }\r\n      return editor;\r\n    };\r\n    var isQuirksMode = document.compatMode !== 'CSS1Compat';\r\n    var EditorManager = __assign(__assign({}, Observable), {\r\n      baseURI: null,\r\n      baseURL: null,\r\n      defaultSettings: {},\r\n      documentBaseURL: null,\r\n      suffix: null,\r\n      $: DomQuery,\r\n      majorVersion: '5',\r\n      minorVersion: '10.7',\r\n      releaseDate: '2022-12-06',\r\n      editors: legacyEditors,\r\n      i18n: I18n,\r\n      activeEditor: null,\r\n      focusedEditor: null,\r\n      settings: {},\r\n      setup: function () {\r\n        var self = this;\r\n        var baseURL, documentBaseURL, suffix = '';\r\n        documentBaseURL = URI.getDocumentBaseUrl(document.location);\r\n        if (/^[^:]+:\\/\\/\\/?[^\\/]+\\//.test(documentBaseURL)) {\r\n          documentBaseURL = documentBaseURL.replace(/[\\?#].*$/, '').replace(/[\\/\\\\][^\\/]+$/, '');\r\n          if (!/[\\/\\\\]$/.test(documentBaseURL)) {\r\n            documentBaseURL += '/';\r\n          }\r\n        }\r\n        var preInit = window.tinymce || window.tinyMCEPreInit;\r\n        if (preInit) {\r\n          baseURL = preInit.base || preInit.baseURL;\r\n          suffix = preInit.suffix;\r\n        } else {\r\n          var scripts = document.getElementsByTagName('script');\r\n          for (var i = 0; i < scripts.length; i++) {\r\n            var src = scripts[i].src || '';\r\n            if (src === '') {\r\n              continue;\r\n            }\r\n            var srcScript = src.substring(src.lastIndexOf('/'));\r\n            if (/tinymce(\\.full|\\.jquery|)(\\.min|\\.dev|)\\.js/.test(src)) {\r\n              if (srcScript.indexOf('.min') !== -1) {\r\n                suffix = '.min';\r\n              }\r\n              baseURL = src.substring(0, src.lastIndexOf('/'));\r\n              break;\r\n            }\r\n          }\r\n          if (!baseURL && document.currentScript) {\r\n            var src = document.currentScript.src;\r\n            if (src.indexOf('.min') !== -1) {\r\n              suffix = '.min';\r\n            }\r\n            baseURL = src.substring(0, src.lastIndexOf('/'));\r\n          }\r\n        }\r\n        self.baseURL = new URI(documentBaseURL).toAbsolute(baseURL);\r\n        self.documentBaseURL = documentBaseURL;\r\n        self.baseURI = new URI(self.baseURL);\r\n        self.suffix = suffix;\r\n        setup$l(self);\r\n      },\r\n      overrideDefaults: function (defaultSettings) {\r\n        var baseUrl = defaultSettings.base_url;\r\n        if (baseUrl) {\r\n          this._setBaseUrl(baseUrl);\r\n        }\r\n        var suffix = defaultSettings.suffix;\r\n        if (defaultSettings.suffix) {\r\n          this.suffix = suffix;\r\n        }\r\n        this.defaultSettings = defaultSettings;\r\n        var pluginBaseUrls = defaultSettings.plugin_base_urls;\r\n        if (pluginBaseUrls !== undefined) {\r\n          each$j(pluginBaseUrls, function (pluginBaseUrl, pluginName) {\r\n            AddOnManager.PluginManager.urls[pluginName] = pluginBaseUrl;\r\n          });\r\n        }\r\n      },\r\n      init: function (settings) {\r\n        var self = this;\r\n        var result;\r\n        var invalidInlineTargets = Tools.makeMap('area base basefont br col frame hr img input isindex link meta param embed source wbr track ' + 'colgroup option table tbody tfoot thead tr th td script noscript style textarea video audio iframe object menu', ' ');\r\n        var isInvalidInlineTarget = function (settings, elm) {\r\n          return settings.inline && elm.tagName.toLowerCase() in invalidInlineTargets;\r\n        };\r\n        var createId = function (elm) {\r\n          var id = elm.id;\r\n          if (!id) {\r\n            id = get$9(elm, 'name').filter(function (name) {\r\n              return !DOM.get(name);\r\n            }).getOrThunk(DOM.uniqueId);\r\n            elm.setAttribute('id', id);\r\n          }\r\n          return id;\r\n        };\r\n        var execCallback = function (name) {\r\n          var callback = settings[name];\r\n          if (!callback) {\r\n            return;\r\n          }\r\n          return callback.apply(self, []);\r\n        };\r\n        var hasClass = function (elm, className) {\r\n          return className.constructor === RegExp ? className.test(elm.className) : DOM.hasClass(elm, className);\r\n        };\r\n        var findTargets = function (settings) {\r\n          var targets = [];\r\n          if (Env.browser.isIE() && Env.browser.version.major < 11) {\r\n            initError('TinyMCE does not support the browser you are using. For a list of supported' + ' browsers please see: https://www.tinymce.com/docs/get-started/system-requirements/');\r\n            return [];\r\n          } else if (isQuirksMode) {\r\n            initError('Failed to initialize the editor as the document is not in standards mode. ' + 'TinyMCE requires standards mode.');\r\n            return [];\r\n          }\r\n          if (settings.types) {\r\n            each$1(settings.types, function (type) {\r\n              targets = targets.concat(DOM.select(type.selector));\r\n            });\r\n            return targets;\r\n          } else if (settings.selector) {\r\n            return DOM.select(settings.selector);\r\n          } else if (settings.target) {\r\n            return [settings.target];\r\n          }\r\n          switch (settings.mode) {\r\n          case 'exact':\r\n            var l = settings.elements || '';\r\n            if (l.length > 0) {\r\n              each$1(explode(l), function (id) {\r\n                var elm = DOM.get(id);\r\n                if (elm) {\r\n                  targets.push(elm);\r\n                } else {\r\n                  each$1(document.forms, function (f) {\r\n                    each$1(f.elements, function (e) {\r\n                      if (e.name === id) {\r\n                        id = 'mce_editor_' + instanceCounter++;\r\n                        DOM.setAttrib(e, 'id', id);\r\n                        targets.push(e);\r\n                      }\r\n                    });\r\n                  });\r\n                }\r\n              });\r\n            }\r\n            break;\r\n          case 'textareas':\r\n          case 'specific_textareas':\r\n            each$1(DOM.select('textarea'), function (elm) {\r\n              if (settings.editor_deselector && hasClass(elm, settings.editor_deselector)) {\r\n                return;\r\n              }\r\n              if (!settings.editor_selector || hasClass(elm, settings.editor_selector)) {\r\n                targets.push(elm);\r\n              }\r\n            });\r\n            break;\r\n          }\r\n          return targets;\r\n        };\r\n        var provideResults = function (editors) {\r\n          result = editors;\r\n        };\r\n        var initEditors = function () {\r\n          var initCount = 0;\r\n          var editors = [];\r\n          var targets;\r\n          var createEditor = function (id, settings, targetElm) {\r\n            var editor = new Editor(id, settings, self);\r\n            editors.push(editor);\r\n            editor.on('init', function () {\r\n              if (++initCount === targets.length) {\r\n                provideResults(editors);\r\n              }\r\n            });\r\n            editor.targetElm = editor.targetElm || targetElm;\r\n            editor.render();\r\n          };\r\n          DOM.unbind(window, 'ready', initEditors);\r\n          execCallback('onpageload');\r\n          targets = DomQuery.unique(findTargets(settings));\r\n          if (settings.types) {\r\n            each$1(settings.types, function (type) {\r\n              Tools.each(targets, function (elm) {\r\n                if (DOM.is(elm, type.selector)) {\r\n                  createEditor(createId(elm), extend$2({}, settings, type), elm);\r\n                  return false;\r\n                }\r\n                return true;\r\n              });\r\n            });\r\n            return;\r\n          }\r\n          Tools.each(targets, function (elm) {\r\n            purgeDestroyedEditor(self.get(elm.id));\r\n          });\r\n          targets = Tools.grep(targets, function (elm) {\r\n            return !self.get(elm.id);\r\n          });\r\n          if (targets.length === 0) {\r\n            provideResults([]);\r\n          } else {\r\n            each$1(targets, function (elm) {\r\n              if (isInvalidInlineTarget(settings, elm)) {\r\n                initError('Could not initialize inline editor on invalid inline target element', elm);\r\n              } else {\r\n                createEditor(createId(elm), settings, elm);\r\n              }\r\n            });\r\n          }\r\n        };\r\n        self.settings = settings;\r\n        DOM.bind(window, 'ready', initEditors);\r\n        return new promiseObj(function (resolve) {\r\n          if (result) {\r\n            resolve(result);\r\n          } else {\r\n            provideResults = function (editors) {\r\n              resolve(editors);\r\n            };\r\n          }\r\n        });\r\n      },\r\n      get: function (id) {\r\n        if (arguments.length === 0) {\r\n          return editors.slice(0);\r\n        } else if (isString$1(id)) {\r\n          return find$3(editors, function (editor) {\r\n            return editor.id === id;\r\n          }).getOr(null);\r\n        } else if (isNumber(id)) {\r\n          return editors[id] ? editors[id] : null;\r\n        } else {\r\n          return null;\r\n        }\r\n      },\r\n      add: function (editor) {\r\n        var self = this;\r\n        var existingEditor = legacyEditors[editor.id];\r\n        if (existingEditor === editor) {\r\n          return editor;\r\n        }\r\n        if (self.get(editor.id) === null) {\r\n          if (isValidLegacyKey(editor.id)) {\r\n            legacyEditors[editor.id] = editor;\r\n          }\r\n          legacyEditors.push(editor);\r\n          editors.push(editor);\r\n        }\r\n        toggleGlobalEvents(true);\r\n        self.activeEditor = editor;\r\n        self.fire('AddEditor', { editor: editor });\r\n        if (!beforeUnloadDelegate) {\r\n          beforeUnloadDelegate = function (e) {\r\n            var event = self.fire('BeforeUnload');\r\n            if (event.returnValue) {\r\n              e.preventDefault();\r\n              e.returnValue = event.returnValue;\r\n              return event.returnValue;\r\n            }\r\n          };\r\n          window.addEventListener('beforeunload', beforeUnloadDelegate);\r\n        }\r\n        return editor;\r\n      },\r\n      createEditor: function (id, settings) {\r\n        return this.add(new Editor(id, settings, this));\r\n      },\r\n      remove: function (selector) {\r\n        var self = this;\r\n        var i, editor;\r\n        if (!selector) {\r\n          for (i = editors.length - 1; i >= 0; i--) {\r\n            self.remove(editors[i]);\r\n          }\r\n          return;\r\n        }\r\n        if (isString$1(selector)) {\r\n          each$1(DOM.select(selector), function (elm) {\r\n            editor = self.get(elm.id);\r\n            if (editor) {\r\n              self.remove(editor);\r\n            }\r\n          });\r\n          return;\r\n        }\r\n        editor = selector;\r\n        if (isNull(self.get(editor.id))) {\r\n          return null;\r\n        }\r\n        if (removeEditorFromList(editor)) {\r\n          self.fire('RemoveEditor', { editor: editor });\r\n        }\r\n        if (editors.length === 0) {\r\n          window.removeEventListener('beforeunload', beforeUnloadDelegate);\r\n        }\r\n        editor.remove();\r\n        toggleGlobalEvents(editors.length > 0);\r\n        return editor;\r\n      },\r\n      execCommand: function (cmd, ui, value) {\r\n        var self = this, editor = self.get(value);\r\n        switch (cmd) {\r\n        case 'mceAddEditor':\r\n          if (!self.get(value)) {\r\n            new Editor(value, self.settings, self).render();\r\n          }\r\n          return true;\r\n        case 'mceRemoveEditor':\r\n          if (editor) {\r\n            editor.remove();\r\n          }\r\n          return true;\r\n        case 'mceToggleEditor':\r\n          if (!editor) {\r\n            self.execCommand('mceAddEditor', false, value);\r\n            return true;\r\n          }\r\n          if (editor.isHidden()) {\r\n            editor.show();\r\n          } else {\r\n            editor.hide();\r\n          }\r\n          return true;\r\n        }\r\n        if (self.activeEditor) {\r\n          return self.activeEditor.execCommand(cmd, ui, value);\r\n        }\r\n        return false;\r\n      },\r\n      triggerSave: function () {\r\n        each$1(editors, function (editor) {\r\n          editor.save();\r\n        });\r\n      },\r\n      addI18n: function (code, items) {\r\n        I18n.add(code, items);\r\n      },\r\n      translate: function (text) {\r\n        return I18n.translate(text);\r\n      },\r\n      setActive: function (editor) {\r\n        var activeEditor = this.activeEditor;\r\n        if (this.activeEditor !== editor) {\r\n          if (activeEditor) {\r\n            activeEditor.fire('deactivate', { relatedTarget: editor });\r\n          }\r\n          editor.fire('activate', { relatedTarget: activeEditor });\r\n        }\r\n        this.activeEditor = editor;\r\n      },\r\n      _setBaseUrl: function (baseUrl) {\r\n        this.baseURL = new URI(this.documentBaseURL).toAbsolute(baseUrl.replace(/\\/+$/, ''));\r\n        this.baseURI = new URI(this.baseURL);\r\n      }\r\n    });\r\n    EditorManager.setup();\r\n\r\n    var min$1 = Math.min, max$1 = Math.max, round$1 = Math.round;\r\n    var relativePosition = function (rect, targetRect, rel) {\r\n      var x = targetRect.x;\r\n      var y = targetRect.y;\r\n      var w = rect.w;\r\n      var h = rect.h;\r\n      var targetW = targetRect.w;\r\n      var targetH = targetRect.h;\r\n      var relChars = (rel || '').split('');\r\n      if (relChars[0] === 'b') {\r\n        y += targetH;\r\n      }\r\n      if (relChars[1] === 'r') {\r\n        x += targetW;\r\n      }\r\n      if (relChars[0] === 'c') {\r\n        y += round$1(targetH / 2);\r\n      }\r\n      if (relChars[1] === 'c') {\r\n        x += round$1(targetW / 2);\r\n      }\r\n      if (relChars[3] === 'b') {\r\n        y -= h;\r\n      }\r\n      if (relChars[4] === 'r') {\r\n        x -= w;\r\n      }\r\n      if (relChars[3] === 'c') {\r\n        y -= round$1(h / 2);\r\n      }\r\n      if (relChars[4] === 'c') {\r\n        x -= round$1(w / 2);\r\n      }\r\n      return create$2(x, y, w, h);\r\n    };\r\n    var findBestRelativePosition = function (rect, targetRect, constrainRect, rels) {\r\n      var pos, i;\r\n      for (i = 0; i < rels.length; i++) {\r\n        pos = relativePosition(rect, targetRect, rels[i]);\r\n        if (pos.x >= constrainRect.x && pos.x + pos.w <= constrainRect.w + constrainRect.x && pos.y >= constrainRect.y && pos.y + pos.h <= constrainRect.h + constrainRect.y) {\r\n          return rels[i];\r\n        }\r\n      }\r\n      return null;\r\n    };\r\n    var inflate = function (rect, w, h) {\r\n      return create$2(rect.x - w, rect.y - h, rect.w + w * 2, rect.h + h * 2);\r\n    };\r\n    var intersect = function (rect, cropRect) {\r\n      var x1 = max$1(rect.x, cropRect.x);\r\n      var y1 = max$1(rect.y, cropRect.y);\r\n      var x2 = min$1(rect.x + rect.w, cropRect.x + cropRect.w);\r\n      var y2 = min$1(rect.y + rect.h, cropRect.y + cropRect.h);\r\n      if (x2 - x1 < 0 || y2 - y1 < 0) {\r\n        return null;\r\n      }\r\n      return create$2(x1, y1, x2 - x1, y2 - y1);\r\n    };\r\n    var clamp = function (rect, clampRect, fixedSize) {\r\n      var x1 = rect.x;\r\n      var y1 = rect.y;\r\n      var x2 = rect.x + rect.w;\r\n      var y2 = rect.y + rect.h;\r\n      var cx2 = clampRect.x + clampRect.w;\r\n      var cy2 = clampRect.y + clampRect.h;\r\n      var underflowX1 = max$1(0, clampRect.x - x1);\r\n      var underflowY1 = max$1(0, clampRect.y - y1);\r\n      var overflowX2 = max$1(0, x2 - cx2);\r\n      var overflowY2 = max$1(0, y2 - cy2);\r\n      x1 += underflowX1;\r\n      y1 += underflowY1;\r\n      if (fixedSize) {\r\n        x2 += underflowX1;\r\n        y2 += underflowY1;\r\n        x1 -= overflowX2;\r\n        y1 -= overflowY2;\r\n      }\r\n      x2 -= overflowX2;\r\n      y2 -= overflowY2;\r\n      return create$2(x1, y1, x2 - x1, y2 - y1);\r\n    };\r\n    var create$2 = function (x, y, w, h) {\r\n      return {\r\n        x: x,\r\n        y: y,\r\n        w: w,\r\n        h: h\r\n      };\r\n    };\r\n    var fromClientRect = function (clientRect) {\r\n      return create$2(clientRect.left, clientRect.top, clientRect.width, clientRect.height);\r\n    };\r\n    var Rect = {\r\n      inflate: inflate,\r\n      relativePosition: relativePosition,\r\n      findBestRelativePosition: findBestRelativePosition,\r\n      intersect: intersect,\r\n      clamp: clamp,\r\n      create: create$2,\r\n      fromClientRect: fromClientRect\r\n    };\r\n\r\n    var awaiter = function (resolveCb, rejectCb, timeout) {\r\n      if (timeout === void 0) {\r\n        timeout = 1000;\r\n      }\r\n      var done = false;\r\n      var timer = null;\r\n      var complete = function (completer) {\r\n        return function () {\r\n          var args = [];\r\n          for (var _i = 0; _i < arguments.length; _i++) {\r\n            args[_i] = arguments[_i];\r\n          }\r\n          if (!done) {\r\n            done = true;\r\n            if (timer !== null) {\r\n              clearTimeout(timer);\r\n              timer = null;\r\n            }\r\n            completer.apply(null, args);\r\n          }\r\n        };\r\n      };\r\n      var resolve = complete(resolveCb);\r\n      var reject = complete(rejectCb);\r\n      var start = function () {\r\n        var args = [];\r\n        for (var _i = 0; _i < arguments.length; _i++) {\r\n          args[_i] = arguments[_i];\r\n        }\r\n        if (!done && timer === null) {\r\n          timer = setTimeout(function () {\r\n            return reject.apply(null, args);\r\n          }, timeout);\r\n        }\r\n      };\r\n      return {\r\n        start: start,\r\n        resolve: resolve,\r\n        reject: reject\r\n      };\r\n    };\r\n    var create$1 = function () {\r\n      var tasks = {};\r\n      var resultFns = {};\r\n      var load = function (id, url) {\r\n        var loadErrMsg = 'Script at URL \"' + url + '\" failed to load';\r\n        var runErrMsg = 'Script at URL \"' + url + '\" did not call `tinymce.Resource.add(\\'' + id + '\\', data)` within 1 second';\r\n        if (tasks[id] !== undefined) {\r\n          return tasks[id];\r\n        } else {\r\n          var task = new promiseObj(function (resolve, reject) {\r\n            var waiter = awaiter(resolve, reject);\r\n            resultFns[id] = waiter.resolve;\r\n            ScriptLoader.ScriptLoader.loadScript(url, function () {\r\n              return waiter.start(runErrMsg);\r\n            }, function () {\r\n              return waiter.reject(loadErrMsg);\r\n            });\r\n          });\r\n          tasks[id] = task;\r\n          return task;\r\n        }\r\n      };\r\n      var add = function (id, data) {\r\n        if (resultFns[id] !== undefined) {\r\n          resultFns[id](data);\r\n          delete resultFns[id];\r\n        }\r\n        tasks[id] = promiseObj.resolve(data);\r\n      };\r\n      return {\r\n        load: load,\r\n        add: add\r\n      };\r\n    };\r\n    var Resource = create$1();\r\n\r\n    var each = Tools.each, extend$1 = Tools.extend;\r\n    var extendClass, initializing;\r\n    var Class = function () {\r\n    };\r\n    Class.extend = extendClass = function (props) {\r\n      var self = this;\r\n      var _super = self.prototype;\r\n      var Class = function () {\r\n        var i, mixins, mixin;\r\n        var self = this;\r\n        if (!initializing) {\r\n          if (self.init) {\r\n            self.init.apply(self, arguments);\r\n          }\r\n          mixins = self.Mixins;\r\n          if (mixins) {\r\n            i = mixins.length;\r\n            while (i--) {\r\n              mixin = mixins[i];\r\n              if (mixin.init) {\r\n                mixin.init.apply(self, arguments);\r\n              }\r\n            }\r\n          }\r\n        }\r\n      };\r\n      var dummy = function () {\r\n        return this;\r\n      };\r\n      var createMethod = function (name, fn) {\r\n        return function () {\r\n          var self = this;\r\n          var tmp = self._super;\r\n          self._super = _super[name];\r\n          var ret = fn.apply(self, arguments);\r\n          self._super = tmp;\r\n          return ret;\r\n        };\r\n      };\r\n      initializing = true;\r\n      var prototype = new self();\r\n      initializing = false;\r\n      if (props.Mixins) {\r\n        each(props.Mixins, function (mixin) {\r\n          for (var name_1 in mixin) {\r\n            if (name_1 !== 'init') {\r\n              props[name_1] = mixin[name_1];\r\n            }\r\n          }\r\n        });\r\n        if (_super.Mixins) {\r\n          props.Mixins = _super.Mixins.concat(props.Mixins);\r\n        }\r\n      }\r\n      if (props.Methods) {\r\n        each(props.Methods.split(','), function (name) {\r\n          props[name] = dummy;\r\n        });\r\n      }\r\n      if (props.Properties) {\r\n        each(props.Properties.split(','), function (name) {\r\n          var fieldName = '_' + name;\r\n          props[name] = function (value) {\r\n            var self = this;\r\n            if (value !== undefined) {\r\n              self[fieldName] = value;\r\n              return self;\r\n            }\r\n            return self[fieldName];\r\n          };\r\n        });\r\n      }\r\n      if (props.Statics) {\r\n        each(props.Statics, function (func, name) {\r\n          Class[name] = func;\r\n        });\r\n      }\r\n      if (props.Defaults && _super.Defaults) {\r\n        props.Defaults = extend$1({}, _super.Defaults, props.Defaults);\r\n      }\r\n      each$j(props, function (member, name) {\r\n        if (typeof member === 'function' && _super[name]) {\r\n          prototype[name] = createMethod(name, member);\r\n        } else {\r\n          prototype[name] = member;\r\n        }\r\n      });\r\n      Class.prototype = prototype;\r\n      Class.constructor = Class;\r\n      Class.extend = extendClass;\r\n      return Class;\r\n    };\r\n\r\n    var min = Math.min, max = Math.max, round = Math.round;\r\n    var Color = function (value) {\r\n      var self = {};\r\n      var r = 0, g = 0, b = 0;\r\n      var rgb2hsv = function (r, g, b) {\r\n        var h, s, v;\r\n        h = 0;\r\n        s = 0;\r\n        v = 0;\r\n        r = r / 255;\r\n        g = g / 255;\r\n        b = b / 255;\r\n        var minRGB = min(r, min(g, b));\r\n        var maxRGB = max(r, max(g, b));\r\n        if (minRGB === maxRGB) {\r\n          v = minRGB;\r\n          return {\r\n            h: 0,\r\n            s: 0,\r\n            v: v * 100\r\n          };\r\n        }\r\n        var d = r === minRGB ? g - b : b === minRGB ? r - g : b - r;\r\n        h = r === minRGB ? 3 : b === minRGB ? 1 : 5;\r\n        h = 60 * (h - d / (maxRGB - minRGB));\r\n        s = (maxRGB - minRGB) / maxRGB;\r\n        v = maxRGB;\r\n        return {\r\n          h: round(h),\r\n          s: round(s * 100),\r\n          v: round(v * 100)\r\n        };\r\n      };\r\n      var hsvToRgb = function (hue, saturation, brightness) {\r\n        hue = (parseInt(hue, 10) || 0) % 360;\r\n        saturation = parseInt(saturation, 10) / 100;\r\n        brightness = parseInt(brightness, 10) / 100;\r\n        saturation = max(0, min(saturation, 1));\r\n        brightness = max(0, min(brightness, 1));\r\n        if (saturation === 0) {\r\n          r = g = b = round(255 * brightness);\r\n          return;\r\n        }\r\n        var side = hue / 60;\r\n        var chroma = brightness * saturation;\r\n        var x = chroma * (1 - Math.abs(side % 2 - 1));\r\n        var match = brightness - chroma;\r\n        switch (Math.floor(side)) {\r\n        case 0:\r\n          r = chroma;\r\n          g = x;\r\n          b = 0;\r\n          break;\r\n        case 1:\r\n          r = x;\r\n          g = chroma;\r\n          b = 0;\r\n          break;\r\n        case 2:\r\n          r = 0;\r\n          g = chroma;\r\n          b = x;\r\n          break;\r\n        case 3:\r\n          r = 0;\r\n          g = x;\r\n          b = chroma;\r\n          break;\r\n        case 4:\r\n          r = x;\r\n          g = 0;\r\n          b = chroma;\r\n          break;\r\n        case 5:\r\n          r = chroma;\r\n          g = 0;\r\n          b = x;\r\n          break;\r\n        default:\r\n          r = g = b = 0;\r\n        }\r\n        r = round(255 * (r + match));\r\n        g = round(255 * (g + match));\r\n        b = round(255 * (b + match));\r\n      };\r\n      var toHex = function () {\r\n        var hex = function (val) {\r\n          val = parseInt(val, 10).toString(16);\r\n          return val.length > 1 ? val : '0' + val;\r\n        };\r\n        return '#' + hex(r) + hex(g) + hex(b);\r\n      };\r\n      var toRgb = function () {\r\n        return {\r\n          r: r,\r\n          g: g,\r\n          b: b\r\n        };\r\n      };\r\n      var toHsv = function () {\r\n        return rgb2hsv(r, g, b);\r\n      };\r\n      var parse = function (value) {\r\n        var matches;\r\n        if (typeof value === 'object') {\r\n          if ('r' in value) {\r\n            r = value.r;\r\n            g = value.g;\r\n            b = value.b;\r\n          } else if ('v' in value) {\r\n            hsvToRgb(value.h, value.s, value.v);\r\n          }\r\n        } else {\r\n          if (matches = /rgb\\s*\\(\\s*([0-9]+)\\s*,\\s*([0-9]+)\\s*,\\s*([0-9]+)[^\\)]*\\)/gi.exec(value)) {\r\n            r = parseInt(matches[1], 10);\r\n            g = parseInt(matches[2], 10);\r\n            b = parseInt(matches[3], 10);\r\n          } else if (matches = /#([0-F]{2})([0-F]{2})([0-F]{2})/gi.exec(value)) {\r\n            r = parseInt(matches[1], 16);\r\n            g = parseInt(matches[2], 16);\r\n            b = parseInt(matches[3], 16);\r\n          } else if (matches = /#([0-F])([0-F])([0-F])/gi.exec(value)) {\r\n            r = parseInt(matches[1] + matches[1], 16);\r\n            g = parseInt(matches[2] + matches[2], 16);\r\n            b = parseInt(matches[3] + matches[3], 16);\r\n          }\r\n        }\r\n        r = r < 0 ? 0 : r > 255 ? 255 : r;\r\n        g = g < 0 ? 0 : g > 255 ? 255 : g;\r\n        b = b < 0 ? 0 : b > 255 ? 255 : b;\r\n        return self;\r\n      };\r\n      if (value) {\r\n        parse(value);\r\n      }\r\n      self.toRgb = toRgb;\r\n      self.toHsv = toHsv;\r\n      self.toHex = toHex;\r\n      self.parse = parse;\r\n      return self;\r\n    };\r\n\r\n    var serialize = function (obj) {\r\n      var data = JSON.stringify(obj);\r\n      if (!isString$1(data)) {\r\n        return data;\r\n      }\r\n      return data.replace(/[\\u0080-\\uFFFF]/g, function (match) {\r\n        var hexCode = match.charCodeAt(0).toString(16);\r\n        return '\\\\u' + '0000'.substring(hexCode.length) + hexCode;\r\n      });\r\n    };\r\n    var JSONUtils = {\r\n      serialize: serialize,\r\n      parse: function (text) {\r\n        try {\r\n          return JSON.parse(text);\r\n        } catch (ex) {\r\n        }\r\n      }\r\n    };\r\n\r\n    var JSONP = {\r\n      callbacks: {},\r\n      count: 0,\r\n      send: function (settings) {\r\n        var self = this, dom = DOMUtils.DOM, count = settings.count !== undefined ? settings.count : self.count;\r\n        var id = 'tinymce_jsonp_' + count;\r\n        self.callbacks[count] = function (json) {\r\n          dom.remove(id);\r\n          delete self.callbacks[count];\r\n          settings.callback(json);\r\n        };\r\n        dom.add(dom.doc.body, 'script', {\r\n          id: id,\r\n          src: settings.url,\r\n          type: 'text/javascript'\r\n        });\r\n        self.count++;\r\n      }\r\n    };\r\n\r\n    var XHR = __assign(__assign({}, Observable), {\r\n      send: function (settings) {\r\n        var xhr, count = 0;\r\n        var ready = function () {\r\n          if (!settings.async || xhr.readyState === 4 || count++ > 10000) {\r\n            if (settings.success && count < 10000 && xhr.status === 200) {\r\n              settings.success.call(settings.success_scope, '' + xhr.responseText, xhr, settings);\r\n            } else if (settings.error) {\r\n              settings.error.call(settings.error_scope, count > 10000 ? 'TIMED_OUT' : 'GENERAL', xhr, settings);\r\n            }\r\n            xhr = null;\r\n          } else {\r\n            Delay.setTimeout(ready, 10);\r\n          }\r\n        };\r\n        settings.scope = settings.scope || this;\r\n        settings.success_scope = settings.success_scope || settings.scope;\r\n        settings.error_scope = settings.error_scope || settings.scope;\r\n        settings.async = settings.async !== false;\r\n        settings.data = settings.data || '';\r\n        XHR.fire('beforeInitialize', { settings: settings });\r\n        xhr = new XMLHttpRequest();\r\n        if (xhr.overrideMimeType) {\r\n          xhr.overrideMimeType(settings.content_type);\r\n        }\r\n        xhr.open(settings.type || (settings.data ? 'POST' : 'GET'), settings.url, settings.async);\r\n        if (settings.crossDomain) {\r\n          xhr.withCredentials = true;\r\n        }\r\n        if (settings.content_type) {\r\n          xhr.setRequestHeader('Content-Type', settings.content_type);\r\n        }\r\n        if (settings.requestheaders) {\r\n          Tools.each(settings.requestheaders, function (header) {\r\n            xhr.setRequestHeader(header.key, header.value);\r\n          });\r\n        }\r\n        xhr.setRequestHeader('X-Requested-With', 'XMLHttpRequest');\r\n        xhr = XHR.fire('beforeSend', {\r\n          xhr: xhr,\r\n          settings: settings\r\n        }).xhr;\r\n        xhr.send(settings.data);\r\n        if (!settings.async) {\r\n          return ready();\r\n        }\r\n        Delay.setTimeout(ready, 10);\r\n      }\r\n    });\r\n\r\n    var extend = Tools.extend;\r\n    var JSONRequest = function () {\r\n      function JSONRequest(settings) {\r\n        this.settings = extend({}, settings);\r\n        this.count = 0;\r\n      }\r\n      JSONRequest.sendRPC = function (o) {\r\n        return new JSONRequest().send(o);\r\n      };\r\n      JSONRequest.prototype.send = function (args) {\r\n        var ecb = args.error, scb = args.success;\r\n        var xhrArgs = extend(this.settings, args);\r\n        xhrArgs.success = function (c, x) {\r\n          c = JSONUtils.parse(c);\r\n          if (typeof c === 'undefined') {\r\n            c = { error: 'JSON Parse error.' };\r\n          }\r\n          if (c.error) {\r\n            ecb.call(xhrArgs.error_scope || xhrArgs.scope, c.error, x);\r\n          } else {\r\n            scb.call(xhrArgs.success_scope || xhrArgs.scope, c.result);\r\n          }\r\n        };\r\n        xhrArgs.error = function (ty, x) {\r\n          if (ecb) {\r\n            ecb.call(xhrArgs.error_scope || xhrArgs.scope, ty, x);\r\n          }\r\n        };\r\n        xhrArgs.data = JSONUtils.serialize({\r\n          id: args.id || 'c' + this.count++,\r\n          method: args.method,\r\n          params: args.params\r\n        });\r\n        xhrArgs.content_type = 'application/json';\r\n        XHR.send(xhrArgs);\r\n      };\r\n      return JSONRequest;\r\n    }();\r\n\r\n    var create = function () {\r\n      return function () {\r\n        var data = {};\r\n        var keys = [];\r\n        var storage = {\r\n          getItem: function (key) {\r\n            var item = data[key];\r\n            return item ? item : null;\r\n          },\r\n          setItem: function (key, value) {\r\n            keys.push(key);\r\n            data[key] = String(value);\r\n          },\r\n          key: function (index) {\r\n            return keys[index];\r\n          },\r\n          removeItem: function (key) {\r\n            keys = keys.filter(function (k) {\r\n              return k === key;\r\n            });\r\n            delete data[key];\r\n          },\r\n          clear: function () {\r\n            keys = [];\r\n            data = {};\r\n          },\r\n          length: 0\r\n        };\r\n        Object.defineProperty(storage, 'length', {\r\n          get: function () {\r\n            return keys.length;\r\n          },\r\n          configurable: false,\r\n          enumerable: false\r\n        });\r\n        return storage;\r\n      }();\r\n    };\r\n\r\n    var localStorage;\r\n    try {\r\n      var test = '__storage_test__';\r\n      localStorage = window.localStorage;\r\n      localStorage.setItem(test, test);\r\n      localStorage.removeItem(test);\r\n    } catch (e) {\r\n      localStorage = create();\r\n    }\r\n    var LocalStorage = localStorage;\r\n\r\n    var publicApi = {\r\n      geom: { Rect: Rect },\r\n      util: {\r\n        Promise: promiseObj,\r\n        Delay: Delay,\r\n        Tools: Tools,\r\n        VK: VK,\r\n        URI: URI,\r\n        Class: Class,\r\n        EventDispatcher: EventDispatcher,\r\n        Observable: Observable,\r\n        I18n: I18n,\r\n        XHR: XHR,\r\n        JSON: JSONUtils,\r\n        JSONRequest: JSONRequest,\r\n        JSONP: JSONP,\r\n        LocalStorage: LocalStorage,\r\n        Color: Color,\r\n        ImageUploader: ImageUploader\r\n      },\r\n      dom: {\r\n        EventUtils: EventUtils,\r\n        Sizzle: Sizzle,\r\n        DomQuery: DomQuery,\r\n        TreeWalker: DomTreeWalker,\r\n        TextSeeker: TextSeeker,\r\n        DOMUtils: DOMUtils,\r\n        ScriptLoader: ScriptLoader,\r\n        RangeUtils: RangeUtils,\r\n        Serializer: DomSerializer,\r\n        StyleSheetLoader: StyleSheetLoader,\r\n        ControlSelection: ControlSelection,\r\n        BookmarkManager: BookmarkManager,\r\n        Selection: EditorSelection,\r\n        Event: EventUtils.Event\r\n      },\r\n      html: {\r\n        Styles: Styles,\r\n        Entities: Entities,\r\n        Node: AstNode,\r\n        Schema: Schema,\r\n        SaxParser: SaxParser,\r\n        DomParser: DomParser,\r\n        Writer: Writer,\r\n        Serializer: HtmlSerializer\r\n      },\r\n      Env: Env,\r\n      AddOnManager: AddOnManager,\r\n      Annotator: Annotator,\r\n      Formatter: Formatter,\r\n      UndoManager: UndoManager,\r\n      EditorCommands: EditorCommands,\r\n      WindowManager: WindowManager,\r\n      NotificationManager: NotificationManager,\r\n      EditorObservable: EditorObservable,\r\n      Shortcuts: Shortcuts,\r\n      Editor: Editor,\r\n      FocusManager: FocusManager,\r\n      EditorManager: EditorManager,\r\n      DOM: DOMUtils.DOM,\r\n      ScriptLoader: ScriptLoader.ScriptLoader,\r\n      PluginManager: PluginManager,\r\n      ThemeManager: ThemeManager,\r\n      IconManager: IconManager,\r\n      Resource: Resource,\r\n      trim: Tools.trim,\r\n      isArray: Tools.isArray,\r\n      is: Tools.is,\r\n      toArray: Tools.toArray,\r\n      makeMap: Tools.makeMap,\r\n      each: Tools.each,\r\n      map: Tools.map,\r\n      grep: Tools.grep,\r\n      inArray: Tools.inArray,\r\n      extend: Tools.extend,\r\n      create: Tools.create,\r\n      walk: Tools.walk,\r\n      createNS: Tools.createNS,\r\n      resolve: Tools.resolve,\r\n      explode: Tools.explode,\r\n      _addCacheSuffix: Tools._addCacheSuffix,\r\n      isOpera: Env.opera,\r\n      isWebKit: Env.webkit,\r\n      isIE: Env.ie,\r\n      isGecko: Env.gecko,\r\n      isMac: Env.mac\r\n    };\r\n    var tinymce = Tools.extend(EditorManager, publicApi);\r\n\r\n    var exportToModuleLoaders = function (tinymce) {\r\n      if (typeof module === 'object') {\r\n        try {\r\n          module.exports = tinymce;\r\n        } catch (_) {\r\n        }\r\n      }\r\n    };\r\n    var exportToWindowGlobal = function (tinymce) {\r\n      window.tinymce = tinymce;\r\n      window.tinyMCE = tinymce;\r\n    };\r\n    exportToWindowGlobal(tinymce);\r\n    exportToModuleLoaders(tinymce);\r\n\r\n}());\r\n"],"mappings":"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"},"metadata":{},"sourceType":"script"}