{"ast":null,"code":"//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport axios from 'axios';\nlet id = 1000;\nexport default {\n  methods: {\n    handleNodeClick(e) {\n      alert(e);\n    },\n\n    logoutComfirm() {\n      this.$confirm('要退出登录吗?', '提示', {\n        confirmButtonText: '确定',\n        cancelButtonText: '取消',\n        type: 'warning'\n      }).then(() => {\n        this.$message({\n          type: 'success',\n          message: '已退出登录'\n        });\n        this.$router.replace({\n          path: '/'\n        });\n        location.reload();\n      }).catch(() => {\n        this.$message({\n          type: 'info',\n          message: '取消操作'\n        });\n      });\n    },\n\n    //所有用例列表接口\n    handleAllCase() {},\n\n    //el-tree点击事件\n    myEvent(d1, d2, d3) {\n      this.$emit(\"myEvent\", d1.id);\n    },\n\n    //d1.label\n    //下拉列表\n    handleDropdown(v) {\n      this.dropdownShow = v;\n      if (v) return;\n      this.currentEle.style.cssText += \"display:none\";\n    },\n\n    //增删改鼠标移入移出隐藏显示\n    //鼠标移入\n    onMouseOver: function (event) {\n      event.target.parentElement.querySelector(\".comp-tr-node--btns\").style.cssText += \"display:block\";\n      this.currentEle = event.target.parentElement.querySelector(\".comp-tr-node--btns\");\n    },\n    //鼠标移出\n    onMouseOut: function (event) {\n      if (this.dropdownShow) return;\n      event.target.parentElement.querySelector(\".comp-tr-node--btns\").style.cssText += \"display:none\";\n    },\n\n    //新增一级目录模块点击事件\n    handleNewMoudle() {\n      this.data.push({\n        id: id++,\n        label: \"未命名模块\",\n        children: [],\n        isEdit: true\n      });\n    },\n\n    FindBugByModule() {\n      let data2 = {\n        Module: \"系统安全测试\"\n      };\n      let url1 = 'http://localhost:8081/findBugNumByModule';\n      let n = 0;\n      axios.post(url1, data2).then(res => {\n        n = res.data;\n      });\n      let url2 = 'http://localhost:8081/findBugByModule';\n      axios.post(url2, data2).then(res => {\n        this.tableData = [{}];\n\n        while (n - 1 >= 0) {\n          this.tableData.push({\n            Bug_Title: res.data[n - 1][0],\n            Priority: res.data[n - 1][1],\n            Bug_Status: res.data[n - 1][2],\n            Creator: res.data[n - 1][3],\n            creat_time: res.data[n - 1][4],\n            Bug_End_Date: res.data[n - 1][5],\n            Assignee: res.data[n - 1][6],\n            Severity: res.data[n - 1][7],\n            Operating_System: res.data[n - 1][8],\n            Related_Modules: res.data[n - 1][9],\n            Related_Tasks: res.data[n - 1][10],\n            Related_Needs: res.data[n - 1][11],\n            Person_In_Charge: res.data[n - 1][12]\n          });\n          n = n - 1;\n        }\n      });\n    },\n\n    //确定之后加入tree内\n    NewModuleGo() {\n      if (!this.form_name) this.$message.error(\"模块名不能为空！\");else if (!this.form_description) this.$message.error(\"模块描述不能为空！\");else {\n        let data1 = {\n          Module_Name: this.form_name,\n          Module_Description: this.form_description\n        };\n        let url = 'http://localhost:8081/addModule';\n        axios.post(url, data1).then(res => {\n          if (res.data == 0) {\n            //dialogFormVisible = false;\n            this.data.push({\n              id: id++,\n              label: this.form_name,\n              children: [],\n              isEdit: false\n            });\n            alert(\"插入成功！\");\n          } else if (res.data == 1) alert(\"模块名已经存在，请重新输入！\");\n        });\n      }\n    },\n\n    //新增按钮\n    append(node, data) {\n      if (node.level >= this.MAX_LEVEL) {\n        this.$message.warning(\"当前目录已达到\" + this.MAX_LEVEL + \"级，无法新增！\");\n        return false;\n      } //新定义一个对象\n\n\n      const newChild = {\n        id: id++,\n        label: \"请输入模块名\",\n        children: [],\n        isEdit: true\n      };\n\n      if (!data.children) {\n        this.$set(data, \"children\", []);\n      }\n\n      data.children.push(newChild); //新增子节点到3级\n\n      console.log(node, data);\n      this.$nextTick(() => {\n        if (this.$refs[\"slotTreeInput\" + data[this.id]]) {\n          this.$refs[\"slotTreeInput\" + data[this.id]].$refs.input.focus();\n        }\n      });\n    },\n\n    //删除按钮\n    remove(node, data) {\n      const parent = node.parent;\n      const children = parent.data.children || parent.data;\n      const index = children.findIndex(d => d.id === data.id);\n      children.splice(index, 1);\n    },\n\n    //编辑按钮\n    handleInput(node, data) {\n      // 修改节点\n      console.log(node, data); // 退出编辑状态\n\n      if (data.isEdit) {\n        this.$set(data, \"isEdit\", false);\n      }\n    },\n\n    handleEdit(node, data) {\n      // 编辑节点\n      console.log(node, data); // 设置编辑状态\n\n      if (!data.isEdit) {\n        this.$set(data, \"isEdit\", true);\n      } // 输入框聚焦\n\n\n      this.$nextTick(() => {\n        if (this.$refs[\"slotTreeInput\" + data[this.id]]) {\n          this.$refs[\"slotTreeInput\" + data[this.id]].$refs.input.focus();\n        }\n      });\n    },\n\n    //拖拽点击事件\n    handleDragStart(node, ev) {// console.log(\"drag start\", node);\n    },\n\n    handleDragEnter(draggingNode, dropNode, ev) {//console.log(\"tree drag enter: \", dropNode.label);\n    },\n\n    handleDragLeave(draggingNode, dropNode, ev) {// console.log(\"tree drag leave: \", dropNode.label);\n    },\n\n    handleDragOver(draggingNode, dropNode, ev) {// console.log(\"tree drag over: \", dropNode.label);\n    },\n\n    handleDragEnd(draggingNode, dropNode, dropType, ev) {// console.log(\"tree drag end: \", dropNode && dropNode.label, dropType);\n    },\n\n    handleDrop(draggingNode, dropNode, dropType, ev) {// console.log(\"tree drop: \", dropNode.label, dropType);\n    },\n\n    //拖拽点击事件\n    allowDrop(draggingNode, dropNode, type) {\n      if (dropNode.data.label === \"二级 3-1\") {\n        return type !== \"inner\";\n      } else {\n        return true;\n      }\n    },\n\n    allowDrag(draggingNode) {\n      return draggingNode.data.label.indexOf(\"三级 3-2-2\") === -1;\n    },\n\n    //顶层标签页切换\n    handleSelect(key, keyPath) {\n      console.log(key, keyPath);\n    },\n\n    //模块管理\n    methodManage() {\n      this.leftShow1 = !this.leftShow1, this.leftShow2 = !this.leftShow2, this.leftShow3 = !this.leftShow3;\n    } //模块选择\n\n\n  },\n  //树形hhh\n  props: {\n    bool: {\n      type: Boolean,\n      default: false\n    }\n  },\n\n  created() {\n    // 初始值\n    this.startId = this.NODE_ID_START;\n  },\n\n  data() {\n    //模块选择树部分\n    const data = [{\n      id: 1,\n      label: '系统管理',\n      children: [{\n        id: 4,\n        label: '系统全管理'\n      }, {\n        id: 5,\n        label: '系统小管理'\n      }]\n    }, {\n      id: 2,\n      label: '系统分析',\n      children: [{\n        id: 6,\n        label: '系统小分析'\n      }, {\n        id: 7,\n        label: '系统循环分析'\n      }, {\n        id: 8,\n        label: '系统高压分析'\n      }]\n    }, {\n      id: 3,\n      label: '系统循环测试',\n      children: [{\n        id: 9,\n        label: '系统部分循环测试'\n      }]\n    }, {\n      id: 10,\n      label: '程序安全测试'\n    }, {\n      id: 11,\n      label: '程序循环测试'\n    }, {\n      id: 12,\n      label: '程序高压测试'\n    }, {\n      id: 13,\n      label: '页面安全测试'\n    }, {\n      id: 14,\n      label: '页面显示测试'\n    }];\n    return {\n      form_name: \"\",\n      form_description: \"\",\n      data: JSON.parse(JSON.stringify(data)),\n      currentEle: null,\n      //操作下拉列表 当前图表元素 省略号\n      dropdownShow: false,\n      //下拉列表当前显示状态\n      setTree: [],\n      // tree数据\n      id: \"id\",\n      // id对应字段\n      MAX_LEVEL: 2,\n      // 设定最大层级\n      NODE_ID_START: 0,\n      // 新增节点id，逐次递减\n      startId: null,\n      //页面可拖拽\n      defaultProps: {\n        children: \"children\",\n        label: \"label\"\n      },\n      dialogFormVisible: false,\n      circleUrl: \"https://cube.elemecdn.com/3/7c/3ea6beec64369c2642b92c6726f1epng.png\",\n      //顶层标签页切换\n      activeIndex2: '1',\n      //左侧模块\n      //树部分\n      data: JSON.parse(JSON.stringify(data)),\n      data: JSON.parse(JSON.stringify(data)),\n      //模块管理部分\n      form: {\n        name: '',\n        region: '',\n        date1: '',\n        date2: '',\n        delivery: true,\n        type: [],\n        resource: '',\n        desc: ''\n      },\n      leftShow1: true,\n      leftShow2: false,\n      leftShow3: false,\n      //项目选择部分\n      options: [{\n        value: '选项1',\n        label: '程序测试'\n      }, {\n        value: '选项2',\n        label: '系统测试'\n      }, {\n        value: '选项3',\n        label: '页面测试 '\n      }],\n      value: '',\n      props: {\n        label: 'name',\n        children: 'zones'\n      },\n      count: 1\n    };\n  }\n\n};","map":{"version":3,"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAwQA;AACA;AACA;EACAA;IAEAC;MAEAC;IACA,CALA;;IAOAC;MACA;QACAC,uBADA;QAEAC,sBAFA;QAGAC;MAHA,GAIAC,IAJA,CAIA;QACA;UACAD,eADA;UAEAE;QAFA;QAIA;UAAAC;QAAA;QACAC;MACA,CAXA,EAWAC,KAXA,CAWA;QACA;UACAL,YADA;UAEAE;QAFA;MAIA,CAhBA;IAiBA,CAzBA;;IA2BA;IACAI,kBA5BA;;IA6BA;IACAC;MACA;IACA,CAhCA;;IAgCA;IACA;IACAC;MACA;MACA;MACA;IACA,CAtCA;;IAuCA;IACA;IACAC;MACAC,yCACA,qBADA,EAEAC,KAFA,CAEAC,OAFA,IAEA,eAFA;MAGA,2DACA,qBADA;IAGA,CAhDA;IAiDA;IACAC;MACA;MACAH,yCACA,qBADA,EAEAC,KAFA,CAEAC,OAFA,IAEA,cAFA;IAGA,CAvDA;;IAwDA;IACAE;MACA;QACAC,QADA;QAEAC,cAFA;QAGAC,YAHA;QAIAC;MAJA;IAMA,CAhEA;;IAiEAC;MACA;QACAC;MADA;MAGA;MACA;MACAC;QACAC;MACA,CAFA;MAKA;MACAD;QACA;;QAGA;UACA,oBACA;YACAE,6BADA;YAEAC,4BAFA;YAGAC,8BAHA;YAIAC,2BAJA;YAKAC,8BALA;YAMAC,gCANA;YAOAC,4BAPA;YAQAC,4BARA;YASAC,oCATA;YAUAC,mCAVA;YAWAC,kCAXA;YAYAC,kCAZA;YAaAC;UAbA,CADA;UAgBAb;QACA;MAGA,CAzBA;IA4BA,CAzGA;;IA2GA;IACAc;MACA,qBACA,gCADA,KAEA,4BACA,iCADA,KAEA;QACA;UACAC,2BADA;UAEAC;QAFA;QAIA;QACAjB;UACA;YACA;YACA;cACAN,QADA;cAEAC,qBAFA;cAGAC,YAHA;cAIAC;YAJA;YAMAtB;UACA,CATA,MAUA,mBACAA;QAEA,CAdA;MAcA;IAEA,CAvIA;;IAyIA;IACA2C;MACA;QACA,sBACA,sCADA;QAGA;MACA,CANA,CAOA;;;MACA;QACAxB,QADA;QAEAC,eAFA;QAGAC,YAHA;QAIAC;MAJA;;MAMA;QACA;MACA;;MACAsB,6BAjBA,CAkBA;;MACAC;MAEA;QACA;UACA;QACA;MACA,CAJA;IAKA,CApKA;;IAqKA;IACAC;MACA;MACA;MACA;MACAzB;IACA,CA3KA;;IA6KA;IACA0B;MACA;MACAF,wBAFA,CAGA;;MACA;QACA;MACA;IACA,CArLA;;IAsLAG;MACA;MACAH,wBAFA,CAGA;;MACA;QACA;MACA,CANA,CAQA;;;MACA;QACA;UACA;QACA;MACA,CAJA;IAKA,CApMA;;IAsMA;IACAI,2BACA;IACA,CAzMA;;IA0MAC,6CACA;IACA,CA5MA;;IA6MAC,6CACA;IACA,CA/MA;;IAgNAC,4CACA;IACA,CAlNA;;IAmNAC,qDACA;IACA,CArNA;;IAsNAC,kDACA;IACA,CAxNA;;IAyNA;IACAC;MACA;QACA;MACA,CAFA,MAEA;QACA;MACA;IACA,CAhOA;;IAiOAC;MACA;IACA,CAnOA;;IAuOA;IACAC,2BACA;MACAZ;IACA,CA3OA;;IA6OA;IACAa;MACA,kCACA,gCADA,EAEA,gCAFA;IAGA,CAlPA,CAoPA;;;EApPA,CADA;EA0PA;EACAC;IACAC;MACAxD,aADA;MAEAyD;IAFA;EADA,CA3PA;;EAiQAC;IACA;IACA;EACA,CApQA;;EAsQAlB;IAGA;IACA;MACAzB,KADA;MAEAC,aAFA;MAGAC;QACAF,KADA;QAEAC;MAFA,GAGA;QACAD,KADA;QAEAC;MAFA,CAHA;IAHA,GAaA;MACAD,KADA;MAEAC,aAFA;MAGAC;QACAF,KADA;QAEAC;MAFA,GAGA;QACAD,KADA;QAEAC;MAFA,CAHA,EAMA;QACAD,KADA;QAEAC;MAFA,CANA;IAHA,CAbA,EA4BA;MACAD,KADA;MAEAC,eAFA;MAGAC;QACAF,KADA;QAEAC;MAFA;IAHA,CA5BA,EAmCA;MACAD,MADA;MAEAC;IAFA,CAnCA,EAsCA;MACAD,MADA;MAEAC;IAFA,CAtCA,EAyCA;MACAD,MADA;MAEAC;IAFA,CAzCA,EA6CA;MACAD,MADA;MAEAC;IAFA,CA7CA,EAgDA;MACAD,MADA;MAEAC;IAFA,CAhDA;IA2DA;MACA2C,aADA;MAEAC,oBAFA;MAIApB,sCAJA;MAKAqB,gBALA;MAKA;MACAC,mBANA;MAMA;MACAC,WAPA;MAOA;MACAhD,QARA;MAQA;MACAiD,YATA;MASA;MACAC,gBAVA;MAUA;MACAC,aAXA;MAYA;MACAC;QACAlD,oBADA;QAEAD;MAFA,CAbA;MAoBAoD,wBApBA;MAqBAC,gFArBA;MAsBA;MACAC,iBAvBA;MAwBA;MACA;MACA9B,sCA1BA;MA2BAA,sCA3BA;MA4BA;MACA+B;QACAC,QADA;QAEAC,UAFA;QAGAC,SAHA;QAIAC,SAJA;QAKAC,cALA;QAMA5E,QANA;QAOA6E,YAPA;QAQAC;MARA,CA7BA;MAwCAC,eAxCA;MAyCAC,gBAzCA;MA0CAC,gBA1CA;MA2CA;MACAC;QACAC,YADA;QAEAnE;MAFA,GAGA;QACAmE,YADA;QAEAnE;MAFA,CAHA,EAMA;QACAmE,YADA;QAEAnE;MAFA,CANA,CA5CA;MAsDAmE,SAtDA;MAuDA5B;QACAvC,aADA;QAEAC;MAFA,CAvDA;MA2DAmE;IA3DA;EA6DA;;AAlYA","names":["methods","handleNodeClick","alert","logoutComfirm","confirmButtonText","cancelButtonText","type","then","message","path","location","catch","handleAllCase","myEvent","handleDropdown","onMouseOver","event","style","cssText","onMouseOut","handleNewMoudle","id","label","children","isEdit","FindBugByModule","Module","axios","n","Bug_Title","Priority","Bug_Status","Creator","creat_time","Bug_End_Date","Assignee","Severity","Operating_System","Related_Modules","Related_Tasks","Related_Needs","Person_In_Charge","NewModuleGo","Module_Name","Module_Description","append","data","console","remove","handleInput","handleEdit","handleDragStart","handleDragEnter","handleDragLeave","handleDragOver","handleDragEnd","handleDrop","allowDrop","allowDrag","handleSelect","methodManage","props","bool","default","created","form_name","form_description","currentEle","dropdownShow","setTree","MAX_LEVEL","NODE_ID_START","startId","defaultProps","dialogFormVisible","circleUrl","activeIndex2","form","name","region","date1","date2","delivery","resource","desc","leftShow1","leftShow2","leftShow3","options","value","count"],"sourceRoot":"src","sources":["App.vue"],"sourcesContent":["<template>\n <el-container style=\"background-color: #e5f2ff;height:720px;margin:0px\">\n \n  <el-header background-color=\"white\" style=\"background-color: #e5f2ff;padding:0px;margin:0px\">\n    <div style=\"background-color:white;position:absolute;width:100%\"></div>\n    \n    <el-row background-color=\"white\" style=\"background-color: #e5f2ff;\">\n    \n        <el-col :span=\"8\"  style=\"background-color:white\" >\n         <div  style=\"height:100px;z-index:100;font-size:20px;color:black;text-align:left;margin-top:-15px\"> 科大国创项目管理系统</div>  </el-col>\n      <el-col :span=\"13\">\n         <el-menu\n\n          default-active=\"bug\"\n          class=\"el-menu-demo\"\n          mode=\"horizontal\"\n          @select=\"handleSelect\"\n          text-color=\"black\"\n          \n\n          active-text-color=\"#ffffff\">\n          <el-menu-item class=\"el-menu-demo\" index=\"workdesk\">工作台</el-menu-item>\n          <el-menu-item class=\"el-menu-demo\"  index=\"bargin\">合同</el-menu-item>    \n          <el-menu-item class=\"el-menu-demo\"  index=\"project\">项目</el-menu-item>\n          <el-menu-item  class=\"el-menu-demo\" index=\"requirement\">需求</el-menu-item>\n          <el-menu-item class=\"el-menu-demo\"  index=\"bug\" background-color=\"#0060d6\" style=\"background-color:#38B7FF\">缺陷</el-menu-item>\n          <el-menu-item  class=\"el-menu-demo\" index=\"pmo\">PMO</el-menu-item>\n        </el-menu>\n      </el-col>\n      <el-col :span=\"3\" style=\"background-color:white;margin:0px;padding:0px;height:100px;text-align:center\">\n        <el-button icon=\"el-icon-user\" style=\"font-size:15px;text-align:center\" type=\"text\" @click=\"logoutComfirm\">退出</el-button>\n      </el-col>/\n    </el-row>\n  </el-header>\n  <div style=\"z-index:100;border:0.5px solid  lightgray;width:100%;\"></div>\n <el-container  style=\"margin:0px;min-height:860px\">\n    <el-header  style=\"background-color: #e5f2ff;padding:0px;margin:0px\">\n    <div class=\"line\"></div>\n    <el-menu\n      :default-active=\"$route.path\"\n      class=\"el-menu-demo\"\n      mode=\"horizontal\"\n      router\n      @select=\"handleSelect\"\n      background-color=\"white\"\n      text-color=\"black\"\n      active-text-color=\"#0060d6\">\n      <el-menu-item index=\"/Bug\" @select=\"routerToBug\">\n        Bug\n      </el-menu-item>\n      <el-menu-item index=\"/UseCase\">\n        测试用例\n      </el-menu-item>    \n      <el-menu-item index=\"/Plan\">\n        测试计划\n      </el-menu-item>\n      <el-menu-item index=\"/Chart\">\n        报表\n      </el-menu-item>\n    </el-menu>\n  </el-header>\n\n  <el-container  style=\"background-color: #e5f2ff;height:100%;margin:0px\">\n    <el-aside id=\"side\"  width=\"300px\" style=\"padding:10px;margin:10px;height:100%\" >\n        <el-select v-model=\"value\" placeholder=\"请选择\" style=\"margin-top:25px;margin-left:30px\">       \n        <el-option\n          v-for=\"item in options\"\n          :key=\"item.value\"\n          :label=\"item.label\"\n          :value=\"item.value\">\n        </el-option>\n      </el-select>\n      <h4 style=\"margin-left:10px;color:black\">模块列表</h4>\n    <div style=\"display:flex;justify-content:flex-end\">\n      <el-button type=\"text\" @click=\"methodManage\" v-show=\"leftShow1\" style=\"margin-right:20px;margin-bottom:10px\">模块管理</el-button>\n      <el-button type=\"text\" @click=\"methodManage();dialogFormVisible = true\" v-show=\"leftShow2\" style=\"margin-right:20px;margin-bottom:10px\">+增加模块</el-button>\n        \n        <!--弹窗部分-->\n        <el-dialog title=\"添加模块\" :visible.sync=\"dialogFormVisible\" >\n          <el-form :model=\"form\">\n          <el-form-item label=\"模块名称\" :label-width=\"formLabelWidth\">\n            <el-input  v-model=\"form_name\" autocomplete=\"off\"></el-input>\n            </el-form-item>\n            <el-form-item label=\"模块描述\" :label-width=\"formLabelWidth\">\n            <el-input v-model=\"form_description\" autocomplete=\"off\"></el-input>\n            </el-form-item>\n          </el-form>\n          <div slot=\"footer\" class=\"dialog-footer\" >\n            <el-button @click=\"dialogFormVisible = false\">取 消</el-button>\n            <el-button type=\"primary\" @click=\"NewModuleGo();dialogFormVisible = false\">确 定</el-button>\n          </div>\n        </el-dialog>\n\n\n      <el-button type=\"text\" @click=\"methodManage\" v-show=\"leftShow3\" style=\"margin-right:20px;margin-bottom:10px\">取消</el-button>\n    </div>\n \n   <!-- 导航菜单 -->\n    <div class=\"custom-tree-container\">\n      <div class=\"block\">\n        <!-- <p>使用 scoped slot</p> -->\n        \n        <el-tree\n          :data=\"data\"\n         @node-click=\"findBugByModule()\"\n          node-key=\"id\"\n          :expand-on-click-node=\"false\"\n         \n          draggable\n          :allow-drop=\"allowDrop\"\n          :allow-drag=\"allowDrag\"\n        >\n          <span\n            class=\"custom-tree-node\"\n            slot-scope=\"{ node, data }\"\n            @mouseenter=\"onMouseOver($event)\"\n            @mouseleave=\"onMouseOut($event)\"\n          >\n            <span v-if=\"!data.isEdit\">{{ node.label }}</span>\n            <span class=\"isEdit\">\n              <!-- 编辑状态 -->\n              <div v-if=\"data.isEdit\">\n                <el-input\n                  v-model=\"data.label\"\n                  autofocus\n                  size=\"mini\"\n                  :ref=\"'slotTreeInput' + data[id]\"\n                  @blur.stop=\"handleInput(node, data)\"\n                  @keyup.enter.native=\"handleInput(node, data)\"\n                ></el-input>\n              </div>\n              <!-- 非编辑状态 -->\n              <div v-else>\n                <!-- 名称： 新增节点增加class（is-new） -->\n                <span\n                  :class=\"[\n                    data[id] < NODE_ID_START ? 'is-new' : '',\n                    'comp-tr-node--name',\n                  ]\"\n                >\n                </span>\n              </div>\n \n              <span class=\"comp-tr-node--btns\" v-show=\"false\">\n                <el-dropdown trigger=\"click\" @visible-change=\"handleDropdown\">\n                  <i class=\"el-icon-more\"></i>\n                  <el-dropdown-menu slot=\"dropdown\">\n                    <el-dropdown-item @click.native=\"() => append(node, data)\">\n                      <i class=\"el-icon-circle-plus-outline\"></i\n                      >新增</el-dropdown-item\n                    >\n                    <el-dropdown-item @click.native=\"handleEdit(node, data)\"\n                      ><i class=\"el-icon-edit\"></i>编辑</el-dropdown-item\n                    >\n                    <el-dropdown-item @click.native=\"() => remove(node, data)\"\n                      ><li class=\"el-icon-delete\"></li>\n                      删除</el-dropdown-item\n                    >\n                  </el-dropdown-menu>\n                </el-dropdown>\n              </span>\n            </span>\n          </span>\n        </el-tree>\n      \n        \n      </div>\n    </div>\n\n    </el-aside>\n    <router-view></router-view>\n     </el-container>\n  </el-container>\n</el-container>\n</template>\n<style >\n<!--主界面 激活菜单-->\n.el-menu-item {\n  background-color: #ffffff;\n}\n.el-menu-item.is-active .el-menu-demo{\n  background-color: #38B7FF !important;\n}\n\n  .allCase {\n    margin-left: 8px;\n    color: #606266;\n    font-size: 14px;\n  }\n\n\n.el-icon-plus {\n  margin: 10px 0 0 22px;\n  color: #606266;\n  font-size: 14px;\n  cursor: pointer;\n}\n\n\n\n\n.el-tree {\n  height: 100%;\n  \n    }\n  \n\n.el-row {\n    margin-bottom: 20px;\n  }\n  .el-col {\n    border-radius: 4px;\n  }\n   .grid-content {\n    border-radius: 4px;\n    min-height: 36px;\n  }\n .custom-tree-node {\n    flex: 1;\n    display: flex;\n    align-items: center;\n    justify-content: space-between;\n    font-size: 14px;\n    padding-right: 8px;\n  }\n.test{\nborder:1px solid  #eaff00;\n}\n.kqtlt{\n      text-align: center;\n    line-height: 60px;\n}\n\n.el-header, .el-footer {\n    background-color: white;\n    color: #D3DCE6;\n\n  }\n  \n  .el-aside {\n    background-color: white;\n    color: #D3DCE6;\n\n  }\n  \n  .el-main {\n    background-color: white;\n    color: #D3DCE6;\n  }\n  \n  body > .el-container {\n    margin-bottom: 40px;\n  }\n  \n  .el-container:nth-child(5) .el-aside,\n  .el-container:nth-child(6) .el-aside {\n    line-height: 260px;\n  }\n  \n  .el-container:nth-child(7) .el-aside {\n    line-height: 320px;\n  }\n</style>\n<script>\nimport axios from 'axios'\nlet id = 1000;\nexport default {\n  methods: {\n\n    handleNodeClick(e){\n     \n      alert(e)\n    },\n\n    logoutComfirm(){\n       this.$confirm('要退出登录吗?', '提示', {\n          confirmButtonText: '确定',\n          cancelButtonText: '取消',\n          type: 'warning'\n        }).then(() => {\n          this.$message({\n            type: 'success',\n            message: '已退出登录'\n          });\n          this.$router.replace({path: '/'});\n          location.reload();\n        }).catch(() => {\n          this.$message({\n            type: 'info',\n            message: '取消操作'\n          });          \n        });\n    },\n\n     //所有用例列表接口\n    handleAllCase() {},\n    //el-tree点击事件\n    myEvent(d1, d2, d3) {\n      this.$emit(\"myEvent\", d1.id);\n    }, //d1.label\n    //下拉列表\n    handleDropdown(v) {\n      this.dropdownShow = v;\n      if (v) return;\n      this.currentEle.style.cssText += \"display:none\";\n    },\n    //增删改鼠标移入移出隐藏显示\n    //鼠标移入\n    onMouseOver: function (event) {\n      event.target.parentElement.querySelector(\n        \".comp-tr-node--btns\"\n      ).style.cssText += \"display:block\";\n      this.currentEle = event.target.parentElement.querySelector(\n        \".comp-tr-node--btns\"\n      );\n    },\n    //鼠标移出\n    onMouseOut: function (event) {\n      if (this.dropdownShow) return;\n      event.target.parentElement.querySelector(\n        \".comp-tr-node--btns\"\n      ).style.cssText += \"display:none\";\n    },\n    //新增一级目录模块点击事件\n    handleNewMoudle() {\n      this.data.push({\n        id: id++,\n        label: \"未命名模块\",\n        children: [],\n        isEdit: true,\n      });\n    },\n     FindBugByModule(){\n        let data2={\n          Module:\"系统安全测试\"\n        }\n        let url1='http://localhost:8081/findBugNumByModule';\n        let n=0;\n        axios.post(url1,data2).then(res=>{\n          n=res.data;\n        }\n        ) \n        \n        let url2='http://localhost:8081/findBugByModule';\n        axios.post(url2,data2).then(res=>{\n          this.tableData=[{\n        }\n        ]\n          while(n-1>=0){\n            this.tableData.push(\n        {\n          Bug_Title:res.data[n-1][0],\n          Priority: res.data[n-1][1],\n          Bug_Status:res.data[n-1][2],\n          Creator:res.data[n-1][3],\n          creat_time:res.data[n-1][4],\n          Bug_End_Date:res.data[n-1][5],\n          Assignee:res.data[n-1][6],\n          Severity:res.data[n-1][7],\n          Operating_System:res.data[n-1][8],\n          Related_Modules:res.data[n-1][9],\n          Related_Tasks:res.data[n-1][10],\n          Related_Needs:res.data[n-1][11],\n          Person_In_Charge:res.data[n-1][12],\n        });\n        n=n-1;\n          }\n            \n        \n        }\n        ) \n        \n      },\n\n    //确定之后加入tree内\n    NewModuleGo() {\n       if(!this.form_name)\n       this.$message.error(\"模块名不能为空！\");\n       else if(!this.form_description)\n       this.$message.error(\"模块描述不能为空！\");\n       else{ \n        let data1 = {\n        Module_Name:this.form_name,\n            Module_Description:this.form_description\n        }\n    let url = 'http://localhost:8081/addModule';\n    axios.post(url,data1).then(res=>{\n       if(res.data==0){\n        //dialogFormVisible = false;\n      this.data.push({\n        id: id++,\n        label: this.form_name,\n        children: [],\n        isEdit: false,\n      });\n      alert(\"插入成功！\")\n       }\n       else if(res.data==1)\n       alert(\"模块名已经存在，请重新输入！\");\n       \n    })}\n      \n    },\n\n    //新增按钮\n    append(node, data) {\n      if (node.level >= this.MAX_LEVEL) {\n        this.$message.warning(\n          \"当前目录已达到\" + this.MAX_LEVEL + \"级，无法新增！\"\n        );\n        return false;\n      }\n      //新定义一个对象\n      const newChild = {\n        id: id++,\n        label: \"请输入模块名\",\n        children: [],\n        isEdit: true,\n      };\n      if (!data.children) {\n        this.$set(data, \"children\", []);\n      }\n      data.children.push(newChild);\n      //新增子节点到3级\n      console.log(node, data);\n \n      this.$nextTick(() => {\n        if (this.$refs[\"slotTreeInput\" + data[this.id]]) {\n          this.$refs[\"slotTreeInput\" + data[this.id]].$refs.input.focus();\n        }\n      });\n    },\n    //删除按钮\n    remove(node, data) {\n      const parent = node.parent;\n      const children = parent.data.children || parent.data;\n      const index = children.findIndex((d) => d.id === data.id);\n      children.splice(index, 1);\n    },\n       \n    //编辑按钮\n    handleInput(node, data) {\n      // 修改节点\n      console.log(node, data);\n      // 退出编辑状态\n      if (data.isEdit) {\n        this.$set(data, \"isEdit\", false);\n      }\n    },\n    handleEdit(node, data) {\n      // 编辑节点\n      console.log(node, data);\n      // 设置编辑状态\n      if (!data.isEdit) {\n        this.$set(data, \"isEdit\", true);\n      }\n \n      // 输入框聚焦\n      this.$nextTick(() => {\n        if (this.$refs[\"slotTreeInput\" + data[this.id]]) {\n          this.$refs[\"slotTreeInput\" + data[this.id]].$refs.input.focus();\n        }\n      });\n    },\n \n    //拖拽点击事件\n    handleDragStart(node, ev) {\n      // console.log(\"drag start\", node);\n    },\n    handleDragEnter(draggingNode, dropNode, ev) {\n      //console.log(\"tree drag enter: \", dropNode.label);\n    },\n    handleDragLeave(draggingNode, dropNode, ev) {\n      // console.log(\"tree drag leave: \", dropNode.label);\n    },\n    handleDragOver(draggingNode, dropNode, ev) {\n      // console.log(\"tree drag over: \", dropNode.label);\n    },\n    handleDragEnd(draggingNode, dropNode, dropType, ev) {\n      // console.log(\"tree drag end: \", dropNode && dropNode.label, dropType);\n    },\n    handleDrop(draggingNode, dropNode, dropType, ev) {\n      // console.log(\"tree drop: \", dropNode.label, dropType);\n    },\n    //拖拽点击事件\n    allowDrop(draggingNode, dropNode, type) {\n      if (dropNode.data.label === \"二级 3-1\") {\n        return type !== \"inner\";\n      } else {\n        return true;\n      }\n    },\n    allowDrag(draggingNode) {\n      return draggingNode.data.label.indexOf(\"三级 3-2-2\") === -1;\n    },\n\n\n\n    //顶层标签页切换\n    handleSelect(key, keyPath) \n      {\n        console.log(key, keyPath);\n      },\n\n    //模块管理\n    methodManage () {\n      this.leftShow1 = !this.leftShow1,\n      this.leftShow2 = !this.leftShow2,\n      this.leftShow3 = !this.leftShow3\n    },\n\n    //模块选择\n\n  },\n\n\n//树形hhh\nprops: {\n    bool: {\n      type: Boolean,\n      default: false,\n    },\n  },\n  created() {\n    // 初始值\n    this.startId = this.NODE_ID_START;\n  },\n\n  data () {\n    \n\n    //模块选择树部分\n    const data = [{\n        id: 1,\n        label: '系统管理',\n        children: [{\n          id: 4,\n          label: '系统全管理',\n        },{\n          id: 5,\n          label:'系统小管理',\n        }\n        ]\n      },\n      \n      {\n        id: 2,\n        label: '系统分析',\n        children: [{\n          id: 6,\n          label: '系统小分析'\n        }, {\n          id: 7,\n          label: '系统循环分析'\n        },{\n          id:8,\n          label:'系统高压分析'\n        }]\n      }, \n      \n      {\n        id: 3,\n        label: '系统循环测试',\n        children: [{\n          id: 9,\n          label: '系统部分循环测试'\n        }]\n      },{\n        id: 10,\n        label:'程序安全测试'\n      },{\n        id:11,\n        label:'程序循环测试'\n      },{\n        id:12,\n        label:'程序高压测试'\n      },\n      {\n        id:13,\n        label:'页面安全测试'\n      },{\n        id:14,\n        label:'页面显示测试'\n      }\n      \n      \n      \n      \n      \n      \n      ];\n    return {\n      form_name:\"\",\n      form_description:\"\",\n      \n      data: JSON.parse(JSON.stringify(data)),\n      currentEle: null, //操作下拉列表 当前图表元素 省略号\n      dropdownShow: false, //下拉列表当前显示状态\n      setTree: [], // tree数据\n      id: \"id\", // id对应字段\n      MAX_LEVEL: 2, // 设定最大层级\n      NODE_ID_START: 0, // 新增节点id，逐次递减\n      startId: null,\n      //页面可拖拽\n      defaultProps: {\n        children: \"children\",\n        label: \"label\",\n      },\n\n\n\n       dialogFormVisible:false, \n       circleUrl: \"https://cube.elemecdn.com/3/7c/3ea6beec64369c2642b92c6726f1epng.png\",\n      //顶层标签页切换\n      activeIndex2: '1',\n      //左侧模块\n      //树部分\n      data: JSON.parse(JSON.stringify(data)),\n      data: JSON.parse(JSON.stringify(data)),\n      //模块管理部分\n      form: {\n          name: '',\n          region: '',\n          date1: '',\n          date2: '',\n          delivery: true,\n          type: [],\n          resource: '',\n          desc: ''\n        },\n\n      leftShow1: true,\n      leftShow2: false,\n      leftShow3: false,\n      //项目选择部分\n      options: [{\n        value: '选项1',\n        label: '程序测试'\n      }, {\n        value: '选项2',\n        label: '系统测试'\n      }, {\n        value: '选项3',\n        label: '页面测试 '\n      }],\n      value: '',\n       props: {\n          label: 'name',\n          children: 'zones'\n        },\n        count: 1\n    }\n  }\n}\n</script>\n"]},"metadata":{},"sourceType":"module"}